var __vite_style__=document.createElement("style");__vite_style__.innerHTML=`:root{--text: #fff;--bg: #000;--rgbBg: 255, 255, 255;--rgbBgSame: 0, 0, 0}:root.light-theme{--text: #000;--bg: #fff;--rgbBg: 0, 0, 0;--rgbBgSame: 255, 255, 255}header{contain:paint}[data-barba-namespace=home] header{contain:none}.hero__name,.hero__name *{transform:translateZ(-1px)}.hero__img{user-select:none;transform:translateZ(1px)}.hero__img img{aspect-ratio:1066/949;opacity:0}.hero__img canvas{position:absolute;top:0;left:0;width:100%;height:100%}.hero__img-gradient{background-image:none;background-color:var(--bg);width:100dvw;left:50%;transform:translate(-50%);transition:background-color .4s cubic-bezier(.25,1,.5,1);-webkit-mask-image:linear-gradient(to bottom,transparent 82%,black 100%);mask-image:linear-gradient(to bottom,transparent 82%,black 100%)}@media screen and (max-width: 1024px){.hero__img img{opacity:1!important;object-fit:cover}.hero__img canvas{display:none!important}}.road__svg{transform-origin:bottom}.road__svg--parent{pointer-events:none}.clients__item{transition:filter .4s cubic-bezier(.25,1,.5,1),opacity .4s cubic-bezier(.25,1,.5,1)}.clients__item:hover{opacity:1}.light-theme .clients__item{filter:invert(1);-webkit-filter:invert(1)}@media screen and (max-width: 991px){.clients__heading .f-200{width:114%}.clients__wrapper{padding-top:33em}}@media screen and (max-width: 480px){.clients__wrapper{padding-top:0}}.testimonial__fade--item .testimonial__name .f-25,.testimonial__fade--item .testimonial__name .f-15{transition:opacity .4s cubic-bezier(.25,1,.5,1) 0s,transform .4s cubic-bezier(.25,1,.5,1) .4s;opacity:0;transform:translateY(20px)}.testimonial__fade--item .testimonial__word{transition:opacity .4s cubic-bezier(.25,1,.5,1);opacity:0}.testimonial__fade--item.active .testimonial__fade--img,.testimonial__fade--item.active .testimonial__name{opacity:1}.testimonial__fade--item.active .testimonial__word{opacity:1;transition-delay:var(--delay)!important}.testimonial__fade--item.active .testimonial__name .f-25{transition:opacity .4s cubic-bezier(.25,1,.5,1) .1s,transform .4s cubic-bezier(.25,1,.5,1) 0s;opacity:1;transform:translateY(0)}.testimonial__fade--item.active .testimonial__name .f-15{transition:opacity .4s cubic-bezier(.25,1,.5,1) .1s,transform .4s cubic-bezier(.25,1,.5,1) .1s;opacity:.5;transform:translateY(0)}.testimonial__track--wrapper{cursor:pointer;overflow-x:clip}.testimonial__track--item{position:absolute;bottom:0;left:0;transform:translate(var(--move));margin-left:0;padding-right:0}.testimonial__track--item .testimonial__track-item-parent{position:relative;overflow:hidden;width:100%;height:100%;display:flex;align-items:flex-end}.testimonial__track--item .testimonial__track--bg{z-index:-1;background-color:#aeaeae;transition:none;right:auto;width:18.27em!important;transition:background-color .4s cubic-bezier(.25,1,.5,1)}.testimonial__track--item img{scale:1.01;filter:grayscale(100%);object-position:50% 15%;height:100%;transition:object-position .4s cubic-bezier(.25,1,.5,1),filter .4s cubic-bezier(.25,1,.5,1),height .4s cubic-bezier(.25,1,.5,1)}.testimonial__track--item [client="Kurt Merriweather"]{object-position:50% 7%}.testimonial__track--item [client="Eli Gratz"]{object-position:50% 11%}.testimonial__track--item .testimonial__track-names{left:0;top:calc(100% + 10px);width:100%;opacity:0;transition:opacity .4s cubic-bezier(.25,1,.5,1);pointer-events:none}.testimonial__track--item:hover .testimonial__track-names{opacity:1}.testimonial__track--item:hover .testimonial__track--bg{background-color:#f10000}.testimonial__track--item.active{height:100%;width:23.68em;padding-right:5.41em}.testimonial__track--item.active img{object-position:bottom;height:90%}.testimonial__track--item.active .testimonial__track--bg{background-color:#f10000}.testimonial__track--item.active .testimonial__track-names{opacity:0!important}.testimonial__arrow{transition:background-color .4s cubic-bezier(.25,1,.5,1),color .4s cubic-bezier(.25,1,.5,1)}.testimonial__arrow.is--back{background-color:#fff3;transform:rotate(180deg)}.testimonial__arrow:hover{background-color:var(--text);color:#f10000}@media screen and (max-width: 991px){section:has(.testimonial){contain:paint}.testimonial__track--item .testimonial__track--bg{width:20.96em!important}.testimonial__track--item.active{width:calc(24.96em - 16px);padding-right:4em!important}}@media screen and (max-width: 480px){.testimonial__track--wrapper{height:73.6em}.testimonial__track--wrapper .testimonial__track--list{height:auto}.testimonial__track--wrapper .testimonial__track--item{width:17.33em;height:24.27em}.testimonial__track--wrapper .testimonial__track--item .testimonial__track--bg{width:27.73em!important}.testimonial__track--wrapper .testimonial__track--item.active{width:27.73em;padding-right:0!important;height:73.6em}.testimonial__track--item{right:auto;left:5.07em}.testimonial__subtitle{top:-10em;left:34.79em}.testimonial__subtitle div{font-size:4.26em;color:var(--text);-webkit-text-stroke:0px;font-family:Neue Haas Grotesk,sans-serif;text-transform:capitalize}}.img-popup{display:block!important;transform-origin:bottom;transform:scale(.5);opacity:0;transition:transform .4s cubic-bezier(.25,1,.5,1),opacity .4s cubic-bezier(.25,1,.5,1);pointer-events:none}.img-popup.active{transform:scale(1);opacity:1}a[img-popup=trigger]{cursor:default;color:var(--text);pointer-events:none}a[img-popup=trigger] .span-line{position:relative}a[img-popup=trigger] .span-line:after{content:"";position:absolute;bottom:-.1em;left:0;width:0%;height:2px;background-color:#f10000;transition:width .4s cubic-bezier(.25,1,.5,1);pointer-events:none}a[img-popup=trigger].text-arrow:after{display:none}a[img-popup=trigger].active{pointer-events:all}a[img-popup=trigger].active .span-line:after{width:100%!important}.beliefs__grid--item,.clients__item img{opacity:0}.beliefs__grid--item{transform:translateY(40px)}.hero__name{display:flex;justify-content:center;align-items:end}.hero__name.scale-vh .f-750{font-size:90.33vh}@media screen and (max-width: 480px){.chall__img.is--2 img{transform:translate(34%)}.beliefs__top--img img{transform:translate(10%)}}@media screen and (min-width: 992px){.beliefs__bot{height:400vh}.beliefs__bot-heading{background-color:var(--bg);transition:background-color .4s cubic-bezier(.25,1,.5,1);z-index:1;padding-top:40px;top:0}.beliefs__triggers{position:absolute;height:100%;pointer-events:none;top:0;left:0;width:100%;display:flex;flex-direction:column;padding-top:50vh}.beliefs__triggers .beliefs__trigger{height:100%}.beliefs__list{position:relative}.beliefs__list .beliefs__item{position:absolute;left:0;top:0;width:100%}.beliefs__list .beliefs__item .beliefs__char{transition:transform .4s cubic-bezier(.25,1,.5,1) 0s,opacity .4s cubic-bezier(.25,1,.5,1) 0s;opacity:0;transform-origin:top;transform:scaleY(0)}.beliefs__list .beliefs__item .beliefs__line{transition:opacity .4s cubic-bezier(.25,1,.5,1) 0s,transform .4s cubic-bezier(.25,1,.5,1) 0s;opacity:0;transform:translateY(20px)}.beliefs__list .beliefs__item .beliefs__bot--img{transition:opacity .4s cubic-bezier(.25,1,.5,1) 0s;opacity:0}.beliefs__list .beliefs__item.active .beliefs__line{transition:opacity .4s cubic-bezier(.25,1,.5,1) var(--delay),transform .4s cubic-bezier(.25,1,.5,1) var(--delay);opacity:1;transform:translateY(0)}.beliefs__list .beliefs__item.active .beliefs__bot--img{transition:opacity .6s cubic-bezier(.25,1,.5,1) .4s;opacity:1}.beliefs__list .beliefs__item.active .beliefs__char{transition:transform .4s cubic-bezier(.25,1,.5,1) var(--delay),opacity .4s cubic-bezier(.25,1,.5,1) var(--delay);opacity:1;transform-origin:bottom;transform:scaleY(1)}}.photography .slider__item{height:500px}.photography__popup{display:block;visibility:hidden;opacity:0;pointer-events:none;transition:visibility .4s cubic-bezier(.25,1,.5,1),opacity .4s cubic-bezier(.25,1,.5,1),background-color .4s cubic-bezier(.25,1,.5,1)}.photography__popup.is-films .photography__img-parent{margin-right:0;margin-left:auto}.photography__popup.is-photos .photography__img-parent{margin-left:auto;margin-right:auto}.photography__popup .f-25,.photography__popup .f-16{transition:opacity .4s cubic-bezier(.25,1,.5,1);opacity:0}.photography-open .photography__popup{visibility:visible;opacity:1;pointer-events:all}.photography-text-show .photography__popup .f-25,.photography-text-show .photography__popup .f-16{opacity:1}.photography__placeholder{overflow:hidden}.photography__placeholder img{scale:1.008;object-fit:contain}.photography__popup{background-color:rgba(var(--rgbBgSame),.85)}@media screen and (max-width: 991px){.photography__popup{height:100dvh;overflow:scroll;padding:10.42em 5.21em 2.21em;display:flex;flex-direction:column}.photography__popup .photography__placeholder{position:static;width:100%!important;height:85em!important;display:flex;align-items:center;justify-content:center;flex-shrink:0}.photography__popup .photography__placeholder .photography__img-parent{margin-left:0;margin-right:0}.photography__popup .popup__films,.photography__popup .popup__photos{position:static;margin-top:2.6em;width:75%}.photography__popup .popup__close{flex-shrink:0;border-color:var(--text);color:var(--bg);background-color:rgba(var(--rgbBg),.6)}}@media screen and (max-width: 480px){.photography__popup{padding-top:10em}.photography__popup.is-photos .photography__placeholder{height:100%!important}.photography__popup.is-photos .popup__close{position:absolute;bottom:2.6em}.photography__popup .photography__placeholder{height:115em!important}.photography__popup .popup__films{position:static;margin-top:10em;width:100%}.photography__popup .popup__photos{position:absolute;bottom:50em;top:auto;display:none!important}}.music__item--audio{pointer-events:none}.music__item--bg{transition:opacity .4s cubic-bezier(.25,1,.5,1),background-color .4s cubic-bezier(.25,1,.5,1);background-color:var(--bg);filter:invert(1)}.music__item--index{position:relative}.music__item--index .f-18{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:.7;transition:opacity .4s cubic-bezier(.25,1,.5,1)}.music__item--index .music__item--pause{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0;transition:opacity .4s cubic-bezier(.25,1,.5,1)}.music__item--index .music__item--play{opacity:0;transition:opacity .4s cubic-bezier(.25,1,.5,1) .1s}.music__item--cover{overflow:hidden}.music__item--cover img{scale:1.04}.music__item--like{opacity:0;transition:opacity .4s cubic-bezier(.25,1,.5,1)}.music__item:hover .music__item--bg{opacity:.1}.music__item:hover .music__item--index .f-18{opacity:0}.music__item:hover .music__item--index .music__item--play,.music__item:hover .music__item--like{opacity:1}.music__item.playing .music__item--bg{opacity:.1}.music__item.playing .music__item--index .f-18,.music__item.playing .music__item--index .music__item--play{opacity:0}.music__item.playing .music__item--index .music__item--pause,.music__item.playing .music__item--like{opacity:1}.games .section-title{pointer-events:none}.games__img img,.games__img .games__video{filter:grayscale(100%);transition:filter .4s cubic-bezier(.25,1,.5,1)}.games__img:hover img,.games__img:hover .games__video{filter:grayscale(0%)}.pets__overflow-img{pointer-events:none}.pets__animate{transform-origin:64.74% 53.67%}.slider__item img{transition:filter .4s cubic-bezier(.25,1,.5,1),-webkit-filter .4s cubic-bezier(.25,1,.5,1);filter:greyscale(100%);-webkit-filter:grayscale(100%)}.slider__item:hover img{filter:grayscale(0%);-webkit-filter:grayscale(0%)}[data-barba-namespace=loves]{overflow:clip}@media screen and (max-width: 480px){.anime .section-title-loop:last-child{display:none}.anime .section-title-loop:first-child{display:block;margin:auto}.anime .section-title-loop:first-child .f-450,.anime .section-title-loop:first-child .f-450 .stroke{display:block}.anime .section-title-loop:first-child .f-450:last-child .stroke{display:none}.anime .section-title-loop:first-child .f-450:last-child .col-red{color:transparent;-webkit-text-stroke:1px #f10000}}.hero__img.is--loves .img-contain{aspect-ratio:1011/952}@media (hover: hover){.thoughts__item .f-70{transition:font-size .4s cubic-bezier(.25,1,.5,1),top .4s cubic-bezier(.25,1,.5,1),transform .4s cubic-bezier(.25,1,.5,1);position:absolute;top:4.2vw;transform:translateY(0)}.thoughts__item .f-25{transition:opacity .4s cubic-bezier(.25,1,.5,1)}.thoughts__item .thoughts__overlay{display:flex;pointer-events:none;z-index:-1}.thoughts__item .thoughts__item-char{opacity:0;transform:translateY(20%);transition:opacity .4s cubic-bezier(.25,1,.5,1),transform .4s cubic-bezier(.25,1,.5,1)}.thoughts__item .thoughts__overlay-bg{transform-origin:top;transform:scaleY(0);width:100em;opacity:0;transition:transform .4s cubic-bezier(.25,1,.5,1),opacity .4s cubic-bezier(.25,1,.5,1)}.thoughts__item .thoughts__overlay-arrow{opacity:0;transition:opacity .4s cubic-bezier(.25,1,.5,1)}.thoughts__item:hover .f-70{font-size:6.6em;position:absolute;top:50%;transform:translateY(-50%);max-width:76.39vw}.thoughts__item:hover .f-25{opacity:0}.thoughts__item:hover .thoughts__overlay{pointer-events:all}.thoughts__item:hover .thoughts__overlay-bg{transform-origin:bottom;transform:scaleY(1);opacity:1}.thoughts__item:hover .thoughts__overlay-arrow{opacity:1;color:#0effff}}@media screen and (max-width: 480px){.thoughts__item .f-70{position:static}}.thoughts__item{display:none}.thoughts__item.active{display:block}.thoughts__tags-item{transition:color .4s cubic-bezier(.25,1,.5,1)}.thoughts__tags-item.active{color:#f10000}.thoughts__tags-item:hover{color:#0effff}.thoughts__tags-line{transition:width .4s cubic-bezier(.25,1,.5,1),left .4s cubic-bezier(.25,1,.5,1);position:absolute;left:0;height:2px;background-color:#f10000;bottom:0;width:var(--width)}.thoughts__tags-bg{background-color:var(--text);transition:background-color .4s cubic-bezier(.25,1,.5,1)}.thoughts__item{border-bottom:1px solid rgba(var(--rgbBg),.25)!important;transition:border-color .4s cubic-bezier(.25,1,.5,1)}@media screen and (max-width: 991px){.thoughts__tags-item{transition:color .4s cubic-bezier(.25,1,.5,1)}.thoughts__tags-item:hover{color:#f10000}}.hero__img.is--thoughts{aspect-ratio:927/627}@media screen and (max-width: 480px){[data-barba-namespace=thoughts] .next__title{align-items:center}}.article__back .article-back__arrow{overflow:hidden}.article__back .article-back__arrow .svg{transition:transform .4s cubic-bezier(.25,1,.5,1);transform:translate(50%)}.article__back:hover .svg{transform:translate(0)}.article__tags--item{transition:background-color .4s cubic-bezier(.25,1,.5,1);background-color:rgba(var(--rgbBg),.1)}.article__large-img{transition:clip-path 1s cubic-bezier(.25,1,.5,1);clip-path:polygon(0 0%,0 0,0% 0,100% 100%,100% 100%,100% 100%)}.article__large-img.faded{clip-path:polygon(0 100%,0 0,100% 0,100% 0,100% 100%,0 100%)}.w-richtext figure.w-richtext-figure-type-video,.w-richtext figure[data-rt-type=video]{width:100%;padding-bottom:55.723653%!important}.w-richtext-figure-type-video{opacity:0;transition:opacity .4s cubic-bezier(.25,1,.5,1)}.w-richtext-figure-type-video.faded{opacity:1}.w-richtext figure{max-width:none;contain:paint}.w-richtext figure div img{scale:1.006;transition:clip-path 1s cubic-bezier(.25,1,.5,1);clip-path:polygon(0 0%,0 0,0% 0,100% 100%,100% 100%,100% 100%)}.w-richtext figure div img.faded{clip-path:polygon(0 100%,0 0,100% 0,100% 0,100% 100%,0 100%)}.article-quoute__line{transform:scaleY(0);transform-origin:top;transition:transform .4s cubic-bezier(.25,1,.5,1)}.article-quoute__line.faded{transform:scaleY(1)}.thoughts__wrapper.is--inner .thoughts__item{display:block}[data-barba-namespace=article] .rich-text p{color:#e4e4e4;transition:color .4s cubic-bezier(.25,1,.5,1)}[data-barba-namespace=article] .rich-text a{color:#f10000}[data-barba-namespace=article] .rich-text figure a{color:var(--text)}.light-theme [data-barba-namespace=article] .rich-text p{color:#1a1a1a}.help__right--item{position:absolute;left:0;top:0;pointer-events:none;width:100%;transition:opacity .4s cubic-bezier(.25,1,.5,1)}.help__right--item .help__right--bot{transition:background-color .4s cubic-bezier(.25,1,.5,1);background-color:transparent}.help__right--item.show-bot .help__right--bot{background-color:#f10000}.help__right--item .help__right--img{position:relative;width:100%;overflow:hidden}.help__right--item .help__right--img img{transition:transform .4s cubic-bezier(.25,1,.5,1);position:absolute;top:0;left:0;width:100%;height:100%;transform:scaleY(0);transform-origin:top}.help__right--item .help-chars{transition:transform .4s cubic-bezier(.25,1,.5,1),opacity .4s cubic-bezier(.25,1,.5,1);opacity:0;transform:scaleY(0);transform-origin:top}.help__right--item .help-lines,.help__right--item li{transition:opacity .4s cubic-bezier(.25,1,.5,1) transform .4s cubic-bezier(.25,1,.5,1);opacity:0;transform:translateY(20%)}.help__right--item.active{pointer-events:all}.help__right--item.active .help-chars{transition:transform .4s cubic-bezier(.25,1,.5,1) var(--delay),opacity .4s cubic-bezier(.25,1,.5,1) var(--delay);opacity:1;transform:scaleY(1);transform-origin:bottom}.help__right--item.active .help-lines,.help__right--item.active li{transition:opacity .4s cubic-bezier(.25,1,.5,1) var(--delay),transform .4s cubic-bezier(.25,1,.5,1) var(--delay);opacity:1;transform:translateY(0)}.help__right--item.active .help__right--img img{transform:scaleY(1);transform-origin:bottom}.help__left--item{transition:color .4s cubic-bezier(.25,1,.5,1);cursor:pointer}.help__left--item .help__arrow{transition:transform .4s cubic-bezier(.25,1,.5,1),opacity .4s cubic-bezier(.25,1,.5,1),color .4s cubic-bezier(.25,1,.5,1);opacity:0}.help__left--item.active{color:#f10000}.help__left--item.active .f-35{font-weight:500}.help__left--item.active .help__arrow{opacity:1}.help__left--item:hover{color:#f10000}.help__left--item:hover .help__arrow{opacity:1;color:#fff}.help__right--bot ul{margin-top:0;margin-bottom:0}@media screen and (max-width: 480px){.help__right{height:var(--height)}}.contact__bot{transition:background-color .4s cubic-bezier(.25,1,.5,1),color .4s cubic-bezier(.25,1,.5,1);background-color:var(--text);color:var(--bg)}.contact__map{transition:filter .4s cubic-bezier(.25,1,.5,1);filter:invert(0)}.light-theme .contact__map{filter:invert(1)}.contact__bot--link{position:relative}.contact__bot--link:before{content:"";position:absolute;bottom:0px;left:0;width:100%;height:2px;background-color:var(--bg);transform:scaleX(0);transition:transform .4s cubic-bezier(.25,1,.5,1);transform-origin:right}.contact__bot--link:hover:before{transform:scaleX(1);transform-origin:left}.contact__btn{transition:background-color .4s cubic-bezier(.25,1,.5,1),color .4s cubic-bezier(.25,1,.5,1)}.contact__btn:hover{background-color:#fff;color:#000}.hero-contact__text{position:absolute;inset:0}.contact-chars{opacity:0}.hero-contact__img{transition:clip-path 1s cubic-bezier(.25,1,.5,1);clip-path:polygon(0 0%,0 0,0% 0,100% 100%,100% 100%,100% 100%)}.hero-contact__img.faded{clip-path:polygon(0 100%,0 0,100% 0,100% 0,100% 100%,0 100%)}.resume-heading{pointer-events:none}.traveled__img img,.facts__img img{transition:filter .4s cubic-bezier(.25,1,.5,1),-webkit-filter .4s cubic-bezier(.25,1,.5,1);filter:greyscale(100%);-webkit-filter:grayscale(100%);width:100%;height:100%;scale:1.06}.traveled__img:hover img,.facts__img:hover img{filter:grayscale(0%);-webkit-filter:grayscale(0%)}.traveled__audio{pointer-events:none}.cursor-lines{position:absolute;width:90%;height:90%;top:5%;left:5%;opacity:0;display:flex;align-items:center;justify-content:center;transition:opacity .4s cubic-bezier(.25,1,.5,1);gap:1px}.cursor-lines .cursor-line{flex-shrink:1;flex-grow:1;height:var(--size);background-color:#f10000;border-radius:100vw;transition:height .4s cubic-bezier(.25,1,.5,1)}.playing .cursor-lines{opacity:1}.playing .cursor-text{transform:scale(0)!important}[audio-parent]{cursor:pointer}.hero__name .f-750.is--life{gap:5vw}.traveled__paragraph a{color:#f10000;pointer-events:all;cursor:pointer}.work__item{display:none}.work__item.active{display:block}.work__item{cursor:pointer}.work__item .f-250{-webkit-text-stroke:2px transparent;color:var(--text);transition:color .4s cubic-bezier(.25,1,.5,1),-webkit-text-stroke .4s cubic-bezier(.25,1,.5,1)}.work__item.inactive .f-250{-webkit-text-stroke:2px var(--text);color:transparent}.work__popup-slider-item.swiper-slide{display:flex}.work__popup-slider-video{position:absolute;left:0;top:0;width:100%;height:100%;z-index:1}.work__popup-slider-video video{width:100%;height:100%;object-fit:cover;z-index:-100;background-position:50%;background-size:cover;margin:auto;position:absolute;top:-100%;bottom:-100%;left:-100%;right:-100%}.work__popup{display:block;opacity:0;visibility:hidden;pointer-events:none;transition:opacity .4s cubic-bezier(.25,1,.5,1),visibility .4s cubic-bezier(.25,1,.5,1),background-color .4s cubic-bezier(.25,1,.5,1);background-color:var(--bg);transform:translateZ(4px)}.work__popup *{pointer-events:none!important}.work__popup.active{opacity:1;visibility:visible;pointer-events:auto}.work__popup.active *{pointer-events:auto!important}.work__popup .article-back__arrow{visibility:visible}.work__popup-list{position:relative}[popup-name]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;visibility:hidden;pointer-events:none;transition:opacity .4s cubic-bezier(.25,1,.5,1),visibility .4s cubic-bezier(.25,1,.5,1);display:block;overflow:scroll;height:100vh}[popup-name].active{opacity:1;visibility:visible;pointer-events:auto}[popup-name] .work__popup-back{margin-left:-1.5em}.work__popup-info-item{position:absolute;top:0;left:0;width:100%;opacity:0;visibility:hidden;pointer-events:none;transition:opacity .4s cubic-bezier(.25,1,.5,1),visibility .4s cubic-bezier(.25,1,.5,1)}.work__popup-info-item.active{opacity:1;visibility:visible;pointer-events:auto}.work__popup-slider-list,.work__popup-slider-item{height:48.75em!important}.work__popup-slider-item{width:64.9305555556em!important}.work__popup-info-parent{transition:min-height .4s cubic-bezier(.25,1,.5,1)}.work__popup-info-parent.expand{min-height:var(--height)}.work__popup-info-point.is--single .f-25.light{overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;position:relative}.work__popup-info-point.is--single.expand .f-25.light{-webkit-line-clamp:var(--length)}.work__popup-info-point.is--single .show-more{position:absolute;right:0;bottom:0;z-index:3;cursor:pointer}@media screen and (max-width: 991px){.work__popup-info-point.is--single .f-25.light{overflow:hidden;display:-webkit-box;-webkit-line-clamp:inherit;-webkit-box-orient:vertical;position:relative}}.work__item .f-250{position:relative;z-index:2}.work__item .work__img{top:var(--top);left:var(--left);opacity:0;transition:opacity .4s cubic-bezier(.25,1,.5,1),scale .4s cubic-bezier(.25,1,.5,1);scale:.6;pointer-events:none}.work__item:nth-child(4n+1) .work__img{opacity:.2;scale:1}.work__item:first-child .work__img{top:-7em;left:-4em}.work__item:last-child .work__img{top:95%;left:10em}.work__item.hover{z-index:3}.work__item.hover .work__img{opacity:1;scale:1}.industries__item,.services__item,.services__vertical-title,.career .button{opacity:0;transform:translateY(101%)}.process__circle{border-color:var(--text);transition:border-color .4s cubic-bezier(.25,1,.5,1)}.career__video{pointer-events:none;transition:filter .4s cubic-bezier(.25,1,.5,1),-webkit-filter .4s cubic-bezier(.25,1,.5,1);filter:invert(0);-webkit-filter:invert(0)}.light-theme .career__video{filter:invert(1);-webkit-filter:invert(1)}@media screen and (max-width: 480px){.career .large-text{align-items:start}}.career__paragraph a,.studio__descr a{color:#f10000;pointer-events:all;cursor:pointer}.loader .f-1190{background-image:linear-gradient(#f10000,#f10000);background-repeat:no-repeat;background-size:100% 100%;-webkit-text-stroke:#f10000 1px;-webkit-text-fill-color:transparent;background-clip:text;-webkit-background-clip:text}.loader.complete{transition-delay:.6s!important;transition:opacity .6s cubic-bezier(.25,1,.5,1),visibility .6s cubic-bezier(.25,1,.5,1);opacity:0!important;visibility:hidden!important;pointer-events:none!important}.loader.complete .f-1190{transition-delay:0s!important;transition:transform .6s cubic-bezier(.25,1,.5,1),font-size .6s cubic-bezier(.25,1,.5,1);transform:translate(0)!important;font-size:52.08em!important}.loader.complete .loader__text{transition-delay:0s!important;transition:transform .6s cubic-bezier(.25,1,.5,1),top .6s cubic-bezier(.25,1,.5,1),bottom .6s cubic-bezier(.25,1,.5,1);transform:rotate(0)!important}.loader.complete .loader__text.scale-vh{width:100%;display:flex!important;justify-content:center!important;align-items:end!important}.loader.complete .loader__text.scale-vh .f-1190{font-size:90.33vh!important}@media screen and (max-width: 991px){.loader.complete .f-1190{font-size:48.18em!important}}@media screen and (max-width: 480px){.loader.complete .f-1190{font-size:48.8em!important}.loader .loader__text{width:100%}.loader .loader__text .f-1190{text-align:center;margin:auto}}.loader__home,.loader__all{display:none}.loader-all{visibility:visible;opacity:1;transition:opacity .4s cubic-bezier(.25,1,.5,1),visibility .4s cubic-bezier(.25,1,.5,1)}.loader-all .loader__all{display:block;visibility:visible}.loader-home{visibility:visible}.loader-home .loader__home{display:block;visibility:visible}.loader__bot .loader__bot--text-char{opacity:0;transform:scaleY(0);transform-origin:bottom;transition:opacity .8s cubic-bezier(.25,1,.5,1),transform .8s cubic-bezier(.25,1,.5,1)}.loader__bot .loader__counter{opacity:0;transition:opacity .8s cubic-bezier(.25,1,.5,1) .2s;-webkit-mask-image:linear-gradient(to top,black 82%,transparent 100%);mask-image:linear-gradient(to top,black 82%,transparent 100%)}.loader__bot .loader__percent .f-400{opacity:0;transform:scaleY(0);transform-origin:bottom;transition:opacity .8s cubic-bezier(.25,1,.5,1) .6s,transform .8s cubic-bezier(.25,1,.5,1) .6s}.loader__bot.show .loader__bot--text-char,.loader__bot.show .loader__percent .f-400,.loader__bot.show .loader__counter{opacity:1;transform:scaleY(1)}.loader__points{opacity:0;transition:opacity .4s cubic-bezier(.25,1,.5,1)}.loader__points.show{opacity:1}.loader__points .f-32{opacity:.25;transition:opacity .4s cubic-bezier(.25,1,.5,1)}.loader__points .f-32.active{opacity:1}@media screen and (max-width: 480px){.loader__logo{z-index:3}.loader{z-index:12}}.light-theme .loader{background-color:var(--bg);color:var(--text)}label.error{font-size:.8rem;color:#f10000;width:100%;font-weight:400;position:absolute;bottom:.1rem;right:.5rem;text-align:right}label.error.hide{display:none}input.error{outline:1px solid #f10000;outline-offset:-1px;border-radius:.9375rem;background-color:#ff7a0a14}.container:has(.next){padding:0}.next{transition:color .4s cubic-bezier(.25,1,.5,1)}.next__bg{background-color:var(--text);transition:background-color .4s cubic-bezier(.25,1,.5,1),opacity .4s cubic-bezier(.25,1,.5,1);opacity:.1}.next .next__bg--hover{transform-origin:top;transform:scaleY(0);background-color:#f10000;opacity:0;transition:transform .4s cubic-bezier(.25,1,.5,1),opacity .4s cubic-bezier(.25,1,.5,1);z-index:-1}.next .col-red{transition:color .4s cubic-bezier(.25,1,.5,1)}.next:hover{color:#fff}.next:hover .next__bg--hover{transform-origin:bottom;transform:scaleY(1);opacity:1}.next:hover .col-red{color:#fff}.next:hover .stroke{-webkit-text-stroke-color:#fff!important}body{transition:background-color .4s cubic-bezier(.25,1,.5,1),color .4s cubic-bezier(.25,1,.5,1)}.stroke{transition:-webkit-text-stroke-color .4s cubic-bezier(.25,1,.5,1);-webkit-text-stroke-color:var(--text)!important}.nav__switcher{transition:background-color .4s cubic-bezier(.25,1,.5,1)}.nav__switcher--icon-parent{transition:translate .4s cubic-bezier(.25,1,.5,1),background-color .4s cubic-bezier(.25,1,.5,1)}.nav__switcher--icon-parent .nav__switcher--icon{transition:opacity .4s cubic-bezier(.25,1,.5,1);opacity:1}.nav__switcher--icon-parent .nav__switcher--icon:last-child{opacity:0}.light-theme body{background-color:var(--bg);color:var(--text)}.light-theme body .nav__switcher{background-color:var(--text)}.light-theme body .nav__switcher--icon-parent{translate:100% 0;background-color:var(--bg);color:var(--text)}.light-theme body .nav__switcher--icon-parent .nav__switcher--icon{opacity:0}.light-theme body .nav__switcher--icon-parent .nav__switcher--icon:last-child{opacity:1}.footer .footer__signature path{transition:fill .4s cubic-bezier(.25,1,.5,1);fill:var(--text)}.footer .footer__social{transition:opacity .4s cubic-bezier(.25,1,.5,1),color .4s cubic-bezier(.25,1,.5,1)}.footer .footer__social:hover{opacity:1;color:#0effff}@media screen and (max-width: 991px){.footer .footer__social:hover{opacity:1;color:#f10000}}.cursor-wrapper{--size: 1.53em;mix-blend-mode:difference;width:var(--size);height:var(--size);transition:height .4s cubic-bezier(.25,1,.5,1) .1s,width .4s cubic-bezier(.25,1,.5,1) .1s}.cursor-wrapper .cursor{background-color:#fff;transition:opacity .4s cubic-bezier(.25,1,.5,1);opacity:0;transition:width .4s cubic-bezier(.25,1,.5,1),height .4s cubic-bezier(.25,1,.5,1),opacity,transform .1s ease}.cursor-wrapper .cursor.change{transition:transform .4s cubic-bezier(.25,1,.5,1),width .4s cubic-bezier(.25,1,.5,1),height .4s cubic-bezier(.25,1,.5,1),opacity;transform:translate(var(--left),var(--top))!important;width:var(--width)!important;height:var(--height)!important;top:0!important;left:0!important}.cursor-wrapper .cursor.invert{background-color:#0effff}.cursor-wrapper .cursor.border-change{border-radius:0}.cursor-wrapper .cursor .cursor-text{transition:transform .4s cubic-bezier(.25,1,.5,1) .1s}.cursor-wrapper .cursor div{color:var(--bg)}body:hover .cursor{opacity:1}.cursor-wrapper.show-text .cursor{background-color:var(--text)}.cursor-wrapper.show-text .cursor div{color:var(--bg)}.cursor-wrapper.show-text .cursor .cursor-text{transform:scale(1)}.remove-blend,.show-text{mix-blend-mode:normal}[svg-invert]:hover{color:#0effff}@media screen and (max-width: 1024px){.cursor-wrapper{display:none}}[img-fade]{transition:clip-path 1s cubic-bezier(.25,1,.5,1);clip-path:polygon(0 0%,0 0,0% 0,100% 100%,100% 100%,100% 100%)}[img-fade].faded{clip-path:polygon(0 100%,0 0,100% 0,100% 0,100% 100%,0 100%)}.nav,.burger,.screensaver,.loader{transform:translateZ(2px)}.nav__overlay{--color: 0, 0, 0;background-image:linear-gradient(rgba(var(--color),.75),rgba(0,0,0,0));transition:transform .4s cubic-bezier(.25,1,.5,1);transform:translateY(0);pointer-events:none}.light-theme .nav__overlay{--color: 255, 255, 255}.at-top .nav__overlay{transform:translateY(-100%)}.nav__item{border-radius:100vw;background-color:transparent;transition:background-color .4s cubic-bezier(.25,1,.5,1),color .4s cubic-bezier(.25,1,.5,1)}.nav__item.w--current{background-color:var(--text);color:var(--bg)}.nav__list,.nav__switcher,.nav__overlay{opacity:1;transition:opacity .8s cubic-bezier(.25,1,.5,1)}.loading .nav__list,.loading .nav__switcher,.loading .nav__overlay,.hide-nav .nav__list,.hide-nav .nav__switcher,.hide-nav .nav__overlay{opacity:0;pointer-events:none}@media screen and (max-width: 1024px){.nav__overlay{transform:translateY(0)!important}}@media screen and (max-width: 480px){.nav{transition:background-color .4s cubic-bezier(.25,1,.5,1),border-color .4s cubic-bezier(.25,1,.5,1);background-color:var(--bg);border-color:rgba(var(--rgbBg),.2)}.nav__burger{transition:color .4s cubic-bezier(.25,1,.5,1);color:var(--text)}.nav__burger .nav__burger-line{transition:background-color .4s cubic-bezier(.25,1,.5,1);background-color:var(--text)}.hide-nav .nav{opacity:0!important;pointer-events:none}}@media screen and (max-width: 991px){.nav{transition:opacity .4s cubic-bezier(.25,1,.5,1),visibility .4s cubic-bezier(.25,1,.5,1)}.nav.loading{opacity:0!important;visibility:hidden!important}}[text-line] *{display:inline!important}[text-line=no-span] .text-line{display:block!important}.button{transition:color .4s cubic-bezier(.25,1,.5,1)}.button:hover{color:#0effff}.burger{background-color:var(--bg);display:block;pointer-events:none;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.burger .burger__item{opacity:0;transform:translateY(20%);transition:opacity 0s linear .3s,transform 0s linear .3s}.burger .burger__item.w--current .f-200{color:#f10000;-webkit-text-stroke-color:#f10000}.burger .burger__item .f-200{font-size:26.67em;color:transparent;-webkit-text-stroke:1px var(--text)}.nav__burger-icon{overflow:hidden}.nav__burger-icon .nav__burger-line{transition:transform .4s cubic-bezier(.25,1,.5,1),top .4s cubic-bezier(.25,1,.5,1),bottom .4s cubic-bezier(.25,1,.5,1)}.nav__burger-close{transition:opacity .4s cubic-bezier(.25,1,.5,1);display:block;opacity:0;pointer-events:none;left:calc(100% + 2.67em);top:50%;transform:translateY(-50%)}.burger-open .burger{pointer-events:all;opacity:1;visibility:visible}.burger-open .burger .burger__item{opacity:1;transform:translateY(0);transition:opacity .4s cubic-bezier(.25,1,.5,1) var(--delay),transform .4s cubic-bezier(.25,1,.5,1) var(--delay)}.burger-open .nav__burger-icon .nav__burger-line:nth-child(1){transform:translateY(-50%) rotate(45deg) translate(-.5px);top:50%}.burger-open .nav__burger-icon .nav__burger-line:nth-child(2){transform:translate(-100%)}.burger-open .nav__burger-icon .nav__burger-line:nth-child(3){transform:translateY(-50%) rotate(-45deg) translate(-.5px);bottom:50%}.burger-open .nav__burger-close{opacity:1;pointer-events:all}.screensaver{display:block;pointer-events:none}.screensaver .f-48{opacity:0}.screensaver.show{display:block}.screensaver__row{transform:translate(var(--transform))}.beliefs__top--title{pointer-events:none}::selection{background-color:var(--text);color:#f10000;-webkit-text-fill-color:#f10000;-webkit-text-stroke-color:transparent}::-webkit-scrollbar{width:0;background:transparent}@font-face{font-family:swiper-icons;src:url(data:application/font-woff;charset=utf-8;base64,\\ d09GRgABAAAAAAZgABAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAGRAAAABoAAAAci6qHkUdERUYAAAWgAAAAIwAAACQAYABXR1BPUwAABhQAAAAuAAAANuAY7+xHU1VCAAAFxAAAAFAAAABm2fPczU9TLzIAAAHcAAAASgAAAGBP9V5RY21hcAAAAkQAAACIAAABYt6F0cBjdnQgAAACzAAAAAQAAAAEABEBRGdhc3AAAAWYAAAACAAAAAj//wADZ2x5ZgAAAywAAADMAAAD2MHtryVoZWFkAAABbAAAADAAAAA2E2+eoWhoZWEAAAGcAAAAHwAAACQC9gDzaG10eAAAAigAAAAZAAAArgJkABFsb2NhAAAC0AAAAFoAAABaFQAUGG1heHAAAAG8AAAAHwAAACAAcABAbmFtZQAAA/gAAAE5AAACXvFdBwlwb3N0AAAFNAAAAGIAAACE5s74hXjaY2BkYGAAYpf5Hu/j+W2+MnAzMYDAzaX6QjD6/4//Bxj5GA8AuRwMYGkAPywL13jaY2BkYGA88P8Agx4j+/8fQDYfA1AEBWgDAIB2BOoAeNpjYGRgYNBh4GdgYgABEMnIABJzYNADCQAACWgAsQB42mNgYfzCOIGBlYGB0YcxjYGBwR1Kf2WQZGhhYGBiYGVmgAFGBiQQkOaawtDAoMBQxXjg/wEGPcYDDA4wNUA2CCgwsAAAO4EL6gAAeNpj2M0gyAACqxgGNWBkZ2D4/wMA+xkDdgAAAHjaY2BgYGaAYBkGRgYQiAHyGMF8FgYHIM3DwMHABGQrMOgyWDLEM1T9/w8UBfEMgLzE////P/5//f/V/xv+r4eaAAeMbAxwIUYmIMHEgKYAYjUcsDAwsLKxc3BycfPw8jEQA/gZBASFhEVExcQlJKWkZWTl5BUUlZRVVNXUNTQZBgMAAMR+E+gAEQFEAAAAKgAqACoANAA+AEgAUgBcAGYAcAB6AIQAjgCYAKIArAC2AMAAygDUAN4A6ADyAPwBBgEQARoBJAEuATgBQgFMAVYBYAFqAXQBfgGIAZIBnAGmAbIBzgHsAAB42u2NMQ6CUAyGW568x9AneYYgm4MJbhKFaExIOAVX8ApewSt4Bic4AfeAid3VOBixDxfPYEza5O+Xfi04YADggiUIULCuEJK8VhO4bSvpdnktHI5QCYtdi2sl8ZnXaHlqUrNKzdKcT8cjlq+rwZSvIVczNiezsfnP/uznmfPFBNODM2K7MTQ45YEAZqGP81AmGGcF3iPqOop0r1SPTaTbVkfUe4HXj97wYE+yNwWYxwWu4v1ugWHgo3S1XdZEVqWM7ET0cfnLGxWfkgR42o2PvWrDMBSFj/IHLaF0zKjRgdiVMwScNRAoWUoH78Y2icB/yIY09An6AH2Bdu/UB+yxopYshQiEvnvu0dURgDt8QeC8PDw7Fpji3fEA4z/PEJ6YOB5hKh4dj3EvXhxPqH/SKUY3rJ7srZ4FZnh1PMAtPhwP6fl2PMJMPDgeQ4rY8YT6Gzao0eAEA409DuggmTnFnOcSCiEiLMgxCiTI6Cq5DZUd3Qmp10vO0LaLTd2cjN4fOumlc7lUYbSQcZFkutRG7g6JKZKy0RmdLY680CDnEJ+UMkpFFe1RN7nxdVpXrC4aTtnaurOnYercZg2YVmLN/d/gczfEimrE/fs/bOuq29Zmn8tloORaXgZgGa78yO9/cnXm2BpaGvq25Dv9S4E9+5SIc9PqupJKhYFSSl47+Qcr1mYNAAAAeNptw0cKwkAAAMDZJA8Q7OUJvkLsPfZ6zFVERPy8qHh2YER+3i/BP83vIBLLySsoKimrqKqpa2hp6+jq6RsYGhmbmJqZSy0sraxtbO3sHRydnEMU4uR6yx7JJXveP7WrDycAAAAAAAH//wACeNpjYGRgYOABYhkgZgJCZgZNBkYGLQZtIJsFLMYAAAw3ALgAeNolizEKgDAQBCchRbC2sFER0YD6qVQiBCv/H9ezGI6Z5XBAw8CBK/m5iQQVauVbXLnOrMZv2oLdKFa8Pjuru2hJzGabmOSLzNMzvutpB3N42mNgZGBg4GKQYzBhYMxJLMlj4GBgAYow/P/PAJJhLM6sSoWKfWCAAwDAjgbRAAB42mNgYGBkAIIbCZo5IPrmUn0hGA0AO8EFTQAA);font-weight:400;font-style:normal}:root{--swiper-theme-color:#007aff}.swiper,swiper-container{margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);box-sizing:content-box}.swiper-android .swiper-slide,.swiper-wrapper{transform:translateZ(0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}.swiper-slide,swiper-slide{flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}.swiper-slide-invisible-blank{visibility:hidden}.swiper-autoheight,.swiper-autoheight .swiper-slide{height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden .swiper-slide{transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d .swiper-slide,.swiper-3d .swiper-slide-shadow,.swiper-3d .swiper-slide-shadow-bottom,.swiper-3d .swiper-slide-shadow-left,.swiper-3d .swiper-slide-shadow-right,.swiper-3d .swiper-slide-shadow-top{transform-style:preserve-3d}.swiper-3d .swiper-slide-shadow,.swiper-3d .swiper-slide-shadow-bottom,.swiper-3d .swiper-slide-shadow-left,.swiper-3d .swiper-slide-shadow-right,.swiper-3d .swiper-slide-shadow-top{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}.swiper-3d .swiper-slide-shadow{background:rgba(0,0,0,.15)}.swiper-3d .swiper-slide-shadow-left{background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-right{background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-top{background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-bottom{background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:start start}.swiper-horizontal.swiper-css-mode>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-vertical.swiper-css-mode>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-centered>.swiper-wrapper:before{content:"";flex-shrink:0;order:9999}.swiper-centered>.swiper-wrapper>.swiper-slide{scroll-snap-align:center center;scroll-snap-stop:always}.swiper-centered.swiper-horizontal>.swiper-wrapper>.swiper-slide:first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-centered.swiper-horizontal>.swiper-wrapper:before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-centered.swiper-vertical>.swiper-wrapper>.swiper-slide:first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-centered.swiper-vertical>.swiper-wrapper:before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-lazy-preloader{width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}.swiper-watch-progress .swiper-slide-visible .swiper-lazy-preloader,.swiper:not(.swiper-watch-progress) .swiper-lazy-preloader,swiper-container:not(.swiper-watch-progress) .swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear}.swiper-lazy-preloader-white{--swiper-preloader-color:#fff}.swiper-lazy-preloader-black{--swiper-preloader-color:#000}@keyframes swiper-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.slider__item{height:27.78em;width:var(--width);overflow:hidden}.slider__item[height-500]{height:34.72em}.slider__item img{transform:scale(1.12)}.slider__progress-indicator{transition:width .4s cubic-bezier(.25,1,.5,1)}.slider__progress,.slider__arrow.is--left{background-color:rgba(var(--rgbBg),.2);transition:background-color .4s cubic-bezier(.25,1,.5,1)}@media screen and (max-width: 480px){.slider__item{--width: 68.53em !important;--height: 101.33em !important;height:var(--height);width:var(--width);overflow:hidden}.slider__item[height-500]{height:var(--height)}}
`;document.head.appendChild(__vite_style__);(function(pi){typeof define=="function"&&define.amd?define(pi):pi()})(function(){var pi;"use strict";var style="";function _assertThisInitialized$1(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function _inheritsLoose(ie,ee){ie.prototype=Object.create(ee.prototype),ie.prototype.constructor=ie,ie.__proto__=ee}/*!
 * GSAP 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults$1={duration:.5,overwrite:!1,delay:0},_suppressOverwrites$1,_reverting$1,_context$4,_bigNum$2=1e8,_tinyNum=1/_bigNum$2,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt$1=Math.sqrt,_cos$1=Math.cos,_sin$1=Math.sin,_isString$1=function(ee){return typeof ee=="string"},_isFunction$1=function(ee){return typeof ee=="function"},_isNumber$2=function(ee){return typeof ee=="number"},_isUndefined=function(ee){return typeof ee=="undefined"},_isObject$1=function(ee){return typeof ee=="object"},_isNotFalse=function(ee){return ee!==!1},_windowExists$2=function(){return typeof window!="undefined"},_isFuncOrString=function(ee){return _isFunction$1(ee)||_isString$1(ee)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp$1=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$4,_coreInitted$4,_doc$4,_globals={},_installScope={},_coreReady,_install=function(ee){return(_installScope=_merge(ee,_globals))&&gsap$4},_missingPlugin=function(ee,te){return console.warn("Invalid property",ee,"set to",te,"Missing plugin? gsap.registerPlugin()")},_warn=function(ee,te){return!te&&console.warn(ee)},_addGlobal=function(ee,te){return ee&&(_globals[ee]=te)&&_installScope&&(_installScope[ee]=te)||_globals},_emptyFunc=function(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function(ee){var te=ee[0],re,ne;if(_isObject$1(te)||_isFunction$1(te)||(ee=[ee]),!(re=(te._gsap||{}).harness)){for(ne=_harnessPlugins.length;ne--&&!_harnessPlugins[ne].targetTest(te););re=_harnessPlugins[ne]}for(ne=ee.length;ne--;)ee[ne]&&(ee[ne]._gsap||(ee[ne]._gsap=new GSCache(ee[ne],re)))||ee.splice(ne,1);return ee},_getCache=function(ee){return ee._gsap||_harness(toArray(ee))[0]._gsap},_getProperty=function(ee,te,re){return(re=ee[te])&&_isFunction$1(re)?ee[te]():_isUndefined(re)&&ee.getAttribute&&ee.getAttribute(te)||re},_forEachName=function(ee,te){return(ee=ee.split(",")).forEach(te)||ee},_round$3=function(ee){return Math.round(ee*1e5)/1e5||0},_roundPrecise=function(ee){return Math.round(ee*1e7)/1e7||0},_parseRelative=function(ee,te){var re=te.charAt(0),ne=parseFloat(te.substr(2));return ee=parseFloat(ee),re==="+"?ee+ne:re==="-"?ee-ne:re==="*"?ee*ne:ee/ne},_arrayContainsAny=function(ee,te){for(var re=te.length,ne=0;ee.indexOf(te[ne])<0&&++ne<re;);return ne<re},_lazyRender=function(){var ee=_lazyTweens.length,te=_lazyTweens.slice(0),re,ne;for(_lazyLookup={},_lazyTweens.length=0,re=0;re<ee;re++)ne=te[re],ne&&ne._lazy&&(ne.render(ne._lazy[0],ne._lazy[1],!0)._lazy=0)},_lazySafeRender=function(ee,te,re,ne){_lazyTweens.length&&!_reverting$1&&_lazyRender(),ee.render(te,re,ne||_reverting$1&&te<0&&(ee._initted||ee._startAt)),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function(ee){var te=parseFloat(ee);return(te||te===0)&&(ee+"").match(_delimitedValueExp).length<2?te:_isString$1(ee)?ee.trim():ee},_passThrough$1=function(ee){return ee},_setDefaults$1=function(ee,te){for(var re in te)re in ee||(ee[re]=te[re]);return ee},_setKeyframeDefaults=function(ee){return function(te,re){for(var ne in re)ne in te||ne==="duration"&&ee||ne==="ease"||(te[ne]=re[ne])}},_merge=function(ee,te){for(var re in te)ee[re]=te[re];return ee},_mergeDeep=function ie(ee,te){for(var re in te)re!=="__proto__"&&re!=="constructor"&&re!=="prototype"&&(ee[re]=_isObject$1(te[re])?ie(ee[re]||(ee[re]={}),te[re]):te[re]);return ee},_copyExcluding=function(ee,te){var re={},ne;for(ne in ee)ne in te||(re[ne]=ee[ne]);return re},_inheritDefaults=function(ee){var te=ee.parent||_globalTimeline,re=ee.keyframes?_setKeyframeDefaults(_isArray(ee.keyframes)):_setDefaults$1;if(_isNotFalse(ee.inherit))for(;te;)re(ee,te.vars.defaults),te=te.parent||te._dp;return ee},_arraysMatch=function(ee,te){for(var re=ee.length,ne=re===te.length;ne&&re--&&ee[re]===te[re];);return re<0},_addLinkedListItem=function(ee,te,re,ne,se){re===void 0&&(re="_first"),ne===void 0&&(ne="_last");var ae=ee[ne],oe;if(se)for(oe=te[se];ae&&ae[se]>oe;)ae=ae._prev;return ae?(te._next=ae._next,ae._next=te):(te._next=ee[re],ee[re]=te),te._next?te._next._prev=te:ee[ne]=te,te._prev=ae,te.parent=te._dp=ee,te},_removeLinkedListItem=function(ee,te,re,ne){re===void 0&&(re="_first"),ne===void 0&&(ne="_last");var se=te._prev,ae=te._next;se?se._next=ae:ee[re]===te&&(ee[re]=ae),ae?ae._prev=se:ee[ne]===te&&(ee[ne]=se),te._next=te._prev=te.parent=null},_removeFromParent=function(ee,te){ee.parent&&(!te||ee.parent.autoRemoveChildren)&&ee.parent.remove(ee),ee._act=0},_uncache=function(ee,te){if(ee&&(!te||te._end>ee._dur||te._start<0))for(var re=ee;re;)re._dirty=1,re=re.parent;return ee},_recacheAncestors=function(ee){for(var te=ee.parent;te&&te.parent;)te._dirty=1,te.totalDuration(),te=te.parent;return ee},_rewindStartAt=function(ee,te,re,ne){return ee._startAt&&(_reverting$1?ee._startAt.revert(_revertConfigNoKill):ee.vars.immediateRender&&!ee.vars.autoRevert||ee._startAt.render(te,!0,ne))},_hasNoPausedAncestors=function ie(ee){return!ee||ee._ts&&ie(ee.parent)},_elapsedCycleDuration=function(ee){return ee._repeat?_animationCycle(ee._tTime,ee=ee.duration()+ee._rDelay)*ee:0},_animationCycle=function(ee,te){var re=Math.floor(ee/=te);return ee&&re===ee?re-1:re},_parentToChildTotalTime=function(ee,te){return(ee-te._start)*te._ts+(te._ts>=0?0:te._dirty?te.totalDuration():te._tDur)},_setEnd=function(ee){return ee._end=_roundPrecise(ee._start+(ee._tDur/Math.abs(ee._ts||ee._rts||_tinyNum)||0))},_alignPlayhead=function(ee,te){var re=ee._dp;return re&&re.smoothChildTiming&&ee._ts&&(ee._start=_roundPrecise(re._time-(ee._ts>0?te/ee._ts:((ee._dirty?ee.totalDuration():ee._tDur)-te)/-ee._ts)),_setEnd(ee),re._dirty||_uncache(re,ee)),ee},_postAddChecks=function(ee,te){var re;if((te._time||te._initted&&!te._dur)&&(re=_parentToChildTotalTime(ee.rawTime(),te),(!te._dur||_clamp$1(0,te.totalDuration(),re)-te._tTime>_tinyNum)&&te.render(re,!0)),_uncache(ee,te)._dp&&ee._initted&&ee._time>=ee._dur&&ee._ts){if(ee._dur<ee.duration())for(re=ee;re._dp;)re.rawTime()>=0&&re.totalTime(re._tTime),re=re._dp;ee._zTime=-_tinyNum}},_addToTimeline=function(ee,te,re,ne){return te.parent&&_removeFromParent(te),te._start=_roundPrecise((_isNumber$2(re)?re:re||ee!==_globalTimeline?_parsePosition$1(ee,re,te):ee._time)+te._delay),te._end=_roundPrecise(te._start+(te.totalDuration()/Math.abs(te.timeScale())||0)),_addLinkedListItem(ee,te,"_first","_last",ee._sort?"_start":0),_isFromOrFromStart(te)||(ee._recent=te),ne||_postAddChecks(ee,te),ee._ts<0&&_alignPlayhead(ee,ee._tTime),ee},_scrollTrigger=function(ee,te){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",te))&&_globals.ScrollTrigger.create(te,ee)},_attemptInitTween=function(ee,te,re,ne,se){if(_initTween(ee,te,se),!ee._initted)return 1;if(!re&&ee._pt&&!_reverting$1&&(ee._dur&&ee.vars.lazy!==!1||!ee._dur&&ee.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(ee),ee._lazy=[se,ne],1},_parentPlayheadIsBeforeStart=function ie(ee){var te=ee.parent;return te&&te._ts&&te._initted&&!te._lock&&(te.rawTime()<0||ie(te))},_isFromOrFromStart=function(ee){var te=ee.data;return te==="isFromStart"||te==="isStart"},_renderZeroDurationTween=function(ee,te,re,ne){var se=ee.ratio,ae=te<0||!te&&(!ee._start&&_parentPlayheadIsBeforeStart(ee)&&!(!ee._initted&&_isFromOrFromStart(ee))||(ee._ts<0||ee._dp._ts<0)&&!_isFromOrFromStart(ee))?0:1,oe=ee._rDelay,le=0,he,ce,de;if(oe&&ee._repeat&&(le=_clamp$1(0,ee._tDur,te),ce=_animationCycle(le,oe),ee._yoyo&&ce&1&&(ae=1-ae),ce!==_animationCycle(ee._tTime,oe)&&(se=1-ae,ee.vars.repeatRefresh&&ee._initted&&ee.invalidate())),ae!==se||_reverting$1||ne||ee._zTime===_tinyNum||!te&&ee._zTime){if(!ee._initted&&_attemptInitTween(ee,te,ne,re,le))return;for(de=ee._zTime,ee._zTime=te||(re?_tinyNum:0),re||(re=te&&!de),ee.ratio=ae,ee._from&&(ae=1-ae),ee._time=0,ee._tTime=le,he=ee._pt;he;)he.r(ae,he.d),he=he._next;te<0&&_rewindStartAt(ee,te,re,!0),ee._onUpdate&&!re&&_callback$1(ee,"onUpdate"),le&&ee._repeat&&!re&&ee.parent&&_callback$1(ee,"onRepeat"),(te>=ee._tDur||te<0)&&ee.ratio===ae&&(ae&&_removeFromParent(ee,1),!re&&!_reverting$1&&(_callback$1(ee,ae?"onComplete":"onReverseComplete",!0),ee._prom&&ee._prom()))}else ee._zTime||(ee._zTime=te)},_findNextPauseTween=function(ee,te,re){var ne;if(re>te)for(ne=ee._first;ne&&ne._start<=re;){if(ne.data==="isPause"&&ne._start>te)return ne;ne=ne._next}else for(ne=ee._last;ne&&ne._start>=re;){if(ne.data==="isPause"&&ne._start<te)return ne;ne=ne._prev}},_setDuration=function(ee,te,re,ne){var se=ee._repeat,ae=_roundPrecise(te)||0,oe=ee._tTime/ee._tDur;return oe&&!ne&&(ee._time*=ae/ee._dur),ee._dur=ae,ee._tDur=se?se<0?1e10:_roundPrecise(ae*(se+1)+ee._rDelay*se):ae,oe>0&&!ne&&_alignPlayhead(ee,ee._tTime=ee._tDur*oe),ee.parent&&_setEnd(ee),re||_uncache(ee.parent,ee),ee},_onUpdateTotalDuration=function(ee){return ee instanceof Timeline?_uncache(ee):_setDuration(ee,ee._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition$1=function ie(ee,te,re){var ne=ee.labels,se=ee._recent||_zeroPosition,ae=ee.duration()>=_bigNum$2?se.endTime(!1):ee._dur,oe,le,he;return _isString$1(te)&&(isNaN(te)||te in ne)?(le=te.charAt(0),he=te.substr(-1)==="%",oe=te.indexOf("="),le==="<"||le===">"?(oe>=0&&(te=te.replace(/=/,"")),(le==="<"?se._start:se.endTime(se._repeat>=0))+(parseFloat(te.substr(1))||0)*(he?(oe<0?se:re).totalDuration()/100:1)):oe<0?(te in ne||(ne[te]=ae),ne[te]):(le=parseFloat(te.charAt(oe-1)+te.substr(oe+1)),he&&re&&(le=le/100*(_isArray(re)?re[0]:re).totalDuration()),oe>1?ie(ee,te.substr(0,oe-1),re)+le:ae+le)):te==null?ae:+te},_createTweenType=function(ee,te,re){var ne=_isNumber$2(te[1]),se=(ne?2:1)+(ee<2?0:1),ae=te[se],oe,le;if(ne&&(ae.duration=te[1]),ae.parent=re,ee){for(oe=ae,le=re;le&&!("immediateRender"in oe);)oe=le.vars.defaults||{},le=_isNotFalse(le.vars.inherit)&&le.parent;ae.immediateRender=_isNotFalse(oe.immediateRender),ee<2?ae.runBackwards=1:ae.startAt=te[se-1]}return new Tween(te[0],ae,te[se+1])},_conditionalReturn=function(ee,te){return ee||ee===0?te(ee):te},_clamp$1=function(ee,te,re){return re<ee?ee:re>te?te:re},getUnit=function(ee,te){return!_isString$1(ee)||!(te=_unitExp.exec(ee))?"":te[1]},clamp$2=function(ee,te,re){return _conditionalReturn(re,function(ne){return _clamp$1(ee,te,ne)})},_slice=[].slice,_isArrayLike=function(ee,te){return ee&&_isObject$1(ee)&&"length"in ee&&(!te&&!ee.length||ee.length-1 in ee&&_isObject$1(ee[0]))&&!ee.nodeType&&ee!==_win$4},_flatten=function(ee,te,re){return re===void 0&&(re=[]),ee.forEach(function(ne){var se;return _isString$1(ne)&&!te||_isArrayLike(ne,1)?(se=re).push.apply(se,toArray(ne)):re.push(ne)})||re},toArray=function(ee,te,re){return _context$4&&!te&&_context$4.selector?_context$4.selector(ee):_isString$1(ee)&&!re&&(_coreInitted$4||!_wake())?_slice.call((te||_doc$4).querySelectorAll(ee),0):_isArray(ee)?_flatten(ee,re):_isArrayLike(ee)?_slice.call(ee,0):ee?[ee]:[]},selector=function(ee){return ee=toArray(ee)[0]||_warn("Invalid scope")||{},function(te){var re=ee.current||ee.nativeElement||ee;return toArray(te,re.querySelectorAll?re:re===ee?_warn("Invalid scope")||_doc$4.createElement("div"):ee)}},shuffle=function(ee){return ee.sort(function(){return .5-Math.random()})},distribute=function(ee){if(_isFunction$1(ee))return ee;var te=_isObject$1(ee)?ee:{each:ee},re=_parseEase(te.ease),ne=te.from||0,se=parseFloat(te.base)||0,ae={},oe=ne>0&&ne<1,le=isNaN(ne)||oe,he=te.axis,ce=ne,de=ne;return _isString$1(ne)?ce=de={center:.5,edges:.5,end:1}[ne]||0:!oe&&le&&(ce=ne[0],de=ne[1]),function(ue,fe,pe){var me=(pe||te).length,xe=ae[me],ge,_e,ve,ye,be,we,Se,Te,Pe;if(!xe){if(Pe=te.grid==="auto"?0:(te.grid||[1,_bigNum$2])[1],!Pe){for(Se=-_bigNum$2;Se<(Se=pe[Pe++].getBoundingClientRect().left)&&Pe<me;);Pe--}for(xe=ae[me]=[],ge=le?Math.min(Pe,me)*ce-.5:ne%Pe,_e=Pe===_bigNum$2?0:le?me*de/Pe-.5:ne/Pe|0,Se=0,Te=_bigNum$2,we=0;we<me;we++)ve=we%Pe-ge,ye=_e-(we/Pe|0),xe[we]=be=he?Math.abs(he==="y"?ye:ve):_sqrt$1(ve*ve+ye*ye),be>Se&&(Se=be),be<Te&&(Te=be);ne==="random"&&shuffle(xe),xe.max=Se-Te,xe.min=Te,xe.v=me=(parseFloat(te.amount)||parseFloat(te.each)*(Pe>me?me-1:he?he==="y"?me/Pe:Pe:Math.max(Pe,me/Pe))||0)*(ne==="edges"?-1:1),xe.b=me<0?se-me:se,xe.u=getUnit(te.amount||te.each)||0,re=re&&me<0?_invertEase(re):re}return me=(xe[ue]-xe.min)/xe.max||0,_roundPrecise(xe.b+(re?re(me):me)*xe.v)+xe.u}},_roundModifier=function(ee){var te=Math.pow(10,((ee+"").split(".")[1]||"").length);return function(re){var ne=_roundPrecise(Math.round(parseFloat(re)/ee)*ee*te);return(ne-ne%1)/te+(_isNumber$2(re)?0:getUnit(re))}},snap=function(ee,te){var re=_isArray(ee),ne,se;return!re&&_isObject$1(ee)&&(ne=re=ee.radius||_bigNum$2,ee.values?(ee=toArray(ee.values),(se=!_isNumber$2(ee[0]))&&(ne*=ne)):ee=_roundModifier(ee.increment)),_conditionalReturn(te,re?_isFunction$1(ee)?function(ae){return se=ee(ae),Math.abs(se-ae)<=ne?se:ae}:function(ae){for(var oe=parseFloat(se?ae.x:ae),le=parseFloat(se?ae.y:0),he=_bigNum$2,ce=0,de=ee.length,ue,fe;de--;)se?(ue=ee[de].x-oe,fe=ee[de].y-le,ue=ue*ue+fe*fe):ue=Math.abs(ee[de]-oe),ue<he&&(he=ue,ce=de);return ce=!ne||he<=ne?ee[ce]:ae,se||ce===ae||_isNumber$2(ae)?ce:ce+getUnit(ae)}:_roundModifier(ee))},random=function(ee,te,re,ne){return _conditionalReturn(_isArray(ee)?!te:re===!0?!!(re=0):!ne,function(){return _isArray(ee)?ee[~~(Math.random()*ee.length)]:(re=re||1e-5)&&(ne=re<1?Math.pow(10,(re+"").length-2):1)&&Math.floor(Math.round((ee-re/2+Math.random()*(te-ee+re*.99))/re)*re*ne)/ne})},pipe=function(){for(var ee=arguments.length,te=new Array(ee),re=0;re<ee;re++)te[re]=arguments[re];return function(ne){return te.reduce(function(se,ae){return ae(se)},ne)}},unitize=function(ee,te){return function(re){return ee(parseFloat(re))+(te||getUnit(re))}},normalize=function(ee,te,re){return mapRange(ee,te,0,1,re)},_wrapArray=function(ee,te,re){return _conditionalReturn(re,function(ne){return ee[~~te(ne)]})},wrap=function ie(ee,te,re){var ne=te-ee;return _isArray(ee)?_wrapArray(ee,ie(0,ee.length),te):_conditionalReturn(re,function(se){return(ne+(se-ee)%ne)%ne+ee})},wrapYoyo=function ie(ee,te,re){var ne=te-ee,se=ne*2;return _isArray(ee)?_wrapArray(ee,ie(0,ee.length-1),te):_conditionalReturn(re,function(ae){return ae=(se+(ae-ee)%se)%se||0,ee+(ae>ne?se-ae:ae)})},_replaceRandom=function(ee){for(var te=0,re="",ne,se,ae,oe;~(ne=ee.indexOf("random(",te));)ae=ee.indexOf(")",ne),oe=ee.charAt(ne+7)==="[",se=ee.substr(ne+7,ae-ne-7).match(oe?_delimitedValueExp:_strictNumExp),re+=ee.substr(te,ne-te)+random(oe?se:+se[0],oe?0:+se[1],+se[2]||1e-5),te=ae+1;return re+ee.substr(te,ee.length-te)},mapRange=function(ee,te,re,ne,se){var ae=te-ee,oe=ne-re;return _conditionalReturn(se,function(le){return re+((le-ee)/ae*oe||0)})},interpolate=function ie(ee,te,re,ne){var se=isNaN(ee+te)?0:function(fe){return(1-fe)*ee+fe*te};if(!se){var ae=_isString$1(ee),oe={},le,he,ce,de,ue;if(re===!0&&(ne=1)&&(re=null),ae)ee={p:ee},te={p:te};else if(_isArray(ee)&&!_isArray(te)){for(ce=[],de=ee.length,ue=de-2,he=1;he<de;he++)ce.push(ie(ee[he-1],ee[he]));de--,se=function(pe){pe*=de;var me=Math.min(ue,~~pe);return ce[me](pe-me)},re=te}else ne||(ee=_merge(_isArray(ee)?[]:{},ee));if(!ce){for(le in te)_addPropTween.call(oe,ee,le,"get",te[le]);se=function(pe){return _renderPropTweens(pe,oe)||(ae?ee.p:ee)}}}return _conditionalReturn(re,se)},_getLabelInDirection=function(ee,te,re){var ne=ee.labels,se=_bigNum$2,ae,oe,le;for(ae in ne)oe=ne[ae]-te,oe<0==!!re&&oe&&se>(oe=Math.abs(oe))&&(le=ae,se=oe);return le},_callback$1=function(ee,te,re){var ne=ee.vars,se=ne[te],ae=_context$4,oe=ee._ctx,le,he,ce;if(!!se)return le=ne[te+"Params"],he=ne.callbackScope||ee,re&&_lazyTweens.length&&_lazyRender(),oe&&(_context$4=oe),ce=le?se.apply(he,le):se.call(he),_context$4=ae,ce},_interrupt=function(ee){return _removeFromParent(ee),ee.scrollTrigger&&ee.scrollTrigger.kill(!!_reverting$1),ee.progress()<1&&_callback$1(ee,"onInterrupt"),ee},_quickTween,_createPlugin=function(ee){ee=!ee.name&&ee.default||ee;var te=ee.name,re=_isFunction$1(ee),ne=te&&!re&&ee.init?function(){this._props=[]}:ee,se={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},ae={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),ee!==ne){if(_plugins[te])return;_setDefaults$1(ne,_setDefaults$1(_copyExcluding(ee,se),ae)),_merge(ne.prototype,_merge(se,_copyExcluding(ee,ae))),_plugins[ne.prop=te]=ne,ee.targetTest&&(_harnessPlugins.push(ne),_reservedProps[te]=1),te=(te==="css"?"CSS":te.charAt(0).toUpperCase()+te.substr(1))+"Plugin"}_addGlobal(te,ne),ee.register&&ee.register(gsap$4,ne,PropTween)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function(ee,te,re){return ee+=ee<0?1:ee>1?-1:0,(ee*6<1?te+(re-te)*ee*6:ee<.5?re:ee*3<2?te+(re-te)*(2/3-ee)*6:te)*_255+.5|0},splitColor=function(ee,te,re){var ne=ee?_isNumber$2(ee)?[ee>>16,ee>>8&_255,ee&_255]:0:_colorLookup.black,se,ae,oe,le,he,ce,de,ue,fe,pe;if(!ne){if(ee.substr(-1)===","&&(ee=ee.substr(0,ee.length-1)),_colorLookup[ee])ne=_colorLookup[ee];else if(ee.charAt(0)==="#"){if(ee.length<6&&(se=ee.charAt(1),ae=ee.charAt(2),oe=ee.charAt(3),ee="#"+se+se+ae+ae+oe+oe+(ee.length===5?ee.charAt(4)+ee.charAt(4):"")),ee.length===9)return ne=parseInt(ee.substr(1,6),16),[ne>>16,ne>>8&_255,ne&_255,parseInt(ee.substr(7),16)/255];ee=parseInt(ee.substr(1),16),ne=[ee>>16,ee>>8&_255,ee&_255]}else if(ee.substr(0,3)==="hsl"){if(ne=pe=ee.match(_strictNumExp),!te)le=+ne[0]%360/360,he=+ne[1]/100,ce=+ne[2]/100,ae=ce<=.5?ce*(he+1):ce+he-ce*he,se=ce*2-ae,ne.length>3&&(ne[3]*=1),ne[0]=_hue(le+1/3,se,ae),ne[1]=_hue(le,se,ae),ne[2]=_hue(le-1/3,se,ae);else if(~ee.indexOf("="))return ne=ee.match(_numExp$1),re&&ne.length<4&&(ne[3]=1),ne}else ne=ee.match(_strictNumExp)||_colorLookup.transparent;ne=ne.map(Number)}return te&&!pe&&(se=ne[0]/_255,ae=ne[1]/_255,oe=ne[2]/_255,de=Math.max(se,ae,oe),ue=Math.min(se,ae,oe),ce=(de+ue)/2,de===ue?le=he=0:(fe=de-ue,he=ce>.5?fe/(2-de-ue):fe/(de+ue),le=de===se?(ae-oe)/fe+(ae<oe?6:0):de===ae?(oe-se)/fe+2:(se-ae)/fe+4,le*=60),ne[0]=~~(le+.5),ne[1]=~~(he*100+.5),ne[2]=~~(ce*100+.5)),re&&ne.length<4&&(ne[3]=1),ne},_colorOrderData=function(ee){var te=[],re=[],ne=-1;return ee.split(_colorExp).forEach(function(se){var ae=se.match(_numWithUnitExp)||[];te.push.apply(te,ae),re.push(ne+=ae.length+1)}),te.c=re,te},_formatColors=function(ee,te,re){var ne="",se=(ee+ne).match(_colorExp),ae=te?"hsla(":"rgba(",oe=0,le,he,ce,de;if(!se)return ee;if(se=se.map(function(ue){return(ue=splitColor(ue,te,1))&&ae+(te?ue[0]+","+ue[1]+"%,"+ue[2]+"%,"+ue[3]:ue.join(","))+")"}),re&&(ce=_colorOrderData(ee),le=re.c,le.join(ne)!==ce.c.join(ne)))for(he=ee.replace(_colorExp,"1").split(_numWithUnitExp),de=he.length-1;oe<de;oe++)ne+=he[oe]+(~le.indexOf(oe)?se.shift()||ae+"0,0,0,0)":(ce.length?ce:se.length?se:re).shift());if(!he)for(he=ee.split(_colorExp),de=he.length-1;oe<de;oe++)ne+=he[oe]+se[oe];return ne+he[de]},_colorExp=function(){var ie="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",ee;for(ee in _colorLookup)ie+="|"+ee+"\\b";return new RegExp(ie+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function(ee){var te=ee.join(" "),re;if(_colorExp.lastIndex=0,_colorExp.test(te))return re=_hslExp.test(te),ee[1]=_formatColors(ee[1],re),ee[0]=_formatColors(ee[0],re,_colorOrderData(ee[1])),!0},_tickerActive,_ticker=function(){var ie=Date.now,ee=500,te=33,re=ie(),ne=re,se=1e3/240,ae=se,oe=[],le,he,ce,de,ue,fe,pe=function me(xe){var ge=ie()-ne,_e=xe===!0,ve,ye,be,we;if(ge>ee&&(re+=ge-te),ne+=ge,be=ne-re,ve=be-ae,(ve>0||_e)&&(we=++de.frame,ue=be-de.time*1e3,de.time=be=be/1e3,ae+=ve+(ve>=se?4:se-ve),ye=1),_e||(le=he(me)),ye)for(fe=0;fe<oe.length;fe++)oe[fe](be,ue,we,xe)};return de={time:0,frame:0,tick:function(){pe(!0)},deltaRatio:function(xe){return ue/(1e3/(xe||60))},wake:function(){_coreReady&&(!_coreInitted$4&&_windowExists$2()&&(_win$4=_coreInitted$4=window,_doc$4=_win$4.document||{},_globals.gsap=gsap$4,(_win$4.gsapVersions||(_win$4.gsapVersions=[])).push(gsap$4.version),_install(_installScope||_win$4.GreenSockGlobals||!_win$4.gsap&&_win$4||{}),ce=_win$4.requestAnimationFrame),le&&de.sleep(),he=ce||function(xe){return setTimeout(xe,ae-de.time*1e3+1|0)},_tickerActive=1,pe(2))},sleep:function(){(ce?_win$4.cancelAnimationFrame:clearTimeout)(le),_tickerActive=0,he=_emptyFunc},lagSmoothing:function(xe,ge){ee=xe||1/0,te=Math.min(ge||33,ee)},fps:function(xe){se=1e3/(xe||240),ae=de.time*1e3+se},add:function(xe,ge,_e){var ve=ge?function(ye,be,we,Se){xe(ye,be,we,Se),de.remove(ve)}:xe;return de.remove(xe),oe[_e?"unshift":"push"](ve),_wake(),ve},remove:function(xe,ge){~(ge=oe.indexOf(xe))&&oe.splice(ge,1)&&fe>=ge&&fe--},_listeners:oe},de}(),_wake=function(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function(ee){for(var te={},re=ee.substr(1,ee.length-3).split(":"),ne=re[0],se=1,ae=re.length,oe,le,he;se<ae;se++)le=re[se],oe=se!==ae-1?le.lastIndexOf(","):le.length,he=le.substr(0,oe),te[ne]=isNaN(he)?he.replace(_quotesExp,"").trim():+he,ne=le.substr(oe+1).trim();return te},_valueInParentheses=function(ee){var te=ee.indexOf("(")+1,re=ee.indexOf(")"),ne=ee.indexOf("(",te);return ee.substring(te,~ne&&ne<re?ee.indexOf(")",re+1):re)},_configEaseFromString=function(ee){var te=(ee+"").split("("),re=_easeMap[te[0]];return re&&te.length>1&&re.config?re.config.apply(null,~ee.indexOf("{")?[_parseObjectInString(te[1])]:_valueInParentheses(ee).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(ee)?_easeMap._CE("",ee):re},_invertEase=function(ee){return function(te){return 1-ee(1-te)}},_propagateYoyoEase=function ie(ee,te){for(var re=ee._first,ne;re;)re instanceof Timeline?ie(re,te):re.vars.yoyoEase&&(!re._yoyo||!re._repeat)&&re._yoyo!==te&&(re.timeline?ie(re.timeline,te):(ne=re._ease,re._ease=re._yEase,re._yEase=ne,re._yoyo=te)),re=re._next},_parseEase=function(ee,te){return ee&&(_isFunction$1(ee)?ee:_easeMap[ee]||_configEaseFromString(ee))||te},_insertEase=function(ee,te,re,ne){re===void 0&&(re=function(le){return 1-te(1-le)}),ne===void 0&&(ne=function(le){return le<.5?te(le*2)/2:1-te((1-le)*2)/2});var se={easeIn:te,easeOut:re,easeInOut:ne},ae;return _forEachName(ee,function(oe){_easeMap[oe]=_globals[oe]=se,_easeMap[ae=oe.toLowerCase()]=re;for(var le in se)_easeMap[ae+(le==="easeIn"?".in":le==="easeOut"?".out":".inOut")]=_easeMap[oe+"."+le]=se[le]}),se},_easeInOutFromOut=function(ee){return function(te){return te<.5?(1-ee(1-te*2))/2:.5+ee((te-.5)*2)/2}},_configElastic=function ie(ee,te,re){var ne=te>=1?te:1,se=(re||(ee?.3:.45))/(te<1?te:1),ae=se/_2PI*(Math.asin(1/ne)||0),oe=function(ce){return ce===1?1:ne*Math.pow(2,-10*ce)*_sin$1((ce-ae)*se)+1},le=ee==="out"?oe:ee==="in"?function(he){return 1-oe(1-he)}:_easeInOutFromOut(oe);return se=_2PI/se,le.config=function(he,ce){return ie(ee,he,ce)},le},_configBack=function ie(ee,te){te===void 0&&(te=1.70158);var re=function(ae){return ae?--ae*ae*((te+1)*ae+te)+1:0},ne=ee==="out"?re:ee==="in"?function(se){return 1-re(1-se)}:_easeInOutFromOut(re);return ne.config=function(se){return ie(ee,se)},ne};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(ie,ee){var te=ee<5?ee+1:ee;_insertEase(ie+",Power"+(te-1),ee?function(re){return Math.pow(re,te)}:function(re){return re},function(re){return 1-Math.pow(1-re,te)},function(re){return re<.5?Math.pow(re*2,te)/2:1-Math.pow((1-re)*2,te)/2})}),_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn,_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic()),function(ie,ee){var te=1/ee,re=2*te,ne=2.5*te,se=function(oe){return oe<te?ie*oe*oe:oe<re?ie*Math.pow(oe-1.5/ee,2)+.75:oe<ne?ie*(oe-=2.25/ee)*oe+.9375:ie*Math.pow(oe-2.625/ee,2)+.984375};_insertEase("Bounce",function(ae){return 1-se(1-ae)},se)}(7.5625,2.75),_insertEase("Expo",function(ie){return ie?Math.pow(2,10*(ie-1)):0}),_insertEase("Circ",function(ie){return-(_sqrt$1(1-ie*ie)-1)}),_insertEase("Sine",function(ie){return ie===1?1:-_cos$1(ie*_HALF_PI)+1}),_insertEase("Back",_configBack("in"),_configBack("out"),_configBack()),_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function(ee,te){ee===void 0&&(ee=1);var re=1/ee,ne=ee+(te?0:1),se=te?1:0,ae=1-_tinyNum;return function(oe){return((ne*_clamp$1(0,ae,oe)|0)+se)*re}}},_defaults$1.ease=_easeMap["quad.out"],_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(ie){return _callbackNames+=ie+","+ie+"Params,"});var GSCache=function(ee,te){this.id=_gsID++,ee._gsap=this,this.target=ee,this.harness=te,this.get=te?te.get:_getProperty,this.set=te?te.getSetter:_getSetter},Animation=function(){function ie(te){this.vars=te,this._delay=+te.delay||0,(this._repeat=te.repeat===1/0?-2:te.repeat||0)&&(this._rDelay=te.repeatDelay||0,this._yoyo=!!te.yoyo||!!te.yoyoEase),this._ts=1,_setDuration(this,+te.duration,1,1),this.data=te.data,_context$4&&(this._ctx=_context$4,_context$4.data.push(this)),_tickerActive||_ticker.wake()}var ee=ie.prototype;return ee.delay=function(re){return re||re===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+re-this._delay),this._delay=re,this):this._delay},ee.duration=function(re){return arguments.length?this.totalDuration(this._repeat>0?re+(re+this._rDelay)*this._repeat:re):this.totalDuration()&&this._dur},ee.totalDuration=function(re){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?re:(re-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},ee.totalTime=function(re,ne){if(_wake(),!arguments.length)return this._tTime;var se=this._dp;if(se&&se.smoothChildTiming&&this._ts){for(_alignPlayhead(this,re),!se._dp||se.parent||_postAddChecks(se,this);se&&se.parent;)se.parent._time!==se._start+(se._ts>=0?se._tTime/se._ts:(se.totalDuration()-se._tTime)/-se._ts)&&se.totalTime(se._tTime,!0),se=se.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&re<this._tDur||this._ts<0&&re>0||!this._tDur&&!re)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==re||!this._dur&&!ne||this._initted&&Math.abs(this._zTime)===_tinyNum||!re&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=re),_lazySafeRender(this,re,ne)),this},ee.time=function(re,ne){return arguments.length?this.totalTime(Math.min(this.totalDuration(),re+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(re?this._dur:0),ne):this._time},ee.totalProgress=function(re,ne){return arguments.length?this.totalTime(this.totalDuration()*re,ne):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},ee.progress=function(re,ne){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-re:re)+_elapsedCycleDuration(this),ne):this.duration()?Math.min(1,this._time/this._dur):this.ratio},ee.iteration=function(re,ne){var se=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(re-1)*se,ne):this._repeat?_animationCycle(this._tTime,se)+1:1},ee.timeScale=function(re){if(!arguments.length)return this._rts===-_tinyNum?0:this._rts;if(this._rts===re)return this;var ne=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+re||0,this._ts=this._ps||re===-_tinyNum?0:this._rts,this.totalTime(_clamp$1(-this._delay,this._tDur,ne),!0),_setEnd(this),_recacheAncestors(this)},ee.paused=function(re){return arguments.length?(this._ps!==re&&(this._ps=re,re?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},ee.startTime=function(re){if(arguments.length){this._start=re;var ne=this.parent||this._dp;return ne&&(ne._sort||!this.parent)&&_addToTimeline(ne,this,re-this._delay),this}return this._start},ee.endTime=function(re){return this._start+(_isNotFalse(re)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},ee.rawTime=function(re){var ne=this.parent||this._dp;return ne?re&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(ne.rawTime(re),this):this._tTime:this._tTime},ee.revert=function(re){re===void 0&&(re=_revertConfig);var ne=_reverting$1;return _reverting$1=re,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(re),this.totalTime(-.01,re.suppressEvents)),this.data!=="nested"&&re.kill!==!1&&this.kill(),_reverting$1=ne,this},ee.globalTime=function(re){for(var ne=this,se=arguments.length?re:ne.rawTime();ne;)se=ne._start+se/(ne._ts||1),ne=ne._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(re):se},ee.repeat=function(re){return arguments.length?(this._repeat=re===1/0?-2:re,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},ee.repeatDelay=function(re){if(arguments.length){var ne=this._time;return this._rDelay=re,_onUpdateTotalDuration(this),ne?this.time(ne):this}return this._rDelay},ee.yoyo=function(re){return arguments.length?(this._yoyo=re,this):this._yoyo},ee.seek=function(re,ne){return this.totalTime(_parsePosition$1(this,re),_isNotFalse(ne))},ee.restart=function(re,ne){return this.play().totalTime(re?-this._delay:0,_isNotFalse(ne))},ee.play=function(re,ne){return re!=null&&this.seek(re,ne),this.reversed(!1).paused(!1)},ee.reverse=function(re,ne){return re!=null&&this.seek(re||this.totalDuration(),ne),this.reversed(!0).paused(!1)},ee.pause=function(re,ne){return re!=null&&this.seek(re,ne),this.paused(!0)},ee.resume=function(){return this.paused(!1)},ee.reversed=function(re){return arguments.length?(!!re!==this.reversed()&&this.timeScale(-this._rts||(re?-_tinyNum:0)),this):this._rts<0},ee.invalidate=function(){return this._initted=this._act=0,this._zTime=-_tinyNum,this},ee.isActive=function(){var re=this.parent||this._dp,ne=this._start,se;return!!(!re||this._ts&&this._initted&&re.isActive()&&(se=re.rawTime(!0))>=ne&&se<this.endTime(!0)-_tinyNum)},ee.eventCallback=function(re,ne,se){var ae=this.vars;return arguments.length>1?(ne?(ae[re]=ne,se&&(ae[re+"Params"]=se),re==="onUpdate"&&(this._onUpdate=ne)):delete ae[re],this):ae[re]},ee.then=function(re){var ne=this;return new Promise(function(se){var ae=_isFunction$1(re)?re:_passThrough$1,oe=function(){var he=ne.then;ne.then=null,_isFunction$1(ae)&&(ae=ae(ne))&&(ae.then||ae===ne)&&(ne.then=he),se(ae),ne.then=he};ne._initted&&ne.totalProgress()===1&&ne._ts>=0||!ne._tTime&&ne._ts<0?oe():ne._prom=oe})},ee.kill=function(){_interrupt(this)},ie}();_setDefaults$1(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:!1,_rts:1});var Timeline=function(ie){_inheritsLoose(ee,ie);function ee(re,ne){var se;return re===void 0&&(re={}),se=ie.call(this,re)||this,se.labels={},se.smoothChildTiming=!!re.smoothChildTiming,se.autoRemoveChildren=!!re.autoRemoveChildren,se._sort=_isNotFalse(re.sortChildren),_globalTimeline&&_addToTimeline(re.parent||_globalTimeline,_assertThisInitialized$1(se),ne),re.reversed&&se.reverse(),re.paused&&se.paused(!0),re.scrollTrigger&&_scrollTrigger(_assertThisInitialized$1(se),re.scrollTrigger),se}var te=ee.prototype;return te.to=function(ne,se,ae){return _createTweenType(0,arguments,this),this},te.from=function(ne,se,ae){return _createTweenType(1,arguments,this),this},te.fromTo=function(ne,se,ae,oe){return _createTweenType(2,arguments,this),this},te.set=function(ne,se,ae){return se.duration=0,se.parent=this,_inheritDefaults(se).repeatDelay||(se.repeat=0),se.immediateRender=!!se.immediateRender,new Tween(ne,se,_parsePosition$1(this,ae),1),this},te.call=function(ne,se,ae){return _addToTimeline(this,Tween.delayedCall(0,ne,se),ae)},te.staggerTo=function(ne,se,ae,oe,le,he,ce){return ae.duration=se,ae.stagger=ae.stagger||oe,ae.onComplete=he,ae.onCompleteParams=ce,ae.parent=this,new Tween(ne,ae,_parsePosition$1(this,le)),this},te.staggerFrom=function(ne,se,ae,oe,le,he,ce){return ae.runBackwards=1,_inheritDefaults(ae).immediateRender=_isNotFalse(ae.immediateRender),this.staggerTo(ne,se,ae,oe,le,he,ce)},te.staggerFromTo=function(ne,se,ae,oe,le,he,ce,de){return oe.startAt=ae,_inheritDefaults(oe).immediateRender=_isNotFalse(oe.immediateRender),this.staggerTo(ne,se,oe,le,he,ce,de)},te.render=function(ne,se,ae){var oe=this._time,le=this._dirty?this.totalDuration():this._tDur,he=this._dur,ce=ne<=0?0:_roundPrecise(ne),de=this._zTime<0!=ne<0&&(this._initted||!he),ue,fe,pe,me,xe,ge,_e,ve,ye,be,we,Se;if(this!==_globalTimeline&&ce>le&&ne>=0&&(ce=le),ce!==this._tTime||ae||de){if(oe!==this._time&&he&&(ce+=this._time-oe,ne+=this._time-oe),ue=ce,ye=this._start,ve=this._ts,ge=!ve,de&&(he||(oe=this._zTime),(ne||!se)&&(this._zTime=ne)),this._repeat){if(we=this._yoyo,xe=he+this._rDelay,this._repeat<-1&&ne<0)return this.totalTime(xe*100+ne,se,ae);if(ue=_roundPrecise(ce%xe),ce===le?(me=this._repeat,ue=he):(me=~~(ce/xe),me&&me===ce/xe&&(ue=he,me--),ue>he&&(ue=he)),be=_animationCycle(this._tTime,xe),!oe&&this._tTime&&be!==me&&(be=me),we&&me&1&&(ue=he-ue,Se=1),me!==be&&!this._lock){var Te=we&&be&1,Pe=Te===(we&&me&1);if(me<be&&(Te=!Te),oe=Te?0:he,this._lock=1,this.render(oe||(Se?0:_roundPrecise(me*xe)),se,!he)._lock=0,this._tTime=ce,!se&&this.parent&&_callback$1(this,"onRepeat"),this.vars.repeatRefresh&&!Se&&(this.invalidate()._lock=1),oe&&oe!==this._time||ge!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(he=this._dur,le=this._tDur,Pe&&(this._lock=2,oe=Te?he:-1e-4,this.render(oe,!0),this.vars.repeatRefresh&&!Se&&this.invalidate()),this._lock=0,!this._ts&&!ge)return this;_propagateYoyoEase(this,Se)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_e=_findNextPauseTween(this,_roundPrecise(oe),_roundPrecise(ue)),_e&&(ce-=ue-(ue=_e._start))),this._tTime=ce,this._time=ue,this._act=!ve,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=ne,oe=0),!oe&&ue&&!se&&(_callback$1(this,"onStart"),this._tTime!==ce))return this;if(ue>=oe&&ne>=0)for(fe=this._first;fe;){if(pe=fe._next,(fe._act||ue>=fe._start)&&fe._ts&&_e!==fe){if(fe.parent!==this)return this.render(ne,se,ae);if(fe.render(fe._ts>0?(ue-fe._start)*fe._ts:(fe._dirty?fe.totalDuration():fe._tDur)+(ue-fe._start)*fe._ts,se,ae),ue!==this._time||!this._ts&&!ge){_e=0,pe&&(ce+=this._zTime=-_tinyNum);break}}fe=pe}else{fe=this._last;for(var Be=ne<0?ne:ue;fe;){if(pe=fe._prev,(fe._act||Be<=fe._end)&&fe._ts&&_e!==fe){if(fe.parent!==this)return this.render(ne,se,ae);if(fe.render(fe._ts>0?(Be-fe._start)*fe._ts:(fe._dirty?fe.totalDuration():fe._tDur)+(Be-fe._start)*fe._ts,se,ae||_reverting$1&&(fe._initted||fe._startAt)),ue!==this._time||!this._ts&&!ge){_e=0,pe&&(ce+=this._zTime=Be?-_tinyNum:_tinyNum);break}}fe=pe}}if(_e&&!se&&(this.pause(),_e.render(ue>=oe?0:-_tinyNum)._zTime=ue>=oe?1:-1,this._ts))return this._start=ye,_setEnd(this),this.render(ne,se,ae);this._onUpdate&&!se&&_callback$1(this,"onUpdate",!0),(ce===le&&this._tTime>=this.totalDuration()||!ce&&oe)&&(ye===this._start||Math.abs(ve)!==Math.abs(this._ts))&&(this._lock||((ne||!he)&&(ce===le&&this._ts>0||!ce&&this._ts<0)&&_removeFromParent(this,1),!se&&!(ne<0&&!oe)&&(ce||oe||!le)&&(_callback$1(this,ce===le&&ne>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(ce<le&&this.timeScale()>0)&&this._prom())))}return this},te.add=function(ne,se){var ae=this;if(_isNumber$2(se)||(se=_parsePosition$1(this,se,ne)),!(ne instanceof Animation)){if(_isArray(ne))return ne.forEach(function(oe){return ae.add(oe,se)}),this;if(_isString$1(ne))return this.addLabel(ne,se);if(_isFunction$1(ne))ne=Tween.delayedCall(0,ne);else return this}return this!==ne?_addToTimeline(this,ne,se):this},te.getChildren=function(ne,se,ae,oe){ne===void 0&&(ne=!0),se===void 0&&(se=!0),ae===void 0&&(ae=!0),oe===void 0&&(oe=-_bigNum$2);for(var le=[],he=this._first;he;)he._start>=oe&&(he instanceof Tween?se&&le.push(he):(ae&&le.push(he),ne&&le.push.apply(le,he.getChildren(!0,se,ae)))),he=he._next;return le},te.getById=function(ne){for(var se=this.getChildren(1,1,1),ae=se.length;ae--;)if(se[ae].vars.id===ne)return se[ae]},te.remove=function(ne){return _isString$1(ne)?this.removeLabel(ne):_isFunction$1(ne)?this.killTweensOf(ne):(_removeLinkedListItem(this,ne),ne===this._recent&&(this._recent=this._last),_uncache(this))},te.totalTime=function(ne,se){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?ne/this._ts:(this.totalDuration()-ne)/-this._ts))),ie.prototype.totalTime.call(this,ne,se),this._forcing=0,this):this._tTime},te.addLabel=function(ne,se){return this.labels[ne]=_parsePosition$1(this,se),this},te.removeLabel=function(ne){return delete this.labels[ne],this},te.addPause=function(ne,se,ae){var oe=Tween.delayedCall(0,se||_emptyFunc,ae);return oe.data="isPause",this._hasPause=1,_addToTimeline(this,oe,_parsePosition$1(this,ne))},te.removePause=function(ne){var se=this._first;for(ne=_parsePosition$1(this,ne);se;)se._start===ne&&se.data==="isPause"&&_removeFromParent(se),se=se._next},te.killTweensOf=function(ne,se,ae){for(var oe=this.getTweensOf(ne,ae),le=oe.length;le--;)_overwritingTween!==oe[le]&&oe[le].kill(ne,se);return this},te.getTweensOf=function(ne,se){for(var ae=[],oe=toArray(ne),le=this._first,he=_isNumber$2(se),ce;le;)le instanceof Tween?_arrayContainsAny(le._targets,oe)&&(he?(!_overwritingTween||le._initted&&le._ts)&&le.globalTime(0)<=se&&le.globalTime(le.totalDuration())>se:!se||le.isActive())&&ae.push(le):(ce=le.getTweensOf(oe,se)).length&&ae.push.apply(ae,ce),le=le._next;return ae},te.tweenTo=function(ne,se){se=se||{};var ae=this,oe=_parsePosition$1(ae,ne),le=se,he=le.startAt,ce=le.onStart,de=le.onStartParams,ue=le.immediateRender,fe,pe=Tween.to(ae,_setDefaults$1({ease:se.ease||"none",lazy:!1,immediateRender:!1,time:oe,overwrite:"auto",duration:se.duration||Math.abs((oe-(he&&"time"in he?he.time:ae._time))/ae.timeScale())||_tinyNum,onStart:function(){if(ae.pause(),!fe){var xe=se.duration||Math.abs((oe-(he&&"time"in he?he.time:ae._time))/ae.timeScale());pe._dur!==xe&&_setDuration(pe,xe,0,1).render(pe._time,!0,!0),fe=1}ce&&ce.apply(pe,de||[])}},se));return ue?pe.render(0):pe},te.tweenFromTo=function(ne,se,ae){return this.tweenTo(se,_setDefaults$1({startAt:{time:_parsePosition$1(this,ne)}},ae))},te.recent=function(){return this._recent},te.nextLabel=function(ne){return ne===void 0&&(ne=this._time),_getLabelInDirection(this,_parsePosition$1(this,ne))},te.previousLabel=function(ne){return ne===void 0&&(ne=this._time),_getLabelInDirection(this,_parsePosition$1(this,ne),1)},te.currentLabel=function(ne){return arguments.length?this.seek(ne,!0):this.previousLabel(this._time+_tinyNum)},te.shiftChildren=function(ne,se,ae){ae===void 0&&(ae=0);for(var oe=this._first,le=this.labels,he;oe;)oe._start>=ae&&(oe._start+=ne,oe._end+=ne),oe=oe._next;if(se)for(he in le)le[he]>=ae&&(le[he]+=ne);return _uncache(this)},te.invalidate=function(ne){var se=this._first;for(this._lock=0;se;)se.invalidate(ne),se=se._next;return ie.prototype.invalidate.call(this,ne)},te.clear=function(ne){ne===void 0&&(ne=!0);for(var se=this._first,ae;se;)ae=se._next,this.remove(se),se=ae;return this._dp&&(this._time=this._tTime=this._pTime=0),ne&&(this.labels={}),_uncache(this)},te.totalDuration=function(ne){var se=0,ae=this,oe=ae._last,le=_bigNum$2,he,ce,de;if(arguments.length)return ae.timeScale((ae._repeat<0?ae.duration():ae.totalDuration())/(ae.reversed()?-ne:ne));if(ae._dirty){for(de=ae.parent;oe;)he=oe._prev,oe._dirty&&oe.totalDuration(),ce=oe._start,ce>le&&ae._sort&&oe._ts&&!ae._lock?(ae._lock=1,_addToTimeline(ae,oe,ce-oe._delay,1)._lock=0):le=ce,ce<0&&oe._ts&&(se-=ce,(!de&&!ae._dp||de&&de.smoothChildTiming)&&(ae._start+=ce/ae._ts,ae._time-=ce,ae._tTime-=ce),ae.shiftChildren(-ce,!1,-1/0),le=0),oe._end>se&&oe._ts&&(se=oe._end),oe=he;_setDuration(ae,ae===_globalTimeline&&ae._time>se?ae._time:se,1,1),ae._dirty=0}return ae._tDur},ee.updateRoot=function(ne){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(ne,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var se=_globalTimeline._first;if((!se||!se._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;se&&!se._ts;)se=se._next;se||_ticker.sleep()}}},ee}(Animation);_setDefaults$1(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function(ee,te,re,ne,se,ae,oe){var le=new PropTween(this._pt,ee,te,0,1,_renderComplexString,null,se),he=0,ce=0,de,ue,fe,pe,me,xe,ge,_e;for(le.b=re,le.e=ne,re+="",ne+="",(ge=~ne.indexOf("random("))&&(ne=_replaceRandom(ne)),ae&&(_e=[re,ne],ae(_e,ee,te),re=_e[0],ne=_e[1]),ue=re.match(_complexStringNumExp)||[];de=_complexStringNumExp.exec(ne);)pe=de[0],me=ne.substring(he,de.index),fe?fe=(fe+1)%5:me.substr(-5)==="rgba("&&(fe=1),pe!==ue[ce++]&&(xe=parseFloat(ue[ce-1])||0,le._pt={_next:le._pt,p:me||ce===1?me:",",s:xe,c:pe.charAt(1)==="="?_parseRelative(xe,pe)-xe:parseFloat(pe)-xe,m:fe&&fe<4?Math.round:0},he=_complexStringNumExp.lastIndex);return le.c=he<ne.length?ne.substring(he,ne.length):"",le.fp=oe,(_relExp.test(ne)||ge)&&(le.e=0),this._pt=le,le},_addPropTween=function(ee,te,re,ne,se,ae,oe,le,he,ce){_isFunction$1(ne)&&(ne=ne(se||0,ee,ae));var de=ee[te],ue=re!=="get"?re:_isFunction$1(de)?he?ee[te.indexOf("set")||!_isFunction$1(ee["get"+te.substr(3)])?te:"get"+te.substr(3)](he):ee[te]():de,fe=_isFunction$1(de)?he?_setterFuncWithParam:_setterFunc:_setterPlain,pe;if(_isString$1(ne)&&(~ne.indexOf("random(")&&(ne=_replaceRandom(ne)),ne.charAt(1)==="="&&(pe=_parseRelative(ue,ne)+(getUnit(ue)||0),(pe||pe===0)&&(ne=pe))),!ce||ue!==ne||_forceAllPropTweens)return!isNaN(ue*ne)&&ne!==""?(pe=new PropTween(this._pt,ee,te,+ue||0,ne-(ue||0),typeof de=="boolean"?_renderBoolean:_renderPlain,0,fe),he&&(pe.fp=he),oe&&pe.modifier(oe,this,ee),this._pt=pe):(!de&&!(te in ee)&&_missingPlugin(te,ne),_addComplexStringPropTween.call(this,ee,te,ue,ne,fe,le||_config.stringFilter,he))},_processVars=function(ee,te,re,ne,se){if(_isFunction$1(ee)&&(ee=_parseFuncOrString(ee,se,te,re,ne)),!_isObject$1(ee)||ee.style&&ee.nodeType||_isArray(ee)||_isTypedArray(ee))return _isString$1(ee)?_parseFuncOrString(ee,se,te,re,ne):ee;var ae={},oe;for(oe in ee)ae[oe]=_parseFuncOrString(ee[oe],se,te,re,ne);return ae},_checkPlugin=function(ee,te,re,ne,se,ae){var oe,le,he,ce;if(_plugins[ee]&&(oe=new _plugins[ee]).init(se,oe.rawVars?te[ee]:_processVars(te[ee],ne,se,ae,re),re,ne,ae)!==!1&&(re._pt=le=new PropTween(re._pt,se,ee,0,1,oe.render,oe,0,oe.priority),re!==_quickTween))for(he=re._ptLookup[re._targets.indexOf(se)],ce=oe._props.length;ce--;)he[oe._props[ce]]=le;return oe},_overwritingTween,_forceAllPropTweens,_initTween=function ie(ee,te,re){var ne=ee.vars,se=ne.ease,ae=ne.startAt,oe=ne.immediateRender,le=ne.lazy,he=ne.onUpdate,ce=ne.onUpdateParams,de=ne.callbackScope,ue=ne.runBackwards,fe=ne.yoyoEase,pe=ne.keyframes,me=ne.autoRevert,xe=ee._dur,ge=ee._startAt,_e=ee._targets,ve=ee.parent,ye=ve&&ve.data==="nested"?ve.vars.targets:_e,be=ee._overwrite==="auto"&&!_suppressOverwrites$1,we=ee.timeline,Se,Te,Pe,Be,Ce,De,Re,Le,ke,Me,Ee,Ae,Ie;if(we&&(!pe||!se)&&(se="none"),ee._ease=_parseEase(se,_defaults$1.ease),ee._yEase=fe?_invertEase(_parseEase(fe===!0?se:fe,_defaults$1.ease)):0,fe&&ee._yoyo&&!ee._repeat&&(fe=ee._yEase,ee._yEase=ee._ease,ee._ease=fe),ee._from=!we&&!!ne.runBackwards,!we||pe&&!ne.stagger){if(Le=_e[0]?_getCache(_e[0]).harness:0,Ae=Le&&ne[Le.prop],Se=_copyExcluding(ne,_reservedProps),ge&&(ge._zTime<0&&ge.progress(1),te<0&&ue&&oe&&!me?ge.render(-1,!0):ge.revert(ue&&xe?_revertConfigNoKill:_startAtRevertConfig),ge._lazy=0),ae){if(_removeFromParent(ee._startAt=Tween.set(_e,_setDefaults$1({data:"isStart",overwrite:!1,parent:ve,immediateRender:!0,lazy:!ge&&_isNotFalse(le),startAt:null,delay:0,onUpdate:he,onUpdateParams:ce,callbackScope:de,stagger:0},ae))),ee._startAt._dp=0,ee._startAt._sat=ee,te<0&&(_reverting$1||!oe&&!me)&&ee._startAt.revert(_revertConfigNoKill),oe&&xe&&te<=0&&re<=0){te&&(ee._zTime=te);return}}else if(ue&&xe&&!ge){if(te&&(oe=!1),Pe=_setDefaults$1({overwrite:!1,data:"isFromStart",lazy:oe&&!ge&&_isNotFalse(le),immediateRender:oe,stagger:0,parent:ve},Se),Ae&&(Pe[Le.prop]=Ae),_removeFromParent(ee._startAt=Tween.set(_e,Pe)),ee._startAt._dp=0,ee._startAt._sat=ee,te<0&&(_reverting$1?ee._startAt.revert(_revertConfigNoKill):ee._startAt.render(-1,!0)),ee._zTime=te,!oe)ie(ee._startAt,_tinyNum,_tinyNum);else if(!te)return}for(ee._pt=ee._ptCache=0,le=xe&&_isNotFalse(le)||le&&!xe,Te=0;Te<_e.length;Te++){if(Ce=_e[Te],Re=Ce._gsap||_harness(_e)[Te]._gsap,ee._ptLookup[Te]=Me={},_lazyLookup[Re.id]&&_lazyTweens.length&&_lazyRender(),Ee=ye===_e?Te:ye.indexOf(Ce),Le&&(ke=new Le).init(Ce,Ae||Se,ee,Ee,ye)!==!1&&(ee._pt=Be=new PropTween(ee._pt,Ce,ke.name,0,1,ke.render,ke,0,ke.priority),ke._props.forEach(function(Fe){Me[Fe]=Be}),ke.priority&&(De=1)),!Le||Ae)for(Pe in Se)_plugins[Pe]&&(ke=_checkPlugin(Pe,Se,ee,Ee,Ce,ye))?ke.priority&&(De=1):Me[Pe]=Be=_addPropTween.call(ee,Ce,Pe,"get",Se[Pe],Ee,ye,0,ne.stringFilter);ee._op&&ee._op[Te]&&ee.kill(Ce,ee._op[Te]),be&&ee._pt&&(_overwritingTween=ee,_globalTimeline.killTweensOf(Ce,Me,ee.globalTime(te)),Ie=!ee.parent,_overwritingTween=0),ee._pt&&le&&(_lazyLookup[Re.id]=1)}De&&_sortPropTweensByPriority(ee),ee._onInit&&ee._onInit(ee)}ee._onUpdate=he,ee._initted=(!ee._op||ee._pt)&&!Ie,pe&&te<=0&&we.render(_bigNum$2,!0,!0)},_updatePropTweens=function(ee,te,re,ne,se,ae,oe){var le=(ee._pt&&ee._ptCache||(ee._ptCache={}))[te],he,ce,de,ue;if(!le)for(le=ee._ptCache[te]=[],de=ee._ptLookup,ue=ee._targets.length;ue--;){if(he=de[ue][te],he&&he.d&&he.d._pt)for(he=he.d._pt;he&&he.p!==te&&he.fp!==te;)he=he._next;if(!he)return _forceAllPropTweens=1,ee.vars[te]="+=0",_initTween(ee,oe),_forceAllPropTweens=0,1;le.push(he)}for(ue=le.length;ue--;)ce=le[ue],he=ce._pt||ce,he.s=(ne||ne===0)&&!se?ne:he.s+(ne||0)+ae*he.c,he.c=re-he.s,ce.e&&(ce.e=_round$3(re)+getUnit(ce.e)),ce.b&&(ce.b=he.s+getUnit(ce.b))},_addAliasesToVars=function(ee,te){var re=ee[0]?_getCache(ee[0]).harness:0,ne=re&&re.aliases,se,ae,oe,le;if(!ne)return te;se=_merge({},te);for(ae in ne)if(ae in se)for(le=ne[ae].split(","),oe=le.length;oe--;)se[le[oe]]=se[ae];return se},_parseKeyframe=function(ee,te,re,ne){var se=te.ease||ne||"power1.inOut",ae,oe;if(_isArray(te))oe=re[ee]||(re[ee]=[]),te.forEach(function(le,he){return oe.push({t:he/(te.length-1)*100,v:le,e:se})});else for(ae in te)oe=re[ae]||(re[ae]=[]),ae==="ease"||oe.push({t:parseFloat(ee),v:te[ae],e:se})},_parseFuncOrString=function(ee,te,re,ne,se){return _isFunction$1(ee)?ee.call(te,re,ne,se):_isString$1(ee)&&~ee.indexOf("random(")?_replaceRandom(ee):ee},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(ie){return _staggerPropsToSkip[ie]=1});var Tween=function(ie){_inheritsLoose(ee,ie);function ee(re,ne,se,ae){var oe;typeof ne=="number"&&(se.duration=ne,ne=se,se=null),oe=ie.call(this,ae?ne:_inheritDefaults(ne))||this;var le=oe.vars,he=le.duration,ce=le.delay,de=le.immediateRender,ue=le.stagger,fe=le.overwrite,pe=le.keyframes,me=le.defaults,xe=le.scrollTrigger,ge=le.yoyoEase,_e=ne.parent||_globalTimeline,ve=(_isArray(re)||_isTypedArray(re)?_isNumber$2(re[0]):"length"in ne)?[re]:toArray(re),ye,be,we,Se,Te,Pe,Be,Ce;if(oe._targets=ve.length?_harness(ve):_warn("GSAP target "+re+" not found. https://greensock.com",!_config.nullTargetWarn)||[],oe._ptLookup=[],oe._overwrite=fe,pe||ue||_isFuncOrString(he)||_isFuncOrString(ce)){if(ne=oe.vars,ye=oe.timeline=new Timeline({data:"nested",defaults:me||{},targets:_e&&_e.data==="nested"?_e.vars.targets:ve}),ye.kill(),ye.parent=ye._dp=_assertThisInitialized$1(oe),ye._start=0,ue||_isFuncOrString(he)||_isFuncOrString(ce)){if(Se=ve.length,Be=ue&&distribute(ue),_isObject$1(ue))for(Te in ue)~_staggerTweenProps.indexOf(Te)&&(Ce||(Ce={}),Ce[Te]=ue[Te]);for(be=0;be<Se;be++)we=_copyExcluding(ne,_staggerPropsToSkip),we.stagger=0,ge&&(we.yoyoEase=ge),Ce&&_merge(we,Ce),Pe=ve[be],we.duration=+_parseFuncOrString(he,_assertThisInitialized$1(oe),be,Pe,ve),we.delay=(+_parseFuncOrString(ce,_assertThisInitialized$1(oe),be,Pe,ve)||0)-oe._delay,!ue&&Se===1&&we.delay&&(oe._delay=ce=we.delay,oe._start+=ce,we.delay=0),ye.to(Pe,we,Be?Be(be,Pe,ve):0),ye._ease=_easeMap.none;ye.duration()?he=ce=0:oe.timeline=0}else if(pe){_inheritDefaults(_setDefaults$1(ye.vars.defaults,{ease:"none"})),ye._ease=_parseEase(pe.ease||ne.ease||"none");var De=0,Re,Le,ke;if(_isArray(pe))pe.forEach(function(Me){return ye.to(ve,Me,">")}),ye.duration();else{we={};for(Te in pe)Te==="ease"||Te==="easeEach"||_parseKeyframe(Te,pe[Te],we,pe.easeEach);for(Te in we)for(Re=we[Te].sort(function(Me,Ee){return Me.t-Ee.t}),De=0,be=0;be<Re.length;be++)Le=Re[be],ke={ease:Le.e,duration:(Le.t-(be?Re[be-1].t:0))/100*he},ke[Te]=Le.v,ye.to(ve,ke,De),De+=ke.duration;ye.duration()<he&&ye.to({},{duration:he-ye.duration()})}}he||oe.duration(he=ye.duration())}else oe.timeline=0;return fe===!0&&!_suppressOverwrites$1&&(_overwritingTween=_assertThisInitialized$1(oe),_globalTimeline.killTweensOf(ve),_overwritingTween=0),_addToTimeline(_e,_assertThisInitialized$1(oe),se),ne.reversed&&oe.reverse(),ne.paused&&oe.paused(!0),(de||!he&&!pe&&oe._start===_roundPrecise(_e._time)&&_isNotFalse(de)&&_hasNoPausedAncestors(_assertThisInitialized$1(oe))&&_e.data!=="nested")&&(oe._tTime=-_tinyNum,oe.render(Math.max(0,-ce)||0)),xe&&_scrollTrigger(_assertThisInitialized$1(oe),xe),oe}var te=ee.prototype;return te.render=function(ne,se,ae){var oe=this._time,le=this._tDur,he=this._dur,ce=ne<0,de=ne>le-_tinyNum&&!ce?le:ne<_tinyNum?0:ne,ue,fe,pe,me,xe,ge,_e,ve,ye;if(!he)_renderZeroDurationTween(this,ne,se,ae);else if(de!==this._tTime||!ne||ae||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==ce){if(ue=de,ve=this.timeline,this._repeat){if(me=he+this._rDelay,this._repeat<-1&&ce)return this.totalTime(me*100+ne,se,ae);if(ue=_roundPrecise(de%me),de===le?(pe=this._repeat,ue=he):(pe=~~(de/me),pe&&pe===de/me&&(ue=he,pe--),ue>he&&(ue=he)),ge=this._yoyo&&pe&1,ge&&(ye=this._yEase,ue=he-ue),xe=_animationCycle(this._tTime,me),ue===oe&&!ae&&this._initted)return this._tTime=de,this;pe!==xe&&(ve&&this._yEase&&_propagateYoyoEase(ve,ge),this.vars.repeatRefresh&&!ge&&!this._lock&&(this._lock=ae=1,this.render(_roundPrecise(me*pe),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,ce?ne:ue,ae,se,de))return this._tTime=0,this;if(oe!==this._time)return this;if(he!==this._dur)return this.render(ne,se,ae)}if(this._tTime=de,this._time=ue,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=_e=(ye||this._ease)(ue/he),this._from&&(this.ratio=_e=1-_e),ue&&!oe&&!se&&(_callback$1(this,"onStart"),this._tTime!==de))return this;for(fe=this._pt;fe;)fe.r(_e,fe.d),fe=fe._next;ve&&ve.render(ne<0?ne:!ue&&ge?-_tinyNum:ve._dur*ve._ease(ue/this._dur),se,ae)||this._startAt&&(this._zTime=ne),this._onUpdate&&!se&&(ce&&_rewindStartAt(this,ne,se,ae),_callback$1(this,"onUpdate")),this._repeat&&pe!==xe&&this.vars.onRepeat&&!se&&this.parent&&_callback$1(this,"onRepeat"),(de===this._tDur||!de)&&this._tTime===de&&(ce&&!this._onUpdate&&_rewindStartAt(this,ne,!0,!0),(ne||!he)&&(de===this._tDur&&this._ts>0||!de&&this._ts<0)&&_removeFromParent(this,1),!se&&!(ce&&!oe)&&(de||oe||ge)&&(_callback$1(this,de===le?"onComplete":"onReverseComplete",!0),this._prom&&!(de<le&&this.timeScale()>0)&&this._prom()))}return this},te.targets=function(){return this._targets},te.invalidate=function(ne){return(!ne||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(ne),ie.prototype.invalidate.call(this,ne)},te.resetTo=function(ne,se,ae,oe){_tickerActive||_ticker.wake(),this._ts||this.play();var le=Math.min(this._dur,(this._dp._time-this._start)*this._ts),he;return this._initted||_initTween(this,le),he=this._ease(le/this._dur),_updatePropTweens(this,ne,se,ae,oe,he,le)?this.resetTo(ne,se,ae,oe):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},te.kill=function(ne,se){if(se===void 0&&(se="all"),!ne&&(!se||se==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this;if(this.timeline){var ae=this.timeline.totalDuration();return this.timeline.killTweensOf(ne,se,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&ae!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/ae,0,1),this}var oe=this._targets,le=ne?toArray(ne):oe,he=this._ptLookup,ce=this._pt,de,ue,fe,pe,me,xe,ge;if((!se||se==="all")&&_arraysMatch(oe,le))return se==="all"&&(this._pt=0),_interrupt(this);for(de=this._op=this._op||[],se!=="all"&&(_isString$1(se)&&(me={},_forEachName(se,function(_e){return me[_e]=1}),se=me),se=_addAliasesToVars(oe,se)),ge=oe.length;ge--;)if(~le.indexOf(oe[ge])){ue=he[ge],se==="all"?(de[ge]=se,pe=ue,fe={}):(fe=de[ge]=de[ge]||{},pe=se);for(me in pe)xe=ue&&ue[me],xe&&((!("kill"in xe.d)||xe.d.kill(me)===!0)&&_removeLinkedListItem(this,xe,"_pt"),delete ue[me]),fe!=="all"&&(fe[me]=1)}return this._initted&&!this._pt&&ce&&_interrupt(this),this},ee.to=function(ne,se){return new ee(ne,se,arguments[2])},ee.from=function(ne,se){return _createTweenType(1,arguments)},ee.delayedCall=function(ne,se,ae,oe){return new ee(se,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:ne,onComplete:se,onReverseComplete:se,onCompleteParams:ae,onReverseCompleteParams:ae,callbackScope:oe})},ee.fromTo=function(ne,se,ae){return _createTweenType(2,arguments)},ee.set=function(ne,se){return se.duration=0,se.repeatDelay||(se.repeat=0),new ee(ne,se)},ee.killTweensOf=function(ne,se,ae){return _globalTimeline.killTweensOf(ne,se,ae)},ee}(Animation);_setDefaults$1(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_forEachName("staggerTo,staggerFrom,staggerFromTo",function(ie){Tween[ie]=function(){var ee=new Timeline,te=_slice.call(arguments,0);return te.splice(ie==="staggerFromTo"?5:4,0,0),ee[ie].apply(ee,te)}});var _setterPlain=function(ee,te,re){return ee[te]=re},_setterFunc=function(ee,te,re){return ee[te](re)},_setterFuncWithParam=function(ee,te,re,ne){return ee[te](ne.fp,re)},_setterAttribute=function(ee,te,re){return ee.setAttribute(te,re)},_getSetter=function(ee,te){return _isFunction$1(ee[te])?_setterFunc:_isUndefined(ee[te])&&ee.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function(ee,te){return te.set(te.t,te.p,Math.round((te.s+te.c*ee)*1e6)/1e6,te)},_renderBoolean=function(ee,te){return te.set(te.t,te.p,!!(te.s+te.c*ee),te)},_renderComplexString=function(ee,te){var re=te._pt,ne="";if(!ee&&te.b)ne=te.b;else if(ee===1&&te.e)ne=te.e;else{for(;re;)ne=re.p+(re.m?re.m(re.s+re.c*ee):Math.round((re.s+re.c*ee)*1e4)/1e4)+ne,re=re._next;ne+=te.c}te.set(te.t,te.p,ne,te)},_renderPropTweens=function(ee,te){for(var re=te._pt;re;)re.r(ee,re.d),re=re._next},_addPluginModifier=function(ee,te,re,ne){for(var se=this._pt,ae;se;)ae=se._next,se.p===ne&&se.modifier(ee,te,re),se=ae},_killPropTweensOf=function(ee){for(var te=this._pt,re,ne;te;)ne=te._next,te.p===ee&&!te.op||te.op===ee?_removeLinkedListItem(this,te,"_pt"):te.dep||(re=1),te=ne;return!re},_setterWithModifier=function(ee,te,re,ne){ne.mSet(ee,te,ne.m.call(ne.tween,re,ne.mt),ne)},_sortPropTweensByPriority=function(ee){for(var te=ee._pt,re,ne,se,ae;te;){for(re=te._next,ne=se;ne&&ne.pr>te.pr;)ne=ne._next;(te._prev=ne?ne._prev:ae)?te._prev._next=te:se=te,(te._next=ne)?ne._prev=te:ae=te,te=re}ee._pt=se},PropTween=function(){function ie(te,re,ne,se,ae,oe,le,he,ce){this.t=re,this.s=se,this.c=ae,this.p=ne,this.r=oe||_renderPlain,this.d=le||this,this.set=he||_setterPlain,this.pr=ce||0,this._next=te,te&&(te._prev=this)}var ee=ie.prototype;return ee.modifier=function(re,ne,se){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=re,this.mt=se,this.tween=ne},ie}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(ie){return _reservedProps[ie]=1}),_globals.TweenMax=_globals.TweenLite=Tween,_globals.TimelineLite=_globals.TimelineMax=Timeline,_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults$1,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),_config.stringFilter=_colorStringFilter;var _media=[],_listeners$1={},_emptyArray$1=[],_lastMediaTime=0,_dispatch$1=function(ee){return(_listeners$1[ee]||_emptyArray$1).map(function(te){return te()})},_onMediaChange=function(){var ee=Date.now(),te=[];ee-_lastMediaTime>2&&(_dispatch$1("matchMediaInit"),_media.forEach(function(re){var ne=re.queries,se=re.conditions,ae,oe,le,he;for(oe in ne)ae=_win$4.matchMedia(ne[oe]).matches,ae&&(le=1),ae!==se[oe]&&(se[oe]=ae,he=1);he&&(re.revert(),le&&te.push(re))}),_dispatch$1("matchMediaRevert"),te.forEach(function(re){return re.onMatch(re)}),_lastMediaTime=ee,_dispatch$1("matchMedia"))},Context=function(){function ie(te,re){this.selector=re&&selector(re),this.data=[],this._r=[],this.isReverted=!1,te&&this.add(te)}var ee=ie.prototype;return ee.add=function(re,ne,se){_isFunction$1(re)&&(se=ne,ne=re,re=_isFunction$1);var ae=this,oe=function(){var he=_context$4,ce=ae.selector,de;return he&&he!==ae&&he.data.push(ae),se&&(ae.selector=selector(se)),_context$4=ae,de=ne.apply(ae,arguments),_isFunction$1(de)&&ae._r.push(de),_context$4=he,ae.selector=ce,ae.isReverted=!1,de};return ae.last=oe,re===_isFunction$1?oe(ae):re?ae[re]=oe:oe},ee.ignore=function(re){var ne=_context$4;_context$4=null,re(this),_context$4=ne},ee.getTweens=function(){var re=[];return this.data.forEach(function(ne){return ne instanceof ie?re.push.apply(re,ne.getTweens()):ne instanceof Tween&&!(ne.parent&&ne.parent.data==="nested")&&re.push(ne)}),re},ee.clear=function(){this._r.length=this.data.length=0},ee.kill=function(re,ne){var se=this;if(re){var ae=this.getTweens();this.data.forEach(function(le){le.data==="isFlip"&&(le.revert(),le.getChildren(!0,!0,!1).forEach(function(he){return ae.splice(ae.indexOf(he),1)}))}),ae.map(function(le){return{g:le.globalTime(0),t:le}}).sort(function(le,he){return he.g-le.g||-1}).forEach(function(le){return le.t.revert(re)}),this.data.forEach(function(le){return!(le instanceof Animation)&&le.revert&&le.revert(re)}),this._r.forEach(function(le){return le(re,se)}),this.isReverted=!0}else this.data.forEach(function(le){return le.kill&&le.kill()});if(this.clear(),ne){var oe=_media.indexOf(this);~oe&&_media.splice(oe,1)}},ee.revert=function(re){this.kill(re||{})},ie}(),MatchMedia=function(){function ie(te){this.contexts=[],this.scope=te}var ee=ie.prototype;return ee.add=function(re,ne,se){_isObject$1(re)||(re={matches:re});var ae=new Context(0,se||this.scope),oe=ae.conditions={},le,he,ce;this.contexts.push(ae),ne=ae.add("onMatch",ne),ae.queries=re;for(he in re)he==="all"?ce=1:(le=_win$4.matchMedia(re[he]),le&&(_media.indexOf(ae)<0&&_media.push(ae),(oe[he]=le.matches)&&(ce=1),le.addListener?le.addListener(_onMediaChange):le.addEventListener("change",_onMediaChange)));return ce&&ne(ae),this},ee.revert=function(re){this.kill(re||{})},ee.kill=function(re){this.contexts.forEach(function(ne){return ne.kill(re,!0)})},ie}(),_gsap={registerPlugin:function(){for(var ee=arguments.length,te=new Array(ee),re=0;re<ee;re++)te[re]=arguments[re];te.forEach(function(ne){return _createPlugin(ne)})},timeline:function(ee){return new Timeline(ee)},getTweensOf:function(ee,te){return _globalTimeline.getTweensOf(ee,te)},getProperty:function(ee,te,re,ne){_isString$1(ee)&&(ee=toArray(ee)[0]);var se=_getCache(ee||{}).get,ae=re?_passThrough$1:_numericIfPossible;return re==="native"&&(re=""),ee&&(te?ae((_plugins[te]&&_plugins[te].get||se)(ee,te,re,ne)):function(oe,le,he){return ae((_plugins[oe]&&_plugins[oe].get||se)(ee,oe,le,he))})},quickSetter:function(ee,te,re){if(ee=toArray(ee),ee.length>1){var ne=ee.map(function(ce){return gsap$4.quickSetter(ce,te,re)}),se=ne.length;return function(ce){for(var de=se;de--;)ne[de](ce)}}ee=ee[0]||{};var ae=_plugins[te],oe=_getCache(ee),le=oe.harness&&(oe.harness.aliases||{})[te]||te,he=ae?function(ce){var de=new ae;_quickTween._pt=0,de.init(ee,re?ce+re:ce,_quickTween,0,[ee]),de.render(1,de),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:oe.set(ee,le);return ae?he:function(ce){return he(ee,le,re?ce+re:ce,oe,1)}},quickTo:function(ee,te,re){var ne,se=gsap$4.to(ee,_merge((ne={},ne[te]="+=0.1",ne.paused=!0,ne),re||{})),ae=function(le,he,ce){return se.resetTo(te,le,he,ce)};return ae.tween=se,ae},isTweening:function(ee){return _globalTimeline.getTweensOf(ee,!0).length>0},defaults:function(ee){return ee&&ee.ease&&(ee.ease=_parseEase(ee.ease,_defaults$1.ease)),_mergeDeep(_defaults$1,ee||{})},config:function(ee){return _mergeDeep(_config,ee||{})},registerEffect:function(ee){var te=ee.name,re=ee.effect,ne=ee.plugins,se=ee.defaults,ae=ee.extendTimeline;(ne||"").split(",").forEach(function(oe){return oe&&!_plugins[oe]&&!_globals[oe]&&_warn(te+" effect requires "+oe+" plugin.")}),_effects[te]=function(oe,le,he){return re(toArray(oe),_setDefaults$1(le||{},se),he)},ae&&(Timeline.prototype[te]=function(oe,le,he){return this.add(_effects[te](oe,_isObject$1(le)?le:(he=le)&&{},this),he)})},registerEase:function(ee,te){_easeMap[ee]=_parseEase(te)},parseEase:function(ee,te){return arguments.length?_parseEase(ee,te):_easeMap},getById:function(ee){return _globalTimeline.getById(ee)},exportRoot:function(ee,te){ee===void 0&&(ee={});var re=new Timeline(ee),ne,se;for(re.smoothChildTiming=_isNotFalse(ee.smoothChildTiming),_globalTimeline.remove(re),re._dp=0,re._time=re._tTime=_globalTimeline._time,ne=_globalTimeline._first;ne;)se=ne._next,(te||!(!ne._dur&&ne instanceof Tween&&ne.vars.onComplete===ne._targets[0]))&&_addToTimeline(re,ne,ne._start-ne._delay),ne=se;return _addToTimeline(_globalTimeline,re,0),re},context:function(ee,te){return ee?new Context(ee,te):_context$4},matchMedia:function(ee){return new MatchMedia(ee)},matchMediaRefresh:function(){return _media.forEach(function(ee){var te=ee.conditions,re,ne;for(ne in te)te[ne]&&(te[ne]=!1,re=1);re&&ee.revert()})||_onMediaChange()},addEventListener:function(ee,te){var re=_listeners$1[ee]||(_listeners$1[ee]=[]);~re.indexOf(te)||re.push(te)},removeEventListener:function(ee,te){var re=_listeners$1[ee],ne=re&&re.indexOf(te);ne>=0&&re.splice(ne,1)},utils:{wrap,wrapYoyo,distribute,random,snap,normalize,getUnit,clamp:clamp$2,splitColor,toArray,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function(){return _reverting$1},context:function(ee){return ee&&_context$4&&(_context$4.data.push(ee),ee._ctx=_context$4),_context$4},suppressOverwrites:function(ee){return _suppressOverwrites$1=ee}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(ie){return _gsap[ie]=Tween[ie]}),_ticker.add(Timeline.updateRoot),_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function(ee,te){for(var re=ee._pt;re&&re.p!==te&&re.op!==te&&re.fp!==te;)re=re._next;return re},_addModifiers=function(ee,te){var re=ee._targets,ne,se,ae;for(ne in te)for(se=re.length;se--;)ae=ee._ptLookup[se][ne],ae&&(ae=ae.d)&&(ae._pt&&(ae=_getPluginPropTween(ae,ne)),ae&&ae.modifier&&ae.modifier(te[ne],ee,re[se],ne))},_buildModifierPlugin=function(ee,te){return{name:ee,rawVars:1,init:function(ne,se,ae){ae._onInit=function(oe){var le,he;if(_isString$1(se)&&(le={},_forEachName(se,function(ce){return le[ce]=1}),se=le),te){le={};for(he in se)le[he]=te(se[he]);se=le}_addModifiers(oe,se)}}}},gsap$4=_gsap.registerPlugin({name:"attr",init:function(ee,te,re,ne,se){var ae,oe,le;this.tween=re;for(ae in te)le=ee.getAttribute(ae)||"",oe=this.add(ee,"setAttribute",(le||0)+"",te[ae],ne,se,0,0,ae),oe.op=ae,oe.b=le,this._props.push(ae)},render:function(ee,te){for(var re=te._pt;re;)_reverting$1?re.set(re.t,re.p,re.b,re):re.r(ee,re.d),re=re._next}},{name:"endArray",init:function(ee,te){for(var re=te.length;re--;)this.add(ee,re,ee[re]||0,te[re],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap$4.version="3.11.4",_coreReady=1,_windowExists$2()&&_wake(),_easeMap.Power0,_easeMap.Power1,_easeMap.Power2,_easeMap.Power3,_easeMap.Power4,_easeMap.Linear,_easeMap.Quad,_easeMap.Cubic,_easeMap.Quart,_easeMap.Quint,_easeMap.Strong,_easeMap.Elastic,_easeMap.Back,_easeMap.SteppedEase,_easeMap.Bounce,_easeMap.Sine,_easeMap.Expo,_easeMap.Circ;/*!
 * CSSPlugin 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _win$3,_doc$3,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists$1=function(){return typeof window!="undefined"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD$1=Math.PI/180,_atan2=Math.atan2,_bigNum$1=1e8,_capsExp$1=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function(ee,te){return te.set(te.t,te.p,Math.round((te.s+te.c*ee)*1e4)/1e4+te.u,te)},_renderPropWithEnd=function(ee,te){return te.set(te.t,te.p,ee===1?te.e:Math.round((te.s+te.c*ee)*1e4)/1e4+te.u,te)},_renderCSSPropWithBeginning=function(ee,te){return te.set(te.t,te.p,ee?Math.round((te.s+te.c*ee)*1e4)/1e4+te.u:te.b,te)},_renderRoundedCSSProp=function(ee,te){var re=te.s+te.c*ee;te.set(te.t,te.p,~~(re+(re<0?-.5:.5))+te.u,te)},_renderNonTweeningValue=function(ee,te){return te.set(te.t,te.p,ee?te.e:te.b,te)},_renderNonTweeningValueOnlyAtEnd=function(ee,te){return te.set(te.t,te.p,ee!==1?te.b:te.e,te)},_setterCSSStyle=function(ee,te,re){return ee.style[te]=re},_setterCSSProp=function(ee,te,re){return ee.style.setProperty(te,re)},_setterTransform=function(ee,te,re){return ee._gsap[te]=re},_setterScale=function(ee,te,re){return ee._gsap.scaleX=ee._gsap.scaleY=re},_setterScaleWithRender=function(ee,te,re,ne,se){var ae=ee._gsap;ae.scaleX=ae.scaleY=re,ae.renderTransform(se,ae)},_setterTransformWithRender=function(ee,te,re,ne,se){var ae=ee._gsap;ae[te]=re,ae.renderTransform(se,ae)},_transformProp$1="transform",_transformOriginProp=_transformProp$1+"Origin",_saveStyle=function(ee,te){var re=this,ne=this.target,se=ne.style;if(ee in _transformProps){if(this.tfm=this.tfm||{},ee!=="transform"&&(ee=_propertyAliases[ee]||ee,~ee.indexOf(",")?ee.split(",").forEach(function(ae){return re.tfm[ae]=_get(ne,ae)}):this.tfm[ee]=ne._gsap.x?ne._gsap[ee]:_get(ne,ee)),this.props.indexOf(_transformProp$1)>=0)return;ne._gsap.svg&&(this.svgo=ne.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,te,"")),ee=_transformProp$1}(se||te)&&this.props.push(ee,te,se[ee])},_removeIndependentTransforms=function(ee){ee.translate&&(ee.removeProperty("translate"),ee.removeProperty("scale"),ee.removeProperty("rotate"))},_revertStyle=function(){var ee=this.props,te=this.target,re=te.style,ne=te._gsap,se,ae;for(se=0;se<ee.length;se+=3)ee[se+1]?te[ee[se]]=ee[se+2]:ee[se+2]?re[ee[se]]=ee[se+2]:re.removeProperty(ee[se].replace(_capsExp$1,"-$1").toLowerCase());if(this.tfm){for(ae in this.tfm)ne[ae]=this.tfm[ae];ne.svg&&(ne.renderTransform(),te.setAttribute("data-svg-origin",this.svgo||"")),se=_reverting(),se&&!se.isStart&&!re[_transformProp$1]&&(_removeIndependentTransforms(re),ne.uncache=1)}},_getStyleSaver=function(ee,te){var re={target:ee,props:[],revert:_revertStyle,save:_saveStyle};return te&&te.split(",").forEach(function(ne){return re.save(ne)}),re},_supports3D,_createElement=function(ee,te){var re=_doc$3.createElementNS?_doc$3.createElementNS((te||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),ee):_doc$3.createElement(ee);return re.style?re:_doc$3.createElement(ee)},_getComputedProperty=function ie(ee,te,re){var ne=getComputedStyle(ee);return ne[te]||ne.getPropertyValue(te.replace(_capsExp$1,"-$1").toLowerCase())||ne.getPropertyValue(te)||!re&&ie(ee,_checkPropPrefix(te)||te,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function(ee,te,re){var ne=te||_tempDiv,se=ne.style,ae=5;if(ee in se&&!re)return ee;for(ee=ee.charAt(0).toUpperCase()+ee.substr(1);ae--&&!(_prefixes[ae]+ee in se););return ae<0?null:(ae===3?"ms":ae>=0?_prefixes[ae]:"")+ee},_initCore$3=function(){_windowExists$1()&&window.document&&(_win$3=window,_doc$3=_win$3.document,_docElement=_doc$3.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp$1=_checkPropPrefix(_transformProp$1),_transformOriginProp=_transformProp$1+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap$4.core.reverting,_pluginInitted=1)},_getBBoxHack=function ie(ee){var te=_createElement("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),re=this.parentNode,ne=this.nextSibling,se=this.style.cssText,ae;if(_docElement.appendChild(te),te.appendChild(this),this.style.display="block",ee)try{ae=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=ie}catch{}else this._gsapBBox&&(ae=this._gsapBBox());return re&&(ne?re.insertBefore(this,ne):re.appendChild(this)),_docElement.removeChild(te),this.style.cssText=se,ae},_getAttributeFallbacks=function(ee,te){for(var re=te.length;re--;)if(ee.hasAttribute(te[re]))return ee.getAttribute(te[re])},_getBBox=function(ee){var te;try{te=ee.getBBox()}catch{te=_getBBoxHack.call(ee,!0)}return te&&(te.width||te.height)||ee.getBBox===_getBBoxHack||(te=_getBBoxHack.call(ee,!0)),te&&!te.width&&!te.x&&!te.y?{x:+_getAttributeFallbacks(ee,["x","cx","x1"])||0,y:+_getAttributeFallbacks(ee,["y","cy","y1"])||0,width:0,height:0}:te},_isSVG=function(ee){return!!(ee.getCTM&&(!ee.parentNode||ee.ownerSVGElement)&&_getBBox(ee))},_removeProperty=function(ee,te){if(te){var re=ee.style;te in _transformProps&&te!==_transformOriginProp&&(te=_transformProp$1),re.removeProperty?((te.substr(0,2)==="ms"||te.substr(0,6)==="webkit")&&(te="-"+te),re.removeProperty(te.replace(_capsExp$1,"-$1").toLowerCase())):re.removeAttribute(te)}},_addNonTweeningPT=function(ee,te,re,ne,se,ae){var oe=new PropTween(ee._pt,te,re,0,1,ae?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return ee._pt=oe,oe.b=ne,oe.e=se,ee._props.push(re),oe},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function ie(ee,te,re,ne){var se=parseFloat(re)||0,ae=(re+"").trim().substr((se+"").length)||"px",oe=_tempDiv.style,le=_horizontalExp.test(te),he=ee.tagName.toLowerCase()==="svg",ce=(he?"client":"offset")+(le?"Width":"Height"),de=100,ue=ne==="px",fe=ne==="%",pe,me,xe,ge;return ne===ae||!se||_nonConvertibleUnits[ne]||_nonConvertibleUnits[ae]?se:(ae!=="px"&&!ue&&(se=ie(ee,te,re,"px")),ge=ee.getCTM&&_isSVG(ee),(fe||ae==="%")&&(_transformProps[te]||~te.indexOf("adius"))?(pe=ge?ee.getBBox()[le?"width":"height"]:ee[ce],_round$3(fe?se/pe*de:se/100*pe)):(oe[le?"width":"height"]=de+(ue?ae:ne),me=~te.indexOf("adius")||ne==="em"&&ee.appendChild&&!he?ee:ee.parentNode,ge&&(me=(ee.ownerSVGElement||{}).parentNode),(!me||me===_doc$3||!me.appendChild)&&(me=_doc$3.body),xe=me._gsap,xe&&fe&&xe.width&&le&&xe.time===_ticker.time&&!xe.uncache?_round$3(se/xe.width*de):((fe||ae==="%")&&!_nonStandardLayouts[_getComputedProperty(me,"display")]&&(oe.position=_getComputedProperty(ee,"position")),me===ee&&(oe.position="static"),me.appendChild(_tempDiv),pe=_tempDiv[ce],me.removeChild(_tempDiv),oe.position="absolute",le&&fe&&(xe=_getCache(me),xe.time=_ticker.time,xe.width=me[ce]),_round$3(ue?pe*se/de:pe&&se?de/pe*se:0))))},_get=function(ee,te,re,ne){var se;return _pluginInitted||_initCore$3(),te in _propertyAliases&&te!=="transform"&&(te=_propertyAliases[te],~te.indexOf(",")&&(te=te.split(",")[0])),_transformProps[te]&&te!=="transform"?(se=_parseTransform(ee,ne),se=te!=="transformOrigin"?se[te]:se.svg?se.origin:_firstTwoOnly(_getComputedProperty(ee,_transformOriginProp))+" "+se.zOrigin+"px"):(se=ee.style[te],(!se||se==="auto"||ne||~(se+"").indexOf("calc("))&&(se=_specialProps[te]&&_specialProps[te](ee,te,re)||_getComputedProperty(ee,te)||_getProperty(ee,te)||(te==="opacity"?1:0))),re&&!~(se+"").trim().indexOf(" ")?_convertToUnit(ee,te,se,re)+re:se},_tweenComplexCSSString=function(ee,te,re,ne){if(!re||re==="none"){var se=_checkPropPrefix(te,ee,1),ae=se&&_getComputedProperty(ee,se,1);ae&&ae!==re?(te=se,re=ae):te==="borderColor"&&(re=_getComputedProperty(ee,"borderTopColor"))}var oe=new PropTween(this._pt,ee.style,te,0,1,_renderComplexString),le=0,he=0,ce,de,ue,fe,pe,me,xe,ge,_e,ve,ye,be;if(oe.b=re,oe.e=ne,re+="",ne+="",ne==="auto"&&(ee.style[te]=ne,ne=_getComputedProperty(ee,te)||ne,ee.style[te]=re),ce=[re,ne],_colorStringFilter(ce),re=ce[0],ne=ce[1],ue=re.match(_numWithUnitExp)||[],be=ne.match(_numWithUnitExp)||[],be.length){for(;de=_numWithUnitExp.exec(ne);)xe=de[0],_e=ne.substring(le,de.index),pe?pe=(pe+1)%5:(_e.substr(-5)==="rgba("||_e.substr(-5)==="hsla(")&&(pe=1),xe!==(me=ue[he++]||"")&&(fe=parseFloat(me)||0,ye=me.substr((fe+"").length),xe.charAt(1)==="="&&(xe=_parseRelative(fe,xe)+ye),ge=parseFloat(xe),ve=xe.substr((ge+"").length),le=_numWithUnitExp.lastIndex-ve.length,ve||(ve=ve||_config.units[te]||ye,le===ne.length&&(ne+=ve,oe.e+=ve)),ye!==ve&&(fe=_convertToUnit(ee,te,me,ve)||0),oe._pt={_next:oe._pt,p:_e||he===1?_e:",",s:fe,c:ge-fe,m:pe&&pe<4||te==="zIndex"?Math.round:0});oe.c=le<ne.length?ne.substring(le,ne.length):""}else oe.r=te==="display"&&ne==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(ne)&&(oe.e=0),this._pt=oe,oe},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function(ee){var te=ee.split(" "),re=te[0],ne=te[1]||"50%";return(re==="top"||re==="bottom"||ne==="left"||ne==="right")&&(ee=re,re=ne,ne=ee),te[0]=_keywordToPercent[re]||re,te[1]=_keywordToPercent[ne]||ne,te.join(" ")},_renderClearProps=function(ee,te){if(te.tween&&te.tween._time===te.tween._dur){var re=te.t,ne=re.style,se=te.u,ae=re._gsap,oe,le,he;if(se==="all"||se===!0)ne.cssText="",le=1;else for(se=se.split(","),he=se.length;--he>-1;)oe=se[he],_transformProps[oe]&&(le=1,oe=oe==="transformOrigin"?_transformOriginProp:_transformProp$1),_removeProperty(re,oe);le&&(_removeProperty(re,_transformProp$1),ae&&(ae.svg&&re.removeAttribute("transform"),_parseTransform(re,1),ae.uncache=1,_removeIndependentTransforms(ne)))}},_specialProps={clearProps:function(ee,te,re,ne,se){if(se.data!=="isFromStart"){var ae=ee._pt=new PropTween(ee._pt,te,re,0,0,_renderClearProps);return ae.u=ne,ae.pr=-10,ae.tween=se,ee._props.push(re),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function(ee){return ee==="matrix(1, 0, 0, 1, 0, 0)"||ee==="none"||!ee},_getComputedTransformMatrixAsArray=function(ee){var te=_getComputedProperty(ee,_transformProp$1);return _isNullTransform(te)?_identity2DMatrix:te.substr(7).match(_numExp$1).map(_round$3)},_getMatrix=function(ee,te){var re=ee._gsap||_getCache(ee),ne=ee.style,se=_getComputedTransformMatrixAsArray(ee),ae,oe,le,he;return re.svg&&ee.getAttribute("transform")?(le=ee.transform.baseVal.consolidate().matrix,se=[le.a,le.b,le.c,le.d,le.e,le.f],se.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:se):(se===_identity2DMatrix&&!ee.offsetParent&&ee!==_docElement&&!re.svg&&(le=ne.display,ne.display="block",ae=ee.parentNode,(!ae||!ee.offsetParent)&&(he=1,oe=ee.nextElementSibling,_docElement.appendChild(ee)),se=_getComputedTransformMatrixAsArray(ee),le?ne.display=le:_removeProperty(ee,"display"),he&&(oe?ae.insertBefore(ee,oe):ae?ae.appendChild(ee):_docElement.removeChild(ee))),te&&se.length>6?[se[0],se[1],se[4],se[5],se[12],se[13]]:se)},_applySVGOrigin=function(ee,te,re,ne,se,ae){var oe=ee._gsap,le=se||_getMatrix(ee,!0),he=oe.xOrigin||0,ce=oe.yOrigin||0,de=oe.xOffset||0,ue=oe.yOffset||0,fe=le[0],pe=le[1],me=le[2],xe=le[3],ge=le[4],_e=le[5],ve=te.split(" "),ye=parseFloat(ve[0])||0,be=parseFloat(ve[1])||0,we,Se,Te,Pe;re?le!==_identity2DMatrix&&(Se=fe*xe-pe*me)&&(Te=ye*(xe/Se)+be*(-me/Se)+(me*_e-xe*ge)/Se,Pe=ye*(-pe/Se)+be*(fe/Se)-(fe*_e-pe*ge)/Se,ye=Te,be=Pe):(we=_getBBox(ee),ye=we.x+(~ve[0].indexOf("%")?ye/100*we.width:ye),be=we.y+(~(ve[1]||ve[0]).indexOf("%")?be/100*we.height:be)),ne||ne!==!1&&oe.smooth?(ge=ye-he,_e=be-ce,oe.xOffset=de+(ge*fe+_e*me)-ge,oe.yOffset=ue+(ge*pe+_e*xe)-_e):oe.xOffset=oe.yOffset=0,oe.xOrigin=ye,oe.yOrigin=be,oe.smooth=!!ne,oe.origin=te,oe.originIsAbsolute=!!re,ee.style[_transformOriginProp]="0px 0px",ae&&(_addNonTweeningPT(ae,oe,"xOrigin",he,ye),_addNonTweeningPT(ae,oe,"yOrigin",ce,be),_addNonTweeningPT(ae,oe,"xOffset",de,oe.xOffset),_addNonTweeningPT(ae,oe,"yOffset",ue,oe.yOffset)),ee.setAttribute("data-svg-origin",ye+" "+be)},_parseTransform=function(ee,te){var re=ee._gsap||new GSCache(ee);if("x"in re&&!te&&!re.uncache)return re;var ne=ee.style,se=re.scaleX<0,ae="px",oe="deg",le=getComputedStyle(ee),he=_getComputedProperty(ee,_transformOriginProp)||"0",ce,de,ue,fe,pe,me,xe,ge,_e,ve,ye,be,we,Se,Te,Pe,Be,Ce,De,Re,Le,ke,Me,Ee,Ae,Ie,Fe,Ne,$e,ze,Xe,Je;return ce=de=ue=me=xe=ge=_e=ve=ye=0,fe=pe=1,re.svg=!!(ee.getCTM&&_isSVG(ee)),le.translate&&((le.translate!=="none"||le.scale!=="none"||le.rotate!=="none")&&(ne[_transformProp$1]=(le.translate!=="none"?"translate3d("+(le.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(le.rotate!=="none"?"rotate("+le.rotate+") ":"")+(le.scale!=="none"?"scale("+le.scale.split(" ").join(",")+") ":"")+(le[_transformProp$1]!=="none"?le[_transformProp$1]:"")),ne.scale=ne.rotate=ne.translate="none"),Se=_getMatrix(ee,re.svg),re.svg&&(re.uncache?(Ae=ee.getBBox(),he=re.xOrigin-Ae.x+"px "+(re.yOrigin-Ae.y)+"px",Ee=""):Ee=!te&&ee.getAttribute("data-svg-origin"),_applySVGOrigin(ee,Ee||he,!!Ee||re.originIsAbsolute,re.smooth!==!1,Se)),be=re.xOrigin||0,we=re.yOrigin||0,Se!==_identity2DMatrix&&(Ce=Se[0],De=Se[1],Re=Se[2],Le=Se[3],ce=ke=Se[4],de=Me=Se[5],Se.length===6?(fe=Math.sqrt(Ce*Ce+De*De),pe=Math.sqrt(Le*Le+Re*Re),me=Ce||De?_atan2(De,Ce)*_RAD2DEG:0,_e=Re||Le?_atan2(Re,Le)*_RAD2DEG+me:0,_e&&(pe*=Math.abs(Math.cos(_e*_DEG2RAD$1))),re.svg&&(ce-=be-(be*Ce+we*Re),de-=we-(be*De+we*Le))):(Je=Se[6],ze=Se[7],Fe=Se[8],Ne=Se[9],$e=Se[10],Xe=Se[11],ce=Se[12],de=Se[13],ue=Se[14],Te=_atan2(Je,$e),xe=Te*_RAD2DEG,Te&&(Pe=Math.cos(-Te),Be=Math.sin(-Te),Ee=ke*Pe+Fe*Be,Ae=Me*Pe+Ne*Be,Ie=Je*Pe+$e*Be,Fe=ke*-Be+Fe*Pe,Ne=Me*-Be+Ne*Pe,$e=Je*-Be+$e*Pe,Xe=ze*-Be+Xe*Pe,ke=Ee,Me=Ae,Je=Ie),Te=_atan2(-Re,$e),ge=Te*_RAD2DEG,Te&&(Pe=Math.cos(-Te),Be=Math.sin(-Te),Ee=Ce*Pe-Fe*Be,Ae=De*Pe-Ne*Be,Ie=Re*Pe-$e*Be,Xe=Le*Be+Xe*Pe,Ce=Ee,De=Ae,Re=Ie),Te=_atan2(De,Ce),me=Te*_RAD2DEG,Te&&(Pe=Math.cos(Te),Be=Math.sin(Te),Ee=Ce*Pe+De*Be,Ae=ke*Pe+Me*Be,De=De*Pe-Ce*Be,Me=Me*Pe-ke*Be,Ce=Ee,ke=Ae),xe&&Math.abs(xe)+Math.abs(me)>359.9&&(xe=me=0,ge=180-ge),fe=_round$3(Math.sqrt(Ce*Ce+De*De+Re*Re)),pe=_round$3(Math.sqrt(Me*Me+Je*Je)),Te=_atan2(ke,Me),_e=Math.abs(Te)>2e-4?Te*_RAD2DEG:0,ye=Xe?1/(Xe<0?-Xe:Xe):0),re.svg&&(Ee=ee.getAttribute("transform"),re.forceCSS=ee.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(ee,_transformProp$1)),Ee&&ee.setAttribute("transform",Ee))),Math.abs(_e)>90&&Math.abs(_e)<270&&(se?(fe*=-1,_e+=me<=0?180:-180,me+=me<=0?180:-180):(pe*=-1,_e+=_e<=0?180:-180)),te=te||re.uncache,re.x=ce-((re.xPercent=ce&&(!te&&re.xPercent||(Math.round(ee.offsetWidth/2)===Math.round(-ce)?-50:0)))?ee.offsetWidth*re.xPercent/100:0)+ae,re.y=de-((re.yPercent=de&&(!te&&re.yPercent||(Math.round(ee.offsetHeight/2)===Math.round(-de)?-50:0)))?ee.offsetHeight*re.yPercent/100:0)+ae,re.z=ue+ae,re.scaleX=_round$3(fe),re.scaleY=_round$3(pe),re.rotation=_round$3(me)+oe,re.rotationX=_round$3(xe)+oe,re.rotationY=_round$3(ge)+oe,re.skewX=_e+oe,re.skewY=ve+oe,re.transformPerspective=ye+ae,(re.zOrigin=parseFloat(he.split(" ")[2])||0)&&(ne[_transformOriginProp]=_firstTwoOnly(he)),re.xOffset=re.yOffset=0,re.force3D=_config.force3D,re.renderTransform=re.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,re.uncache=0,re},_firstTwoOnly=function(ee){return(ee=ee.split(" "))[0]+" "+ee[1]},_addPxTranslate=function(ee,te,re){var ne=getUnit(te);return _round$3(parseFloat(te)+parseFloat(_convertToUnit(ee,"x",re+"px",ne)))+ne},_renderNon3DTransforms=function(ee,te){te.z="0px",te.rotationY=te.rotationX="0deg",te.force3D=0,_renderCSSTransforms(ee,te)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function(ee,te){var re=te||this,ne=re.xPercent,se=re.yPercent,ae=re.x,oe=re.y,le=re.z,he=re.rotation,ce=re.rotationY,de=re.rotationX,ue=re.skewX,fe=re.skewY,pe=re.scaleX,me=re.scaleY,xe=re.transformPerspective,ge=re.force3D,_e=re.target,ve=re.zOrigin,ye="",be=ge==="auto"&&ee&&ee!==1||ge===!0;if(ve&&(de!==_zeroDeg||ce!==_zeroDeg)){var we=parseFloat(ce)*_DEG2RAD$1,Se=Math.sin(we),Te=Math.cos(we),Pe;we=parseFloat(de)*_DEG2RAD$1,Pe=Math.cos(we),ae=_addPxTranslate(_e,ae,Se*Pe*-ve),oe=_addPxTranslate(_e,oe,-Math.sin(we)*-ve),le=_addPxTranslate(_e,le,Te*Pe*-ve+ve)}xe!==_zeroPx&&(ye+="perspective("+xe+_endParenthesis),(ne||se)&&(ye+="translate("+ne+"%, "+se+"%) "),(be||ae!==_zeroPx||oe!==_zeroPx||le!==_zeroPx)&&(ye+=le!==_zeroPx||be?"translate3d("+ae+", "+oe+", "+le+") ":"translate("+ae+", "+oe+_endParenthesis),he!==_zeroDeg&&(ye+="rotate("+he+_endParenthesis),ce!==_zeroDeg&&(ye+="rotateY("+ce+_endParenthesis),de!==_zeroDeg&&(ye+="rotateX("+de+_endParenthesis),(ue!==_zeroDeg||fe!==_zeroDeg)&&(ye+="skew("+ue+", "+fe+_endParenthesis),(pe!==1||me!==1)&&(ye+="scale("+pe+", "+me+_endParenthesis),_e.style[_transformProp$1]=ye||"translate(0, 0)"},_renderSVGTransforms=function(ee,te){var re=te||this,ne=re.xPercent,se=re.yPercent,ae=re.x,oe=re.y,le=re.rotation,he=re.skewX,ce=re.skewY,de=re.scaleX,ue=re.scaleY,fe=re.target,pe=re.xOrigin,me=re.yOrigin,xe=re.xOffset,ge=re.yOffset,_e=re.forceCSS,ve=parseFloat(ae),ye=parseFloat(oe),be,we,Se,Te,Pe;le=parseFloat(le),he=parseFloat(he),ce=parseFloat(ce),ce&&(ce=parseFloat(ce),he+=ce,le+=ce),le||he?(le*=_DEG2RAD$1,he*=_DEG2RAD$1,be=Math.cos(le)*de,we=Math.sin(le)*de,Se=Math.sin(le-he)*-ue,Te=Math.cos(le-he)*ue,he&&(ce*=_DEG2RAD$1,Pe=Math.tan(he-ce),Pe=Math.sqrt(1+Pe*Pe),Se*=Pe,Te*=Pe,ce&&(Pe=Math.tan(ce),Pe=Math.sqrt(1+Pe*Pe),be*=Pe,we*=Pe)),be=_round$3(be),we=_round$3(we),Se=_round$3(Se),Te=_round$3(Te)):(be=de,Te=ue,we=Se=0),(ve&&!~(ae+"").indexOf("px")||ye&&!~(oe+"").indexOf("px"))&&(ve=_convertToUnit(fe,"x",ae,"px"),ye=_convertToUnit(fe,"y",oe,"px")),(pe||me||xe||ge)&&(ve=_round$3(ve+pe-(pe*be+me*Se)+xe),ye=_round$3(ye+me-(pe*we+me*Te)+ge)),(ne||se)&&(Pe=fe.getBBox(),ve=_round$3(ve+ne/100*Pe.width),ye=_round$3(ye+se/100*Pe.height)),Pe="matrix("+be+","+we+","+Se+","+Te+","+ve+","+ye+")",fe.setAttribute("transform",Pe),_e&&(fe.style[_transformProp$1]=Pe)},_addRotationalPropTween=function(ee,te,re,ne,se){var ae=360,oe=_isString$1(se),le=parseFloat(se)*(oe&&~se.indexOf("rad")?_RAD2DEG:1),he=le-ne,ce=ne+he+"deg",de,ue;return oe&&(de=se.split("_")[1],de==="short"&&(he%=ae,he!==he%(ae/2)&&(he+=he<0?ae:-ae)),de==="cw"&&he<0?he=(he+ae*_bigNum$1)%ae-~~(he/ae)*ae:de==="ccw"&&he>0&&(he=(he-ae*_bigNum$1)%ae-~~(he/ae)*ae)),ee._pt=ue=new PropTween(ee._pt,te,re,ne,he,_renderPropWithEnd),ue.e=ce,ue.u="deg",ee._props.push(re),ue},_assign=function(ee,te){for(var re in te)ee[re]=te[re];return ee},_addRawTransformPTs=function(ee,te,re){var ne=_assign({},re._gsap),se="perspective,force3D,transformOrigin,svgOrigin",ae=re.style,oe,le,he,ce,de,ue,fe,pe;ne.svg?(he=re.getAttribute("transform"),re.setAttribute("transform",""),ae[_transformProp$1]=te,oe=_parseTransform(re,1),_removeProperty(re,_transformProp$1),re.setAttribute("transform",he)):(he=getComputedStyle(re)[_transformProp$1],ae[_transformProp$1]=te,oe=_parseTransform(re,1),ae[_transformProp$1]=he);for(le in _transformProps)he=ne[le],ce=oe[le],he!==ce&&se.indexOf(le)<0&&(fe=getUnit(he),pe=getUnit(ce),de=fe!==pe?_convertToUnit(re,le,he,pe):parseFloat(he),ue=parseFloat(ce),ee._pt=new PropTween(ee._pt,oe,le,de,ue-de,_renderCSSProp),ee._pt.u=pe||0,ee._props.push(le));_assign(oe,ne)};_forEachName("padding,margin,Width,Radius",function(ie,ee){var te="Top",re="Right",ne="Bottom",se="Left",ae=(ee<3?[te,re,ne,se]:[te+se,te+re,ne+re,ne+se]).map(function(oe){return ee<2?ie+oe:"border"+oe+ie});_specialProps[ee>1?"border"+ie:ie]=function(oe,le,he,ce,de){var ue,fe;if(arguments.length<4)return ue=ae.map(function(pe){return _get(oe,pe,he)}),fe=ue.join(" "),fe.split(ue[0]).length===5?ue[0]:fe;ue=(ce+"").split(" "),fe={},ae.forEach(function(pe,me){return fe[pe]=ue[me]=ue[me]||ue[(me-1)/2|0]}),oe.init(le,fe,de)}});var CSSPlugin={name:"css",register:_initCore$3,targetTest:function(ee){return ee.style&&ee.nodeType},init:function(ee,te,re,ne,se){var ae=this._props,oe=ee.style,le=re.vars.startAt,he,ce,de,ue,fe,pe,me,xe,ge,_e,ve,ye,be,we,Se,Te;_pluginInitted||_initCore$3(),this.styles=this.styles||_getStyleSaver(ee),Te=this.styles.props,this.tween=re;for(me in te)if(me!=="autoRound"&&(ce=te[me],!(_plugins[me]&&_checkPlugin(me,te,re,ne,ee,se)))){if(fe=typeof ce,pe=_specialProps[me],fe==="function"&&(ce=ce.call(re,ne,ee,se),fe=typeof ce),fe==="string"&&~ce.indexOf("random(")&&(ce=_replaceRandom(ce)),pe)pe(this,ee,me,ce,re)&&(Se=1);else if(me.substr(0,2)==="--")he=(getComputedStyle(ee).getPropertyValue(me)+"").trim(),ce+="",_colorExp.lastIndex=0,_colorExp.test(he)||(xe=getUnit(he),ge=getUnit(ce)),ge?xe!==ge&&(he=_convertToUnit(ee,me,he,ge)+ge):xe&&(ce+=xe),this.add(oe,"setProperty",he,ce,ne,se,0,0,me),ae.push(me),Te.push(me,0,oe[me]);else if(fe!=="undefined"){if(le&&me in le?(he=typeof le[me]=="function"?le[me].call(re,ne,ee,se):le[me],_isString$1(he)&&~he.indexOf("random(")&&(he=_replaceRandom(he)),getUnit(he+"")||(he+=_config.units[me]||getUnit(_get(ee,me))||""),(he+"").charAt(1)==="="&&(he=_get(ee,me))):he=_get(ee,me),ue=parseFloat(he),_e=fe==="string"&&ce.charAt(1)==="="&&ce.substr(0,2),_e&&(ce=ce.substr(2)),de=parseFloat(ce),me in _propertyAliases&&(me==="autoAlpha"&&(ue===1&&_get(ee,"visibility")==="hidden"&&de&&(ue=0),Te.push("visibility",0,oe.visibility),_addNonTweeningPT(this,oe,"visibility",ue?"inherit":"hidden",de?"inherit":"hidden",!de)),me!=="scale"&&me!=="transform"&&(me=_propertyAliases[me],~me.indexOf(",")&&(me=me.split(",")[0]))),ve=me in _transformProps,ve){if(this.styles.save(me),ye||(be=ee._gsap,be.renderTransform&&!te.parseTransform||_parseTransform(ee,te.parseTransform),we=te.smoothOrigin!==!1&&be.smooth,ye=this._pt=new PropTween(this._pt,oe,_transformProp$1,0,1,be.renderTransform,be,0,-1),ye.dep=1),me==="scale")this._pt=new PropTween(this._pt,be,"scaleY",be.scaleY,(_e?_parseRelative(be.scaleY,_e+de):de)-be.scaleY||0,_renderCSSProp),this._pt.u=0,ae.push("scaleY",me),me+="X";else if(me==="transformOrigin"){Te.push(_transformOriginProp,0,oe[_transformOriginProp]),ce=_convertKeywordsToPercentages(ce),be.svg?_applySVGOrigin(ee,ce,0,we,0,this):(ge=parseFloat(ce.split(" ")[2])||0,ge!==be.zOrigin&&_addNonTweeningPT(this,be,"zOrigin",be.zOrigin,ge),_addNonTweeningPT(this,oe,me,_firstTwoOnly(he),_firstTwoOnly(ce)));continue}else if(me==="svgOrigin"){_applySVGOrigin(ee,ce,1,we,0,this);continue}else if(me in _rotationalProperties){_addRotationalPropTween(this,be,me,ue,_e?_parseRelative(ue,_e+ce):ce);continue}else if(me==="smoothOrigin"){_addNonTweeningPT(this,be,"smooth",be.smooth,ce);continue}else if(me==="force3D"){be[me]=ce;continue}else if(me==="transform"){_addRawTransformPTs(this,ce,ee);continue}}else me in oe||(me=_checkPropPrefix(me)||me);if(ve||(de||de===0)&&(ue||ue===0)&&!_complexExp.test(ce)&&me in oe)xe=(he+"").substr((ue+"").length),de||(de=0),ge=getUnit(ce)||(me in _config.units?_config.units[me]:xe),xe!==ge&&(ue=_convertToUnit(ee,me,he,ge)),this._pt=new PropTween(this._pt,ve?be:oe,me,ue,(_e?_parseRelative(ue,_e+de):de)-ue,!ve&&(ge==="px"||me==="zIndex")&&te.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=ge||0,xe!==ge&&ge!=="%"&&(this._pt.b=he,this._pt.r=_renderCSSPropWithBeginning);else if(me in oe)_tweenComplexCSSString.call(this,ee,me,he,_e?_e+ce:ce);else if(me in ee)this.add(ee,me,he||ee[me],_e?_e+ce:ce,ne,se);else if(me!=="parseTransform"){_missingPlugin(me,ce);continue}ve||(me in oe?Te.push(me,0,oe[me]):Te.push(me,1,he||ee[me])),ae.push(me)}}Se&&_sortPropTweensByPriority(this)},render:function(ee,te){if(te.tween._time||!_reverting())for(var re=te._pt;re;)re.r(ee,re.d),re=re._next;else te.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function(ee,te,re){var ne=_propertyAliases[te];return ne&&ne.indexOf(",")<0&&(te=ne),te in _transformProps&&te!==_transformOriginProp&&(ee._gsap.x||_get(ee,"x"))?re&&_recentSetterPlugin===re?te==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=re||{})&&(te==="scale"?_setterScaleWithRender:_setterTransformWithRender):ee.style&&!_isUndefined(ee.style[te])?_setterCSSStyle:~te.indexOf("-")?_setterCSSProp:_getSetter(ee,te)},core:{_removeProperty,_getMatrix}};gsap$4.utils.checkPrefix=_checkPropPrefix,gsap$4.core.getStyleSaver=_getStyleSaver,function(ie,ee,te,re){var ne=_forEachName(ie+","+ee+","+te,function(se){_transformProps[se]=1});_forEachName(ee,function(se){_config.units[se]="deg",_rotationalProperties[se]=1}),_propertyAliases[ne[13]]=ie+","+ee,_forEachName(re,function(se){var ae=se.split(":");_propertyAliases[ae[1]]=ne[ae[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(ie){_config.units[ie]="px"}),gsap$4.registerPlugin(CSSPlugin);var gsapWithCSS=gsap$4.registerPlugin(CSSPlugin)||gsap$4;gsapWithCSS.core.Tween;function t$2(ie,ee){for(var te=0;te<ee.length;te++){var re=ee[te];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ie,re.key,re)}}function n$3(ie,ee,te){return ee&&t$2(ie.prototype,ee),te&&t$2(ie,te),ie}function r$2(){return(r$2=Object.assign||function(ie){for(var ee=1;ee<arguments.length;ee++){var te=arguments[ee];for(var re in te)Object.prototype.hasOwnProperty.call(te,re)&&(ie[re]=te[re])}return ie}).apply(this,arguments)}function i$3(ie,ee){ie.prototype=Object.create(ee.prototype),ie.prototype.constructor=ie,ie.__proto__=ee}function e$2(ie){return(e$2=Object.setPrototypeOf?Object.getPrototypeOf:function(ee){return ee.__proto__||Object.getPrototypeOf(ee)})(ie)}function o$2(ie,ee){return(o$2=Object.setPrototypeOf||function(te,re){return te.__proto__=re,te})(ie,ee)}function u$1(ie,ee,te){return(u$1=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(re,ne,se){var ae=[null];ae.push.apply(ae,ne);var oe=new(Function.bind.apply(re,ae));return se&&o$2(oe,se.prototype),oe}).apply(null,arguments)}function s$2(ie){var ee=typeof Map=="function"?new Map:void 0;return(s$2=function(te){if(te===null||Function.toString.call(te).indexOf("[native code]")===-1)return te;if(typeof te!="function")throw new TypeError("Super expression must either be null or a function");if(ee!==void 0){if(ee.has(te))return ee.get(te);ee.set(te,re)}function re(){return u$1(te,arguments,e$2(this).constructor)}return re.prototype=Object.create(te.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),o$2(re,te)})(ie)}function f$1(ie,ee){try{var te=ie()}catch(re){return ee(re)}return te&&te.then?te.then(void 0,ee):te}typeof Symbol!="undefined"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol!="undefined"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var c$2,a$2="2.9.7",h$1=function(){};(function(ie){ie[ie.off=0]="off",ie[ie.error=1]="error",ie[ie.warning=2]="warning",ie[ie.info=3]="info",ie[ie.debug=4]="debug"})(c$2||(c$2={}));var v$1=c$2.off,l$2=function(){function ie(te){this.t=te}ie.getLevel=function(){return v$1},ie.setLevel=function(te){return v$1=c$2[te]};var ee=ie.prototype;return ee.error=function(){for(var te=arguments.length,re=new Array(te),ne=0;ne<te;ne++)re[ne]=arguments[ne];this.i(console.error,c$2.error,re)},ee.warn=function(){for(var te=arguments.length,re=new Array(te),ne=0;ne<te;ne++)re[ne]=arguments[ne];this.i(console.warn,c$2.warning,re)},ee.info=function(){for(var te=arguments.length,re=new Array(te),ne=0;ne<te;ne++)re[ne]=arguments[ne];this.i(console.info,c$2.info,re)},ee.debug=function(){for(var te=arguments.length,re=new Array(te),ne=0;ne<te;ne++)re[ne]=arguments[ne];this.i(console.log,c$2.debug,re)},ee.i=function(te,re,ne){re<=ie.getLevel()&&te.apply(console,["["+this.t+"] "].concat(ne))},ie}(),d$1=O,m$1=E$1,w$1=g$1,p$1=x$1,b$1=T,y$1="/",P=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function g$1(ie,ee){for(var te,re=[],ne=0,se=0,ae="",oe=ee&&ee.delimiter||y$1,le=ee&&ee.whitelist||void 0,he=!1;(te=P.exec(ie))!==null;){var ce=te[0],de=te[1],ue=te.index;if(ae+=ie.slice(se,ue),se=ue+ce.length,de)ae+=de[1],he=!0;else{var fe="",pe=te[2],me=te[3],xe=te[4],ge=te[5];if(!he&&ae.length){var _e=ae.length-1,ve=ae[_e];(!le||le.indexOf(ve)>-1)&&(fe=ve,ae=ae.slice(0,_e))}ae&&(re.push(ae),ae="",he=!1);var ye=me||xe,be=fe||oe;re.push({name:pe||ne++,prefix:fe,delimiter:be,optional:ge==="?"||ge==="*",repeat:ge==="+"||ge==="*",pattern:ye?A(ye):"[^"+k$1(be===oe?be:be+oe)+"]+?"})}}return(ae||se<ie.length)&&re.push(ae+ie.substr(se)),re}function E$1(ie,ee){return function(te,re){var ne=ie.exec(te);if(!ne)return!1;for(var se=ne[0],ae=ne.index,oe={},le=re&&re.decode||decodeURIComponent,he=1;he<ne.length;he++)if(ne[he]!==void 0){var ce=ee[he-1];oe[ce.name]=ce.repeat?ne[he].split(ce.delimiter).map(function(de){return le(de,ce)}):le(ne[he],ce)}return{path:se,index:ae,params:oe}}}function x$1(ie,ee){for(var te=new Array(ie.length),re=0;re<ie.length;re++)typeof ie[re]=="object"&&(te[re]=new RegExp("^(?:"+ie[re].pattern+")$",R(ee)));return function(ne,se){for(var ae="",oe=se&&se.encode||encodeURIComponent,le=!se||se.validate!==!1,he=0;he<ie.length;he++){var ce=ie[he];if(typeof ce!="string"){var de,ue=ne?ne[ce.name]:void 0;if(Array.isArray(ue)){if(!ce.repeat)throw new TypeError('Expected "'+ce.name+'" to not repeat, but got array');if(ue.length===0){if(ce.optional)continue;throw new TypeError('Expected "'+ce.name+'" to not be empty')}for(var fe=0;fe<ue.length;fe++){if(de=oe(ue[fe],ce),le&&!te[he].test(de))throw new TypeError('Expected all "'+ce.name+'" to match "'+ce.pattern+'"');ae+=(fe===0?ce.prefix:ce.delimiter)+de}}else if(typeof ue!="string"&&typeof ue!="number"&&typeof ue!="boolean"){if(!ce.optional)throw new TypeError('Expected "'+ce.name+'" to be '+(ce.repeat?"an array":"a string"))}else{if(de=oe(String(ue),ce),le&&!te[he].test(de))throw new TypeError('Expected "'+ce.name+'" to match "'+ce.pattern+'", but got "'+de+'"');ae+=ce.prefix+de}}else ae+=ce}return ae}}function k$1(ie){return ie.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function A(ie){return ie.replace(/([=!:$/()])/g,"\\$1")}function R(ie){return ie&&ie.sensitive?"":"i"}function T(ie,ee,te){for(var re=(te=te||{}).strict,ne=te.start!==!1,se=te.end!==!1,ae=te.delimiter||y$1,oe=[].concat(te.endsWith||[]).map(k$1).concat("$").join("|"),le=ne?"^":"",he=0;he<ie.length;he++){var ce=ie[he];if(typeof ce=="string")le+=k$1(ce);else{var de=ce.repeat?"(?:"+ce.pattern+")(?:"+k$1(ce.delimiter)+"(?:"+ce.pattern+"))*":ce.pattern;ee&&ee.push(ce),le+=ce.optional?ce.prefix?"(?:"+k$1(ce.prefix)+"("+de+"))?":"("+de+")?":k$1(ce.prefix)+"("+de+")"}}if(se)re||(le+="(?:"+k$1(ae)+")?"),le+=oe==="$"?"$":"(?="+oe+")";else{var ue=ie[ie.length-1],fe=typeof ue=="string"?ue[ue.length-1]===ae:ue===void 0;re||(le+="(?:"+k$1(ae)+"(?="+oe+"))?"),fe||(le+="(?="+k$1(ae)+"|"+oe+")")}return new RegExp(le,R(te))}function O(ie,ee,te){return ie instanceof RegExp?function(re,ne){if(!ne)return re;var se=re.source.match(/\((?!\?)/g);if(se)for(var ae=0;ae<se.length;ae++)ne.push({name:ae,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return re}(ie,ee):Array.isArray(ie)?function(re,ne,se){for(var ae=[],oe=0;oe<re.length;oe++)ae.push(O(re[oe],ne,se).source);return new RegExp("(?:"+ae.join("|")+")",R(se))}(ie,ee,te):function(re,ne,se){return T(g$1(re,se),ne,se)}(ie,ee,te)}d$1.match=function(ie,ee){var te=[];return E$1(O(ie,te,ee),te)},d$1.regexpToFunction=m$1,d$1.parse=w$1,d$1.compile=function(ie,ee){return x$1(g$1(ie,ee),ee)},d$1.tokensToFunction=p$1,d$1.tokensToRegExp=b$1;var S$1={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},j$1=new(function(){function ie(){this.o=S$1,this.u=new DOMParser}var ee=ie.prototype;return ee.toString=function(te){return te.outerHTML},ee.toDocument=function(te){return this.u.parseFromString(te,"text/html")},ee.toElement=function(te){var re=document.createElement("div");return re.innerHTML=te,re},ee.getHtml=function(te){return te===void 0&&(te=document),this.toString(te.documentElement)},ee.getWrapper=function(te){return te===void 0&&(te=document),te.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},ee.getContainer=function(te){return te===void 0&&(te=document),te.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},ee.removeContainer=function(te){document.body.contains(te)&&te.parentNode.removeChild(te)},ee.addContainer=function(te,re){var ne=this.getContainer();ne?this.s(te,ne):re.appendChild(te)},ee.getNamespace=function(te){te===void 0&&(te=document);var re=te.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return re?re.getAttribute(this.o.prefix+"-"+this.o.namespace):null},ee.getHref=function(te){if(te.tagName&&te.tagName.toLowerCase()==="a"){if(typeof te.href=="string")return te.href;var re=te.getAttribute("href")||te.getAttribute("xlink:href");if(re)return this.resolveUrl(re.baseVal||re)}return null},ee.resolveUrl=function(){for(var te=arguments.length,re=new Array(te),ne=0;ne<te;ne++)re[ne]=arguments[ne];var se=re.length;if(se===0)throw new Error("resolveUrl requires at least one argument; got none.");var ae=document.createElement("base");if(ae.href=arguments[0],se===1)return ae.href;var oe=document.getElementsByTagName("head")[0];oe.insertBefore(ae,oe.firstChild);for(var le,he=document.createElement("a"),ce=1;ce<se;ce++)he.href=arguments[ce],ae.href=le=he.href;return oe.removeChild(ae),le},ee.s=function(te,re){re.parentNode.insertBefore(te,re.nextSibling)},ie}()),M$1=new(function(){function ie(){this.h=[],this.v=-1}var ee=ie.prototype;return ee.init=function(te,re){this.l="barba";var ne={ns:re,scroll:{x:window.scrollX,y:window.scrollY},url:te};this.h.push(ne),this.v=0;var se={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(se,"",te)},ee.change=function(te,re,ne){if(ne&&ne.state){var se=ne.state,ae=se.index;re=this.m(this.v-ae),this.replace(se.states),this.v=ae}else this.add(te,re);return re},ee.add=function(te,re){var ne=this.size,se=this.p(re),ae={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:te};this.h.push(ae),this.v=ne;var oe={from:this.l,index:ne,states:[].concat(this.h)};switch(se){case"push":window.history&&window.history.pushState(oe,"",te);break;case"replace":window.history&&window.history.replaceState(oe,"",te)}},ee.update=function(te,re){var ne=re||this.v,se=r$2({},this.get(ne),{},te);this.set(ne,se)},ee.remove=function(te){te?this.h.splice(te,1):this.h.pop(),this.v--},ee.clear=function(){this.h=[],this.v=-1},ee.replace=function(te){this.h=te},ee.get=function(te){return this.h[te]},ee.set=function(te,re){return this.h[te]=re},ee.p=function(te){var re="push",ne=te,se=S$1.prefix+"-"+S$1.history;return ne.hasAttribute&&ne.hasAttribute(se)&&(re=ne.getAttribute(se)),re},ee.m=function(te){return Math.abs(te)>1?te>0?"forward":"back":te===0?"popstate":te>0?"back":"forward"},n$3(ie,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),ie}()),L=function(ie,ee){try{var te=function(){if(!ee.next.html)return Promise.resolve(ie).then(function(re){var ne=ee.next;if(re){var se=j$1.toElement(re);ne.namespace=j$1.getNamespace(se),ne.container=j$1.getContainer(se),ne.html=re,M$1.update({ns:ne.namespace});var ae=j$1.toDocument(re);document.title=ae.title}})}();return Promise.resolve(te&&te.then?te.then(function(){}):void 0)}catch(re){return Promise.reject(re)}},$$2=d$1,_={__proto__:null,update:L,nextTick:function(){return new Promise(function(ie){window.requestAnimationFrame(ie)})},pathToRegexp:$$2},q=function(){return window.location.origin},B=function(ie){return ie===void 0&&(ie=window.location.href),U(ie).port},U=function(ie){var ee,te=ie.match(/:\d+/);if(te===null)/^http/.test(ie)&&(ee=80),/^https/.test(ie)&&(ee=443);else{var re=te[0].substring(1);ee=parseInt(re,10)}var ne,se=ie.replace(q(),""),ae={},oe=se.indexOf("#");oe>=0&&(ne=se.slice(oe+1),se=se.slice(0,oe));var le=se.indexOf("?");return le>=0&&(ae=D(se.slice(le+1)),se=se.slice(0,le)),{hash:ne,path:se,port:ee,query:ae}},D=function(ie){return ie.split("&").reduce(function(ee,te){var re=te.split("=");return ee[re[0]]=re[1],ee},{})},F=function(ie){return ie===void 0&&(ie=window.location.href),ie.replace(/(\/#.*|\/|#.*)$/,"")},H$1={__proto__:null,getHref:function(){return window.location.href},getOrigin:q,getPort:B,getPath:function(ie){return ie===void 0&&(ie=window.location.href),U(ie).path},parse:U,parseQuery:D,clean:F};function I(ie,ee,te){return ee===void 0&&(ee=2e3),new Promise(function(re,ne){var se=new XMLHttpRequest;se.onreadystatechange=function(){if(se.readyState===XMLHttpRequest.DONE){if(se.status===200)re(se.responseText);else if(se.status){var ae={status:se.status,statusText:se.statusText};te(ie,ae),ne(ae)}}},se.ontimeout=function(){var ae=new Error("Timeout error ["+ee+"]");te(ie,ae),ne(ae)},se.onerror=function(){var ae=new Error("Fetch error");te(ie,ae),ne(ae)},se.open("GET",ie),se.timeout=ee,se.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),se.setRequestHeader("x-barba","yes"),se.send()})}var C=function(ie){return!!ie&&(typeof ie=="object"||typeof ie=="function")&&typeof ie.then=="function"};function N$1(ie,ee){return ee===void 0&&(ee={}),function(){for(var te=arguments.length,re=new Array(te),ne=0;ne<te;ne++)re[ne]=arguments[ne];var se=!1,ae=new Promise(function(oe,le){ee.async=function(){return se=!0,function(ce,de){ce?le(ce):oe(de)}};var he=ie.apply(ee,re);se||(C(he)?he.then(oe,le):oe(he))});return ae}}var X=new(function(ie){function ee(){var re;return(re=ie.call(this)||this).logger=new l$2("@barba/core"),re.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],re.registered=new Map,re.init(),re}i$3(ee,ie);var te=ee.prototype;return te.init=function(){var re=this;this.registered.clear(),this.all.forEach(function(ne){re[ne]||(re[ne]=function(se,ae){re.registered.has(ne)||re.registered.set(ne,new Set),re.registered.get(ne).add({ctx:ae||{},fn:se})})})},te.do=function(re){for(var ne=this,se=arguments.length,ae=new Array(se>1?se-1:0),oe=1;oe<se;oe++)ae[oe-1]=arguments[oe];if(this.registered.has(re)){var le=Promise.resolve();return this.registered.get(re).forEach(function(he){le=le.then(function(){return N$1(he.fn,he.ctx).apply(void 0,ae)})}),le.catch(function(he){ne.logger.debug("Hook error ["+re+"]"),ne.logger.error(he)})}return Promise.resolve()},te.clear=function(){var re=this;this.all.forEach(function(ne){delete re[ne]}),this.init()},te.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var re=[];this.registered.forEach(function(ne,se){return re.push(se)}),this.logger.info("Registered hooks: "+re.join(","))},ee}(h$1)),z=function(){function ie(ee){if(this.P=[],typeof ee=="boolean")this.g=ee;else{var te=Array.isArray(ee)?ee:[ee];this.P=te.map(function(re){return $$2(re)})}}return ie.prototype.checkHref=function(ee){if(typeof this.g=="boolean")return this.g;var te=U(ee).path;return this.P.some(function(re){return re.exec(te)!==null})},ie}(),G=function(ie){function ee(re){var ne;return(ne=ie.call(this,re)||this).k=new Map,ne}i$3(ee,ie);var te=ee.prototype;return te.set=function(re,ne,se){return this.k.set(re,{action:se,request:ne}),{action:se,request:ne}},te.get=function(re){return this.k.get(re)},te.getRequest=function(re){return this.k.get(re).request},te.getAction=function(re){return this.k.get(re).action},te.has=function(re){return!this.checkHref(re)&&this.k.has(re)},te.delete=function(re){return this.k.delete(re)},te.update=function(re,ne){var se=r$2({},this.k.get(re),{},ne);return this.k.set(re,se),se},ee}(z),Q=function(){return!window.history.pushState},W=function(ie){return!ie.el||!ie.href},J=function(ie){var ee=ie.event;return ee.which>1||ee.metaKey||ee.ctrlKey||ee.shiftKey||ee.altKey},K=function(ie){var ee=ie.el;return ee.hasAttribute("target")&&ee.target==="_blank"},V=function(ie){var ee=ie.el;return ee.protocol!==void 0&&window.location.protocol!==ee.protocol||ee.hostname!==void 0&&window.location.hostname!==ee.hostname},Y=function(ie){var ee=ie.el;return ee.port!==void 0&&B()!==B(ee.href)},Z=function(ie){var ee=ie.el;return ee.getAttribute&&typeof ee.getAttribute("download")=="string"},tt=function(ie){return ie.el.hasAttribute(S$1.prefix+"-"+S$1.prevent)},nt=function(ie){return Boolean(ie.el.closest("["+S$1.prefix+"-"+S$1.prevent+'="all"]'))},rt=function(ie){var ee=ie.href;return F(ee)===F()&&B(ee)===B()},it=function(ie){function ee(re){var ne;return(ne=ie.call(this,re)||this).suite=[],ne.tests=new Map,ne.init(),ne}i$3(ee,ie);var te=ee.prototype;return te.init=function(){this.add("pushState",Q),this.add("exists",W),this.add("newTab",J),this.add("blank",K),this.add("corsDomain",V),this.add("corsPort",Y),this.add("download",Z),this.add("preventSelf",tt),this.add("preventAll",nt),this.add("sameUrl",rt,!1)},te.add=function(re,ne,se){se===void 0&&(se=!0),this.tests.set(re,ne),se&&this.suite.push(re)},te.run=function(re,ne,se,ae){return this.tests.get(re)({el:ne,event:se,href:ae})},te.checkLink=function(re,ne,se){var ae=this;return this.suite.some(function(oe){return ae.run(oe,re,ne,se)})},ee}(z),et=function(ie){function ee(te,re){var ne;re===void 0&&(re="Barba error");for(var se=arguments.length,ae=new Array(se>2?se-2:0),oe=2;oe<se;oe++)ae[oe-2]=arguments[oe];return(ne=ie.call.apply(ie,[this].concat(ae))||this).error=te,ne.label=re,Error.captureStackTrace&&Error.captureStackTrace(function(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}(ne),ee),ne.name="BarbaError",ne}return i$3(ee,ie),ee}(s$2(Error)),ot=function(){function ie(te){te===void 0&&(te=[]),this.logger=new l$2("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],te&&(this.all=this.all.concat(te)),this.update()}var ee=ie.prototype;return ee.add=function(te,re){switch(te){case"rule":this.A.splice(re.position||0,0,re.value);break;case"transition":default:this.all.push(re)}this.update()},ee.resolve=function(te,re){var ne=this;re===void 0&&(re={});var se=re.once?this.once:this.page;se=se.filter(re.self?function(ue){return ue.name&&ue.name==="self"}:function(ue){return!ue.name||ue.name!=="self"});var ae=new Map,oe=se.find(function(ue){var fe=!0,pe={};return!(!re.self||ue.name!=="self")||(ne.A.reverse().forEach(function(me){fe&&(fe=ne.R(ue,me,te,pe),ue.from&&ue.to&&(fe=ne.R(ue,me,te,pe,"from")&&ne.R(ue,me,te,pe,"to")),ue.from&&!ue.to&&(fe=ne.R(ue,me,te,pe,"from")),!ue.from&&ue.to&&(fe=ne.R(ue,me,te,pe,"to")))}),ae.set(ue,pe),fe)}),le=ae.get(oe),he=[];if(he.push(re.once?"once":"page"),re.self&&he.push("self"),le){var ce,de=[oe];Object.keys(le).length>0&&de.push(le),(ce=this.logger).info.apply(ce,["Transition found ["+he.join(",")+"]"].concat(de))}else this.logger.info("No transition found ["+he.join(",")+"]");return oe},ee.update=function(){var te=this;this.all=this.all.map(function(re){return te.T(re)}).sort(function(re,ne){return re.priority-ne.priority}).reverse().map(function(re){return delete re.priority,re}),this.page=this.all.filter(function(re){return re.leave!==void 0||re.enter!==void 0}),this.once=this.all.filter(function(re){return re.once!==void 0})},ee.R=function(te,re,ne,se,ae){var oe=!0,le=!1,he=te,ce=re.name,de=ce,ue=ce,fe=ce,pe=ae?he[ae]:he,me=ae==="to"?ne.next:ne.current;if(ae?pe&&pe[ce]:pe[ce]){switch(re.type){case"strings":default:var xe=Array.isArray(pe[de])?pe[de]:[pe[de]];me[de]&&xe.indexOf(me[de])!==-1&&(le=!0),xe.indexOf(me[de])===-1&&(oe=!1);break;case"object":var ge=Array.isArray(pe[ue])?pe[ue]:[pe[ue]];me[ue]?(me[ue].name&&ge.indexOf(me[ue].name)!==-1&&(le=!0),ge.indexOf(me[ue].name)===-1&&(oe=!1)):oe=!1;break;case"function":pe[fe](ne)?le=!0:oe=!1}le&&(ae?(se[ae]=se[ae]||{},se[ae][ce]=he[ae][ce]):se[ce]=he[ce])}return oe},ee.O=function(te,re,ne){var se=0;return(te[re]||te.from&&te.from[re]||te.to&&te.to[re])&&(se+=Math.pow(10,ne),te.from&&te.from[re]&&(se+=1),te.to&&te.to[re]&&(se+=2)),se},ee.T=function(te){var re=this;te.priority=0;var ne=0;return this.A.forEach(function(se,ae){ne+=re.O(te,se.name,ae+1)}),te.priority=ne,te},ie}(),ut=function(){function ie(te){te===void 0&&(te=[]),this.logger=new l$2("@barba/core"),this.S=!1,this.store=new ot(te)}var ee=ie.prototype;return ee.get=function(te,re){return this.store.resolve(te,re)},ee.doOnce=function(te){var re=te.data,ne=te.transition;try{var se=function(){ae.S=!1},ae=this,oe=ne||{};ae.S=!0;var le=f$1(function(){return Promise.resolve(ae.j("beforeOnce",re,oe)).then(function(){return Promise.resolve(ae.once(re,oe)).then(function(){return Promise.resolve(ae.j("afterOnce",re,oe)).then(function(){})})})},function(he){ae.S=!1,ae.logger.debug("Transition error [before/after/once]"),ae.logger.error(he)});return Promise.resolve(le&&le.then?le.then(se):se())}catch(he){return Promise.reject(he)}},ee.doPage=function(te){var re=te.data,ne=te.transition,se=te.page,ae=te.wrapper;try{var oe=function(fe){if(le)return fe;he.S=!1},le=!1,he=this,ce=ne||{},de=ce.sync===!0||!1;he.S=!0;var ue=f$1(function(){function fe(){return Promise.resolve(he.j("before",re,ce)).then(function(){var me=!1;function xe(_e){return me?_e:Promise.resolve(he.remove(re)).then(function(){return Promise.resolve(he.j("after",re,ce)).then(function(){})})}var ge=function(){if(de)return f$1(function(){return Promise.resolve(he.add(re,ae)).then(function(){return Promise.resolve(he.j("beforeLeave",re,ce)).then(function(){return Promise.resolve(he.j("beforeEnter",re,ce)).then(function(){return Promise.resolve(Promise.all([he.leave(re,ce),he.enter(re,ce)])).then(function(){return Promise.resolve(he.j("afterLeave",re,ce)).then(function(){return Promise.resolve(he.j("afterEnter",re,ce)).then(function(){})})})})})})},function(be){if(he.M(be))throw new et(be,"Transition error [sync]")});var _e=function(be){return me?be:f$1(function(){var we=function(){if(ve!==!1)return Promise.resolve(he.add(re,ae)).then(function(){return Promise.resolve(he.j("beforeEnter",re,ce)).then(function(){return Promise.resolve(he.enter(re,ce,ve)).then(function(){return Promise.resolve(he.j("afterEnter",re,ce)).then(function(){})})})})}();if(we&&we.then)return we.then(function(){})},function(we){if(he.M(we))throw new et(we,"Transition error [before/after/enter]")})},ve=!1,ye=f$1(function(){return Promise.resolve(he.j("beforeLeave",re,ce)).then(function(){return Promise.resolve(Promise.all([he.leave(re,ce),L(se,re)]).then(function(be){return be[0]})).then(function(be){return ve=be,Promise.resolve(he.j("afterLeave",re,ce)).then(function(){})})})},function(be){if(he.M(be))throw new et(be,"Transition error [before/after/leave]")});return ye&&ye.then?ye.then(_e):_e(ye)}();return ge&&ge.then?ge.then(xe):xe(ge)})}var pe=function(){if(de)return Promise.resolve(L(se,re)).then(function(){})}();return pe&&pe.then?pe.then(fe):fe()},function(fe){throw he.S=!1,fe.name&&fe.name==="BarbaError"?(he.logger.debug(fe.label),he.logger.error(fe.error),fe):(he.logger.debug("Transition error [page]"),he.logger.error(fe),fe)});return Promise.resolve(ue&&ue.then?ue.then(oe):oe(ue))}catch(fe){return Promise.reject(fe)}},ee.once=function(te,re){try{return Promise.resolve(X.do("once",te,re)).then(function(){return re.once?N$1(re.once,re)(te):Promise.resolve()})}catch(ne){return Promise.reject(ne)}},ee.leave=function(te,re){try{return Promise.resolve(X.do("leave",te,re)).then(function(){return re.leave?N$1(re.leave,re)(te):Promise.resolve()})}catch(ne){return Promise.reject(ne)}},ee.enter=function(te,re,ne){try{return Promise.resolve(X.do("enter",te,re)).then(function(){return re.enter?N$1(re.enter,re)(te,ne):Promise.resolve()})}catch(se){return Promise.reject(se)}},ee.add=function(te,re){try{return j$1.addContainer(te.next.container,re),X.do("nextAdded",te),Promise.resolve()}catch(ne){return Promise.reject(ne)}},ee.remove=function(te){try{return j$1.removeContainer(te.current.container),X.do("currentRemoved",te),Promise.resolve()}catch(re){return Promise.reject(re)}},ee.M=function(te){return te.message?!/Timeout error|Fetch error/.test(te.message):!te.status},ee.j=function(te,re,ne){try{return Promise.resolve(X.do(te,re,ne)).then(function(){return ne[te]?N$1(ne[te],ne)(re):Promise.resolve()})}catch(se){return Promise.reject(se)}},n$3(ie,[{key:"isRunning",get:function(){return this.S},set:function(te){this.S=te}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(te){return te.name==="self"})}},{key:"shouldWait",get:function(){return this.store.all.some(function(te){return te.to&&!te.to.route||te.sync})}}]),ie}(),st=function(){function ie(ee){var te=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,ee.length!==0&&(ee.forEach(function(re){te.byNamespace.set(re.namespace,re)}),this.names.forEach(function(re){X[re](te.L(re))}))}return ie.prototype.L=function(ee){var te=this;return function(re){var ne=ee.match(/enter/i)?re.next:re.current,se=te.byNamespace.get(ne.namespace);return se&&se[ee]?N$1(se[ee],se)(re):Promise.resolve()}},ie}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(ie){var ee=this;do{if(ee.matches(ie))return ee;ee=ee.parentElement||ee.parentNode}while(ee!==null&&ee.nodeType===1);return null});var ft={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}},ct=new(function(){function ie(){this.version=a$2,this.schemaPage=ft,this.Logger=l$2,this.logger=new l$2("@barba/core"),this.plugins=[],this.hooks=X,this.dom=j$1,this.helpers=_,this.history=M$1,this.request=I,this.url=H$1}var ee=ie.prototype;return ee.use=function(te,re){var ne=this.plugins;ne.indexOf(te)>-1?this.logger.warn("Plugin ["+te.name+"] already installed."):typeof te.install=="function"?(te.install(this,re),ne.push(te)):this.logger.warn("Plugin ["+te.name+'] has no "install" method.')},ee.init=function(te){var re=te===void 0?{}:te,ne=re.transitions,se=ne===void 0?[]:ne,ae=re.views,oe=ae===void 0?[]:ae,le=re.schema,he=le===void 0?S$1:le,ce=re.requestError,de=re.timeout,ue=de===void 0?2e3:de,fe=re.cacheIgnore,pe=fe!==void 0&&fe,me=re.prefetchIgnore,xe=me!==void 0&&me,ge=re.preventRunning,_e=ge!==void 0&&ge,ve=re.prevent,ye=ve===void 0?null:ve,be=re.debug,we=re.logLevel;if(l$2.setLevel((be!==void 0&&be)===!0?"debug":we===void 0?"off":we),this.logger.info(this.version),Object.keys(he).forEach(function(Pe){S$1[Pe]&&(S$1[Pe]=he[Pe])}),this.$=ce,this.timeout=ue,this.cacheIgnore=pe,this.prefetchIgnore=xe,this.preventRunning=_e,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var Se=this.data.current;if(!Se.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new G(pe),this.prevent=new it(xe),this.transitions=new ut(se),this.views=new st(oe),ye!==null){if(typeof ye!="function")throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",ye)}this.history.init(Se.url.href,Se.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(Pe){return Pe.init()});var Te=this.data;Te.trigger="barba",Te.next=Te.current,Te.current=r$2({},this.schemaPage),this.hooks.do("ready",Te),this.once(Te),this.q()},ee.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},ee.force=function(te){window.location.assign(te)},ee.go=function(te,re,ne){var se;if(re===void 0&&(re="barba"),this.transitions.isRunning)this.force(te);else if(!(se=re==="popstate"?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(te):this.prevent.run("sameUrl",null,null,te))||this.transitions.hasSelf)return re=this.history.change(te,re,ne),ne&&(ne.stopPropagation(),ne.preventDefault()),this.page(te,re,se)},ee.once=function(te){try{var re=this;return Promise.resolve(re.hooks.do("beforeEnter",te)).then(function(){function ne(){return Promise.resolve(re.hooks.do("afterEnter",te)).then(function(){})}var se=function(){if(re.transitions.hasOnce){var ae=re.transitions.get(te,{once:!0});return Promise.resolve(re.transitions.doOnce({transition:ae,data:te})).then(function(){})}}();return se&&se.then?se.then(ne):ne()})}catch(ne){return Promise.reject(ne)}},ee.page=function(te,re,ne){try{var se=function(){var he=ae.data;return Promise.resolve(ae.hooks.do("page",he)).then(function(){var ce=f$1(function(){var de=ae.transitions.get(he,{once:!1,self:ne});return Promise.resolve(ae.transitions.doPage({data:he,page:oe,transition:de,wrapper:ae._})).then(function(){ae.q()})},function(){l$2.getLevel()===0&&ae.force(he.current.url.href)});if(ce&&ce.then)return ce.then(function(){})})},ae=this;ae.data.next.url=r$2({href:te},ae.url.parse(te)),ae.data.trigger=re;var oe=ae.cache.has(te)?ae.cache.update(te,{action:"click"}).request:ae.cache.set(te,ae.request(te,ae.timeout,ae.onRequestError.bind(ae,re)),"click").request,le=function(){if(ae.transitions.shouldWait)return Promise.resolve(L(oe,ae.data)).then(function(){})}();return Promise.resolve(le&&le.then?le.then(se):se())}catch(he){return Promise.reject(he)}},ee.onRequestError=function(te){this.transitions.isRunning=!1;for(var re=arguments.length,ne=new Array(re>1?re-1:0),se=1;se<re;se++)ne[se-1]=arguments[se];var ae=ne[0],oe=ne[1],le=this.cache.getAction(ae);return this.cache.delete(ae),!(this.$&&this.$(te,le,ae,oe)===!1||(le==="click"&&this.force(ae),1))},ee.prefetch=function(te){var re=this;this.cache.has(te)||this.cache.set(te,this.request(te,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(ne){re.logger.error(ne)}),"prefetch")},ee.F=function(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},ee.H=function(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},ee.B=function(te){var re=this,ne=this.I(te);if(ne){var se=this.dom.getHref(ne);this.prevent.checkHref(se)||this.cache.has(se)||this.cache.set(se,this.request(se,this.timeout,this.onRequestError.bind(this,ne)).catch(function(ae){re.logger.error(ae)}),"enter")}},ee.U=function(te){var re=this.I(te);if(re)return this.transitions.isRunning&&this.preventRunning?(te.preventDefault(),void te.stopPropagation()):void this.go(this.dom.getHref(re),re,te)},ee.D=function(te){this.go(this.url.getHref(),"popstate",te)},ee.I=function(te){for(var re=te.target;re&&!this.dom.getHref(re);)re=re.parentNode;if(re&&!this.prevent.checkLink(re,te,this.dom.getHref(re)))return re},ee.q=function(){var te=this.url.getHref(),re={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:r$2({href:te},this.url.parse(te))};this.C={current:re,next:r$2({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},n$3(ie,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),ie}()),t$1="2.1.10",i$2=window.requestIdleCallback||function(ie){var ee=Date.now();return setTimeout(function(){ie({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-ee))}})},1)},n$2=new(function(){function ie(){this.name="@barba/prefetch",this.version=t$1,this.toPrefetch=new Set}var ee=ie.prototype;return ee.install=function(te,re){var ne=re===void 0?{}:re,se=ne.root,ae=se===void 0?document.body:se,oe=ne.timeout,le=oe===void 0?2e3:oe;this.logger=new te.Logger(this.name),this.logger.info(this.version),this.barba=te,this.root=ae,this.timeout=le},ee.init=function(){var te=this;this.barba.prefetchIgnore?this.logger.warn("barba.prefetchIgnore is enabled"):this.barba.cacheIgnore?this.logger.warn("barba.cacheIgnore is enabled"):(this.observer=new IntersectionObserver(function(re){re.forEach(function(ne){if(ne.isIntersecting){var se=ne.target,ae=te.barba.dom.getHref(se);te.toPrefetch.has(ae)&&(te.observer.unobserve(se),te.barba.cache.has(ae)?te.barba.cache.update(ae,{action:"prefetch"}):te.barba.cache.set(ae,te.barba.request(ae,te.barba.timeout,te.barba.onRequestError.bind(te.barba,"barba")).catch(function(oe){te.logger.error(oe)}),"prefetch"))}})}),this.observe(),this.barba.hooks.after(this.observe,this))},ee.observe=function(){var te=this;i$2(function(){te.root.querySelectorAll("a").forEach(function(re){var ne=re,se=te.barba.dom.getHref(ne);te.barba.cache.has(se)||te.barba.prevent.checkHref(se)||te.barba.prevent.checkLink(ne,{},se)||(te.observer.observe(re),te.toPrefetch.add(se))})},{timeout:this.timeout})},ie}());const getSiteId=(ie=document)=>ie.documentElement.getAttribute("data-wf-site"),restartWebflow=async ie=>{var te,re;const{Webflow:ee}=window;if(!(!ee||!("destroy"in ee)||!("ready"in ee)||!("require"in ee))&&!(ie&&!ie.length)){if(ie||(ee.destroy(),ee.ready()),!ie||ie.includes("ix2")){const ne=ee.require("ix2");if(ne){const{store:se,actions:ae}=ne,{eventState:oe}=se.getState().ixSession,le=Object.entries(oe);ie||ne.destroy(),ne.init(),await Promise.all(le.map(he=>se.dispatch(ae.eventStateChanged(...he))))}}if(!ie||ie.includes("commerce")){const ne=ee.require("commerce"),se=getSiteId();ne&&se&&(ne.destroy(),ne.init({siteId:se,apiUrl:"https://render.webflow.com"}))}if(ie!=null&&ie.includes("lightbox")&&((te=ee.require("lightbox"))==null||te.ready()),ie!=null&&ie.includes("slider")){const ne=ee.require("slider");ne&&(ne.redraw(),ne.ready())}return ie!=null&&ie.includes("tabs")&&((re=ee.require("tabs"))==null||re.redraw()),new Promise(ne=>ee.push(()=>ne(void 0)))}};/*! js-cookie v3.0.5 | MIT */function assign(ie){for(var ee=1;ee<arguments.length;ee++){var te=arguments[ee];for(var re in te)ie[re]=te[re]}return ie}var defaultConverter={read:function(ie){return ie[0]==='"'&&(ie=ie.slice(1,-1)),ie.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(ie){return encodeURIComponent(ie).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init$1(ie,ee){function te(ne,se,ae){if(typeof document!="undefined"){ae=assign({},ee,ae),typeof ae.expires=="number"&&(ae.expires=new Date(Date.now()+ae.expires*864e5)),ae.expires&&(ae.expires=ae.expires.toUTCString()),ne=encodeURIComponent(ne).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var oe="";for(var le in ae)!ae[le]||(oe+="; "+le,ae[le]!==!0&&(oe+="="+ae[le].split(";")[0]));return document.cookie=ne+"="+ie.write(se,ne)+oe}}function re(ne){if(!(typeof document=="undefined"||arguments.length&&!ne)){for(var se=document.cookie?document.cookie.split("; "):[],ae={},oe=0;oe<se.length;oe++){var le=se[oe].split("="),he=le.slice(1).join("=");try{var ce=decodeURIComponent(le[0]);if(ae[ce]=ie.read(he,ce),ne===ce)break}catch{}}return ne?ae[ne]:ae}}return Object.create({set:te,get:re,remove:function(ne,se){te(ne,"",assign({},se,{expires:-1}))},withAttributes:function(ne){return init$1(this.converter,assign({},this.attributes,ne))},withConverter:function(ne){return init$1(assign({},this.converter,ne),this.attributes)}},{attributes:{value:Object.freeze(ee)},converter:{value:Object.freeze(ie)}})}var api=init$1(defaultConverter,{path:"/"});function _defineProperties$1(ie,ee){for(var te=0;te<ee.length;te++){var re=ee[te];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ie,re.key,re)}}function _createClass$1(ie,ee,te){return ee&&_defineProperties$1(ie.prototype,ee),te&&_defineProperties$1(ie,te),ie}/*!
 * Observer 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gsap$3,_coreInitted$3,_win$2,_doc$2,_docEl$1,_body$1,_isTouch,_pointerType,ScrollTrigger$1,_root$1,_normalizer$1,_eventTypes,_context$3,_getGSAP$2=function(){return gsap$3||typeof window!="undefined"&&(gsap$3=window.gsap)&&gsap$3.registerPlugin&&gsap$3},_startup$1=1,_observers=[],_scrollers=[],_proxies=[],_getTime$1=Date.now,_bridge=function(ee,te){return te},_integrate=function(){var ee=ScrollTrigger$1.core,te=ee.bridge||{},re=ee._scrollers,ne=ee._proxies;re.push.apply(re,_scrollers),ne.push.apply(ne,_proxies),_scrollers=re,_proxies=ne,_bridge=function(ae,oe){return te[ae](oe)}},_getProxyProp=function(ee,te){return~_proxies.indexOf(ee)&&_proxies[_proxies.indexOf(ee)+1][te]},_isViewport$1=function(ee){return!!~_root$1.indexOf(ee)},_addListener$1=function(ee,te,re,ne,se){return ee.addEventListener(te,re,{passive:!ne,capture:!!se})},_removeListener$1=function(ee,te,re,ne){return ee.removeEventListener(te,re,!!ne)},_scrollLeft="scrollLeft",_scrollTop="scrollTop",_onScroll$1=function(){return _normalizer$1&&_normalizer$1.isPressed||_scrollers.cache++},_scrollCacheFunc=function(ee,te){var re=function ne(se){if(se||se===0){_startup$1&&(_win$2.history.scrollRestoration="manual");var ae=_normalizer$1&&_normalizer$1.isPressed;se=ne.v=Math.round(se)||(_normalizer$1&&_normalizer$1.iOS?1:0),ee(se),ne.cacheID=_scrollers.cache,ae&&_bridge("ss",se)}else(te||_scrollers.cache!==ne.cacheID||_bridge("ref"))&&(ne.cacheID=_scrollers.cache,ne.v=ee());return ne.v+ne.offset};return re.offset=0,ee&&re},_horizontal={s:_scrollLeft,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:_scrollCacheFunc(function(ie){return arguments.length?_win$2.scrollTo(ie,_vertical.sc()):_win$2.pageXOffset||_doc$2[_scrollLeft]||_docEl$1[_scrollLeft]||_body$1[_scrollLeft]||0})},_vertical={s:_scrollTop,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:_horizontal,sc:_scrollCacheFunc(function(ie){return arguments.length?_win$2.scrollTo(_horizontal.sc(),ie):_win$2.pageYOffset||_doc$2[_scrollTop]||_docEl$1[_scrollTop]||_body$1[_scrollTop]||0})},_getTarget=function(ee){return gsap$3.utils.toArray(ee)[0]||(typeof ee=="string"&&gsap$3.config().nullTargetWarn!==!1?console.warn("Element not found:",ee):null)},_getScrollFunc=function(ee,te){var re=te.s,ne=te.sc;_isViewport$1(ee)&&(ee=_doc$2.scrollingElement||_docEl$1);var se=_scrollers.indexOf(ee),ae=ne===_vertical.sc?1:2;!~se&&(se=_scrollers.push(ee)-1),_scrollers[se+ae]||ee.addEventListener("scroll",_onScroll$1);var oe=_scrollers[se+ae],le=oe||(_scrollers[se+ae]=_scrollCacheFunc(_getProxyProp(ee,re),!0)||(_isViewport$1(ee)?ne:_scrollCacheFunc(function(he){return arguments.length?ee[re]=he:ee[re]})));return le.target=ee,oe||(le.smooth=gsap$3.getProperty(ee,"scrollBehavior")==="smooth"),le},_getVelocityProp=function(ee,te,re){var ne=ee,se=ee,ae=_getTime$1(),oe=ae,le=te||50,he=Math.max(500,le*3),ce=function(pe,me){var xe=_getTime$1();me||xe-ae>le?(se=ne,ne=pe,oe=ae,ae=xe):re?ne+=pe:ne=se+(pe-se)/(xe-oe)*(ae-oe)},de=function(){se=ne=re?0:ne,oe=ae=0},ue=function(pe){var me=oe,xe=se,ge=_getTime$1();return(pe||pe===0)&&pe!==ne&&ce(pe),ae===oe||ge-oe>he?0:(ne+(re?xe:-xe))/((re?ge:ae)-me)*1e3};return{update:ce,reset:de,getVelocity:ue}},_getEvent=function(ee,te){return te&&!ee._gsapAllow&&ee.preventDefault(),ee.changedTouches?ee.changedTouches[0]:ee},_getAbsoluteMax=function(ee){var te=Math.max.apply(Math,ee),re=Math.min.apply(Math,ee);return Math.abs(te)>=Math.abs(re)?te:re},_setScrollTrigger=function(){ScrollTrigger$1=gsap$3.core.globals().ScrollTrigger,ScrollTrigger$1&&ScrollTrigger$1.core&&_integrate()},_initCore$2=function(ee){return gsap$3=ee||_getGSAP$2(),gsap$3&&typeof document!="undefined"&&document.body&&(_win$2=window,_doc$2=document,_docEl$1=_doc$2.documentElement,_body$1=_doc$2.body,_root$1=[_win$2,_doc$2,_docEl$1,_body$1],gsap$3.utils.clamp,_context$3=gsap$3.core.context||function(){},_pointerType="onpointerenter"in _body$1?"pointer":"mouse",_isTouch=Observer$1.isTouch=_win$2.matchMedia&&_win$2.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in _win$2||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,_eventTypes=Observer$1.eventTypes=("ontouchstart"in _docEl$1?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in _docEl$1?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return _startup$1=0},500),_setScrollTrigger(),_coreInitted$3=1),_coreInitted$3};_horizontal.op=_vertical,_scrollers.cache=0;var Observer$1=function(){function ie(te){this.init(te)}var ee=ie.prototype;return ee.init=function(re){_coreInitted$3||_initCore$2(gsap$3)||console.warn("Please gsap.registerPlugin(Observer)"),ScrollTrigger$1||_setScrollTrigger();var ne=re.tolerance,se=re.dragMinimum,ae=re.type,oe=re.target,le=re.lineHeight,he=re.debounce,ce=re.preventDefault,de=re.onStop,ue=re.onStopDelay,fe=re.ignore,pe=re.wheelSpeed,me=re.event,xe=re.onDragStart,ge=re.onDragEnd,_e=re.onDrag,ve=re.onPress,ye=re.onRelease,be=re.onRight,we=re.onLeft,Se=re.onUp,Te=re.onDown,Pe=re.onChangeX,Be=re.onChangeY,Ce=re.onChange,De=re.onToggleX,Re=re.onToggleY,Le=re.onHover,ke=re.onHoverEnd,Me=re.onMove,Ee=re.ignoreCheck,Ae=re.isNormalizer,Ie=re.onGestureStart,Fe=re.onGestureEnd,Ne=re.onWheel,$e=re.onEnable,ze=re.onDisable,Xe=re.onClick,Je=re.scrollSpeed,We=re.capture,dt=re.allowClicks,yt=re.lockAxis,vt=re.onLockAxis;this.target=oe=_getTarget(oe)||_docEl$1,this.vars=re,fe&&(fe=gsap$3.utils.toArray(fe)),ne=ne||1e-9,se=se||0,pe=pe||1,Je=Je||1,ae=ae||"wheel,touch,pointer",he=he!==!1,le||(le=parseFloat(_win$2.getComputedStyle(_body$1).lineHeight)||22);var at,_t,je,He,Qe,St,gt,Oe=this,Ve=0,Ze=0,mt=_getScrollFunc(oe,_horizontal),pt=_getScrollFunc(oe,_vertical),Tt=mt(),Et=pt(),Mt=~ae.indexOf("touch")&&!~ae.indexOf("pointer")&&_eventTypes[0]==="pointerdown",Rt=_isViewport$1(oe),bt=oe.ownerDocument||_doc$2,Ue=[0,0,0],xt=[0,0,0],ht=0,At=function(){return ht=_getTime$1()},Pt=function(Ft,wt){return(Oe.event=Ft)&&fe&&~fe.indexOf(Ft.target)||wt&&Mt&&Ft.pointerType!=="touch"||Ee&&Ee(Ft,wt)},$t=function(){Oe._vx.reset(),Oe._vy.reset(),_t.pause(),de&&de(Oe)},qt=function(){var Ft=Oe.deltaX=_getAbsoluteMax(Ue),wt=Oe.deltaY=_getAbsoluteMax(xt),Ot=Math.abs(Ft)>=ne,Nt=Math.abs(wt)>=ne;Ce&&(Ot||Nt)&&Ce(Oe,Ft,wt,Ue,xt),Ot&&(be&&Oe.deltaX>0&&be(Oe),we&&Oe.deltaX<0&&we(Oe),Pe&&Pe(Oe),De&&Oe.deltaX<0!=Ve<0&&De(Oe),Ve=Oe.deltaX,Ue[0]=Ue[1]=Ue[2]=0),Nt&&(Te&&Oe.deltaY>0&&Te(Oe),Se&&Oe.deltaY<0&&Se(Oe),Be&&Be(Oe),Re&&Oe.deltaY<0!=Ze<0&&Re(Oe),Ze=Oe.deltaY,xt[0]=xt[1]=xt[2]=0),(He||je)&&(Me&&Me(Oe),je&&(_e(Oe),je=!1),He=!1),St&&!(St=!1)&&vt&&vt(Oe),Qe&&(Ne(Oe),Qe=!1),at=0},Zt=function(Ft,wt,Ot){Ue[Ot]+=Ft,xt[Ot]+=wt,Oe._vx.update(Ft),Oe._vy.update(wt),he?at||(at=requestAnimationFrame(qt)):qt()},ti=function(Ft,wt){yt&&!gt&&(Oe.axis=gt=Math.abs(Ft)>Math.abs(wt)?"x":"y",St=!0),gt!=="y"&&(Ue[2]+=Ft,Oe._vx.update(Ft,!0)),gt!=="x"&&(xt[2]+=wt,Oe._vy.update(wt,!0)),he?at||(at=requestAnimationFrame(qt)):qt()},Xt=function(Ft){if(!Pt(Ft,1)){Ft=_getEvent(Ft,ce);var wt=Ft.clientX,Ot=Ft.clientY,Nt=wt-Oe.x,Gt=Ot-Oe.y,Ge=Oe.isDragging;Oe.x=wt,Oe.y=Ot,(Ge||Math.abs(Oe.startX-wt)>=se||Math.abs(Oe.startY-Ot)>=se)&&(_e&&(je=!0),Ge||(Oe.isDragging=!0),ti(Nt,Gt),Ge||xe&&xe(Oe))}},zt=Oe.onPress=function(Ht){Pt(Ht,1)||(Oe.axis=gt=null,_t.pause(),Oe.isPressed=!0,Ht=_getEvent(Ht),Ve=Ze=0,Oe.startX=Oe.x=Ht.clientX,Oe.startY=Oe.y=Ht.clientY,Oe._vx.reset(),Oe._vy.reset(),_addListener$1(Ae?oe:bt,_eventTypes[1],Xt,ce,!0),Oe.deltaX=Oe.deltaY=0,ve&&ve(Oe))},Jt=function(Ft){if(!Pt(Ft,1)){_removeListener$1(Ae?oe:bt,_eventTypes[1],Xt,!0);var wt=!isNaN(Oe.y-Oe.startY),Ot=Oe.isDragging&&(Math.abs(Oe.x-Oe.startX)>3||Math.abs(Oe.y-Oe.startY)>3),Nt=_getEvent(Ft);!Ot&&wt&&(Oe._vx.reset(),Oe._vy.reset(),ce&&dt&&gsap$3.delayedCall(.08,function(){if(_getTime$1()-ht>300&&!Ft.defaultPrevented){if(Ft.target.click)Ft.target.click();else if(bt.createEvent){var Gt=bt.createEvent("MouseEvents");Gt.initMouseEvent("click",!0,!0,_win$2,1,Nt.screenX,Nt.screenY,Nt.clientX,Nt.clientY,!1,!1,!1,!1,0,null),Ft.target.dispatchEvent(Gt)}}})),Oe.isDragging=Oe.isGesturing=Oe.isPressed=!1,de&&!Ae&&_t.restart(!0),ge&&Ot&&ge(Oe),ye&&ye(Oe,Ot)}},si=function(Ft){return Ft.touches&&Ft.touches.length>1&&(Oe.isGesturing=!0)&&Ie(Ft,Oe.isDragging)},ri=function(){return(Oe.isGesturing=!1)||Fe(Oe)},ai=function(Ft){if(!Pt(Ft)){var wt=mt(),Ot=pt();Zt((wt-Tt)*Je,(Ot-Et)*Je,1),Tt=wt,Et=Ot,de&&_t.restart(!0)}},Qt=function(Ft){if(!Pt(Ft)){Ft=_getEvent(Ft,ce),Ne&&(Qe=!0);var wt=(Ft.deltaMode===1?le:Ft.deltaMode===2?_win$2.innerHeight:1)*pe;Zt(Ft.deltaX*wt,Ft.deltaY*wt,0),de&&!Ae&&_t.restart(!0)}},ci=function(Ft){if(!Pt(Ft)){var wt=Ft.clientX,Ot=Ft.clientY,Nt=wt-Oe.x,Gt=Ot-Oe.y;Oe.x=wt,Oe.y=Ot,He=!0,(Nt||Gt)&&ti(Nt,Gt)}},fi=function(Ft){Oe.event=Ft,Le(Oe)},li=function(Ft){Oe.event=Ft,ke(Oe)},ui=function(Ft){return Pt(Ft)||_getEvent(Ft,ce)&&Xe(Oe)};_t=Oe._dc=gsap$3.delayedCall(ue||.25,$t).pause(),Oe.deltaX=Oe.deltaY=0,Oe._vx=_getVelocityProp(0,50,!0),Oe._vy=_getVelocityProp(0,50,!0),Oe.scrollX=mt,Oe.scrollY=pt,Oe.isDragging=Oe.isGesturing=Oe.isPressed=!1,_context$3(this),Oe.enable=function(Ht){return Oe.isEnabled||(_addListener$1(Rt?bt:oe,"scroll",_onScroll$1),ae.indexOf("scroll")>=0&&_addListener$1(Rt?bt:oe,"scroll",ai,ce,We),ae.indexOf("wheel")>=0&&_addListener$1(oe,"wheel",Qt,ce,We),(ae.indexOf("touch")>=0&&_isTouch||ae.indexOf("pointer")>=0)&&(_addListener$1(oe,_eventTypes[0],zt,ce,We),_addListener$1(bt,_eventTypes[2],Jt),_addListener$1(bt,_eventTypes[3],Jt),dt&&_addListener$1(oe,"click",At,!1,!0),Xe&&_addListener$1(oe,"click",ui),Ie&&_addListener$1(bt,"gesturestart",si),Fe&&_addListener$1(bt,"gestureend",ri),Le&&_addListener$1(oe,_pointerType+"enter",fi),ke&&_addListener$1(oe,_pointerType+"leave",li),Me&&_addListener$1(oe,_pointerType+"move",ci)),Oe.isEnabled=!0,Ht&&Ht.type&&zt(Ht),$e&&$e(Oe)),Oe},Oe.disable=function(){Oe.isEnabled&&(_observers.filter(function(Ht){return Ht!==Oe&&_isViewport$1(Ht.target)}).length||_removeListener$1(Rt?bt:oe,"scroll",_onScroll$1),Oe.isPressed&&(Oe._vx.reset(),Oe._vy.reset(),_removeListener$1(Ae?oe:bt,_eventTypes[1],Xt,!0)),_removeListener$1(Rt?bt:oe,"scroll",ai,We),_removeListener$1(oe,"wheel",Qt,We),_removeListener$1(oe,_eventTypes[0],zt,We),_removeListener$1(bt,_eventTypes[2],Jt),_removeListener$1(bt,_eventTypes[3],Jt),_removeListener$1(oe,"click",At,!0),_removeListener$1(oe,"click",ui),_removeListener$1(bt,"gesturestart",si),_removeListener$1(bt,"gestureend",ri),_removeListener$1(oe,_pointerType+"enter",fi),_removeListener$1(oe,_pointerType+"leave",li),_removeListener$1(oe,_pointerType+"move",ci),Oe.isEnabled=Oe.isPressed=Oe.isDragging=!1,ze&&ze(Oe))},Oe.kill=Oe.revert=function(){Oe.disable();var Ht=_observers.indexOf(Oe);Ht>=0&&_observers.splice(Ht,1),_normalizer$1===Oe&&(_normalizer$1=0)},_observers.push(Oe),Ae&&_isViewport$1(oe)&&(_normalizer$1=Oe),Oe.enable(me)},_createClass$1(ie,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),ie}();Observer$1.version="3.11.4",Observer$1.create=function(ie){return new Observer$1(ie)},Observer$1.register=_initCore$2,Observer$1.getAll=function(){return _observers.slice()},Observer$1.getById=function(ie){return _observers.filter(function(ee){return ee.vars.id===ie})[0]},_getGSAP$2()&&gsap$3.registerPlugin(Observer$1);/*!
 * ScrollTrigger 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gsap$2,_coreInitted$2,_win$1,_doc$1,_docEl,_body,_root,_resizeDelay,_toArray$1,_clamp,_time2,_syncInterval,_refreshing,_pointerIsDown,_transformProp,_i,_prevWidth,_prevHeight,_autoRefresh,_sort,_suppressOverwrites,_ignoreResize,_normalizer,_ignoreMobileResize,_baseScreenHeight,_baseScreenWidth,_fixIOSBug,_context$2,_scrollRestoration,_limitCallbacks,_startup=1,_getTime=Date.now,_time1=_getTime(),_lastScrollTime=0,_enabled=0,_pointerDownHandler=function(){return _pointerIsDown=1},_pointerUpHandler=function(){return _pointerIsDown=0},_passThrough=function(ee){return ee},_round$2=function(ee){return Math.round(ee*1e5)/1e5||0},_windowExists=function(){return typeof window!="undefined"},_getGSAP$1=function(){return gsap$2||_windowExists()&&(gsap$2=window.gsap)&&gsap$2.registerPlugin&&gsap$2},_isViewport=function(ee){return!!~_root.indexOf(ee)},_getBoundsFunc=function(ee){return _getProxyProp(ee,"getBoundingClientRect")||(_isViewport(ee)?function(){return _winOffsets.width=_win$1.innerWidth,_winOffsets.height=_win$1.innerHeight,_winOffsets}:function(){return _getBounds(ee)})},_getSizeFunc=function(ee,te,re){var ne=re.d,se=re.d2,ae=re.a;return(ae=_getProxyProp(ee,"getBoundingClientRect"))?function(){return ae()[ne]}:function(){return(te?_win$1["inner"+se]:ee["client"+se])||0}},_getOffsetsFunc=function(ee,te){return!te||~_proxies.indexOf(ee)?_getBoundsFunc(ee):function(){return _winOffsets}},_maxScroll=function(ee,te){var re=te.s,ne=te.d2,se=te.d,ae=te.a;return(re="scroll"+ne)&&(ae=_getProxyProp(ee,re))?ae()-_getBoundsFunc(ee)()[se]:_isViewport(ee)?(_docEl[re]||_body[re])-(_win$1["inner"+ne]||_docEl["client"+ne]||_body["client"+ne]):ee[re]-ee["offset"+ne]},_iterateAutoRefresh=function(ee,te){for(var re=0;re<_autoRefresh.length;re+=3)(!te||~te.indexOf(_autoRefresh[re+1]))&&ee(_autoRefresh[re],_autoRefresh[re+1],_autoRefresh[re+2])},_isString=function(ee){return typeof ee=="string"},_isFunction=function(ee){return typeof ee=="function"},_isNumber$1=function(ee){return typeof ee=="number"},_isObject=function(ee){return typeof ee=="object"},_endAnimation=function(ee,te,re){return ee&&ee.progress(te?0:1)&&re&&ee.pause()},_callback=function(ee,te){if(ee.enabled){var re=te(ee);re&&re.totalTime&&(ee.callbackAnimation=re)}},_abs$1=Math.abs,_left="left",_top="top",_right="right",_bottom="bottom",_width="width",_height="height",_Right="Right",_Left="Left",_Top="Top",_Bottom="Bottom",_padding="padding",_margin="margin",_Width="Width",_Height="Height",_px="px",_getComputedStyle$1=function(ee){return _win$1.getComputedStyle(ee)},_makePositionable=function(ee){var te=_getComputedStyle$1(ee).position;ee.style.position=te==="absolute"||te==="fixed"?te:"relative"},_setDefaults=function(ee,te){for(var re in te)re in ee||(ee[re]=te[re]);return ee},_getBounds=function(ee,te){var re=te&&_getComputedStyle$1(ee)[_transformProp]!=="matrix(1, 0, 0, 1, 0, 0)"&&gsap$2.to(ee,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),ne=ee.getBoundingClientRect();return re&&re.progress(0).kill(),ne},_getSize=function(ee,te){var re=te.d2;return ee["offset"+re]||ee["client"+re]||0},_getLabelRatioArray=function(ee){var te=[],re=ee.labels,ne=ee.duration(),se;for(se in re)te.push(re[se]/ne);return te},_getClosestLabel=function(ee){return function(te){return gsap$2.utils.snap(_getLabelRatioArray(ee),te)}},_snapDirectional=function(ee){var te=gsap$2.utils.snap(ee),re=Array.isArray(ee)&&ee.slice(0).sort(function(ne,se){return ne-se});return re?function(ne,se,ae){ae===void 0&&(ae=.001);var oe;if(!se)return te(ne);if(se>0){for(ne-=ae,oe=0;oe<re.length;oe++)if(re[oe]>=ne)return re[oe];return re[oe-1]}else for(oe=re.length,ne+=ae;oe--;)if(re[oe]<=ne)return re[oe];return re[0]}:function(ne,se,ae){ae===void 0&&(ae=.001);var oe=te(ne);return!se||Math.abs(oe-ne)<ae||oe-ne<0==se<0?oe:te(se<0?ne-ee:ne+ee)}},_getLabelAtDirection=function(ee){return function(te,re){return _snapDirectional(_getLabelRatioArray(ee))(te,re.direction)}},_multiListener=function(ee,te,re,ne){return re.split(",").forEach(function(se){return ee(te,se,ne)})},_addListener=function(ee,te,re,ne,se){return ee.addEventListener(te,re,{passive:!ne,capture:!!se})},_removeListener=function(ee,te,re,ne){return ee.removeEventListener(te,re,!!ne)},_wheelListener=function(ee,te,re){return re&&re.wheelHandler&&ee(te,"wheel",re)},_markerDefaults={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},_defaults={toggleActions:"play",anticipatePin:0},_keywords={top:0,left:0,center:.5,bottom:1,right:1},_offsetToPx=function(ee,te){if(_isString(ee)){var re=ee.indexOf("="),ne=~re?+(ee.charAt(re-1)+1)*parseFloat(ee.substr(re+1)):0;~re&&(ee.indexOf("%")>re&&(ne*=te/100),ee=ee.substr(0,re-1)),ee=ne+(ee in _keywords?_keywords[ee]*te:~ee.indexOf("%")?parseFloat(ee)*te/100:parseFloat(ee)||0)}return ee},_createMarker=function(ee,te,re,ne,se,ae,oe,le){var he=se.startColor,ce=se.endColor,de=se.fontSize,ue=se.indent,fe=se.fontWeight,pe=_doc$1.createElement("div"),me=_isViewport(re)||_getProxyProp(re,"pinType")==="fixed",xe=ee.indexOf("scroller")!==-1,ge=me?_body:re,_e=ee.indexOf("start")!==-1,ve=_e?he:ce,ye="border-color:"+ve+";font-size:"+de+";color:"+ve+";font-weight:"+fe+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return ye+="position:"+((xe||le)&&me?"fixed;":"absolute;"),(xe||le||!me)&&(ye+=(ne===_vertical?_right:_bottom)+":"+(ae+parseFloat(ue))+"px;"),oe&&(ye+="box-sizing:border-box;text-align:left;width:"+oe.offsetWidth+"px;"),pe._isStart=_e,pe.setAttribute("class","gsap-marker-"+ee+(te?" marker-"+te:"")),pe.style.cssText=ye,pe.innerText=te||te===0?ee+"-"+te:ee,ge.children[0]?ge.insertBefore(pe,ge.children[0]):ge.appendChild(pe),pe._offset=pe["offset"+ne.op.d2],_positionMarker(pe,0,ne,_e),pe},_positionMarker=function(ee,te,re,ne){var se={display:"block"},ae=re[ne?"os2":"p2"],oe=re[ne?"p2":"os2"];ee._isFlipped=ne,se[re.a+"Percent"]=ne?-100:0,se[re.a]=ne?"1px":0,se["border"+ae+_Width]=1,se["border"+oe+_Width]=0,se[re.p]=te+"px",gsap$2.set(ee,se)},_triggers=[],_ids={},_rafID,_sync=function(){return _getTime()-_lastScrollTime>34&&(_rafID||(_rafID=requestAnimationFrame(_updateAll)))},_onScroll=function(){(!_normalizer||!_normalizer.isPressed||_normalizer.startX>_body.clientWidth)&&(_scrollers.cache++,_normalizer?_rafID||(_rafID=requestAnimationFrame(_updateAll)):_updateAll(),_lastScrollTime||_dispatch("scrollStart"),_lastScrollTime=_getTime())},_setBaseDimensions=function(){_baseScreenWidth=_win$1.innerWidth,_baseScreenHeight=_win$1.innerHeight},_onResize=function(){_scrollers.cache++,!_refreshing&&!_ignoreResize&&!_doc$1.fullscreenElement&&!_doc$1.webkitFullscreenElement&&(!_ignoreMobileResize||_baseScreenWidth!==_win$1.innerWidth||Math.abs(_win$1.innerHeight-_baseScreenHeight)>_win$1.innerHeight*.25)&&_resizeDelay.restart(!0)},_listeners={},_emptyArray=[],_softRefresh=function ie(){return _removeListener(ScrollTrigger,"scrollEnd",ie)||_refreshAll(!0)},_dispatch=function(ee){return _listeners[ee]&&_listeners[ee].map(function(te){return te()})||_emptyArray},_savedStyles=[],_revertRecorded=function(ee){for(var te=0;te<_savedStyles.length;te+=5)(!ee||_savedStyles[te+4]&&_savedStyles[te+4].query===ee)&&(_savedStyles[te].style.cssText=_savedStyles[te+1],_savedStyles[te].getBBox&&_savedStyles[te].setAttribute("transform",_savedStyles[te+2]||""),_savedStyles[te+3].uncache=1)},_revertAll=function(ee,te){var re;for(_i=0;_i<_triggers.length;_i++)re=_triggers[_i],re&&(!te||re._ctx===te)&&(ee?re.kill(1):re.revert(!0,!0));te&&_revertRecorded(te),te||_dispatch("revert")},_clearScrollMemory=function(ee,te){_scrollers.cache++,(te||!_refreshingAll)&&_scrollers.forEach(function(re){return _isFunction(re)&&re.cacheID++&&(re.rec=0)}),_isString(ee)&&(_win$1.history.scrollRestoration=_scrollRestoration=ee)},_refreshingAll,_refreshID=0,_queueRefreshID,_queueRefreshAll=function(){if(_queueRefreshID!==_refreshID){var ee=_queueRefreshID=_refreshID;requestAnimationFrame(function(){return ee===_refreshID&&_refreshAll(!0)})}},_refreshAll=function(ee,te){if(_lastScrollTime&&!ee){_addListener(ScrollTrigger,"scrollEnd",_softRefresh);return}_refreshingAll=ScrollTrigger.isRefreshing=!0,_scrollers.forEach(function(ne){return _isFunction(ne)&&ne.cacheID++&&(ne.rec=ne())});var re=_dispatch("refreshInit");_sort&&ScrollTrigger.sort(),te||_revertAll(),_scrollers.forEach(function(ne){_isFunction(ne)&&(ne.smooth&&(ne.target.style.scrollBehavior="auto"),ne(0))}),_triggers.slice(0).forEach(function(ne){return ne.refresh()}),_triggers.forEach(function(ne,se){if(ne._subPinOffset&&ne.pin){var ae=ne.vars.horizontal?"offsetWidth":"offsetHeight",oe=ne.pin[ae];ne.revert(!0,1),ne.adjustPinSpacing(ne.pin[ae]-oe),ne.revert(!1,1)}}),_triggers.forEach(function(ne){return ne.vars.end==="max"&&ne.setPositions(ne.start,Math.max(ne.start+1,_maxScroll(ne.scroller,ne._dir)))}),re.forEach(function(ne){return ne&&ne.render&&ne.render(-1)}),_scrollers.forEach(function(ne){_isFunction(ne)&&(ne.smooth&&requestAnimationFrame(function(){return ne.target.style.scrollBehavior="smooth"}),ne.rec&&ne(ne.rec))}),_clearScrollMemory(_scrollRestoration,1),_resizeDelay.pause(),_refreshID++,_updateAll(2),_triggers.forEach(function(ne){return _isFunction(ne.vars.onRefresh)&&ne.vars.onRefresh(ne)}),_refreshingAll=ScrollTrigger.isRefreshing=!1,_dispatch("refresh")},_lastScroll=0,_direction=1,_primary,_updateAll=function(ee){if(!_refreshingAll||ee===2){ScrollTrigger.isUpdating=!0,_primary&&_primary.update(0);var te=_triggers.length,re=_getTime(),ne=re-_time1>=50,se=te&&_triggers[0].scroll();if(_direction=_lastScroll>se?-1:1,_lastScroll=se,ne&&(_lastScrollTime&&!_pointerIsDown&&re-_lastScrollTime>200&&(_lastScrollTime=0,_dispatch("scrollEnd")),_time2=_time1,_time1=re),_direction<0){for(_i=te;_i-- >0;)_triggers[_i]&&_triggers[_i].update(0,ne);_direction=1}else for(_i=0;_i<te;_i++)_triggers[_i]&&_triggers[_i].update(0,ne);ScrollTrigger.isUpdating=!1}_rafID=0},_propNamesToCopy=[_left,_top,_bottom,_right,_margin+_Bottom,_margin+_Right,_margin+_Top,_margin+_Left,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],_stateProps=_propNamesToCopy.concat([_width,_height,"boxSizing","max"+_Width,"max"+_Height,"position",_margin,_padding,_padding+_Top,_padding+_Right,_padding+_Bottom,_padding+_Left]),_swapPinOut=function(ee,te,re){_setState(re);var ne=ee._gsap;if(ne.spacerIsNative)_setState(ne.spacerState);else if(ee._gsap.swappedIn){var se=te.parentNode;se&&(se.insertBefore(ee,te),se.removeChild(te))}ee._gsap.swappedIn=!1},_swapPinIn=function(ee,te,re,ne){if(!ee._gsap.swappedIn){for(var se=_propNamesToCopy.length,ae=te.style,oe=ee.style,le;se--;)le=_propNamesToCopy[se],ae[le]=re[le];ae.position=re.position==="absolute"?"absolute":"relative",re.display==="inline"&&(ae.display="inline-block"),oe[_bottom]=oe[_right]="auto",ae.flexBasis=re.flexBasis||"auto",ae.overflow="visible",ae.boxSizing="border-box",ae[_width]=_getSize(ee,_horizontal)+_px,ae[_height]=_getSize(ee,_vertical)+_px,ae[_padding]=oe[_margin]=oe[_top]=oe[_left]="0",_setState(ne),oe[_width]=oe["max"+_Width]=re[_width],oe[_height]=oe["max"+_Height]=re[_height],oe[_padding]=re[_padding],ee.parentNode!==te&&(ee.parentNode.insertBefore(te,ee),te.appendChild(ee)),ee._gsap.swappedIn=!0}},_capsExp=/([A-Z])/g,_setState=function(ee){if(ee){var te=ee.t.style,re=ee.length,ne=0,se,ae;for((ee.t._gsap||gsap$2.core.getCache(ee.t)).uncache=1;ne<re;ne+=2)ae=ee[ne+1],se=ee[ne],ae?te[se]=ae:te[se]&&te.removeProperty(se.replace(_capsExp,"-$1").toLowerCase())}},_getState=function(ee){for(var te=_stateProps.length,re=ee.style,ne=[],se=0;se<te;se++)ne.push(_stateProps[se],re[_stateProps[se]]);return ne.t=ee,ne},_copyState=function(ee,te,re){for(var ne=[],se=ee.length,ae=re?8:0,oe;ae<se;ae+=2)oe=ee[ae],ne.push(oe,oe in te?te[oe]:ee[ae+1]);return ne.t=ee.t,ne},_winOffsets={left:0,top:0},_parsePosition=function(ee,te,re,ne,se,ae,oe,le,he,ce,de,ue,fe){_isFunction(ee)&&(ee=ee(le)),_isString(ee)&&ee.substr(0,3)==="max"&&(ee=ue+(ee.charAt(4)==="="?_offsetToPx("0"+ee.substr(3),re):0));var pe=fe?fe.time():0,me,xe,ge;if(fe&&fe.seek(0),_isNumber$1(ee))oe&&_positionMarker(oe,re,ne,!0);else{_isFunction(te)&&(te=te(le));var _e=(ee||"0").split(" "),ve,ye,be,we;ge=_getTarget(te)||_body,ve=_getBounds(ge)||{},(!ve||!ve.left&&!ve.top)&&_getComputedStyle$1(ge).display==="none"&&(we=ge.style.display,ge.style.display="block",ve=_getBounds(ge),we?ge.style.display=we:ge.style.removeProperty("display")),ye=_offsetToPx(_e[0],ve[ne.d]),be=_offsetToPx(_e[1]||"0",re),ee=ve[ne.p]-he[ne.p]-ce+ye+se-be,oe&&_positionMarker(oe,be,ne,re-be<20||oe._isStart&&be>20),re-=re-be}if(ae){var Se=ee+re,Te=ae._isStart;me="scroll"+ne.d2,_positionMarker(ae,Se,ne,Te&&Se>20||!Te&&(de?Math.max(_body[me],_docEl[me]):ae.parentNode[me])<=Se+1),de&&(he=_getBounds(oe),de&&(ae.style[ne.op.p]=he[ne.op.p]-ne.op.m-ae._offset+_px))}return fe&&ge&&(me=_getBounds(ge),fe.seek(ue),xe=_getBounds(ge),fe._caScrollDist=me[ne.p]-xe[ne.p],ee=ee/fe._caScrollDist*ue),fe&&fe.seek(pe),fe?ee:Math.round(ee)},_prefixExp=/(webkit|moz|length|cssText|inset)/i,_reparent=function(ee,te,re,ne){if(ee.parentNode!==te){var se=ee.style,ae,oe;if(te===_body){ee._stOrig=se.cssText,oe=_getComputedStyle$1(ee);for(ae in oe)!+ae&&!_prefixExp.test(ae)&&oe[ae]&&typeof se[ae]=="string"&&ae!=="0"&&(se[ae]=oe[ae]);se.top=re,se.left=ne}else se.cssText=ee._stOrig;gsap$2.core.getCache(ee).uncache=1,te.appendChild(ee)}},_getTweenCreator=function(ee,te){var re=_getScrollFunc(ee,te),ne="_scroll"+te.p2,se,ae,oe=function le(he,ce,de,ue,fe){var pe=le.tween,me=ce.onComplete,xe={};return de=de||re(),fe=ue&&fe||0,ue=ue||he-de,pe&&pe.kill(),se=Math.round(de),ce[ne]=he,ce.modifiers=xe,xe[ne]=function(ge){return ge=Math.round(re()),ge!==se&&ge!==ae&&Math.abs(ge-se)>3&&Math.abs(ge-ae)>3?(pe.kill(),le.tween=0):ge=de+ue*pe.ratio+fe*pe.ratio*pe.ratio,ae=se,se=Math.round(ge)},ce.onUpdate=function(){_scrollers.cache++,_updateAll()},ce.onComplete=function(){le.tween=0,me&&me.call(pe)},pe=le.tween=gsap$2.to(ee,ce),pe};return ee[ne]=re,re.wheelHandler=function(){return oe.tween&&oe.tween.kill()&&(oe.tween=0)},_addListener(ee,"wheel",re.wheelHandler),oe},ScrollTrigger=function(){function ie(te,re){_coreInitted$2||ie.register(gsap$2)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(te,re)}var ee=ie.prototype;return ee.init=function(re,ne){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!_enabled){this.update=this.refresh=this.kill=_passThrough;return}re=_setDefaults(_isString(re)||_isNumber$1(re)||re.nodeType?{trigger:re}:re,_defaults);var se=re,ae=se.onUpdate,oe=se.toggleClass,le=se.id,he=se.onToggle,ce=se.onRefresh,de=se.scrub,ue=se.trigger,fe=se.pin,pe=se.pinSpacing,me=se.invalidateOnRefresh,xe=se.anticipatePin,ge=se.onScrubComplete,_e=se.onSnapComplete,ve=se.once,ye=se.snap,be=se.pinReparent,we=se.pinSpacer,Se=se.containerAnimation,Te=se.fastScrollEnd,Pe=se.preventOverlaps,Be=re.horizontal||re.containerAnimation&&re.horizontal!==!1?_horizontal:_vertical,Ce=!de&&de!==0,De=_getTarget(re.scroller||_win$1),Re=gsap$2.core.getCache(De),Le=_isViewport(De),ke=("pinType"in re?re.pinType:_getProxyProp(De,"pinType")||Le&&"fixed")==="fixed",Me=[re.onEnter,re.onLeave,re.onEnterBack,re.onLeaveBack],Ee=Ce&&re.toggleActions.split(" "),Ae="markers"in re?re.markers:_defaults.markers,Ie=Le?0:parseFloat(_getComputedStyle$1(De)["border"+Be.p2+_Width])||0,Fe=this,Ne=re.onRefreshInit&&function(){return re.onRefreshInit(Fe)},$e=_getSizeFunc(De,Le,Be),ze=_getOffsetsFunc(De,Le),Xe=0,Je=0,We=_getScrollFunc(De,Be),dt,yt,vt,at,_t,je,He,Qe,St,gt,Oe,Ve,Ze,mt,pt,Tt,Et,Mt,Rt,bt,Ue,xt,ht,At,Pt,$t,qt,Zt,ti,Xt,zt,Jt,si,ri,ai,Qt,ci,fi,li;if(_context$2(Fe),Fe._dir=Be,xe*=45,Fe.scroller=De,Fe.scroll=Se?Se.time.bind(Se):We,at=We(),Fe.vars=re,ne=ne||re.animation,"refreshPriority"in re&&(_sort=1,re.refreshPriority===-9999&&(_primary=Fe)),Re.tweenScroll=Re.tweenScroll||{top:_getTweenCreator(De,_vertical),left:_getTweenCreator(De,_horizontal)},Fe.tweenTo=dt=Re.tweenScroll[Be.p],Fe.scrubDuration=function(wt){Jt=_isNumber$1(wt)&&wt,Jt?zt?zt.duration(wt):zt=gsap$2.to(ne,{ease:"expo",totalProgress:"+=0.001",duration:Jt,paused:!0,onComplete:function(){return ge&&ge(Fe)}}):(zt&&zt.progress(1).kill(),zt=0)},ne&&(ne.vars.lazy=!1,ne._initted||ne.vars.immediateRender!==!1&&re.immediateRender!==!1&&ne.duration()&&ne.render(0,!0,!0),Fe.animation=ne.pause(),ne.scrollTrigger=Fe,Fe.scrubDuration(de),ti=0,le||(le=ne.vars.id)),_triggers.push(Fe),ye&&((!_isObject(ye)||ye.push)&&(ye={snapTo:ye}),"scrollBehavior"in _body.style&&gsap$2.set(Le?[_body,_docEl]:De,{scrollBehavior:"auto"}),_scrollers.forEach(function(wt){return _isFunction(wt)&&wt.target===(Le?_doc$1.scrollingElement||_docEl:De)&&(wt.smooth=!1)}),vt=_isFunction(ye.snapTo)?ye.snapTo:ye.snapTo==="labels"?_getClosestLabel(ne):ye.snapTo==="labelsDirectional"?_getLabelAtDirection(ne):ye.directional!==!1?function(wt,Ot){return _snapDirectional(ye.snapTo)(wt,_getTime()-Je<500?0:Ot.direction)}:gsap$2.utils.snap(ye.snapTo),si=ye.duration||{min:.1,max:2},si=_isObject(si)?_clamp(si.min,si.max):_clamp(si,si),ri=gsap$2.delayedCall(ye.delay||Jt/2||.1,function(){var wt=We(),Ot=_getTime()-Je<500,Nt=dt.tween;if((Ot||Math.abs(Fe.getVelocity())<10)&&!Nt&&!_pointerIsDown&&Xe!==wt){var Gt=(wt-je)/Ze,Ge=ne&&!Ce?ne.totalProgress():Gt,Ye=Ot?0:(Ge-Xt)/(_getTime()-_time2)*1e3||0,Ke=gsap$2.utils.clamp(-Gt,1-Gt,_abs$1(Ye/2)*Ye/.185),qe=Gt+(ye.inertia===!1?0:Ke),lt=_clamp(0,1,vt(qe,Fe)),Ct=Math.round(je+lt*Ze),Dt=ye,It=Dt.onStart,Lt=Dt.onInterrupt,Vt=Dt.onComplete;if(wt<=He&&wt>=je&&Ct!==wt){if(Nt&&!Nt._initted&&Nt.data<=_abs$1(Ct-wt))return;ye.inertia===!1&&(Ke=lt-Gt),dt(Ct,{duration:si(_abs$1(Math.max(_abs$1(qe-Ge),_abs$1(lt-Ge))*.185/Ye/.05||0)),ease:ye.ease||"power3",data:_abs$1(Ct-wt),onInterrupt:function(){return ri.restart(!0)&&Lt&&Lt(Fe)},onComplete:function(){Fe.update(),Xe=We(),ti=Xt=ne&&!Ce?ne.totalProgress():Fe.progress,_e&&_e(Fe),Vt&&Vt(Fe)}},wt,Ke*Ze,Ct-wt-Ke*Ze),It&&It(Fe,dt.tween)}}else Fe.isActive&&Xe!==wt&&ri.restart(!0)}).pause()),le&&(_ids[le]=Fe),ue=Fe.trigger=_getTarget(ue||fe),li=ue&&ue._gsap&&ue._gsap.stRevert,li&&(li=li(Fe)),fe=fe===!0?ue:_getTarget(fe),_isString(oe)&&(oe={targets:ue,className:oe}),fe&&(pe===!1||pe===_margin||(pe=!pe&&fe.parentNode&&fe.parentNode.style&&_getComputedStyle$1(fe.parentNode).display==="flex"?!1:_padding),Fe.pin=fe,yt=gsap$2.core.getCache(fe),yt.spacer?mt=yt.pinState:(we&&(we=_getTarget(we),we&&!we.nodeType&&(we=we.current||we.nativeElement),yt.spacerIsNative=!!we,we&&(yt.spacerState=_getState(we))),yt.spacer=Et=we||_doc$1.createElement("div"),Et.classList.add("pin-spacer"),le&&Et.classList.add("pin-spacer-"+le),yt.pinState=mt=_getState(fe)),re.force3D!==!1&&gsap$2.set(fe,{force3D:!0}),Fe.spacer=Et=yt.spacer,Zt=_getComputedStyle$1(fe),ht=Zt[pe+Be.os2],Rt=gsap$2.getProperty(fe),bt=gsap$2.quickSetter(fe,Be.a,_px),_swapPinIn(fe,Et,Zt),Tt=_getState(fe)),Ae){Ve=_isObject(Ae)?_setDefaults(Ae,_markerDefaults):_markerDefaults,gt=_createMarker("scroller-start",le,De,Be,Ve,0),Oe=_createMarker("scroller-end",le,De,Be,Ve,0,gt),Mt=gt["offset"+Be.op.d2];var ui=_getTarget(_getProxyProp(De,"content")||De);Qe=this.markerStart=_createMarker("start",le,ui,Be,Ve,Mt,0,Se),St=this.markerEnd=_createMarker("end",le,ui,Be,Ve,Mt,0,Se),Se&&(fi=gsap$2.quickSetter([Qe,St],Be.a,_px)),!ke&&!(_proxies.length&&_getProxyProp(De,"fixedMarkers")===!0)&&(_makePositionable(Le?_body:De),gsap$2.set([gt,Oe],{force3D:!0}),Pt=gsap$2.quickSetter(gt,Be.a,_px),qt=gsap$2.quickSetter(Oe,Be.a,_px))}if(Se){var Ht=Se.vars.onUpdate,Ft=Se.vars.onUpdateParams;Se.eventCallback("onUpdate",function(){Fe.update(0,0,1),Ht&&Ht.apply(Ft||[])})}Fe.previous=function(){return _triggers[_triggers.indexOf(Fe)-1]},Fe.next=function(){return _triggers[_triggers.indexOf(Fe)+1]},Fe.revert=function(wt,Ot){if(!Ot)return Fe.kill(!0);var Nt=wt!==!1||!Fe.enabled,Gt=_refreshing;Nt!==Fe.isReverted&&(Nt&&(Qt=Math.max(We(),Fe.scroll.rec||0),ai=Fe.progress,ci=ne&&ne.progress()),Qe&&[Qe,St,gt,Oe].forEach(function(Ge){return Ge.style.display=Nt?"none":"block"}),Nt&&(_refreshing=1,Fe.update(Nt)),fe&&(!be||!Fe.isActive)&&(Nt?_swapPinOut(fe,Et,mt):_swapPinIn(fe,Et,_getComputedStyle$1(fe),At)),Nt||Fe.update(Nt),_refreshing=Gt,Fe.isReverted=Nt)},Fe.refresh=function(wt,Ot){if(!((_refreshing||!Fe.enabled)&&!Ot)){if(fe&&wt&&_lastScrollTime){_addListener(ie,"scrollEnd",_softRefresh);return}!_refreshingAll&&Ne&&Ne(Fe),_refreshing=1,Je=_getTime(),dt.tween&&(dt.tween.kill(),dt.tween=0),zt&&zt.pause(),me&&ne&&ne.revert({kill:!1}).invalidate(),Fe.isReverted||Fe.revert(!0,!0),Fe._subPinOffset=!1;for(var Nt=$e(),Gt=ze(),Ge=Se?Se.duration():_maxScroll(De,Be),Ye=0,Ke=0,qe=re.end,lt=re.endTrigger||ue,Ct=re.start||(re.start===0||!ue?0:fe?"0 0":"0 100%"),Dt=Fe.pinnedContainer=re.pinnedContainer&&_getTarget(re.pinnedContainer),It=ue&&Math.max(0,_triggers.indexOf(Fe))||0,Lt=It,Vt,kt,Ut,Wt,Yt,Bt,ii,jt,di,oi,ei;Lt--;)Bt=_triggers[Lt],Bt.end||Bt.refresh(0,1)||(_refreshing=1),ii=Bt.pin,ii&&(ii===ue||ii===fe)&&!Bt.isReverted&&(oi||(oi=[]),oi.unshift(Bt),Bt.revert(!0,!0)),Bt!==_triggers[Lt]&&(It--,Lt--);for(_isFunction(Ct)&&(Ct=Ct(Fe)),je=_parsePosition(Ct,ue,Nt,Be,We(),Qe,gt,Fe,Gt,Ie,ke,Ge,Se)||(fe?-.001:0),_isFunction(qe)&&(qe=qe(Fe)),_isString(qe)&&!qe.indexOf("+=")&&(~qe.indexOf(" ")?qe=(_isString(Ct)?Ct.split(" ")[0]:"")+qe:(Ye=_offsetToPx(qe.substr(2),Nt),qe=_isString(Ct)?Ct:je+Ye,lt=ue)),He=Math.max(je,_parsePosition(qe||(lt?"100% 0":Ge),lt,Nt,Be,We()+Ye,St,Oe,Fe,Gt,Ie,ke,Ge,Se))||-.001,Ze=He-je||(je-=.01)&&.001,Ye=0,Lt=It;Lt--;)Bt=_triggers[Lt],ii=Bt.pin,ii&&Bt.start-Bt._pinPush<=je&&!Se&&Bt.end>0&&(Vt=Bt.end-Bt.start,(ii===ue&&Bt.start-Bt._pinPush<je||ii===Dt)&&!_isNumber$1(Ct)&&(Ye+=Vt*(1-Bt.progress)),ii===fe&&(Ke+=Vt));if(je+=Ye,He+=Ye,Fe._pinPush=Ke,Qe&&Ye&&(Vt={},Vt[Be.a]="+="+Ye,Dt&&(Vt[Be.p]="-="+We()),gsap$2.set([Qe,St],Vt)),fe)Vt=_getComputedStyle$1(fe),Wt=Be===_vertical,Ut=We(),Ue=parseFloat(Rt(Be.a))+Ke,!Ge&&He>1&&(ei=(Le?_doc$1.scrollingElement||_docEl:De).style,ei={style:ei,value:ei["overflow"+Be.a.toUpperCase()]},ei["overflow"+Be.a.toUpperCase()]="scroll"),_swapPinIn(fe,Et,Vt),Tt=_getState(fe),kt=_getBounds(fe,!0),jt=ke&&_getScrollFunc(De,Wt?_horizontal:_vertical)(),pe&&(At=[pe+Be.os2,Ze+Ke+_px],At.t=Et,Lt=pe===_padding?_getSize(fe,Be)+Ze+Ke:0,Lt&&At.push(Be.d,Lt+_px),_setState(At),Dt&&_triggers.forEach(function(ni){ni.pin===Dt&&ni.vars.pinSpacing!==!1&&(ni._subPinOffset=!0)}),ke&&We(Qt)),ke&&(Yt={top:kt.top+(Wt?Ut-je:jt)+_px,left:kt.left+(Wt?jt:Ut-je)+_px,boxSizing:"border-box",position:"fixed"},Yt[_width]=Yt["max"+_Width]=Math.ceil(kt.width)+_px,Yt[_height]=Yt["max"+_Height]=Math.ceil(kt.height)+_px,Yt[_margin]=Yt[_margin+_Top]=Yt[_margin+_Right]=Yt[_margin+_Bottom]=Yt[_margin+_Left]="0",Yt[_padding]=Vt[_padding],Yt[_padding+_Top]=Vt[_padding+_Top],Yt[_padding+_Right]=Vt[_padding+_Right],Yt[_padding+_Bottom]=Vt[_padding+_Bottom],Yt[_padding+_Left]=Vt[_padding+_Left],pt=_copyState(mt,Yt,be),_refreshingAll&&We(0)),ne?(di=ne._initted,_suppressOverwrites(1),ne.render(ne.duration(),!0,!0),xt=Rt(Be.a)-Ue+Ze+Ke,$t=Math.abs(Ze-xt)>1,ke&&$t&&pt.splice(pt.length-2,2),ne.render(0,!0,!0),di||ne.invalidate(!0),ne.parent||ne.totalTime(ne.totalTime()),_suppressOverwrites(0)):xt=Ze,ei&&(ei.value?ei.style["overflow"+Be.a.toUpperCase()]=ei.value:ei.style.removeProperty("overflow-"+Be.a));else if(ue&&We()&&!Se)for(kt=ue.parentNode;kt&&kt!==_body;)kt._pinOffset&&(je-=kt._pinOffset,He-=kt._pinOffset),kt=kt.parentNode;oi&&oi.forEach(function(ni){return ni.revert(!1,!0)}),Fe.start=je,Fe.end=He,at=_t=_refreshingAll?Qt:We(),!Se&&!_refreshingAll&&(at<Qt&&We(Qt),Fe.scroll.rec=0),Fe.revert(!1,!0),ri&&(Xe=-1,Fe.isActive&&We(je+Ze*ai),ri.restart(!0)),_refreshing=0,ne&&Ce&&(ne._initted||ci)&&ne.progress()!==ci&&ne.progress(ci,!0).render(ne.time(),!0,!0),(ai!==Fe.progress||Se)&&(ne&&!Ce&&ne.totalProgress(ai,!0),Fe.progress=(at-je)/Ze===ai?0:ai),fe&&pe&&(Et._pinOffset=Math.round(Fe.progress*xt)),ce&&!_refreshingAll&&ce(Fe)}},Fe.getVelocity=function(){return(We()-_t)/(_getTime()-_time2)*1e3||0},Fe.endAnimation=function(){_endAnimation(Fe.callbackAnimation),ne&&(zt?zt.progress(1):ne.paused()?Ce||_endAnimation(ne,Fe.direction<0,1):_endAnimation(ne,ne.reversed()))},Fe.labelToScroll=function(wt){return ne&&ne.labels&&(je||Fe.refresh()||je)+ne.labels[wt]/ne.duration()*Ze||0},Fe.getTrailing=function(wt){var Ot=_triggers.indexOf(Fe),Nt=Fe.direction>0?_triggers.slice(0,Ot).reverse():_triggers.slice(Ot+1);return(_isString(wt)?Nt.filter(function(Gt){return Gt.vars.preventOverlaps===wt}):Nt).filter(function(Gt){return Fe.direction>0?Gt.end<=je:Gt.start>=He})},Fe.update=function(wt,Ot,Nt){if(!(Se&&!Nt&&!wt)){var Gt=_refreshingAll?Qt:Fe.scroll(),Ge=wt?0:(Gt-je)/Ze,Ye=Ge<0?0:Ge>1?1:Ge||0,Ke=Fe.progress,qe,lt,Ct,Dt,It,Lt,Vt,kt;if(Ot&&(_t=at,at=Se?We():Gt,ye&&(Xt=ti,ti=ne&&!Ce?ne.totalProgress():Ye)),xe&&!Ye&&fe&&!_refreshing&&!_startup&&_lastScrollTime&&je<Gt+(Gt-_t)/(_getTime()-_time2)*xe&&(Ye=1e-4),Ye!==Ke&&Fe.enabled){if(qe=Fe.isActive=!!Ye&&Ye<1,lt=!!Ke&&Ke<1,Lt=qe!==lt,It=Lt||!!Ye!=!!Ke,Fe.direction=Ye>Ke?1:-1,Fe.progress=Ye,It&&!_refreshing&&(Ct=Ye&&!Ke?0:Ye===1?1:Ke===1?2:3,Ce&&(Dt=!Lt&&Ee[Ct+1]!=="none"&&Ee[Ct+1]||Ee[Ct],kt=ne&&(Dt==="complete"||Dt==="reset"||Dt in ne))),Pe&&(Lt||kt)&&(kt||de||!ne)&&(_isFunction(Pe)?Pe(Fe):Fe.getTrailing(Pe).forEach(function(Bt){return Bt.endAnimation()})),Ce||(zt&&!_refreshing&&!_startup?(zt._dp._time-zt._start!==zt._time&&zt.render(zt._dp._time-zt._start),zt.resetTo?zt.resetTo("totalProgress",Ye,ne._tTime/ne._tDur):(zt.vars.totalProgress=Ye,zt.invalidate().restart())):ne&&ne.totalProgress(Ye,!!_refreshing)),fe){if(wt&&pe&&(Et.style[pe+Be.os2]=ht),!ke)bt(_round$2(Ue+xt*Ye));else if(It){if(Vt=!wt&&Ye>Ke&&He+1>Gt&&Gt+1>=_maxScroll(De,Be),be)if(!wt&&(qe||Vt)){var Ut=_getBounds(fe,!0),Wt=Gt-je;_reparent(fe,_body,Ut.top+(Be===_vertical?Wt:0)+_px,Ut.left+(Be===_vertical?0:Wt)+_px)}else _reparent(fe,Et);_setState(qe||Vt?pt:Tt),$t&&Ye<1&&qe||bt(Ue+(Ye===1&&!Vt?xt:0))}}ye&&!dt.tween&&!_refreshing&&!_startup&&ri.restart(!0),oe&&(Lt||ve&&Ye&&(Ye<1||!_limitCallbacks))&&_toArray$1(oe.targets).forEach(function(Bt){return Bt.classList[qe||ve?"add":"remove"](oe.className)}),ae&&!Ce&&!wt&&ae(Fe),It&&!_refreshing?(Ce&&(kt&&(Dt==="complete"?ne.pause().totalProgress(1):Dt==="reset"?ne.restart(!0).pause():Dt==="restart"?ne.restart(!0):ne[Dt]()),ae&&ae(Fe)),(Lt||!_limitCallbacks)&&(he&&Lt&&_callback(Fe,he),Me[Ct]&&_callback(Fe,Me[Ct]),ve&&(Ye===1?Fe.kill(!1,1):Me[Ct]=0),Lt||(Ct=Ye===1?1:3,Me[Ct]&&_callback(Fe,Me[Ct]))),Te&&!qe&&Math.abs(Fe.getVelocity())>(_isNumber$1(Te)?Te:2500)&&(_endAnimation(Fe.callbackAnimation),zt?zt.progress(1):_endAnimation(ne,Dt==="reverse"?1:!Ye,1))):Ce&&ae&&!_refreshing&&ae(Fe)}if(qt){var Yt=Se?Gt/Se.duration()*(Se._caScrollDist||0):Gt;Pt(Yt+(gt._isFlipped?1:0)),qt(Yt)}fi&&fi(-Gt/Se.duration()*(Se._caScrollDist||0))}},Fe.enable=function(wt,Ot){Fe.enabled||(Fe.enabled=!0,_addListener(De,"resize",_onResize),_addListener(Le?_doc$1:De,"scroll",_onScroll),Ne&&_addListener(ie,"refreshInit",Ne),wt!==!1&&(Fe.progress=ai=0,at=_t=Xe=We()),Ot!==!1&&Fe.refresh())},Fe.getTween=function(wt){return wt&&dt?dt.tween:zt},Fe.setPositions=function(wt,Ot){fe&&(Ue+=wt-je,xt+=Ot-wt-Ze,pe===_padding&&Fe.adjustPinSpacing(Ot-wt-Ze)),Fe.start=je=wt,Fe.end=He=Ot,Ze=Ot-wt,Fe.update()},Fe.adjustPinSpacing=function(wt){if(At){var Ot=At.indexOf(Be.d)+1;At[Ot]=parseFloat(At[Ot])+wt+_px,At[1]=parseFloat(At[1])+wt+_px,_setState(At)}},Fe.disable=function(wt,Ot){if(Fe.enabled&&(wt!==!1&&Fe.revert(!0,!0),Fe.enabled=Fe.isActive=!1,Ot||zt&&zt.pause(),Qt=0,yt&&(yt.uncache=1),Ne&&_removeListener(ie,"refreshInit",Ne),ri&&(ri.pause(),dt.tween&&dt.tween.kill()&&(dt.tween=0)),!Le)){for(var Nt=_triggers.length;Nt--;)if(_triggers[Nt].scroller===De&&_triggers[Nt]!==Fe)return;_removeListener(De,"resize",_onResize),_removeListener(De,"scroll",_onScroll)}},Fe.kill=function(wt,Ot){Fe.disable(wt,Ot),zt&&!Ot&&zt.kill(),le&&delete _ids[le];var Nt=_triggers.indexOf(Fe);Nt>=0&&_triggers.splice(Nt,1),Nt===_i&&_direction>0&&_i--,Nt=0,_triggers.forEach(function(Gt){return Gt.scroller===Fe.scroller&&(Nt=1)}),Nt||_refreshingAll||(Fe.scroll.rec=0),ne&&(ne.scrollTrigger=null,wt&&ne.revert({kill:!1}),Ot||ne.kill()),Qe&&[Qe,St,gt,Oe].forEach(function(Gt){return Gt.parentNode&&Gt.parentNode.removeChild(Gt)}),_primary===Fe&&(_primary=0),fe&&(yt&&(yt.uncache=1),Nt=0,_triggers.forEach(function(Gt){return Gt.pin===fe&&Nt++}),Nt||(yt.spacer=0)),re.onKill&&re.onKill(Fe)},Fe.enable(!1,!1),li&&li(Fe),!ne||!ne.add||Ze?Fe.refresh():gsap$2.delayedCall(.01,function(){return je||He||Fe.refresh()})&&(Ze=.01)&&(je=He=0),fe&&_queueRefreshAll()},ie.register=function(re){return _coreInitted$2||(gsap$2=re||_getGSAP$1(),_windowExists()&&window.document&&ie.enable(),_coreInitted$2=_enabled),_coreInitted$2},ie.defaults=function(re){if(re)for(var ne in re)_defaults[ne]=re[ne];return _defaults},ie.disable=function(re,ne){_enabled=0,_triggers.forEach(function(ae){return ae[ne?"kill":"disable"](re)}),_removeListener(_win$1,"wheel",_onScroll),_removeListener(_doc$1,"scroll",_onScroll),clearInterval(_syncInterval),_removeListener(_doc$1,"touchcancel",_passThrough),_removeListener(_body,"touchstart",_passThrough),_multiListener(_removeListener,_doc$1,"pointerdown,touchstart,mousedown",_pointerDownHandler),_multiListener(_removeListener,_doc$1,"pointerup,touchend,mouseup",_pointerUpHandler),_resizeDelay.kill(),_iterateAutoRefresh(_removeListener);for(var se=0;se<_scrollers.length;se+=3)_wheelListener(_removeListener,_scrollers[se],_scrollers[se+1]),_wheelListener(_removeListener,_scrollers[se],_scrollers[se+2])},ie.enable=function(){if(_win$1=window,_doc$1=document,_docEl=_doc$1.documentElement,_body=_doc$1.body,gsap$2&&(_toArray$1=gsap$2.utils.toArray,_clamp=gsap$2.utils.clamp,_context$2=gsap$2.core.context||_passThrough,_suppressOverwrites=gsap$2.core.suppressOverwrites||_passThrough,_scrollRestoration=_win$1.history.scrollRestoration||"auto",gsap$2.core.globals("ScrollTrigger",ie),_body)){_enabled=1,Observer$1.register(gsap$2),ie.isTouch=Observer$1.isTouch,_fixIOSBug=Observer$1.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),_addListener(_win$1,"wheel",_onScroll),_root=[_win$1,_doc$1,_docEl,_body],gsap$2.matchMedia?(ie.matchMedia=function(le){var he=gsap$2.matchMedia(),ce;for(ce in le)he.add(ce,le[ce]);return he},gsap$2.addEventListener("matchMediaInit",function(){return _revertAll()}),gsap$2.addEventListener("matchMediaRevert",function(){return _revertRecorded()}),gsap$2.addEventListener("matchMedia",function(){_refreshAll(0,1),_dispatch("matchMedia")}),gsap$2.matchMedia("(orientation: portrait)",function(){return _setBaseDimensions(),_setBaseDimensions})):console.warn("Requires GSAP 3.11.0 or later"),_setBaseDimensions(),_addListener(_doc$1,"scroll",_onScroll);var re=_body.style,ne=re.borderTopStyle,se=gsap$2.core.Animation.prototype,ae,oe;for(se.revert||Object.defineProperty(se,"revert",{value:function(){return this.time(-.01,!0)}}),re.borderTopStyle="solid",ae=_getBounds(_body),_vertical.m=Math.round(ae.top+_vertical.sc())||0,_horizontal.m=Math.round(ae.left+_horizontal.sc())||0,ne?re.borderTopStyle=ne:re.removeProperty("border-top-style"),_syncInterval=setInterval(_sync,250),gsap$2.delayedCall(.5,function(){return _startup=0}),_addListener(_doc$1,"touchcancel",_passThrough),_addListener(_body,"touchstart",_passThrough),_multiListener(_addListener,_doc$1,"pointerdown,touchstart,mousedown",_pointerDownHandler),_multiListener(_addListener,_doc$1,"pointerup,touchend,mouseup",_pointerUpHandler),_transformProp=gsap$2.utils.checkPrefix("transform"),_stateProps.push(_transformProp),_coreInitted$2=_getTime(),_resizeDelay=gsap$2.delayedCall(.2,_refreshAll).pause(),_autoRefresh=[_doc$1,"visibilitychange",function(){var le=_win$1.innerWidth,he=_win$1.innerHeight;_doc$1.hidden?(_prevWidth=le,_prevHeight=he):(_prevWidth!==le||_prevHeight!==he)&&_onResize()},_doc$1,"DOMContentLoaded",_refreshAll,_win$1,"load",_refreshAll,_win$1,"resize",_onResize],_iterateAutoRefresh(_addListener),_triggers.forEach(function(le){return le.enable(0,1)}),oe=0;oe<_scrollers.length;oe+=3)_wheelListener(_removeListener,_scrollers[oe],_scrollers[oe+1]),_wheelListener(_removeListener,_scrollers[oe],_scrollers[oe+2])}},ie.config=function(re){"limitCallbacks"in re&&(_limitCallbacks=!!re.limitCallbacks);var ne=re.syncInterval;ne&&clearInterval(_syncInterval)||(_syncInterval=ne)&&setInterval(_sync,ne),"ignoreMobileResize"in re&&(_ignoreMobileResize=ie.isTouch===1&&re.ignoreMobileResize),"autoRefreshEvents"in re&&(_iterateAutoRefresh(_removeListener)||_iterateAutoRefresh(_addListener,re.autoRefreshEvents||"none"),_ignoreResize=(re.autoRefreshEvents+"").indexOf("resize")===-1)},ie.scrollerProxy=function(re,ne){var se=_getTarget(re),ae=_scrollers.indexOf(se),oe=_isViewport(se);~ae&&_scrollers.splice(ae,oe?6:2),ne&&(oe?_proxies.unshift(_win$1,ne,_body,ne,_docEl,ne):_proxies.unshift(se,ne))},ie.clearMatchMedia=function(re){_triggers.forEach(function(ne){return ne._ctx&&ne._ctx.query===re&&ne._ctx.kill(!0,!0)})},ie.isInViewport=function(re,ne,se){var ae=(_isString(re)?_getTarget(re):re).getBoundingClientRect(),oe=ae[se?_width:_height]*ne||0;return se?ae.right-oe>0&&ae.left+oe<_win$1.innerWidth:ae.bottom-oe>0&&ae.top+oe<_win$1.innerHeight},ie.positionInViewport=function(re,ne,se){_isString(re)&&(re=_getTarget(re));var ae=re.getBoundingClientRect(),oe=ae[se?_width:_height],le=ne==null?oe/2:ne in _keywords?_keywords[ne]*oe:~ne.indexOf("%")?parseFloat(ne)*oe/100:parseFloat(ne)||0;return se?(ae.left+le)/_win$1.innerWidth:(ae.top+le)/_win$1.innerHeight},ie.killAll=function(re){if(_triggers.slice(0).forEach(function(se){return se.vars.id!=="ScrollSmoother"&&se.kill()}),re!==!0){var ne=_listeners.killAll||[];_listeners={},ne.forEach(function(se){return se()})}},ie}();ScrollTrigger.version="3.11.4",ScrollTrigger.saveStyles=function(ie){return ie?_toArray$1(ie).forEach(function(ee){if(ee&&ee.style){var te=_savedStyles.indexOf(ee);te>=0&&_savedStyles.splice(te,5),_savedStyles.push(ee,ee.style.cssText,ee.getBBox&&ee.getAttribute("transform"),gsap$2.core.getCache(ee),_context$2())}}):_savedStyles},ScrollTrigger.revert=function(ie,ee){return _revertAll(!ie,ee)},ScrollTrigger.create=function(ie,ee){return new ScrollTrigger(ie,ee)},ScrollTrigger.refresh=function(ie){return ie?_onResize():(_coreInitted$2||ScrollTrigger.register())&&_refreshAll(!0)},ScrollTrigger.update=function(ie){return++_scrollers.cache&&_updateAll(ie===!0?2:0)},ScrollTrigger.clearScrollMemory=_clearScrollMemory,ScrollTrigger.maxScroll=function(ie,ee){return _maxScroll(ie,ee?_horizontal:_vertical)},ScrollTrigger.getScrollFunc=function(ie,ee){return _getScrollFunc(_getTarget(ie),ee?_horizontal:_vertical)},ScrollTrigger.getById=function(ie){return _ids[ie]},ScrollTrigger.getAll=function(){return _triggers.filter(function(ie){return ie.vars.id!=="ScrollSmoother"})},ScrollTrigger.isScrolling=function(){return!!_lastScrollTime},ScrollTrigger.snapDirectional=_snapDirectional,ScrollTrigger.addEventListener=function(ie,ee){var te=_listeners[ie]||(_listeners[ie]=[]);~te.indexOf(ee)||te.push(ee)},ScrollTrigger.removeEventListener=function(ie,ee){var te=_listeners[ie],re=te&&te.indexOf(ee);re>=0&&te.splice(re,1)},ScrollTrigger.batch=function(ie,ee){var te=[],re={},ne=ee.interval||.016,se=ee.batchMax||1e9,ae=function(he,ce){var de=[],ue=[],fe=gsap$2.delayedCall(ne,function(){ce(de,ue),de=[],ue=[]}).pause();return function(pe){de.length||fe.restart(!0),de.push(pe.trigger),ue.push(pe),se<=de.length&&fe.progress(1)}},oe;for(oe in ee)re[oe]=oe.substr(0,2)==="on"&&_isFunction(ee[oe])&&oe!=="onRefreshInit"?ae(oe,ee[oe]):ee[oe];return _isFunction(se)&&(se=se(),_addListener(ScrollTrigger,"refresh",function(){return se=ee.batchMax()})),_toArray$1(ie).forEach(function(le){var he={};for(oe in re)he[oe]=re[oe];he.trigger=le,te.push(ScrollTrigger.create(he))}),te};var _clampScrollAndGetDurationMultiplier=function(ee,te,re,ne){return te>ne?ee(ne):te<0&&ee(0),re>ne?(ne-te)/(re-te):re<0?te/(te-re):1},_allowNativePanning=function ie(ee,te){te===!0?ee.style.removeProperty("touch-action"):ee.style.touchAction=te===!0?"auto":te?"pan-"+te+(Observer$1.isTouch?" pinch-zoom":""):"none",ee===_docEl&&ie(_body,te)},_overflow={auto:1,scroll:1},_nestedScroll=function(ee){var te=ee.event,re=ee.target,ne=ee.axis,se=(te.changedTouches?te.changedTouches[0]:te).target,ae=se._gsap||gsap$2.core.getCache(se),oe=_getTime(),le;if(!ae._isScrollT||oe-ae._isScrollT>2e3){for(;se&&se!==_body&&(se.scrollHeight<=se.clientHeight&&se.scrollWidth<=se.clientWidth||!(_overflow[(le=_getComputedStyle$1(se)).overflowY]||_overflow[le.overflowX]));)se=se.parentNode;ae._isScroll=se&&se!==re&&!_isViewport(se)&&(_overflow[(le=_getComputedStyle$1(se)).overflowY]||_overflow[le.overflowX]),ae._isScrollT=oe}(ae._isScroll||ne==="x")&&(te.stopPropagation(),te._gsapAllow=!0)},_inputObserver=function(ee,te,re,ne){return Observer$1.create({target:ee,capture:!0,debounce:!1,lockAxis:!0,type:te,onWheel:ne=ne&&_nestedScroll,onPress:ne,onDrag:ne,onScroll:ne,onEnable:function(){return re&&_addListener(_doc$1,Observer$1.eventTypes[0],_captureInputs,!1,!0)},onDisable:function(){return _removeListener(_doc$1,Observer$1.eventTypes[0],_captureInputs,!0)}})},_inputExp=/(input|label|select|textarea)/i,_inputIsFocused,_captureInputs=function(ee){var te=_inputExp.test(ee.target.tagName);(te||_inputIsFocused)&&(ee._gsapAllow=!0,_inputIsFocused=te)},_getScrollNormalizer=function(ee){_isObject(ee)||(ee={}),ee.preventDefault=ee.isNormalizer=ee.allowClicks=!0,ee.type||(ee.type="wheel,touch"),ee.debounce=!!ee.debounce,ee.id=ee.id||"normalizer";var te=ee,re=te.normalizeScrollX,ne=te.momentum,se=te.allowNestedScroll,ae,oe,le=_getTarget(ee.target)||_docEl,he=gsap$2.core.globals().ScrollSmoother,ce=he&&he.get(),de=_fixIOSBug&&(ee.content&&_getTarget(ee.content)||ce&&ee.content!==!1&&!ce.smooth()&&ce.content()),ue=_getScrollFunc(le,_vertical),fe=_getScrollFunc(le,_horizontal),pe=1,me=(Observer$1.isTouch&&_win$1.visualViewport?_win$1.visualViewport.scale*_win$1.visualViewport.width:_win$1.outerWidth)/_win$1.innerWidth,xe=0,ge=_isFunction(ne)?function(){return ne(ae)}:function(){return ne||2.8},_e,ve,ye=_inputObserver(le,ee.type,!0,se),be=function(){return ve=!1},we=_passThrough,Se=_passThrough,Te=function(){oe=_maxScroll(le,_vertical),Se=_clamp(_fixIOSBug?1:0,oe),re&&(we=_clamp(0,_maxScroll(le,_horizontal))),_e=_refreshID},Pe=function(){de._gsap.y=_round$2(parseFloat(de._gsap.y)+ue.offset)+"px",de.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(de._gsap.y)+", 0, 1)",ue.offset=ue.cacheID=0},Be=function(){if(ve){requestAnimationFrame(be);var Ee=_round$2(ae.deltaY/2),Ae=Se(ue.v-Ee);if(de&&Ae!==ue.v+ue.offset){ue.offset=Ae-ue.v;var Ie=_round$2((parseFloat(de&&de._gsap.y)||0)-ue.offset);de.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+Ie+", 0, 1)",de._gsap.y=Ie+"px",ue.cacheID=_scrollers.cache,_updateAll()}return!0}ue.offset&&Pe(),ve=!0},Ce,De,Re,Le,ke=function(){Te(),Ce.isActive()&&Ce.vars.scrollY>oe&&(ue()>oe?Ce.progress(1)&&ue(oe):Ce.resetTo("scrollY",oe))};return de&&gsap$2.set(de,{y:"+=0"}),ee.ignoreCheck=function(Me){return _fixIOSBug&&Me.type==="touchmove"&&Be()||pe>1.05&&Me.type!=="touchstart"||ae.isGesturing||Me.touches&&Me.touches.length>1},ee.onPress=function(){var Me=pe;pe=_round$2((_win$1.visualViewport&&_win$1.visualViewport.scale||1)/me),Ce.pause(),Me!==pe&&_allowNativePanning(le,pe>1.01?!0:re?!1:"x"),De=fe(),Re=ue(),Te(),_e=_refreshID},ee.onRelease=ee.onGestureStart=function(Me,Ee){if(ue.offset&&Pe(),!Ee)Le.restart(!0);else{_scrollers.cache++;var Ae=ge(),Ie,Fe;re&&(Ie=fe(),Fe=Ie+Ae*.05*-Me.velocityX/.227,Ae*=_clampScrollAndGetDurationMultiplier(fe,Ie,Fe,_maxScroll(le,_horizontal)),Ce.vars.scrollX=we(Fe)),Ie=ue(),Fe=Ie+Ae*.05*-Me.velocityY/.227,Ae*=_clampScrollAndGetDurationMultiplier(ue,Ie,Fe,_maxScroll(le,_vertical)),Ce.vars.scrollY=Se(Fe),Ce.invalidate().duration(Ae).play(.01),(_fixIOSBug&&Ce.vars.scrollY>=oe||Ie>=oe-1)&&gsap$2.to({},{onUpdate:ke,duration:Ae})}},ee.onWheel=function(){Ce._ts&&Ce.pause(),_getTime()-xe>1e3&&(_e=0,xe=_getTime())},ee.onChange=function(Me,Ee,Ae,Ie,Fe){if(_refreshID!==_e&&Te(),Ee&&re&&fe(we(Ie[2]===Ee?De+(Me.startX-Me.x):fe()+Ee-Ie[1])),Ae){ue.offset&&Pe();var Ne=Fe[2]===Ae,$e=Ne?Re+Me.startY-Me.y:ue()+Ae-Fe[1],ze=Se($e);Ne&&$e!==ze&&(Re+=ze-$e),ue(ze)}(Ae||Ee)&&_updateAll()},ee.onEnable=function(){_allowNativePanning(le,re?!1:"x"),ScrollTrigger.addEventListener("refresh",ke),_addListener(_win$1,"resize",ke),ue.smooth&&(ue.target.style.scrollBehavior="auto",ue.smooth=fe.smooth=!1),ye.enable()},ee.onDisable=function(){_allowNativePanning(le,!0),_removeListener(_win$1,"resize",ke),ScrollTrigger.removeEventListener("refresh",ke),ye.kill()},ee.lockAxis=ee.lockAxis!==!1,ae=new Observer$1(ee),ae.iOS=_fixIOSBug,_fixIOSBug&&!ue()&&ue(1),_fixIOSBug&&gsap$2.ticker.add(_passThrough),Le=ae._dc,Ce=gsap$2.to(ae,{ease:"power4",paused:!0,scrollX:re?"+=0.1":"+=0",scrollY:"+=0.1",onComplete:Le.vars.onComplete}),ae};ScrollTrigger.sort=function(ie){return _triggers.sort(ie||function(ee,te){return(ee.vars.refreshPriority||0)*-1e6+ee.start-(te.start+(te.vars.refreshPriority||0)*-1e6)})},ScrollTrigger.observe=function(ie){return new Observer$1(ie)},ScrollTrigger.normalizeScroll=function(ie){if(typeof ie=="undefined")return _normalizer;if(ie===!0&&_normalizer)return _normalizer.enable();if(ie===!1)return _normalizer&&_normalizer.kill();var ee=ie instanceof Observer$1?ie:_getScrollNormalizer(ie);return _normalizer&&_normalizer.target===ee.target&&_normalizer.kill(),_isViewport(ee.target)&&(_normalizer=ee),ee},ScrollTrigger.core={_getVelocityProp,_inputObserver,_scrollers,_proxies,bridge:{ss:function(){_lastScrollTime||_dispatch("scrollStart"),_lastScrollTime=_getTime()},ref:function(){return _refreshing}}},_getGSAP$1()&&gsap$2.registerPlugin(ScrollTrigger),gsapWithCSS.registerPlugin(ScrollTrigger);class _Leave{constructor(ee,te){ScrollTrigger.killAll();let re=$(".loader");re.removeClass("complete"),re.removeClass("loader-home"),re.addClass("loader-all"),$(".nav").addClass("loading"),gsapWithCSS.to(ee,{opacity:1,duration:.3,onComplete:()=>{te()}})}}/*!
 * paths 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _svgPathExp=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,_scientific=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,_DEG2RAD=Math.PI/180,_sin=Math.sin,_cos=Math.cos,_abs=Math.abs,_sqrt=Math.sqrt,_isNumber=function(ee){return typeof ee=="number"},_roundingNum=1e5,_round$1=function(ee){return Math.round(ee*_roundingNum)/_roundingNum||0};function transformRawPath(ie,ee,te,re,ne,se,ae){for(var oe=ie.length,le,he,ce,de,ue;--oe>-1;)for(le=ie[oe],he=le.length,ce=0;ce<he;ce+=2)de=le[ce],ue=le[ce+1],le[ce]=de*ee+ue*re+se,le[ce+1]=de*te+ue*ne+ae;return ie._dirty=1,ie}function arcToSegment(ie,ee,te,re,ne,se,ae,oe,le){if(!(ie===oe&&ee===le)){te=_abs(te),re=_abs(re);var he=ne%360*_DEG2RAD,ce=_cos(he),de=_sin(he),ue=Math.PI,fe=ue*2,pe=(ie-oe)/2,me=(ee-le)/2,xe=ce*pe+de*me,ge=-de*pe+ce*me,_e=xe*xe,ve=ge*ge,ye=_e/(te*te)+ve/(re*re);ye>1&&(te=_sqrt(ye)*te,re=_sqrt(ye)*re);var be=te*te,we=re*re,Se=(be*we-be*ve-we*_e)/(be*ve+we*_e);Se<0&&(Se=0);var Te=(se===ae?-1:1)*_sqrt(Se),Pe=Te*(te*ge/re),Be=Te*-(re*xe/te),Ce=(ie+oe)/2,De=(ee+le)/2,Re=Ce+(ce*Pe-de*Be),Le=De+(de*Pe+ce*Be),ke=(xe-Pe)/te,Me=(ge-Be)/re,Ee=(-xe-Pe)/te,Ae=(-ge-Be)/re,Ie=ke*ke+Me*Me,Fe=(Me<0?-1:1)*Math.acos(ke/_sqrt(Ie)),Ne=(ke*Ae-Me*Ee<0?-1:1)*Math.acos((ke*Ee+Me*Ae)/_sqrt(Ie*(Ee*Ee+Ae*Ae)));isNaN(Ne)&&(Ne=ue),!ae&&Ne>0?Ne-=fe:ae&&Ne<0&&(Ne+=fe),Fe%=fe,Ne%=fe;var $e=Math.ceil(_abs(Ne)/(fe/4)),ze=[],Xe=Ne/$e,Je=4/3*_sin(Xe/2)/(1+_cos(Xe/2)),We=ce*te,dt=de*te,yt=de*-re,vt=ce*re,at;for(at=0;at<$e;at++)ne=Fe+at*Xe,xe=_cos(ne),ge=_sin(ne),ke=_cos(ne+=Xe),Me=_sin(ne),ze.push(xe-Je*ge,ge+Je*xe,ke+Je*Me,Me-Je*ke,ke,Me);for(at=0;at<ze.length;at+=2)xe=ze[at],ge=ze[at+1],ze[at]=xe*We+ge*yt+Re,ze[at+1]=xe*dt+ge*vt+Le;return ze[at-2]=oe,ze[at-1]=le,ze}}function stringToRawPath(ie){var ee=(ie+"").replace(_scientific,function(Pe){var Be=+Pe;return Be<1e-4&&Be>-1e-4?0:Be}).match(_svgPathExp)||[],te=[],re=0,ne=0,se=2/3,ae=ee.length,oe=0,le="ERROR: malformed path: "+ie,he,ce,de,ue,fe,pe,me,xe,ge,_e,ve,ye,be,we,Se,Te=function(Be,Ce,De,Re){_e=(De-Be)/3,ve=(Re-Ce)/3,me.push(Be+_e,Ce+ve,De-_e,Re-ve,De,Re)};if(!ie||!isNaN(ee[0])||isNaN(ee[1]))return console.log(le),te;for(he=0;he<ae;he++)if(be=fe,isNaN(ee[he])?(fe=ee[he].toUpperCase(),pe=fe!==ee[he]):he--,de=+ee[he+1],ue=+ee[he+2],pe&&(de+=re,ue+=ne),he||(xe=de,ge=ue),fe==="M")me&&(me.length<8?te.length-=1:oe+=me.length),re=xe=de,ne=ge=ue,me=[de,ue],te.push(me),he+=2,fe="L";else if(fe==="C")me||(me=[0,0]),pe||(re=ne=0),me.push(de,ue,re+ee[he+3]*1,ne+ee[he+4]*1,re+=ee[he+5]*1,ne+=ee[he+6]*1),he+=6;else if(fe==="S")_e=re,ve=ne,(be==="C"||be==="S")&&(_e+=re-me[me.length-4],ve+=ne-me[me.length-3]),pe||(re=ne=0),me.push(_e,ve,de,ue,re+=ee[he+3]*1,ne+=ee[he+4]*1),he+=4;else if(fe==="Q")_e=re+(de-re)*se,ve=ne+(ue-ne)*se,pe||(re=ne=0),re+=ee[he+3]*1,ne+=ee[he+4]*1,me.push(_e,ve,re+(de-re)*se,ne+(ue-ne)*se,re,ne),he+=4;else if(fe==="T")_e=re-me[me.length-4],ve=ne-me[me.length-3],me.push(re+_e,ne+ve,de+(re+_e*1.5-de)*se,ue+(ne+ve*1.5-ue)*se,re=de,ne=ue),he+=2;else if(fe==="H")Te(re,ne,re=de,ne),he+=1;else if(fe==="V")Te(re,ne,re,ne=de+(pe?ne-re:0)),he+=1;else if(fe==="L"||fe==="Z")fe==="Z"&&(de=xe,ue=ge,me.closed=!0),(fe==="L"||_abs(re-de)>.5||_abs(ne-ue)>.5)&&(Te(re,ne,de,ue),fe==="L"&&(he+=2)),re=de,ne=ue;else if(fe==="A"){if(we=ee[he+4],Se=ee[he+5],_e=ee[he+6],ve=ee[he+7],ce=7,we.length>1&&(we.length<3?(ve=_e,_e=Se,ce--):(ve=Se,_e=we.substr(2),ce-=2),Se=we.charAt(1),we=we.charAt(0)),ye=arcToSegment(re,ne,+ee[he+1],+ee[he+2],+ee[he+3],+we,+Se,(pe?re:0)+_e*1,(pe?ne:0)+ve*1),he+=ce,ye)for(ce=0;ce<ye.length;ce++)me.push(ye[ce]);re=me[me.length-2],ne=me[me.length-1]}else console.log(le);return he=me.length,he<6?(te.pop(),he=0):me[0]===me[he-2]&&me[1]===me[he-1]&&(me.closed=!0),te.totalPoints=oe+he,te}function rawPathToString(ie){_isNumber(ie[0])&&(ie=[ie]);var ee="",te=ie.length,re,ne,se,ae;for(ne=0;ne<te;ne++){for(ae=ie[ne],ee+="M"+_round$1(ae[0])+","+_round$1(ae[1])+" C",re=ae.length,se=2;se<re;se++)ee+=_round$1(ae[se++])+","+_round$1(ae[se++])+" "+_round$1(ae[se++])+","+_round$1(ae[se++])+" "+_round$1(ae[se++])+","+_round$1(ae[se])+" ";ae.closed&&(ee+="z")}return ee}/*!
 * CustomEase 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gsap$1,_coreInitted$1,_getGSAP=function(){return gsap$1||typeof window!="undefined"&&(gsap$1=window.gsap)&&gsap$1.registerPlugin&&gsap$1},_initCore$1=function(){gsap$1=_getGSAP(),gsap$1?(gsap$1.registerEase("_CE",CustomEase.create),_coreInitted$1=1):console.warn("Please gsap.registerPlugin(CustomEase)")},_bigNum=1e20,_round=function(ee){return~~(ee*1e3+(ee<0?-.5:.5))/1e3},_numExp=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,_needsParsingExp=/[cLlsSaAhHvVtTqQ]/g,_findMinimum=function(ee){var te=ee.length,re=_bigNum,ne;for(ne=1;ne<te;ne+=6)+ee[ne]<re&&(re=+ee[ne]);return re},_normalize=function(ee,te,re){!re&&re!==0&&(re=Math.max(+ee[ee.length-1],+ee[1]));var ne=+ee[0]*-1,se=-re,ae=ee.length,oe=1/(+ee[ae-2]+ne),le=-te||(Math.abs(+ee[ae-1]-+ee[1])<.01*(+ee[ae-2]-+ee[0])?_findMinimum(ee)+se:+ee[ae-1]+se),he;for(le?le=1/le:le=-oe,he=0;he<ae;he+=2)ee[he]=(+ee[he]+ne)*oe,ee[he+1]=(+ee[he+1]+se)*le},_bezierToPoints=function ie(ee,te,re,ne,se,ae,oe,le,he,ce,de){var ue=(ee+re)/2,fe=(te+ne)/2,pe=(re+se)/2,me=(ne+ae)/2,xe=(se+oe)/2,ge=(ae+le)/2,_e=(ue+pe)/2,ve=(fe+me)/2,ye=(pe+xe)/2,be=(me+ge)/2,we=(_e+ye)/2,Se=(ve+be)/2,Te=oe-ee,Pe=le-te,Be=Math.abs((re-oe)*Pe-(ne-le)*Te),Ce=Math.abs((se-oe)*Pe-(ae-le)*Te),De;return ce||(ce=[{x:ee,y:te},{x:oe,y:le}],de=1),ce.splice(de||ce.length-1,0,{x:we,y:Se}),(Be+Ce)*(Be+Ce)>he*(Te*Te+Pe*Pe)&&(De=ce.length,ie(ee,te,ue,fe,_e,ve,we,Se,he,ce,de),ie(we,Se,ye,be,xe,ge,oe,le,he,ce,de+1+(ce.length-De))),ce},CustomEase=function(){function ie(te,re,ne){_coreInitted$1||_initCore$1(),this.id=te,this.setData(re,ne)}var ee=ie.prototype;return ee.setData=function(re,ne){ne=ne||{},re=re||"0,0,1,1";var se=re.match(_numExp),ae=1,oe=[],le=[],he=ne.precision||1,ce=he<=1,de,ue,fe,pe,me,xe,ge,_e,ve;if(this.data=re,(_needsParsingExp.test(re)||~re.indexOf("M")&&re.indexOf("C")<0)&&(se=stringToRawPath(re)[0]),de=se.length,de===4)se.unshift(0,0),se.push(1,1),de=8;else if((de-2)%6)throw"Invalid CustomEase";for((+se[0]!=0||+se[de-2]!=1)&&_normalize(se,ne.height,ne.originY),this.segment=se,pe=2;pe<de;pe+=6)ue={x:+se[pe-2],y:+se[pe-1]},fe={x:+se[pe+4],y:+se[pe+5]},oe.push(ue,fe),_bezierToPoints(ue.x,ue.y,+se[pe],+se[pe+1],+se[pe+2],+se[pe+3],fe.x,fe.y,1/(he*2e5),oe,oe.length-1);for(de=oe.length,pe=0;pe<de;pe++)ge=oe[pe],_e=oe[pe-1]||ge,(ge.x>_e.x||_e.y!==ge.y&&_e.x===ge.x||ge===_e)&&ge.x<=1?(_e.cx=ge.x-_e.x,_e.cy=ge.y-_e.y,_e.n=ge,_e.nx=ge.x,ce&&pe>1&&Math.abs(_e.cy/_e.cx-oe[pe-2].cy/oe[pe-2].cx)>2&&(ce=0),_e.cx<ae&&(_e.cx?ae=_e.cx:(_e.cx=.001,pe===de-1&&(_e.x-=.001,ae=Math.min(ae,.001),ce=0)))):(oe.splice(pe--,1),de--);if(de=1/ae+1|0,me=1/de,xe=0,ge=oe[0],ce){for(pe=0;pe<de;pe++)ve=pe*me,ge.nx<ve&&(ge=oe[++xe]),ue=ge.y+(ve-ge.x)/ge.cx*ge.cy,le[pe]={x:ve,cx:me,y:ue,cy:0,nx:9},pe&&(le[pe-1].cy=ue-le[pe-1].y);le[de-1].cy=oe[oe.length-1].y-ue}else{for(pe=0;pe<de;pe++)ge.nx<pe*me&&(ge=oe[++xe]),le[pe]=ge;xe<oe.length-1&&(le[pe-1]=oe[oe.length-2])}return this.ease=function(ye){var be=le[ye*de|0]||le[de-1];return be.nx<ye&&(be=be.n),be.y+(ye-be.x)/be.cx*be.cy},this.ease.custom=this,this.id&&gsap$1&&gsap$1.registerEase(this.id,this.ease),this},ee.getSVGData=function(re){return ie.getSVGData(this,re)},ie.create=function(re,ne,se){return new ie(re,ne,se).ease},ie.register=function(re){gsap$1=re,_initCore$1()},ie.get=function(re){return gsap$1.parseEase(re)},ie.getSVGData=function(re,ne){ne=ne||{};var se=ne.width||100,ae=ne.height||100,oe=ne.x||0,le=(ne.y||0)+ae,he=gsap$1.utils.toArray(ne.path)[0],ce,de,ue,fe,pe,me,xe,ge,_e,ve;if(ne.invert&&(ae=-ae,le=0),typeof re=="string"&&(re=gsap$1.parseEase(re)),re.custom&&(re=re.custom),re instanceof ie)ce=rawPathToString(transformRawPath([re.segment],se,0,0,-ae,oe,le));else{for(ce=[oe,le],xe=Math.max(5,(ne.precision||1)*200),fe=1/xe,xe+=2,ge=5/xe,_e=_round(oe+fe*se),ve=_round(le+re(fe)*-ae),de=(ve-le)/(_e-oe),ue=2;ue<xe;ue++)pe=_round(oe+ue*fe*se),me=_round(le+re(ue*fe)*-ae),(Math.abs((me-ve)/(pe-_e)-de)>ge||ue===xe-1)&&(ce.push(_e,ve),de=(me-ve)/(pe-_e)),_e=pe,ve=me;ce="M"+ce.join(",")}return he&&he.setAttribute("d",ce),ce},ie}();_getGSAP()&&gsap$1.registerPlugin(CustomEase),CustomEase.version="3.11.4";/*!
 * strings: 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var emojiExp=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function getText(ie){var ee=ie.nodeType,te="";if(ee===1||ee===9||ee===11){if(typeof ie.textContent=="string")return ie.textContent;for(ie=ie.firstChild;ie;ie=ie.nextSibling)te+=getText(ie)}else if(ee===3||ee===4)return ie.nodeValue;return te}/*!
 * SplitText: 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _doc,_win,_coreInitted,gsap,_context$1,_toArray,_stripExp=/(?:\r|\n|\t\t)/g,_multipleSpacesExp=/(?:\s\s+)/g,_initCore=function(ee){_doc=document,_win=window,gsap=gsap||ee||_win.gsap||console.warn("Please gsap.registerPlugin(SplitText)"),gsap&&(_toArray=gsap.utils.toArray,_context$1=gsap.core.context||function(){},_coreInitted=1)},_getComputedStyle=function(ee){return _win.getComputedStyle(ee)},_isAbsolute=function(ee){return ee.position==="absolute"||ee.absolute===!0},_findSpecialChars=function(ee,te){for(var re=te.length,ne;--re>-1;)if(ne=te[re],ee.substr(0,ne.length)===ne)return ne.length},_divStart=" style='position:relative;display:inline-block;'",_cssClassFunc=function(ee,te){ee===void 0&&(ee="");var re=~ee.indexOf("++"),ne=1;return re&&(ee=ee.split("++").join("")),function(){return"<"+te+_divStart+(ee?" class='"+ee+(re?ne++:"")+"'>":">")}},_swapText=function ie(ee,te,re){var ne=ee.nodeType;if(ne===1||ne===9||ne===11)for(ee=ee.firstChild;ee;ee=ee.nextSibling)ie(ee,te,re);else(ne===3||ne===4)&&(ee.nodeValue=ee.nodeValue.split(te).join(re))},_pushReversed=function(ee,te){for(var re=te.length;--re>-1;)ee.push(te[re])},_isBeforeWordDelimiter=function(ee,te,re){for(var ne;ee&&ee!==te;){if(ne=ee._next||ee.nextSibling,ne)return ne.textContent.charAt(0)===re;ee=ee.parentNode||ee._parent}},_deWordify=function ie(ee){var te=_toArray(ee.childNodes),re=te.length,ne,se;for(ne=0;ne<re;ne++)se=te[ne],se._isSplit?ie(se):ne&&se.previousSibling&&se.previousSibling.nodeType===3?(se.previousSibling.nodeValue+=se.nodeType===3?se.nodeValue:se.firstChild.nodeValue,ee.removeChild(se)):se.nodeType!==3&&(ee.insertBefore(se.firstChild,se),ee.removeChild(se))},_getStyleAsNumber=function(ee,te){return parseFloat(te[ee])||0},_setPositionsAfterSplit=function(ee,te,re,ne,se,ae,oe){var le=_getComputedStyle(ee),he=_getStyleAsNumber("paddingLeft",le),ce=-999,de=_getStyleAsNumber("borderBottomWidth",le)+_getStyleAsNumber("borderTopWidth",le),ue=_getStyleAsNumber("borderLeftWidth",le)+_getStyleAsNumber("borderRightWidth",le),fe=_getStyleAsNumber("paddingTop",le)+_getStyleAsNumber("paddingBottom",le),pe=_getStyleAsNumber("paddingLeft",le)+_getStyleAsNumber("paddingRight",le),me=_getStyleAsNumber("fontSize",le)*(te.lineThreshold||.2),xe=le.textAlign,ge=[],_e=[],ve=[],ye=te.wordDelimiter||" ",be=te.tag?te.tag:te.span?"span":"div",we=te.type||te.split||"chars,words,lines",Se=se&&~we.indexOf("lines")?[]:null,Te=~we.indexOf("words"),Pe=~we.indexOf("chars"),Be=_isAbsolute(te),Ce=te.linesClass,De=~(Ce||"").indexOf("++"),Re=[],Le=le.display==="flex",ke=ee.style.display,Me,Ee,Ae,Ie,Fe,Ne,$e,ze,Xe,Je,We,dt;for(De&&(Ce=Ce.split("++").join("")),Le&&(ee.style.display="block"),Ee=ee.getElementsByTagName("*"),Ae=Ee.length,Fe=[],Me=0;Me<Ae;Me++)Fe[Me]=Ee[Me];if(Se||Be)for(Me=0;Me<Ae;Me++)Ie=Fe[Me],Ne=Ie.parentNode===ee,(Ne||Be||Pe&&!Te)&&(dt=Ie.offsetTop,Se&&Ne&&Math.abs(dt-ce)>me&&(Ie.nodeName!=="BR"||Me===0)&&($e=[],Se.push($e),ce=dt),Be&&(Ie._x=Ie.offsetLeft,Ie._y=dt,Ie._w=Ie.offsetWidth,Ie._h=Ie.offsetHeight),Se&&((Ie._isSplit&&Ne||!Pe&&Ne||Te&&Ne||!Te&&Ie.parentNode.parentNode===ee&&!Ie.parentNode._isSplit)&&($e.push(Ie),Ie._x-=he,_isBeforeWordDelimiter(Ie,ee,ye)&&(Ie._wordEnd=!0)),Ie.nodeName==="BR"&&(Ie.nextSibling&&Ie.nextSibling.nodeName==="BR"||Me===0)&&Se.push([])));for(Me=0;Me<Ae;Me++){if(Ie=Fe[Me],Ne=Ie.parentNode===ee,Ie.nodeName==="BR"){Se||Be?(Ie.parentNode&&Ie.parentNode.removeChild(Ie),Fe.splice(Me--,1),Ae--):Te||ee.appendChild(Ie);continue}if(Be&&(Xe=Ie.style,!Te&&!Ne&&(Ie._x+=Ie.parentNode._x,Ie._y+=Ie.parentNode._y),Xe.left=Ie._x+"px",Xe.top=Ie._y+"px",Xe.position="absolute",Xe.display="block",Xe.width=Ie._w+1+"px",Xe.height=Ie._h+"px"),!Te&&Pe)if(Ie._isSplit)for(Ie._next=Ee=Ie.nextSibling,Ie.parentNode.appendChild(Ie);Ee&&Ee.nodeType===3&&Ee.textContent===" ";)Ie._next=Ee.nextSibling,Ie.parentNode.appendChild(Ee),Ee=Ee.nextSibling;else Ie.parentNode._isSplit?(Ie._parent=Ie.parentNode,!Ie.previousSibling&&Ie.firstChild&&(Ie.firstChild._isFirst=!0),Ie.nextSibling&&Ie.nextSibling.textContent===" "&&!Ie.nextSibling.nextSibling&&Re.push(Ie.nextSibling),Ie._next=Ie.nextSibling&&Ie.nextSibling._isFirst?null:Ie.nextSibling,Ie.parentNode.removeChild(Ie),Fe.splice(Me--,1),Ae--):Ne||(dt=!Ie.nextSibling&&_isBeforeWordDelimiter(Ie.parentNode,ee,ye),Ie.parentNode._parent&&Ie.parentNode._parent.appendChild(Ie),dt&&Ie.parentNode.appendChild(_doc.createTextNode(" ")),be==="span"&&(Ie.style.display="inline"),ge.push(Ie));else Ie.parentNode._isSplit&&!Ie._isSplit&&Ie.innerHTML!==""?_e.push(Ie):Pe&&!Ie._isSplit&&(be==="span"&&(Ie.style.display="inline"),ge.push(Ie))}for(Me=Re.length;--Me>-1;)Re[Me].parentNode.removeChild(Re[Me]);if(Se){for(Be&&(Je=_doc.createElement(be),ee.appendChild(Je),We=Je.offsetWidth+"px",dt=Je.offsetParent===ee?0:ee.offsetLeft,ee.removeChild(Je)),Xe=ee.style.cssText,ee.style.cssText="display:none;";ee.firstChild;)ee.removeChild(ee.firstChild);for(ze=ye===" "&&(!Be||!Te&&!Pe),Me=0;Me<Se.length;Me++){for($e=Se[Me],Je=_doc.createElement(be),Je.style.cssText="display:block;text-align:"+xe+";position:"+(Be?"absolute;":"relative;"),Ce&&(Je.className=Ce+(De?Me+1:"")),ve.push(Je),Ae=$e.length,Ee=0;Ee<Ae;Ee++)$e[Ee].nodeName!=="BR"&&(Ie=$e[Ee],Je.appendChild(Ie),ze&&Ie._wordEnd&&Je.appendChild(_doc.createTextNode(" ")),Be&&(Ee===0&&(Je.style.top=Ie._y+"px",Je.style.left=he+dt+"px"),Ie.style.top="0px",dt&&(Ie.style.left=Ie._x-dt+"px")));Ae===0?Je.innerHTML="&nbsp;":!Te&&!Pe&&(_deWordify(Je),_swapText(Je,String.fromCharCode(160)," ")),Be&&(Je.style.width=We,Je.style.height=Ie._h+"px"),ee.appendChild(Je)}ee.style.cssText=Xe}Be&&(oe>ee.clientHeight&&(ee.style.height=oe-fe+"px",ee.clientHeight<oe&&(ee.style.height=oe+de+"px")),ae>ee.clientWidth&&(ee.style.width=ae-pe+"px",ee.clientWidth<ae&&(ee.style.width=ae+ue+"px"))),Le&&(ke?ee.style.display=ke:ee.style.removeProperty("display")),_pushReversed(re,ge),Te&&_pushReversed(ne,_e),_pushReversed(se,ve)},_splitRawText=function(ee,te,re,ne){var se=te.tag?te.tag:te.span?"span":"div",ae=te.type||te.split||"chars,words,lines",oe=~ae.indexOf("chars"),le=_isAbsolute(te),he=te.wordDelimiter||" ",ce=he!==" "?"":le?"&#173; ":" ",de="</"+se+">",ue=1,fe=te.specialChars?typeof te.specialChars=="function"?te.specialChars:_findSpecialChars:null,pe,me,xe,ge,_e,ve,ye,be,we=_doc.createElement("div"),Se=ee.parentNode;for(Se.insertBefore(we,ee),we.textContent=ee.nodeValue,Se.removeChild(ee),ee=we,pe=getText(ee),ye=pe.indexOf("<")!==-1,te.reduceWhiteSpace!==!1&&(pe=pe.replace(_multipleSpacesExp," ").replace(_stripExp,"")),ye&&(pe=pe.split("<").join("{{LT}}")),_e=pe.length,me=(pe.charAt(0)===" "?ce:"")+re(),xe=0;xe<_e;xe++)if(ve=pe.charAt(xe),fe&&(be=fe(pe.substr(xe),te.specialChars)))ve=pe.substr(xe,be||1),me+=oe&&ve!==" "?ne()+ve+"</"+se+">":ve,xe+=be-1;else if(ve===he&&pe.charAt(xe-1)!==he&&xe){for(me+=ue?de:"",ue=0;pe.charAt(xe+1)===he;)me+=ce,xe++;xe===_e-1?me+=ce:pe.charAt(xe+1)!==")"&&(me+=ce+re(),ue=1)}else ve==="{"&&pe.substr(xe,6)==="{{LT}}"?(me+=oe?ne()+"{{LT}}</"+se+">":"{{LT}}",xe+=5):ve.charCodeAt(0)>=55296&&ve.charCodeAt(0)<=56319||pe.charCodeAt(xe+1)>=65024&&pe.charCodeAt(xe+1)<=65039?(ge=((pe.substr(xe,12).split(emojiExp)||[])[1]||"").length||2,me+=oe&&ve!==" "?ne()+pe.substr(xe,ge)+"</"+se+">":pe.substr(xe,ge),xe+=ge-1):me+=oe&&ve!==" "?ne()+ve+"</"+se+">":ve;ee.outerHTML=me+(ue?de:""),ye&&_swapText(Se,"{{LT}}","<")},_split=function ie(ee,te,re,ne){var se=_toArray(ee.childNodes),ae=se.length,oe=_isAbsolute(te),le,he;if(ee.nodeType!==3||ae>1){for(te.absolute=!1,le=0;le<ae;le++)he=se[le],he._next=he._isFirst=he._parent=he._wordEnd=null,(he.nodeType!==3||/\S+/.test(he.nodeValue))&&(oe&&he.nodeType!==3&&_getComputedStyle(he).display==="inline"&&(he.style.display="inline-block",he.style.position="relative"),he._isSplit=!0,ie(he,te,re,ne));te.absolute=oe,ee._isSplit=!0;return}_splitRawText(ee,te,re,ne)},SplitText=function(){function ie(te,re){_coreInitted||_initCore(),this.elements=_toArray(te),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=re||{},_context$1(this),this.split(re)}var ee=ie.prototype;return ee.split=function(re){this.isSplit&&this.revert(),this.vars=re=re||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var ne=this.elements.length,se=re.tag?re.tag:re.span?"span":"div",ae=_cssClassFunc(re.wordsClass,se),oe=_cssClassFunc(re.charsClass,se),le,he,ce;--ne>-1;)ce=this.elements[ne],this._originals[ne]=ce.innerHTML,le=ce.clientHeight,he=ce.clientWidth,_split(ce,re,ae,oe),_setPositionsAfterSplit(ce,re,this.chars,this.words,this.lines,he,le);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},ee.revert=function(){var re=this._originals;if(!re)throw"revert() call wasn't scoped properly.";return this.elements.forEach(function(ne,se){return ne.innerHTML=re[se]}),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},ie.create=function(re,ne){return new ie(re,ne)},ie}();SplitText.version="3.11.4",SplitText.register=_initCore,gsapWithCSS.registerPlugin(CustomEase,SplitText);class _Counter{constructor(ee,te,re){this.loaderPoints(ee,re);let ne="M0,0,C0.126,0.382,0.454,0.191,0.454,0.408,0.454,0.938,0.818,1.001,1,1",se=$(ee);se.addClass("loading");let ae=$(".loader");ae.removeClass("complete"),ae.removeClass("loader-home"),ae.addClass("loader-all");let oe=$(".nav");oe.addClass("loading");let le=ae.find(".loader__bot"),he=$(".loader__bot--text-filled"),ce=$(".loader__counter"),de=ce.find(".loader__list").eq(0),ue=ce.find(".loader__list").eq(1),fe=de.find(".loader__item").length-1,pe=ue.find(".loader__item").length-1,xe=se.find("header").find(".f-750"),ge=new SplitText(xe,{type:"chars, words"}),_e=$(".loader__logo");const ve=()=>{le.addClass("show")},ye=()=>{le.removeClass("show")};let be=gsapWithCSS.timeline({defaults:{ease:CustomEase.create("custom",ne)},onStart:ve,onComplete:ye});be.fromTo(he,{clipPath:"inset(0 100% 0 0)"},{clipPath:"inset(0 0% 0 0)",duration:re},0).fromTo(de,{y:0},{y:0-fe*ce.height(),duration:re},"<").fromTo(ue,{y:0},{y:0-pe*ce.height(),duration:re},"<").to(_e,{opacity:1,z:3,duration:.5},"<");const we=setInterval(()=>{be.progress()>.85&&(clearInterval(we),oe.removeClass("loading"),se.removeClass("loading"),ae.addClass("complete"),gsapWithCSS.set([se],{autoAlpha:1}),gsapWithCSS.timeline({defaults:{duration:1,ease:"power3",stagger:.06}}).fromTo(ge.chars,{rotateY:90},{rotateY:0},.7),te&&te())},10)}loaderPoints(ee,te){let ne=te*1e3/4,se=$(ee).attr("loader-text-1"),ae=$(ee).attr("loader-text-2"),oe=$(ee).attr("loader-text-3"),le=$(ee).attr("loader-text-4"),he=$(".loader__points"),ce=$(".loader__points").find(".f-32"),de=$(".loader__points").find(".f-32").eq(0),ue=$(".loader__points").find(".f-32").eq(1),fe=$(".loader__points").find(".f-32").eq(2),pe=$(".loader__points").find(".f-32").eq(3);de.text(se),ue.text(ae),fe.text(oe),pe.text(le),ce.eq(0).addClass("active"),he.addClass("show");let me=1,xe=setInterval(()=>{ce.removeClass("active"),ce.eq(me).addClass("active"),me++,me>4&&(clearInterval(xe),ce.removeClass("active"),he.removeClass("show"))},ne)}}gsapWithCSS.registerPlugin(SplitText);class _SplitLoading{constructor(){let ee=$(".loader"),te=ee.find(".loader__bot--text-stroke"),re=ee.find(".loader__bot--text-filled"),ne=ee.find(".loader__bot--text").find(".f-585");new SplitText(ne,{type:"chars",charsClass:"loader__bot--text-char"}),te.find(".loader__bot--text-char").each((se,ae)=>{$(ae).css("transition-delay",`${se*.05}s`)}),re.find(".loader__bot--text-char").each((se,ae)=>{$(ae).css("transition-delay",`${se*.05}s`)})}}var commonjsGlobal$1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},fontfaceobserver_standalone={exports:{}};(function(ie){(function(){function ee(me,xe){document.addEventListener?me.addEventListener("scroll",xe,!1):me.attachEvent("scroll",xe)}function te(me){document.body?me():document.addEventListener?document.addEventListener("DOMContentLoaded",function xe(){document.removeEventListener("DOMContentLoaded",xe),me()}):document.attachEvent("onreadystatechange",function xe(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",xe),me())})}function re(me){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(me)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function ne(me,xe){me.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+xe+";"}function se(me){var xe=me.g.offsetWidth,ge=xe+100;return me.j.style.width=ge+"px",me.i.scrollLeft=ge,me.h.scrollLeft=me.h.scrollWidth+100,me.l!==xe?(me.l=xe,!0):!1}function ae(me,xe){function ge(){var ve=_e;se(ve)&&ve.g.parentNode!==null&&xe(ve.l)}var _e=me;ee(me.h,ge),ee(me.i,ge),se(me)}function oe(me,xe,ge){xe=xe||{},ge=ge||window,this.family=me,this.style=xe.style||"normal",this.weight=xe.weight||"normal",this.stretch=xe.stretch||"normal",this.context=ge}var le=null,he=null,ce=null,de=null;function ue(me){return he===null&&(fe(me)&&/Apple/.test(window.navigator.vendor)?(me=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),he=!!me&&603>parseInt(me[1],10)):he=!1),he}function fe(me){return de===null&&(de=!!me.document.fonts),de}function pe(me,xe){var ge=me.style,_e=me.weight;if(ce===null){var ve=document.createElement("div");try{ve.style.font="condensed 100px sans-serif"}catch{}ce=ve.style.font!==""}return[ge,_e,ce?me.stretch:"","100px",xe].join(" ")}oe.prototype.load=function(me,xe){var ge=this,_e=me||"BESbswy",ve=0,ye=xe||3e3,be=new Date().getTime();return new Promise(function(we,Se){if(fe(ge.context)&&!ue(ge.context)){var Te=new Promise(function(Be,Ce){function De(){new Date().getTime()-be>=ye?Ce(Error(""+ye+"ms timeout exceeded")):ge.context.document.fonts.load(pe(ge,'"'+ge.family+'"'),_e).then(function(Re){1<=Re.length?Be():setTimeout(De,25)},Ce)}De()}),Pe=new Promise(function(Be,Ce){ve=setTimeout(function(){Ce(Error(""+ye+"ms timeout exceeded"))},ye)});Promise.race([Pe,Te]).then(function(){clearTimeout(ve),we(ge)},Se)}else te(function(){function Be(){var $e;($e=ke!=-1&&Me!=-1||ke!=-1&&Ee!=-1||Me!=-1&&Ee!=-1)&&(($e=ke!=Me&&ke!=Ee&&Me!=Ee)||(le===null&&($e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),le=!!$e&&(536>parseInt($e[1],10)||parseInt($e[1],10)===536&&11>=parseInt($e[2],10))),$e=le&&(ke==Ae&&Me==Ae&&Ee==Ae||ke==Ie&&Me==Ie&&Ee==Ie||ke==Fe&&Me==Fe&&Ee==Fe)),$e=!$e),$e&&(Ne.parentNode!==null&&Ne.parentNode.removeChild(Ne),clearTimeout(ve),we(ge))}function Ce(){if(new Date().getTime()-be>=ye)Ne.parentNode!==null&&Ne.parentNode.removeChild(Ne),Se(Error(""+ye+"ms timeout exceeded"));else{var $e=ge.context.document.hidden;($e===!0||$e===void 0)&&(ke=De.g.offsetWidth,Me=Re.g.offsetWidth,Ee=Le.g.offsetWidth,Be()),ve=setTimeout(Ce,50)}}var De=new re(_e),Re=new re(_e),Le=new re(_e),ke=-1,Me=-1,Ee=-1,Ae=-1,Ie=-1,Fe=-1,Ne=document.createElement("div");Ne.dir="ltr",ne(De,pe(ge,"sans-serif")),ne(Re,pe(ge,"serif")),ne(Le,pe(ge,"monospace")),Ne.appendChild(De.g),Ne.appendChild(Re.g),Ne.appendChild(Le.g),ge.context.document.body.appendChild(Ne),Ae=De.g.offsetWidth,Ie=Re.g.offsetWidth,Fe=Le.g.offsetWidth,Ce(),ae(De,function($e){ke=$e,Be()}),ne(De,pe(ge,'"'+ge.family+'",sans-serif')),ae(Re,function($e){Me=$e,Be()}),ne(Re,pe(ge,'"'+ge.family+'",serif')),ae(Le,function($e){Ee=$e,Be()}),ne(Le,pe(ge,'"'+ge.family+'",monospace'))})})},ie.exports=oe})()})(fontfaceobserver_standalone);var FontFaceObserver=fontfaceobserver_standalone.exports;/**
* @license
* Copyright 2010-2021 Three.js Authors
* SPDX-License-Identifier: MIT
*/const REVISION="134",CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,KeepStencilOp=7680,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,GLSL3="300 es";class EventDispatcher{addEventListener(ee,te){this._listeners===void 0&&(this._listeners={});const re=this._listeners;re[ee]===void 0&&(re[ee]=[]),re[ee].indexOf(te)===-1&&re[ee].push(te)}hasEventListener(ee,te){if(this._listeners===void 0)return!1;const re=this._listeners;return re[ee]!==void 0&&re[ee].indexOf(te)!==-1}removeEventListener(ee,te){if(this._listeners===void 0)return;const ne=this._listeners[ee];if(ne!==void 0){const se=ne.indexOf(te);se!==-1&&ne.splice(se,1)}}dispatchEvent(ee){if(this._listeners===void 0)return;const re=this._listeners[ee.type];if(re!==void 0){ee.target=this;const ne=re.slice(0);for(let se=0,ae=ne.length;se<ae;se++)ne[se].call(this,ee);ee.target=null}}}const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI,_lut=[];for(let ie=0;ie<256;ie++)_lut[ie]=(ie<16?"0":"")+ie.toString(16);const hasRandomUUID=typeof crypto!="undefined"&&"randomUUID"in crypto;function generateUUID(){if(hasRandomUUID)return crypto.randomUUID().toUpperCase();const ie=Math.random()*4294967295|0,ee=Math.random()*4294967295|0,te=Math.random()*4294967295|0,re=Math.random()*4294967295|0;return(_lut[ie&255]+_lut[ie>>8&255]+_lut[ie>>16&255]+_lut[ie>>24&255]+"-"+_lut[ee&255]+_lut[ee>>8&255]+"-"+_lut[ee>>16&15|64]+_lut[ee>>24&255]+"-"+_lut[te&63|128]+_lut[te>>8&255]+"-"+_lut[te>>16&255]+_lut[te>>24&255]+_lut[re&255]+_lut[re>>8&255]+_lut[re>>16&255]+_lut[re>>24&255]).toUpperCase()}function clamp$1(ie,ee,te){return Math.max(ee,Math.min(te,ie))}function euclideanModulo(ie,ee){return(ie%ee+ee)%ee}function lerp(ie,ee,te){return(1-te)*ie+te*ee}function isPowerOfTwo(ie){return(ie&ie-1)===0&&ie!==0}function floorPowerOfTwo(ie){return Math.pow(2,Math.floor(Math.log(ie)/Math.LN2))}class Vector2{constructor(ee=0,te=0){this.x=ee,this.y=te}get width(){return this.x}set width(ee){this.x=ee}get height(){return this.y}set height(ee){this.y=ee}set(ee,te){return this.x=ee,this.y=te,this}setScalar(ee){return this.x=ee,this.y=ee,this}setX(ee){return this.x=ee,this}setY(ee){return this.y=ee,this}setComponent(ee,te){switch(ee){case 0:this.x=te;break;case 1:this.y=te;break;default:throw new Error("index is out of range: "+ee)}return this}getComponent(ee){switch(ee){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+ee)}}clone(){return new this.constructor(this.x,this.y)}copy(ee){return this.x=ee.x,this.y=ee.y,this}add(ee,te){return te!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ee,te)):(this.x+=ee.x,this.y+=ee.y,this)}addScalar(ee){return this.x+=ee,this.y+=ee,this}addVectors(ee,te){return this.x=ee.x+te.x,this.y=ee.y+te.y,this}addScaledVector(ee,te){return this.x+=ee.x*te,this.y+=ee.y*te,this}sub(ee,te){return te!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ee,te)):(this.x-=ee.x,this.y-=ee.y,this)}subScalar(ee){return this.x-=ee,this.y-=ee,this}subVectors(ee,te){return this.x=ee.x-te.x,this.y=ee.y-te.y,this}multiply(ee){return this.x*=ee.x,this.y*=ee.y,this}multiplyScalar(ee){return this.x*=ee,this.y*=ee,this}divide(ee){return this.x/=ee.x,this.y/=ee.y,this}divideScalar(ee){return this.multiplyScalar(1/ee)}applyMatrix3(ee){const te=this.x,re=this.y,ne=ee.elements;return this.x=ne[0]*te+ne[3]*re+ne[6],this.y=ne[1]*te+ne[4]*re+ne[7],this}min(ee){return this.x=Math.min(this.x,ee.x),this.y=Math.min(this.y,ee.y),this}max(ee){return this.x=Math.max(this.x,ee.x),this.y=Math.max(this.y,ee.y),this}clamp(ee,te){return this.x=Math.max(ee.x,Math.min(te.x,this.x)),this.y=Math.max(ee.y,Math.min(te.y,this.y)),this}clampScalar(ee,te){return this.x=Math.max(ee,Math.min(te,this.x)),this.y=Math.max(ee,Math.min(te,this.y)),this}clampLength(ee,te){const re=this.length();return this.divideScalar(re||1).multiplyScalar(Math.max(ee,Math.min(te,re)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(ee){return this.x*ee.x+this.y*ee.y}cross(ee){return this.x*ee.y-this.y*ee.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(ee){return Math.sqrt(this.distanceToSquared(ee))}distanceToSquared(ee){const te=this.x-ee.x,re=this.y-ee.y;return te*te+re*re}manhattanDistanceTo(ee){return Math.abs(this.x-ee.x)+Math.abs(this.y-ee.y)}setLength(ee){return this.normalize().multiplyScalar(ee)}lerp(ee,te){return this.x+=(ee.x-this.x)*te,this.y+=(ee.y-this.y)*te,this}lerpVectors(ee,te,re){return this.x=ee.x+(te.x-ee.x)*re,this.y=ee.y+(te.y-ee.y)*re,this}equals(ee){return ee.x===this.x&&ee.y===this.y}fromArray(ee,te=0){return this.x=ee[te],this.y=ee[te+1],this}toArray(ee=[],te=0){return ee[te]=this.x,ee[te+1]=this.y,ee}fromBufferAttribute(ee,te,re){return re!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=ee.getX(te),this.y=ee.getY(te),this}rotateAround(ee,te){const re=Math.cos(te),ne=Math.sin(te),se=this.x-ee.x,ae=this.y-ee.y;return this.x=se*re-ae*ne+ee.x,this.y=se*ne+ae*re+ee.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Vector2.prototype.isVector2=!0;class Matrix3{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(ee,te,re,ne,se,ae,oe,le,he){const ce=this.elements;return ce[0]=ee,ce[1]=ne,ce[2]=oe,ce[3]=te,ce[4]=se,ce[5]=le,ce[6]=re,ce[7]=ae,ce[8]=he,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(ee){const te=this.elements,re=ee.elements;return te[0]=re[0],te[1]=re[1],te[2]=re[2],te[3]=re[3],te[4]=re[4],te[5]=re[5],te[6]=re[6],te[7]=re[7],te[8]=re[8],this}extractBasis(ee,te,re){return ee.setFromMatrix3Column(this,0),te.setFromMatrix3Column(this,1),re.setFromMatrix3Column(this,2),this}setFromMatrix4(ee){const te=ee.elements;return this.set(te[0],te[4],te[8],te[1],te[5],te[9],te[2],te[6],te[10]),this}multiply(ee){return this.multiplyMatrices(this,ee)}premultiply(ee){return this.multiplyMatrices(ee,this)}multiplyMatrices(ee,te){const re=ee.elements,ne=te.elements,se=this.elements,ae=re[0],oe=re[3],le=re[6],he=re[1],ce=re[4],de=re[7],ue=re[2],fe=re[5],pe=re[8],me=ne[0],xe=ne[3],ge=ne[6],_e=ne[1],ve=ne[4],ye=ne[7],be=ne[2],we=ne[5],Se=ne[8];return se[0]=ae*me+oe*_e+le*be,se[3]=ae*xe+oe*ve+le*we,se[6]=ae*ge+oe*ye+le*Se,se[1]=he*me+ce*_e+de*be,se[4]=he*xe+ce*ve+de*we,se[7]=he*ge+ce*ye+de*Se,se[2]=ue*me+fe*_e+pe*be,se[5]=ue*xe+fe*ve+pe*we,se[8]=ue*ge+fe*ye+pe*Se,this}multiplyScalar(ee){const te=this.elements;return te[0]*=ee,te[3]*=ee,te[6]*=ee,te[1]*=ee,te[4]*=ee,te[7]*=ee,te[2]*=ee,te[5]*=ee,te[8]*=ee,this}determinant(){const ee=this.elements,te=ee[0],re=ee[1],ne=ee[2],se=ee[3],ae=ee[4],oe=ee[5],le=ee[6],he=ee[7],ce=ee[8];return te*ae*ce-te*oe*he-re*se*ce+re*oe*le+ne*se*he-ne*ae*le}invert(){const ee=this.elements,te=ee[0],re=ee[1],ne=ee[2],se=ee[3],ae=ee[4],oe=ee[5],le=ee[6],he=ee[7],ce=ee[8],de=ce*ae-oe*he,ue=oe*le-ce*se,fe=he*se-ae*le,pe=te*de+re*ue+ne*fe;if(pe===0)return this.set(0,0,0,0,0,0,0,0,0);const me=1/pe;return ee[0]=de*me,ee[1]=(ne*he-ce*re)*me,ee[2]=(oe*re-ne*ae)*me,ee[3]=ue*me,ee[4]=(ce*te-ne*le)*me,ee[5]=(ne*se-oe*te)*me,ee[6]=fe*me,ee[7]=(re*le-he*te)*me,ee[8]=(ae*te-re*se)*me,this}transpose(){let ee;const te=this.elements;return ee=te[1],te[1]=te[3],te[3]=ee,ee=te[2],te[2]=te[6],te[6]=ee,ee=te[5],te[5]=te[7],te[7]=ee,this}getNormalMatrix(ee){return this.setFromMatrix4(ee).invert().transpose()}transposeIntoArray(ee){const te=this.elements;return ee[0]=te[0],ee[1]=te[3],ee[2]=te[6],ee[3]=te[1],ee[4]=te[4],ee[5]=te[7],ee[6]=te[2],ee[7]=te[5],ee[8]=te[8],this}setUvTransform(ee,te,re,ne,se,ae,oe){const le=Math.cos(se),he=Math.sin(se);return this.set(re*le,re*he,-re*(le*ae+he*oe)+ae+ee,-ne*he,ne*le,-ne*(-he*ae+le*oe)+oe+te,0,0,1),this}scale(ee,te){const re=this.elements;return re[0]*=ee,re[3]*=ee,re[6]*=ee,re[1]*=te,re[4]*=te,re[7]*=te,this}rotate(ee){const te=Math.cos(ee),re=Math.sin(ee),ne=this.elements,se=ne[0],ae=ne[3],oe=ne[6],le=ne[1],he=ne[4],ce=ne[7];return ne[0]=te*se+re*le,ne[3]=te*ae+re*he,ne[6]=te*oe+re*ce,ne[1]=-re*se+te*le,ne[4]=-re*ae+te*he,ne[7]=-re*oe+te*ce,this}translate(ee,te){const re=this.elements;return re[0]+=ee*re[2],re[3]+=ee*re[5],re[6]+=ee*re[8],re[1]+=te*re[2],re[4]+=te*re[5],re[7]+=te*re[8],this}equals(ee){const te=this.elements,re=ee.elements;for(let ne=0;ne<9;ne++)if(te[ne]!==re[ne])return!1;return!0}fromArray(ee,te=0){for(let re=0;re<9;re++)this.elements[re]=ee[re+te];return this}toArray(ee=[],te=0){const re=this.elements;return ee[te]=re[0],ee[te+1]=re[1],ee[te+2]=re[2],ee[te+3]=re[3],ee[te+4]=re[4],ee[te+5]=re[5],ee[te+6]=re[6],ee[te+7]=re[7],ee[te+8]=re[8],ee}clone(){return new this.constructor().fromArray(this.elements)}}Matrix3.prototype.isMatrix3=!0;function arrayMax(ie){if(ie.length===0)return-1/0;let ee=ie[0];for(let te=1,re=ie.length;te<re;++te)ie[te]>ee&&(ee=ie[te]);return ee}function createElementNS(ie){return document.createElementNS("http://www.w3.org/1999/xhtml",ie)}function hashString(ie,ee=0){let te=3735928559^ee,re=1103547991^ee;for(let ne=0,se;ne<ie.length;ne++)se=ie.charCodeAt(ne),te=Math.imul(te^se,2654435761),re=Math.imul(re^se,1597334677);return te=Math.imul(te^te>>>16,2246822507)^Math.imul(re^re>>>13,3266489909),re=Math.imul(re^re>>>16,2246822507)^Math.imul(te^te>>>13,3266489909),4294967296*(2097151&re)+(te>>>0)}let _canvas;class ImageUtils{static getDataURL(ee){if(/^data:/i.test(ee.src)||typeof HTMLCanvasElement=="undefined")return ee.src;let te;if(ee instanceof HTMLCanvasElement)te=ee;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=ee.width,_canvas.height=ee.height;const re=_canvas.getContext("2d");ee instanceof ImageData?re.putImageData(ee,0,0):re.drawImage(ee,0,0,ee.width,ee.height),te=_canvas}return te.width>2048||te.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",ee),te.toDataURL("image/jpeg",.6)):te.toDataURL("image/png")}}let textureId=0;class Texture$1 extends EventDispatcher{constructor(ee=Texture$1.DEFAULT_IMAGE,te=Texture$1.DEFAULT_MAPPING,re=ClampToEdgeWrapping,ne=ClampToEdgeWrapping,se=LinearFilter,ae=LinearMipmapLinearFilter,oe=RGBAFormat,le=UnsignedByteType,he=1,ce=LinearEncoding){super(),Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID(),this.name="",this.image=ee,this.mipmaps=[],this.mapping=te,this.wrapS=re,this.wrapT=ne,this.magFilter=se,this.minFilter=ae,this.anisotropy=he,this.format=oe,this.internalFormat=null,this.type=le,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=ce,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(ee){return this.name=ee.name,this.image=ee.image,this.mipmaps=ee.mipmaps.slice(0),this.mapping=ee.mapping,this.wrapS=ee.wrapS,this.wrapT=ee.wrapT,this.magFilter=ee.magFilter,this.minFilter=ee.minFilter,this.anisotropy=ee.anisotropy,this.format=ee.format,this.internalFormat=ee.internalFormat,this.type=ee.type,this.offset.copy(ee.offset),this.repeat.copy(ee.repeat),this.center.copy(ee.center),this.rotation=ee.rotation,this.matrixAutoUpdate=ee.matrixAutoUpdate,this.matrix.copy(ee.matrix),this.generateMipmaps=ee.generateMipmaps,this.premultiplyAlpha=ee.premultiplyAlpha,this.flipY=ee.flipY,this.unpackAlignment=ee.unpackAlignment,this.encoding=ee.encoding,this.userData=JSON.parse(JSON.stringify(ee.userData)),this}toJSON(ee){const te=ee===void 0||typeof ee=="string";if(!te&&ee.textures[this.uuid]!==void 0)return ee.textures[this.uuid];const re={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const ne=this.image;if(ne.uuid===void 0&&(ne.uuid=generateUUID()),!te&&ee.images[ne.uuid]===void 0){let se;if(Array.isArray(ne)){se=[];for(let ae=0,oe=ne.length;ae<oe;ae++)ne[ae].isDataTexture?se.push(serializeImage(ne[ae].image)):se.push(serializeImage(ne[ae]))}else se=serializeImage(ne);ee.images[ne.uuid]={uuid:ne.uuid,url:se}}re.image=ne.uuid}return JSON.stringify(this.userData)!=="{}"&&(re.userData=this.userData),te||(ee.textures[this.uuid]=re),re}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(ee){if(this.mapping!==UVMapping)return ee;if(ee.applyMatrix3(this.matrix),ee.x<0||ee.x>1)switch(this.wrapS){case RepeatWrapping:ee.x=ee.x-Math.floor(ee.x);break;case ClampToEdgeWrapping:ee.x=ee.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(ee.x)%2)===1?ee.x=Math.ceil(ee.x)-ee.x:ee.x=ee.x-Math.floor(ee.x);break}if(ee.y<0||ee.y>1)switch(this.wrapT){case RepeatWrapping:ee.y=ee.y-Math.floor(ee.y);break;case ClampToEdgeWrapping:ee.y=ee.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(ee.y)%2)===1?ee.y=Math.ceil(ee.y)-ee.y:ee.y=ee.y-Math.floor(ee.y);break}return this.flipY&&(ee.y=1-ee.y),ee}set needsUpdate(ee){ee===!0&&this.version++}}Texture$1.DEFAULT_IMAGE=void 0,Texture$1.DEFAULT_MAPPING=UVMapping,Texture$1.prototype.isTexture=!0;function serializeImage(ie){return typeof HTMLImageElement!="undefined"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&ie instanceof ImageBitmap?ImageUtils.getDataURL(ie):ie.data?{data:Array.prototype.slice.call(ie.data),width:ie.width,height:ie.height,type:ie.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Vector4{constructor(ee=0,te=0,re=0,ne=1){this.x=ee,this.y=te,this.z=re,this.w=ne}get width(){return this.z}set width(ee){this.z=ee}get height(){return this.w}set height(ee){this.w=ee}set(ee,te,re,ne){return this.x=ee,this.y=te,this.z=re,this.w=ne,this}setScalar(ee){return this.x=ee,this.y=ee,this.z=ee,this.w=ee,this}setX(ee){return this.x=ee,this}setY(ee){return this.y=ee,this}setZ(ee){return this.z=ee,this}setW(ee){return this.w=ee,this}setComponent(ee,te){switch(ee){case 0:this.x=te;break;case 1:this.y=te;break;case 2:this.z=te;break;case 3:this.w=te;break;default:throw new Error("index is out of range: "+ee)}return this}getComponent(ee){switch(ee){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+ee)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(ee){return this.x=ee.x,this.y=ee.y,this.z=ee.z,this.w=ee.w!==void 0?ee.w:1,this}add(ee,te){return te!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ee,te)):(this.x+=ee.x,this.y+=ee.y,this.z+=ee.z,this.w+=ee.w,this)}addScalar(ee){return this.x+=ee,this.y+=ee,this.z+=ee,this.w+=ee,this}addVectors(ee,te){return this.x=ee.x+te.x,this.y=ee.y+te.y,this.z=ee.z+te.z,this.w=ee.w+te.w,this}addScaledVector(ee,te){return this.x+=ee.x*te,this.y+=ee.y*te,this.z+=ee.z*te,this.w+=ee.w*te,this}sub(ee,te){return te!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ee,te)):(this.x-=ee.x,this.y-=ee.y,this.z-=ee.z,this.w-=ee.w,this)}subScalar(ee){return this.x-=ee,this.y-=ee,this.z-=ee,this.w-=ee,this}subVectors(ee,te){return this.x=ee.x-te.x,this.y=ee.y-te.y,this.z=ee.z-te.z,this.w=ee.w-te.w,this}multiply(ee){return this.x*=ee.x,this.y*=ee.y,this.z*=ee.z,this.w*=ee.w,this}multiplyScalar(ee){return this.x*=ee,this.y*=ee,this.z*=ee,this.w*=ee,this}applyMatrix4(ee){const te=this.x,re=this.y,ne=this.z,se=this.w,ae=ee.elements;return this.x=ae[0]*te+ae[4]*re+ae[8]*ne+ae[12]*se,this.y=ae[1]*te+ae[5]*re+ae[9]*ne+ae[13]*se,this.z=ae[2]*te+ae[6]*re+ae[10]*ne+ae[14]*se,this.w=ae[3]*te+ae[7]*re+ae[11]*ne+ae[15]*se,this}divideScalar(ee){return this.multiplyScalar(1/ee)}setAxisAngleFromQuaternion(ee){this.w=2*Math.acos(ee.w);const te=Math.sqrt(1-ee.w*ee.w);return te<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=ee.x/te,this.y=ee.y/te,this.z=ee.z/te),this}setAxisAngleFromRotationMatrix(ee){let te,re,ne,se;const le=ee.elements,he=le[0],ce=le[4],de=le[8],ue=le[1],fe=le[5],pe=le[9],me=le[2],xe=le[6],ge=le[10];if(Math.abs(ce-ue)<.01&&Math.abs(de-me)<.01&&Math.abs(pe-xe)<.01){if(Math.abs(ce+ue)<.1&&Math.abs(de+me)<.1&&Math.abs(pe+xe)<.1&&Math.abs(he+fe+ge-3)<.1)return this.set(1,0,0,0),this;te=Math.PI;const ve=(he+1)/2,ye=(fe+1)/2,be=(ge+1)/2,we=(ce+ue)/4,Se=(de+me)/4,Te=(pe+xe)/4;return ve>ye&&ve>be?ve<.01?(re=0,ne=.707106781,se=.707106781):(re=Math.sqrt(ve),ne=we/re,se=Se/re):ye>be?ye<.01?(re=.707106781,ne=0,se=.707106781):(ne=Math.sqrt(ye),re=we/ne,se=Te/ne):be<.01?(re=.707106781,ne=.707106781,se=0):(se=Math.sqrt(be),re=Se/se,ne=Te/se),this.set(re,ne,se,te),this}let _e=Math.sqrt((xe-pe)*(xe-pe)+(de-me)*(de-me)+(ue-ce)*(ue-ce));return Math.abs(_e)<.001&&(_e=1),this.x=(xe-pe)/_e,this.y=(de-me)/_e,this.z=(ue-ce)/_e,this.w=Math.acos((he+fe+ge-1)/2),this}min(ee){return this.x=Math.min(this.x,ee.x),this.y=Math.min(this.y,ee.y),this.z=Math.min(this.z,ee.z),this.w=Math.min(this.w,ee.w),this}max(ee){return this.x=Math.max(this.x,ee.x),this.y=Math.max(this.y,ee.y),this.z=Math.max(this.z,ee.z),this.w=Math.max(this.w,ee.w),this}clamp(ee,te){return this.x=Math.max(ee.x,Math.min(te.x,this.x)),this.y=Math.max(ee.y,Math.min(te.y,this.y)),this.z=Math.max(ee.z,Math.min(te.z,this.z)),this.w=Math.max(ee.w,Math.min(te.w,this.w)),this}clampScalar(ee,te){return this.x=Math.max(ee,Math.min(te,this.x)),this.y=Math.max(ee,Math.min(te,this.y)),this.z=Math.max(ee,Math.min(te,this.z)),this.w=Math.max(ee,Math.min(te,this.w)),this}clampLength(ee,te){const re=this.length();return this.divideScalar(re||1).multiplyScalar(Math.max(ee,Math.min(te,re)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(ee){return this.x*ee.x+this.y*ee.y+this.z*ee.z+this.w*ee.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(ee){return this.normalize().multiplyScalar(ee)}lerp(ee,te){return this.x+=(ee.x-this.x)*te,this.y+=(ee.y-this.y)*te,this.z+=(ee.z-this.z)*te,this.w+=(ee.w-this.w)*te,this}lerpVectors(ee,te,re){return this.x=ee.x+(te.x-ee.x)*re,this.y=ee.y+(te.y-ee.y)*re,this.z=ee.z+(te.z-ee.z)*re,this.w=ee.w+(te.w-ee.w)*re,this}equals(ee){return ee.x===this.x&&ee.y===this.y&&ee.z===this.z&&ee.w===this.w}fromArray(ee,te=0){return this.x=ee[te],this.y=ee[te+1],this.z=ee[te+2],this.w=ee[te+3],this}toArray(ee=[],te=0){return ee[te]=this.x,ee[te+1]=this.y,ee[te+2]=this.z,ee[te+3]=this.w,ee}fromBufferAttribute(ee,te,re){return re!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=ee.getX(te),this.y=ee.getY(te),this.z=ee.getZ(te),this.w=ee.getW(te),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Vector4.prototype.isVector4=!0;class WebGLRenderTarget extends EventDispatcher{constructor(ee,te,re={}){super(),this.width=ee,this.height=te,this.depth=1,this.scissor=new Vector4(0,0,ee,te),this.scissorTest=!1,this.viewport=new Vector4(0,0,ee,te),this.texture=new Texture$1(void 0,re.mapping,re.wrapS,re.wrapT,re.magFilter,re.minFilter,re.format,re.type,re.anisotropy,re.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:ee,height:te,depth:1},this.texture.generateMipmaps=re.generateMipmaps!==void 0?re.generateMipmaps:!1,this.texture.internalFormat=re.internalFormat!==void 0?re.internalFormat:null,this.texture.minFilter=re.minFilter!==void 0?re.minFilter:LinearFilter,this.depthBuffer=re.depthBuffer!==void 0?re.depthBuffer:!0,this.stencilBuffer=re.stencilBuffer!==void 0?re.stencilBuffer:!1,this.depthTexture=re.depthTexture!==void 0?re.depthTexture:null}setTexture(ee){ee.image={width:this.width,height:this.height,depth:this.depth},this.texture=ee}setSize(ee,te,re=1){(this.width!==ee||this.height!==te||this.depth!==re)&&(this.width=ee,this.height=te,this.depth=re,this.texture.image.width=ee,this.texture.image.height=te,this.texture.image.depth=re,this.dispose()),this.viewport.set(0,0,ee,te),this.scissor.set(0,0,ee,te)}clone(){return new this.constructor().copy(this)}copy(ee){return this.width=ee.width,this.height=ee.height,this.depth=ee.depth,this.viewport.copy(ee.viewport),this.texture=ee.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=ee.depthBuffer,this.stencilBuffer=ee.stencilBuffer,this.depthTexture=ee.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}WebGLRenderTarget.prototype.isWebGLRenderTarget=!0;class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(ee,te,re){super(ee,te);const ne=this.texture;this.texture=[];for(let se=0;se<re;se++)this.texture[se]=ne.clone()}setSize(ee,te,re=1){if(this.width!==ee||this.height!==te||this.depth!==re){this.width=ee,this.height=te,this.depth=re;for(let ne=0,se=this.texture.length;ne<se;ne++)this.texture[ne].image.width=ee,this.texture[ne].image.height=te,this.texture[ne].image.depth=re;this.dispose()}return this.viewport.set(0,0,ee,te),this.scissor.set(0,0,ee,te),this}copy(ee){this.dispose(),this.width=ee.width,this.height=ee.height,this.depth=ee.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=ee.depthBuffer,this.stencilBuffer=ee.stencilBuffer,this.depthTexture=ee.depthTexture,this.texture.length=0;for(let te=0,re=ee.texture.length;te<re;te++)this.texture[te]=ee.texture[te].clone();return this}}WebGLMultipleRenderTargets.prototype.isWebGLMultipleRenderTargets=!0;class WebGLMultisampleRenderTarget extends WebGLRenderTarget{constructor(ee,te,re){super(ee,te,re),this.samples=4}copy(ee){return super.copy.call(this,ee),this.samples=ee.samples,this}}WebGLMultisampleRenderTarget.prototype.isWebGLMultisampleRenderTarget=!0;class Quaternion{constructor(ee=0,te=0,re=0,ne=1){this._x=ee,this._y=te,this._z=re,this._w=ne}static slerp(ee,te,re,ne){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),re.slerpQuaternions(ee,te,ne)}static slerpFlat(ee,te,re,ne,se,ae,oe){let le=re[ne+0],he=re[ne+1],ce=re[ne+2],de=re[ne+3];const ue=se[ae+0],fe=se[ae+1],pe=se[ae+2],me=se[ae+3];if(oe===0){ee[te+0]=le,ee[te+1]=he,ee[te+2]=ce,ee[te+3]=de;return}if(oe===1){ee[te+0]=ue,ee[te+1]=fe,ee[te+2]=pe,ee[te+3]=me;return}if(de!==me||le!==ue||he!==fe||ce!==pe){let xe=1-oe;const ge=le*ue+he*fe+ce*pe+de*me,_e=ge>=0?1:-1,ve=1-ge*ge;if(ve>Number.EPSILON){const be=Math.sqrt(ve),we=Math.atan2(be,ge*_e);xe=Math.sin(xe*we)/be,oe=Math.sin(oe*we)/be}const ye=oe*_e;if(le=le*xe+ue*ye,he=he*xe+fe*ye,ce=ce*xe+pe*ye,de=de*xe+me*ye,xe===1-oe){const be=1/Math.sqrt(le*le+he*he+ce*ce+de*de);le*=be,he*=be,ce*=be,de*=be}}ee[te]=le,ee[te+1]=he,ee[te+2]=ce,ee[te+3]=de}static multiplyQuaternionsFlat(ee,te,re,ne,se,ae){const oe=re[ne],le=re[ne+1],he=re[ne+2],ce=re[ne+3],de=se[ae],ue=se[ae+1],fe=se[ae+2],pe=se[ae+3];return ee[te]=oe*pe+ce*de+le*fe-he*ue,ee[te+1]=le*pe+ce*ue+he*de-oe*fe,ee[te+2]=he*pe+ce*fe+oe*ue-le*de,ee[te+3]=ce*pe-oe*de-le*ue-he*fe,ee}get x(){return this._x}set x(ee){this._x=ee,this._onChangeCallback()}get y(){return this._y}set y(ee){this._y=ee,this._onChangeCallback()}get z(){return this._z}set z(ee){this._z=ee,this._onChangeCallback()}get w(){return this._w}set w(ee){this._w=ee,this._onChangeCallback()}set(ee,te,re,ne){return this._x=ee,this._y=te,this._z=re,this._w=ne,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(ee){return this._x=ee.x,this._y=ee.y,this._z=ee.z,this._w=ee.w,this._onChangeCallback(),this}setFromEuler(ee,te){if(!(ee&&ee.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const re=ee._x,ne=ee._y,se=ee._z,ae=ee._order,oe=Math.cos,le=Math.sin,he=oe(re/2),ce=oe(ne/2),de=oe(se/2),ue=le(re/2),fe=le(ne/2),pe=le(se/2);switch(ae){case"XYZ":this._x=ue*ce*de+he*fe*pe,this._y=he*fe*de-ue*ce*pe,this._z=he*ce*pe+ue*fe*de,this._w=he*ce*de-ue*fe*pe;break;case"YXZ":this._x=ue*ce*de+he*fe*pe,this._y=he*fe*de-ue*ce*pe,this._z=he*ce*pe-ue*fe*de,this._w=he*ce*de+ue*fe*pe;break;case"ZXY":this._x=ue*ce*de-he*fe*pe,this._y=he*fe*de+ue*ce*pe,this._z=he*ce*pe+ue*fe*de,this._w=he*ce*de-ue*fe*pe;break;case"ZYX":this._x=ue*ce*de-he*fe*pe,this._y=he*fe*de+ue*ce*pe,this._z=he*ce*pe-ue*fe*de,this._w=he*ce*de+ue*fe*pe;break;case"YZX":this._x=ue*ce*de+he*fe*pe,this._y=he*fe*de+ue*ce*pe,this._z=he*ce*pe-ue*fe*de,this._w=he*ce*de-ue*fe*pe;break;case"XZY":this._x=ue*ce*de-he*fe*pe,this._y=he*fe*de-ue*ce*pe,this._z=he*ce*pe+ue*fe*de,this._w=he*ce*de+ue*fe*pe;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+ae)}return te!==!1&&this._onChangeCallback(),this}setFromAxisAngle(ee,te){const re=te/2,ne=Math.sin(re);return this._x=ee.x*ne,this._y=ee.y*ne,this._z=ee.z*ne,this._w=Math.cos(re),this._onChangeCallback(),this}setFromRotationMatrix(ee){const te=ee.elements,re=te[0],ne=te[4],se=te[8],ae=te[1],oe=te[5],le=te[9],he=te[2],ce=te[6],de=te[10],ue=re+oe+de;if(ue>0){const fe=.5/Math.sqrt(ue+1);this._w=.25/fe,this._x=(ce-le)*fe,this._y=(se-he)*fe,this._z=(ae-ne)*fe}else if(re>oe&&re>de){const fe=2*Math.sqrt(1+re-oe-de);this._w=(ce-le)/fe,this._x=.25*fe,this._y=(ne+ae)/fe,this._z=(se+he)/fe}else if(oe>de){const fe=2*Math.sqrt(1+oe-re-de);this._w=(se-he)/fe,this._x=(ne+ae)/fe,this._y=.25*fe,this._z=(le+ce)/fe}else{const fe=2*Math.sqrt(1+de-re-oe);this._w=(ae-ne)/fe,this._x=(se+he)/fe,this._y=(le+ce)/fe,this._z=.25*fe}return this._onChangeCallback(),this}setFromUnitVectors(ee,te){let re=ee.dot(te)+1;return re<Number.EPSILON?(re=0,Math.abs(ee.x)>Math.abs(ee.z)?(this._x=-ee.y,this._y=ee.x,this._z=0,this._w=re):(this._x=0,this._y=-ee.z,this._z=ee.y,this._w=re)):(this._x=ee.y*te.z-ee.z*te.y,this._y=ee.z*te.x-ee.x*te.z,this._z=ee.x*te.y-ee.y*te.x,this._w=re),this.normalize()}angleTo(ee){return 2*Math.acos(Math.abs(clamp$1(this.dot(ee),-1,1)))}rotateTowards(ee,te){const re=this.angleTo(ee);if(re===0)return this;const ne=Math.min(1,te/re);return this.slerp(ee,ne),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(ee){return this._x*ee._x+this._y*ee._y+this._z*ee._z+this._w*ee._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let ee=this.length();return ee===0?(this._x=0,this._y=0,this._z=0,this._w=1):(ee=1/ee,this._x=this._x*ee,this._y=this._y*ee,this._z=this._z*ee,this._w=this._w*ee),this._onChangeCallback(),this}multiply(ee,te){return te!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(ee,te)):this.multiplyQuaternions(this,ee)}premultiply(ee){return this.multiplyQuaternions(ee,this)}multiplyQuaternions(ee,te){const re=ee._x,ne=ee._y,se=ee._z,ae=ee._w,oe=te._x,le=te._y,he=te._z,ce=te._w;return this._x=re*ce+ae*oe+ne*he-se*le,this._y=ne*ce+ae*le+se*oe-re*he,this._z=se*ce+ae*he+re*le-ne*oe,this._w=ae*ce-re*oe-ne*le-se*he,this._onChangeCallback(),this}slerp(ee,te){if(te===0)return this;if(te===1)return this.copy(ee);const re=this._x,ne=this._y,se=this._z,ae=this._w;let oe=ae*ee._w+re*ee._x+ne*ee._y+se*ee._z;if(oe<0?(this._w=-ee._w,this._x=-ee._x,this._y=-ee._y,this._z=-ee._z,oe=-oe):this.copy(ee),oe>=1)return this._w=ae,this._x=re,this._y=ne,this._z=se,this;const le=1-oe*oe;if(le<=Number.EPSILON){const fe=1-te;return this._w=fe*ae+te*this._w,this._x=fe*re+te*this._x,this._y=fe*ne+te*this._y,this._z=fe*se+te*this._z,this.normalize(),this._onChangeCallback(),this}const he=Math.sqrt(le),ce=Math.atan2(he,oe),de=Math.sin((1-te)*ce)/he,ue=Math.sin(te*ce)/he;return this._w=ae*de+this._w*ue,this._x=re*de+this._x*ue,this._y=ne*de+this._y*ue,this._z=se*de+this._z*ue,this._onChangeCallback(),this}slerpQuaternions(ee,te,re){this.copy(ee).slerp(te,re)}random(){const ee=Math.random(),te=Math.sqrt(1-ee),re=Math.sqrt(ee),ne=2*Math.PI*Math.random(),se=2*Math.PI*Math.random();return this.set(te*Math.cos(ne),re*Math.sin(se),re*Math.cos(se),te*Math.sin(ne))}equals(ee){return ee._x===this._x&&ee._y===this._y&&ee._z===this._z&&ee._w===this._w}fromArray(ee,te=0){return this._x=ee[te],this._y=ee[te+1],this._z=ee[te+2],this._w=ee[te+3],this._onChangeCallback(),this}toArray(ee=[],te=0){return ee[te]=this._x,ee[te+1]=this._y,ee[te+2]=this._z,ee[te+3]=this._w,ee}fromBufferAttribute(ee,te){return this._x=ee.getX(te),this._y=ee.getY(te),this._z=ee.getZ(te),this._w=ee.getW(te),this}_onChange(ee){return this._onChangeCallback=ee,this}_onChangeCallback(){}}Quaternion.prototype.isQuaternion=!0;class Vector3{constructor(ee=0,te=0,re=0){this.x=ee,this.y=te,this.z=re}set(ee,te,re){return re===void 0&&(re=this.z),this.x=ee,this.y=te,this.z=re,this}setScalar(ee){return this.x=ee,this.y=ee,this.z=ee,this}setX(ee){return this.x=ee,this}setY(ee){return this.y=ee,this}setZ(ee){return this.z=ee,this}setComponent(ee,te){switch(ee){case 0:this.x=te;break;case 1:this.y=te;break;case 2:this.z=te;break;default:throw new Error("index is out of range: "+ee)}return this}getComponent(ee){switch(ee){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+ee)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(ee){return this.x=ee.x,this.y=ee.y,this.z=ee.z,this}add(ee,te){return te!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ee,te)):(this.x+=ee.x,this.y+=ee.y,this.z+=ee.z,this)}addScalar(ee){return this.x+=ee,this.y+=ee,this.z+=ee,this}addVectors(ee,te){return this.x=ee.x+te.x,this.y=ee.y+te.y,this.z=ee.z+te.z,this}addScaledVector(ee,te){return this.x+=ee.x*te,this.y+=ee.y*te,this.z+=ee.z*te,this}sub(ee,te){return te!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ee,te)):(this.x-=ee.x,this.y-=ee.y,this.z-=ee.z,this)}subScalar(ee){return this.x-=ee,this.y-=ee,this.z-=ee,this}subVectors(ee,te){return this.x=ee.x-te.x,this.y=ee.y-te.y,this.z=ee.z-te.z,this}multiply(ee,te){return te!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(ee,te)):(this.x*=ee.x,this.y*=ee.y,this.z*=ee.z,this)}multiplyScalar(ee){return this.x*=ee,this.y*=ee,this.z*=ee,this}multiplyVectors(ee,te){return this.x=ee.x*te.x,this.y=ee.y*te.y,this.z=ee.z*te.z,this}applyEuler(ee){return ee&&ee.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion$4.setFromEuler(ee))}applyAxisAngle(ee,te){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(ee,te))}applyMatrix3(ee){const te=this.x,re=this.y,ne=this.z,se=ee.elements;return this.x=se[0]*te+se[3]*re+se[6]*ne,this.y=se[1]*te+se[4]*re+se[7]*ne,this.z=se[2]*te+se[5]*re+se[8]*ne,this}applyNormalMatrix(ee){return this.applyMatrix3(ee).normalize()}applyMatrix4(ee){const te=this.x,re=this.y,ne=this.z,se=ee.elements,ae=1/(se[3]*te+se[7]*re+se[11]*ne+se[15]);return this.x=(se[0]*te+se[4]*re+se[8]*ne+se[12])*ae,this.y=(se[1]*te+se[5]*re+se[9]*ne+se[13])*ae,this.z=(se[2]*te+se[6]*re+se[10]*ne+se[14])*ae,this}applyQuaternion(ee){const te=this.x,re=this.y,ne=this.z,se=ee.x,ae=ee.y,oe=ee.z,le=ee.w,he=le*te+ae*ne-oe*re,ce=le*re+oe*te-se*ne,de=le*ne+se*re-ae*te,ue=-se*te-ae*re-oe*ne;return this.x=he*le+ue*-se+ce*-oe-de*-ae,this.y=ce*le+ue*-ae+de*-se-he*-oe,this.z=de*le+ue*-oe+he*-ae-ce*-se,this}project(ee){return this.applyMatrix4(ee.matrixWorldInverse).applyMatrix4(ee.projectionMatrix)}unproject(ee){return this.applyMatrix4(ee.projectionMatrixInverse).applyMatrix4(ee.matrixWorld)}transformDirection(ee){const te=this.x,re=this.y,ne=this.z,se=ee.elements;return this.x=se[0]*te+se[4]*re+se[8]*ne,this.y=se[1]*te+se[5]*re+se[9]*ne,this.z=se[2]*te+se[6]*re+se[10]*ne,this.normalize()}divide(ee){return this.x/=ee.x,this.y/=ee.y,this.z/=ee.z,this}divideScalar(ee){return this.multiplyScalar(1/ee)}min(ee){return this.x=Math.min(this.x,ee.x),this.y=Math.min(this.y,ee.y),this.z=Math.min(this.z,ee.z),this}max(ee){return this.x=Math.max(this.x,ee.x),this.y=Math.max(this.y,ee.y),this.z=Math.max(this.z,ee.z),this}clamp(ee,te){return this.x=Math.max(ee.x,Math.min(te.x,this.x)),this.y=Math.max(ee.y,Math.min(te.y,this.y)),this.z=Math.max(ee.z,Math.min(te.z,this.z)),this}clampScalar(ee,te){return this.x=Math.max(ee,Math.min(te,this.x)),this.y=Math.max(ee,Math.min(te,this.y)),this.z=Math.max(ee,Math.min(te,this.z)),this}clampLength(ee,te){const re=this.length();return this.divideScalar(re||1).multiplyScalar(Math.max(ee,Math.min(te,re)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(ee){return this.x*ee.x+this.y*ee.y+this.z*ee.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(ee){return this.normalize().multiplyScalar(ee)}lerp(ee,te){return this.x+=(ee.x-this.x)*te,this.y+=(ee.y-this.y)*te,this.z+=(ee.z-this.z)*te,this}lerpVectors(ee,te,re){return this.x=ee.x+(te.x-ee.x)*re,this.y=ee.y+(te.y-ee.y)*re,this.z=ee.z+(te.z-ee.z)*re,this}cross(ee,te){return te!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(ee,te)):this.crossVectors(this,ee)}crossVectors(ee,te){const re=ee.x,ne=ee.y,se=ee.z,ae=te.x,oe=te.y,le=te.z;return this.x=ne*le-se*oe,this.y=se*ae-re*le,this.z=re*oe-ne*ae,this}projectOnVector(ee){const te=ee.lengthSq();if(te===0)return this.set(0,0,0);const re=ee.dot(this)/te;return this.copy(ee).multiplyScalar(re)}projectOnPlane(ee){return _vector$c.copy(this).projectOnVector(ee),this.sub(_vector$c)}reflect(ee){return this.sub(_vector$c.copy(ee).multiplyScalar(2*this.dot(ee)))}angleTo(ee){const te=Math.sqrt(this.lengthSq()*ee.lengthSq());if(te===0)return Math.PI/2;const re=this.dot(ee)/te;return Math.acos(clamp$1(re,-1,1))}distanceTo(ee){return Math.sqrt(this.distanceToSquared(ee))}distanceToSquared(ee){const te=this.x-ee.x,re=this.y-ee.y,ne=this.z-ee.z;return te*te+re*re+ne*ne}manhattanDistanceTo(ee){return Math.abs(this.x-ee.x)+Math.abs(this.y-ee.y)+Math.abs(this.z-ee.z)}setFromSpherical(ee){return this.setFromSphericalCoords(ee.radius,ee.phi,ee.theta)}setFromSphericalCoords(ee,te,re){const ne=Math.sin(te)*ee;return this.x=ne*Math.sin(re),this.y=Math.cos(te)*ee,this.z=ne*Math.cos(re),this}setFromCylindrical(ee){return this.setFromCylindricalCoords(ee.radius,ee.theta,ee.y)}setFromCylindricalCoords(ee,te,re){return this.x=ee*Math.sin(te),this.y=re,this.z=ee*Math.cos(te),this}setFromMatrixPosition(ee){const te=ee.elements;return this.x=te[12],this.y=te[13],this.z=te[14],this}setFromMatrixScale(ee){const te=this.setFromMatrixColumn(ee,0).length(),re=this.setFromMatrixColumn(ee,1).length(),ne=this.setFromMatrixColumn(ee,2).length();return this.x=te,this.y=re,this.z=ne,this}setFromMatrixColumn(ee,te){return this.fromArray(ee.elements,te*4)}setFromMatrix3Column(ee,te){return this.fromArray(ee.elements,te*3)}equals(ee){return ee.x===this.x&&ee.y===this.y&&ee.z===this.z}fromArray(ee,te=0){return this.x=ee[te],this.y=ee[te+1],this.z=ee[te+2],this}toArray(ee=[],te=0){return ee[te]=this.x,ee[te+1]=this.y,ee[te+2]=this.z,ee}fromBufferAttribute(ee,te,re){return re!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=ee.getX(te),this.y=ee.getY(te),this.z=ee.getZ(te),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const ee=(Math.random()-.5)*2,te=Math.random()*Math.PI*2,re=Math.sqrt(1-ee**2);return this.x=re*Math.cos(te),this.y=re*Math.sin(te),this.z=ee,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Vector3.prototype.isVector3=!0;const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(ee=new Vector3(1/0,1/0,1/0),te=new Vector3(-1/0,-1/0,-1/0)){this.min=ee,this.max=te}set(ee,te){return this.min.copy(ee),this.max.copy(te),this}setFromArray(ee){let te=1/0,re=1/0,ne=1/0,se=-1/0,ae=-1/0,oe=-1/0;for(let le=0,he=ee.length;le<he;le+=3){const ce=ee[le],de=ee[le+1],ue=ee[le+2];ce<te&&(te=ce),de<re&&(re=de),ue<ne&&(ne=ue),ce>se&&(se=ce),de>ae&&(ae=de),ue>oe&&(oe=ue)}return this.min.set(te,re,ne),this.max.set(se,ae,oe),this}setFromBufferAttribute(ee){let te=1/0,re=1/0,ne=1/0,se=-1/0,ae=-1/0,oe=-1/0;for(let le=0,he=ee.count;le<he;le++){const ce=ee.getX(le),de=ee.getY(le),ue=ee.getZ(le);ce<te&&(te=ce),de<re&&(re=de),ue<ne&&(ne=ue),ce>se&&(se=ce),de>ae&&(ae=de),ue>oe&&(oe=ue)}return this.min.set(te,re,ne),this.max.set(se,ae,oe),this}setFromPoints(ee){this.makeEmpty();for(let te=0,re=ee.length;te<re;te++)this.expandByPoint(ee[te]);return this}setFromCenterAndSize(ee,te){const re=_vector$b.copy(te).multiplyScalar(.5);return this.min.copy(ee).sub(re),this.max.copy(ee).add(re),this}setFromObject(ee){return this.makeEmpty(),this.expandByObject(ee)}clone(){return new this.constructor().copy(this)}copy(ee){return this.min.copy(ee.min),this.max.copy(ee.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(ee){return this.isEmpty()?ee.set(0,0,0):ee.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(ee){return this.isEmpty()?ee.set(0,0,0):ee.subVectors(this.max,this.min)}expandByPoint(ee){return this.min.min(ee),this.max.max(ee),this}expandByVector(ee){return this.min.sub(ee),this.max.add(ee),this}expandByScalar(ee){return this.min.addScalar(-ee),this.max.addScalar(ee),this}expandByObject(ee){ee.updateWorldMatrix(!1,!1);const te=ee.geometry;te!==void 0&&(te.boundingBox===null&&te.computeBoundingBox(),_box$3.copy(te.boundingBox),_box$3.applyMatrix4(ee.matrixWorld),this.union(_box$3));const re=ee.children;for(let ne=0,se=re.length;ne<se;ne++)this.expandByObject(re[ne]);return this}containsPoint(ee){return!(ee.x<this.min.x||ee.x>this.max.x||ee.y<this.min.y||ee.y>this.max.y||ee.z<this.min.z||ee.z>this.max.z)}containsBox(ee){return this.min.x<=ee.min.x&&ee.max.x<=this.max.x&&this.min.y<=ee.min.y&&ee.max.y<=this.max.y&&this.min.z<=ee.min.z&&ee.max.z<=this.max.z}getParameter(ee,te){return te.set((ee.x-this.min.x)/(this.max.x-this.min.x),(ee.y-this.min.y)/(this.max.y-this.min.y),(ee.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(ee){return!(ee.max.x<this.min.x||ee.min.x>this.max.x||ee.max.y<this.min.y||ee.min.y>this.max.y||ee.max.z<this.min.z||ee.min.z>this.max.z)}intersectsSphere(ee){return this.clampPoint(ee.center,_vector$b),_vector$b.distanceToSquared(ee.center)<=ee.radius*ee.radius}intersectsPlane(ee){let te,re;return ee.normal.x>0?(te=ee.normal.x*this.min.x,re=ee.normal.x*this.max.x):(te=ee.normal.x*this.max.x,re=ee.normal.x*this.min.x),ee.normal.y>0?(te+=ee.normal.y*this.min.y,re+=ee.normal.y*this.max.y):(te+=ee.normal.y*this.max.y,re+=ee.normal.y*this.min.y),ee.normal.z>0?(te+=ee.normal.z*this.min.z,re+=ee.normal.z*this.max.z):(te+=ee.normal.z*this.max.z,re+=ee.normal.z*this.min.z),te<=-ee.constant&&re>=-ee.constant}intersectsTriangle(ee){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(ee.a,_center),_v1$7.subVectors(ee.b,_center),_v2$3.subVectors(ee.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$3,_v1$7),_f2.subVectors(_v0$2,_v2$3);let te=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(te,_v0$2,_v1$7,_v2$3,_extents)||(te=[1,0,0,0,1,0,0,0,1],!satForAxes(te,_v0$2,_v1$7,_v2$3,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),te=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(te,_v0$2,_v1$7,_v2$3,_extents))}clampPoint(ee,te){return te.copy(ee).clamp(this.min,this.max)}distanceToPoint(ee){return _vector$b.copy(ee).clamp(this.min,this.max).sub(ee).length()}getBoundingSphere(ee){return this.getCenter(ee.center),ee.radius=this.getSize(_vector$b).length()*.5,ee}intersect(ee){return this.min.max(ee.min),this.max.min(ee.max),this.isEmpty()&&this.makeEmpty(),this}union(ee){return this.min.min(ee.min),this.max.max(ee.max),this}applyMatrix4(ee){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(ee),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(ee),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(ee),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(ee),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(ee),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(ee),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(ee),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(ee),this.setFromPoints(_points),this)}translate(ee){return this.min.add(ee),this.max.add(ee),this}equals(ee){return ee.min.equals(this.min)&&ee.max.equals(this.max)}}Box3.prototype.isBox3=!0;const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$3=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(ie,ee,te,re,ne){for(let se=0,ae=ie.length-3;se<=ae;se+=3){_testAxis.fromArray(ie,se);const oe=ne.x*Math.abs(_testAxis.x)+ne.y*Math.abs(_testAxis.y)+ne.z*Math.abs(_testAxis.z),le=ee.dot(_testAxis),he=te.dot(_testAxis),ce=re.dot(_testAxis);if(Math.max(-Math.max(le,he,ce),Math.min(le,he,ce))>oe)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_toFarthestPoint=new Vector3,_toPoint=new Vector3;class Sphere{constructor(ee=new Vector3,te=-1){this.center=ee,this.radius=te}set(ee,te){return this.center.copy(ee),this.radius=te,this}setFromPoints(ee,te){const re=this.center;te!==void 0?re.copy(te):_box$2.setFromPoints(ee).getCenter(re);let ne=0;for(let se=0,ae=ee.length;se<ae;se++)ne=Math.max(ne,re.distanceToSquared(ee[se]));return this.radius=Math.sqrt(ne),this}copy(ee){return this.center.copy(ee.center),this.radius=ee.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(ee){return ee.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(ee){return ee.distanceTo(this.center)-this.radius}intersectsSphere(ee){const te=this.radius+ee.radius;return ee.center.distanceToSquared(this.center)<=te*te}intersectsBox(ee){return ee.intersectsSphere(this)}intersectsPlane(ee){return Math.abs(ee.distanceToPoint(this.center))<=this.radius}clampPoint(ee,te){const re=this.center.distanceToSquared(ee);return te.copy(ee),re>this.radius*this.radius&&(te.sub(this.center).normalize(),te.multiplyScalar(this.radius).add(this.center)),te}getBoundingBox(ee){return this.isEmpty()?(ee.makeEmpty(),ee):(ee.set(this.center,this.center),ee.expandByScalar(this.radius),ee)}applyMatrix4(ee){return this.center.applyMatrix4(ee),this.radius=this.radius*ee.getMaxScaleOnAxis(),this}translate(ee){return this.center.add(ee),this}expandByPoint(ee){_toPoint.subVectors(ee,this.center);const te=_toPoint.lengthSq();if(te>this.radius*this.radius){const re=Math.sqrt(te),ne=(re-this.radius)*.5;this.center.add(_toPoint.multiplyScalar(ne/re)),this.radius+=ne}return this}union(ee){return _toFarthestPoint.subVectors(ee.center,this.center).normalize().multiplyScalar(ee.radius),this.expandByPoint(_v1$6.copy(ee.center).add(_toFarthestPoint)),this.expandByPoint(_v1$6.copy(ee.center).sub(_toFarthestPoint)),this}equals(ee){return ee.center.equals(this.center)&&ee.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(ee=new Vector3,te=new Vector3(0,0,-1)){this.origin=ee,this.direction=te}set(ee,te){return this.origin.copy(ee),this.direction.copy(te),this}copy(ee){return this.origin.copy(ee.origin),this.direction.copy(ee.direction),this}at(ee,te){return te.copy(this.direction).multiplyScalar(ee).add(this.origin)}lookAt(ee){return this.direction.copy(ee).sub(this.origin).normalize(),this}recast(ee){return this.origin.copy(this.at(ee,_vector$a)),this}closestPointToPoint(ee,te){te.subVectors(ee,this.origin);const re=te.dot(this.direction);return re<0?te.copy(this.origin):te.copy(this.direction).multiplyScalar(re).add(this.origin)}distanceToPoint(ee){return Math.sqrt(this.distanceSqToPoint(ee))}distanceSqToPoint(ee){const te=_vector$a.subVectors(ee,this.origin).dot(this.direction);return te<0?this.origin.distanceToSquared(ee):(_vector$a.copy(this.direction).multiplyScalar(te).add(this.origin),_vector$a.distanceToSquared(ee))}distanceSqToSegment(ee,te,re,ne){_segCenter.copy(ee).add(te).multiplyScalar(.5),_segDir.copy(te).sub(ee).normalize(),_diff.copy(this.origin).sub(_segCenter);const se=ee.distanceTo(te)*.5,ae=-this.direction.dot(_segDir),oe=_diff.dot(this.direction),le=-_diff.dot(_segDir),he=_diff.lengthSq(),ce=Math.abs(1-ae*ae);let de,ue,fe,pe;if(ce>0)if(de=ae*le-oe,ue=ae*oe-le,pe=se*ce,de>=0)if(ue>=-pe)if(ue<=pe){const me=1/ce;de*=me,ue*=me,fe=de*(de+ae*ue+2*oe)+ue*(ae*de+ue+2*le)+he}else ue=se,de=Math.max(0,-(ae*ue+oe)),fe=-de*de+ue*(ue+2*le)+he;else ue=-se,de=Math.max(0,-(ae*ue+oe)),fe=-de*de+ue*(ue+2*le)+he;else ue<=-pe?(de=Math.max(0,-(-ae*se+oe)),ue=de>0?-se:Math.min(Math.max(-se,-le),se),fe=-de*de+ue*(ue+2*le)+he):ue<=pe?(de=0,ue=Math.min(Math.max(-se,-le),se),fe=ue*(ue+2*le)+he):(de=Math.max(0,-(ae*se+oe)),ue=de>0?se:Math.min(Math.max(-se,-le),se),fe=-de*de+ue*(ue+2*le)+he);else ue=ae>0?-se:se,de=Math.max(0,-(ae*ue+oe)),fe=-de*de+ue*(ue+2*le)+he;return re&&re.copy(this.direction).multiplyScalar(de).add(this.origin),ne&&ne.copy(_segDir).multiplyScalar(ue).add(_segCenter),fe}intersectSphere(ee,te){_vector$a.subVectors(ee.center,this.origin);const re=_vector$a.dot(this.direction),ne=_vector$a.dot(_vector$a)-re*re,se=ee.radius*ee.radius;if(ne>se)return null;const ae=Math.sqrt(se-ne),oe=re-ae,le=re+ae;return oe<0&&le<0?null:oe<0?this.at(le,te):this.at(oe,te)}intersectsSphere(ee){return this.distanceSqToPoint(ee.center)<=ee.radius*ee.radius}distanceToPlane(ee){const te=ee.normal.dot(this.direction);if(te===0)return ee.distanceToPoint(this.origin)===0?0:null;const re=-(this.origin.dot(ee.normal)+ee.constant)/te;return re>=0?re:null}intersectPlane(ee,te){const re=this.distanceToPlane(ee);return re===null?null:this.at(re,te)}intersectsPlane(ee){const te=ee.distanceToPoint(this.origin);return te===0||ee.normal.dot(this.direction)*te<0}intersectBox(ee,te){let re,ne,se,ae,oe,le;const he=1/this.direction.x,ce=1/this.direction.y,de=1/this.direction.z,ue=this.origin;return he>=0?(re=(ee.min.x-ue.x)*he,ne=(ee.max.x-ue.x)*he):(re=(ee.max.x-ue.x)*he,ne=(ee.min.x-ue.x)*he),ce>=0?(se=(ee.min.y-ue.y)*ce,ae=(ee.max.y-ue.y)*ce):(se=(ee.max.y-ue.y)*ce,ae=(ee.min.y-ue.y)*ce),re>ae||se>ne||((se>re||re!==re)&&(re=se),(ae<ne||ne!==ne)&&(ne=ae),de>=0?(oe=(ee.min.z-ue.z)*de,le=(ee.max.z-ue.z)*de):(oe=(ee.max.z-ue.z)*de,le=(ee.min.z-ue.z)*de),re>le||oe>ne)||((oe>re||re!==re)&&(re=oe),(le<ne||ne!==ne)&&(ne=le),ne<0)?null:this.at(re>=0?re:ne,te)}intersectsBox(ee){return this.intersectBox(ee,_vector$a)!==null}intersectTriangle(ee,te,re,ne,se){_edge1.subVectors(te,ee),_edge2.subVectors(re,ee),_normal$1.crossVectors(_edge1,_edge2);let ae=this.direction.dot(_normal$1),oe;if(ae>0){if(ne)return null;oe=1}else if(ae<0)oe=-1,ae=-ae;else return null;_diff.subVectors(this.origin,ee);const le=oe*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(le<0)return null;const he=oe*this.direction.dot(_edge1.cross(_diff));if(he<0||le+he>ae)return null;const ce=-oe*_diff.dot(_normal$1);return ce<0?null:this.at(ce/ae,se)}applyMatrix4(ee){return this.origin.applyMatrix4(ee),this.direction.transformDirection(ee),this}equals(ee){return ee.origin.equals(this.origin)&&ee.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(ee,te,re,ne,se,ae,oe,le,he,ce,de,ue,fe,pe,me,xe){const ge=this.elements;return ge[0]=ee,ge[4]=te,ge[8]=re,ge[12]=ne,ge[1]=se,ge[5]=ae,ge[9]=oe,ge[13]=le,ge[2]=he,ge[6]=ce,ge[10]=de,ge[14]=ue,ge[3]=fe,ge[7]=pe,ge[11]=me,ge[15]=xe,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(ee){const te=this.elements,re=ee.elements;return te[0]=re[0],te[1]=re[1],te[2]=re[2],te[3]=re[3],te[4]=re[4],te[5]=re[5],te[6]=re[6],te[7]=re[7],te[8]=re[8],te[9]=re[9],te[10]=re[10],te[11]=re[11],te[12]=re[12],te[13]=re[13],te[14]=re[14],te[15]=re[15],this}copyPosition(ee){const te=this.elements,re=ee.elements;return te[12]=re[12],te[13]=re[13],te[14]=re[14],this}setFromMatrix3(ee){const te=ee.elements;return this.set(te[0],te[3],te[6],0,te[1],te[4],te[7],0,te[2],te[5],te[8],0,0,0,0,1),this}extractBasis(ee,te,re){return ee.setFromMatrixColumn(this,0),te.setFromMatrixColumn(this,1),re.setFromMatrixColumn(this,2),this}makeBasis(ee,te,re){return this.set(ee.x,te.x,re.x,0,ee.y,te.y,re.y,0,ee.z,te.z,re.z,0,0,0,0,1),this}extractRotation(ee){const te=this.elements,re=ee.elements,ne=1/_v1$5.setFromMatrixColumn(ee,0).length(),se=1/_v1$5.setFromMatrixColumn(ee,1).length(),ae=1/_v1$5.setFromMatrixColumn(ee,2).length();return te[0]=re[0]*ne,te[1]=re[1]*ne,te[2]=re[2]*ne,te[3]=0,te[4]=re[4]*se,te[5]=re[5]*se,te[6]=re[6]*se,te[7]=0,te[8]=re[8]*ae,te[9]=re[9]*ae,te[10]=re[10]*ae,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this}makeRotationFromEuler(ee){ee&&ee.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const te=this.elements,re=ee.x,ne=ee.y,se=ee.z,ae=Math.cos(re),oe=Math.sin(re),le=Math.cos(ne),he=Math.sin(ne),ce=Math.cos(se),de=Math.sin(se);if(ee.order==="XYZ"){const ue=ae*ce,fe=ae*de,pe=oe*ce,me=oe*de;te[0]=le*ce,te[4]=-le*de,te[8]=he,te[1]=fe+pe*he,te[5]=ue-me*he,te[9]=-oe*le,te[2]=me-ue*he,te[6]=pe+fe*he,te[10]=ae*le}else if(ee.order==="YXZ"){const ue=le*ce,fe=le*de,pe=he*ce,me=he*de;te[0]=ue+me*oe,te[4]=pe*oe-fe,te[8]=ae*he,te[1]=ae*de,te[5]=ae*ce,te[9]=-oe,te[2]=fe*oe-pe,te[6]=me+ue*oe,te[10]=ae*le}else if(ee.order==="ZXY"){const ue=le*ce,fe=le*de,pe=he*ce,me=he*de;te[0]=ue-me*oe,te[4]=-ae*de,te[8]=pe+fe*oe,te[1]=fe+pe*oe,te[5]=ae*ce,te[9]=me-ue*oe,te[2]=-ae*he,te[6]=oe,te[10]=ae*le}else if(ee.order==="ZYX"){const ue=ae*ce,fe=ae*de,pe=oe*ce,me=oe*de;te[0]=le*ce,te[4]=pe*he-fe,te[8]=ue*he+me,te[1]=le*de,te[5]=me*he+ue,te[9]=fe*he-pe,te[2]=-he,te[6]=oe*le,te[10]=ae*le}else if(ee.order==="YZX"){const ue=ae*le,fe=ae*he,pe=oe*le,me=oe*he;te[0]=le*ce,te[4]=me-ue*de,te[8]=pe*de+fe,te[1]=de,te[5]=ae*ce,te[9]=-oe*ce,te[2]=-he*ce,te[6]=fe*de+pe,te[10]=ue-me*de}else if(ee.order==="XZY"){const ue=ae*le,fe=ae*he,pe=oe*le,me=oe*he;te[0]=le*ce,te[4]=-de,te[8]=he*ce,te[1]=ue*de+me,te[5]=ae*ce,te[9]=fe*de-pe,te[2]=pe*de-fe,te[6]=oe*ce,te[10]=me*de+ue}return te[3]=0,te[7]=0,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this}makeRotationFromQuaternion(ee){return this.compose(_zero,ee,_one)}lookAt(ee,te,re){const ne=this.elements;return _z.subVectors(ee,te),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(re,_z),_x.lengthSq()===0&&(Math.abs(re.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(re,_z)),_x.normalize(),_y.crossVectors(_z,_x),ne[0]=_x.x,ne[4]=_y.x,ne[8]=_z.x,ne[1]=_x.y,ne[5]=_y.y,ne[9]=_z.y,ne[2]=_x.z,ne[6]=_y.z,ne[10]=_z.z,this}multiply(ee,te){return te!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(ee,te)):this.multiplyMatrices(this,ee)}premultiply(ee){return this.multiplyMatrices(ee,this)}multiplyMatrices(ee,te){const re=ee.elements,ne=te.elements,se=this.elements,ae=re[0],oe=re[4],le=re[8],he=re[12],ce=re[1],de=re[5],ue=re[9],fe=re[13],pe=re[2],me=re[6],xe=re[10],ge=re[14],_e=re[3],ve=re[7],ye=re[11],be=re[15],we=ne[0],Se=ne[4],Te=ne[8],Pe=ne[12],Be=ne[1],Ce=ne[5],De=ne[9],Re=ne[13],Le=ne[2],ke=ne[6],Me=ne[10],Ee=ne[14],Ae=ne[3],Ie=ne[7],Fe=ne[11],Ne=ne[15];return se[0]=ae*we+oe*Be+le*Le+he*Ae,se[4]=ae*Se+oe*Ce+le*ke+he*Ie,se[8]=ae*Te+oe*De+le*Me+he*Fe,se[12]=ae*Pe+oe*Re+le*Ee+he*Ne,se[1]=ce*we+de*Be+ue*Le+fe*Ae,se[5]=ce*Se+de*Ce+ue*ke+fe*Ie,se[9]=ce*Te+de*De+ue*Me+fe*Fe,se[13]=ce*Pe+de*Re+ue*Ee+fe*Ne,se[2]=pe*we+me*Be+xe*Le+ge*Ae,se[6]=pe*Se+me*Ce+xe*ke+ge*Ie,se[10]=pe*Te+me*De+xe*Me+ge*Fe,se[14]=pe*Pe+me*Re+xe*Ee+ge*Ne,se[3]=_e*we+ve*Be+ye*Le+be*Ae,se[7]=_e*Se+ve*Ce+ye*ke+be*Ie,se[11]=_e*Te+ve*De+ye*Me+be*Fe,se[15]=_e*Pe+ve*Re+ye*Ee+be*Ne,this}multiplyScalar(ee){const te=this.elements;return te[0]*=ee,te[4]*=ee,te[8]*=ee,te[12]*=ee,te[1]*=ee,te[5]*=ee,te[9]*=ee,te[13]*=ee,te[2]*=ee,te[6]*=ee,te[10]*=ee,te[14]*=ee,te[3]*=ee,te[7]*=ee,te[11]*=ee,te[15]*=ee,this}determinant(){const ee=this.elements,te=ee[0],re=ee[4],ne=ee[8],se=ee[12],ae=ee[1],oe=ee[5],le=ee[9],he=ee[13],ce=ee[2],de=ee[6],ue=ee[10],fe=ee[14],pe=ee[3],me=ee[7],xe=ee[11],ge=ee[15];return pe*(+se*le*de-ne*he*de-se*oe*ue+re*he*ue+ne*oe*fe-re*le*fe)+me*(+te*le*fe-te*he*ue+se*ae*ue-ne*ae*fe+ne*he*ce-se*le*ce)+xe*(+te*he*de-te*oe*fe-se*ae*de+re*ae*fe+se*oe*ce-re*he*ce)+ge*(-ne*oe*ce-te*le*de+te*oe*ue+ne*ae*de-re*ae*ue+re*le*ce)}transpose(){const ee=this.elements;let te;return te=ee[1],ee[1]=ee[4],ee[4]=te,te=ee[2],ee[2]=ee[8],ee[8]=te,te=ee[6],ee[6]=ee[9],ee[9]=te,te=ee[3],ee[3]=ee[12],ee[12]=te,te=ee[7],ee[7]=ee[13],ee[13]=te,te=ee[11],ee[11]=ee[14],ee[14]=te,this}setPosition(ee,te,re){const ne=this.elements;return ee.isVector3?(ne[12]=ee.x,ne[13]=ee.y,ne[14]=ee.z):(ne[12]=ee,ne[13]=te,ne[14]=re),this}invert(){const ee=this.elements,te=ee[0],re=ee[1],ne=ee[2],se=ee[3],ae=ee[4],oe=ee[5],le=ee[6],he=ee[7],ce=ee[8],de=ee[9],ue=ee[10],fe=ee[11],pe=ee[12],me=ee[13],xe=ee[14],ge=ee[15],_e=de*xe*he-me*ue*he+me*le*fe-oe*xe*fe-de*le*ge+oe*ue*ge,ve=pe*ue*he-ce*xe*he-pe*le*fe+ae*xe*fe+ce*le*ge-ae*ue*ge,ye=ce*me*he-pe*de*he+pe*oe*fe-ae*me*fe-ce*oe*ge+ae*de*ge,be=pe*de*le-ce*me*le-pe*oe*ue+ae*me*ue+ce*oe*xe-ae*de*xe,we=te*_e+re*ve+ne*ye+se*be;if(we===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Se=1/we;return ee[0]=_e*Se,ee[1]=(me*ue*se-de*xe*se-me*ne*fe+re*xe*fe+de*ne*ge-re*ue*ge)*Se,ee[2]=(oe*xe*se-me*le*se+me*ne*he-re*xe*he-oe*ne*ge+re*le*ge)*Se,ee[3]=(de*le*se-oe*ue*se-de*ne*he+re*ue*he+oe*ne*fe-re*le*fe)*Se,ee[4]=ve*Se,ee[5]=(ce*xe*se-pe*ue*se+pe*ne*fe-te*xe*fe-ce*ne*ge+te*ue*ge)*Se,ee[6]=(pe*le*se-ae*xe*se-pe*ne*he+te*xe*he+ae*ne*ge-te*le*ge)*Se,ee[7]=(ae*ue*se-ce*le*se+ce*ne*he-te*ue*he-ae*ne*fe+te*le*fe)*Se,ee[8]=ye*Se,ee[9]=(pe*de*se-ce*me*se-pe*re*fe+te*me*fe+ce*re*ge-te*de*ge)*Se,ee[10]=(ae*me*se-pe*oe*se+pe*re*he-te*me*he-ae*re*ge+te*oe*ge)*Se,ee[11]=(ce*oe*se-ae*de*se-ce*re*he+te*de*he+ae*re*fe-te*oe*fe)*Se,ee[12]=be*Se,ee[13]=(ce*me*ne-pe*de*ne+pe*re*ue-te*me*ue-ce*re*xe+te*de*xe)*Se,ee[14]=(pe*oe*ne-ae*me*ne-pe*re*le+te*me*le+ae*re*xe-te*oe*xe)*Se,ee[15]=(ae*de*ne-ce*oe*ne+ce*re*le-te*de*le-ae*re*ue+te*oe*ue)*Se,this}scale(ee){const te=this.elements,re=ee.x,ne=ee.y,se=ee.z;return te[0]*=re,te[4]*=ne,te[8]*=se,te[1]*=re,te[5]*=ne,te[9]*=se,te[2]*=re,te[6]*=ne,te[10]*=se,te[3]*=re,te[7]*=ne,te[11]*=se,this}getMaxScaleOnAxis(){const ee=this.elements,te=ee[0]*ee[0]+ee[1]*ee[1]+ee[2]*ee[2],re=ee[4]*ee[4]+ee[5]*ee[5]+ee[6]*ee[6],ne=ee[8]*ee[8]+ee[9]*ee[9]+ee[10]*ee[10];return Math.sqrt(Math.max(te,re,ne))}makeTranslation(ee,te,re){return this.set(1,0,0,ee,0,1,0,te,0,0,1,re,0,0,0,1),this}makeRotationX(ee){const te=Math.cos(ee),re=Math.sin(ee);return this.set(1,0,0,0,0,te,-re,0,0,re,te,0,0,0,0,1),this}makeRotationY(ee){const te=Math.cos(ee),re=Math.sin(ee);return this.set(te,0,re,0,0,1,0,0,-re,0,te,0,0,0,0,1),this}makeRotationZ(ee){const te=Math.cos(ee),re=Math.sin(ee);return this.set(te,-re,0,0,re,te,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(ee,te){const re=Math.cos(te),ne=Math.sin(te),se=1-re,ae=ee.x,oe=ee.y,le=ee.z,he=se*ae,ce=se*oe;return this.set(he*ae+re,he*oe-ne*le,he*le+ne*oe,0,he*oe+ne*le,ce*oe+re,ce*le-ne*ae,0,he*le-ne*oe,ce*le+ne*ae,se*le*le+re,0,0,0,0,1),this}makeScale(ee,te,re){return this.set(ee,0,0,0,0,te,0,0,0,0,re,0,0,0,0,1),this}makeShear(ee,te,re,ne,se,ae){return this.set(1,re,se,0,ee,1,ae,0,te,ne,1,0,0,0,0,1),this}compose(ee,te,re){const ne=this.elements,se=te._x,ae=te._y,oe=te._z,le=te._w,he=se+se,ce=ae+ae,de=oe+oe,ue=se*he,fe=se*ce,pe=se*de,me=ae*ce,xe=ae*de,ge=oe*de,_e=le*he,ve=le*ce,ye=le*de,be=re.x,we=re.y,Se=re.z;return ne[0]=(1-(me+ge))*be,ne[1]=(fe+ye)*be,ne[2]=(pe-ve)*be,ne[3]=0,ne[4]=(fe-ye)*we,ne[5]=(1-(ue+ge))*we,ne[6]=(xe+_e)*we,ne[7]=0,ne[8]=(pe+ve)*Se,ne[9]=(xe-_e)*Se,ne[10]=(1-(ue+me))*Se,ne[11]=0,ne[12]=ee.x,ne[13]=ee.y,ne[14]=ee.z,ne[15]=1,this}decompose(ee,te,re){const ne=this.elements;let se=_v1$5.set(ne[0],ne[1],ne[2]).length();const ae=_v1$5.set(ne[4],ne[5],ne[6]).length(),oe=_v1$5.set(ne[8],ne[9],ne[10]).length();this.determinant()<0&&(se=-se),ee.x=ne[12],ee.y=ne[13],ee.z=ne[14],_m1$2.copy(this);const he=1/se,ce=1/ae,de=1/oe;return _m1$2.elements[0]*=he,_m1$2.elements[1]*=he,_m1$2.elements[2]*=he,_m1$2.elements[4]*=ce,_m1$2.elements[5]*=ce,_m1$2.elements[6]*=ce,_m1$2.elements[8]*=de,_m1$2.elements[9]*=de,_m1$2.elements[10]*=de,te.setFromRotationMatrix(_m1$2),re.x=se,re.y=ae,re.z=oe,this}makePerspective(ee,te,re,ne,se,ae){ae===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const oe=this.elements,le=2*se/(te-ee),he=2*se/(re-ne),ce=(te+ee)/(te-ee),de=(re+ne)/(re-ne),ue=-(ae+se)/(ae-se),fe=-2*ae*se/(ae-se);return oe[0]=le,oe[4]=0,oe[8]=ce,oe[12]=0,oe[1]=0,oe[5]=he,oe[9]=de,oe[13]=0,oe[2]=0,oe[6]=0,oe[10]=ue,oe[14]=fe,oe[3]=0,oe[7]=0,oe[11]=-1,oe[15]=0,this}makeOrthographic(ee,te,re,ne,se,ae){const oe=this.elements,le=1/(te-ee),he=1/(re-ne),ce=1/(ae-se),de=(te+ee)*le,ue=(re+ne)*he,fe=(ae+se)*ce;return oe[0]=2*le,oe[4]=0,oe[8]=0,oe[12]=-de,oe[1]=0,oe[5]=2*he,oe[9]=0,oe[13]=-ue,oe[2]=0,oe[6]=0,oe[10]=-2*ce,oe[14]=-fe,oe[3]=0,oe[7]=0,oe[11]=0,oe[15]=1,this}equals(ee){const te=this.elements,re=ee.elements;for(let ne=0;ne<16;ne++)if(te[ne]!==re[ne])return!1;return!0}fromArray(ee,te=0){for(let re=0;re<16;re++)this.elements[re]=ee[re+te];return this}toArray(ee=[],te=0){const re=this.elements;return ee[te]=re[0],ee[te+1]=re[1],ee[te+2]=re[2],ee[te+3]=re[3],ee[te+4]=re[4],ee[te+5]=re[5],ee[te+6]=re[6],ee[te+7]=re[7],ee[te+8]=re[8],ee[te+9]=re[9],ee[te+10]=re[10],ee[te+11]=re[11],ee[te+12]=re[12],ee[te+13]=re[13],ee[te+14]=re[14],ee[te+15]=re[15],ee}}Matrix4.prototype.isMatrix4=!0;const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(ee=0,te=0,re=0,ne=Euler.DefaultOrder){this._x=ee,this._y=te,this._z=re,this._order=ne}get x(){return this._x}set x(ee){this._x=ee,this._onChangeCallback()}get y(){return this._y}set y(ee){this._y=ee,this._onChangeCallback()}get z(){return this._z}set z(ee){this._z=ee,this._onChangeCallback()}get order(){return this._order}set order(ee){this._order=ee,this._onChangeCallback()}set(ee,te,re,ne=this._order){return this._x=ee,this._y=te,this._z=re,this._order=ne,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(ee){return this._x=ee._x,this._y=ee._y,this._z=ee._z,this._order=ee._order,this._onChangeCallback(),this}setFromRotationMatrix(ee,te=this._order,re=!0){const ne=ee.elements,se=ne[0],ae=ne[4],oe=ne[8],le=ne[1],he=ne[5],ce=ne[9],de=ne[2],ue=ne[6],fe=ne[10];switch(te){case"XYZ":this._y=Math.asin(clamp$1(oe,-1,1)),Math.abs(oe)<.9999999?(this._x=Math.atan2(-ce,fe),this._z=Math.atan2(-ae,se)):(this._x=Math.atan2(ue,he),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(ce,-1,1)),Math.abs(ce)<.9999999?(this._y=Math.atan2(oe,fe),this._z=Math.atan2(le,he)):(this._y=Math.atan2(-de,se),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(ue,-1,1)),Math.abs(ue)<.9999999?(this._y=Math.atan2(-de,fe),this._z=Math.atan2(-ae,he)):(this._y=0,this._z=Math.atan2(le,se));break;case"ZYX":this._y=Math.asin(-clamp$1(de,-1,1)),Math.abs(de)<.9999999?(this._x=Math.atan2(ue,fe),this._z=Math.atan2(le,se)):(this._x=0,this._z=Math.atan2(-ae,he));break;case"YZX":this._z=Math.asin(clamp$1(le,-1,1)),Math.abs(le)<.9999999?(this._x=Math.atan2(-ce,he),this._y=Math.atan2(-de,se)):(this._x=0,this._y=Math.atan2(oe,fe));break;case"XZY":this._z=Math.asin(-clamp$1(ae,-1,1)),Math.abs(ae)<.9999999?(this._x=Math.atan2(ue,he),this._y=Math.atan2(oe,se)):(this._x=Math.atan2(-ce,fe),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+te)}return this._order=te,re===!0&&this._onChangeCallback(),this}setFromQuaternion(ee,te,re){return _matrix$1.makeRotationFromQuaternion(ee),this.setFromRotationMatrix(_matrix$1,te,re)}setFromVector3(ee,te=this._order){return this.set(ee.x,ee.y,ee.z,te)}reorder(ee){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,ee)}equals(ee){return ee._x===this._x&&ee._y===this._y&&ee._z===this._z&&ee._order===this._order}fromArray(ee){return this._x=ee[0],this._y=ee[1],this._z=ee[2],ee[3]!==void 0&&(this._order=ee[3]),this._onChangeCallback(),this}toArray(ee=[],te=0){return ee[te]=this._x,ee[te+1]=this._y,ee[te+2]=this._z,ee[te+3]=this._order,ee}toVector3(ee){return ee?ee.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)}_onChange(ee){return this._onChangeCallback=ee,this}_onChangeCallback(){}}Euler.prototype.isEuler=!0,Euler.DefaultOrder="XYZ",Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Layers{constructor(){this.mask=1}set(ee){this.mask=1<<ee|0}enable(ee){this.mask|=1<<ee|0}enableAll(){this.mask=-1}toggle(ee){this.mask^=1<<ee|0}disable(ee){this.mask&=~(1<<ee|0)}disableAll(){this.mask=0}test(ee){return(this.mask&ee.mask)!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();const ee=new Vector3,te=new Euler,re=new Quaternion,ne=new Vector3(1,1,1);function se(){re.setFromEuler(te,!1)}function ae(){te.setFromQuaternion(re,void 0,!1)}te._onChange(se),re._onChange(ae),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:ee},rotation:{configurable:!0,enumerable:!0,value:te},quaternion:{configurable:!0,enumerable:!0,value:re},scale:{configurable:!0,enumerable:!0,value:ne},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(ee){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(ee),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(ee){return this.quaternion.premultiply(ee),this}setRotationFromAxisAngle(ee,te){this.quaternion.setFromAxisAngle(ee,te)}setRotationFromEuler(ee){this.quaternion.setFromEuler(ee,!0)}setRotationFromMatrix(ee){this.quaternion.setFromRotationMatrix(ee)}setRotationFromQuaternion(ee){this.quaternion.copy(ee)}rotateOnAxis(ee,te){return _q1.setFromAxisAngle(ee,te),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(ee,te){return _q1.setFromAxisAngle(ee,te),this.quaternion.premultiply(_q1),this}rotateX(ee){return this.rotateOnAxis(_xAxis,ee)}rotateY(ee){return this.rotateOnAxis(_yAxis,ee)}rotateZ(ee){return this.rotateOnAxis(_zAxis,ee)}translateOnAxis(ee,te){return _v1$4.copy(ee).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(te)),this}translateX(ee){return this.translateOnAxis(_xAxis,ee)}translateY(ee){return this.translateOnAxis(_yAxis,ee)}translateZ(ee){return this.translateOnAxis(_zAxis,ee)}localToWorld(ee){return ee.applyMatrix4(this.matrixWorld)}worldToLocal(ee){return ee.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(ee,te,re){ee.isVector3?_target.copy(ee):_target.set(ee,te,re);const ne=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),ne&&(_m1$1.extractRotation(ne.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(ee){if(arguments.length>1){for(let te=0;te<arguments.length;te++)this.add(arguments[te]);return this}return ee===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",ee),this):(ee&&ee.isObject3D?(ee.parent!==null&&ee.parent.remove(ee),ee.parent=this,this.children.push(ee),ee.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",ee),this)}remove(ee){if(arguments.length>1){for(let re=0;re<arguments.length;re++)this.remove(arguments[re]);return this}const te=this.children.indexOf(ee);return te!==-1&&(ee.parent=null,this.children.splice(te,1),ee.dispatchEvent(_removedEvent)),this}removeFromParent(){const ee=this.parent;return ee!==null&&ee.remove(this),this}clear(){for(let ee=0;ee<this.children.length;ee++){const te=this.children[ee];te.parent=null,te.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(ee){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),ee.parent!==null&&(ee.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(ee.parent.matrixWorld)),ee.applyMatrix4(_m1$1),this.add(ee),ee.updateWorldMatrix(!1,!0),this}getObjectById(ee){return this.getObjectByProperty("id",ee)}getObjectByName(ee){return this.getObjectByProperty("name",ee)}getObjectByProperty(ee,te){if(this[ee]===te)return this;for(let re=0,ne=this.children.length;re<ne;re++){const ae=this.children[re].getObjectByProperty(ee,te);if(ae!==void 0)return ae}}getWorldPosition(ee){return this.updateWorldMatrix(!0,!1),ee.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(ee){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,ee,_scale$2),ee}getWorldScale(ee){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,ee),ee}getWorldDirection(ee){this.updateWorldMatrix(!0,!1);const te=this.matrixWorld.elements;return ee.set(te[8],te[9],te[10]).normalize()}raycast(){}traverse(ee){ee(this);const te=this.children;for(let re=0,ne=te.length;re<ne;re++)te[re].traverse(ee)}traverseVisible(ee){if(this.visible===!1)return;ee(this);const te=this.children;for(let re=0,ne=te.length;re<ne;re++)te[re].traverseVisible(ee)}traverseAncestors(ee){const te=this.parent;te!==null&&(ee(te),te.traverseAncestors(ee))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(ee){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||ee)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,ee=!0);const te=this.children;for(let re=0,ne=te.length;re<ne;re++)te[re].updateMatrixWorld(ee)}updateWorldMatrix(ee,te){const re=this.parent;if(ee===!0&&re!==null&&re.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),te===!0){const ne=this.children;for(let se=0,ae=ne.length;se<ae;se++)ne[se].updateWorldMatrix(!1,!0)}}toJSON(ee){const te=ee===void 0||typeof ee=="string",re={};te&&(ee={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},re.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const ne={};ne.uuid=this.uuid,ne.type=this.type,this.name!==""&&(ne.name=this.name),this.castShadow===!0&&(ne.castShadow=!0),this.receiveShadow===!0&&(ne.receiveShadow=!0),this.visible===!1&&(ne.visible=!1),this.frustumCulled===!1&&(ne.frustumCulled=!1),this.renderOrder!==0&&(ne.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(ne.userData=this.userData),ne.layers=this.layers.mask,ne.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(ne.matrixAutoUpdate=!1),this.isInstancedMesh&&(ne.type="InstancedMesh",ne.count=this.count,ne.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(ne.instanceColor=this.instanceColor.toJSON()));function se(oe,le){return oe[le.uuid]===void 0&&(oe[le.uuid]=le.toJSON(ee)),le.uuid}if(this.isScene)this.background&&(this.background.isColor?ne.background=this.background.toJSON():this.background.isTexture&&(ne.background=this.background.toJSON(ee).uuid)),this.environment&&this.environment.isTexture&&(ne.environment=this.environment.toJSON(ee).uuid);else if(this.isMesh||this.isLine||this.isPoints){ne.geometry=se(ee.geometries,this.geometry);const oe=this.geometry.parameters;if(oe!==void 0&&oe.shapes!==void 0){const le=oe.shapes;if(Array.isArray(le))for(let he=0,ce=le.length;he<ce;he++){const de=le[he];se(ee.shapes,de)}else se(ee.shapes,le)}}if(this.isSkinnedMesh&&(ne.bindMode=this.bindMode,ne.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(se(ee.skeletons,this.skeleton),ne.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const oe=[];for(let le=0,he=this.material.length;le<he;le++)oe.push(se(ee.materials,this.material[le]));ne.material=oe}else ne.material=se(ee.materials,this.material);if(this.children.length>0){ne.children=[];for(let oe=0;oe<this.children.length;oe++)ne.children.push(this.children[oe].toJSON(ee).object)}if(this.animations.length>0){ne.animations=[];for(let oe=0;oe<this.animations.length;oe++){const le=this.animations[oe];ne.animations.push(se(ee.animations,le))}}if(te){const oe=ae(ee.geometries),le=ae(ee.materials),he=ae(ee.textures),ce=ae(ee.images),de=ae(ee.shapes),ue=ae(ee.skeletons),fe=ae(ee.animations);oe.length>0&&(re.geometries=oe),le.length>0&&(re.materials=le),he.length>0&&(re.textures=he),ce.length>0&&(re.images=ce),de.length>0&&(re.shapes=de),ue.length>0&&(re.skeletons=ue),fe.length>0&&(re.animations=fe)}return re.object=ne,re;function ae(oe){const le=[];for(const he in oe){const ce=oe[he];delete ce.metadata,le.push(ce)}return le}}clone(ee){return new this.constructor().copy(this,ee)}copy(ee,te=!0){if(this.name=ee.name,this.up.copy(ee.up),this.position.copy(ee.position),this.rotation.order=ee.rotation.order,this.quaternion.copy(ee.quaternion),this.scale.copy(ee.scale),this.matrix.copy(ee.matrix),this.matrixWorld.copy(ee.matrixWorld),this.matrixAutoUpdate=ee.matrixAutoUpdate,this.matrixWorldNeedsUpdate=ee.matrixWorldNeedsUpdate,this.layers.mask=ee.layers.mask,this.visible=ee.visible,this.castShadow=ee.castShadow,this.receiveShadow=ee.receiveShadow,this.frustumCulled=ee.frustumCulled,this.renderOrder=ee.renderOrder,this.userData=JSON.parse(JSON.stringify(ee.userData)),te===!0)for(let re=0;re<ee.children.length;re++){const ne=ee.children[re];this.add(ne.clone())}return this}}Object3D.DefaultUp=new Vector3(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object3D.prototype.isObject3D=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(ee=new Vector3,te=new Vector3,re=new Vector3){this.a=ee,this.b=te,this.c=re}static getNormal(ee,te,re,ne){ne.subVectors(re,te),_v0$1.subVectors(ee,te),ne.cross(_v0$1);const se=ne.lengthSq();return se>0?ne.multiplyScalar(1/Math.sqrt(se)):ne.set(0,0,0)}static getBarycoord(ee,te,re,ne,se){_v0$1.subVectors(ne,te),_v1$3.subVectors(re,te),_v2$2.subVectors(ee,te);const ae=_v0$1.dot(_v0$1),oe=_v0$1.dot(_v1$3),le=_v0$1.dot(_v2$2),he=_v1$3.dot(_v1$3),ce=_v1$3.dot(_v2$2),de=ae*he-oe*oe;if(de===0)return se.set(-2,-1,-1);const ue=1/de,fe=(he*le-oe*ce)*ue,pe=(ae*ce-oe*le)*ue;return se.set(1-fe-pe,pe,fe)}static containsPoint(ee,te,re,ne){return this.getBarycoord(ee,te,re,ne,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(ee,te,re,ne,se,ae,oe,le){return this.getBarycoord(ee,te,re,ne,_v3$1),le.set(0,0),le.addScaledVector(se,_v3$1.x),le.addScaledVector(ae,_v3$1.y),le.addScaledVector(oe,_v3$1.z),le}static isFrontFacing(ee,te,re,ne){return _v0$1.subVectors(re,te),_v1$3.subVectors(ee,te),_v0$1.cross(_v1$3).dot(ne)<0}set(ee,te,re){return this.a.copy(ee),this.b.copy(te),this.c.copy(re),this}setFromPointsAndIndices(ee,te,re,ne){return this.a.copy(ee[te]),this.b.copy(ee[re]),this.c.copy(ee[ne]),this}setFromAttributeAndIndices(ee,te,re,ne){return this.a.fromBufferAttribute(ee,te),this.b.fromBufferAttribute(ee,re),this.c.fromBufferAttribute(ee,ne),this}clone(){return new this.constructor().copy(this)}copy(ee){return this.a.copy(ee.a),this.b.copy(ee.b),this.c.copy(ee.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(ee){return ee.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(ee){return Triangle.getNormal(this.a,this.b,this.c,ee)}getPlane(ee){return ee.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(ee,te){return Triangle.getBarycoord(ee,this.a,this.b,this.c,te)}getUV(ee,te,re,ne,se){return Triangle.getUV(ee,this.a,this.b,this.c,te,re,ne,se)}containsPoint(ee){return Triangle.containsPoint(ee,this.a,this.b,this.c)}isFrontFacing(ee){return Triangle.isFrontFacing(this.a,this.b,this.c,ee)}intersectsBox(ee){return ee.intersectsTriangle(this)}closestPointToPoint(ee,te){const re=this.a,ne=this.b,se=this.c;let ae,oe;_vab.subVectors(ne,re),_vac.subVectors(se,re),_vap.subVectors(ee,re);const le=_vab.dot(_vap),he=_vac.dot(_vap);if(le<=0&&he<=0)return te.copy(re);_vbp.subVectors(ee,ne);const ce=_vab.dot(_vbp),de=_vac.dot(_vbp);if(ce>=0&&de<=ce)return te.copy(ne);const ue=le*de-ce*he;if(ue<=0&&le>=0&&ce<=0)return ae=le/(le-ce),te.copy(re).addScaledVector(_vab,ae);_vcp.subVectors(ee,se);const fe=_vab.dot(_vcp),pe=_vac.dot(_vcp);if(pe>=0&&fe<=pe)return te.copy(se);const me=fe*he-le*pe;if(me<=0&&he>=0&&pe<=0)return oe=he/(he-pe),te.copy(re).addScaledVector(_vac,oe);const xe=ce*pe-fe*de;if(xe<=0&&de-ce>=0&&fe-pe>=0)return _vbc.subVectors(se,ne),oe=(de-ce)/(de-ce+(fe-pe)),te.copy(ne).addScaledVector(_vbc,oe);const ge=1/(xe+me+ue);return ae=me*ge,oe=ue*ge,te.copy(re).addScaledVector(_vab,ae).addScaledVector(_vac,oe)}equals(ee){return ee.a.equals(this.a)&&ee.b.equals(this.b)&&ee.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher{constructor(){super(),Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.format=RGBAFormat,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(ee){this._alphaTest>0!=ee>0&&this.version++,this._alphaTest=ee}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(ee){if(ee!==void 0)for(const te in ee){const re=ee[te];if(re===void 0){console.warn("THREE.Material: '"+te+"' parameter is undefined.");continue}if(te==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=re===FlatShading;continue}const ne=this[te];if(ne===void 0){console.warn("THREE."+this.type+": '"+te+"' is not a property of this material.");continue}ne&&ne.isColor?ne.set(re):ne&&ne.isVector3&&re&&re.isVector3?ne.copy(re):this[te]=re}}toJSON(ee){const te=ee===void 0||typeof ee=="string";te&&(ee={textures:{},images:{}});const re={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};re.uuid=this.uuid,re.type=this.type,this.name!==""&&(re.name=this.name),this.color&&this.color.isColor&&(re.color=this.color.getHex()),this.roughness!==void 0&&(re.roughness=this.roughness),this.metalness!==void 0&&(re.metalness=this.metalness),this.sheen!==void 0&&(re.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(re.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(re.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(re.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(re.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(re.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(re.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(re.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(re.shininess=this.shininess),this.clearcoat!==void 0&&(re.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(re.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(re.clearcoatMap=this.clearcoatMap.toJSON(ee).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(re.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(ee).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(re.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(ee).uuid,re.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(re.map=this.map.toJSON(ee).uuid),this.matcap&&this.matcap.isTexture&&(re.matcap=this.matcap.toJSON(ee).uuid),this.alphaMap&&this.alphaMap.isTexture&&(re.alphaMap=this.alphaMap.toJSON(ee).uuid),this.lightMap&&this.lightMap.isTexture&&(re.lightMap=this.lightMap.toJSON(ee).uuid,re.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(re.aoMap=this.aoMap.toJSON(ee).uuid,re.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(re.bumpMap=this.bumpMap.toJSON(ee).uuid,re.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(re.normalMap=this.normalMap.toJSON(ee).uuid,re.normalMapType=this.normalMapType,re.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(re.displacementMap=this.displacementMap.toJSON(ee).uuid,re.displacementScale=this.displacementScale,re.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(re.roughnessMap=this.roughnessMap.toJSON(ee).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(re.metalnessMap=this.metalnessMap.toJSON(ee).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(re.emissiveMap=this.emissiveMap.toJSON(ee).uuid),this.specularMap&&this.specularMap.isTexture&&(re.specularMap=this.specularMap.toJSON(ee).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(re.specularIntensityMap=this.specularIntensityMap.toJSON(ee).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(re.specularColorMap=this.specularColorMap.toJSON(ee).uuid),this.envMap&&this.envMap.isTexture&&(re.envMap=this.envMap.toJSON(ee).uuid,this.combine!==void 0&&(re.combine=this.combine)),this.envMapIntensity!==void 0&&(re.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(re.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(re.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(re.gradientMap=this.gradientMap.toJSON(ee).uuid),this.transmission!==void 0&&(re.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(re.transmissionMap=this.transmissionMap.toJSON(ee).uuid),this.thickness!==void 0&&(re.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(re.thicknessMap=this.thicknessMap.toJSON(ee).uuid),this.attenuationDistance!==void 0&&(re.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(re.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(re.size=this.size),this.shadowSide!==null&&(re.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(re.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(re.blending=this.blending),this.side!==FrontSide&&(re.side=this.side),this.vertexColors&&(re.vertexColors=!0),this.opacity<1&&(re.opacity=this.opacity),this.format!==RGBAFormat&&(re.format=this.format),this.transparent===!0&&(re.transparent=this.transparent),re.depthFunc=this.depthFunc,re.depthTest=this.depthTest,re.depthWrite=this.depthWrite,re.colorWrite=this.colorWrite,re.stencilWrite=this.stencilWrite,re.stencilWriteMask=this.stencilWriteMask,re.stencilFunc=this.stencilFunc,re.stencilRef=this.stencilRef,re.stencilFuncMask=this.stencilFuncMask,re.stencilFail=this.stencilFail,re.stencilZFail=this.stencilZFail,re.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(re.rotation=this.rotation),this.polygonOffset===!0&&(re.polygonOffset=!0),this.polygonOffsetFactor!==0&&(re.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(re.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(re.linewidth=this.linewidth),this.dashSize!==void 0&&(re.dashSize=this.dashSize),this.gapSize!==void 0&&(re.gapSize=this.gapSize),this.scale!==void 0&&(re.scale=this.scale),this.dithering===!0&&(re.dithering=!0),this.alphaTest>0&&(re.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(re.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(re.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(re.wireframe=this.wireframe),this.wireframeLinewidth>1&&(re.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(re.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(re.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(re.flatShading=this.flatShading),this.visible===!1&&(re.visible=!1),this.toneMapped===!1&&(re.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(re.userData=this.userData);function ne(se){const ae=[];for(const oe in se){const le=se[oe];delete le.metadata,ae.push(le)}return ae}if(te){const se=ne(ee.textures),ae=ne(ee.images);se.length>0&&(re.textures=se),ae.length>0&&(re.images=ae)}return re}clone(){return new this.constructor().copy(this)}copy(ee){this.name=ee.name,this.fog=ee.fog,this.blending=ee.blending,this.side=ee.side,this.vertexColors=ee.vertexColors,this.opacity=ee.opacity,this.format=ee.format,this.transparent=ee.transparent,this.blendSrc=ee.blendSrc,this.blendDst=ee.blendDst,this.blendEquation=ee.blendEquation,this.blendSrcAlpha=ee.blendSrcAlpha,this.blendDstAlpha=ee.blendDstAlpha,this.blendEquationAlpha=ee.blendEquationAlpha,this.depthFunc=ee.depthFunc,this.depthTest=ee.depthTest,this.depthWrite=ee.depthWrite,this.stencilWriteMask=ee.stencilWriteMask,this.stencilFunc=ee.stencilFunc,this.stencilRef=ee.stencilRef,this.stencilFuncMask=ee.stencilFuncMask,this.stencilFail=ee.stencilFail,this.stencilZFail=ee.stencilZFail,this.stencilZPass=ee.stencilZPass,this.stencilWrite=ee.stencilWrite;const te=ee.clippingPlanes;let re=null;if(te!==null){const ne=te.length;re=new Array(ne);for(let se=0;se!==ne;++se)re[se]=te[se].clone()}return this.clippingPlanes=re,this.clipIntersection=ee.clipIntersection,this.clipShadows=ee.clipShadows,this.shadowSide=ee.shadowSide,this.colorWrite=ee.colorWrite,this.precision=ee.precision,this.polygonOffset=ee.polygonOffset,this.polygonOffsetFactor=ee.polygonOffsetFactor,this.polygonOffsetUnits=ee.polygonOffsetUnits,this.dithering=ee.dithering,this.alphaTest=ee.alphaTest,this.alphaToCoverage=ee.alphaToCoverage,this.premultipliedAlpha=ee.premultipliedAlpha,this.visible=ee.visible,this.toneMapped=ee.toneMapped,this.userData=JSON.parse(JSON.stringify(ee.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(ee){ee===!0&&this.version++}}Material.prototype.isMaterial=!0;const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(ie,ee,te){return te<0&&(te+=1),te>1&&(te-=1),te<1/6?ie+(ee-ie)*6*te:te<1/2?ee:te<2/3?ie+(ee-ie)*6*(2/3-te):ie}function SRGBToLinear(ie){return ie<.04045?ie*.0773993808:Math.pow(ie*.9478672986+.0521327014,2.4)}function LinearToSRGB(ie){return ie<.0031308?ie*12.92:1.055*Math.pow(ie,.41666)-.055}class Color$1{constructor(ee,te,re){return te===void 0&&re===void 0?this.set(ee):this.setRGB(ee,te,re)}set(ee){return ee&&ee.isColor?this.copy(ee):typeof ee=="number"?this.setHex(ee):typeof ee=="string"&&this.setStyle(ee),this}setScalar(ee){return this.r=ee,this.g=ee,this.b=ee,this}setHex(ee){return ee=Math.floor(ee),this.r=(ee>>16&255)/255,this.g=(ee>>8&255)/255,this.b=(ee&255)/255,this}setRGB(ee,te,re){return this.r=ee,this.g=te,this.b=re,this}setHSL(ee,te,re){if(ee=euclideanModulo(ee,1),te=clamp$1(te,0,1),re=clamp$1(re,0,1),te===0)this.r=this.g=this.b=re;else{const ne=re<=.5?re*(1+te):re+te-re*te,se=2*re-ne;this.r=hue2rgb(se,ne,ee+1/3),this.g=hue2rgb(se,ne,ee),this.b=hue2rgb(se,ne,ee-1/3)}return this}setStyle(ee){function te(ne){ne!==void 0&&parseFloat(ne)<1&&console.warn("THREE.Color: Alpha component of "+ee+" will be ignored.")}let re;if(re=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(ee)){let ne;const se=re[1],ae=re[2];switch(se){case"rgb":case"rgba":if(ne=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ae))return this.r=Math.min(255,parseInt(ne[1],10))/255,this.g=Math.min(255,parseInt(ne[2],10))/255,this.b=Math.min(255,parseInt(ne[3],10))/255,te(ne[4]),this;if(ne=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ae))return this.r=Math.min(100,parseInt(ne[1],10))/100,this.g=Math.min(100,parseInt(ne[2],10))/100,this.b=Math.min(100,parseInt(ne[3],10))/100,te(ne[4]),this;break;case"hsl":case"hsla":if(ne=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ae)){const oe=parseFloat(ne[1])/360,le=parseInt(ne[2],10)/100,he=parseInt(ne[3],10)/100;return te(ne[4]),this.setHSL(oe,le,he)}break}}else if(re=/^\#([A-Fa-f\d]+)$/.exec(ee)){const ne=re[1],se=ne.length;if(se===3)return this.r=parseInt(ne.charAt(0)+ne.charAt(0),16)/255,this.g=parseInt(ne.charAt(1)+ne.charAt(1),16)/255,this.b=parseInt(ne.charAt(2)+ne.charAt(2),16)/255,this;if(se===6)return this.r=parseInt(ne.charAt(0)+ne.charAt(1),16)/255,this.g=parseInt(ne.charAt(2)+ne.charAt(3),16)/255,this.b=parseInt(ne.charAt(4)+ne.charAt(5),16)/255,this}return ee&&ee.length>0?this.setColorName(ee):this}setColorName(ee){const te=_colorKeywords[ee.toLowerCase()];return te!==void 0?this.setHex(te):console.warn("THREE.Color: Unknown color "+ee),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(ee){return this.r=ee.r,this.g=ee.g,this.b=ee.b,this}copyGammaToLinear(ee,te=2){return this.r=Math.pow(ee.r,te),this.g=Math.pow(ee.g,te),this.b=Math.pow(ee.b,te),this}copyLinearToGamma(ee,te=2){const re=te>0?1/te:1;return this.r=Math.pow(ee.r,re),this.g=Math.pow(ee.g,re),this.b=Math.pow(ee.b,re),this}convertGammaToLinear(ee){return this.copyGammaToLinear(this,ee),this}convertLinearToGamma(ee){return this.copyLinearToGamma(this,ee),this}copySRGBToLinear(ee){return this.r=SRGBToLinear(ee.r),this.g=SRGBToLinear(ee.g),this.b=SRGBToLinear(ee.b),this}copyLinearToSRGB(ee){return this.r=LinearToSRGB(ee.r),this.g=LinearToSRGB(ee.g),this.b=LinearToSRGB(ee.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(ee){const te=this.r,re=this.g,ne=this.b,se=Math.max(te,re,ne),ae=Math.min(te,re,ne);let oe,le;const he=(ae+se)/2;if(ae===se)oe=0,le=0;else{const ce=se-ae;switch(le=he<=.5?ce/(se+ae):ce/(2-se-ae),se){case te:oe=(re-ne)/ce+(re<ne?6:0);break;case re:oe=(ne-te)/ce+2;break;case ne:oe=(te-re)/ce+4;break}oe/=6}return ee.h=oe,ee.s=le,ee.l=he,ee}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(ee,te,re){return this.getHSL(_hslA),_hslA.h+=ee,_hslA.s+=te,_hslA.l+=re,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(ee){return this.r+=ee.r,this.g+=ee.g,this.b+=ee.b,this}addColors(ee,te){return this.r=ee.r+te.r,this.g=ee.g+te.g,this.b=ee.b+te.b,this}addScalar(ee){return this.r+=ee,this.g+=ee,this.b+=ee,this}sub(ee){return this.r=Math.max(0,this.r-ee.r),this.g=Math.max(0,this.g-ee.g),this.b=Math.max(0,this.b-ee.b),this}multiply(ee){return this.r*=ee.r,this.g*=ee.g,this.b*=ee.b,this}multiplyScalar(ee){return this.r*=ee,this.g*=ee,this.b*=ee,this}lerp(ee,te){return this.r+=(ee.r-this.r)*te,this.g+=(ee.g-this.g)*te,this.b+=(ee.b-this.b)*te,this}lerpColors(ee,te,re){return this.r=ee.r+(te.r-ee.r)*re,this.g=ee.g+(te.g-ee.g)*re,this.b=ee.b+(te.b-ee.b)*re,this}lerpHSL(ee,te){this.getHSL(_hslA),ee.getHSL(_hslB);const re=lerp(_hslA.h,_hslB.h,te),ne=lerp(_hslA.s,_hslB.s,te),se=lerp(_hslA.l,_hslB.l,te);return this.setHSL(re,ne,se),this}equals(ee){return ee.r===this.r&&ee.g===this.g&&ee.b===this.b}fromArray(ee,te=0){return this.r=ee[te],this.g=ee[te+1],this.b=ee[te+2],this}toArray(ee=[],te=0){return ee[te]=this.r,ee[te+1]=this.g,ee[te+2]=this.b,ee}fromBufferAttribute(ee,te){return this.r=ee.getX(te),this.g=ee.getY(te),this.b=ee.getZ(te),ee.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Color$1.NAMES=_colorKeywords,Color$1.prototype.isColor=!0,Color$1.prototype.r=1,Color$1.prototype.g=1,Color$1.prototype.b=1;class MeshBasicMaterial extends Material{constructor(ee){super(),this.type="MeshBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(ee)}copy(ee){return super.copy(ee),this.color.copy(ee.color),this.map=ee.map,this.lightMap=ee.lightMap,this.lightMapIntensity=ee.lightMapIntensity,this.aoMap=ee.aoMap,this.aoMapIntensity=ee.aoMapIntensity,this.specularMap=ee.specularMap,this.alphaMap=ee.alphaMap,this.envMap=ee.envMap,this.combine=ee.combine,this.reflectivity=ee.reflectivity,this.refractionRatio=ee.refractionRatio,this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this.wireframeLinecap=ee.wireframeLinecap,this.wireframeLinejoin=ee.wireframeLinejoin,this}}MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;const _vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(ee,te,re){if(Array.isArray(ee))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=ee,this.itemSize=te,this.count=ee!==void 0?ee.length/te:0,this.normalized=re===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(ee){ee===!0&&this.version++}setUsage(ee){return this.usage=ee,this}copy(ee){return this.name=ee.name,this.array=new ee.array.constructor(ee.array),this.itemSize=ee.itemSize,this.count=ee.count,this.normalized=ee.normalized,this.usage=ee.usage,this}copyAt(ee,te,re){ee*=this.itemSize,re*=te.itemSize;for(let ne=0,se=this.itemSize;ne<se;ne++)this.array[ee+ne]=te.array[re+ne];return this}copyArray(ee){return this.array.set(ee),this}copyColorsArray(ee){const te=this.array;let re=0;for(let ne=0,se=ee.length;ne<se;ne++){let ae=ee[ne];ae===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",ne),ae=new Color$1),te[re++]=ae.r,te[re++]=ae.g,te[re++]=ae.b}return this}copyVector2sArray(ee){const te=this.array;let re=0;for(let ne=0,se=ee.length;ne<se;ne++){let ae=ee[ne];ae===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",ne),ae=new Vector2),te[re++]=ae.x,te[re++]=ae.y}return this}copyVector3sArray(ee){const te=this.array;let re=0;for(let ne=0,se=ee.length;ne<se;ne++){let ae=ee[ne];ae===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",ne),ae=new Vector3),te[re++]=ae.x,te[re++]=ae.y,te[re++]=ae.z}return this}copyVector4sArray(ee){const te=this.array;let re=0;for(let ne=0,se=ee.length;ne<se;ne++){let ae=ee[ne];ae===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",ne),ae=new Vector4),te[re++]=ae.x,te[re++]=ae.y,te[re++]=ae.z,te[re++]=ae.w}return this}applyMatrix3(ee){if(this.itemSize===2)for(let te=0,re=this.count;te<re;te++)_vector2$1.fromBufferAttribute(this,te),_vector2$1.applyMatrix3(ee),this.setXY(te,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let te=0,re=this.count;te<re;te++)_vector$9.fromBufferAttribute(this,te),_vector$9.applyMatrix3(ee),this.setXYZ(te,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(ee){for(let te=0,re=this.count;te<re;te++)_vector$9.x=this.getX(te),_vector$9.y=this.getY(te),_vector$9.z=this.getZ(te),_vector$9.applyMatrix4(ee),this.setXYZ(te,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(ee){for(let te=0,re=this.count;te<re;te++)_vector$9.x=this.getX(te),_vector$9.y=this.getY(te),_vector$9.z=this.getZ(te),_vector$9.applyNormalMatrix(ee),this.setXYZ(te,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(ee){for(let te=0,re=this.count;te<re;te++)_vector$9.x=this.getX(te),_vector$9.y=this.getY(te),_vector$9.z=this.getZ(te),_vector$9.transformDirection(ee),this.setXYZ(te,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(ee,te=0){return this.array.set(ee,te),this}getX(ee){return this.array[ee*this.itemSize]}setX(ee,te){return this.array[ee*this.itemSize]=te,this}getY(ee){return this.array[ee*this.itemSize+1]}setY(ee,te){return this.array[ee*this.itemSize+1]=te,this}getZ(ee){return this.array[ee*this.itemSize+2]}setZ(ee,te){return this.array[ee*this.itemSize+2]=te,this}getW(ee){return this.array[ee*this.itemSize+3]}setW(ee,te){return this.array[ee*this.itemSize+3]=te,this}setXY(ee,te,re){return ee*=this.itemSize,this.array[ee+0]=te,this.array[ee+1]=re,this}setXYZ(ee,te,re,ne){return ee*=this.itemSize,this.array[ee+0]=te,this.array[ee+1]=re,this.array[ee+2]=ne,this}setXYZW(ee,te,re,ne,se){return ee*=this.itemSize,this.array[ee+0]=te,this.array[ee+1]=re,this.array[ee+2]=ne,this.array[ee+3]=se,this}onUpload(ee){return this.onUploadCallback=ee,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const ee={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(ee.name=this.name),this.usage!==StaticDrawUsage&&(ee.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(ee.updateRange=this.updateRange),ee}}BufferAttribute.prototype.isBufferAttribute=!0;class Uint16BufferAttribute extends BufferAttribute{constructor(ee,te,re){super(new Uint16Array(ee),te,re)}}class Uint32BufferAttribute extends BufferAttribute{constructor(ee,te,re){super(new Uint32Array(ee),te,re)}}class Float16BufferAttribute extends BufferAttribute{constructor(ee,te,re){super(new Uint16Array(ee),te,re)}}Float16BufferAttribute.prototype.isFloat16BufferAttribute=!0;class Float32BufferAttribute extends BufferAttribute{constructor(ee,te,re){super(new Float32Array(ee),te,re)}}let _id=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),Object.defineProperty(this,"id",{value:_id++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(ee){return Array.isArray(ee)?this.index=new(arrayMax(ee)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(ee,1):this.index=ee,this}getAttribute(ee){return this.attributes[ee]}setAttribute(ee,te){return this.attributes[ee]=te,this}deleteAttribute(ee){return delete this.attributes[ee],this}hasAttribute(ee){return this.attributes[ee]!==void 0}addGroup(ee,te,re=0){this.groups.push({start:ee,count:te,materialIndex:re})}clearGroups(){this.groups=[]}setDrawRange(ee,te){this.drawRange.start=ee,this.drawRange.count=te}applyMatrix4(ee){const te=this.attributes.position;te!==void 0&&(te.applyMatrix4(ee),te.needsUpdate=!0);const re=this.attributes.normal;if(re!==void 0){const se=new Matrix3().getNormalMatrix(ee);re.applyNormalMatrix(se),re.needsUpdate=!0}const ne=this.attributes.tangent;return ne!==void 0&&(ne.transformDirection(ee),ne.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(ee){return _m1.makeRotationFromQuaternion(ee),this.applyMatrix4(_m1),this}rotateX(ee){return _m1.makeRotationX(ee),this.applyMatrix4(_m1),this}rotateY(ee){return _m1.makeRotationY(ee),this.applyMatrix4(_m1),this}rotateZ(ee){return _m1.makeRotationZ(ee),this.applyMatrix4(_m1),this}translate(ee,te,re){return _m1.makeTranslation(ee,te,re),this.applyMatrix4(_m1),this}scale(ee,te,re){return _m1.makeScale(ee,te,re),this.applyMatrix4(_m1),this}lookAt(ee){return _obj.lookAt(ee),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(ee){const te=[];for(let re=0,ne=ee.length;re<ne;re++){const se=ee[re];te.push(se.x,se.y,se.z||0)}return this.setAttribute("position",new Float32BufferAttribute(te,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const ee=this.attributes.position,te=this.morphAttributes.position;if(ee&&ee.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(ee!==void 0){if(this.boundingBox.setFromBufferAttribute(ee),te)for(let re=0,ne=te.length;re<ne;re++){const se=te[re];_box$1.setFromBufferAttribute(se),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const ee=this.attributes.position,te=this.morphAttributes.position;if(ee&&ee.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(ee){const re=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(ee),te)for(let se=0,ae=te.length;se<ae;se++){const oe=te[se];_boxMorphTargets.setFromBufferAttribute(oe),this.morphTargetsRelative?(_vector$8.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$8),_vector$8.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$8)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max))}_box$1.getCenter(re);let ne=0;for(let se=0,ae=ee.count;se<ae;se++)_vector$8.fromBufferAttribute(ee,se),ne=Math.max(ne,re.distanceToSquared(_vector$8));if(te)for(let se=0,ae=te.length;se<ae;se++){const oe=te[se],le=this.morphTargetsRelative;for(let he=0,ce=oe.count;he<ce;he++)_vector$8.fromBufferAttribute(oe,he),le&&(_offset.fromBufferAttribute(ee,he),_vector$8.add(_offset)),ne=Math.max(ne,re.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(ne),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const ee=this.index,te=this.attributes;if(ee===null||te.position===void 0||te.normal===void 0||te.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const re=ee.array,ne=te.position.array,se=te.normal.array,ae=te.uv.array,oe=ne.length/3;te.tangent===void 0&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*oe),4));const le=te.tangent.array,he=[],ce=[];for(let Be=0;Be<oe;Be++)he[Be]=new Vector3,ce[Be]=new Vector3;const de=new Vector3,ue=new Vector3,fe=new Vector3,pe=new Vector2,me=new Vector2,xe=new Vector2,ge=new Vector3,_e=new Vector3;function ve(Be,Ce,De){de.fromArray(ne,Be*3),ue.fromArray(ne,Ce*3),fe.fromArray(ne,De*3),pe.fromArray(ae,Be*2),me.fromArray(ae,Ce*2),xe.fromArray(ae,De*2),ue.sub(de),fe.sub(de),me.sub(pe),xe.sub(pe);const Re=1/(me.x*xe.y-xe.x*me.y);!isFinite(Re)||(ge.copy(ue).multiplyScalar(xe.y).addScaledVector(fe,-me.y).multiplyScalar(Re),_e.copy(fe).multiplyScalar(me.x).addScaledVector(ue,-xe.x).multiplyScalar(Re),he[Be].add(ge),he[Ce].add(ge),he[De].add(ge),ce[Be].add(_e),ce[Ce].add(_e),ce[De].add(_e))}let ye=this.groups;ye.length===0&&(ye=[{start:0,count:re.length}]);for(let Be=0,Ce=ye.length;Be<Ce;++Be){const De=ye[Be],Re=De.start,Le=De.count;for(let ke=Re,Me=Re+Le;ke<Me;ke+=3)ve(re[ke+0],re[ke+1],re[ke+2])}const be=new Vector3,we=new Vector3,Se=new Vector3,Te=new Vector3;function Pe(Be){Se.fromArray(se,Be*3),Te.copy(Se);const Ce=he[Be];be.copy(Ce),be.sub(Se.multiplyScalar(Se.dot(Ce))).normalize(),we.crossVectors(Te,Ce);const Re=we.dot(ce[Be])<0?-1:1;le[Be*4]=be.x,le[Be*4+1]=be.y,le[Be*4+2]=be.z,le[Be*4+3]=Re}for(let Be=0,Ce=ye.length;Be<Ce;++Be){const De=ye[Be],Re=De.start,Le=De.count;for(let ke=Re,Me=Re+Le;ke<Me;ke+=3)Pe(re[ke+0]),Pe(re[ke+1]),Pe(re[ke+2])}}computeVertexNormals(){const ee=this.index,te=this.getAttribute("position");if(te!==void 0){let re=this.getAttribute("normal");if(re===void 0)re=new BufferAttribute(new Float32Array(te.count*3),3),this.setAttribute("normal",re);else for(let ue=0,fe=re.count;ue<fe;ue++)re.setXYZ(ue,0,0,0);const ne=new Vector3,se=new Vector3,ae=new Vector3,oe=new Vector3,le=new Vector3,he=new Vector3,ce=new Vector3,de=new Vector3;if(ee)for(let ue=0,fe=ee.count;ue<fe;ue+=3){const pe=ee.getX(ue+0),me=ee.getX(ue+1),xe=ee.getX(ue+2);ne.fromBufferAttribute(te,pe),se.fromBufferAttribute(te,me),ae.fromBufferAttribute(te,xe),ce.subVectors(ae,se),de.subVectors(ne,se),ce.cross(de),oe.fromBufferAttribute(re,pe),le.fromBufferAttribute(re,me),he.fromBufferAttribute(re,xe),oe.add(ce),le.add(ce),he.add(ce),re.setXYZ(pe,oe.x,oe.y,oe.z),re.setXYZ(me,le.x,le.y,le.z),re.setXYZ(xe,he.x,he.y,he.z)}else for(let ue=0,fe=te.count;ue<fe;ue+=3)ne.fromBufferAttribute(te,ue+0),se.fromBufferAttribute(te,ue+1),ae.fromBufferAttribute(te,ue+2),ce.subVectors(ae,se),de.subVectors(ne,se),ce.cross(de),re.setXYZ(ue+0,ce.x,ce.y,ce.z),re.setXYZ(ue+1,ce.x,ce.y,ce.z),re.setXYZ(ue+2,ce.x,ce.y,ce.z);this.normalizeNormals(),re.needsUpdate=!0}}merge(ee,te){if(!(ee&&ee.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",ee);return}te===void 0&&(te=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const re=this.attributes;for(const ne in re){if(ee.attributes[ne]===void 0)continue;const ae=re[ne].array,oe=ee.attributes[ne],le=oe.array,he=oe.itemSize*te,ce=Math.min(le.length,ae.length-he);for(let de=0,ue=he;de<ce;de++,ue++)ae[ue]=le[de]}return this}normalizeNormals(){const ee=this.attributes.normal;for(let te=0,re=ee.count;te<re;te++)_vector$8.fromBufferAttribute(ee,te),_vector$8.normalize(),ee.setXYZ(te,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function ee(oe,le){const he=oe.array,ce=oe.itemSize,de=oe.normalized,ue=new he.constructor(le.length*ce);let fe=0,pe=0;for(let me=0,xe=le.length;me<xe;me++){oe.isInterleavedBufferAttribute?fe=le[me]*oe.data.stride+oe.offset:fe=le[me]*ce;for(let ge=0;ge<ce;ge++)ue[pe++]=he[fe++]}return new BufferAttribute(ue,ce,de)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const te=new BufferGeometry,re=this.index.array,ne=this.attributes;for(const oe in ne){const le=ne[oe],he=ee(le,re);te.setAttribute(oe,he)}const se=this.morphAttributes;for(const oe in se){const le=[],he=se[oe];for(let ce=0,de=he.length;ce<de;ce++){const ue=he[ce],fe=ee(ue,re);le.push(fe)}te.morphAttributes[oe]=le}te.morphTargetsRelative=this.morphTargetsRelative;const ae=this.groups;for(let oe=0,le=ae.length;oe<le;oe++){const he=ae[oe];te.addGroup(he.start,he.count,he.materialIndex)}return te}toJSON(){const ee={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(ee.uuid=this.uuid,ee.type=this.type,this.name!==""&&(ee.name=this.name),Object.keys(this.userData).length>0&&(ee.userData=this.userData),this.parameters!==void 0){const le=this.parameters;for(const he in le)le[he]!==void 0&&(ee[he]=le[he]);return ee}ee.data={attributes:{}};const te=this.index;te!==null&&(ee.data.index={type:te.array.constructor.name,array:Array.prototype.slice.call(te.array)});const re=this.attributes;for(const le in re){const he=re[le];ee.data.attributes[le]=he.toJSON(ee.data)}const ne={};let se=!1;for(const le in this.morphAttributes){const he=this.morphAttributes[le],ce=[];for(let de=0,ue=he.length;de<ue;de++){const fe=he[de];ce.push(fe.toJSON(ee.data))}ce.length>0&&(ne[le]=ce,se=!0)}se&&(ee.data.morphAttributes=ne,ee.data.morphTargetsRelative=this.morphTargetsRelative);const ae=this.groups;ae.length>0&&(ee.data.groups=JSON.parse(JSON.stringify(ae)));const oe=this.boundingSphere;return oe!==null&&(ee.data.boundingSphere={center:oe.center.toArray(),radius:oe.radius}),ee}clone(){return new this.constructor().copy(this)}copy(ee){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const te={};this.name=ee.name;const re=ee.index;re!==null&&this.setIndex(re.clone(te));const ne=ee.attributes;for(const he in ne){const ce=ne[he];this.setAttribute(he,ce.clone(te))}const se=ee.morphAttributes;for(const he in se){const ce=[],de=se[he];for(let ue=0,fe=de.length;ue<fe;ue++)ce.push(de[ue].clone(te));this.morphAttributes[he]=ce}this.morphTargetsRelative=ee.morphTargetsRelative;const ae=ee.groups;for(let he=0,ce=ae.length;he<ce;he++){const de=ae[he];this.addGroup(de.start,de.count,de.materialIndex)}const oe=ee.boundingBox;oe!==null&&(this.boundingBox=oe.clone());const le=ee.boundingSphere;return le!==null&&(this.boundingSphere=le.clone()),this.drawRange.start=ee.drawRange.start,this.drawRange.count=ee.drawRange.count,this.userData=ee.userData,ee.parameters!==void 0&&(this.parameters=Object.assign({},ee.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}BufferGeometry.prototype.isBufferGeometry=!0;const _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh$1 extends Object3D{constructor(ee=new BufferGeometry,te=new MeshBasicMaterial){super(),this.type="Mesh",this.geometry=ee,this.material=te,this.updateMorphTargets()}copy(ee){return super.copy(ee),ee.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=ee.morphTargetInfluences.slice()),ee.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},ee.morphTargetDictionary)),this.material=ee.material,this.geometry=ee.geometry,this}updateMorphTargets(){const ee=this.geometry;if(ee.isBufferGeometry){const te=ee.morphAttributes,re=Object.keys(te);if(re.length>0){const ne=te[re[0]];if(ne!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let se=0,ae=ne.length;se<ae;se++){const oe=ne[se].name||String(se);this.morphTargetInfluences.push(0),this.morphTargetDictionary[oe]=se}}}}else{const te=ee.morphTargets;te!==void 0&&te.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(ee,te){const re=this.geometry,ne=this.material,se=this.matrixWorld;if(ne===void 0||(re.boundingSphere===null&&re.computeBoundingSphere(),_sphere$3.copy(re.boundingSphere),_sphere$3.applyMatrix4(se),ee.ray.intersectsSphere(_sphere$3)===!1)||(_inverseMatrix$2.copy(se).invert(),_ray$2.copy(ee.ray).applyMatrix4(_inverseMatrix$2),re.boundingBox!==null&&_ray$2.intersectsBox(re.boundingBox)===!1))return;let ae;if(re.isBufferGeometry){const oe=re.index,le=re.attributes.position,he=re.morphAttributes.position,ce=re.morphTargetsRelative,de=re.attributes.uv,ue=re.attributes.uv2,fe=re.groups,pe=re.drawRange;if(oe!==null)if(Array.isArray(ne))for(let me=0,xe=fe.length;me<xe;me++){const ge=fe[me],_e=ne[ge.materialIndex],ve=Math.max(ge.start,pe.start),ye=Math.min(oe.count,Math.min(ge.start+ge.count,pe.start+pe.count));for(let be=ve,we=ye;be<we;be+=3){const Se=oe.getX(be),Te=oe.getX(be+1),Pe=oe.getX(be+2);ae=checkBufferGeometryIntersection(this,_e,ee,_ray$2,le,he,ce,de,ue,Se,Te,Pe),ae&&(ae.faceIndex=Math.floor(be/3),ae.face.materialIndex=ge.materialIndex,te.push(ae))}}else{const me=Math.max(0,pe.start),xe=Math.min(oe.count,pe.start+pe.count);for(let ge=me,_e=xe;ge<_e;ge+=3){const ve=oe.getX(ge),ye=oe.getX(ge+1),be=oe.getX(ge+2);ae=checkBufferGeometryIntersection(this,ne,ee,_ray$2,le,he,ce,de,ue,ve,ye,be),ae&&(ae.faceIndex=Math.floor(ge/3),te.push(ae))}}else if(le!==void 0)if(Array.isArray(ne))for(let me=0,xe=fe.length;me<xe;me++){const ge=fe[me],_e=ne[ge.materialIndex],ve=Math.max(ge.start,pe.start),ye=Math.min(le.count,Math.min(ge.start+ge.count,pe.start+pe.count));for(let be=ve,we=ye;be<we;be+=3){const Se=be,Te=be+1,Pe=be+2;ae=checkBufferGeometryIntersection(this,_e,ee,_ray$2,le,he,ce,de,ue,Se,Te,Pe),ae&&(ae.faceIndex=Math.floor(be/3),ae.face.materialIndex=ge.materialIndex,te.push(ae))}}else{const me=Math.max(0,pe.start),xe=Math.min(le.count,pe.start+pe.count);for(let ge=me,_e=xe;ge<_e;ge+=3){const ve=ge,ye=ge+1,be=ge+2;ae=checkBufferGeometryIntersection(this,ne,ee,_ray$2,le,he,ce,de,ue,ve,ye,be),ae&&(ae.faceIndex=Math.floor(ge/3),te.push(ae))}}}else re.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Mesh$1.prototype.isMesh=!0;function checkIntersection(ie,ee,te,re,ne,se,ae,oe){let le;if(ee.side===BackSide?le=re.intersectTriangle(ae,se,ne,!0,oe):le=re.intersectTriangle(ne,se,ae,ee.side!==DoubleSide,oe),le===null)return null;_intersectionPointWorld.copy(oe),_intersectionPointWorld.applyMatrix4(ie.matrixWorld);const he=te.ray.origin.distanceTo(_intersectionPointWorld);return he<te.near||he>te.far?null:{distance:he,point:_intersectionPointWorld.clone(),object:ie}}function checkBufferGeometryIntersection(ie,ee,te,re,ne,se,ae,oe,le,he,ce,de){_vA$1.fromBufferAttribute(ne,he),_vB$1.fromBufferAttribute(ne,ce),_vC$1.fromBufferAttribute(ne,de);const ue=ie.morphTargetInfluences;if(se&&ue){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(let pe=0,me=se.length;pe<me;pe++){const xe=ue[pe],ge=se[pe];xe!==0&&(_tempA.fromBufferAttribute(ge,he),_tempB.fromBufferAttribute(ge,ce),_tempC.fromBufferAttribute(ge,de),ae?(_morphA.addScaledVector(_tempA,xe),_morphB.addScaledVector(_tempB,xe),_morphC.addScaledVector(_tempC,xe)):(_morphA.addScaledVector(_tempA.sub(_vA$1),xe),_morphB.addScaledVector(_tempB.sub(_vB$1),xe),_morphC.addScaledVector(_tempC.sub(_vC$1),xe)))}_vA$1.add(_morphA),_vB$1.add(_morphB),_vC$1.add(_morphC)}ie.isSkinnedMesh&&(ie.boneTransform(he,_vA$1),ie.boneTransform(ce,_vB$1),ie.boneTransform(de,_vC$1));const fe=checkIntersection(ie,ee,te,re,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(fe){oe&&(_uvA$1.fromBufferAttribute(oe,he),_uvB$1.fromBufferAttribute(oe,ce),_uvC$1.fromBufferAttribute(oe,de),fe.uv=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),le&&(_uvA$1.fromBufferAttribute(le,he),_uvB$1.fromBufferAttribute(le,ce),_uvC$1.fromBufferAttribute(le,de),fe.uv2=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2));const pe={a:he,b:ce,c:de,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,pe.normal),fe.face=pe}return fe}class BoxGeometry extends BufferGeometry{constructor(ee=1,te=1,re=1,ne=1,se=1,ae=1){super(),this.type="BoxGeometry",this.parameters={width:ee,height:te,depth:re,widthSegments:ne,heightSegments:se,depthSegments:ae};const oe=this;ne=Math.floor(ne),se=Math.floor(se),ae=Math.floor(ae);const le=[],he=[],ce=[],de=[];let ue=0,fe=0;pe("z","y","x",-1,-1,re,te,ee,ae,se,0),pe("z","y","x",1,-1,re,te,-ee,ae,se,1),pe("x","z","y",1,1,ee,re,te,ne,ae,2),pe("x","z","y",1,-1,ee,re,-te,ne,ae,3),pe("x","y","z",1,-1,ee,te,re,ne,se,4),pe("x","y","z",-1,-1,ee,te,-re,ne,se,5),this.setIndex(le),this.setAttribute("position",new Float32BufferAttribute(he,3)),this.setAttribute("normal",new Float32BufferAttribute(ce,3)),this.setAttribute("uv",new Float32BufferAttribute(de,2));function pe(me,xe,ge,_e,ve,ye,be,we,Se,Te,Pe){const Be=ye/Se,Ce=be/Te,De=ye/2,Re=be/2,Le=we/2,ke=Se+1,Me=Te+1;let Ee=0,Ae=0;const Ie=new Vector3;for(let Fe=0;Fe<Me;Fe++){const Ne=Fe*Ce-Re;for(let $e=0;$e<ke;$e++){const ze=$e*Be-De;Ie[me]=ze*_e,Ie[xe]=Ne*ve,Ie[ge]=Le,he.push(Ie.x,Ie.y,Ie.z),Ie[me]=0,Ie[xe]=0,Ie[ge]=we>0?1:-1,ce.push(Ie.x,Ie.y,Ie.z),de.push($e/Se),de.push(1-Fe/Te),Ee+=1}}for(let Fe=0;Fe<Te;Fe++)for(let Ne=0;Ne<Se;Ne++){const $e=ue+Ne+ke*Fe,ze=ue+Ne+ke*(Fe+1),Xe=ue+(Ne+1)+ke*(Fe+1),Je=ue+(Ne+1)+ke*Fe;le.push($e,ze,Je),le.push(ze,Xe,Je),Ae+=6}oe.addGroup(fe,Ae,Pe),fe+=Ae,ue+=Ee}}static fromJSON(ee){return new BoxGeometry(ee.width,ee.height,ee.depth,ee.widthSegments,ee.heightSegments,ee.depthSegments)}}function cloneUniforms(ie){const ee={};for(const te in ie){ee[te]={};for(const re in ie[te]){const ne=ie[te][re];ne&&(ne.isColor||ne.isMatrix3||ne.isMatrix4||ne.isVector2||ne.isVector3||ne.isVector4||ne.isTexture||ne.isQuaternion)?ee[te][re]=ne.clone():Array.isArray(ne)?ee[te][re]=ne.slice():ee[te][re]=ne}}return ee}function mergeUniforms(ie){const ee={};for(let te=0;te<ie.length;te++){const re=cloneUniforms(ie[te]);for(const ne in re)ee[ne]=re[ne]}return ee}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(ee){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,ee!==void 0&&(ee.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(ee))}copy(ee){return super.copy(ee),this.fragmentShader=ee.fragmentShader,this.vertexShader=ee.vertexShader,this.uniforms=cloneUniforms(ee.uniforms),this.defines=Object.assign({},ee.defines),this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this.lights=ee.lights,this.clipping=ee.clipping,this.extensions=Object.assign({},ee.extensions),this.glslVersion=ee.glslVersion,this}toJSON(ee){const te=super.toJSON(ee);te.glslVersion=this.glslVersion,te.uniforms={};for(const ne in this.uniforms){const ae=this.uniforms[ne].value;ae&&ae.isTexture?te.uniforms[ne]={type:"t",value:ae.toJSON(ee).uuid}:ae&&ae.isColor?te.uniforms[ne]={type:"c",value:ae.getHex()}:ae&&ae.isVector2?te.uniforms[ne]={type:"v2",value:ae.toArray()}:ae&&ae.isVector3?te.uniforms[ne]={type:"v3",value:ae.toArray()}:ae&&ae.isVector4?te.uniforms[ne]={type:"v4",value:ae.toArray()}:ae&&ae.isMatrix3?te.uniforms[ne]={type:"m3",value:ae.toArray()}:ae&&ae.isMatrix4?te.uniforms[ne]={type:"m4",value:ae.toArray()}:te.uniforms[ne]={value:ae}}Object.keys(this.defines).length>0&&(te.defines=this.defines),te.vertexShader=this.vertexShader,te.fragmentShader=this.fragmentShader;const re={};for(const ne in this.extensions)this.extensions[ne]===!0&&(re[ne]=!0);return Object.keys(re).length>0&&(te.extensions=re),te}}ShaderMaterial.prototype.isShaderMaterial=!0;class Camera extends Object3D{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy(ee,te){return super.copy(ee,te),this.matrixWorldInverse.copy(ee.matrixWorldInverse),this.projectionMatrix.copy(ee.projectionMatrix),this.projectionMatrixInverse.copy(ee.projectionMatrixInverse),this}getWorldDirection(ee){this.updateWorldMatrix(!0,!1);const te=this.matrixWorld.elements;return ee.set(-te[8],-te[9],-te[10]).normalize()}updateMatrixWorld(ee){super.updateMatrixWorld(ee),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(ee,te){super.updateWorldMatrix(ee,te),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Camera.prototype.isCamera=!0;class PerspectiveCamera extends Camera{constructor(ee=50,te=1,re=.1,ne=2e3){super(),this.type="PerspectiveCamera",this.fov=ee,this.zoom=1,this.near=re,this.far=ne,this.focus=10,this.aspect=te,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(ee,te){return super.copy(ee,te),this.fov=ee.fov,this.zoom=ee.zoom,this.near=ee.near,this.far=ee.far,this.focus=ee.focus,this.aspect=ee.aspect,this.view=ee.view===null?null:Object.assign({},ee.view),this.filmGauge=ee.filmGauge,this.filmOffset=ee.filmOffset,this}setFocalLength(ee){const te=.5*this.getFilmHeight()/ee;this.fov=RAD2DEG*2*Math.atan(te),this.updateProjectionMatrix()}getFocalLength(){const ee=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/ee}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(ee,te,re,ne,se,ae){this.aspect=ee/te,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=ee,this.view.fullHeight=te,this.view.offsetX=re,this.view.offsetY=ne,this.view.width=se,this.view.height=ae,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const ee=this.near;let te=ee*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,re=2*te,ne=this.aspect*re,se=-.5*ne;const ae=this.view;if(this.view!==null&&this.view.enabled){const le=ae.fullWidth,he=ae.fullHeight;se+=ae.offsetX*ne/le,te-=ae.offsetY*re/he,ne*=ae.width/le,re*=ae.height/he}const oe=this.filmOffset;oe!==0&&(se+=ee*oe/this.getFilmWidth()),this.projectionMatrix.makePerspective(se,se+ne,te,te-re,ee,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(ee){const te=super.toJSON(ee);return te.object.fov=this.fov,te.object.zoom=this.zoom,te.object.near=this.near,te.object.far=this.far,te.object.focus=this.focus,te.object.aspect=this.aspect,this.view!==null&&(te.object.view=Object.assign({},this.view)),te.object.filmGauge=this.filmGauge,te.object.filmOffset=this.filmOffset,te}}PerspectiveCamera.prototype.isPerspectiveCamera=!0;const fov=90,aspect=1;class CubeCamera extends Object3D{constructor(ee,te,re){if(super(),this.type="CubeCamera",re.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=re;const ne=new PerspectiveCamera(fov,aspect,ee,te);ne.layers=this.layers,ne.up.set(0,-1,0),ne.lookAt(new Vector3(1,0,0)),this.add(ne);const se=new PerspectiveCamera(fov,aspect,ee,te);se.layers=this.layers,se.up.set(0,-1,0),se.lookAt(new Vector3(-1,0,0)),this.add(se);const ae=new PerspectiveCamera(fov,aspect,ee,te);ae.layers=this.layers,ae.up.set(0,0,1),ae.lookAt(new Vector3(0,1,0)),this.add(ae);const oe=new PerspectiveCamera(fov,aspect,ee,te);oe.layers=this.layers,oe.up.set(0,0,-1),oe.lookAt(new Vector3(0,-1,0)),this.add(oe);const le=new PerspectiveCamera(fov,aspect,ee,te);le.layers=this.layers,le.up.set(0,-1,0),le.lookAt(new Vector3(0,0,1)),this.add(le);const he=new PerspectiveCamera(fov,aspect,ee,te);he.layers=this.layers,he.up.set(0,-1,0),he.lookAt(new Vector3(0,0,-1)),this.add(he)}update(ee,te){this.parent===null&&this.updateMatrixWorld();const re=this.renderTarget,[ne,se,ae,oe,le,he]=this.children,ce=ee.xr.enabled,de=ee.getRenderTarget();ee.xr.enabled=!1;const ue=re.texture.generateMipmaps;re.texture.generateMipmaps=!1,ee.setRenderTarget(re,0),ee.render(te,ne),ee.setRenderTarget(re,1),ee.render(te,se),ee.setRenderTarget(re,2),ee.render(te,ae),ee.setRenderTarget(re,3),ee.render(te,oe),ee.setRenderTarget(re,4),ee.render(te,le),re.texture.generateMipmaps=ue,ee.setRenderTarget(re,5),ee.render(te,he),ee.setRenderTarget(de),ee.xr.enabled=ce}}class CubeTexture extends Texture$1{constructor(ee,te,re,ne,se,ae,oe,le,he,ce){ee=ee!==void 0?ee:[],te=te!==void 0?te:CubeReflectionMapping,super(ee,te,re,ne,se,ae,oe,le,he,ce),this.flipY=!1}get images(){return this.image}set images(ee){this.image=ee}}CubeTexture.prototype.isCubeTexture=!0;class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(ee,te,re){Number.isInteger(te)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),te=re),super(ee,ee,te),te=te||{},this.texture=new CubeTexture(void 0,te.mapping,te.wrapS,te.wrapT,te.magFilter,te.minFilter,te.format,te.type,te.anisotropy,te.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=te.generateMipmaps!==void 0?te.generateMipmaps:!1,this.texture.minFilter=te.minFilter!==void 0?te.minFilter:LinearFilter,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(ee,te){this.texture.type=te.type,this.texture.format=RGBAFormat,this.texture.encoding=te.encoding,this.texture.generateMipmaps=te.generateMipmaps,this.texture.minFilter=te.minFilter,this.texture.magFilter=te.magFilter;const re={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},ne=new BoxGeometry(5,5,5),se=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(re.uniforms),vertexShader:re.vertexShader,fragmentShader:re.fragmentShader,side:BackSide,blending:NoBlending});se.uniforms.tEquirect.value=te;const ae=new Mesh$1(ne,se),oe=te.minFilter;return te.minFilter===LinearMipmapLinearFilter&&(te.minFilter=LinearFilter),new CubeCamera(1,10,this).update(ee,ae),te.minFilter=oe,ae.geometry.dispose(),ae.material.dispose(),this}clear(ee,te,re,ne){const se=ee.getRenderTarget();for(let ae=0;ae<6;ae++)ee.setRenderTarget(this,ae),ee.clear(te,re,ne);ee.setRenderTarget(se)}}WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(ee=new Vector3(1,0,0),te=0){this.normal=ee,this.constant=te}set(ee,te){return this.normal.copy(ee),this.constant=te,this}setComponents(ee,te,re,ne){return this.normal.set(ee,te,re),this.constant=ne,this}setFromNormalAndCoplanarPoint(ee,te){return this.normal.copy(ee),this.constant=-te.dot(this.normal),this}setFromCoplanarPoints(ee,te,re){const ne=_vector1.subVectors(re,te).cross(_vector2.subVectors(ee,te)).normalize();return this.setFromNormalAndCoplanarPoint(ne,ee),this}copy(ee){return this.normal.copy(ee.normal),this.constant=ee.constant,this}normalize(){const ee=1/this.normal.length();return this.normal.multiplyScalar(ee),this.constant*=ee,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(ee){return this.normal.dot(ee)+this.constant}distanceToSphere(ee){return this.distanceToPoint(ee.center)-ee.radius}projectPoint(ee,te){return te.copy(this.normal).multiplyScalar(-this.distanceToPoint(ee)).add(ee)}intersectLine(ee,te){const re=ee.delta(_vector1),ne=this.normal.dot(re);if(ne===0)return this.distanceToPoint(ee.start)===0?te.copy(ee.start):null;const se=-(ee.start.dot(this.normal)+this.constant)/ne;return se<0||se>1?null:te.copy(re).multiplyScalar(se).add(ee.start)}intersectsLine(ee){const te=this.distanceToPoint(ee.start),re=this.distanceToPoint(ee.end);return te<0&&re>0||re<0&&te>0}intersectsBox(ee){return ee.intersectsPlane(this)}intersectsSphere(ee){return ee.intersectsPlane(this)}coplanarPoint(ee){return ee.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(ee,te){const re=te||_normalMatrix.getNormalMatrix(ee),ne=this.coplanarPoint(_vector1).applyMatrix4(ee),se=this.normal.applyMatrix3(re).normalize();return this.constant=-ne.dot(se),this}translate(ee){return this.constant-=ee.dot(this.normal),this}equals(ee){return ee.normal.equals(this.normal)&&ee.constant===this.constant}clone(){return new this.constructor().copy(this)}}Plane.prototype.isPlane=!0;const _sphere$2=new Sphere,_vector$7=new Vector3;class Frustum{constructor(ee=new Plane,te=new Plane,re=new Plane,ne=new Plane,se=new Plane,ae=new Plane){this.planes=[ee,te,re,ne,se,ae]}set(ee,te,re,ne,se,ae){const oe=this.planes;return oe[0].copy(ee),oe[1].copy(te),oe[2].copy(re),oe[3].copy(ne),oe[4].copy(se),oe[5].copy(ae),this}copy(ee){const te=this.planes;for(let re=0;re<6;re++)te[re].copy(ee.planes[re]);return this}setFromProjectionMatrix(ee){const te=this.planes,re=ee.elements,ne=re[0],se=re[1],ae=re[2],oe=re[3],le=re[4],he=re[5],ce=re[6],de=re[7],ue=re[8],fe=re[9],pe=re[10],me=re[11],xe=re[12],ge=re[13],_e=re[14],ve=re[15];return te[0].setComponents(oe-ne,de-le,me-ue,ve-xe).normalize(),te[1].setComponents(oe+ne,de+le,me+ue,ve+xe).normalize(),te[2].setComponents(oe+se,de+he,me+fe,ve+ge).normalize(),te[3].setComponents(oe-se,de-he,me-fe,ve-ge).normalize(),te[4].setComponents(oe-ae,de-ce,me-pe,ve-_e).normalize(),te[5].setComponents(oe+ae,de+ce,me+pe,ve+_e).normalize(),this}intersectsObject(ee){const te=ee.geometry;return te.boundingSphere===null&&te.computeBoundingSphere(),_sphere$2.copy(te.boundingSphere).applyMatrix4(ee.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSprite(ee){return _sphere$2.center.set(0,0,0),_sphere$2.radius=.7071067811865476,_sphere$2.applyMatrix4(ee.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSphere(ee){const te=this.planes,re=ee.center,ne=-ee.radius;for(let se=0;se<6;se++)if(te[se].distanceToPoint(re)<ne)return!1;return!0}intersectsBox(ee){const te=this.planes;for(let re=0;re<6;re++){const ne=te[re];if(_vector$7.x=ne.normal.x>0?ee.max.x:ee.min.x,_vector$7.y=ne.normal.y>0?ee.max.y:ee.min.y,_vector$7.z=ne.normal.z>0?ee.max.z:ee.min.z,ne.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(ee){const te=this.planes;for(let re=0;re<6;re++)if(te[re].distanceToPoint(ee)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let ie=null,ee=!1,te=null,re=null;function ne(se,ae){te(se,ae),re=ie.requestAnimationFrame(ne)}return{start:function(){ee!==!0&&te!==null&&(re=ie.requestAnimationFrame(ne),ee=!0)},stop:function(){ie.cancelAnimationFrame(re),ee=!1},setAnimationLoop:function(se){te=se},setContext:function(se){ie=se}}}function WebGLAttributes(ie,ee){const te=ee.isWebGL2,re=new WeakMap;function ne(he,ce){const de=he.array,ue=he.usage,fe=ie.createBuffer();ie.bindBuffer(ce,fe),ie.bufferData(ce,de,ue),he.onUploadCallback();let pe=5126;return de instanceof Float32Array?pe=5126:de instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):de instanceof Uint16Array?he.isFloat16BufferAttribute?te?pe=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):pe=5123:de instanceof Int16Array?pe=5122:de instanceof Uint32Array?pe=5125:de instanceof Int32Array?pe=5124:de instanceof Int8Array?pe=5120:(de instanceof Uint8Array||de instanceof Uint8ClampedArray)&&(pe=5121),{buffer:fe,type:pe,bytesPerElement:de.BYTES_PER_ELEMENT,version:he.version}}function se(he,ce,de){const ue=ce.array,fe=ce.updateRange;ie.bindBuffer(de,he),fe.count===-1?ie.bufferSubData(de,0,ue):(te?ie.bufferSubData(de,fe.offset*ue.BYTES_PER_ELEMENT,ue,fe.offset,fe.count):ie.bufferSubData(de,fe.offset*ue.BYTES_PER_ELEMENT,ue.subarray(fe.offset,fe.offset+fe.count)),fe.count=-1)}function ae(he){return he.isInterleavedBufferAttribute&&(he=he.data),re.get(he)}function oe(he){he.isInterleavedBufferAttribute&&(he=he.data);const ce=re.get(he);ce&&(ie.deleteBuffer(ce.buffer),re.delete(he))}function le(he,ce){if(he.isGLBufferAttribute){const ue=re.get(he);(!ue||ue.version<he.version)&&re.set(he,{buffer:he.buffer,type:he.type,bytesPerElement:he.elementSize,version:he.version});return}he.isInterleavedBufferAttribute&&(he=he.data);const de=re.get(he);de===void 0?re.set(he,ne(he,ce)):de.version<he.version&&(se(de.buffer,he,ce),de.version=he.version)}return{get:ae,remove:oe,update:le}}class PlaneGeometry extends BufferGeometry{constructor(ee=1,te=1,re=1,ne=1){super(),this.type="PlaneGeometry",this.parameters={width:ee,height:te,widthSegments:re,heightSegments:ne};const se=ee/2,ae=te/2,oe=Math.floor(re),le=Math.floor(ne),he=oe+1,ce=le+1,de=ee/oe,ue=te/le,fe=[],pe=[],me=[],xe=[];for(let ge=0;ge<ce;ge++){const _e=ge*ue-ae;for(let ve=0;ve<he;ve++){const ye=ve*de-se;pe.push(ye,-_e,0),me.push(0,0,1),xe.push(ve/oe),xe.push(1-ge/le)}}for(let ge=0;ge<le;ge++)for(let _e=0;_e<oe;_e++){const ve=_e+he*ge,ye=_e+he*(ge+1),be=_e+1+he*(ge+1),we=_e+1+he*ge;fe.push(ve,ye,we),fe.push(ye,be,we)}this.setIndex(fe),this.setAttribute("position",new Float32BufferAttribute(pe,3)),this.setAttribute("normal",new Float32BufferAttribute(me,3)),this.setAttribute("uv",new Float32BufferAttribute(xe,2))}static fromJSON(ee){return new PlaneGeometry(ee.width,ee.height,ee.widthSegments,ee.heightSegments)}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,output_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$g=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$g=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7$1=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6$1=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5$1=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4$1=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4$1=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3$1=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2$1=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2$1=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vertex$1$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,output_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_vert:vertex$g,background_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7$1,meshphong_vert:vertex$6,meshphong_frag:fragment$6$1,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5$1,meshtoon_vert:vertex$4$1,meshtoon_frag:fragment$4$1,points_vert:vertex$3$1,points_frag:fragment$3$1,shadow_vert:vertex$2$1,shadow_frag:fragment$2$1,sprite_vert:vertex$1$1,sprite_frag:fragment$1$1},UniformsLib={common:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color$1(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},specular:{value:new Color$1(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color$1(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Color$1(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color$1(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Color$1(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(ie,ee,te,re,ne){const se=new Color$1(0);let ae=0,oe,le,he=null,ce=0,de=null;function ue(pe,me){let xe=!1,ge=me.isScene===!0?me.background:null;ge&&ge.isTexture&&(ge=ee.get(ge));const _e=ie.xr,ve=_e.getSession&&_e.getSession();ve&&ve.environmentBlendMode==="additive"&&(ge=null),ge===null?fe(se,ae):ge&&ge.isColor&&(fe(ge,1),xe=!0),(ie.autoClear||xe)&&ie.clear(ie.autoClearColor,ie.autoClearDepth,ie.autoClearStencil),ge&&(ge.isCubeTexture||ge.mapping===CubeUVReflectionMapping)?(le===void 0&&(le=new Mesh$1(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),le.geometry.deleteAttribute("normal"),le.geometry.deleteAttribute("uv"),le.onBeforeRender=function(ye,be,we){this.matrixWorld.copyPosition(we.matrixWorld)},Object.defineProperty(le.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),re.update(le)),le.material.uniforms.envMap.value=ge,le.material.uniforms.flipEnvMap.value=ge.isCubeTexture&&ge.isRenderTargetTexture===!1?-1:1,(he!==ge||ce!==ge.version||de!==ie.toneMapping)&&(le.material.needsUpdate=!0,he=ge,ce=ge.version,de=ie.toneMapping),pe.unshift(le,le.geometry,le.material,0,0,null)):ge&&ge.isTexture&&(oe===void 0&&(oe=new Mesh$1(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),oe.geometry.deleteAttribute("normal"),Object.defineProperty(oe.material,"map",{get:function(){return this.uniforms.t2D.value}}),re.update(oe)),oe.material.uniforms.t2D.value=ge,ge.matrixAutoUpdate===!0&&ge.updateMatrix(),oe.material.uniforms.uvTransform.value.copy(ge.matrix),(he!==ge||ce!==ge.version||de!==ie.toneMapping)&&(oe.material.needsUpdate=!0,he=ge,ce=ge.version,de=ie.toneMapping),pe.unshift(oe,oe.geometry,oe.material,0,0,null))}function fe(pe,me){te.buffers.color.setClear(pe.r,pe.g,pe.b,me,ne)}return{getClearColor:function(){return se},setClearColor:function(pe,me=1){se.set(pe),ae=me,fe(se,ae)},getClearAlpha:function(){return ae},setClearAlpha:function(pe){ae=pe,fe(se,ae)},render:ue}}function WebGLBindingStates(ie,ee,te,re){const ne=ie.getParameter(34921),se=re.isWebGL2?null:ee.get("OES_vertex_array_object"),ae=re.isWebGL2||se!==null,oe={},le=me(null);let he=le;function ce(Re,Le,ke,Me,Ee){let Ae=!1;if(ae){const Ie=pe(Me,ke,Le);he!==Ie&&(he=Ie,ue(he.object)),Ae=xe(Me,Ee),Ae&&ge(Me,Ee)}else{const Ie=Le.wireframe===!0;(he.geometry!==Me.id||he.program!==ke.id||he.wireframe!==Ie)&&(he.geometry=Me.id,he.program=ke.id,he.wireframe=Ie,Ae=!0)}Re.isInstancedMesh===!0&&(Ae=!0),Ee!==null&&te.update(Ee,34963),Ae&&(Se(Re,Le,ke,Me),Ee!==null&&ie.bindBuffer(34963,te.get(Ee).buffer))}function de(){return re.isWebGL2?ie.createVertexArray():se.createVertexArrayOES()}function ue(Re){return re.isWebGL2?ie.bindVertexArray(Re):se.bindVertexArrayOES(Re)}function fe(Re){return re.isWebGL2?ie.deleteVertexArray(Re):se.deleteVertexArrayOES(Re)}function pe(Re,Le,ke){const Me=ke.wireframe===!0;let Ee=oe[Re.id];Ee===void 0&&(Ee={},oe[Re.id]=Ee);let Ae=Ee[Le.id];Ae===void 0&&(Ae={},Ee[Le.id]=Ae);let Ie=Ae[Me];return Ie===void 0&&(Ie=me(de()),Ae[Me]=Ie),Ie}function me(Re){const Le=[],ke=[],Me=[];for(let Ee=0;Ee<ne;Ee++)Le[Ee]=0,ke[Ee]=0,Me[Ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Le,enabledAttributes:ke,attributeDivisors:Me,object:Re,attributes:{},index:null}}function xe(Re,Le){const ke=he.attributes,Me=Re.attributes;let Ee=0;for(const Ae in Me){const Ie=ke[Ae],Fe=Me[Ae];if(Ie===void 0||Ie.attribute!==Fe||Ie.data!==Fe.data)return!0;Ee++}return he.attributesNum!==Ee||he.index!==Le}function ge(Re,Le){const ke={},Me=Re.attributes;let Ee=0;for(const Ae in Me){const Ie=Me[Ae],Fe={};Fe.attribute=Ie,Ie.data&&(Fe.data=Ie.data),ke[Ae]=Fe,Ee++}he.attributes=ke,he.attributesNum=Ee,he.index=Le}function _e(){const Re=he.newAttributes;for(let Le=0,ke=Re.length;Le<ke;Le++)Re[Le]=0}function ve(Re){ye(Re,0)}function ye(Re,Le){const ke=he.newAttributes,Me=he.enabledAttributes,Ee=he.attributeDivisors;ke[Re]=1,Me[Re]===0&&(ie.enableVertexAttribArray(Re),Me[Re]=1),Ee[Re]!==Le&&((re.isWebGL2?ie:ee.get("ANGLE_instanced_arrays"))[re.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Re,Le),Ee[Re]=Le)}function be(){const Re=he.newAttributes,Le=he.enabledAttributes;for(let ke=0,Me=Le.length;ke<Me;ke++)Le[ke]!==Re[ke]&&(ie.disableVertexAttribArray(ke),Le[ke]=0)}function we(Re,Le,ke,Me,Ee,Ae){re.isWebGL2===!0&&(ke===5124||ke===5125)?ie.vertexAttribIPointer(Re,Le,ke,Ee,Ae):ie.vertexAttribPointer(Re,Le,ke,Me,Ee,Ae)}function Se(Re,Le,ke,Me){if(re.isWebGL2===!1&&(Re.isInstancedMesh||Me.isInstancedBufferGeometry)&&ee.get("ANGLE_instanced_arrays")===null)return;_e();const Ee=Me.attributes,Ae=ke.getAttributes(),Ie=Le.defaultAttributeValues;for(const Fe in Ae){const Ne=Ae[Fe];if(Ne.location>=0){let $e=Ee[Fe];if($e===void 0&&(Fe==="instanceMatrix"&&Re.instanceMatrix&&($e=Re.instanceMatrix),Fe==="instanceColor"&&Re.instanceColor&&($e=Re.instanceColor)),$e!==void 0){const ze=$e.normalized,Xe=$e.itemSize,Je=te.get($e);if(Je===void 0)continue;const We=Je.buffer,dt=Je.type,yt=Je.bytesPerElement;if($e.isInterleavedBufferAttribute){const vt=$e.data,at=vt.stride,_t=$e.offset;if(vt&&vt.isInstancedInterleavedBuffer){for(let je=0;je<Ne.locationSize;je++)ye(Ne.location+je,vt.meshPerAttribute);Re.isInstancedMesh!==!0&&Me._maxInstanceCount===void 0&&(Me._maxInstanceCount=vt.meshPerAttribute*vt.count)}else for(let je=0;je<Ne.locationSize;je++)ve(Ne.location+je);ie.bindBuffer(34962,We);for(let je=0;je<Ne.locationSize;je++)we(Ne.location+je,Xe/Ne.locationSize,dt,ze,at*yt,(_t+Xe/Ne.locationSize*je)*yt)}else{if($e.isInstancedBufferAttribute){for(let vt=0;vt<Ne.locationSize;vt++)ye(Ne.location+vt,$e.meshPerAttribute);Re.isInstancedMesh!==!0&&Me._maxInstanceCount===void 0&&(Me._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let vt=0;vt<Ne.locationSize;vt++)ve(Ne.location+vt);ie.bindBuffer(34962,We);for(let vt=0;vt<Ne.locationSize;vt++)we(Ne.location+vt,Xe/Ne.locationSize,dt,ze,Xe*yt,Xe/Ne.locationSize*vt*yt)}}else if(Ie!==void 0){const ze=Ie[Fe];if(ze!==void 0)switch(ze.length){case 2:ie.vertexAttrib2fv(Ne.location,ze);break;case 3:ie.vertexAttrib3fv(Ne.location,ze);break;case 4:ie.vertexAttrib4fv(Ne.location,ze);break;default:ie.vertexAttrib1fv(Ne.location,ze)}}}}be()}function Te(){Ce();for(const Re in oe){const Le=oe[Re];for(const ke in Le){const Me=Le[ke];for(const Ee in Me)fe(Me[Ee].object),delete Me[Ee];delete Le[ke]}delete oe[Re]}}function Pe(Re){if(oe[Re.id]===void 0)return;const Le=oe[Re.id];for(const ke in Le){const Me=Le[ke];for(const Ee in Me)fe(Me[Ee].object),delete Me[Ee];delete Le[ke]}delete oe[Re.id]}function Be(Re){for(const Le in oe){const ke=oe[Le];if(ke[Re.id]===void 0)continue;const Me=ke[Re.id];for(const Ee in Me)fe(Me[Ee].object),delete Me[Ee];delete ke[Re.id]}}function Ce(){De(),he!==le&&(he=le,ue(he.object))}function De(){le.geometry=null,le.program=null,le.wireframe=!1}return{setup:ce,reset:Ce,resetDefaultState:De,dispose:Te,releaseStatesOfGeometry:Pe,releaseStatesOfProgram:Be,initAttributes:_e,enableAttribute:ve,disableUnusedAttributes:be}}function WebGLBufferRenderer(ie,ee,te,re){const ne=re.isWebGL2;let se;function ae(he){se=he}function oe(he,ce){ie.drawArrays(se,he,ce),te.update(ce,se,1)}function le(he,ce,de){if(de===0)return;let ue,fe;if(ne)ue=ie,fe="drawArraysInstanced";else if(ue=ee.get("ANGLE_instanced_arrays"),fe="drawArraysInstancedANGLE",ue===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ue[fe](se,he,ce,de),te.update(ce,se,de)}this.setMode=ae,this.render=oe,this.renderInstances=le}function WebGLCapabilities(ie,ee,te){let re;function ne(){if(re!==void 0)return re;if(ee.has("EXT_texture_filter_anisotropic")===!0){const Se=ee.get("EXT_texture_filter_anisotropic");re=ie.getParameter(Se.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else re=0;return re}function se(Se){if(Se==="highp"){if(ie.getShaderPrecisionFormat(35633,36338).precision>0&&ie.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Se="mediump"}return Se==="mediump"&&ie.getShaderPrecisionFormat(35633,36337).precision>0&&ie.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const ae=typeof WebGL2RenderingContext!="undefined"&&ie instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&ie instanceof WebGL2ComputeRenderingContext;let oe=te.precision!==void 0?te.precision:"highp";const le=se(oe);le!==oe&&(console.warn("THREE.WebGLRenderer:",oe,"not supported, using",le,"instead."),oe=le);const he=ae||ee.has("WEBGL_draw_buffers"),ce=te.logarithmicDepthBuffer===!0,de=ie.getParameter(34930),ue=ie.getParameter(35660),fe=ie.getParameter(3379),pe=ie.getParameter(34076),me=ie.getParameter(34921),xe=ie.getParameter(36347),ge=ie.getParameter(36348),_e=ie.getParameter(36349),ve=ue>0,ye=ae||ee.has("OES_texture_float"),be=ve&&ye,we=ae?ie.getParameter(36183):0;return{isWebGL2:ae,drawBuffers:he,getMaxAnisotropy:ne,getMaxPrecision:se,precision:oe,logarithmicDepthBuffer:ce,maxTextures:de,maxVertexTextures:ue,maxTextureSize:fe,maxCubemapSize:pe,maxAttributes:me,maxVertexUniforms:xe,maxVaryings:ge,maxFragmentUniforms:_e,vertexTextures:ve,floatFragmentTextures:ye,floatVertexTextures:be,maxSamples:we}}function WebGLClipping(ie){const ee=this;let te=null,re=0,ne=!1,se=!1;const ae=new Plane,oe=new Matrix3,le={value:null,needsUpdate:!1};this.uniform=le,this.numPlanes=0,this.numIntersection=0,this.init=function(de,ue,fe){const pe=de.length!==0||ue||re!==0||ne;return ne=ue,te=ce(de,fe,0),re=de.length,pe},this.beginShadows=function(){se=!0,ce(null)},this.endShadows=function(){se=!1,he()},this.setState=function(de,ue,fe){const pe=de.clippingPlanes,me=de.clipIntersection,xe=de.clipShadows,ge=ie.get(de);if(!ne||pe===null||pe.length===0||se&&!xe)se?ce(null):he();else{const _e=se?0:re,ve=_e*4;let ye=ge.clippingState||null;le.value=ye,ye=ce(pe,ue,ve,fe);for(let be=0;be!==ve;++be)ye[be]=te[be];ge.clippingState=ye,this.numIntersection=me?this.numPlanes:0,this.numPlanes+=_e}};function he(){le.value!==te&&(le.value=te,le.needsUpdate=re>0),ee.numPlanes=re,ee.numIntersection=0}function ce(de,ue,fe,pe){const me=de!==null?de.length:0;let xe=null;if(me!==0){if(xe=le.value,pe!==!0||xe===null){const ge=fe+me*4,_e=ue.matrixWorldInverse;oe.getNormalMatrix(_e),(xe===null||xe.length<ge)&&(xe=new Float32Array(ge));for(let ve=0,ye=fe;ve!==me;++ve,ye+=4)ae.copy(de[ve]).applyMatrix4(_e,oe),ae.normal.toArray(xe,ye),xe[ye+3]=ae.constant}le.value=xe,le.needsUpdate=!0}return ee.numPlanes=me,ee.numIntersection=0,xe}}function WebGLCubeMaps(ie){let ee=new WeakMap;function te(ae,oe){return oe===EquirectangularReflectionMapping?ae.mapping=CubeReflectionMapping:oe===EquirectangularRefractionMapping&&(ae.mapping=CubeRefractionMapping),ae}function re(ae){if(ae&&ae.isTexture&&ae.isRenderTargetTexture===!1){const oe=ae.mapping;if(oe===EquirectangularReflectionMapping||oe===EquirectangularRefractionMapping)if(ee.has(ae)){const le=ee.get(ae).texture;return te(le,ae.mapping)}else{const le=ae.image;if(le&&le.height>0){const he=ie.getRenderTarget(),ce=new WebGLCubeRenderTarget(le.height/2);return ce.fromEquirectangularTexture(ie,ae),ee.set(ae,ce),ie.setRenderTarget(he),ae.addEventListener("dispose",ne),te(ce.texture,ae.mapping)}else return null}}return ae}function ne(ae){const oe=ae.target;oe.removeEventListener("dispose",ne);const le=ee.get(oe);le!==void 0&&(ee.delete(oe),le.dispose())}function se(){ee=new WeakMap}return{get:re,dispose:se}}class OrthographicCamera extends Camera{constructor(ee=-1,te=1,re=1,ne=-1,se=.1,ae=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=ee,this.right=te,this.top=re,this.bottom=ne,this.near=se,this.far=ae,this.updateProjectionMatrix()}copy(ee,te){return super.copy(ee,te),this.left=ee.left,this.right=ee.right,this.top=ee.top,this.bottom=ee.bottom,this.near=ee.near,this.far=ee.far,this.zoom=ee.zoom,this.view=ee.view===null?null:Object.assign({},ee.view),this}setViewOffset(ee,te,re,ne,se,ae){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=ee,this.view.fullHeight=te,this.view.offsetX=re,this.view.offsetY=ne,this.view.width=se,this.view.height=ae,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const ee=(this.right-this.left)/(2*this.zoom),te=(this.top-this.bottom)/(2*this.zoom),re=(this.right+this.left)/2,ne=(this.top+this.bottom)/2;let se=re-ee,ae=re+ee,oe=ne+te,le=ne-te;if(this.view!==null&&this.view.enabled){const he=(this.right-this.left)/this.view.fullWidth/this.zoom,ce=(this.top-this.bottom)/this.view.fullHeight/this.zoom;se+=he*this.view.offsetX,ae=se+he*this.view.width,oe-=ce*this.view.offsetY,le=oe-ce*this.view.height}this.projectionMatrix.makeOrthographic(se,ae,oe,le,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(ee){const te=super.toJSON(ee);return te.object.zoom=this.zoom,te.object.left=this.left,te.object.right=this.right,te.object.top=this.top,te.object.bottom=this.bottom,te.object.near=this.near,te.object.far=this.far,this.view!==null&&(te.object.view=Object.assign({},this.view)),te}}OrthographicCamera.prototype.isOrthographicCamera=!0;class RawShaderMaterial extends ShaderMaterial{constructor(ee){super(ee),this.type="RawShaderMaterial"}}RawShaderMaterial.prototype.isRawShaderMaterial=!0;const LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_clearColor=new Color$1;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(ee){this._renderer=ee,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(ee,te=0,re=.1,ne=100){_oldTarget=this._renderer.getRenderTarget();const se=this._allocateTargets();return this._sceneToCubeUV(ee,re,ne,se),te>0&&this._blur(se,0,0,te),this._applyPMREM(se),this._cleanup(se),se}fromEquirectangular(ee){return this._fromTexture(ee)}fromCubemap(ee){return this._fromTexture(ee)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let ee=0;ee<_lodPlanes.length;ee++)_lodPlanes[ee].dispose()}_cleanup(ee){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),ee.scissorTest=!1,_setViewport(ee,0,0,ee.width,ee.height)}_fromTexture(ee){_oldTarget=this._renderer.getRenderTarget();const te=this._allocateTargets(ee);return this._textureToCubeUV(ee,te),this._applyPMREM(te),this._cleanup(te),te}_allocateTargets(ee){const te={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(ee)?ee.encoding:RGBEEncoding,depthBuffer:!1},re=_createRenderTarget(te);return re.depthBuffer=!ee,this._pingPongRenderTarget=_createRenderTarget(te),re}_compileMaterial(ee){const te=new Mesh$1(_lodPlanes[0],ee);this._renderer.compile(te,_flatCamera)}_sceneToCubeUV(ee,te,re,ne){const oe=new PerspectiveCamera(90,1,te,re),le=[1,-1,1,1,1,1],he=[1,1,1,-1,-1,-1],ce=this._renderer,de=ce.autoClear,ue=ce.outputEncoding,fe=ce.toneMapping;ce.getClearColor(_clearColor),ce.toneMapping=NoToneMapping,ce.outputEncoding=LinearEncoding,ce.autoClear=!1;const pe=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),me=new Mesh$1(new BoxGeometry,pe);let xe=!1;const ge=ee.background;ge?ge.isColor&&(pe.color.copy(ge),ee.background=null,xe=!0):(pe.color.copy(_clearColor),xe=!0);for(let _e=0;_e<6;_e++){const ve=_e%3;ve==0?(oe.up.set(0,le[_e],0),oe.lookAt(he[_e],0,0)):ve==1?(oe.up.set(0,0,le[_e]),oe.lookAt(0,he[_e],0)):(oe.up.set(0,le[_e],0),oe.lookAt(0,0,he[_e])),_setViewport(ne,ve*SIZE_MAX,_e>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),ce.setRenderTarget(ne),xe&&ce.render(me,oe),ce.render(ee,oe)}me.geometry.dispose(),me.material.dispose(),ce.toneMapping=fe,ce.outputEncoding=ue,ce.autoClear=de,ee.background=ge}_setEncoding(ee,te){this._renderer.capabilities.isWebGL2===!0&&te.format===RGBAFormat&&te.type===UnsignedByteType&&te.encoding===sRGBEncoding?ee.value=ENCODINGS[LinearEncoding]:ee.value=ENCODINGS[te.encoding]}_textureToCubeUV(ee,te){const re=this._renderer,ne=ee.mapping===CubeReflectionMapping||ee.mapping===CubeRefractionMapping;ne?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());const se=ne?this._cubemapShader:this._equirectShader,ae=new Mesh$1(_lodPlanes[0],se),oe=se.uniforms;oe.envMap.value=ee,ne||oe.texelSize.value.set(1/ee.image.width,1/ee.image.height),this._setEncoding(oe.inputEncoding,ee),this._setEncoding(oe.outputEncoding,te.texture),_setViewport(te,0,0,3*SIZE_MAX,2*SIZE_MAX),re.setRenderTarget(te),re.render(ae,_flatCamera)}_applyPMREM(ee){const te=this._renderer,re=te.autoClear;te.autoClear=!1;for(let ne=1;ne<TOTAL_LODS;ne++){const se=Math.sqrt(_sigmas[ne]*_sigmas[ne]-_sigmas[ne-1]*_sigmas[ne-1]),ae=_axisDirections[(ne-1)%_axisDirections.length];this._blur(ee,ne-1,ne,se,ae)}te.autoClear=re}_blur(ee,te,re,ne,se){const ae=this._pingPongRenderTarget;this._halfBlur(ee,ae,te,re,ne,"latitudinal",se),this._halfBlur(ae,ee,re,re,ne,"longitudinal",se)}_halfBlur(ee,te,re,ne,se,ae,oe){const le=this._renderer,he=this._blurMaterial;ae!=="latitudinal"&&ae!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const ce=3,de=new Mesh$1(_lodPlanes[ne],he),ue=he.uniforms,fe=_sizeLods[re]-1,pe=isFinite(se)?Math.PI/(2*fe):2*Math.PI/(2*MAX_SAMPLES-1),me=se/pe,xe=isFinite(se)?1+Math.floor(ce*me):MAX_SAMPLES;xe>MAX_SAMPLES&&console.warn(`sigmaRadians, ${se}, is too large and will clip, as it requested ${xe} samples when the maximum is set to ${MAX_SAMPLES}`);const ge=[];let _e=0;for(let we=0;we<MAX_SAMPLES;++we){const Se=we/me,Te=Math.exp(-Se*Se/2);ge.push(Te),we==0?_e+=Te:we<xe&&(_e+=2*Te)}for(let we=0;we<ge.length;we++)ge[we]=ge[we]/_e;ue.envMap.value=ee.texture,ue.samples.value=xe,ue.weights.value=ge,ue.latitudinal.value=ae==="latitudinal",oe&&(ue.poleAxis.value=oe),ue.dTheta.value=pe,ue.mipInt.value=LOD_MAX-re,this._setEncoding(ue.inputEncoding,ee.texture),this._setEncoding(ue.outputEncoding,ee.texture);const ve=_sizeLods[ne],ye=3*Math.max(0,SIZE_MAX-2*ve),be=(ne===0?0:2*SIZE_MAX)+2*ve*(ne>LOD_MAX-LOD_MIN?ne-LOD_MAX+LOD_MIN:0);_setViewport(te,ye,be,3*ve,2*ve),le.setRenderTarget(te),le.render(de,_flatCamera)}}function _isLDR(ie){return ie===void 0||ie.type!==UnsignedByteType?!1:ie.encoding===LinearEncoding||ie.encoding===sRGBEncoding||ie.encoding===GammaEncoding}function _createPlanes(){const ie=[],ee=[],te=[];let re=LOD_MAX;for(let ne=0;ne<TOTAL_LODS;ne++){const se=Math.pow(2,re);ee.push(se);let ae=1/se;ne>LOD_MAX-LOD_MIN?ae=EXTRA_LOD_SIGMA[ne-LOD_MAX+LOD_MIN-1]:ne==0&&(ae=0),te.push(ae);const oe=1/(se-1),le=-oe/2,he=1+oe/2,ce=[le,le,he,le,he,he,le,le,he,he,le,he],de=6,ue=6,fe=3,pe=2,me=1,xe=new Float32Array(fe*ue*de),ge=new Float32Array(pe*ue*de),_e=new Float32Array(me*ue*de);for(let ye=0;ye<de;ye++){const be=ye%3*2/3-1,we=ye>2?0:-1,Se=[be,we,0,be+2/3,we,0,be+2/3,we+1,0,be,we,0,be+2/3,we+1,0,be,we+1,0];xe.set(Se,fe*ue*ye),ge.set(ce,pe*ue*ye);const Te=[ye,ye,ye,ye,ye,ye];_e.set(Te,me*ue*ye)}const ve=new BufferGeometry;ve.setAttribute("position",new BufferAttribute(xe,fe)),ve.setAttribute("uv",new BufferAttribute(ge,pe)),ve.setAttribute("faceIndex",new BufferAttribute(_e,me)),ie.push(ve),re>LOD_MIN&&re--}return{_lodPlanes:ie,_sizeLods:ee,_sigmas:te}}function _createRenderTarget(ie){const ee=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,ie);return ee.texture.mapping=CubeUVReflectionMapping,ee.texture.name="PMREM.cubeUv",ee.scissorTest=!0,ee}function _setViewport(ie,ee,te,re,ne){ie.viewport.set(ee,te,re,ne),ie.scissor.set(ee,te,re,ne)}function _getBlurShader(ie){const ee=new Float32Array(ie),te=new Vector3(0,1,0);return new RawShaderMaterial({name:"SphericalGaussianBlur",defines:{n:ie},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ee},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:te},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${_getEncodings()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectShader(){const ie=new Vector2(1,1);return new RawShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:ie},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${_getEncodings()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapShader(){return new RawShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${_getEncodings()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _getEncodings(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function WebGLCubeUVMaps(ie){let ee=new WeakMap,te=null;function re(oe){if(oe&&oe.isTexture&&oe.isRenderTargetTexture===!1){const le=oe.mapping,he=le===EquirectangularReflectionMapping||le===EquirectangularRefractionMapping,ce=le===CubeReflectionMapping||le===CubeRefractionMapping;if(he||ce){if(ee.has(oe))return ee.get(oe).texture;{const de=oe.image;if(he&&de&&de.height>0||ce&&de&&ne(de)){const ue=ie.getRenderTarget();te===null&&(te=new PMREMGenerator(ie));const fe=he?te.fromEquirectangular(oe):te.fromCubemap(oe);return ee.set(oe,fe),ie.setRenderTarget(ue),oe.addEventListener("dispose",se),fe.texture}else return null}}}return oe}function ne(oe){let le=0;const he=6;for(let ce=0;ce<he;ce++)oe[ce]!==void 0&&le++;return le===he}function se(oe){const le=oe.target;le.removeEventListener("dispose",se);const he=ee.get(le);he!==void 0&&(ee.delete(le),he.dispose())}function ae(){ee=new WeakMap,te!==null&&(te.dispose(),te=null)}return{get:re,dispose:ae}}function WebGLExtensions(ie){const ee={};function te(re){if(ee[re]!==void 0)return ee[re];let ne;switch(re){case"WEBGL_depth_texture":ne=ie.getExtension("WEBGL_depth_texture")||ie.getExtension("MOZ_WEBGL_depth_texture")||ie.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":ne=ie.getExtension("EXT_texture_filter_anisotropic")||ie.getExtension("MOZ_EXT_texture_filter_anisotropic")||ie.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":ne=ie.getExtension("WEBGL_compressed_texture_s3tc")||ie.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ie.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":ne=ie.getExtension("WEBGL_compressed_texture_pvrtc")||ie.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:ne=ie.getExtension(re)}return ee[re]=ne,ne}return{has:function(re){return te(re)!==null},init:function(re){re.isWebGL2?te("EXT_color_buffer_float"):(te("WEBGL_depth_texture"),te("OES_texture_float"),te("OES_texture_half_float"),te("OES_texture_half_float_linear"),te("OES_standard_derivatives"),te("OES_element_index_uint"),te("OES_vertex_array_object"),te("ANGLE_instanced_arrays")),te("OES_texture_float_linear"),te("EXT_color_buffer_half_float")},get:function(re){const ne=te(re);return ne===null&&console.warn("THREE.WebGLRenderer: "+re+" extension not supported."),ne}}}function WebGLGeometries(ie,ee,te,re){const ne={},se=new WeakMap;function ae(de){const ue=de.target;ue.index!==null&&ee.remove(ue.index);for(const pe in ue.attributes)ee.remove(ue.attributes[pe]);ue.removeEventListener("dispose",ae),delete ne[ue.id];const fe=se.get(ue);fe&&(ee.remove(fe),se.delete(ue)),re.releaseStatesOfGeometry(ue),ue.isInstancedBufferGeometry===!0&&delete ue._maxInstanceCount,te.memory.geometries--}function oe(de,ue){return ne[ue.id]===!0||(ue.addEventListener("dispose",ae),ne[ue.id]=!0,te.memory.geometries++),ue}function le(de){const ue=de.attributes;for(const pe in ue)ee.update(ue[pe],34962);const fe=de.morphAttributes;for(const pe in fe){const me=fe[pe];for(let xe=0,ge=me.length;xe<ge;xe++)ee.update(me[xe],34962)}}function he(de){const ue=[],fe=de.index,pe=de.attributes.position;let me=0;if(fe!==null){const _e=fe.array;me=fe.version;for(let ve=0,ye=_e.length;ve<ye;ve+=3){const be=_e[ve+0],we=_e[ve+1],Se=_e[ve+2];ue.push(be,we,we,Se,Se,be)}}else{const _e=pe.array;me=pe.version;for(let ve=0,ye=_e.length/3-1;ve<ye;ve+=3){const be=ve+0,we=ve+1,Se=ve+2;ue.push(be,we,we,Se,Se,be)}}const xe=new(arrayMax(ue)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(ue,1);xe.version=me;const ge=se.get(de);ge&&ee.remove(ge),se.set(de,xe)}function ce(de){const ue=se.get(de);if(ue){const fe=de.index;fe!==null&&ue.version<fe.version&&he(de)}else he(de);return se.get(de)}return{get:oe,update:le,getWireframeAttribute:ce}}function WebGLIndexedBufferRenderer(ie,ee,te,re){const ne=re.isWebGL2;let se;function ae(ue){se=ue}let oe,le;function he(ue){oe=ue.type,le=ue.bytesPerElement}function ce(ue,fe){ie.drawElements(se,fe,oe,ue*le),te.update(fe,se,1)}function de(ue,fe,pe){if(pe===0)return;let me,xe;if(ne)me=ie,xe="drawElementsInstanced";else if(me=ee.get("ANGLE_instanced_arrays"),xe="drawElementsInstancedANGLE",me===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}me[xe](se,fe,oe,ue*le,pe),te.update(fe,se,pe)}this.setMode=ae,this.setIndex=he,this.render=ce,this.renderInstances=de}function WebGLInfo(ie){const ee={geometries:0,textures:0},te={frame:0,calls:0,triangles:0,points:0,lines:0};function re(se,ae,oe){switch(te.calls++,ae){case 4:te.triangles+=oe*(se/3);break;case 1:te.lines+=oe*(se/2);break;case 3:te.lines+=oe*(se-1);break;case 2:te.lines+=oe*se;break;case 0:te.points+=oe*se;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",ae);break}}function ne(){te.frame++,te.calls=0,te.triangles=0,te.points=0,te.lines=0}return{memory:ee,render:te,programs:null,autoReset:!0,reset:ne,update:re}}class DataTexture2DArray extends Texture$1{constructor(ee=null,te=1,re=1,ne=1){super(null),this.image={data:ee,width:te,height:re,depth:ne},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture2DArray.prototype.isDataTexture2DArray=!0;function numericalSort(ie,ee){return ie[0]-ee[0]}function absNumericalSort(ie,ee){return Math.abs(ee[1])-Math.abs(ie[1])}function denormalize(ie,ee){let te=1;const re=ee.isInterleavedBufferAttribute?ee.data.array:ee.array;re instanceof Int8Array?te=127:re instanceof Int16Array?te=32767:re instanceof Int32Array?te=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",re),ie.divideScalar(te)}function WebGLMorphtargets(ie,ee,te){const re={},ne=new Float32Array(8),se=new WeakMap,ae=new Vector3,oe=[];for(let he=0;he<8;he++)oe[he]=[he,0];function le(he,ce,de,ue){const fe=he.morphTargetInfluences;if(ee.isWebGL2===!0){const pe=ce.morphAttributes.position.length;let me=se.get(ce);if(me===void 0||me.count!==pe){me!==void 0&&me.texture.dispose();const _e=ce.morphAttributes.normal!==void 0,ve=ce.morphAttributes.position,ye=ce.morphAttributes.normal||[],be=ce.attributes.position.count,we=_e===!0?2:1;let Se=be*we,Te=1;Se>ee.maxTextureSize&&(Te=Math.ceil(Se/ee.maxTextureSize),Se=ee.maxTextureSize);const Pe=new Float32Array(Se*Te*4*pe),Be=new DataTexture2DArray(Pe,Se,Te,pe);Be.format=RGBAFormat,Be.type=FloatType;const Ce=we*4;for(let De=0;De<pe;De++){const Re=ve[De],Le=ye[De],ke=Se*Te*4*De;for(let Me=0;Me<Re.count;Me++){ae.fromBufferAttribute(Re,Me),Re.normalized===!0&&denormalize(ae,Re);const Ee=Me*Ce;Pe[ke+Ee+0]=ae.x,Pe[ke+Ee+1]=ae.y,Pe[ke+Ee+2]=ae.z,Pe[ke+Ee+3]=0,_e===!0&&(ae.fromBufferAttribute(Le,Me),Le.normalized===!0&&denormalize(ae,Le),Pe[ke+Ee+4]=ae.x,Pe[ke+Ee+5]=ae.y,Pe[ke+Ee+6]=ae.z,Pe[ke+Ee+7]=0)}}me={count:pe,texture:Be,size:new Vector2(Se,Te)},se.set(ce,me)}let xe=0;for(let _e=0;_e<fe.length;_e++)xe+=fe[_e];const ge=ce.morphTargetsRelative?1:1-xe;ue.getUniforms().setValue(ie,"morphTargetBaseInfluence",ge),ue.getUniforms().setValue(ie,"morphTargetInfluences",fe),ue.getUniforms().setValue(ie,"morphTargetsTexture",me.texture,te),ue.getUniforms().setValue(ie,"morphTargetsTextureSize",me.size)}else{const pe=fe===void 0?0:fe.length;let me=re[ce.id];if(me===void 0||me.length!==pe){me=[];for(let ye=0;ye<pe;ye++)me[ye]=[ye,0];re[ce.id]=me}for(let ye=0;ye<pe;ye++){const be=me[ye];be[0]=ye,be[1]=fe[ye]}me.sort(absNumericalSort);for(let ye=0;ye<8;ye++)ye<pe&&me[ye][1]?(oe[ye][0]=me[ye][0],oe[ye][1]=me[ye][1]):(oe[ye][0]=Number.MAX_SAFE_INTEGER,oe[ye][1]=0);oe.sort(numericalSort);const xe=ce.morphAttributes.position,ge=ce.morphAttributes.normal;let _e=0;for(let ye=0;ye<8;ye++){const be=oe[ye],we=be[0],Se=be[1];we!==Number.MAX_SAFE_INTEGER&&Se?(xe&&ce.getAttribute("morphTarget"+ye)!==xe[we]&&ce.setAttribute("morphTarget"+ye,xe[we]),ge&&ce.getAttribute("morphNormal"+ye)!==ge[we]&&ce.setAttribute("morphNormal"+ye,ge[we]),ne[ye]=Se,_e+=Se):(xe&&ce.hasAttribute("morphTarget"+ye)===!0&&ce.deleteAttribute("morphTarget"+ye),ge&&ce.hasAttribute("morphNormal"+ye)===!0&&ce.deleteAttribute("morphNormal"+ye),ne[ye]=0)}const ve=ce.morphTargetsRelative?1:1-_e;ue.getUniforms().setValue(ie,"morphTargetBaseInfluence",ve),ue.getUniforms().setValue(ie,"morphTargetInfluences",ne)}}return{update:le}}function WebGLObjects(ie,ee,te,re){let ne=new WeakMap;function se(le){const he=re.render.frame,ce=le.geometry,de=ee.get(le,ce);return ne.get(de)!==he&&(ee.update(de),ne.set(de,he)),le.isInstancedMesh&&(le.hasEventListener("dispose",oe)===!1&&le.addEventListener("dispose",oe),te.update(le.instanceMatrix,34962),le.instanceColor!==null&&te.update(le.instanceColor,34962)),de}function ae(){ne=new WeakMap}function oe(le){const he=le.target;he.removeEventListener("dispose",oe),te.remove(he.instanceMatrix),he.instanceColor!==null&&te.remove(he.instanceColor)}return{update:se,dispose:ae}}class DataTexture3D extends Texture$1{constructor(ee=null,te=1,re=1,ne=1){super(null),this.image={data:ee,width:te,height:re,depth:ne},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture3D.prototype.isDataTexture3D=!0;const emptyTexture=new Texture$1,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(ie,ee,te){const re=ie[0];if(re<=0||re>0)return ie;const ne=ee*te;let se=arrayCacheF32[ne];if(se===void 0&&(se=new Float32Array(ne),arrayCacheF32[ne]=se),ee!==0){re.toArray(se,0);for(let ae=1,oe=0;ae!==ee;++ae)oe+=te,ie[ae].toArray(se,oe)}return se}function arraysEqual(ie,ee){if(ie.length!==ee.length)return!1;for(let te=0,re=ie.length;te<re;te++)if(ie[te]!==ee[te])return!1;return!0}function copyArray(ie,ee){for(let te=0,re=ee.length;te<re;te++)ie[te]=ee[te]}function allocTexUnits(ie,ee){let te=arrayCacheI32[ee];te===void 0&&(te=new Int32Array(ee),arrayCacheI32[ee]=te);for(let re=0;re!==ee;++re)te[re]=ie.allocateTextureUnit();return te}function setValueV1f(ie,ee){const te=this.cache;te[0]!==ee&&(ie.uniform1f(this.addr,ee),te[0]=ee)}function setValueV2f(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y)&&(ie.uniform2f(this.addr,ee.x,ee.y),te[0]=ee.x,te[1]=ee.y);else{if(arraysEqual(te,ee))return;ie.uniform2fv(this.addr,ee),copyArray(te,ee)}}function setValueV3f(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y||te[2]!==ee.z)&&(ie.uniform3f(this.addr,ee.x,ee.y,ee.z),te[0]=ee.x,te[1]=ee.y,te[2]=ee.z);else if(ee.r!==void 0)(te[0]!==ee.r||te[1]!==ee.g||te[2]!==ee.b)&&(ie.uniform3f(this.addr,ee.r,ee.g,ee.b),te[0]=ee.r,te[1]=ee.g,te[2]=ee.b);else{if(arraysEqual(te,ee))return;ie.uniform3fv(this.addr,ee),copyArray(te,ee)}}function setValueV4f(ie,ee){const te=this.cache;if(ee.x!==void 0)(te[0]!==ee.x||te[1]!==ee.y||te[2]!==ee.z||te[3]!==ee.w)&&(ie.uniform4f(this.addr,ee.x,ee.y,ee.z,ee.w),te[0]=ee.x,te[1]=ee.y,te[2]=ee.z,te[3]=ee.w);else{if(arraysEqual(te,ee))return;ie.uniform4fv(this.addr,ee),copyArray(te,ee)}}function setValueM2(ie,ee){const te=this.cache,re=ee.elements;if(re===void 0){if(arraysEqual(te,ee))return;ie.uniformMatrix2fv(this.addr,!1,ee),copyArray(te,ee)}else{if(arraysEqual(te,re))return;mat2array.set(re),ie.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(te,re)}}function setValueM3(ie,ee){const te=this.cache,re=ee.elements;if(re===void 0){if(arraysEqual(te,ee))return;ie.uniformMatrix3fv(this.addr,!1,ee),copyArray(te,ee)}else{if(arraysEqual(te,re))return;mat3array.set(re),ie.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(te,re)}}function setValueM4(ie,ee){const te=this.cache,re=ee.elements;if(re===void 0){if(arraysEqual(te,ee))return;ie.uniformMatrix4fv(this.addr,!1,ee),copyArray(te,ee)}else{if(arraysEqual(te,re))return;mat4array.set(re),ie.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(te,re)}}function setValueV1i(ie,ee){const te=this.cache;te[0]!==ee&&(ie.uniform1i(this.addr,ee),te[0]=ee)}function setValueV2i(ie,ee){const te=this.cache;arraysEqual(te,ee)||(ie.uniform2iv(this.addr,ee),copyArray(te,ee))}function setValueV3i(ie,ee){const te=this.cache;arraysEqual(te,ee)||(ie.uniform3iv(this.addr,ee),copyArray(te,ee))}function setValueV4i(ie,ee){const te=this.cache;arraysEqual(te,ee)||(ie.uniform4iv(this.addr,ee),copyArray(te,ee))}function setValueV1ui(ie,ee){const te=this.cache;te[0]!==ee&&(ie.uniform1ui(this.addr,ee),te[0]=ee)}function setValueV2ui(ie,ee){const te=this.cache;arraysEqual(te,ee)||(ie.uniform2uiv(this.addr,ee),copyArray(te,ee))}function setValueV3ui(ie,ee){const te=this.cache;arraysEqual(te,ee)||(ie.uniform3uiv(this.addr,ee),copyArray(te,ee))}function setValueV4ui(ie,ee){const te=this.cache;arraysEqual(te,ee)||(ie.uniform4uiv(this.addr,ee),copyArray(te,ee))}function setValueT1(ie,ee,te){const re=this.cache,ne=te.allocateTextureUnit();re[0]!==ne&&(ie.uniform1i(this.addr,ne),re[0]=ne),te.safeSetTexture2D(ee||emptyTexture,ne)}function setValueT3D1(ie,ee,te){const re=this.cache,ne=te.allocateTextureUnit();re[0]!==ne&&(ie.uniform1i(this.addr,ne),re[0]=ne),te.setTexture3D(ee||emptyTexture3d,ne)}function setValueT6(ie,ee,te){const re=this.cache,ne=te.allocateTextureUnit();re[0]!==ne&&(ie.uniform1i(this.addr,ne),re[0]=ne),te.safeSetTextureCube(ee||emptyCubeTexture,ne)}function setValueT2DArray1(ie,ee,te){const re=this.cache,ne=te.allocateTextureUnit();re[0]!==ne&&(ie.uniform1i(this.addr,ne),re[0]=ne),te.setTexture2DArray(ee||emptyTexture2dArray,ne)}function getSingularSetter(ie){switch(ie){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(ie,ee){ie.uniform1fv(this.addr,ee)}function setValueV2fArray(ie,ee){const te=flatten(ee,this.size,2);ie.uniform2fv(this.addr,te)}function setValueV3fArray(ie,ee){const te=flatten(ee,this.size,3);ie.uniform3fv(this.addr,te)}function setValueV4fArray(ie,ee){const te=flatten(ee,this.size,4);ie.uniform4fv(this.addr,te)}function setValueM2Array(ie,ee){const te=flatten(ee,this.size,4);ie.uniformMatrix2fv(this.addr,!1,te)}function setValueM3Array(ie,ee){const te=flatten(ee,this.size,9);ie.uniformMatrix3fv(this.addr,!1,te)}function setValueM4Array(ie,ee){const te=flatten(ee,this.size,16);ie.uniformMatrix4fv(this.addr,!1,te)}function setValueV1iArray(ie,ee){ie.uniform1iv(this.addr,ee)}function setValueV2iArray(ie,ee){ie.uniform2iv(this.addr,ee)}function setValueV3iArray(ie,ee){ie.uniform3iv(this.addr,ee)}function setValueV4iArray(ie,ee){ie.uniform4iv(this.addr,ee)}function setValueV1uiArray(ie,ee){ie.uniform1uiv(this.addr,ee)}function setValueV2uiArray(ie,ee){ie.uniform2uiv(this.addr,ee)}function setValueV3uiArray(ie,ee){ie.uniform3uiv(this.addr,ee)}function setValueV4uiArray(ie,ee){ie.uniform4uiv(this.addr,ee)}function setValueT1Array(ie,ee,te){const re=ee.length,ne=allocTexUnits(te,re);ie.uniform1iv(this.addr,ne);for(let se=0;se!==re;++se)te.safeSetTexture2D(ee[se]||emptyTexture,ne[se])}function setValueT6Array(ie,ee,te){const re=ee.length,ne=allocTexUnits(te,re);ie.uniform1iv(this.addr,ne);for(let se=0;se!==re;++se)te.safeSetTextureCube(ee[se]||emptyCubeTexture,ne[se])}function getPureArraySetter(ie){switch(ie){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(ie,ee,te){this.id=ie,this.addr=te,this.cache=[],this.setValue=getSingularSetter(ee.type)}function PureArrayUniform(ie,ee,te){this.id=ie,this.addr=te,this.cache=[],this.size=ee.size,this.setValue=getPureArraySetter(ee.type)}PureArrayUniform.prototype.updateCache=function(ie){const ee=this.cache;ie instanceof Float32Array&&ee.length!==ie.length&&(this.cache=new Float32Array(ie.length)),copyArray(ee,ie)};function StructuredUniform(ie){this.id=ie,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(ie,ee,te){const re=this.seq;for(let ne=0,se=re.length;ne!==se;++ne){const ae=re[ne];ae.setValue(ie,ee[ae.id],te)}};const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(ie,ee){ie.seq.push(ee),ie.map[ee.id]=ee}function parseUniform(ie,ee,te){const re=ie.name,ne=re.length;for(RePathPart.lastIndex=0;;){const se=RePathPart.exec(re),ae=RePathPart.lastIndex;let oe=se[1];const le=se[2]==="]",he=se[3];if(le&&(oe=oe|0),he===void 0||he==="["&&ae+2===ne){addUniform(te,he===void 0?new SingleUniform(oe,ie,ee):new PureArrayUniform(oe,ie,ee));break}else{let de=te.map[oe];de===void 0&&(de=new StructuredUniform(oe),addUniform(te,de)),te=de}}}function WebGLUniforms(ie,ee){this.seq=[],this.map={};const te=ie.getProgramParameter(ee,35718);for(let re=0;re<te;++re){const ne=ie.getActiveUniform(ee,re),se=ie.getUniformLocation(ee,ne.name);parseUniform(ne,se,this)}}WebGLUniforms.prototype.setValue=function(ie,ee,te,re){const ne=this.map[ee];ne!==void 0&&ne.setValue(ie,te,re)},WebGLUniforms.prototype.setOptional=function(ie,ee,te){const re=ee[te];re!==void 0&&this.setValue(ie,te,re)},WebGLUniforms.upload=function(ie,ee,te,re){for(let ne=0,se=ee.length;ne!==se;++ne){const ae=ee[ne],oe=te[ae.id];oe.needsUpdate!==!1&&ae.setValue(ie,oe.value,re)}},WebGLUniforms.seqWithValue=function(ie,ee){const te=[];for(let re=0,ne=ie.length;re!==ne;++re){const se=ie[re];se.id in ee&&te.push(se)}return te};function WebGLShader(ie,ee,te){const re=ie.createShader(ee);return ie.shaderSource(re,te),ie.compileShader(re),re}let programIdCount=0;function addLineNumbers(ie){const ee=ie.split(`
`);for(let te=0;te<ee.length;te++)ee[te]=te+1+": "+ee[te];return ee.join(`
`)}function getEncodingComponents(ie){switch(ie){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",ie),["Linear","( value )"]}}function getShaderErrors(ie,ee,te){const re=ie.getShaderParameter(ee,35713),ne=ie.getShaderInfoLog(ee).trim();return re&&ne===""?"":te.toUpperCase()+`

`+ne+`

`+addLineNumbers(ie.getShaderSource(ee))}function getTexelDecodingFunction(ie,ee){const te=getEncodingComponents(ee);return"vec4 "+ie+"( vec4 value ) { return "+te[0]+"ToLinear"+te[1]+"; }"}function getTexelEncodingFunction(ie,ee){const te=getEncodingComponents(ee);return"vec4 "+ie+"( vec4 value ) { return LinearTo"+te[0]+te[1]+"; }"}function getToneMappingFunction(ie,ee){let te;switch(ee){case LinearToneMapping:te="Linear";break;case ReinhardToneMapping:te="Reinhard";break;case CineonToneMapping:te="OptimizedCineon";break;case ACESFilmicToneMapping:te="ACESFilmic";break;case CustomToneMapping:te="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",ee),te="Linear"}return"vec3 "+ie+"( vec3 color ) { return "+te+"ToneMapping( color ); }"}function generateExtensions(ie){return[ie.extensionDerivatives||ie.envMapCubeUV||ie.bumpMap||ie.tangentSpaceNormalMap||ie.clearcoatNormalMap||ie.flatShading||ie.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(ie.extensionFragDepth||ie.logarithmicDepthBuffer)&&ie.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",ie.extensionDrawBuffers&&ie.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(ie.extensionShaderTextureLOD||ie.envMap||ie.transmission)&&ie.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(ie){const ee=[];for(const te in ie){const re=ie[te];re!==!1&&ee.push("#define "+te+" "+re)}return ee.join(`
`)}function fetchAttributeLocations(ie,ee){const te={},re=ie.getProgramParameter(ee,35721);for(let ne=0;ne<re;ne++){const se=ie.getActiveAttrib(ee,ne),ae=se.name;let oe=1;se.type===35674&&(oe=2),se.type===35675&&(oe=3),se.type===35676&&(oe=4),te[ae]={type:se.type,location:ie.getAttribLocation(ee,ae),locationSize:oe}}return te}function filterEmptyLine(ie){return ie!==""}function replaceLightNums(ie,ee){return ie.replace(/NUM_DIR_LIGHTS/g,ee.numDirLights).replace(/NUM_SPOT_LIGHTS/g,ee.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,ee.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,ee.numPointLights).replace(/NUM_HEMI_LIGHTS/g,ee.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,ee.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,ee.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,ee.numPointLightShadows)}function replaceClippingPlaneNums(ie,ee){return ie.replace(/NUM_CLIPPING_PLANES/g,ee.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,ee.numClippingPlanes-ee.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(ie){return ie.replace(includePattern,includeReplacer)}function includeReplacer(ie,ee){const te=ShaderChunk[ee];if(te===void 0)throw new Error("Can not resolve #include <"+ee+">");return resolveIncludes(te)}const deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(ie){return ie.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(ie,ee,te,re){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(ie,ee,te,re)}function loopReplacer(ie,ee,te,re){let ne="";for(let se=parseInt(ee);se<parseInt(te);se++)ne+=re.replace(/\[\s*i\s*\]/g,"[ "+se+" ]").replace(/UNROLLED_LOOP_INDEX/g,se);return ne}function generatePrecision(ie){let ee="precision "+ie.precision+` float;
precision `+ie.precision+" int;";return ie.precision==="highp"?ee+=`
#define HIGH_PRECISION`:ie.precision==="mediump"?ee+=`
#define MEDIUM_PRECISION`:ie.precision==="lowp"&&(ee+=`
#define LOW_PRECISION`),ee}function generateShadowMapTypeDefine(ie){let ee="SHADOWMAP_TYPE_BASIC";return ie.shadowMapType===PCFShadowMap?ee="SHADOWMAP_TYPE_PCF":ie.shadowMapType===PCFSoftShadowMap?ee="SHADOWMAP_TYPE_PCF_SOFT":ie.shadowMapType===VSMShadowMap&&(ee="SHADOWMAP_TYPE_VSM"),ee}function generateEnvMapTypeDefine(ie){let ee="ENVMAP_TYPE_CUBE";if(ie.envMap)switch(ie.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:ee="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:ee="ENVMAP_TYPE_CUBE_UV";break}return ee}function generateEnvMapModeDefine(ie){let ee="ENVMAP_MODE_REFLECTION";if(ie.envMap)switch(ie.envMapMode){case CubeRefractionMapping:case CubeUVRefractionMapping:ee="ENVMAP_MODE_REFRACTION";break}return ee}function generateEnvMapBlendingDefine(ie){let ee="ENVMAP_BLENDING_NONE";if(ie.envMap)switch(ie.combine){case MultiplyOperation:ee="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:ee="ENVMAP_BLENDING_MIX";break;case AddOperation:ee="ENVMAP_BLENDING_ADD";break}return ee}function WebGLProgram(ie,ee,te,re){const ne=ie.getContext(),se=te.defines;let ae=te.vertexShader,oe=te.fragmentShader;const le=generateShadowMapTypeDefine(te),he=generateEnvMapTypeDefine(te),ce=generateEnvMapModeDefine(te),de=generateEnvMapBlendingDefine(te),ue=ie.gammaFactor>0?ie.gammaFactor:1,fe=te.isWebGL2?"":generateExtensions(te),pe=generateDefines(se),me=ne.createProgram();let xe,ge,_e=te.glslVersion?"#version "+te.glslVersion+`
`:"";te.isRawShaderMaterial?(xe=[pe].filter(filterEmptyLine).join(`
`),xe.length>0&&(xe+=`
`),ge=[fe,pe].filter(filterEmptyLine).join(`
`),ge.length>0&&(ge+=`
`)):(xe=[generatePrecision(te),"#define SHADER_NAME "+te.shaderName,pe,te.instancing?"#define USE_INSTANCING":"",te.instancingColor?"#define USE_INSTANCING_COLOR":"",te.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+ue,"#define MAX_BONES "+te.maxBones,te.useFog&&te.fog?"#define USE_FOG":"",te.useFog&&te.fogExp2?"#define FOG_EXP2":"",te.map?"#define USE_MAP":"",te.envMap?"#define USE_ENVMAP":"",te.envMap?"#define "+ce:"",te.lightMap?"#define USE_LIGHTMAP":"",te.aoMap?"#define USE_AOMAP":"",te.emissiveMap?"#define USE_EMISSIVEMAP":"",te.bumpMap?"#define USE_BUMPMAP":"",te.normalMap?"#define USE_NORMALMAP":"",te.normalMap&&te.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",te.normalMap&&te.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",te.clearcoatMap?"#define USE_CLEARCOATMAP":"",te.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",te.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",te.displacementMap&&te.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",te.specularMap?"#define USE_SPECULARMAP":"",te.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",te.specularColorMap?"#define USE_SPECULARCOLORMAP":"",te.roughnessMap?"#define USE_ROUGHNESSMAP":"",te.metalnessMap?"#define USE_METALNESSMAP":"",te.alphaMap?"#define USE_ALPHAMAP":"",te.transmission?"#define USE_TRANSMISSION":"",te.transmissionMap?"#define USE_TRANSMISSIONMAP":"",te.thicknessMap?"#define USE_THICKNESSMAP":"",te.sheenColorMap?"#define USE_SHEENCOLORMAP":"",te.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",te.vertexTangents?"#define USE_TANGENT":"",te.vertexColors?"#define USE_COLOR":"",te.vertexAlphas?"#define USE_COLOR_ALPHA":"",te.vertexUvs?"#define USE_UV":"",te.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",te.flatShading?"#define FLAT_SHADED":"",te.skinning?"#define USE_SKINNING":"",te.useVertexTexture?"#define BONE_TEXTURE":"",te.morphTargets?"#define USE_MORPHTARGETS":"",te.morphNormals&&te.flatShading===!1?"#define USE_MORPHNORMALS":"",te.morphTargets&&te.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",te.morphTargets&&te.isWebGL2?"#define MORPHTARGETS_COUNT "+te.morphTargetsCount:"",te.doubleSided?"#define DOUBLE_SIDED":"",te.flipSided?"#define FLIP_SIDED":"",te.shadowMapEnabled?"#define USE_SHADOWMAP":"",te.shadowMapEnabled?"#define "+le:"",te.sizeAttenuation?"#define USE_SIZEATTENUATION":"",te.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",te.logarithmicDepthBuffer&&te.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),ge=[fe,generatePrecision(te),"#define SHADER_NAME "+te.shaderName,pe,"#define GAMMA_FACTOR "+ue,te.useFog&&te.fog?"#define USE_FOG":"",te.useFog&&te.fogExp2?"#define FOG_EXP2":"",te.map?"#define USE_MAP":"",te.matcap?"#define USE_MATCAP":"",te.envMap?"#define USE_ENVMAP":"",te.envMap?"#define "+he:"",te.envMap?"#define "+ce:"",te.envMap?"#define "+de:"",te.lightMap?"#define USE_LIGHTMAP":"",te.aoMap?"#define USE_AOMAP":"",te.emissiveMap?"#define USE_EMISSIVEMAP":"",te.bumpMap?"#define USE_BUMPMAP":"",te.normalMap?"#define USE_NORMALMAP":"",te.normalMap&&te.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",te.normalMap&&te.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",te.clearcoat?"#define USE_CLEARCOAT":"",te.clearcoatMap?"#define USE_CLEARCOATMAP":"",te.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",te.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",te.specularMap?"#define USE_SPECULARMAP":"",te.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",te.specularColorMap?"#define USE_SPECULARCOLORMAP":"",te.roughnessMap?"#define USE_ROUGHNESSMAP":"",te.metalnessMap?"#define USE_METALNESSMAP":"",te.alphaMap?"#define USE_ALPHAMAP":"",te.alphaTest?"#define USE_ALPHATEST":"",te.sheen?"#define USE_SHEEN":"",te.sheenColorMap?"#define USE_SHEENCOLORMAP":"",te.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",te.transmission?"#define USE_TRANSMISSION":"",te.transmissionMap?"#define USE_TRANSMISSIONMAP":"",te.thicknessMap?"#define USE_THICKNESSMAP":"",te.vertexTangents?"#define USE_TANGENT":"",te.vertexColors||te.instancingColor?"#define USE_COLOR":"",te.vertexAlphas?"#define USE_COLOR_ALPHA":"",te.vertexUvs?"#define USE_UV":"",te.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",te.gradientMap?"#define USE_GRADIENTMAP":"",te.flatShading?"#define FLAT_SHADED":"",te.doubleSided?"#define DOUBLE_SIDED":"",te.flipSided?"#define FLIP_SIDED":"",te.shadowMapEnabled?"#define USE_SHADOWMAP":"",te.shadowMapEnabled?"#define "+le:"",te.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",te.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",te.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",te.logarithmicDepthBuffer&&te.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(te.extensionShaderTextureLOD||te.envMap)&&te.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",te.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",te.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",te.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",te.toneMapping):"",te.dithering?"#define DITHERING":"",te.format===RGBFormat?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,te.map?getTexelDecodingFunction("mapTexelToLinear",te.mapEncoding):"",te.matcap?getTexelDecodingFunction("matcapTexelToLinear",te.matcapEncoding):"",te.envMap?getTexelDecodingFunction("envMapTexelToLinear",te.envMapEncoding):"",te.emissiveMap?getTexelDecodingFunction("emissiveMapTexelToLinear",te.emissiveMapEncoding):"",te.specularColorMap?getTexelDecodingFunction("specularColorMapTexelToLinear",te.specularColorMapEncoding):"",te.sheenColorMap?getTexelDecodingFunction("sheenColorMapTexelToLinear",te.sheenColorMapEncoding):"",te.lightMap?getTexelDecodingFunction("lightMapTexelToLinear",te.lightMapEncoding):"",getTexelEncodingFunction("linearToOutputTexel",te.outputEncoding),te.depthPacking?"#define DEPTH_PACKING "+te.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),ae=resolveIncludes(ae),ae=replaceLightNums(ae,te),ae=replaceClippingPlaneNums(ae,te),oe=resolveIncludes(oe),oe=replaceLightNums(oe,te),oe=replaceClippingPlaneNums(oe,te),ae=unrollLoops(ae),oe=unrollLoops(oe),te.isWebGL2&&te.isRawShaderMaterial!==!0&&(_e=`#version 300 es
`,xe=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+xe,ge=["#define varying in",te.glslVersion===GLSL3?"":"out highp vec4 pc_fragColor;",te.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ge);const ve=_e+xe+ae,ye=_e+ge+oe,be=WebGLShader(ne,35633,ve),we=WebGLShader(ne,35632,ye);if(ne.attachShader(me,be),ne.attachShader(me,we),te.index0AttributeName!==void 0?ne.bindAttribLocation(me,0,te.index0AttributeName):te.morphTargets===!0&&ne.bindAttribLocation(me,0,"position"),ne.linkProgram(me),ie.debug.checkShaderErrors){const Pe=ne.getProgramInfoLog(me).trim(),Be=ne.getShaderInfoLog(be).trim(),Ce=ne.getShaderInfoLog(we).trim();let De=!0,Re=!0;if(ne.getProgramParameter(me,35714)===!1){De=!1;const Le=getShaderErrors(ne,be,"vertex"),ke=getShaderErrors(ne,we,"fragment");console.error("THREE.WebGLProgram: Shader Error "+ne.getError()+" - VALIDATE_STATUS "+ne.getProgramParameter(me,35715)+`

Program Info Log: `+Pe+`
`+Le+`
`+ke)}else Pe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Pe):(Be===""||Ce==="")&&(Re=!1);Re&&(this.diagnostics={runnable:De,programLog:Pe,vertexShader:{log:Be,prefix:xe},fragmentShader:{log:Ce,prefix:ge}})}ne.deleteShader(be),ne.deleteShader(we);let Se;this.getUniforms=function(){return Se===void 0&&(Se=new WebGLUniforms(ne,me)),Se};let Te;return this.getAttributes=function(){return Te===void 0&&(Te=fetchAttributeLocations(ne,me)),Te},this.destroy=function(){re.releaseStatesOfProgram(this),ne.deleteProgram(me),this.program=void 0},this.name=te.shaderName,this.id=programIdCount++,this.cacheKey=ee,this.usedTimes=1,this.program=me,this.vertexShader=be,this.fragmentShader=we,this}function WebGLPrograms(ie,ee,te,re,ne,se,ae){const oe=[],le=ne.isWebGL2,he=ne.logarithmicDepthBuffer,ce=ne.floatVertexTextures,de=ne.maxVertexUniforms,ue=ne.vertexTextures;let fe=ne.precision;const pe={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},me=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function xe(Se){const Pe=Se.skeleton.bones;if(ce)return 1024;{const Ce=Math.floor((de-20)/4),De=Math.min(Ce,Pe.length);return De<Pe.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Pe.length+" bones. This GPU supports "+De+"."),0):De}}function ge(Se){let Te;return Se&&Se.isTexture?Te=Se.encoding:Se&&Se.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Te=Se.texture.encoding):Te=LinearEncoding,le&&Se&&Se.isTexture&&Se.format===RGBAFormat&&Se.type===UnsignedByteType&&Se.encoding===sRGBEncoding&&(Te=LinearEncoding),Te}function _e(Se,Te,Pe,Be,Ce){const De=Be.fog,Re=Se.isMeshStandardMaterial?Be.environment:null,Le=(Se.isMeshStandardMaterial?te:ee).get(Se.envMap||Re),ke=pe[Se.type],Me=Ce.isSkinnedMesh?xe(Ce):0;Se.precision!==null&&(fe=ne.getMaxPrecision(Se.precision),fe!==Se.precision&&console.warn("THREE.WebGLProgram.getParameters:",Se.precision,"not supported, using",fe,"instead."));let Ee,Ae;if(ke){const ze=ShaderLib[ke];Ee=ze.vertexShader,Ae=ze.fragmentShader}else Ee=Se.vertexShader,Ae=Se.fragmentShader;const Ie=ie.getRenderTarget(),Fe=Se.alphaTest>0,Ne=Se.clearcoat>0;return{isWebGL2:le,shaderID:ke,shaderName:Se.type,vertexShader:Ee,fragmentShader:Ae,defines:Se.defines,isRawShaderMaterial:Se.isRawShaderMaterial===!0,glslVersion:Se.glslVersion,precision:fe,instancing:Ce.isInstancedMesh===!0,instancingColor:Ce.isInstancedMesh===!0&&Ce.instanceColor!==null,supportsVertexTextures:ue,outputEncoding:Ie!==null?ge(Ie.texture):ie.outputEncoding,map:!!Se.map,mapEncoding:ge(Se.map),matcap:!!Se.matcap,matcapEncoding:ge(Se.matcap),envMap:!!Le,envMapMode:Le&&Le.mapping,envMapEncoding:ge(Le),envMapCubeUV:!!Le&&(Le.mapping===CubeUVReflectionMapping||Le.mapping===CubeUVRefractionMapping),lightMap:!!Se.lightMap,lightMapEncoding:ge(Se.lightMap),aoMap:!!Se.aoMap,emissiveMap:!!Se.emissiveMap,emissiveMapEncoding:ge(Se.emissiveMap),bumpMap:!!Se.bumpMap,normalMap:!!Se.normalMap,objectSpaceNormalMap:Se.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:Se.normalMapType===TangentSpaceNormalMap,clearcoat:Ne,clearcoatMap:Ne&&!!Se.clearcoatMap,clearcoatRoughnessMap:Ne&&!!Se.clearcoatRoughnessMap,clearcoatNormalMap:Ne&&!!Se.clearcoatNormalMap,displacementMap:!!Se.displacementMap,roughnessMap:!!Se.roughnessMap,metalnessMap:!!Se.metalnessMap,specularMap:!!Se.specularMap,specularIntensityMap:!!Se.specularIntensityMap,specularColorMap:!!Se.specularColorMap,specularColorMapEncoding:ge(Se.specularColorMap),alphaMap:!!Se.alphaMap,alphaTest:Fe,gradientMap:!!Se.gradientMap,sheen:Se.sheen>0,sheenColorMap:!!Se.sheenColorMap,sheenColorMapEncoding:ge(Se.sheenColorMap),sheenRoughnessMap:!!Se.sheenRoughnessMap,transmission:Se.transmission>0,transmissionMap:!!Se.transmissionMap,thicknessMap:!!Se.thicknessMap,combine:Se.combine,vertexTangents:!!Se.normalMap&&!!Ce.geometry&&!!Ce.geometry.attributes.tangent,vertexColors:Se.vertexColors,vertexAlphas:Se.vertexColors===!0&&!!Ce.geometry&&!!Ce.geometry.attributes.color&&Ce.geometry.attributes.color.itemSize===4,vertexUvs:!!Se.map||!!Se.bumpMap||!!Se.normalMap||!!Se.specularMap||!!Se.alphaMap||!!Se.emissiveMap||!!Se.roughnessMap||!!Se.metalnessMap||!!Se.clearcoatMap||!!Se.clearcoatRoughnessMap||!!Se.clearcoatNormalMap||!!Se.displacementMap||!!Se.transmissionMap||!!Se.thicknessMap||!!Se.specularIntensityMap||!!Se.specularColorMap||!!Se.sheenColorMap||Se.sheenRoughnessMap,uvsVertexOnly:!(!!Se.map||!!Se.bumpMap||!!Se.normalMap||!!Se.specularMap||!!Se.alphaMap||!!Se.emissiveMap||!!Se.roughnessMap||!!Se.metalnessMap||!!Se.clearcoatNormalMap||Se.transmission>0||!!Se.transmissionMap||!!Se.thicknessMap||!!Se.specularIntensityMap||!!Se.specularColorMap||!!Se.sheen>0||!!Se.sheenColorMap||!!Se.sheenRoughnessMap)&&!!Se.displacementMap,fog:!!De,useFog:Se.fog,fogExp2:De&&De.isFogExp2,flatShading:!!Se.flatShading,sizeAttenuation:Se.sizeAttenuation,logarithmicDepthBuffer:he,skinning:Ce.isSkinnedMesh===!0&&Me>0,maxBones:Me,useVertexTexture:ce,morphTargets:!!Ce.geometry&&!!Ce.geometry.morphAttributes.position,morphNormals:!!Ce.geometry&&!!Ce.geometry.morphAttributes.normal,morphTargetsCount:!!Ce.geometry&&!!Ce.geometry.morphAttributes.position?Ce.geometry.morphAttributes.position.length:0,numDirLights:Te.directional.length,numPointLights:Te.point.length,numSpotLights:Te.spot.length,numRectAreaLights:Te.rectArea.length,numHemiLights:Te.hemi.length,numDirLightShadows:Te.directionalShadowMap.length,numPointLightShadows:Te.pointShadowMap.length,numSpotLightShadows:Te.spotShadowMap.length,numClippingPlanes:ae.numPlanes,numClipIntersection:ae.numIntersection,format:Se.format,dithering:Se.dithering,shadowMapEnabled:ie.shadowMap.enabled&&Pe.length>0,shadowMapType:ie.shadowMap.type,toneMapping:Se.toneMapped?ie.toneMapping:NoToneMapping,physicallyCorrectLights:ie.physicallyCorrectLights,premultipliedAlpha:Se.premultipliedAlpha,doubleSided:Se.side===DoubleSide,flipSided:Se.side===BackSide,depthPacking:Se.depthPacking!==void 0?Se.depthPacking:!1,index0AttributeName:Se.index0AttributeName,extensionDerivatives:Se.extensions&&Se.extensions.derivatives,extensionFragDepth:Se.extensions&&Se.extensions.fragDepth,extensionDrawBuffers:Se.extensions&&Se.extensions.drawBuffers,extensionShaderTextureLOD:Se.extensions&&Se.extensions.shaderTextureLOD,rendererExtensionFragDepth:le||re.has("EXT_frag_depth"),rendererExtensionDrawBuffers:le||re.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:le||re.has("EXT_shader_texture_lod"),customProgramCacheKey:Se.customProgramCacheKey()}}function ve(Se){const Te=[];if(Se.shaderID?Te.push(Se.shaderID):(Te.push(hashString(Se.fragmentShader)),Te.push(hashString(Se.vertexShader))),Se.defines!==void 0)for(const Pe in Se.defines)Te.push(Pe),Te.push(Se.defines[Pe]);if(Se.isRawShaderMaterial===!1){for(let Pe=0;Pe<me.length;Pe++)Te.push(Se[me[Pe]]);Te.push(ie.outputEncoding),Te.push(ie.gammaFactor)}return Te.push(Se.customProgramCacheKey),Te.join()}function ye(Se){const Te=pe[Se.type];let Pe;if(Te){const Be=ShaderLib[Te];Pe=UniformsUtils.clone(Be.uniforms)}else Pe=Se.uniforms;return Pe}function be(Se,Te){let Pe;for(let Be=0,Ce=oe.length;Be<Ce;Be++){const De=oe[Be];if(De.cacheKey===Te){Pe=De,++Pe.usedTimes;break}}return Pe===void 0&&(Pe=new WebGLProgram(ie,Te,Se,se),oe.push(Pe)),Pe}function we(Se){if(--Se.usedTimes===0){const Te=oe.indexOf(Se);oe[Te]=oe[oe.length-1],oe.pop(),Se.destroy()}}return{getParameters:_e,getProgramCacheKey:ve,getUniforms:ye,acquireProgram:be,releaseProgram:we,programs:oe}}function WebGLProperties(){let ie=new WeakMap;function ee(se){let ae=ie.get(se);return ae===void 0&&(ae={},ie.set(se,ae)),ae}function te(se){ie.delete(se)}function re(se,ae,oe){ie.get(se)[ae]=oe}function ne(){ie=new WeakMap}return{get:ee,remove:te,update:re,dispose:ne}}function painterSortStable(ie,ee){return ie.groupOrder!==ee.groupOrder?ie.groupOrder-ee.groupOrder:ie.renderOrder!==ee.renderOrder?ie.renderOrder-ee.renderOrder:ie.program!==ee.program?ie.program.id-ee.program.id:ie.material.id!==ee.material.id?ie.material.id-ee.material.id:ie.z!==ee.z?ie.z-ee.z:ie.id-ee.id}function reversePainterSortStable(ie,ee){return ie.groupOrder!==ee.groupOrder?ie.groupOrder-ee.groupOrder:ie.renderOrder!==ee.renderOrder?ie.renderOrder-ee.renderOrder:ie.z!==ee.z?ee.z-ie.z:ie.id-ee.id}function WebGLRenderList(ie){const ee=[];let te=0;const re=[],ne=[],se=[],ae={id:-1};function oe(){te=0,re.length=0,ne.length=0,se.length=0}function le(fe,pe,me,xe,ge,_e){let ve=ee[te];const ye=ie.get(me);return ve===void 0?(ve={id:fe.id,object:fe,geometry:pe,material:me,program:ye.program||ae,groupOrder:xe,renderOrder:fe.renderOrder,z:ge,group:_e},ee[te]=ve):(ve.id=fe.id,ve.object=fe,ve.geometry=pe,ve.material=me,ve.program=ye.program||ae,ve.groupOrder=xe,ve.renderOrder=fe.renderOrder,ve.z=ge,ve.group=_e),te++,ve}function he(fe,pe,me,xe,ge,_e){const ve=le(fe,pe,me,xe,ge,_e);me.transmission>0?ne.push(ve):me.transparent===!0?se.push(ve):re.push(ve)}function ce(fe,pe,me,xe,ge,_e){const ve=le(fe,pe,me,xe,ge,_e);me.transmission>0?ne.unshift(ve):me.transparent===!0?se.unshift(ve):re.unshift(ve)}function de(fe,pe){re.length>1&&re.sort(fe||painterSortStable),ne.length>1&&ne.sort(pe||reversePainterSortStable),se.length>1&&se.sort(pe||reversePainterSortStable)}function ue(){for(let fe=te,pe=ee.length;fe<pe;fe++){const me=ee[fe];if(me.id===null)break;me.id=null,me.object=null,me.geometry=null,me.material=null,me.program=null,me.group=null}}return{opaque:re,transmissive:ne,transparent:se,init:oe,push:he,unshift:ce,finish:ue,sort:de}}function WebGLRenderLists(ie){let ee=new WeakMap;function te(ne,se){let ae;return ee.has(ne)===!1?(ae=new WebGLRenderList(ie),ee.set(ne,[ae])):se>=ee.get(ne).length?(ae=new WebGLRenderList(ie),ee.get(ne).push(ae)):ae=ee.get(ne)[se],ae}function re(){ee=new WeakMap}return{get:te,dispose:re}}function UniformsCache(){const ie={};return{get:function(ee){if(ie[ee.id]!==void 0)return ie[ee.id];let te;switch(ee.type){case"DirectionalLight":te={direction:new Vector3,color:new Color$1};break;case"SpotLight":te={position:new Vector3,direction:new Vector3,color:new Color$1,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":te={position:new Vector3,color:new Color$1,distance:0,decay:0};break;case"HemisphereLight":te={direction:new Vector3,skyColor:new Color$1,groundColor:new Color$1};break;case"RectAreaLight":te={color:new Color$1,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return ie[ee.id]=te,te}}}function ShadowUniformsCache(){const ie={};return{get:function(ee){if(ie[ee.id]!==void 0)return ie[ee.id];let te;switch(ee.type){case"DirectionalLight":te={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":te={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":te={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return ie[ee.id]=te,te}}}let nextVersion=0;function shadowCastingLightsFirst(ie,ee){return(ee.castShadow?1:0)-(ie.castShadow?1:0)}function WebGLLights(ie,ee){const te=new UniformsCache,re=ShadowUniformsCache(),ne={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let ce=0;ce<9;ce++)ne.probe.push(new Vector3);const se=new Vector3,ae=new Matrix4,oe=new Matrix4;function le(ce,de){let ue=0,fe=0,pe=0;for(let Pe=0;Pe<9;Pe++)ne.probe[Pe].set(0,0,0);let me=0,xe=0,ge=0,_e=0,ve=0,ye=0,be=0,we=0;ce.sort(shadowCastingLightsFirst);const Se=de!==!0?Math.PI:1;for(let Pe=0,Be=ce.length;Pe<Be;Pe++){const Ce=ce[Pe],De=Ce.color,Re=Ce.intensity,Le=Ce.distance,ke=Ce.shadow&&Ce.shadow.map?Ce.shadow.map.texture:null;if(Ce.isAmbientLight)ue+=De.r*Re*Se,fe+=De.g*Re*Se,pe+=De.b*Re*Se;else if(Ce.isLightProbe)for(let Me=0;Me<9;Me++)ne.probe[Me].addScaledVector(Ce.sh.coefficients[Me],Re);else if(Ce.isDirectionalLight){const Me=te.get(Ce);if(Me.color.copy(Ce.color).multiplyScalar(Ce.intensity*Se),Ce.castShadow){const Ee=Ce.shadow,Ae=re.get(Ce);Ae.shadowBias=Ee.bias,Ae.shadowNormalBias=Ee.normalBias,Ae.shadowRadius=Ee.radius,Ae.shadowMapSize=Ee.mapSize,ne.directionalShadow[me]=Ae,ne.directionalShadowMap[me]=ke,ne.directionalShadowMatrix[me]=Ce.shadow.matrix,ye++}ne.directional[me]=Me,me++}else if(Ce.isSpotLight){const Me=te.get(Ce);if(Me.position.setFromMatrixPosition(Ce.matrixWorld),Me.color.copy(De).multiplyScalar(Re*Se),Me.distance=Le,Me.coneCos=Math.cos(Ce.angle),Me.penumbraCos=Math.cos(Ce.angle*(1-Ce.penumbra)),Me.decay=Ce.decay,Ce.castShadow){const Ee=Ce.shadow,Ae=re.get(Ce);Ae.shadowBias=Ee.bias,Ae.shadowNormalBias=Ee.normalBias,Ae.shadowRadius=Ee.radius,Ae.shadowMapSize=Ee.mapSize,ne.spotShadow[ge]=Ae,ne.spotShadowMap[ge]=ke,ne.spotShadowMatrix[ge]=Ce.shadow.matrix,we++}ne.spot[ge]=Me,ge++}else if(Ce.isRectAreaLight){const Me=te.get(Ce);Me.color.copy(De).multiplyScalar(Re),Me.halfWidth.set(Ce.width*.5,0,0),Me.halfHeight.set(0,Ce.height*.5,0),ne.rectArea[_e]=Me,_e++}else if(Ce.isPointLight){const Me=te.get(Ce);if(Me.color.copy(Ce.color).multiplyScalar(Ce.intensity*Se),Me.distance=Ce.distance,Me.decay=Ce.decay,Ce.castShadow){const Ee=Ce.shadow,Ae=re.get(Ce);Ae.shadowBias=Ee.bias,Ae.shadowNormalBias=Ee.normalBias,Ae.shadowRadius=Ee.radius,Ae.shadowMapSize=Ee.mapSize,Ae.shadowCameraNear=Ee.camera.near,Ae.shadowCameraFar=Ee.camera.far,ne.pointShadow[xe]=Ae,ne.pointShadowMap[xe]=ke,ne.pointShadowMatrix[xe]=Ce.shadow.matrix,be++}ne.point[xe]=Me,xe++}else if(Ce.isHemisphereLight){const Me=te.get(Ce);Me.skyColor.copy(Ce.color).multiplyScalar(Re*Se),Me.groundColor.copy(Ce.groundColor).multiplyScalar(Re*Se),ne.hemi[ve]=Me,ve++}}_e>0&&(ee.isWebGL2||ie.has("OES_texture_float_linear")===!0?(ne.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,ne.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):ie.has("OES_texture_half_float_linear")===!0?(ne.rectAreaLTC1=UniformsLib.LTC_HALF_1,ne.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),ne.ambient[0]=ue,ne.ambient[1]=fe,ne.ambient[2]=pe;const Te=ne.hash;(Te.directionalLength!==me||Te.pointLength!==xe||Te.spotLength!==ge||Te.rectAreaLength!==_e||Te.hemiLength!==ve||Te.numDirectionalShadows!==ye||Te.numPointShadows!==be||Te.numSpotShadows!==we)&&(ne.directional.length=me,ne.spot.length=ge,ne.rectArea.length=_e,ne.point.length=xe,ne.hemi.length=ve,ne.directionalShadow.length=ye,ne.directionalShadowMap.length=ye,ne.pointShadow.length=be,ne.pointShadowMap.length=be,ne.spotShadow.length=we,ne.spotShadowMap.length=we,ne.directionalShadowMatrix.length=ye,ne.pointShadowMatrix.length=be,ne.spotShadowMatrix.length=we,Te.directionalLength=me,Te.pointLength=xe,Te.spotLength=ge,Te.rectAreaLength=_e,Te.hemiLength=ve,Te.numDirectionalShadows=ye,Te.numPointShadows=be,Te.numSpotShadows=we,ne.version=nextVersion++)}function he(ce,de){let ue=0,fe=0,pe=0,me=0,xe=0;const ge=de.matrixWorldInverse;for(let _e=0,ve=ce.length;_e<ve;_e++){const ye=ce[_e];if(ye.isDirectionalLight){const be=ne.directional[ue];be.direction.setFromMatrixPosition(ye.matrixWorld),se.setFromMatrixPosition(ye.target.matrixWorld),be.direction.sub(se),be.direction.transformDirection(ge),ue++}else if(ye.isSpotLight){const be=ne.spot[pe];be.position.setFromMatrixPosition(ye.matrixWorld),be.position.applyMatrix4(ge),be.direction.setFromMatrixPosition(ye.matrixWorld),se.setFromMatrixPosition(ye.target.matrixWorld),be.direction.sub(se),be.direction.transformDirection(ge),pe++}else if(ye.isRectAreaLight){const be=ne.rectArea[me];be.position.setFromMatrixPosition(ye.matrixWorld),be.position.applyMatrix4(ge),oe.identity(),ae.copy(ye.matrixWorld),ae.premultiply(ge),oe.extractRotation(ae),be.halfWidth.set(ye.width*.5,0,0),be.halfHeight.set(0,ye.height*.5,0),be.halfWidth.applyMatrix4(oe),be.halfHeight.applyMatrix4(oe),me++}else if(ye.isPointLight){const be=ne.point[fe];be.position.setFromMatrixPosition(ye.matrixWorld),be.position.applyMatrix4(ge),fe++}else if(ye.isHemisphereLight){const be=ne.hemi[xe];be.direction.setFromMatrixPosition(ye.matrixWorld),be.direction.transformDirection(ge),be.direction.normalize(),xe++}}}return{setup:le,setupView:he,state:ne}}function WebGLRenderState(ie,ee){const te=new WebGLLights(ie,ee),re=[],ne=[];function se(){re.length=0,ne.length=0}function ae(de){re.push(de)}function oe(de){ne.push(de)}function le(de){te.setup(re,de)}function he(de){te.setupView(re,de)}return{init:se,state:{lightsArray:re,shadowsArray:ne,lights:te},setupLights:le,setupLightsView:he,pushLight:ae,pushShadow:oe}}function WebGLRenderStates(ie,ee){let te=new WeakMap;function re(se,ae=0){let oe;return te.has(se)===!1?(oe=new WebGLRenderState(ie,ee),te.set(se,[oe])):ae>=te.get(se).length?(oe=new WebGLRenderState(ie,ee),te.get(se).push(oe)):oe=te.get(se)[ae],oe}function ne(){te=new WeakMap}return{get:re,dispose:ne}}class MeshDepthMaterial extends Material{constructor(ee){super(),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(ee)}copy(ee){return super.copy(ee),this.depthPacking=ee.depthPacking,this.map=ee.map,this.alphaMap=ee.alphaMap,this.displacementMap=ee.displacementMap,this.displacementScale=ee.displacementScale,this.displacementBias=ee.displacementBias,this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this}}MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;class MeshDistanceMaterial extends Material{constructor(ee){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(ee)}copy(ee){return super.copy(ee),this.referencePosition.copy(ee.referencePosition),this.nearDistance=ee.nearDistance,this.farDistance=ee.farDistance,this.map=ee.map,this.alphaMap=ee.alphaMap,this.displacementMap=ee.displacementMap,this.displacementScale=ee.displacementScale,this.displacementBias=ee.displacementBias,this}}MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;const vertex$h=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment$h=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(ie,ee,te){let re=new Frustum;const ne=new Vector2,se=new Vector2,ae=new Vector4,oe=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),le=new MeshDistanceMaterial,he={},ce=te.maxTextureSize,de={0:BackSide,1:FrontSide,2:DoubleSide},ue=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex$h,fragmentShader:fragment$h}),fe=ue.clone();fe.defines.HORIZONTAL_PASS=1;const pe=new BufferGeometry;pe.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const me=new Mesh$1(pe,ue),xe=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(ye,be,we){if(xe.enabled===!1||xe.autoUpdate===!1&&xe.needsUpdate===!1||ye.length===0)return;const Se=ie.getRenderTarget(),Te=ie.getActiveCubeFace(),Pe=ie.getActiveMipmapLevel(),Be=ie.state;Be.setBlending(NoBlending),Be.buffers.color.setClear(1,1,1,1),Be.buffers.depth.setTest(!0),Be.setScissorTest(!1);for(let Ce=0,De=ye.length;Ce<De;Ce++){const Re=ye[Ce],Le=Re.shadow;if(Le===void 0){console.warn("THREE.WebGLShadowMap:",Re,"has no shadow.");continue}if(Le.autoUpdate===!1&&Le.needsUpdate===!1)continue;ne.copy(Le.mapSize);const ke=Le.getFrameExtents();if(ne.multiply(ke),se.copy(Le.mapSize),(ne.x>ce||ne.y>ce)&&(ne.x>ce&&(se.x=Math.floor(ce/ke.x),ne.x=se.x*ke.x,Le.mapSize.x=se.x),ne.y>ce&&(se.y=Math.floor(ce/ke.y),ne.y=se.y*ke.y,Le.mapSize.y=se.y)),Le.map===null&&!Le.isPointLightShadow&&this.type===VSMShadowMap){const Ee={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};Le.map=new WebGLRenderTarget(ne.x,ne.y,Ee),Le.map.texture.name=Re.name+".shadowMap",Le.mapPass=new WebGLRenderTarget(ne.x,ne.y,Ee),Le.camera.updateProjectionMatrix()}if(Le.map===null){const Ee={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};Le.map=new WebGLRenderTarget(ne.x,ne.y,Ee),Le.map.texture.name=Re.name+".shadowMap",Le.camera.updateProjectionMatrix()}ie.setRenderTarget(Le.map),ie.clear();const Me=Le.getViewportCount();for(let Ee=0;Ee<Me;Ee++){const Ae=Le.getViewport(Ee);ae.set(se.x*Ae.x,se.y*Ae.y,se.x*Ae.z,se.y*Ae.w),Be.viewport(ae),Le.updateMatrices(Re,Ee),re=Le.getFrustum(),ve(be,we,Le.camera,Re,this.type)}!Le.isPointLightShadow&&this.type===VSMShadowMap&&ge(Le,we),Le.needsUpdate=!1}xe.needsUpdate=!1,ie.setRenderTarget(Se,Te,Pe)};function ge(ye,be){const we=ee.update(me);ue.defines.VSM_SAMPLES!==ye.blurSamples&&(ue.defines.VSM_SAMPLES=ye.blurSamples,fe.defines.VSM_SAMPLES=ye.blurSamples,ue.needsUpdate=!0,fe.needsUpdate=!0),ue.uniforms.shadow_pass.value=ye.map.texture,ue.uniforms.resolution.value=ye.mapSize,ue.uniforms.radius.value=ye.radius,ie.setRenderTarget(ye.mapPass),ie.clear(),ie.renderBufferDirect(be,null,we,ue,me,null),fe.uniforms.shadow_pass.value=ye.mapPass.texture,fe.uniforms.resolution.value=ye.mapSize,fe.uniforms.radius.value=ye.radius,ie.setRenderTarget(ye.map),ie.clear(),ie.renderBufferDirect(be,null,we,fe,me,null)}function _e(ye,be,we,Se,Te,Pe,Be){let Ce=null;const De=Se.isPointLight===!0?ye.customDistanceMaterial:ye.customDepthMaterial;if(De!==void 0?Ce=De:Ce=Se.isPointLight===!0?le:oe,ie.localClippingEnabled&&we.clipShadows===!0&&we.clippingPlanes.length!==0||we.displacementMap&&we.displacementScale!==0||we.alphaMap&&we.alphaTest>0){const Re=Ce.uuid,Le=we.uuid;let ke=he[Re];ke===void 0&&(ke={},he[Re]=ke);let Me=ke[Le];Me===void 0&&(Me=Ce.clone(),ke[Le]=Me),Ce=Me}return Ce.visible=we.visible,Ce.wireframe=we.wireframe,Be===VSMShadowMap?Ce.side=we.shadowSide!==null?we.shadowSide:we.side:Ce.side=we.shadowSide!==null?we.shadowSide:de[we.side],Ce.alphaMap=we.alphaMap,Ce.alphaTest=we.alphaTest,Ce.clipShadows=we.clipShadows,Ce.clippingPlanes=we.clippingPlanes,Ce.clipIntersection=we.clipIntersection,Ce.displacementMap=we.displacementMap,Ce.displacementScale=we.displacementScale,Ce.displacementBias=we.displacementBias,Ce.wireframeLinewidth=we.wireframeLinewidth,Ce.linewidth=we.linewidth,Se.isPointLight===!0&&Ce.isMeshDistanceMaterial===!0&&(Ce.referencePosition.setFromMatrixPosition(Se.matrixWorld),Ce.nearDistance=Te,Ce.farDistance=Pe),Ce}function ve(ye,be,we,Se,Te){if(ye.visible===!1)return;if(ye.layers.test(be.layers)&&(ye.isMesh||ye.isLine||ye.isPoints)&&(ye.castShadow||ye.receiveShadow&&Te===VSMShadowMap)&&(!ye.frustumCulled||re.intersectsObject(ye))){ye.modelViewMatrix.multiplyMatrices(we.matrixWorldInverse,ye.matrixWorld);const Ce=ee.update(ye),De=ye.material;if(Array.isArray(De)){const Re=Ce.groups;for(let Le=0,ke=Re.length;Le<ke;Le++){const Me=Re[Le],Ee=De[Me.materialIndex];if(Ee&&Ee.visible){const Ae=_e(ye,Ce,Ee,Se,we.near,we.far,Te);ie.renderBufferDirect(we,null,Ce,Ae,ye,Me)}}}else if(De.visible){const Re=_e(ye,Ce,De,Se,we.near,we.far,Te);ie.renderBufferDirect(we,null,Ce,Re,ye,null)}}const Be=ye.children;for(let Ce=0,De=Be.length;Ce<De;Ce++)ve(Be[Ce],be,we,Se,Te)}}function WebGLState(ie,ee,te){const re=te.isWebGL2;function ne(){let Ue=!1;const xt=new Vector4;let ht=null;const At=new Vector4(0,0,0,0);return{setMask:function(Pt){ht!==Pt&&!Ue&&(ie.colorMask(Pt,Pt,Pt,Pt),ht=Pt)},setLocked:function(Pt){Ue=Pt},setClear:function(Pt,$t,qt,Zt,ti){ti===!0&&(Pt*=Zt,$t*=Zt,qt*=Zt),xt.set(Pt,$t,qt,Zt),At.equals(xt)===!1&&(ie.clearColor(Pt,$t,qt,Zt),At.copy(xt))},reset:function(){Ue=!1,ht=null,At.set(-1,0,0,0)}}}function se(){let Ue=!1,xt=null,ht=null,At=null;return{setTest:function(Pt){Pt?Xe(2929):Je(2929)},setMask:function(Pt){xt!==Pt&&!Ue&&(ie.depthMask(Pt),xt=Pt)},setFunc:function(Pt){if(ht!==Pt){if(Pt)switch(Pt){case NeverDepth:ie.depthFunc(512);break;case AlwaysDepth:ie.depthFunc(519);break;case LessDepth:ie.depthFunc(513);break;case LessEqualDepth:ie.depthFunc(515);break;case EqualDepth:ie.depthFunc(514);break;case GreaterEqualDepth:ie.depthFunc(518);break;case GreaterDepth:ie.depthFunc(516);break;case NotEqualDepth:ie.depthFunc(517);break;default:ie.depthFunc(515)}else ie.depthFunc(515);ht=Pt}},setLocked:function(Pt){Ue=Pt},setClear:function(Pt){At!==Pt&&(ie.clearDepth(Pt),At=Pt)},reset:function(){Ue=!1,xt=null,ht=null,At=null}}}function ae(){let Ue=!1,xt=null,ht=null,At=null,Pt=null,$t=null,qt=null,Zt=null,ti=null;return{setTest:function(Xt){Ue||(Xt?Xe(2960):Je(2960))},setMask:function(Xt){xt!==Xt&&!Ue&&(ie.stencilMask(Xt),xt=Xt)},setFunc:function(Xt,zt,Jt){(ht!==Xt||At!==zt||Pt!==Jt)&&(ie.stencilFunc(Xt,zt,Jt),ht=Xt,At=zt,Pt=Jt)},setOp:function(Xt,zt,Jt){($t!==Xt||qt!==zt||Zt!==Jt)&&(ie.stencilOp(Xt,zt,Jt),$t=Xt,qt=zt,Zt=Jt)},setLocked:function(Xt){Ue=Xt},setClear:function(Xt){ti!==Xt&&(ie.clearStencil(Xt),ti=Xt)},reset:function(){Ue=!1,xt=null,ht=null,At=null,Pt=null,$t=null,qt=null,Zt=null,ti=null}}}const oe=new ne,le=new se,he=new ae;let ce={},de=null,ue={},fe=null,pe=!1,me=null,xe=null,ge=null,_e=null,ve=null,ye=null,be=null,we=!1,Se=null,Te=null,Pe=null,Be=null,Ce=null;const De=ie.getParameter(35661);let Re=!1,Le=0;const ke=ie.getParameter(7938);ke.indexOf("WebGL")!==-1?(Le=parseFloat(/^WebGL (\d)/.exec(ke)[1]),Re=Le>=1):ke.indexOf("OpenGL ES")!==-1&&(Le=parseFloat(/^OpenGL ES (\d)/.exec(ke)[1]),Re=Le>=2);let Me=null,Ee={};const Ae=ie.getParameter(3088),Ie=ie.getParameter(2978),Fe=new Vector4().fromArray(Ae),Ne=new Vector4().fromArray(Ie);function $e(Ue,xt,ht){const At=new Uint8Array(4),Pt=ie.createTexture();ie.bindTexture(Ue,Pt),ie.texParameteri(Ue,10241,9728),ie.texParameteri(Ue,10240,9728);for(let $t=0;$t<ht;$t++)ie.texImage2D(xt+$t,0,6408,1,1,0,6408,5121,At);return Pt}const ze={};ze[3553]=$e(3553,3553,1),ze[34067]=$e(34067,34069,6),oe.setClear(0,0,0,1),le.setClear(1),he.setClear(0),Xe(2929),le.setFunc(LessEqualDepth),He(!1),Qe(CullFaceBack),Xe(2884),_t(NoBlending);function Xe(Ue){ce[Ue]!==!0&&(ie.enable(Ue),ce[Ue]=!0)}function Je(Ue){ce[Ue]!==!1&&(ie.disable(Ue),ce[Ue]=!1)}function We(Ue){Ue!==de&&(ie.bindFramebuffer(36160,Ue),de=Ue)}function dt(Ue,xt){return xt===null&&de!==null&&(xt=de),ue[Ue]!==xt?(ie.bindFramebuffer(Ue,xt),ue[Ue]=xt,re&&(Ue===36009&&(ue[36160]=xt),Ue===36160&&(ue[36009]=xt)),!0):!1}function yt(Ue){return fe!==Ue?(ie.useProgram(Ue),fe=Ue,!0):!1}const vt={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(re)vt[MinEquation]=32775,vt[MaxEquation]=32776;else{const Ue=ee.get("EXT_blend_minmax");Ue!==null&&(vt[MinEquation]=Ue.MIN_EXT,vt[MaxEquation]=Ue.MAX_EXT)}const at={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function _t(Ue,xt,ht,At,Pt,$t,qt,Zt){if(Ue===NoBlending){pe===!0&&(Je(3042),pe=!1);return}if(pe===!1&&(Xe(3042),pe=!0),Ue!==CustomBlending){if(Ue!==me||Zt!==we){if((xe!==AddEquation||ve!==AddEquation)&&(ie.blendEquation(32774),xe=AddEquation,ve=AddEquation),Zt)switch(Ue){case NormalBlending:ie.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:ie.blendFunc(1,1);break;case SubtractiveBlending:ie.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:ie.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ue);break}else switch(Ue){case NormalBlending:ie.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:ie.blendFunc(770,1);break;case SubtractiveBlending:ie.blendFunc(0,769);break;case MultiplyBlending:ie.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ue);break}ge=null,_e=null,ye=null,be=null,me=Ue,we=Zt}return}Pt=Pt||xt,$t=$t||ht,qt=qt||At,(xt!==xe||Pt!==ve)&&(ie.blendEquationSeparate(vt[xt],vt[Pt]),xe=xt,ve=Pt),(ht!==ge||At!==_e||$t!==ye||qt!==be)&&(ie.blendFuncSeparate(at[ht],at[At],at[$t],at[qt]),ge=ht,_e=At,ye=$t,be=qt),me=Ue,we=null}function je(Ue,xt){Ue.side===DoubleSide?Je(2884):Xe(2884);let ht=Ue.side===BackSide;xt&&(ht=!ht),He(ht),Ue.blending===NormalBlending&&Ue.transparent===!1?_t(NoBlending):_t(Ue.blending,Ue.blendEquation,Ue.blendSrc,Ue.blendDst,Ue.blendEquationAlpha,Ue.blendSrcAlpha,Ue.blendDstAlpha,Ue.premultipliedAlpha),le.setFunc(Ue.depthFunc),le.setTest(Ue.depthTest),le.setMask(Ue.depthWrite),oe.setMask(Ue.colorWrite);const At=Ue.stencilWrite;he.setTest(At),At&&(he.setMask(Ue.stencilWriteMask),he.setFunc(Ue.stencilFunc,Ue.stencilRef,Ue.stencilFuncMask),he.setOp(Ue.stencilFail,Ue.stencilZFail,Ue.stencilZPass)),gt(Ue.polygonOffset,Ue.polygonOffsetFactor,Ue.polygonOffsetUnits),Ue.alphaToCoverage===!0?Xe(32926):Je(32926)}function He(Ue){Se!==Ue&&(Ue?ie.frontFace(2304):ie.frontFace(2305),Se=Ue)}function Qe(Ue){Ue!==CullFaceNone?(Xe(2884),Ue!==Te&&(Ue===CullFaceBack?ie.cullFace(1029):Ue===CullFaceFront?ie.cullFace(1028):ie.cullFace(1032))):Je(2884),Te=Ue}function St(Ue){Ue!==Pe&&(Re&&ie.lineWidth(Ue),Pe=Ue)}function gt(Ue,xt,ht){Ue?(Xe(32823),(Be!==xt||Ce!==ht)&&(ie.polygonOffset(xt,ht),Be=xt,Ce=ht)):Je(32823)}function Oe(Ue){Ue?Xe(3089):Je(3089)}function Ve(Ue){Ue===void 0&&(Ue=33984+De-1),Me!==Ue&&(ie.activeTexture(Ue),Me=Ue)}function Ze(Ue,xt){Me===null&&Ve();let ht=Ee[Me];ht===void 0&&(ht={type:void 0,texture:void 0},Ee[Me]=ht),(ht.type!==Ue||ht.texture!==xt)&&(ie.bindTexture(Ue,xt||ze[Ue]),ht.type=Ue,ht.texture=xt)}function mt(){const Ue=Ee[Me];Ue!==void 0&&Ue.type!==void 0&&(ie.bindTexture(Ue.type,null),Ue.type=void 0,Ue.texture=void 0)}function pt(){try{ie.compressedTexImage2D.apply(ie,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Tt(){try{ie.texImage2D.apply(ie,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Et(){try{ie.texImage3D.apply(ie,arguments)}catch(Ue){console.error("THREE.WebGLState:",Ue)}}function Mt(Ue){Fe.equals(Ue)===!1&&(ie.scissor(Ue.x,Ue.y,Ue.z,Ue.w),Fe.copy(Ue))}function Rt(Ue){Ne.equals(Ue)===!1&&(ie.viewport(Ue.x,Ue.y,Ue.z,Ue.w),Ne.copy(Ue))}function bt(){ie.disable(3042),ie.disable(2884),ie.disable(2929),ie.disable(32823),ie.disable(3089),ie.disable(2960),ie.disable(32926),ie.blendEquation(32774),ie.blendFunc(1,0),ie.blendFuncSeparate(1,0,1,0),ie.colorMask(!0,!0,!0,!0),ie.clearColor(0,0,0,0),ie.depthMask(!0),ie.depthFunc(513),ie.clearDepth(1),ie.stencilMask(4294967295),ie.stencilFunc(519,0,4294967295),ie.stencilOp(7680,7680,7680),ie.clearStencil(0),ie.cullFace(1029),ie.frontFace(2305),ie.polygonOffset(0,0),ie.activeTexture(33984),ie.bindFramebuffer(36160,null),re===!0&&(ie.bindFramebuffer(36009,null),ie.bindFramebuffer(36008,null)),ie.useProgram(null),ie.lineWidth(1),ie.scissor(0,0,ie.canvas.width,ie.canvas.height),ie.viewport(0,0,ie.canvas.width,ie.canvas.height),ce={},Me=null,Ee={},de=null,ue={},fe=null,pe=!1,me=null,xe=null,ge=null,_e=null,ve=null,ye=null,be=null,we=!1,Se=null,Te=null,Pe=null,Be=null,Ce=null,Fe.set(0,0,ie.canvas.width,ie.canvas.height),Ne.set(0,0,ie.canvas.width,ie.canvas.height),oe.reset(),le.reset(),he.reset()}return{buffers:{color:oe,depth:le,stencil:he},enable:Xe,disable:Je,bindFramebuffer:dt,bindXRFramebuffer:We,useProgram:yt,setBlending:_t,setMaterial:je,setFlipSided:He,setCullFace:Qe,setLineWidth:St,setPolygonOffset:gt,setScissorTest:Oe,activeTexture:Ve,bindTexture:Ze,unbindTexture:mt,compressedTexImage2D:pt,texImage2D:Tt,texImage3D:Et,scissor:Mt,viewport:Rt,reset:bt}}function WebGLTextures(ie,ee,te,re,ne,se,ae){const oe=ne.isWebGL2,le=ne.maxTextures,he=ne.maxCubemapSize,ce=ne.maxTextureSize,de=ne.maxSamples,ue=new WeakMap;let fe,pe=!1;try{pe=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function me(Oe,Ve){return pe?new OffscreenCanvas(Oe,Ve):createElementNS("canvas")}function xe(Oe,Ve,Ze,mt){let pt=1;if((Oe.width>mt||Oe.height>mt)&&(pt=mt/Math.max(Oe.width,Oe.height)),pt<1||Ve===!0)if(typeof HTMLImageElement!="undefined"&&Oe instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&Oe instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&Oe instanceof ImageBitmap){const Tt=Ve?floorPowerOfTwo:Math.floor,Et=Tt(pt*Oe.width),Mt=Tt(pt*Oe.height);fe===void 0&&(fe=me(Et,Mt));const Rt=Ze?me(Et,Mt):fe;return Rt.width=Et,Rt.height=Mt,Rt.getContext("2d").drawImage(Oe,0,0,Et,Mt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Oe.width+"x"+Oe.height+") to ("+Et+"x"+Mt+")."),Rt}else return"data"in Oe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Oe.width+"x"+Oe.height+")."),Oe;return Oe}function ge(Oe){return isPowerOfTwo(Oe.width)&&isPowerOfTwo(Oe.height)}function _e(Oe){return oe?!1:Oe.wrapS!==ClampToEdgeWrapping||Oe.wrapT!==ClampToEdgeWrapping||Oe.minFilter!==NearestFilter&&Oe.minFilter!==LinearFilter}function ve(Oe,Ve){return Oe.generateMipmaps&&Ve&&Oe.minFilter!==NearestFilter&&Oe.minFilter!==LinearFilter}function ye(Oe,Ve,Ze,mt,pt=1){ie.generateMipmap(Oe);const Tt=re.get(Ve);Tt.__maxMipLevel=Math.log2(Math.max(Ze,mt,pt))}function be(Oe,Ve,Ze,mt){if(oe===!1)return Ve;if(Oe!==null){if(ie[Oe]!==void 0)return ie[Oe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Oe+"'")}let pt=Ve;return Ve===6403&&(Ze===5126&&(pt=33326),Ze===5131&&(pt=33325),Ze===5121&&(pt=33321)),Ve===6407&&(Ze===5126&&(pt=34837),Ze===5131&&(pt=34843),Ze===5121&&(pt=32849)),Ve===6408&&(Ze===5126&&(pt=34836),Ze===5131&&(pt=34842),Ze===5121&&(pt=mt===sRGBEncoding?35907:32856)),(pt===33325||pt===33326||pt===34842||pt===34836)&&ee.get("EXT_color_buffer_float"),pt}function we(Oe){return Oe===NearestFilter||Oe===NearestMipmapNearestFilter||Oe===NearestMipmapLinearFilter?9728:9729}function Se(Oe){const Ve=Oe.target;Ve.removeEventListener("dispose",Se),Pe(Ve),Ve.isVideoTexture&&ue.delete(Ve),ae.memory.textures--}function Te(Oe){const Ve=Oe.target;Ve.removeEventListener("dispose",Te),Be(Ve)}function Pe(Oe){const Ve=re.get(Oe);Ve.__webglInit!==void 0&&(ie.deleteTexture(Ve.__webglTexture),re.remove(Oe))}function Be(Oe){const Ve=Oe.texture,Ze=re.get(Oe),mt=re.get(Ve);if(!!Oe){if(mt.__webglTexture!==void 0&&(ie.deleteTexture(mt.__webglTexture),ae.memory.textures--),Oe.depthTexture&&Oe.depthTexture.dispose(),Oe.isWebGLCubeRenderTarget)for(let pt=0;pt<6;pt++)ie.deleteFramebuffer(Ze.__webglFramebuffer[pt]),Ze.__webglDepthbuffer&&ie.deleteRenderbuffer(Ze.__webglDepthbuffer[pt]);else ie.deleteFramebuffer(Ze.__webglFramebuffer),Ze.__webglDepthbuffer&&ie.deleteRenderbuffer(Ze.__webglDepthbuffer),Ze.__webglMultisampledFramebuffer&&ie.deleteFramebuffer(Ze.__webglMultisampledFramebuffer),Ze.__webglColorRenderbuffer&&ie.deleteRenderbuffer(Ze.__webglColorRenderbuffer),Ze.__webglDepthRenderbuffer&&ie.deleteRenderbuffer(Ze.__webglDepthRenderbuffer);if(Oe.isWebGLMultipleRenderTargets)for(let pt=0,Tt=Ve.length;pt<Tt;pt++){const Et=re.get(Ve[pt]);Et.__webglTexture&&(ie.deleteTexture(Et.__webglTexture),ae.memory.textures--),re.remove(Ve[pt])}re.remove(Ve),re.remove(Oe)}}let Ce=0;function De(){Ce=0}function Re(){const Oe=Ce;return Oe>=le&&console.warn("THREE.WebGLTextures: Trying to use "+Oe+" texture units while this GPU supports only "+le),Ce+=1,Oe}function Le(Oe,Ve){const Ze=re.get(Oe);if(Oe.isVideoTexture&&je(Oe),Oe.version>0&&Ze.__version!==Oe.version){const mt=Oe.image;if(mt===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(mt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$e(Ze,Oe,Ve);return}}te.activeTexture(33984+Ve),te.bindTexture(3553,Ze.__webglTexture)}function ke(Oe,Ve){const Ze=re.get(Oe);if(Oe.version>0&&Ze.__version!==Oe.version){$e(Ze,Oe,Ve);return}te.activeTexture(33984+Ve),te.bindTexture(35866,Ze.__webglTexture)}function Me(Oe,Ve){const Ze=re.get(Oe);if(Oe.version>0&&Ze.__version!==Oe.version){$e(Ze,Oe,Ve);return}te.activeTexture(33984+Ve),te.bindTexture(32879,Ze.__webglTexture)}function Ee(Oe,Ve){const Ze=re.get(Oe);if(Oe.version>0&&Ze.__version!==Oe.version){ze(Ze,Oe,Ve);return}te.activeTexture(33984+Ve),te.bindTexture(34067,Ze.__webglTexture)}const Ae={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},Ie={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Fe(Oe,Ve,Ze){if(Ze?(ie.texParameteri(Oe,10242,Ae[Ve.wrapS]),ie.texParameteri(Oe,10243,Ae[Ve.wrapT]),(Oe===32879||Oe===35866)&&ie.texParameteri(Oe,32882,Ae[Ve.wrapR]),ie.texParameteri(Oe,10240,Ie[Ve.magFilter]),ie.texParameteri(Oe,10241,Ie[Ve.minFilter])):(ie.texParameteri(Oe,10242,33071),ie.texParameteri(Oe,10243,33071),(Oe===32879||Oe===35866)&&ie.texParameteri(Oe,32882,33071),(Ve.wrapS!==ClampToEdgeWrapping||Ve.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),ie.texParameteri(Oe,10240,we(Ve.magFilter)),ie.texParameteri(Oe,10241,we(Ve.minFilter)),Ve.minFilter!==NearestFilter&&Ve.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),ee.has("EXT_texture_filter_anisotropic")===!0){const mt=ee.get("EXT_texture_filter_anisotropic");if(Ve.type===FloatType&&ee.has("OES_texture_float_linear")===!1||oe===!1&&Ve.type===HalfFloatType&&ee.has("OES_texture_half_float_linear")===!1)return;(Ve.anisotropy>1||re.get(Ve).__currentAnisotropy)&&(ie.texParameterf(Oe,mt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ve.anisotropy,ne.getMaxAnisotropy())),re.get(Ve).__currentAnisotropy=Ve.anisotropy)}}function Ne(Oe,Ve){Oe.__webglInit===void 0&&(Oe.__webglInit=!0,Ve.addEventListener("dispose",Se),Oe.__webglTexture=ie.createTexture(),ae.memory.textures++)}function $e(Oe,Ve,Ze){let mt=3553;Ve.isDataTexture2DArray&&(mt=35866),Ve.isDataTexture3D&&(mt=32879),Ne(Oe,Ve),te.activeTexture(33984+Ze),te.bindTexture(mt,Oe.__webglTexture),ie.pixelStorei(37440,Ve.flipY),ie.pixelStorei(37441,Ve.premultiplyAlpha),ie.pixelStorei(3317,Ve.unpackAlignment),ie.pixelStorei(37443,0);const pt=_e(Ve)&&ge(Ve.image)===!1,Tt=xe(Ve.image,pt,!1,ce),Et=ge(Tt)||oe,Mt=se.convert(Ve.format);let Rt=se.convert(Ve.type),bt=be(Ve.internalFormat,Mt,Rt,Ve.encoding);Fe(mt,Ve,Et);let Ue;const xt=Ve.mipmaps;if(Ve.isDepthTexture)bt=6402,oe?Ve.type===FloatType?bt=36012:Ve.type===UnsignedIntType?bt=33190:Ve.type===UnsignedInt248Type?bt=35056:bt=33189:Ve.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Ve.format===DepthFormat&&bt===6402&&Ve.type!==UnsignedShortType&&Ve.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Ve.type=UnsignedShortType,Rt=se.convert(Ve.type)),Ve.format===DepthStencilFormat&&bt===6402&&(bt=34041,Ve.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Ve.type=UnsignedInt248Type,Rt=se.convert(Ve.type))),te.texImage2D(3553,0,bt,Tt.width,Tt.height,0,Mt,Rt,null);else if(Ve.isDataTexture)if(xt.length>0&&Et){for(let ht=0,At=xt.length;ht<At;ht++)Ue=xt[ht],te.texImage2D(3553,ht,bt,Ue.width,Ue.height,0,Mt,Rt,Ue.data);Ve.generateMipmaps=!1,Oe.__maxMipLevel=xt.length-1}else te.texImage2D(3553,0,bt,Tt.width,Tt.height,0,Mt,Rt,Tt.data),Oe.__maxMipLevel=0;else if(Ve.isCompressedTexture){for(let ht=0,At=xt.length;ht<At;ht++)Ue=xt[ht],Ve.format!==RGBAFormat&&Ve.format!==RGBFormat?Mt!==null?te.compressedTexImage2D(3553,ht,bt,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):te.texImage2D(3553,ht,bt,Ue.width,Ue.height,0,Mt,Rt,Ue.data);Oe.__maxMipLevel=xt.length-1}else if(Ve.isDataTexture2DArray)te.texImage3D(35866,0,bt,Tt.width,Tt.height,Tt.depth,0,Mt,Rt,Tt.data),Oe.__maxMipLevel=0;else if(Ve.isDataTexture3D)te.texImage3D(32879,0,bt,Tt.width,Tt.height,Tt.depth,0,Mt,Rt,Tt.data),Oe.__maxMipLevel=0;else if(xt.length>0&&Et){for(let ht=0,At=xt.length;ht<At;ht++)Ue=xt[ht],te.texImage2D(3553,ht,bt,Mt,Rt,Ue);Ve.generateMipmaps=!1,Oe.__maxMipLevel=xt.length-1}else te.texImage2D(3553,0,bt,Mt,Rt,Tt),Oe.__maxMipLevel=0;ve(Ve,Et)&&ye(mt,Ve,Tt.width,Tt.height),Oe.__version=Ve.version,Ve.onUpdate&&Ve.onUpdate(Ve)}function ze(Oe,Ve,Ze){if(Ve.image.length!==6)return;Ne(Oe,Ve),te.activeTexture(33984+Ze),te.bindTexture(34067,Oe.__webglTexture),ie.pixelStorei(37440,Ve.flipY),ie.pixelStorei(37441,Ve.premultiplyAlpha),ie.pixelStorei(3317,Ve.unpackAlignment),ie.pixelStorei(37443,0);const mt=Ve&&(Ve.isCompressedTexture||Ve.image[0].isCompressedTexture),pt=Ve.image[0]&&Ve.image[0].isDataTexture,Tt=[];for(let ht=0;ht<6;ht++)!mt&&!pt?Tt[ht]=xe(Ve.image[ht],!1,!0,he):Tt[ht]=pt?Ve.image[ht].image:Ve.image[ht];const Et=Tt[0],Mt=ge(Et)||oe,Rt=se.convert(Ve.format),bt=se.convert(Ve.type),Ue=be(Ve.internalFormat,Rt,bt,Ve.encoding);Fe(34067,Ve,Mt);let xt;if(mt){for(let ht=0;ht<6;ht++){xt=Tt[ht].mipmaps;for(let At=0;At<xt.length;At++){const Pt=xt[At];Ve.format!==RGBAFormat&&Ve.format!==RGBFormat?Rt!==null?te.compressedTexImage2D(34069+ht,At,Ue,Pt.width,Pt.height,0,Pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):te.texImage2D(34069+ht,At,Ue,Pt.width,Pt.height,0,Rt,bt,Pt.data)}}Oe.__maxMipLevel=xt.length-1}else{xt=Ve.mipmaps;for(let ht=0;ht<6;ht++)if(pt){te.texImage2D(34069+ht,0,Ue,Tt[ht].width,Tt[ht].height,0,Rt,bt,Tt[ht].data);for(let At=0;At<xt.length;At++){const $t=xt[At].image[ht].image;te.texImage2D(34069+ht,At+1,Ue,$t.width,$t.height,0,Rt,bt,$t.data)}}else{te.texImage2D(34069+ht,0,Ue,Rt,bt,Tt[ht]);for(let At=0;At<xt.length;At++){const Pt=xt[At];te.texImage2D(34069+ht,At+1,Ue,Rt,bt,Pt.image[ht])}}Oe.__maxMipLevel=xt.length}ve(Ve,Mt)&&ye(34067,Ve,Et.width,Et.height),Oe.__version=Ve.version,Ve.onUpdate&&Ve.onUpdate(Ve)}function Xe(Oe,Ve,Ze,mt,pt){const Tt=se.convert(Ze.format),Et=se.convert(Ze.type),Mt=be(Ze.internalFormat,Tt,Et,Ze.encoding);pt===32879||pt===35866?te.texImage3D(pt,0,Mt,Ve.width,Ve.height,Ve.depth,0,Tt,Et,null):te.texImage2D(pt,0,Mt,Ve.width,Ve.height,0,Tt,Et,null),te.bindFramebuffer(36160,Oe),ie.framebufferTexture2D(36160,mt,pt,re.get(Ze).__webglTexture,0),te.bindFramebuffer(36160,null)}function Je(Oe,Ve,Ze){if(ie.bindRenderbuffer(36161,Oe),Ve.depthBuffer&&!Ve.stencilBuffer){let mt=33189;if(Ze){const pt=Ve.depthTexture;pt&&pt.isDepthTexture&&(pt.type===FloatType?mt=36012:pt.type===UnsignedIntType&&(mt=33190));const Tt=_t(Ve);ie.renderbufferStorageMultisample(36161,Tt,mt,Ve.width,Ve.height)}else ie.renderbufferStorage(36161,mt,Ve.width,Ve.height);ie.framebufferRenderbuffer(36160,36096,36161,Oe)}else if(Ve.depthBuffer&&Ve.stencilBuffer){if(Ze){const mt=_t(Ve);ie.renderbufferStorageMultisample(36161,mt,35056,Ve.width,Ve.height)}else ie.renderbufferStorage(36161,34041,Ve.width,Ve.height);ie.framebufferRenderbuffer(36160,33306,36161,Oe)}else{const mt=Ve.isWebGLMultipleRenderTargets===!0?Ve.texture[0]:Ve.texture,pt=se.convert(mt.format),Tt=se.convert(mt.type),Et=be(mt.internalFormat,pt,Tt,mt.encoding);if(Ze){const Mt=_t(Ve);ie.renderbufferStorageMultisample(36161,Mt,Et,Ve.width,Ve.height)}else ie.renderbufferStorage(36161,Et,Ve.width,Ve.height)}ie.bindRenderbuffer(36161,null)}function We(Oe,Ve){if(Ve&&Ve.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(te.bindFramebuffer(36160,Oe),!(Ve.depthTexture&&Ve.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!re.get(Ve.depthTexture).__webglTexture||Ve.depthTexture.image.width!==Ve.width||Ve.depthTexture.image.height!==Ve.height)&&(Ve.depthTexture.image.width=Ve.width,Ve.depthTexture.image.height=Ve.height,Ve.depthTexture.needsUpdate=!0),Le(Ve.depthTexture,0);const mt=re.get(Ve.depthTexture).__webglTexture;if(Ve.depthTexture.format===DepthFormat)ie.framebufferTexture2D(36160,36096,3553,mt,0);else if(Ve.depthTexture.format===DepthStencilFormat)ie.framebufferTexture2D(36160,33306,3553,mt,0);else throw new Error("Unknown depthTexture format")}function dt(Oe){const Ve=re.get(Oe),Ze=Oe.isWebGLCubeRenderTarget===!0;if(Oe.depthTexture){if(Ze)throw new Error("target.depthTexture not supported in Cube render targets");We(Ve.__webglFramebuffer,Oe)}else if(Ze){Ve.__webglDepthbuffer=[];for(let mt=0;mt<6;mt++)te.bindFramebuffer(36160,Ve.__webglFramebuffer[mt]),Ve.__webglDepthbuffer[mt]=ie.createRenderbuffer(),Je(Ve.__webglDepthbuffer[mt],Oe,!1)}else te.bindFramebuffer(36160,Ve.__webglFramebuffer),Ve.__webglDepthbuffer=ie.createRenderbuffer(),Je(Ve.__webglDepthbuffer,Oe,!1);te.bindFramebuffer(36160,null)}function yt(Oe){const Ve=Oe.texture,Ze=re.get(Oe),mt=re.get(Ve);Oe.addEventListener("dispose",Te),Oe.isWebGLMultipleRenderTargets!==!0&&(mt.__webglTexture=ie.createTexture(),mt.__version=Ve.version,ae.memory.textures++);const pt=Oe.isWebGLCubeRenderTarget===!0,Tt=Oe.isWebGLMultipleRenderTargets===!0,Et=Oe.isWebGLMultisampleRenderTarget===!0,Mt=Ve.isDataTexture3D||Ve.isDataTexture2DArray,Rt=ge(Oe)||oe;if(oe&&Ve.format===RGBFormat&&(Ve.type===FloatType||Ve.type===HalfFloatType)&&(Ve.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),pt){Ze.__webglFramebuffer=[];for(let bt=0;bt<6;bt++)Ze.__webglFramebuffer[bt]=ie.createFramebuffer()}else if(Ze.__webglFramebuffer=ie.createFramebuffer(),Tt)if(ne.drawBuffers){const bt=Oe.texture;for(let Ue=0,xt=bt.length;Ue<xt;Ue++){const ht=re.get(bt[Ue]);ht.__webglTexture===void 0&&(ht.__webglTexture=ie.createTexture(),ae.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(Et)if(oe){Ze.__webglMultisampledFramebuffer=ie.createFramebuffer(),Ze.__webglColorRenderbuffer=ie.createRenderbuffer(),ie.bindRenderbuffer(36161,Ze.__webglColorRenderbuffer);const bt=se.convert(Ve.format),Ue=se.convert(Ve.type),xt=be(Ve.internalFormat,bt,Ue,Ve.encoding),ht=_t(Oe);ie.renderbufferStorageMultisample(36161,ht,xt,Oe.width,Oe.height),te.bindFramebuffer(36160,Ze.__webglMultisampledFramebuffer),ie.framebufferRenderbuffer(36160,36064,36161,Ze.__webglColorRenderbuffer),ie.bindRenderbuffer(36161,null),Oe.depthBuffer&&(Ze.__webglDepthRenderbuffer=ie.createRenderbuffer(),Je(Ze.__webglDepthRenderbuffer,Oe,!0)),te.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(pt){te.bindTexture(34067,mt.__webglTexture),Fe(34067,Ve,Rt);for(let bt=0;bt<6;bt++)Xe(Ze.__webglFramebuffer[bt],Oe,Ve,36064,34069+bt);ve(Ve,Rt)&&ye(34067,Ve,Oe.width,Oe.height),te.unbindTexture()}else if(Tt){const bt=Oe.texture;for(let Ue=0,xt=bt.length;Ue<xt;Ue++){const ht=bt[Ue],At=re.get(ht);te.bindTexture(3553,At.__webglTexture),Fe(3553,ht,Rt),Xe(Ze.__webglFramebuffer,Oe,ht,36064+Ue,3553),ve(ht,Rt)&&ye(3553,ht,Oe.width,Oe.height)}te.unbindTexture()}else{let bt=3553;Mt&&(oe?bt=Ve.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),te.bindTexture(bt,mt.__webglTexture),Fe(bt,Ve,Rt),Xe(Ze.__webglFramebuffer,Oe,Ve,36064,bt),ve(Ve,Rt)&&ye(bt,Ve,Oe.width,Oe.height,Oe.depth),te.unbindTexture()}Oe.depthBuffer&&dt(Oe)}function vt(Oe){const Ve=ge(Oe)||oe,Ze=Oe.isWebGLMultipleRenderTargets===!0?Oe.texture:[Oe.texture];for(let mt=0,pt=Ze.length;mt<pt;mt++){const Tt=Ze[mt];if(ve(Tt,Ve)){const Et=Oe.isWebGLCubeRenderTarget?34067:3553,Mt=re.get(Tt).__webglTexture;te.bindTexture(Et,Mt),ye(Et,Tt,Oe.width,Oe.height),te.unbindTexture()}}}function at(Oe){if(Oe.isWebGLMultisampleRenderTarget)if(oe){const Ve=Oe.width,Ze=Oe.height;let mt=16384;Oe.depthBuffer&&(mt|=256),Oe.stencilBuffer&&(mt|=1024);const pt=re.get(Oe);te.bindFramebuffer(36008,pt.__webglMultisampledFramebuffer),te.bindFramebuffer(36009,pt.__webglFramebuffer),ie.blitFramebuffer(0,0,Ve,Ze,0,0,Ve,Ze,mt,9728),te.bindFramebuffer(36008,null),te.bindFramebuffer(36009,pt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function _t(Oe){return oe&&Oe.isWebGLMultisampleRenderTarget?Math.min(de,Oe.samples):0}function je(Oe){const Ve=ae.render.frame;ue.get(Oe)!==Ve&&(ue.set(Oe,Ve),Oe.update())}let He=!1,Qe=!1;function St(Oe,Ve){Oe&&Oe.isWebGLRenderTarget&&(He===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),He=!0),Oe=Oe.texture),Le(Oe,Ve)}function gt(Oe,Ve){Oe&&Oe.isWebGLCubeRenderTarget&&(Qe===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Qe=!0),Oe=Oe.texture),Ee(Oe,Ve)}this.allocateTextureUnit=Re,this.resetTextureUnits=De,this.setTexture2D=Le,this.setTexture2DArray=ke,this.setTexture3D=Me,this.setTextureCube=Ee,this.setupRenderTarget=yt,this.updateRenderTargetMipmap=vt,this.updateMultisampleRenderTarget=at,this.safeSetTexture2D=St,this.safeSetTextureCube=gt}function WebGLUtils(ie,ee,te){const re=te.isWebGL2;function ne(se){let ae;if(se===UnsignedByteType)return 5121;if(se===UnsignedShort4444Type)return 32819;if(se===UnsignedShort5551Type)return 32820;if(se===UnsignedShort565Type)return 33635;if(se===ByteType)return 5120;if(se===ShortType)return 5122;if(se===UnsignedShortType)return 5123;if(se===IntType)return 5124;if(se===UnsignedIntType)return 5125;if(se===FloatType)return 5126;if(se===HalfFloatType)return re?5131:(ae=ee.get("OES_texture_half_float"),ae!==null?ae.HALF_FLOAT_OES:null);if(se===AlphaFormat)return 6406;if(se===RGBFormat)return 6407;if(se===RGBAFormat)return 6408;if(se===LuminanceFormat)return 6409;if(se===LuminanceAlphaFormat)return 6410;if(se===DepthFormat)return 6402;if(se===DepthStencilFormat)return 34041;if(se===RedFormat)return 6403;if(se===RedIntegerFormat)return 36244;if(se===RGFormat)return 33319;if(se===RGIntegerFormat)return 33320;if(se===RGBIntegerFormat)return 36248;if(se===RGBAIntegerFormat)return 36249;if(se===RGB_S3TC_DXT1_Format||se===RGBA_S3TC_DXT1_Format||se===RGBA_S3TC_DXT3_Format||se===RGBA_S3TC_DXT5_Format)if(ae=ee.get("WEBGL_compressed_texture_s3tc"),ae!==null){if(se===RGB_S3TC_DXT1_Format)return ae.COMPRESSED_RGB_S3TC_DXT1_EXT;if(se===RGBA_S3TC_DXT1_Format)return ae.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(se===RGBA_S3TC_DXT3_Format)return ae.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(se===RGBA_S3TC_DXT5_Format)return ae.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(se===RGB_PVRTC_4BPPV1_Format||se===RGB_PVRTC_2BPPV1_Format||se===RGBA_PVRTC_4BPPV1_Format||se===RGBA_PVRTC_2BPPV1_Format)if(ae=ee.get("WEBGL_compressed_texture_pvrtc"),ae!==null){if(se===RGB_PVRTC_4BPPV1_Format)return ae.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(se===RGB_PVRTC_2BPPV1_Format)return ae.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(se===RGBA_PVRTC_4BPPV1_Format)return ae.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(se===RGBA_PVRTC_2BPPV1_Format)return ae.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(se===RGB_ETC1_Format)return ae=ee.get("WEBGL_compressed_texture_etc1"),ae!==null?ae.COMPRESSED_RGB_ETC1_WEBGL:null;if((se===RGB_ETC2_Format||se===RGBA_ETC2_EAC_Format)&&(ae=ee.get("WEBGL_compressed_texture_etc"),ae!==null)){if(se===RGB_ETC2_Format)return ae.COMPRESSED_RGB8_ETC2;if(se===RGBA_ETC2_EAC_Format)return ae.COMPRESSED_RGBA8_ETC2_EAC}if(se===RGBA_ASTC_4x4_Format||se===RGBA_ASTC_5x4_Format||se===RGBA_ASTC_5x5_Format||se===RGBA_ASTC_6x5_Format||se===RGBA_ASTC_6x6_Format||se===RGBA_ASTC_8x5_Format||se===RGBA_ASTC_8x6_Format||se===RGBA_ASTC_8x8_Format||se===RGBA_ASTC_10x5_Format||se===RGBA_ASTC_10x6_Format||se===RGBA_ASTC_10x8_Format||se===RGBA_ASTC_10x10_Format||se===RGBA_ASTC_12x10_Format||se===RGBA_ASTC_12x12_Format||se===SRGB8_ALPHA8_ASTC_4x4_Format||se===SRGB8_ALPHA8_ASTC_5x4_Format||se===SRGB8_ALPHA8_ASTC_5x5_Format||se===SRGB8_ALPHA8_ASTC_6x5_Format||se===SRGB8_ALPHA8_ASTC_6x6_Format||se===SRGB8_ALPHA8_ASTC_8x5_Format||se===SRGB8_ALPHA8_ASTC_8x6_Format||se===SRGB8_ALPHA8_ASTC_8x8_Format||se===SRGB8_ALPHA8_ASTC_10x5_Format||se===SRGB8_ALPHA8_ASTC_10x6_Format||se===SRGB8_ALPHA8_ASTC_10x8_Format||se===SRGB8_ALPHA8_ASTC_10x10_Format||se===SRGB8_ALPHA8_ASTC_12x10_Format||se===SRGB8_ALPHA8_ASTC_12x12_Format)return ae=ee.get("WEBGL_compressed_texture_astc"),ae!==null?se:null;if(se===RGBA_BPTC_Format)return ae=ee.get("EXT_texture_compression_bptc"),ae!==null?se:null;if(se===UnsignedInt248Type)return re?34042:(ae=ee.get("WEBGL_depth_texture"),ae!==null?ae.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:ne}}class ArrayCamera extends PerspectiveCamera{constructor(ee=[]){super(),this.cameras=ee}}ArrayCamera.prototype.isArrayCamera=!0;class Group extends Object3D{constructor(){super(),this.type="Group"}}Group.prototype.isGroup=!0;const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(ee){return this._targetRay!==null&&this._targetRay.dispatchEvent(ee),this._grip!==null&&this._grip.dispatchEvent(ee),this._hand!==null&&this._hand.dispatchEvent(ee),this}disconnect(ee){return this.dispatchEvent({type:"disconnected",data:ee}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(ee,te,re){let ne=null,se=null,ae=null;const oe=this._targetRay,le=this._grip,he=this._hand;if(ee&&te.session.visibilityState!=="visible-blurred")if(oe!==null&&(ne=te.getPose(ee.targetRaySpace,re),ne!==null&&(oe.matrix.fromArray(ne.transform.matrix),oe.matrix.decompose(oe.position,oe.rotation,oe.scale),ne.linearVelocity?(oe.hasLinearVelocity=!0,oe.linearVelocity.copy(ne.linearVelocity)):oe.hasLinearVelocity=!1,ne.angularVelocity?(oe.hasAngularVelocity=!0,oe.angularVelocity.copy(ne.angularVelocity)):oe.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent))),he&&ee.hand){ae=!0;for(const me of ee.hand.values()){const xe=te.getJointPose(me,re);if(he.joints[me.jointName]===void 0){const _e=new Group;_e.matrixAutoUpdate=!1,_e.visible=!1,he.joints[me.jointName]=_e,he.add(_e)}const ge=he.joints[me.jointName];xe!==null&&(ge.matrix.fromArray(xe.transform.matrix),ge.matrix.decompose(ge.position,ge.rotation,ge.scale),ge.jointRadius=xe.radius),ge.visible=xe!==null}const ce=he.joints["index-finger-tip"],de=he.joints["thumb-tip"],ue=ce.position.distanceTo(de.position),fe=.02,pe=.005;he.inputState.pinching&&ue>fe+pe?(he.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:ee.handedness,target:this})):!he.inputState.pinching&&ue<=fe-pe&&(he.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:ee.handedness,target:this}))}else le!==null&&ee.gripSpace&&(se=te.getPose(ee.gripSpace,re),se!==null&&(le.matrix.fromArray(se.transform.matrix),le.matrix.decompose(le.position,le.rotation,le.scale),se.linearVelocity?(le.hasLinearVelocity=!0,le.linearVelocity.copy(se.linearVelocity)):le.hasLinearVelocity=!1,se.angularVelocity?(le.hasAngularVelocity=!0,le.angularVelocity.copy(se.angularVelocity)):le.hasAngularVelocity=!1));return oe!==null&&(oe.visible=ne!==null),le!==null&&(le.visible=se!==null),he!==null&&(he.visible=ae!==null),this}}class WebXRManager extends EventDispatcher{constructor(ee,te){super();const re=this,ne=ee.state;let se=null,ae=1,oe=null,le="local-floor",he=null,ce=null,de=null,ue=null,fe=null,pe=!1,me=null,xe=null,ge=null,_e=null,ve=null,ye=null;const be=[],we=new Map,Se=new PerspectiveCamera;Se.layers.enable(1),Se.viewport=new Vector4;const Te=new PerspectiveCamera;Te.layers.enable(2),Te.viewport=new Vector4;const Pe=[Se,Te],Be=new ArrayCamera;Be.layers.enable(1),Be.layers.enable(2);let Ce=null,De=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ze){let Xe=be[ze];return Xe===void 0&&(Xe=new WebXRController,be[ze]=Xe),Xe.getTargetRaySpace()},this.getControllerGrip=function(ze){let Xe=be[ze];return Xe===void 0&&(Xe=new WebXRController,be[ze]=Xe),Xe.getGripSpace()},this.getHand=function(ze){let Xe=be[ze];return Xe===void 0&&(Xe=new WebXRController,be[ze]=Xe),Xe.getHandSpace()};function Re(ze){const Xe=we.get(ze.inputSource);Xe&&Xe.dispatchEvent({type:ze.type,data:ze.inputSource})}function Le(){we.forEach(function(ze,Xe){ze.disconnect(Xe)}),we.clear(),Ce=null,De=null,ne.bindXRFramebuffer(null),ee.setRenderTarget(ee.getRenderTarget()),de&&te.deleteFramebuffer(de),me&&te.deleteFramebuffer(me),xe&&te.deleteRenderbuffer(xe),ge&&te.deleteRenderbuffer(ge),de=null,me=null,xe=null,ge=null,fe=null,ue=null,ce=null,se=null,$e.stop(),re.isPresenting=!1,re.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ze){ae=ze,re.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ze){le=ze,re.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return oe},this.getBaseLayer=function(){return ue!==null?ue:fe},this.getBinding=function(){return ce},this.getFrame=function(){return _e},this.getSession=function(){return se},this.setSession=async function(ze){if(se=ze,se!==null){se.addEventListener("select",Re),se.addEventListener("selectstart",Re),se.addEventListener("selectend",Re),se.addEventListener("squeeze",Re),se.addEventListener("squeezestart",Re),se.addEventListener("squeezeend",Re),se.addEventListener("end",Le),se.addEventListener("inputsourceschange",ke);const Xe=te.getContextAttributes();if(Xe.xrCompatible!==!0&&await te.makeXRCompatible(),se.renderState.layers===void 0){const Je={antialias:Xe.antialias,alpha:Xe.alpha,depth:Xe.depth,stencil:Xe.stencil,framebufferScaleFactor:ae};fe=new XRWebGLLayer(se,te,Je),se.updateRenderState({baseLayer:fe})}else if(te instanceof WebGLRenderingContext){const Je={antialias:!0,alpha:Xe.alpha,depth:Xe.depth,stencil:Xe.stencil,framebufferScaleFactor:ae};fe=new XRWebGLLayer(se,te,Je),se.updateRenderState({layers:[fe]})}else{pe=Xe.antialias;let Je=null;Xe.depth&&(ye=256,Xe.stencil&&(ye|=1024),ve=Xe.stencil?33306:36096,Je=Xe.stencil?35056:33190);const We={colorFormat:Xe.alpha?32856:32849,depthFormat:Je,scaleFactor:ae};ce=new XRWebGLBinding(se,te),ue=ce.createProjectionLayer(We),de=te.createFramebuffer(),se.updateRenderState({layers:[ue]}),pe&&(me=te.createFramebuffer(),xe=te.createRenderbuffer(),te.bindRenderbuffer(36161,xe),te.renderbufferStorageMultisample(36161,4,32856,ue.textureWidth,ue.textureHeight),ne.bindFramebuffer(36160,me),te.framebufferRenderbuffer(36160,36064,36161,xe),te.bindRenderbuffer(36161,null),Je!==null&&(ge=te.createRenderbuffer(),te.bindRenderbuffer(36161,ge),te.renderbufferStorageMultisample(36161,4,Je,ue.textureWidth,ue.textureHeight),te.framebufferRenderbuffer(36160,ve,36161,ge),te.bindRenderbuffer(36161,null)),ne.bindFramebuffer(36160,null))}oe=await se.requestReferenceSpace(le),$e.setContext(se),$e.start(),re.isPresenting=!0,re.dispatchEvent({type:"sessionstart"})}};function ke(ze){const Xe=se.inputSources;for(let Je=0;Je<be.length;Je++)we.set(Xe[Je],be[Je]);for(let Je=0;Je<ze.removed.length;Je++){const We=ze.removed[Je],dt=we.get(We);dt&&(dt.dispatchEvent({type:"disconnected",data:We}),we.delete(We))}for(let Je=0;Je<ze.added.length;Je++){const We=ze.added[Je],dt=we.get(We);dt&&dt.dispatchEvent({type:"connected",data:We})}}const Me=new Vector3,Ee=new Vector3;function Ae(ze,Xe,Je){Me.setFromMatrixPosition(Xe.matrixWorld),Ee.setFromMatrixPosition(Je.matrixWorld);const We=Me.distanceTo(Ee),dt=Xe.projectionMatrix.elements,yt=Je.projectionMatrix.elements,vt=dt[14]/(dt[10]-1),at=dt[14]/(dt[10]+1),_t=(dt[9]+1)/dt[5],je=(dt[9]-1)/dt[5],He=(dt[8]-1)/dt[0],Qe=(yt[8]+1)/yt[0],St=vt*He,gt=vt*Qe,Oe=We/(-He+Qe),Ve=Oe*-He;Xe.matrixWorld.decompose(ze.position,ze.quaternion,ze.scale),ze.translateX(Ve),ze.translateZ(Oe),ze.matrixWorld.compose(ze.position,ze.quaternion,ze.scale),ze.matrixWorldInverse.copy(ze.matrixWorld).invert();const Ze=vt+Oe,mt=at+Oe,pt=St-Ve,Tt=gt+(We-Ve),Et=_t*at/mt*Ze,Mt=je*at/mt*Ze;ze.projectionMatrix.makePerspective(pt,Tt,Et,Mt,Ze,mt)}function Ie(ze,Xe){Xe===null?ze.matrixWorld.copy(ze.matrix):ze.matrixWorld.multiplyMatrices(Xe.matrixWorld,ze.matrix),ze.matrixWorldInverse.copy(ze.matrixWorld).invert()}this.updateCamera=function(ze){if(se===null)return;Be.near=Te.near=Se.near=ze.near,Be.far=Te.far=Se.far=ze.far,(Ce!==Be.near||De!==Be.far)&&(se.updateRenderState({depthNear:Be.near,depthFar:Be.far}),Ce=Be.near,De=Be.far);const Xe=ze.parent,Je=Be.cameras;Ie(Be,Xe);for(let dt=0;dt<Je.length;dt++)Ie(Je[dt],Xe);Be.matrixWorld.decompose(Be.position,Be.quaternion,Be.scale),ze.position.copy(Be.position),ze.quaternion.copy(Be.quaternion),ze.scale.copy(Be.scale),ze.matrix.copy(Be.matrix),ze.matrixWorld.copy(Be.matrixWorld);const We=ze.children;for(let dt=0,yt=We.length;dt<yt;dt++)We[dt].updateMatrixWorld(!0);Je.length===2?Ae(Be,Se,Te):Be.projectionMatrix.copy(Se.projectionMatrix)},this.getCamera=function(){return Be},this.getFoveation=function(){if(ue!==null)return ue.fixedFoveation;if(fe!==null)return fe.fixedFoveation},this.setFoveation=function(ze){ue!==null&&(ue.fixedFoveation=ze),fe!==null&&fe.fixedFoveation!==void 0&&(fe.fixedFoveation=ze)};let Fe=null;function Ne(ze,Xe){if(he=Xe.getViewerPose(oe),_e=Xe,he!==null){const We=he.views;fe!==null&&ne.bindXRFramebuffer(fe.framebuffer);let dt=!1;We.length!==Be.cameras.length&&(Be.cameras.length=0,dt=!0);for(let yt=0;yt<We.length;yt++){const vt=We[yt];let at=null;if(fe!==null)at=fe.getViewport(vt);else{const je=ce.getViewSubImage(ue,vt);ne.bindXRFramebuffer(de),je.depthStencilTexture!==void 0&&te.framebufferTexture2D(36160,ve,3553,je.depthStencilTexture,0),te.framebufferTexture2D(36160,36064,3553,je.colorTexture,0),at=je.viewport}const _t=Pe[yt];_t.matrix.fromArray(vt.transform.matrix),_t.projectionMatrix.fromArray(vt.projectionMatrix),_t.viewport.set(at.x,at.y,at.width,at.height),yt===0&&Be.matrix.copy(_t.matrix),dt===!0&&Be.cameras.push(_t)}pe&&(ne.bindXRFramebuffer(me),ye!==null&&te.clear(ye))}const Je=se.inputSources;for(let We=0;We<be.length;We++){const dt=be[We],yt=Je[We];dt.update(yt,Xe,oe)}if(Fe&&Fe(ze,Xe),pe){const We=ue.textureWidth,dt=ue.textureHeight;ne.bindFramebuffer(36008,me),ne.bindFramebuffer(36009,de),te.invalidateFramebuffer(36008,[ve]),te.invalidateFramebuffer(36009,[ve]),te.blitFramebuffer(0,0,We,dt,0,0,We,dt,16384,9728),te.invalidateFramebuffer(36008,[36064]),ne.bindFramebuffer(36008,null),ne.bindFramebuffer(36009,null),ne.bindFramebuffer(36160,me)}_e=null}const $e=new WebGLAnimation;$e.setAnimationLoop(Ne),this.setAnimationLoop=function(ze){Fe=ze},this.dispose=function(){}}}function WebGLMaterials(ie){function ee(ge,_e){ge.fogColor.value.copy(_e.color),_e.isFog?(ge.fogNear.value=_e.near,ge.fogFar.value=_e.far):_e.isFogExp2&&(ge.fogDensity.value=_e.density)}function te(ge,_e,ve,ye,be){_e.isMeshBasicMaterial?re(ge,_e):_e.isMeshLambertMaterial?(re(ge,_e),le(ge,_e)):_e.isMeshToonMaterial?(re(ge,_e),ce(ge,_e)):_e.isMeshPhongMaterial?(re(ge,_e),he(ge,_e)):_e.isMeshStandardMaterial?(re(ge,_e),_e.isMeshPhysicalMaterial?ue(ge,_e,be):de(ge,_e)):_e.isMeshMatcapMaterial?(re(ge,_e),fe(ge,_e)):_e.isMeshDepthMaterial?(re(ge,_e),pe(ge,_e)):_e.isMeshDistanceMaterial?(re(ge,_e),me(ge,_e)):_e.isMeshNormalMaterial?(re(ge,_e),xe(ge,_e)):_e.isLineBasicMaterial?(ne(ge,_e),_e.isLineDashedMaterial&&se(ge,_e)):_e.isPointsMaterial?ae(ge,_e,ve,ye):_e.isSpriteMaterial?oe(ge,_e):_e.isShadowMaterial?(ge.color.value.copy(_e.color),ge.opacity.value=_e.opacity):_e.isShaderMaterial&&(_e.uniformsNeedUpdate=!1)}function re(ge,_e){ge.opacity.value=_e.opacity,_e.color&&ge.diffuse.value.copy(_e.color),_e.emissive&&ge.emissive.value.copy(_e.emissive).multiplyScalar(_e.emissiveIntensity),_e.map&&(ge.map.value=_e.map),_e.alphaMap&&(ge.alphaMap.value=_e.alphaMap),_e.specularMap&&(ge.specularMap.value=_e.specularMap),_e.alphaTest>0&&(ge.alphaTest.value=_e.alphaTest);const ve=ie.get(_e).envMap;if(ve){ge.envMap.value=ve,ge.flipEnvMap.value=ve.isCubeTexture&&ve.isRenderTargetTexture===!1?-1:1,ge.reflectivity.value=_e.reflectivity,ge.ior.value=_e.ior,ge.refractionRatio.value=_e.refractionRatio;const we=ie.get(ve).__maxMipLevel;we!==void 0&&(ge.maxMipLevel.value=we)}_e.lightMap&&(ge.lightMap.value=_e.lightMap,ge.lightMapIntensity.value=_e.lightMapIntensity),_e.aoMap&&(ge.aoMap.value=_e.aoMap,ge.aoMapIntensity.value=_e.aoMapIntensity);let ye;_e.map?ye=_e.map:_e.specularMap?ye=_e.specularMap:_e.displacementMap?ye=_e.displacementMap:_e.normalMap?ye=_e.normalMap:_e.bumpMap?ye=_e.bumpMap:_e.roughnessMap?ye=_e.roughnessMap:_e.metalnessMap?ye=_e.metalnessMap:_e.alphaMap?ye=_e.alphaMap:_e.emissiveMap?ye=_e.emissiveMap:_e.clearcoatMap?ye=_e.clearcoatMap:_e.clearcoatNormalMap?ye=_e.clearcoatNormalMap:_e.clearcoatRoughnessMap?ye=_e.clearcoatRoughnessMap:_e.specularIntensityMap?ye=_e.specularIntensityMap:_e.specularColorMap?ye=_e.specularColorMap:_e.transmissionMap?ye=_e.transmissionMap:_e.thicknessMap?ye=_e.thicknessMap:_e.sheenColorMap?ye=_e.sheenColorMap:_e.sheenRoughnessMap&&(ye=_e.sheenRoughnessMap),ye!==void 0&&(ye.isWebGLRenderTarget&&(ye=ye.texture),ye.matrixAutoUpdate===!0&&ye.updateMatrix(),ge.uvTransform.value.copy(ye.matrix));let be;_e.aoMap?be=_e.aoMap:_e.lightMap&&(be=_e.lightMap),be!==void 0&&(be.isWebGLRenderTarget&&(be=be.texture),be.matrixAutoUpdate===!0&&be.updateMatrix(),ge.uv2Transform.value.copy(be.matrix))}function ne(ge,_e){ge.diffuse.value.copy(_e.color),ge.opacity.value=_e.opacity}function se(ge,_e){ge.dashSize.value=_e.dashSize,ge.totalSize.value=_e.dashSize+_e.gapSize,ge.scale.value=_e.scale}function ae(ge,_e,ve,ye){ge.diffuse.value.copy(_e.color),ge.opacity.value=_e.opacity,ge.size.value=_e.size*ve,ge.scale.value=ye*.5,_e.map&&(ge.map.value=_e.map),_e.alphaMap&&(ge.alphaMap.value=_e.alphaMap),_e.alphaTest>0&&(ge.alphaTest.value=_e.alphaTest);let be;_e.map?be=_e.map:_e.alphaMap&&(be=_e.alphaMap),be!==void 0&&(be.matrixAutoUpdate===!0&&be.updateMatrix(),ge.uvTransform.value.copy(be.matrix))}function oe(ge,_e){ge.diffuse.value.copy(_e.color),ge.opacity.value=_e.opacity,ge.rotation.value=_e.rotation,_e.map&&(ge.map.value=_e.map),_e.alphaMap&&(ge.alphaMap.value=_e.alphaMap),_e.alphaTest>0&&(ge.alphaTest.value=_e.alphaTest);let ve;_e.map?ve=_e.map:_e.alphaMap&&(ve=_e.alphaMap),ve!==void 0&&(ve.matrixAutoUpdate===!0&&ve.updateMatrix(),ge.uvTransform.value.copy(ve.matrix))}function le(ge,_e){_e.emissiveMap&&(ge.emissiveMap.value=_e.emissiveMap)}function he(ge,_e){ge.specular.value.copy(_e.specular),ge.shininess.value=Math.max(_e.shininess,1e-4),_e.emissiveMap&&(ge.emissiveMap.value=_e.emissiveMap),_e.bumpMap&&(ge.bumpMap.value=_e.bumpMap,ge.bumpScale.value=_e.bumpScale,_e.side===BackSide&&(ge.bumpScale.value*=-1)),_e.normalMap&&(ge.normalMap.value=_e.normalMap,ge.normalScale.value.copy(_e.normalScale),_e.side===BackSide&&ge.normalScale.value.negate()),_e.displacementMap&&(ge.displacementMap.value=_e.displacementMap,ge.displacementScale.value=_e.displacementScale,ge.displacementBias.value=_e.displacementBias)}function ce(ge,_e){_e.gradientMap&&(ge.gradientMap.value=_e.gradientMap),_e.emissiveMap&&(ge.emissiveMap.value=_e.emissiveMap),_e.bumpMap&&(ge.bumpMap.value=_e.bumpMap,ge.bumpScale.value=_e.bumpScale,_e.side===BackSide&&(ge.bumpScale.value*=-1)),_e.normalMap&&(ge.normalMap.value=_e.normalMap,ge.normalScale.value.copy(_e.normalScale),_e.side===BackSide&&ge.normalScale.value.negate()),_e.displacementMap&&(ge.displacementMap.value=_e.displacementMap,ge.displacementScale.value=_e.displacementScale,ge.displacementBias.value=_e.displacementBias)}function de(ge,_e){ge.roughness.value=_e.roughness,ge.metalness.value=_e.metalness,_e.roughnessMap&&(ge.roughnessMap.value=_e.roughnessMap),_e.metalnessMap&&(ge.metalnessMap.value=_e.metalnessMap),_e.emissiveMap&&(ge.emissiveMap.value=_e.emissiveMap),_e.bumpMap&&(ge.bumpMap.value=_e.bumpMap,ge.bumpScale.value=_e.bumpScale,_e.side===BackSide&&(ge.bumpScale.value*=-1)),_e.normalMap&&(ge.normalMap.value=_e.normalMap,ge.normalScale.value.copy(_e.normalScale),_e.side===BackSide&&ge.normalScale.value.negate()),_e.displacementMap&&(ge.displacementMap.value=_e.displacementMap,ge.displacementScale.value=_e.displacementScale,ge.displacementBias.value=_e.displacementBias),ie.get(_e).envMap&&(ge.envMapIntensity.value=_e.envMapIntensity)}function ue(ge,_e,ve){de(ge,_e),ge.ior.value=_e.ior,_e.sheen>0&&(ge.sheenColor.value.copy(_e.sheenColor).multiplyScalar(_e.sheen),ge.sheenRoughness.value=_e.sheenRoughness,_e.sheenColorMap&&(ge.sheenColorMap.value=_e.sheenColorMap),_e.sheenRoughnessMap&&(ge.sheenRoughnessMap.value=_e.sheenRoughnessMap)),_e.clearcoat>0&&(ge.clearcoat.value=_e.clearcoat,ge.clearcoatRoughness.value=_e.clearcoatRoughness,_e.clearcoatMap&&(ge.clearcoatMap.value=_e.clearcoatMap),_e.clearcoatRoughnessMap&&(ge.clearcoatRoughnessMap.value=_e.clearcoatRoughnessMap),_e.clearcoatNormalMap&&(ge.clearcoatNormalScale.value.copy(_e.clearcoatNormalScale),ge.clearcoatNormalMap.value=_e.clearcoatNormalMap,_e.side===BackSide&&ge.clearcoatNormalScale.value.negate())),_e.transmission>0&&(ge.transmission.value=_e.transmission,ge.transmissionSamplerMap.value=ve.texture,ge.transmissionSamplerSize.value.set(ve.width,ve.height),_e.transmissionMap&&(ge.transmissionMap.value=_e.transmissionMap),ge.thickness.value=_e.thickness,_e.thicknessMap&&(ge.thicknessMap.value=_e.thicknessMap),ge.attenuationDistance.value=_e.attenuationDistance,ge.attenuationColor.value.copy(_e.attenuationColor)),ge.specularIntensity.value=_e.specularIntensity,ge.specularColor.value.copy(_e.specularColor),_e.specularIntensityMap&&(ge.specularIntensityMap.value=_e.specularIntensityMap),_e.specularColorMap&&(ge.specularColorMap.value=_e.specularColorMap)}function fe(ge,_e){_e.matcap&&(ge.matcap.value=_e.matcap),_e.bumpMap&&(ge.bumpMap.value=_e.bumpMap,ge.bumpScale.value=_e.bumpScale,_e.side===BackSide&&(ge.bumpScale.value*=-1)),_e.normalMap&&(ge.normalMap.value=_e.normalMap,ge.normalScale.value.copy(_e.normalScale),_e.side===BackSide&&ge.normalScale.value.negate()),_e.displacementMap&&(ge.displacementMap.value=_e.displacementMap,ge.displacementScale.value=_e.displacementScale,ge.displacementBias.value=_e.displacementBias)}function pe(ge,_e){_e.displacementMap&&(ge.displacementMap.value=_e.displacementMap,ge.displacementScale.value=_e.displacementScale,ge.displacementBias.value=_e.displacementBias)}function me(ge,_e){_e.displacementMap&&(ge.displacementMap.value=_e.displacementMap,ge.displacementScale.value=_e.displacementScale,ge.displacementBias.value=_e.displacementBias),ge.referencePosition.value.copy(_e.referencePosition),ge.nearDistance.value=_e.nearDistance,ge.farDistance.value=_e.farDistance}function xe(ge,_e){_e.bumpMap&&(ge.bumpMap.value=_e.bumpMap,ge.bumpScale.value=_e.bumpScale,_e.side===BackSide&&(ge.bumpScale.value*=-1)),_e.normalMap&&(ge.normalMap.value=_e.normalMap,ge.normalScale.value.copy(_e.normalScale),_e.side===BackSide&&ge.normalScale.value.negate()),_e.displacementMap&&(ge.displacementMap.value=_e.displacementMap,ge.displacementScale.value=_e.displacementScale,ge.displacementBias.value=_e.displacementBias)}return{refreshFogUniforms:ee,refreshMaterialUniforms:te}}function createCanvasElement(){const ie=createElementNS("canvas");return ie.style.display="block",ie}function WebGLRenderer(ie={}){const ee=ie.canvas!==void 0?ie.canvas:createCanvasElement(),te=ie.context!==void 0?ie.context:null,re=ie.alpha!==void 0?ie.alpha:!1,ne=ie.depth!==void 0?ie.depth:!0,se=ie.stencil!==void 0?ie.stencil:!0,ae=ie.antialias!==void 0?ie.antialias:!1,oe=ie.premultipliedAlpha!==void 0?ie.premultipliedAlpha:!0,le=ie.preserveDrawingBuffer!==void 0?ie.preserveDrawingBuffer:!1,he=ie.powerPreference!==void 0?ie.powerPreference:"default",ce=ie.failIfMajorPerformanceCaveat!==void 0?ie.failIfMajorPerformanceCaveat:!1;let de=null,ue=null;const fe=[],pe=[];this.domElement=ee,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const me=this;let xe=!1,ge=0,_e=0,ve=null,ye=-1,be=null;const we=new Vector4,Se=new Vector4;let Te=null,Pe=ee.width,Be=ee.height,Ce=1,De=null,Re=null;const Le=new Vector4(0,0,Pe,Be),ke=new Vector4(0,0,Pe,Be);let Me=!1;const Ee=[],Ae=new Frustum;let Ie=!1,Fe=!1,Ne=null;const $e=new Matrix4,ze=new Vector3,Xe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Je(){return ve===null?Ce:1}let We=te;function dt(Ge,Ye){for(let Ke=0;Ke<Ge.length;Ke++){const qe=Ge[Ke],lt=ee.getContext(qe,Ye);if(lt!==null)return lt}return null}try{const Ge={alpha:re,depth:ne,stencil:se,antialias:ae,premultipliedAlpha:oe,preserveDrawingBuffer:le,powerPreference:he,failIfMajorPerformanceCaveat:ce};if(ee.addEventListener("webglcontextlost",qt,!1),ee.addEventListener("webglcontextrestored",Zt,!1),We===null){const Ye=["webgl2","webgl","experimental-webgl"];if(me.isWebGL1Renderer===!0&&Ye.shift(),We=dt(Ye,Ge),We===null)throw dt(Ye)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}We.getShaderPrecisionFormat===void 0&&(We.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ge){throw console.error("THREE.WebGLRenderer: "+Ge.message),Ge}let yt,vt,at,_t,je,He,Qe,St,gt,Oe,Ve,Ze,mt,pt,Tt,Et,Mt,Rt,bt,Ue,xt,ht,At;function Pt(){yt=new WebGLExtensions(We),vt=new WebGLCapabilities(We,yt,ie),yt.init(vt),ht=new WebGLUtils(We,yt,vt),at=new WebGLState(We,yt,vt),Ee[0]=1029,_t=new WebGLInfo,je=new WebGLProperties,He=new WebGLTextures(We,yt,at,je,vt,ht,_t),Qe=new WebGLCubeMaps(me),St=new WebGLCubeUVMaps(me),gt=new WebGLAttributes(We,vt),At=new WebGLBindingStates(We,yt,gt,vt),Oe=new WebGLGeometries(We,gt,_t,At),Ve=new WebGLObjects(We,Oe,gt,_t),bt=new WebGLMorphtargets(We,vt,He),Et=new WebGLClipping(je),Ze=new WebGLPrograms(me,Qe,St,yt,vt,At,Et),mt=new WebGLMaterials(je),pt=new WebGLRenderLists(je),Tt=new WebGLRenderStates(yt,vt),Rt=new WebGLBackground(me,Qe,at,Ve,oe),Mt=new WebGLShadowMap(me,Ve,vt),Ue=new WebGLBufferRenderer(We,yt,_t,vt),xt=new WebGLIndexedBufferRenderer(We,yt,_t,vt),_t.programs=Ze.programs,me.capabilities=vt,me.extensions=yt,me.properties=je,me.renderLists=pt,me.shadowMap=Mt,me.state=at,me.info=_t}Pt();const $t=new WebXRManager(me,We);this.xr=$t,this.getContext=function(){return We},this.getContextAttributes=function(){return We.getContextAttributes()},this.forceContextLoss=function(){const Ge=yt.get("WEBGL_lose_context");Ge&&Ge.loseContext()},this.forceContextRestore=function(){const Ge=yt.get("WEBGL_lose_context");Ge&&Ge.restoreContext()},this.getPixelRatio=function(){return Ce},this.setPixelRatio=function(Ge){Ge!==void 0&&(Ce=Ge,this.setSize(Pe,Be,!1))},this.getSize=function(Ge){return Ge.set(Pe,Be)},this.setSize=function(Ge,Ye,Ke){if($t.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Pe=Ge,Be=Ye,ee.width=Math.floor(Ge*Ce),ee.height=Math.floor(Ye*Ce),Ke!==!1&&(ee.style.width=Ge+"px",ee.style.height=Ye+"px"),this.setViewport(0,0,Ge,Ye)},this.getDrawingBufferSize=function(Ge){return Ge.set(Pe*Ce,Be*Ce).floor()},this.setDrawingBufferSize=function(Ge,Ye,Ke){Pe=Ge,Be=Ye,Ce=Ke,ee.width=Math.floor(Ge*Ke),ee.height=Math.floor(Ye*Ke),this.setViewport(0,0,Ge,Ye)},this.getCurrentViewport=function(Ge){return Ge.copy(we)},this.getViewport=function(Ge){return Ge.copy(Le)},this.setViewport=function(Ge,Ye,Ke,qe){Ge.isVector4?Le.set(Ge.x,Ge.y,Ge.z,Ge.w):Le.set(Ge,Ye,Ke,qe),at.viewport(we.copy(Le).multiplyScalar(Ce).floor())},this.getScissor=function(Ge){return Ge.copy(ke)},this.setScissor=function(Ge,Ye,Ke,qe){Ge.isVector4?ke.set(Ge.x,Ge.y,Ge.z,Ge.w):ke.set(Ge,Ye,Ke,qe),at.scissor(Se.copy(ke).multiplyScalar(Ce).floor())},this.getScissorTest=function(){return Me},this.setScissorTest=function(Ge){at.setScissorTest(Me=Ge)},this.setOpaqueSort=function(Ge){De=Ge},this.setTransparentSort=function(Ge){Re=Ge},this.getClearColor=function(Ge){return Ge.copy(Rt.getClearColor())},this.setClearColor=function(){Rt.setClearColor.apply(Rt,arguments)},this.getClearAlpha=function(){return Rt.getClearAlpha()},this.setClearAlpha=function(){Rt.setClearAlpha.apply(Rt,arguments)},this.clear=function(Ge,Ye,Ke){let qe=0;(Ge===void 0||Ge)&&(qe|=16384),(Ye===void 0||Ye)&&(qe|=256),(Ke===void 0||Ke)&&(qe|=1024),We.clear(qe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){ee.removeEventListener("webglcontextlost",qt,!1),ee.removeEventListener("webglcontextrestored",Zt,!1),pt.dispose(),Tt.dispose(),je.dispose(),Qe.dispose(),St.dispose(),Ve.dispose(),At.dispose(),$t.dispose(),$t.removeEventListener("sessionstart",ri),$t.removeEventListener("sessionend",ai),Ne&&(Ne.dispose(),Ne=null),Qt.stop()};function qt(Ge){Ge.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),xe=!0}function Zt(){console.log("THREE.WebGLRenderer: Context Restored."),xe=!1;const Ge=_t.autoReset,Ye=Mt.enabled,Ke=Mt.autoUpdate,qe=Mt.needsUpdate,lt=Mt.type;Pt(),_t.autoReset=Ge,Mt.enabled=Ye,Mt.autoUpdate=Ke,Mt.needsUpdate=qe,Mt.type=lt}function ti(Ge){const Ye=Ge.target;Ye.removeEventListener("dispose",ti),Xt(Ye)}function Xt(Ge){zt(Ge),je.remove(Ge)}function zt(Ge){const Ye=je.get(Ge).programs;Ye!==void 0&&Ye.forEach(function(Ke){Ze.releaseProgram(Ke)})}this.renderBufferDirect=function(Ge,Ye,Ke,qe,lt,Ct){Ye===null&&(Ye=Xe);const Dt=lt.isMesh&&lt.matrixWorld.determinant()<0,It=Ot(Ge,Ye,Ke,qe,lt);at.setMaterial(qe,Dt);let Lt=Ke.index;const Vt=Ke.attributes.position;if(Lt===null){if(Vt===void 0||Vt.count===0)return}else if(Lt.count===0)return;let kt=1;qe.wireframe===!0&&(Lt=Oe.getWireframeAttribute(Ke),kt=2),At.setup(lt,qe,It,Ke,Lt);let Ut,Wt=Ue;Lt!==null&&(Ut=gt.get(Lt),Wt=xt,Wt.setIndex(Ut));const Yt=Lt!==null?Lt.count:Vt.count,Bt=Ke.drawRange.start*kt,ii=Ke.drawRange.count*kt,jt=Ct!==null?Ct.start*kt:0,di=Ct!==null?Ct.count*kt:1/0,oi=Math.max(Bt,jt),ei=Math.min(Yt,Bt+ii,jt+di)-1,ni=Math.max(0,ei-oi+1);if(ni!==0){if(lt.isMesh)qe.wireframe===!0?(at.setLineWidth(qe.wireframeLinewidth*Je()),Wt.setMode(1)):Wt.setMode(4);else if(lt.isLine){let Kt=qe.linewidth;Kt===void 0&&(Kt=1),at.setLineWidth(Kt*Je()),lt.isLineSegments?Wt.setMode(1):lt.isLineLoop?Wt.setMode(2):Wt.setMode(3)}else lt.isPoints?Wt.setMode(0):lt.isSprite&&Wt.setMode(4);if(lt.isInstancedMesh)Wt.renderInstances(oi,ni,lt.count);else if(Ke.isInstancedBufferGeometry){const Kt=Math.min(Ke.instanceCount,Ke._maxInstanceCount);Wt.renderInstances(oi,ni,Kt)}else Wt.render(oi,ni)}},this.compile=function(Ge,Ye){ue=Tt.get(Ge),ue.init(),pe.push(ue),Ge.traverseVisible(function(Ke){Ke.isLight&&Ke.layers.test(Ye.layers)&&(ue.pushLight(Ke),Ke.castShadow&&ue.pushShadow(Ke))}),ue.setupLights(me.physicallyCorrectLights),Ge.traverse(function(Ke){const qe=Ke.material;if(qe)if(Array.isArray(qe))for(let lt=0;lt<qe.length;lt++){const Ct=qe[lt];Ft(Ct,Ge,Ke)}else Ft(qe,Ge,Ke)}),pe.pop(),ue=null};let Jt=null;function si(Ge){Jt&&Jt(Ge)}function ri(){Qt.stop()}function ai(){Qt.start()}const Qt=new WebGLAnimation;Qt.setAnimationLoop(si),typeof window!="undefined"&&Qt.setContext(window),this.setAnimationLoop=function(Ge){Jt=Ge,$t.setAnimationLoop(Ge),Ge===null?Qt.stop():Qt.start()},$t.addEventListener("sessionstart",ri),$t.addEventListener("sessionend",ai),this.render=function(Ge,Ye){if(Ye!==void 0&&Ye.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(xe===!0)return;Ge.autoUpdate===!0&&Ge.updateMatrixWorld(),Ye.parent===null&&Ye.updateMatrixWorld(),$t.enabled===!0&&$t.isPresenting===!0&&($t.cameraAutoUpdate===!0&&$t.updateCamera(Ye),Ye=$t.getCamera()),Ge.isScene===!0&&Ge.onBeforeRender(me,Ge,Ye,ve),ue=Tt.get(Ge,pe.length),ue.init(),pe.push(ue),$e.multiplyMatrices(Ye.projectionMatrix,Ye.matrixWorldInverse),Ae.setFromProjectionMatrix($e),Fe=this.localClippingEnabled,Ie=Et.init(this.clippingPlanes,Fe,Ye),de=pt.get(Ge,fe.length),de.init(),fe.push(de),ci(Ge,Ye,0,me.sortObjects),de.finish(),me.sortObjects===!0&&de.sort(De,Re),Ie===!0&&Et.beginShadows();const Ke=ue.state.shadowsArray;if(Mt.render(Ke,Ge,Ye),Ie===!0&&Et.endShadows(),this.info.autoReset===!0&&this.info.reset(),Rt.render(de,Ge),ue.setupLights(me.physicallyCorrectLights),Ye.isArrayCamera){const qe=Ye.cameras;for(let lt=0,Ct=qe.length;lt<Ct;lt++){const Dt=qe[lt];fi(de,Ge,Dt,Dt.viewport)}}else fi(de,Ge,Ye);ve!==null&&(He.updateMultisampleRenderTarget(ve),He.updateRenderTargetMipmap(ve)),Ge.isScene===!0&&Ge.onAfterRender(me,Ge,Ye),at.buffers.depth.setTest(!0),at.buffers.depth.setMask(!0),at.buffers.color.setMask(!0),at.setPolygonOffset(!1),At.resetDefaultState(),ye=-1,be=null,pe.pop(),pe.length>0?ue=pe[pe.length-1]:ue=null,fe.pop(),fe.length>0?de=fe[fe.length-1]:de=null};function ci(Ge,Ye,Ke,qe){if(Ge.visible===!1)return;if(Ge.layers.test(Ye.layers)){if(Ge.isGroup)Ke=Ge.renderOrder;else if(Ge.isLOD)Ge.autoUpdate===!0&&Ge.update(Ye);else if(Ge.isLight)ue.pushLight(Ge),Ge.castShadow&&ue.pushShadow(Ge);else if(Ge.isSprite){if(!Ge.frustumCulled||Ae.intersectsSprite(Ge)){qe&&ze.setFromMatrixPosition(Ge.matrixWorld).applyMatrix4($e);const Dt=Ve.update(Ge),It=Ge.material;It.visible&&de.push(Ge,Dt,It,Ke,ze.z,null)}}else if((Ge.isMesh||Ge.isLine||Ge.isPoints)&&(Ge.isSkinnedMesh&&Ge.skeleton.frame!==_t.render.frame&&(Ge.skeleton.update(),Ge.skeleton.frame=_t.render.frame),!Ge.frustumCulled||Ae.intersectsObject(Ge))){qe&&ze.setFromMatrixPosition(Ge.matrixWorld).applyMatrix4($e);const Dt=Ve.update(Ge),It=Ge.material;if(Array.isArray(It)){const Lt=Dt.groups;for(let Vt=0,kt=Lt.length;Vt<kt;Vt++){const Ut=Lt[Vt],Wt=It[Ut.materialIndex];Wt&&Wt.visible&&de.push(Ge,Dt,Wt,Ke,ze.z,Ut)}}else It.visible&&de.push(Ge,Dt,It,Ke,ze.z,null)}}const Ct=Ge.children;for(let Dt=0,It=Ct.length;Dt<It;Dt++)ci(Ct[Dt],Ye,Ke,qe)}function fi(Ge,Ye,Ke,qe){const lt=Ge.opaque,Ct=Ge.transmissive,Dt=Ge.transparent;ue.setupLightsView(Ke),Ct.length>0&&li(lt,Ye,Ke),qe&&at.viewport(we.copy(qe)),lt.length>0&&ui(lt,Ye,Ke),Ct.length>0&&ui(Ct,Ye,Ke),Dt.length>0&&ui(Dt,Ye,Ke)}function li(Ge,Ye,Ke){if(Ne===null){const Dt=ae===!0&&vt.isWebGL2===!0?WebGLMultisampleRenderTarget:WebGLRenderTarget;Ne=new Dt(1024,1024,{generateMipmaps:!0,type:ht.convert(HalfFloatType)!==null?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,magFilter:NearestFilter,wrapS:ClampToEdgeWrapping,wrapT:ClampToEdgeWrapping})}const qe=me.getRenderTarget();me.setRenderTarget(Ne),me.clear();const lt=me.toneMapping;me.toneMapping=NoToneMapping,ui(Ge,Ye,Ke),me.toneMapping=lt,He.updateMultisampleRenderTarget(Ne),He.updateRenderTargetMipmap(Ne),me.setRenderTarget(qe)}function ui(Ge,Ye,Ke){const qe=Ye.isScene===!0?Ye.overrideMaterial:null;for(let lt=0,Ct=Ge.length;lt<Ct;lt++){const Dt=Ge[lt],It=Dt.object,Lt=Dt.geometry,Vt=qe===null?Dt.material:qe,kt=Dt.group;It.layers.test(Ke.layers)&&Ht(It,Ye,Ke,Lt,Vt,kt)}}function Ht(Ge,Ye,Ke,qe,lt,Ct){Ge.onBeforeRender(me,Ye,Ke,qe,lt,Ct),Ge.modelViewMatrix.multiplyMatrices(Ke.matrixWorldInverse,Ge.matrixWorld),Ge.normalMatrix.getNormalMatrix(Ge.modelViewMatrix),lt.onBeforeRender(me,Ye,Ke,qe,Ge,Ct),lt.transparent===!0&&lt.side===DoubleSide?(lt.side=BackSide,lt.needsUpdate=!0,me.renderBufferDirect(Ke,Ye,qe,lt,Ge,Ct),lt.side=FrontSide,lt.needsUpdate=!0,me.renderBufferDirect(Ke,Ye,qe,lt,Ge,Ct),lt.side=DoubleSide):me.renderBufferDirect(Ke,Ye,qe,lt,Ge,Ct),Ge.onAfterRender(me,Ye,Ke,qe,lt,Ct)}function Ft(Ge,Ye,Ke){Ye.isScene!==!0&&(Ye=Xe);const qe=je.get(Ge),lt=ue.state.lights,Ct=ue.state.shadowsArray,Dt=lt.state.version,It=Ze.getParameters(Ge,lt.state,Ct,Ye,Ke),Lt=Ze.getProgramCacheKey(It);let Vt=qe.programs;qe.environment=Ge.isMeshStandardMaterial?Ye.environment:null,qe.fog=Ye.fog,qe.envMap=(Ge.isMeshStandardMaterial?St:Qe).get(Ge.envMap||qe.environment),Vt===void 0&&(Ge.addEventListener("dispose",ti),Vt=new Map,qe.programs=Vt);let kt=Vt.get(Lt);if(kt!==void 0){if(qe.currentProgram===kt&&qe.lightsStateVersion===Dt)return wt(Ge,It),kt}else It.uniforms=Ze.getUniforms(Ge),Ge.onBuild(Ke,It,me),Ge.onBeforeCompile(It,me),kt=Ze.acquireProgram(It,Lt),Vt.set(Lt,kt),qe.uniforms=It.uniforms;const Ut=qe.uniforms;(!Ge.isShaderMaterial&&!Ge.isRawShaderMaterial||Ge.clipping===!0)&&(Ut.clippingPlanes=Et.uniform),wt(Ge,It),qe.needsLights=Gt(Ge),qe.lightsStateVersion=Dt,qe.needsLights&&(Ut.ambientLightColor.value=lt.state.ambient,Ut.lightProbe.value=lt.state.probe,Ut.directionalLights.value=lt.state.directional,Ut.directionalLightShadows.value=lt.state.directionalShadow,Ut.spotLights.value=lt.state.spot,Ut.spotLightShadows.value=lt.state.spotShadow,Ut.rectAreaLights.value=lt.state.rectArea,Ut.ltc_1.value=lt.state.rectAreaLTC1,Ut.ltc_2.value=lt.state.rectAreaLTC2,Ut.pointLights.value=lt.state.point,Ut.pointLightShadows.value=lt.state.pointShadow,Ut.hemisphereLights.value=lt.state.hemi,Ut.directionalShadowMap.value=lt.state.directionalShadowMap,Ut.directionalShadowMatrix.value=lt.state.directionalShadowMatrix,Ut.spotShadowMap.value=lt.state.spotShadowMap,Ut.spotShadowMatrix.value=lt.state.spotShadowMatrix,Ut.pointShadowMap.value=lt.state.pointShadowMap,Ut.pointShadowMatrix.value=lt.state.pointShadowMatrix);const Wt=kt.getUniforms(),Yt=WebGLUniforms.seqWithValue(Wt.seq,Ut);return qe.currentProgram=kt,qe.uniformsList=Yt,kt}function wt(Ge,Ye){const Ke=je.get(Ge);Ke.outputEncoding=Ye.outputEncoding,Ke.instancing=Ye.instancing,Ke.skinning=Ye.skinning,Ke.morphTargets=Ye.morphTargets,Ke.morphNormals=Ye.morphNormals,Ke.morphTargetsCount=Ye.morphTargetsCount,Ke.numClippingPlanes=Ye.numClippingPlanes,Ke.numIntersection=Ye.numClipIntersection,Ke.vertexAlphas=Ye.vertexAlphas,Ke.vertexTangents=Ye.vertexTangents}function Ot(Ge,Ye,Ke,qe,lt){Ye.isScene!==!0&&(Ye=Xe),He.resetTextureUnits();const Ct=Ye.fog,Dt=qe.isMeshStandardMaterial?Ye.environment:null,It=ve===null?me.outputEncoding:ve.texture.encoding,Lt=(qe.isMeshStandardMaterial?St:Qe).get(qe.envMap||Dt),Vt=qe.vertexColors===!0&&!!Ke.attributes.color&&Ke.attributes.color.itemSize===4,kt=!!qe.normalMap&&!!Ke.attributes.tangent,Ut=!!Ke.morphAttributes.position,Wt=!!Ke.morphAttributes.normal,Yt=Ke.morphAttributes.position?Ke.morphAttributes.position.length:0,Bt=je.get(qe),ii=ue.state.lights;if(Ie===!0&&(Fe===!0||Ge!==be)){const hi=Ge===be&&qe.id===ye;Et.setState(qe,Ge,hi)}let jt=!1;qe.version===Bt.__version?(Bt.needsLights&&Bt.lightsStateVersion!==ii.state.version||Bt.outputEncoding!==It||lt.isInstancedMesh&&Bt.instancing===!1||!lt.isInstancedMesh&&Bt.instancing===!0||lt.isSkinnedMesh&&Bt.skinning===!1||!lt.isSkinnedMesh&&Bt.skinning===!0||Bt.envMap!==Lt||qe.fog&&Bt.fog!==Ct||Bt.numClippingPlanes!==void 0&&(Bt.numClippingPlanes!==Et.numPlanes||Bt.numIntersection!==Et.numIntersection)||Bt.vertexAlphas!==Vt||Bt.vertexTangents!==kt||Bt.morphTargets!==Ut||Bt.morphNormals!==Wt||vt.isWebGL2===!0&&Bt.morphTargetsCount!==Yt)&&(jt=!0):(jt=!0,Bt.__version=qe.version);let di=Bt.currentProgram;jt===!0&&(di=Ft(qe,Ye,lt));let oi=!1,ei=!1,ni=!1;const Kt=di.getUniforms(),mi=Bt.uniforms;if(at.useProgram(di.program)&&(oi=!0,ei=!0,ni=!0),qe.id!==ye&&(ye=qe.id,ei=!0),oi||be!==Ge){if(Kt.setValue(We,"projectionMatrix",Ge.projectionMatrix),vt.logarithmicDepthBuffer&&Kt.setValue(We,"logDepthBufFC",2/(Math.log(Ge.far+1)/Math.LN2)),be!==Ge&&(be=Ge,ei=!0,ni=!0),qe.isShaderMaterial||qe.isMeshPhongMaterial||qe.isMeshToonMaterial||qe.isMeshStandardMaterial||qe.envMap){const hi=Kt.map.cameraPosition;hi!==void 0&&hi.setValue(We,ze.setFromMatrixPosition(Ge.matrixWorld))}(qe.isMeshPhongMaterial||qe.isMeshToonMaterial||qe.isMeshLambertMaterial||qe.isMeshBasicMaterial||qe.isMeshStandardMaterial||qe.isShaderMaterial)&&Kt.setValue(We,"isOrthographic",Ge.isOrthographicCamera===!0),(qe.isMeshPhongMaterial||qe.isMeshToonMaterial||qe.isMeshLambertMaterial||qe.isMeshBasicMaterial||qe.isMeshStandardMaterial||qe.isShaderMaterial||qe.isShadowMaterial||lt.isSkinnedMesh)&&Kt.setValue(We,"viewMatrix",Ge.matrixWorldInverse)}if(lt.isSkinnedMesh){Kt.setOptional(We,lt,"bindMatrix"),Kt.setOptional(We,lt,"bindMatrixInverse");const hi=lt.skeleton;hi&&(vt.floatVertexTextures?(hi.boneTexture===null&&hi.computeBoneTexture(),Kt.setValue(We,"boneTexture",hi.boneTexture,He),Kt.setValue(We,"boneTextureSize",hi.boneTextureSize)):Kt.setOptional(We,hi,"boneMatrices"))}return!!Ke&&(Ke.morphAttributes.position!==void 0||Ke.morphAttributes.normal!==void 0)&&bt.update(lt,Ke,qe,di),(ei||Bt.receiveShadow!==lt.receiveShadow)&&(Bt.receiveShadow=lt.receiveShadow,Kt.setValue(We,"receiveShadow",lt.receiveShadow)),ei&&(Kt.setValue(We,"toneMappingExposure",me.toneMappingExposure),Bt.needsLights&&Nt(mi,ni),Ct&&qe.fog&&mt.refreshFogUniforms(mi,Ct),mt.refreshMaterialUniforms(mi,qe,Ce,Be,Ne),WebGLUniforms.upload(We,Bt.uniformsList,mi,He)),qe.isShaderMaterial&&qe.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(We,Bt.uniformsList,mi,He),qe.uniformsNeedUpdate=!1),qe.isSpriteMaterial&&Kt.setValue(We,"center",lt.center),Kt.setValue(We,"modelViewMatrix",lt.modelViewMatrix),Kt.setValue(We,"normalMatrix",lt.normalMatrix),Kt.setValue(We,"modelMatrix",lt.matrixWorld),di}function Nt(Ge,Ye){Ge.ambientLightColor.needsUpdate=Ye,Ge.lightProbe.needsUpdate=Ye,Ge.directionalLights.needsUpdate=Ye,Ge.directionalLightShadows.needsUpdate=Ye,Ge.pointLights.needsUpdate=Ye,Ge.pointLightShadows.needsUpdate=Ye,Ge.spotLights.needsUpdate=Ye,Ge.spotLightShadows.needsUpdate=Ye,Ge.rectAreaLights.needsUpdate=Ye,Ge.hemisphereLights.needsUpdate=Ye}function Gt(Ge){return Ge.isMeshLambertMaterial||Ge.isMeshToonMaterial||Ge.isMeshPhongMaterial||Ge.isMeshStandardMaterial||Ge.isShadowMaterial||Ge.isShaderMaterial&&Ge.lights===!0}this.getActiveCubeFace=function(){return ge},this.getActiveMipmapLevel=function(){return _e},this.getRenderTarget=function(){return ve},this.setRenderTarget=function(Ge,Ye=0,Ke=0){ve=Ge,ge=Ye,_e=Ke,Ge&&je.get(Ge).__webglFramebuffer===void 0&&He.setupRenderTarget(Ge);let qe=null,lt=!1,Ct=!1;if(Ge){const It=Ge.texture;(It.isDataTexture3D||It.isDataTexture2DArray)&&(Ct=!0);const Lt=je.get(Ge).__webglFramebuffer;Ge.isWebGLCubeRenderTarget?(qe=Lt[Ye],lt=!0):Ge.isWebGLMultisampleRenderTarget?qe=je.get(Ge).__webglMultisampledFramebuffer:qe=Lt,we.copy(Ge.viewport),Se.copy(Ge.scissor),Te=Ge.scissorTest}else we.copy(Le).multiplyScalar(Ce).floor(),Se.copy(ke).multiplyScalar(Ce).floor(),Te=Me;if(at.bindFramebuffer(36160,qe)&&vt.drawBuffers){let It=!1;if(Ge)if(Ge.isWebGLMultipleRenderTargets){const Lt=Ge.texture;if(Ee.length!==Lt.length||Ee[0]!==36064){for(let Vt=0,kt=Lt.length;Vt<kt;Vt++)Ee[Vt]=36064+Vt;Ee.length=Lt.length,It=!0}}else(Ee.length!==1||Ee[0]!==36064)&&(Ee[0]=36064,Ee.length=1,It=!0);else(Ee.length!==1||Ee[0]!==1029)&&(Ee[0]=1029,Ee.length=1,It=!0);It&&(vt.isWebGL2?We.drawBuffers(Ee):yt.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ee))}if(at.viewport(we),at.scissor(Se),at.setScissorTest(Te),lt){const It=je.get(Ge.texture);We.framebufferTexture2D(36160,36064,34069+Ye,It.__webglTexture,Ke)}else if(Ct){const It=je.get(Ge.texture),Lt=Ye||0;We.framebufferTextureLayer(36160,36064,It.__webglTexture,Ke||0,Lt)}ye=-1},this.readRenderTargetPixels=function(Ge,Ye,Ke,qe,lt,Ct,Dt){if(!(Ge&&Ge.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let It=je.get(Ge).__webglFramebuffer;if(Ge.isWebGLCubeRenderTarget&&Dt!==void 0&&(It=It[Dt]),It){at.bindFramebuffer(36160,It);try{const Lt=Ge.texture,Vt=Lt.format,kt=Lt.type;if(Vt!==RGBAFormat&&ht.convert(Vt)!==We.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ut=kt===HalfFloatType&&(yt.has("EXT_color_buffer_half_float")||vt.isWebGL2&&yt.has("EXT_color_buffer_float"));if(kt!==UnsignedByteType&&ht.convert(kt)!==We.getParameter(35738)&&!(kt===FloatType&&(vt.isWebGL2||yt.has("OES_texture_float")||yt.has("WEBGL_color_buffer_float")))&&!Ut){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}We.checkFramebufferStatus(36160)===36053?Ye>=0&&Ye<=Ge.width-qe&&Ke>=0&&Ke<=Ge.height-lt&&We.readPixels(Ye,Ke,qe,lt,ht.convert(Vt),ht.convert(kt),Ct):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Lt=ve!==null?je.get(ve).__webglFramebuffer:null;at.bindFramebuffer(36160,Lt)}}},this.copyFramebufferToTexture=function(Ge,Ye,Ke=0){const qe=Math.pow(2,-Ke),lt=Math.floor(Ye.image.width*qe),Ct=Math.floor(Ye.image.height*qe);let Dt=ht.convert(Ye.format);vt.isWebGL2&&(Dt===6407&&(Dt=32849),Dt===6408&&(Dt=32856)),He.setTexture2D(Ye,0),We.copyTexImage2D(3553,Ke,Dt,Ge.x,Ge.y,lt,Ct,0),at.unbindTexture()},this.copyTextureToTexture=function(Ge,Ye,Ke,qe=0){const lt=Ye.image.width,Ct=Ye.image.height,Dt=ht.convert(Ke.format),It=ht.convert(Ke.type);He.setTexture2D(Ke,0),We.pixelStorei(37440,Ke.flipY),We.pixelStorei(37441,Ke.premultiplyAlpha),We.pixelStorei(3317,Ke.unpackAlignment),Ye.isDataTexture?We.texSubImage2D(3553,qe,Ge.x,Ge.y,lt,Ct,Dt,It,Ye.image.data):Ye.isCompressedTexture?We.compressedTexSubImage2D(3553,qe,Ge.x,Ge.y,Ye.mipmaps[0].width,Ye.mipmaps[0].height,Dt,Ye.mipmaps[0].data):We.texSubImage2D(3553,qe,Ge.x,Ge.y,Dt,It,Ye.image),qe===0&&Ke.generateMipmaps&&We.generateMipmap(3553),at.unbindTexture()},this.copyTextureToTexture3D=function(Ge,Ye,Ke,qe,lt=0){if(me.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ct=Ge.max.x-Ge.min.x+1,Dt=Ge.max.y-Ge.min.y+1,It=Ge.max.z-Ge.min.z+1,Lt=ht.convert(qe.format),Vt=ht.convert(qe.type);let kt;if(qe.isDataTexture3D)He.setTexture3D(qe,0),kt=32879;else if(qe.isDataTexture2DArray)He.setTexture2DArray(qe,0),kt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}We.pixelStorei(37440,qe.flipY),We.pixelStorei(37441,qe.premultiplyAlpha),We.pixelStorei(3317,qe.unpackAlignment);const Ut=We.getParameter(3314),Wt=We.getParameter(32878),Yt=We.getParameter(3316),Bt=We.getParameter(3315),ii=We.getParameter(32877),jt=Ke.isCompressedTexture?Ke.mipmaps[0]:Ke.image;We.pixelStorei(3314,jt.width),We.pixelStorei(32878,jt.height),We.pixelStorei(3316,Ge.min.x),We.pixelStorei(3315,Ge.min.y),We.pixelStorei(32877,Ge.min.z),Ke.isDataTexture||Ke.isDataTexture3D?We.texSubImage3D(kt,lt,Ye.x,Ye.y,Ye.z,Ct,Dt,It,Lt,Vt,jt.data):Ke.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),We.compressedTexSubImage3D(kt,lt,Ye.x,Ye.y,Ye.z,Ct,Dt,It,Lt,jt.data)):We.texSubImage3D(kt,lt,Ye.x,Ye.y,Ye.z,Ct,Dt,It,Lt,Vt,jt),We.pixelStorei(3314,Ut),We.pixelStorei(32878,Wt),We.pixelStorei(3316,Yt),We.pixelStorei(3315,Bt),We.pixelStorei(32877,ii),lt===0&&qe.generateMipmaps&&We.generateMipmap(kt),at.unbindTexture()},this.initTexture=function(Ge){He.setTexture2D(Ge,0),at.unbindTexture()},this.resetState=function(){ge=0,_e=0,ve=null,at.reset(),At.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}WebGLRenderer.prototype.isWebGLRenderer=!0;class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class Scene extends Object3D{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(ee,te){return super.copy(ee,te),ee.background!==null&&(this.background=ee.background.clone()),ee.environment!==null&&(this.environment=ee.environment.clone()),ee.fog!==null&&(this.fog=ee.fog.clone()),ee.overrideMaterial!==null&&(this.overrideMaterial=ee.overrideMaterial.clone()),this.autoUpdate=ee.autoUpdate,this.matrixAutoUpdate=ee.matrixAutoUpdate,this}toJSON(ee){const te=super.toJSON(ee);return this.fog!==null&&(te.object.fog=this.fog.toJSON()),te}}Scene.prototype.isScene=!0;class InterleavedBuffer{constructor(ee,te){this.array=ee,this.stride=te,this.count=ee!==void 0?ee.length/te:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(ee){ee===!0&&this.version++}setUsage(ee){return this.usage=ee,this}copy(ee){return this.array=new ee.array.constructor(ee.array),this.count=ee.count,this.stride=ee.stride,this.usage=ee.usage,this}copyAt(ee,te,re){ee*=this.stride,re*=te.stride;for(let ne=0,se=this.stride;ne<se;ne++)this.array[ee+ne]=te.array[re+ne];return this}set(ee,te=0){return this.array.set(ee,te),this}clone(ee){ee.arrayBuffers===void 0&&(ee.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),ee.arrayBuffers[this.array.buffer._uuid]===void 0&&(ee.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const te=new this.array.constructor(ee.arrayBuffers[this.array.buffer._uuid]),re=new this.constructor(te,this.stride);return re.setUsage(this.usage),re}onUpload(ee){return this.onUploadCallback=ee,this}toJSON(ee){return ee.arrayBuffers===void 0&&(ee.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),ee.arrayBuffers[this.array.buffer._uuid]===void 0&&(ee.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}InterleavedBuffer.prototype.isInterleavedBuffer=!0;const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(ee,te,re,ne=!1){this.name="",this.data=ee,this.itemSize=te,this.offset=re,this.normalized=ne===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(ee){this.data.needsUpdate=ee}applyMatrix4(ee){for(let te=0,re=this.data.count;te<re;te++)_vector$6.x=this.getX(te),_vector$6.y=this.getY(te),_vector$6.z=this.getZ(te),_vector$6.applyMatrix4(ee),this.setXYZ(te,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(ee){for(let te=0,re=this.count;te<re;te++)_vector$6.x=this.getX(te),_vector$6.y=this.getY(te),_vector$6.z=this.getZ(te),_vector$6.applyNormalMatrix(ee),this.setXYZ(te,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(ee){for(let te=0,re=this.count;te<re;te++)_vector$6.x=this.getX(te),_vector$6.y=this.getY(te),_vector$6.z=this.getZ(te),_vector$6.transformDirection(ee),this.setXYZ(te,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX(ee,te){return this.data.array[ee*this.data.stride+this.offset]=te,this}setY(ee,te){return this.data.array[ee*this.data.stride+this.offset+1]=te,this}setZ(ee,te){return this.data.array[ee*this.data.stride+this.offset+2]=te,this}setW(ee,te){return this.data.array[ee*this.data.stride+this.offset+3]=te,this}getX(ee){return this.data.array[ee*this.data.stride+this.offset]}getY(ee){return this.data.array[ee*this.data.stride+this.offset+1]}getZ(ee){return this.data.array[ee*this.data.stride+this.offset+2]}getW(ee){return this.data.array[ee*this.data.stride+this.offset+3]}setXY(ee,te,re){return ee=ee*this.data.stride+this.offset,this.data.array[ee+0]=te,this.data.array[ee+1]=re,this}setXYZ(ee,te,re,ne){return ee=ee*this.data.stride+this.offset,this.data.array[ee+0]=te,this.data.array[ee+1]=re,this.data.array[ee+2]=ne,this}setXYZW(ee,te,re,ne,se){return ee=ee*this.data.stride+this.offset,this.data.array[ee+0]=te,this.data.array[ee+1]=re,this.data.array[ee+2]=ne,this.data.array[ee+3]=se,this}clone(ee){if(ee===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const te=[];for(let re=0;re<this.count;re++){const ne=re*this.data.stride+this.offset;for(let se=0;se<this.itemSize;se++)te.push(this.data.array[ne+se])}return new BufferAttribute(new this.array.constructor(te),this.itemSize,this.normalized)}else return ee.interleavedBuffers===void 0&&(ee.interleavedBuffers={}),ee.interleavedBuffers[this.data.uuid]===void 0&&(ee.interleavedBuffers[this.data.uuid]=this.data.clone(ee)),new InterleavedBufferAttribute(ee.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(ee){if(ee===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const te=[];for(let re=0;re<this.count;re++){const ne=re*this.data.stride+this.offset;for(let se=0;se<this.itemSize;se++)te.push(this.data.array[ne+se])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:te,normalized:this.normalized}}else return ee.interleavedBuffers===void 0&&(ee.interleavedBuffers={}),ee.interleavedBuffers[this.data.uuid]===void 0&&(ee.interleavedBuffers[this.data.uuid]=this.data.toJSON(ee)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}InterleavedBufferAttribute.prototype.isInterleavedBufferAttribute=!0;class SpriteMaterial extends Material{constructor(ee){super(),this.type="SpriteMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(ee)}copy(ee){return super.copy(ee),this.color.copy(ee.color),this.map=ee.map,this.alphaMap=ee.alphaMap,this.rotation=ee.rotation,this.sizeAttenuation=ee.sizeAttenuation,this}}SpriteMaterial.prototype.isSpriteMaterial=!0;let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite$1 extends Object3D{constructor(ee){if(super(),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const te=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),re=new InterleavedBuffer(te,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(re,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(re,2,3,!1))}this.geometry=_geometry,this.material=ee!==void 0?ee:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(ee,te){ee.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(ee.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(ee.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),ee.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const re=this.material.rotation;let ne,se;re!==0&&(se=Math.cos(re),ne=Math.sin(re));const ae=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,ae,_worldScale,ne,se),transformVertex(_vB.set(.5,-.5,0),_mvPosition,ae,_worldScale,ne,se),transformVertex(_vC.set(.5,.5,0),_mvPosition,ae,_worldScale,ne,se),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let oe=ee.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(oe===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,ae,_worldScale,ne,se),_uvB.set(0,1),oe=ee.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),oe===null))return;const le=ee.ray.origin.distanceTo(_intersectPoint);le<ee.near||le>ee.far||te.push({distance:le,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(ee){return super.copy(ee),ee.center!==void 0&&this.center.copy(ee.center),this.material=ee.material,this}}Sprite$1.prototype.isSprite=!0;function transformVertex(ie,ee,te,re,ne,se){_alignedPosition.subVectors(ie,te).addScalar(.5).multiply(re),ne!==void 0?(_rotatedPosition.x=se*_alignedPosition.x-ne*_alignedPosition.y,_rotatedPosition.y=ne*_alignedPosition.x+se*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),ie.copy(ee),ie.x+=_rotatedPosition.x,ie.y+=_rotatedPosition.y,ie.applyMatrix4(_viewWorldMatrix)}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$5=new Vector3,_matrix=new Matrix4;class SkinnedMesh extends Mesh$1{constructor(ee,te){super(ee,te),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy(ee){return super.copy(ee),this.bindMode=ee.bindMode,this.bindMatrix.copy(ee.bindMatrix),this.bindMatrixInverse.copy(ee.bindMatrixInverse),this.skeleton=ee.skeleton,this}bind(ee,te){this.skeleton=ee,te===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),te=this.matrixWorld),this.bindMatrix.copy(te),this.bindMatrixInverse.copy(te).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const ee=new Vector4,te=this.geometry.attributes.skinWeight;for(let re=0,ne=te.count;re<ne;re++){ee.x=te.getX(re),ee.y=te.getY(re),ee.z=te.getZ(re),ee.w=te.getW(re);const se=1/ee.manhattanLength();se!==1/0?ee.multiplyScalar(se):ee.set(1,0,0,0),te.setXYZW(re,ee.x,ee.y,ee.z,ee.w)}}updateMatrixWorld(ee){super.updateMatrixWorld(ee),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(ee,te){const re=this.skeleton,ne=this.geometry;_skinIndex.fromBufferAttribute(ne.attributes.skinIndex,ee),_skinWeight.fromBufferAttribute(ne.attributes.skinWeight,ee),_basePosition.copy(te).applyMatrix4(this.bindMatrix),te.set(0,0,0);for(let se=0;se<4;se++){const ae=_skinWeight.getComponent(se);if(ae!==0){const oe=_skinIndex.getComponent(se);_matrix.multiplyMatrices(re.bones[oe].matrixWorld,re.boneInverses[oe]),te.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix),ae)}}return te.applyMatrix4(this.bindMatrixInverse)}}SkinnedMesh.prototype.isSkinnedMesh=!0;class Bone extends Object3D{constructor(){super(),this.type="Bone"}}Bone.prototype.isBone=!0;class DataTexture extends Texture$1{constructor(ee=null,te=1,re=1,ne,se,ae,oe,le,he=NearestFilter,ce=NearestFilter,de,ue){super(null,ae,oe,le,he,ce,ne,se,de,ue),this.image={data:ee,width:te,height:re},this.magFilter=he,this.minFilter=ce,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture.prototype.isDataTexture=!0;class InstancedBufferAttribute extends BufferAttribute{constructor(ee,te,re,ne=1){typeof re=="number"&&(ne=re,re=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(ee,te,re),this.meshPerAttribute=ne}copy(ee){return super.copy(ee),this.meshPerAttribute=ee.meshPerAttribute,this}toJSON(){const ee=super.toJSON();return ee.meshPerAttribute=this.meshPerAttribute,ee.isInstancedBufferAttribute=!0,ee}}InstancedBufferAttribute.prototype.isInstancedBufferAttribute=!0;const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh$1;class InstancedMesh extends Mesh$1{constructor(ee,te,re){super(ee,te),this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(re*16),16),this.instanceColor=null,this.count=re,this.frustumCulled=!1}copy(ee){return super.copy(ee),this.instanceMatrix.copy(ee.instanceMatrix),ee.instanceColor!==null&&(this.instanceColor=ee.instanceColor.clone()),this.count=ee.count,this}getColorAt(ee,te){te.fromArray(this.instanceColor.array,ee*3)}getMatrixAt(ee,te){te.fromArray(this.instanceMatrix.array,ee*16)}raycast(ee,te){const re=this.matrixWorld,ne=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(let se=0;se<ne;se++){this.getMatrixAt(se,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(re,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(ee,_instanceIntersects);for(let ae=0,oe=_instanceIntersects.length;ae<oe;ae++){const le=_instanceIntersects[ae];le.instanceId=se,le.object=this,te.push(le)}_instanceIntersects.length=0}}setColorAt(ee,te){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),te.toArray(this.instanceColor.array,ee*3)}setMatrixAt(ee,te){te.toArray(this.instanceMatrix.array,ee*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}InstancedMesh.prototype.isInstancedMesh=!0;class LineBasicMaterial extends Material{constructor(ee){super(),this.type="LineBasicMaterial",this.color=new Color$1(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(ee)}copy(ee){return super.copy(ee),this.color.copy(ee.color),this.linewidth=ee.linewidth,this.linecap=ee.linecap,this.linejoin=ee.linejoin,this}}LineBasicMaterial.prototype.isLineBasicMaterial=!0;const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends Object3D{constructor(ee=new BufferGeometry,te=new LineBasicMaterial){super(),this.type="Line",this.geometry=ee,this.material=te,this.updateMorphTargets()}copy(ee){return super.copy(ee),this.material=ee.material,this.geometry=ee.geometry,this}computeLineDistances(){const ee=this.geometry;if(ee.isBufferGeometry)if(ee.index===null){const te=ee.attributes.position,re=[0];for(let ne=1,se=te.count;ne<se;ne++)_start$1.fromBufferAttribute(te,ne-1),_end$1.fromBufferAttribute(te,ne),re[ne]=re[ne-1],re[ne]+=_start$1.distanceTo(_end$1);ee.setAttribute("lineDistance",new Float32BufferAttribute(re,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else ee.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(ee,te){const re=this.geometry,ne=this.matrixWorld,se=ee.params.Line.threshold,ae=re.drawRange;if(re.boundingSphere===null&&re.computeBoundingSphere(),_sphere$1.copy(re.boundingSphere),_sphere$1.applyMatrix4(ne),_sphere$1.radius+=se,ee.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(ne).invert(),_ray$1.copy(ee.ray).applyMatrix4(_inverseMatrix$1);const oe=se/((this.scale.x+this.scale.y+this.scale.z)/3),le=oe*oe,he=new Vector3,ce=new Vector3,de=new Vector3,ue=new Vector3,fe=this.isLineSegments?2:1;if(re.isBufferGeometry){const pe=re.index,xe=re.attributes.position;if(pe!==null){const ge=Math.max(0,ae.start),_e=Math.min(pe.count,ae.start+ae.count);for(let ve=ge,ye=_e-1;ve<ye;ve+=fe){const be=pe.getX(ve),we=pe.getX(ve+1);if(he.fromBufferAttribute(xe,be),ce.fromBufferAttribute(xe,we),_ray$1.distanceSqToSegment(he,ce,ue,de)>le)continue;ue.applyMatrix4(this.matrixWorld);const Te=ee.ray.origin.distanceTo(ue);Te<ee.near||Te>ee.far||te.push({distance:Te,point:de.clone().applyMatrix4(this.matrixWorld),index:ve,face:null,faceIndex:null,object:this})}}else{const ge=Math.max(0,ae.start),_e=Math.min(xe.count,ae.start+ae.count);for(let ve=ge,ye=_e-1;ve<ye;ve+=fe){if(he.fromBufferAttribute(xe,ve),ce.fromBufferAttribute(xe,ve+1),_ray$1.distanceSqToSegment(he,ce,ue,de)>le)continue;ue.applyMatrix4(this.matrixWorld);const we=ee.ray.origin.distanceTo(ue);we<ee.near||we>ee.far||te.push({distance:we,point:de.clone().applyMatrix4(this.matrixWorld),index:ve,face:null,faceIndex:null,object:this})}}}else re.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const ee=this.geometry;if(ee.isBufferGeometry){const te=ee.morphAttributes,re=Object.keys(te);if(re.length>0){const ne=te[re[0]];if(ne!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let se=0,ae=ne.length;se<ae;se++){const oe=ne[se].name||String(se);this.morphTargetInfluences.push(0),this.morphTargetDictionary[oe]=se}}}}else{const te=ee.morphTargets;te!==void 0&&te.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Line.prototype.isLine=!0;const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(ee,te){super(ee,te),this.type="LineSegments"}computeLineDistances(){const ee=this.geometry;if(ee.isBufferGeometry)if(ee.index===null){const te=ee.attributes.position,re=[];for(let ne=0,se=te.count;ne<se;ne+=2)_start.fromBufferAttribute(te,ne),_end.fromBufferAttribute(te,ne+1),re[ne]=ne===0?0:re[ne-1],re[ne+1]=re[ne]+_start.distanceTo(_end);ee.setAttribute("lineDistance",new Float32BufferAttribute(re,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else ee.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}LineSegments.prototype.isLineSegments=!0;class LineLoop extends Line{constructor(ee,te){super(ee,te),this.type="LineLoop"}}LineLoop.prototype.isLineLoop=!0;class PointsMaterial extends Material{constructor(ee){super(),this.type="PointsMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(ee)}copy(ee){return super.copy(ee),this.color.copy(ee.color),this.map=ee.map,this.alphaMap=ee.alphaMap,this.size=ee.size,this.sizeAttenuation=ee.sizeAttenuation,this}}PointsMaterial.prototype.isPointsMaterial=!0;const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(ee=new BufferGeometry,te=new PointsMaterial){super(),this.type="Points",this.geometry=ee,this.material=te,this.updateMorphTargets()}copy(ee){return super.copy(ee),this.material=ee.material,this.geometry=ee.geometry,this}raycast(ee,te){const re=this.geometry,ne=this.matrixWorld,se=ee.params.Points.threshold,ae=re.drawRange;if(re.boundingSphere===null&&re.computeBoundingSphere(),_sphere.copy(re.boundingSphere),_sphere.applyMatrix4(ne),_sphere.radius+=se,ee.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(ne).invert(),_ray.copy(ee.ray).applyMatrix4(_inverseMatrix);const oe=se/((this.scale.x+this.scale.y+this.scale.z)/3),le=oe*oe;if(re.isBufferGeometry){const he=re.index,de=re.attributes.position;if(he!==null){const ue=Math.max(0,ae.start),fe=Math.min(he.count,ae.start+ae.count);for(let pe=ue,me=fe;pe<me;pe++){const xe=he.getX(pe);_position$2.fromBufferAttribute(de,xe),testPoint(_position$2,xe,le,ne,ee,te,this)}}else{const ue=Math.max(0,ae.start),fe=Math.min(de.count,ae.start+ae.count);for(let pe=ue,me=fe;pe<me;pe++)_position$2.fromBufferAttribute(de,pe),testPoint(_position$2,pe,le,ne,ee,te,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const ee=this.geometry;if(ee.isBufferGeometry){const te=ee.morphAttributes,re=Object.keys(te);if(re.length>0){const ne=te[re[0]];if(ne!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let se=0,ae=ne.length;se<ae;se++){const oe=ne[se].name||String(se);this.morphTargetInfluences.push(0),this.morphTargetDictionary[oe]=se}}}}else{const te=ee.morphTargets;te!==void 0&&te.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Points.prototype.isPoints=!0;function testPoint(ie,ee,te,re,ne,se,ae){const oe=_ray.distanceSqToPoint(ie);if(oe<te){const le=new Vector3;_ray.closestPointToPoint(ie,le),le.applyMatrix4(re);const he=ne.ray.origin.distanceTo(le);if(he<ne.near||he>ne.far)return;se.push({distance:he,distanceToRay:Math.sqrt(oe),point:le,index:ee,face:null,object:ae})}}class VideoTexture extends Texture$1{constructor(ee,te,re,ne,se,ae,oe,le,he){super(ee,te,re,ne,se,ae,oe,le,he),this.format=oe!==void 0?oe:RGBFormat,this.minFilter=ae!==void 0?ae:LinearFilter,this.magFilter=se!==void 0?se:LinearFilter,this.generateMipmaps=!1;const ce=this;function de(){ce.needsUpdate=!0,ee.requestVideoFrameCallback(de)}"requestVideoFrameCallback"in ee&&ee.requestVideoFrameCallback(de)}clone(){return new this.constructor(this.image).copy(this)}update(){const ee=this.image;"requestVideoFrameCallback"in ee===!1&&ee.readyState>=ee.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}VideoTexture.prototype.isVideoTexture=!0;class CompressedTexture extends Texture$1{constructor(ee,te,re,ne,se,ae,oe,le,he,ce,de,ue){super(null,ae,oe,le,he,ce,ne,se,de,ue),this.image={width:te,height:re},this.mipmaps=ee,this.flipY=!1,this.generateMipmaps=!1}}CompressedTexture.prototype.isCompressedTexture=!0;class CanvasTexture extends Texture$1{constructor(ee,te,re,ne,se,ae,oe,le,he){super(ee,te,re,ne,se,ae,oe,le,he),this.needsUpdate=!0}}CanvasTexture.prototype.isCanvasTexture=!0;class DepthTexture extends Texture$1{constructor(ee,te,re,ne,se,ae,oe,le,he,ce){if(ce=ce!==void 0?ce:DepthFormat,ce!==DepthFormat&&ce!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");re===void 0&&ce===DepthFormat&&(re=UnsignedShortType),re===void 0&&ce===DepthStencilFormat&&(re=UnsignedInt248Type),super(null,ne,se,ae,oe,le,ce,re,he),this.image={width:ee,height:te},this.magFilter=oe!==void 0?oe:NearestFilter,this.minFilter=le!==void 0?le:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}}DepthTexture.prototype.isDepthTexture=!0,new Vector3,new Vector3,new Vector3,new Triangle;class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(ee,te){const re=this.getUtoTmapping(ee);return this.getPoint(re,te)}getPoints(ee=5){const te=[];for(let re=0;re<=ee;re++)te.push(this.getPoint(re/ee));return te}getSpacedPoints(ee=5){const te=[];for(let re=0;re<=ee;re++)te.push(this.getPointAt(re/ee));return te}getLength(){const ee=this.getLengths();return ee[ee.length-1]}getLengths(ee=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===ee+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const te=[];let re,ne=this.getPoint(0),se=0;te.push(0);for(let ae=1;ae<=ee;ae++)re=this.getPoint(ae/ee),se+=re.distanceTo(ne),te.push(se),ne=re;return this.cacheArcLengths=te,te}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(ee,te){const re=this.getLengths();let ne=0;const se=re.length;let ae;te?ae=te:ae=ee*re[se-1];let oe=0,le=se-1,he;for(;oe<=le;)if(ne=Math.floor(oe+(le-oe)/2),he=re[ne]-ae,he<0)oe=ne+1;else if(he>0)le=ne-1;else{le=ne;break}if(ne=le,re[ne]===ae)return ne/(se-1);const ce=re[ne],ue=re[ne+1]-ce,fe=(ae-ce)/ue;return(ne+fe)/(se-1)}getTangent(ee,te){let ne=ee-1e-4,se=ee+1e-4;ne<0&&(ne=0),se>1&&(se=1);const ae=this.getPoint(ne),oe=this.getPoint(se),le=te||(ae.isVector2?new Vector2:new Vector3);return le.copy(oe).sub(ae).normalize(),le}getTangentAt(ee,te){const re=this.getUtoTmapping(ee);return this.getTangent(re,te)}computeFrenetFrames(ee,te){const re=new Vector3,ne=[],se=[],ae=[],oe=new Vector3,le=new Matrix4;for(let fe=0;fe<=ee;fe++){const pe=fe/ee;ne[fe]=this.getTangentAt(pe,new Vector3)}se[0]=new Vector3,ae[0]=new Vector3;let he=Number.MAX_VALUE;const ce=Math.abs(ne[0].x),de=Math.abs(ne[0].y),ue=Math.abs(ne[0].z);ce<=he&&(he=ce,re.set(1,0,0)),de<=he&&(he=de,re.set(0,1,0)),ue<=he&&re.set(0,0,1),oe.crossVectors(ne[0],re).normalize(),se[0].crossVectors(ne[0],oe),ae[0].crossVectors(ne[0],se[0]);for(let fe=1;fe<=ee;fe++){if(se[fe]=se[fe-1].clone(),ae[fe]=ae[fe-1].clone(),oe.crossVectors(ne[fe-1],ne[fe]),oe.length()>Number.EPSILON){oe.normalize();const pe=Math.acos(clamp$1(ne[fe-1].dot(ne[fe]),-1,1));se[fe].applyMatrix4(le.makeRotationAxis(oe,pe))}ae[fe].crossVectors(ne[fe],se[fe])}if(te===!0){let fe=Math.acos(clamp$1(se[0].dot(se[ee]),-1,1));fe/=ee,ne[0].dot(oe.crossVectors(se[0],se[ee]))>0&&(fe=-fe);for(let pe=1;pe<=ee;pe++)se[pe].applyMatrix4(le.makeRotationAxis(ne[pe],fe*pe)),ae[pe].crossVectors(ne[pe],se[pe])}return{tangents:ne,normals:se,binormals:ae}}clone(){return new this.constructor().copy(this)}copy(ee){return this.arcLengthDivisions=ee.arcLengthDivisions,this}toJSON(){const ee={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return ee.arcLengthDivisions=this.arcLengthDivisions,ee.type=this.type,ee}fromJSON(ee){return this.arcLengthDivisions=ee.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(ee=0,te=0,re=1,ne=1,se=0,ae=Math.PI*2,oe=!1,le=0){super(),this.type="EllipseCurve",this.aX=ee,this.aY=te,this.xRadius=re,this.yRadius=ne,this.aStartAngle=se,this.aEndAngle=ae,this.aClockwise=oe,this.aRotation=le}getPoint(ee,te){const re=te||new Vector2,ne=Math.PI*2;let se=this.aEndAngle-this.aStartAngle;const ae=Math.abs(se)<Number.EPSILON;for(;se<0;)se+=ne;for(;se>ne;)se-=ne;se<Number.EPSILON&&(ae?se=0:se=ne),this.aClockwise===!0&&!ae&&(se===ne?se=-ne:se=se-ne);const oe=this.aStartAngle+ee*se;let le=this.aX+this.xRadius*Math.cos(oe),he=this.aY+this.yRadius*Math.sin(oe);if(this.aRotation!==0){const ce=Math.cos(this.aRotation),de=Math.sin(this.aRotation),ue=le-this.aX,fe=he-this.aY;le=ue*ce-fe*de+this.aX,he=ue*de+fe*ce+this.aY}return re.set(le,he)}copy(ee){return super.copy(ee),this.aX=ee.aX,this.aY=ee.aY,this.xRadius=ee.xRadius,this.yRadius=ee.yRadius,this.aStartAngle=ee.aStartAngle,this.aEndAngle=ee.aEndAngle,this.aClockwise=ee.aClockwise,this.aRotation=ee.aRotation,this}toJSON(){const ee=super.toJSON();return ee.aX=this.aX,ee.aY=this.aY,ee.xRadius=this.xRadius,ee.yRadius=this.yRadius,ee.aStartAngle=this.aStartAngle,ee.aEndAngle=this.aEndAngle,ee.aClockwise=this.aClockwise,ee.aRotation=this.aRotation,ee}fromJSON(ee){return super.fromJSON(ee),this.aX=ee.aX,this.aY=ee.aY,this.xRadius=ee.xRadius,this.yRadius=ee.yRadius,this.aStartAngle=ee.aStartAngle,this.aEndAngle=ee.aEndAngle,this.aClockwise=ee.aClockwise,this.aRotation=ee.aRotation,this}}EllipseCurve.prototype.isEllipseCurve=!0;class ArcCurve extends EllipseCurve{constructor(ee,te,re,ne,se,ae){super(ee,te,re,re,ne,se,ae),this.type="ArcCurve"}}ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){let ie=0,ee=0,te=0,re=0;function ne(se,ae,oe,le){ie=se,ee=oe,te=-3*se+3*ae-2*oe-le,re=2*se-2*ae+oe+le}return{initCatmullRom:function(se,ae,oe,le,he){ne(ae,oe,he*(oe-se),he*(le-ae))},initNonuniformCatmullRom:function(se,ae,oe,le,he,ce,de){let ue=(ae-se)/he-(oe-se)/(he+ce)+(oe-ae)/ce,fe=(oe-ae)/ce-(le-ae)/(ce+de)+(le-oe)/de;ue*=ce,fe*=ce,ne(ae,oe,ue,fe)},calc:function(se){const ae=se*se,oe=ae*se;return ie+ee*se+te*ae+re*oe}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(ee=[],te=!1,re="centripetal",ne=.5){super(),this.type="CatmullRomCurve3",this.points=ee,this.closed=te,this.curveType=re,this.tension=ne}getPoint(ee,te=new Vector3){const re=te,ne=this.points,se=ne.length,ae=(se-(this.closed?0:1))*ee;let oe=Math.floor(ae),le=ae-oe;this.closed?oe+=oe>0?0:(Math.floor(Math.abs(oe)/se)+1)*se:le===0&&oe===se-1&&(oe=se-2,le=1);let he,ce;this.closed||oe>0?he=ne[(oe-1)%se]:(tmp.subVectors(ne[0],ne[1]).add(ne[0]),he=tmp);const de=ne[oe%se],ue=ne[(oe+1)%se];if(this.closed||oe+2<se?ce=ne[(oe+2)%se]:(tmp.subVectors(ne[se-1],ne[se-2]).add(ne[se-1]),ce=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const fe=this.curveType==="chordal"?.5:.25;let pe=Math.pow(he.distanceToSquared(de),fe),me=Math.pow(de.distanceToSquared(ue),fe),xe=Math.pow(ue.distanceToSquared(ce),fe);me<1e-4&&(me=1),pe<1e-4&&(pe=me),xe<1e-4&&(xe=me),px.initNonuniformCatmullRom(he.x,de.x,ue.x,ce.x,pe,me,xe),py.initNonuniformCatmullRom(he.y,de.y,ue.y,ce.y,pe,me,xe),pz.initNonuniformCatmullRom(he.z,de.z,ue.z,ce.z,pe,me,xe)}else this.curveType==="catmullrom"&&(px.initCatmullRom(he.x,de.x,ue.x,ce.x,this.tension),py.initCatmullRom(he.y,de.y,ue.y,ce.y,this.tension),pz.initCatmullRom(he.z,de.z,ue.z,ce.z,this.tension));return re.set(px.calc(le),py.calc(le),pz.calc(le)),re}copy(ee){super.copy(ee),this.points=[];for(let te=0,re=ee.points.length;te<re;te++){const ne=ee.points[te];this.points.push(ne.clone())}return this.closed=ee.closed,this.curveType=ee.curveType,this.tension=ee.tension,this}toJSON(){const ee=super.toJSON();ee.points=[];for(let te=0,re=this.points.length;te<re;te++){const ne=this.points[te];ee.points.push(ne.toArray())}return ee.closed=this.closed,ee.curveType=this.curveType,ee.tension=this.tension,ee}fromJSON(ee){super.fromJSON(ee),this.points=[];for(let te=0,re=ee.points.length;te<re;te++){const ne=ee.points[te];this.points.push(new Vector3().fromArray(ne))}return this.closed=ee.closed,this.curveType=ee.curveType,this.tension=ee.tension,this}}CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;function CatmullRom(ie,ee,te,re,ne){const se=(re-ee)*.5,ae=(ne-te)*.5,oe=ie*ie,le=ie*oe;return(2*te-2*re+se+ae)*le+(-3*te+3*re-2*se-ae)*oe+se*ie+te}function QuadraticBezierP0(ie,ee){const te=1-ie;return te*te*ee}function QuadraticBezierP1(ie,ee){return 2*(1-ie)*ie*ee}function QuadraticBezierP2(ie,ee){return ie*ie*ee}function QuadraticBezier(ie,ee,te,re){return QuadraticBezierP0(ie,ee)+QuadraticBezierP1(ie,te)+QuadraticBezierP2(ie,re)}function CubicBezierP0(ie,ee){const te=1-ie;return te*te*te*ee}function CubicBezierP1(ie,ee){const te=1-ie;return 3*te*te*ie*ee}function CubicBezierP2(ie,ee){return 3*(1-ie)*ie*ie*ee}function CubicBezierP3(ie,ee){return ie*ie*ie*ee}function CubicBezier(ie,ee,te,re,ne){return CubicBezierP0(ie,ee)+CubicBezierP1(ie,te)+CubicBezierP2(ie,re)+CubicBezierP3(ie,ne)}class CubicBezierCurve extends Curve{constructor(ee=new Vector2,te=new Vector2,re=new Vector2,ne=new Vector2){super(),this.type="CubicBezierCurve",this.v0=ee,this.v1=te,this.v2=re,this.v3=ne}getPoint(ee,te=new Vector2){const re=te,ne=this.v0,se=this.v1,ae=this.v2,oe=this.v3;return re.set(CubicBezier(ee,ne.x,se.x,ae.x,oe.x),CubicBezier(ee,ne.y,se.y,ae.y,oe.y)),re}copy(ee){return super.copy(ee),this.v0.copy(ee.v0),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this.v3.copy(ee.v3),this}toJSON(){const ee=super.toJSON();return ee.v0=this.v0.toArray(),ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee.v3=this.v3.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v0.fromArray(ee.v0),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this.v3.fromArray(ee.v3),this}}CubicBezierCurve.prototype.isCubicBezierCurve=!0;class CubicBezierCurve3 extends Curve{constructor(ee=new Vector3,te=new Vector3,re=new Vector3,ne=new Vector3){super(),this.type="CubicBezierCurve3",this.v0=ee,this.v1=te,this.v2=re,this.v3=ne}getPoint(ee,te=new Vector3){const re=te,ne=this.v0,se=this.v1,ae=this.v2,oe=this.v3;return re.set(CubicBezier(ee,ne.x,se.x,ae.x,oe.x),CubicBezier(ee,ne.y,se.y,ae.y,oe.y),CubicBezier(ee,ne.z,se.z,ae.z,oe.z)),re}copy(ee){return super.copy(ee),this.v0.copy(ee.v0),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this.v3.copy(ee.v3),this}toJSON(){const ee=super.toJSON();return ee.v0=this.v0.toArray(),ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee.v3=this.v3.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v0.fromArray(ee.v0),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this.v3.fromArray(ee.v3),this}}CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;class LineCurve extends Curve{constructor(ee=new Vector2,te=new Vector2){super(),this.type="LineCurve",this.v1=ee,this.v2=te}getPoint(ee,te=new Vector2){const re=te;return ee===1?re.copy(this.v2):(re.copy(this.v2).sub(this.v1),re.multiplyScalar(ee).add(this.v1)),re}getPointAt(ee,te){return this.getPoint(ee,te)}getTangent(ee,te){const re=te||new Vector2;return re.copy(this.v2).sub(this.v1).normalize(),re}copy(ee){return super.copy(ee),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this}toJSON(){const ee=super.toJSON();return ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this}}LineCurve.prototype.isLineCurve=!0;class LineCurve3 extends Curve{constructor(ee=new Vector3,te=new Vector3){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=ee,this.v2=te}getPoint(ee,te=new Vector3){const re=te;return ee===1?re.copy(this.v2):(re.copy(this.v2).sub(this.v1),re.multiplyScalar(ee).add(this.v1)),re}getPointAt(ee,te){return this.getPoint(ee,te)}copy(ee){return super.copy(ee),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this}toJSON(){const ee=super.toJSON();return ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this}}class QuadraticBezierCurve extends Curve{constructor(ee=new Vector2,te=new Vector2,re=new Vector2){super(),this.type="QuadraticBezierCurve",this.v0=ee,this.v1=te,this.v2=re}getPoint(ee,te=new Vector2){const re=te,ne=this.v0,se=this.v1,ae=this.v2;return re.set(QuadraticBezier(ee,ne.x,se.x,ae.x),QuadraticBezier(ee,ne.y,se.y,ae.y)),re}copy(ee){return super.copy(ee),this.v0.copy(ee.v0),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this}toJSON(){const ee=super.toJSON();return ee.v0=this.v0.toArray(),ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v0.fromArray(ee.v0),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this}}QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;class QuadraticBezierCurve3 extends Curve{constructor(ee=new Vector3,te=new Vector3,re=new Vector3){super(),this.type="QuadraticBezierCurve3",this.v0=ee,this.v1=te,this.v2=re}getPoint(ee,te=new Vector3){const re=te,ne=this.v0,se=this.v1,ae=this.v2;return re.set(QuadraticBezier(ee,ne.x,se.x,ae.x),QuadraticBezier(ee,ne.y,se.y,ae.y),QuadraticBezier(ee,ne.z,se.z,ae.z)),re}copy(ee){return super.copy(ee),this.v0.copy(ee.v0),this.v1.copy(ee.v1),this.v2.copy(ee.v2),this}toJSON(){const ee=super.toJSON();return ee.v0=this.v0.toArray(),ee.v1=this.v1.toArray(),ee.v2=this.v2.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.v0.fromArray(ee.v0),this.v1.fromArray(ee.v1),this.v2.fromArray(ee.v2),this}}QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;class SplineCurve extends Curve{constructor(ee=[]){super(),this.type="SplineCurve",this.points=ee}getPoint(ee,te=new Vector2){const re=te,ne=this.points,se=(ne.length-1)*ee,ae=Math.floor(se),oe=se-ae,le=ne[ae===0?ae:ae-1],he=ne[ae],ce=ne[ae>ne.length-2?ne.length-1:ae+1],de=ne[ae>ne.length-3?ne.length-1:ae+2];return re.set(CatmullRom(oe,le.x,he.x,ce.x,de.x),CatmullRom(oe,le.y,he.y,ce.y,de.y)),re}copy(ee){super.copy(ee),this.points=[];for(let te=0,re=ee.points.length;te<re;te++){const ne=ee.points[te];this.points.push(ne.clone())}return this}toJSON(){const ee=super.toJSON();ee.points=[];for(let te=0,re=this.points.length;te<re;te++){const ne=this.points[te];ee.points.push(ne.toArray())}return ee}fromJSON(ee){super.fromJSON(ee),this.points=[];for(let te=0,re=ee.points.length;te<re;te++){const ne=ee.points[te];this.points.push(new Vector2().fromArray(ne))}return this}}SplineCurve.prototype.isSplineCurve=!0;var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(ee){this.curves.push(ee)}closePath(){const ee=this.curves[0].getPoint(0),te=this.curves[this.curves.length-1].getPoint(1);ee.equals(te)||this.curves.push(new LineCurve(te,ee))}getPoint(ee,te){const re=ee*this.getLength(),ne=this.getCurveLengths();let se=0;for(;se<ne.length;){if(ne[se]>=re){const ae=ne[se]-re,oe=this.curves[se],le=oe.getLength(),he=le===0?0:1-ae/le;return oe.getPointAt(he,te)}se++}return null}getLength(){const ee=this.getCurveLengths();return ee[ee.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const ee=[];let te=0;for(let re=0,ne=this.curves.length;re<ne;re++)te+=this.curves[re].getLength(),ee.push(te);return this.cacheLengths=ee,ee}getSpacedPoints(ee=40){const te=[];for(let re=0;re<=ee;re++)te.push(this.getPoint(re/ee));return this.autoClose&&te.push(te[0]),te}getPoints(ee=12){const te=[];let re;for(let ne=0,se=this.curves;ne<se.length;ne++){const ae=se[ne],oe=ae&&ae.isEllipseCurve?ee*2:ae&&(ae.isLineCurve||ae.isLineCurve3)?1:ae&&ae.isSplineCurve?ee*ae.points.length:ee,le=ae.getPoints(oe);for(let he=0;he<le.length;he++){const ce=le[he];re&&re.equals(ce)||(te.push(ce),re=ce)}}return this.autoClose&&te.length>1&&!te[te.length-1].equals(te[0])&&te.push(te[0]),te}copy(ee){super.copy(ee),this.curves=[];for(let te=0,re=ee.curves.length;te<re;te++){const ne=ee.curves[te];this.curves.push(ne.clone())}return this.autoClose=ee.autoClose,this}toJSON(){const ee=super.toJSON();ee.autoClose=this.autoClose,ee.curves=[];for(let te=0,re=this.curves.length;te<re;te++){const ne=this.curves[te];ee.curves.push(ne.toJSON())}return ee}fromJSON(ee){super.fromJSON(ee),this.autoClose=ee.autoClose,this.curves=[];for(let te=0,re=ee.curves.length;te<re;te++){const ne=ee.curves[te];this.curves.push(new Curves[ne.type]().fromJSON(ne))}return this}}class Path extends CurvePath{constructor(ee){super(),this.type="Path",this.currentPoint=new Vector2,ee&&this.setFromPoints(ee)}setFromPoints(ee){this.moveTo(ee[0].x,ee[0].y);for(let te=1,re=ee.length;te<re;te++)this.lineTo(ee[te].x,ee[te].y);return this}moveTo(ee,te){return this.currentPoint.set(ee,te),this}lineTo(ee,te){const re=new LineCurve(this.currentPoint.clone(),new Vector2(ee,te));return this.curves.push(re),this.currentPoint.set(ee,te),this}quadraticCurveTo(ee,te,re,ne){const se=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(ee,te),new Vector2(re,ne));return this.curves.push(se),this.currentPoint.set(re,ne),this}bezierCurveTo(ee,te,re,ne,se,ae){const oe=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(ee,te),new Vector2(re,ne),new Vector2(se,ae));return this.curves.push(oe),this.currentPoint.set(se,ae),this}splineThru(ee){const te=[this.currentPoint.clone()].concat(ee),re=new SplineCurve(te);return this.curves.push(re),this.currentPoint.copy(ee[ee.length-1]),this}arc(ee,te,re,ne,se,ae){const oe=this.currentPoint.x,le=this.currentPoint.y;return this.absarc(ee+oe,te+le,re,ne,se,ae),this}absarc(ee,te,re,ne,se,ae){return this.absellipse(ee,te,re,re,ne,se,ae),this}ellipse(ee,te,re,ne,se,ae,oe,le){const he=this.currentPoint.x,ce=this.currentPoint.y;return this.absellipse(ee+he,te+ce,re,ne,se,ae,oe,le),this}absellipse(ee,te,re,ne,se,ae,oe,le){const he=new EllipseCurve(ee,te,re,ne,se,ae,oe,le);if(this.curves.length>0){const de=he.getPoint(0);de.equals(this.currentPoint)||this.lineTo(de.x,de.y)}this.curves.push(he);const ce=he.getPoint(1);return this.currentPoint.copy(ce),this}copy(ee){return super.copy(ee),this.currentPoint.copy(ee.currentPoint),this}toJSON(){const ee=super.toJSON();return ee.currentPoint=this.currentPoint.toArray(),ee}fromJSON(ee){return super.fromJSON(ee),this.currentPoint.fromArray(ee.currentPoint),this}}class Shape extends Path{constructor(ee){super(ee),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(ee){const te=[];for(let re=0,ne=this.holes.length;re<ne;re++)te[re]=this.holes[re].getPoints(ee);return te}extractPoints(ee){return{shape:this.getPoints(ee),holes:this.getPointsHoles(ee)}}copy(ee){super.copy(ee),this.holes=[];for(let te=0,re=ee.holes.length;te<re;te++){const ne=ee.holes[te];this.holes.push(ne.clone())}return this}toJSON(){const ee=super.toJSON();ee.uuid=this.uuid,ee.holes=[];for(let te=0,re=this.holes.length;te<re;te++){const ne=this.holes[te];ee.holes.push(ne.toJSON())}return ee}fromJSON(ee){super.fromJSON(ee),this.uuid=ee.uuid,this.holes=[];for(let te=0,re=ee.holes.length;te<re;te++){const ne=ee.holes[te];this.holes.push(new Path().fromJSON(ne))}return this}}const Earcut={triangulate:function(ie,ee,te=2){const re=ee&&ee.length,ne=re?ee[0]*te:ie.length;let se=linkedList$1(ie,0,ne,te,!0);const ae=[];if(!se||se.next===se.prev)return ae;let oe,le,he,ce,de,ue,fe;if(re&&(se=eliminateHoles$1(ie,ee,se,te)),ie.length>80*te){oe=he=ie[0],le=ce=ie[1];for(let pe=te;pe<ne;pe+=te)de=ie[pe],ue=ie[pe+1],de<oe&&(oe=de),ue<le&&(le=ue),de>he&&(he=de),ue>ce&&(ce=ue);fe=Math.max(he-oe,ce-le),fe=fe!==0?1/fe:0}return earcutLinked$1(se,ae,te,oe,le,fe),ae}};function linkedList$1(ie,ee,te,re,ne){let se,ae;if(ne===signedArea$1(ie,ee,te,re)>0)for(se=ee;se<te;se+=re)ae=insertNode$1(se,ie[se],ie[se+1],ae);else for(se=te-re;se>=ee;se-=re)ae=insertNode$1(se,ie[se],ie[se+1],ae);return ae&&equals$1(ae,ae.next)&&(removeNode$1(ae),ae=ae.next),ae}function filterPoints$1(ie,ee){if(!ie)return ie;ee||(ee=ie);let te=ie,re;do if(re=!1,!te.steiner&&(equals$1(te,te.next)||area$1(te.prev,te,te.next)===0)){if(removeNode$1(te),te=ee=te.prev,te===te.next)break;re=!0}else te=te.next;while(re||te!==ee);return ee}function earcutLinked$1(ie,ee,te,re,ne,se,ae){if(!ie)return;!ae&&se&&indexCurve$1(ie,re,ne,se);let oe=ie,le,he;for(;ie.prev!==ie.next;){if(le=ie.prev,he=ie.next,se?isEarHashed$1(ie,re,ne,se):isEar$1(ie)){ee.push(le.i/te),ee.push(ie.i/te),ee.push(he.i/te),removeNode$1(ie),ie=he.next,oe=he.next;continue}if(ie=he,ie===oe){ae?ae===1?(ie=cureLocalIntersections$1(filterPoints$1(ie),ee,te),earcutLinked$1(ie,ee,te,re,ne,se,2)):ae===2&&splitEarcut$1(ie,ee,te,re,ne,se):earcutLinked$1(filterPoints$1(ie),ee,te,re,ne,se,1);break}}}function isEar$1(ie){const ee=ie.prev,te=ie,re=ie.next;if(area$1(ee,te,re)>=0)return!1;let ne=ie.next.next;for(;ne!==ie.prev;){if(pointInTriangle$1(ee.x,ee.y,te.x,te.y,re.x,re.y,ne.x,ne.y)&&area$1(ne.prev,ne,ne.next)>=0)return!1;ne=ne.next}return!0}function isEarHashed$1(ie,ee,te,re){const ne=ie.prev,se=ie,ae=ie.next;if(area$1(ne,se,ae)>=0)return!1;const oe=ne.x<se.x?ne.x<ae.x?ne.x:ae.x:se.x<ae.x?se.x:ae.x,le=ne.y<se.y?ne.y<ae.y?ne.y:ae.y:se.y<ae.y?se.y:ae.y,he=ne.x>se.x?ne.x>ae.x?ne.x:ae.x:se.x>ae.x?se.x:ae.x,ce=ne.y>se.y?ne.y>ae.y?ne.y:ae.y:se.y>ae.y?se.y:ae.y,de=zOrder$1(oe,le,ee,te,re),ue=zOrder$1(he,ce,ee,te,re);let fe=ie.prevZ,pe=ie.nextZ;for(;fe&&fe.z>=de&&pe&&pe.z<=ue;){if(fe!==ie.prev&&fe!==ie.next&&pointInTriangle$1(ne.x,ne.y,se.x,se.y,ae.x,ae.y,fe.x,fe.y)&&area$1(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,pe!==ie.prev&&pe!==ie.next&&pointInTriangle$1(ne.x,ne.y,se.x,se.y,ae.x,ae.y,pe.x,pe.y)&&area$1(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;fe&&fe.z>=de;){if(fe!==ie.prev&&fe!==ie.next&&pointInTriangle$1(ne.x,ne.y,se.x,se.y,ae.x,ae.y,fe.x,fe.y)&&area$1(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;pe&&pe.z<=ue;){if(pe!==ie.prev&&pe!==ie.next&&pointInTriangle$1(ne.x,ne.y,se.x,se.y,ae.x,ae.y,pe.x,pe.y)&&area$1(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function cureLocalIntersections$1(ie,ee,te){let re=ie;do{const ne=re.prev,se=re.next.next;!equals$1(ne,se)&&intersects$1(ne,re,re.next,se)&&locallyInside$1(ne,se)&&locallyInside$1(se,ne)&&(ee.push(ne.i/te),ee.push(re.i/te),ee.push(se.i/te),removeNode$1(re),removeNode$1(re.next),re=ie=se),re=re.next}while(re!==ie);return filterPoints$1(re)}function splitEarcut$1(ie,ee,te,re,ne,se){let ae=ie;do{let oe=ae.next.next;for(;oe!==ae.prev;){if(ae.i!==oe.i&&isValidDiagonal$1(ae,oe)){let le=splitPolygon$1(ae,oe);ae=filterPoints$1(ae,ae.next),le=filterPoints$1(le,le.next),earcutLinked$1(ae,ee,te,re,ne,se),earcutLinked$1(le,ee,te,re,ne,se);return}oe=oe.next}ae=ae.next}while(ae!==ie)}function eliminateHoles$1(ie,ee,te,re){const ne=[];let se,ae,oe,le,he;for(se=0,ae=ee.length;se<ae;se++)oe=ee[se]*re,le=se<ae-1?ee[se+1]*re:ie.length,he=linkedList$1(ie,oe,le,re,!1),he===he.next&&(he.steiner=!0),ne.push(getLeftmost$1(he));for(ne.sort(compareX$1),se=0;se<ne.length;se++)eliminateHole$1(ne[se],te),te=filterPoints$1(te,te.next);return te}function compareX$1(ie,ee){return ie.x-ee.x}function eliminateHole$1(ie,ee){if(ee=findHoleBridge$1(ie,ee),ee){const te=splitPolygon$1(ee,ie);filterPoints$1(ee,ee.next),filterPoints$1(te,te.next)}}function findHoleBridge$1(ie,ee){let te=ee;const re=ie.x,ne=ie.y;let se=-1/0,ae;do{if(ne<=te.y&&ne>=te.next.y&&te.next.y!==te.y){const ue=te.x+(ne-te.y)*(te.next.x-te.x)/(te.next.y-te.y);if(ue<=re&&ue>se){if(se=ue,ue===re){if(ne===te.y)return te;if(ne===te.next.y)return te.next}ae=te.x<te.next.x?te:te.next}}te=te.next}while(te!==ee);if(!ae)return null;if(re===se)return ae;const oe=ae,le=ae.x,he=ae.y;let ce=1/0,de;te=ae;do re>=te.x&&te.x>=le&&re!==te.x&&pointInTriangle$1(ne<he?re:se,ne,le,he,ne<he?se:re,ne,te.x,te.y)&&(de=Math.abs(ne-te.y)/(re-te.x),locallyInside$1(te,ie)&&(de<ce||de===ce&&(te.x>ae.x||te.x===ae.x&&sectorContainsSector$1(ae,te)))&&(ae=te,ce=de)),te=te.next;while(te!==oe);return ae}function sectorContainsSector$1(ie,ee){return area$1(ie.prev,ie,ee.prev)<0&&area$1(ee.next,ie,ie.next)<0}function indexCurve$1(ie,ee,te,re){let ne=ie;do ne.z===null&&(ne.z=zOrder$1(ne.x,ne.y,ee,te,re)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==ie);ne.prevZ.nextZ=null,ne.prevZ=null,sortLinked$1(ne)}function sortLinked$1(ie){let ee,te,re,ne,se,ae,oe,le,he=1;do{for(te=ie,ie=null,se=null,ae=0;te;){for(ae++,re=te,oe=0,ee=0;ee<he&&(oe++,re=re.nextZ,!!re);ee++);for(le=he;oe>0||le>0&&re;)oe!==0&&(le===0||!re||te.z<=re.z)?(ne=te,te=te.nextZ,oe--):(ne=re,re=re.nextZ,le--),se?se.nextZ=ne:ie=ne,ne.prevZ=se,se=ne;te=re}se.nextZ=null,he*=2}while(ae>1);return ie}function zOrder$1(ie,ee,te,re,ne){return ie=32767*(ie-te)*ne,ee=32767*(ee-re)*ne,ie=(ie|ie<<8)&16711935,ie=(ie|ie<<4)&252645135,ie=(ie|ie<<2)&858993459,ie=(ie|ie<<1)&1431655765,ee=(ee|ee<<8)&16711935,ee=(ee|ee<<4)&252645135,ee=(ee|ee<<2)&858993459,ee=(ee|ee<<1)&1431655765,ie|ee<<1}function getLeftmost$1(ie){let ee=ie,te=ie;do(ee.x<te.x||ee.x===te.x&&ee.y<te.y)&&(te=ee),ee=ee.next;while(ee!==ie);return te}function pointInTriangle$1(ie,ee,te,re,ne,se,ae,oe){return(ne-ae)*(ee-oe)-(ie-ae)*(se-oe)>=0&&(ie-ae)*(re-oe)-(te-ae)*(ee-oe)>=0&&(te-ae)*(se-oe)-(ne-ae)*(re-oe)>=0}function isValidDiagonal$1(ie,ee){return ie.next.i!==ee.i&&ie.prev.i!==ee.i&&!intersectsPolygon$1(ie,ee)&&(locallyInside$1(ie,ee)&&locallyInside$1(ee,ie)&&middleInside$1(ie,ee)&&(area$1(ie.prev,ie,ee.prev)||area$1(ie,ee.prev,ee))||equals$1(ie,ee)&&area$1(ie.prev,ie,ie.next)>0&&area$1(ee.prev,ee,ee.next)>0)}function area$1(ie,ee,te){return(ee.y-ie.y)*(te.x-ee.x)-(ee.x-ie.x)*(te.y-ee.y)}function equals$1(ie,ee){return ie.x===ee.x&&ie.y===ee.y}function intersects$1(ie,ee,te,re){const ne=sign$2(area$1(ie,ee,te)),se=sign$2(area$1(ie,ee,re)),ae=sign$2(area$1(te,re,ie)),oe=sign$2(area$1(te,re,ee));return!!(ne!==se&&ae!==oe||ne===0&&onSegment$1(ie,te,ee)||se===0&&onSegment$1(ie,re,ee)||ae===0&&onSegment$1(te,ie,re)||oe===0&&onSegment$1(te,ee,re))}function onSegment$1(ie,ee,te){return ee.x<=Math.max(ie.x,te.x)&&ee.x>=Math.min(ie.x,te.x)&&ee.y<=Math.max(ie.y,te.y)&&ee.y>=Math.min(ie.y,te.y)}function sign$2(ie){return ie>0?1:ie<0?-1:0}function intersectsPolygon$1(ie,ee){let te=ie;do{if(te.i!==ie.i&&te.next.i!==ie.i&&te.i!==ee.i&&te.next.i!==ee.i&&intersects$1(te,te.next,ie,ee))return!0;te=te.next}while(te!==ie);return!1}function locallyInside$1(ie,ee){return area$1(ie.prev,ie,ie.next)<0?area$1(ie,ee,ie.next)>=0&&area$1(ie,ie.prev,ee)>=0:area$1(ie,ee,ie.prev)<0||area$1(ie,ie.next,ee)<0}function middleInside$1(ie,ee){let te=ie,re=!1;const ne=(ie.x+ee.x)/2,se=(ie.y+ee.y)/2;do te.y>se!=te.next.y>se&&te.next.y!==te.y&&ne<(te.next.x-te.x)*(se-te.y)/(te.next.y-te.y)+te.x&&(re=!re),te=te.next;while(te!==ie);return re}function splitPolygon$1(ie,ee){const te=new Node$1(ie.i,ie.x,ie.y),re=new Node$1(ee.i,ee.x,ee.y),ne=ie.next,se=ee.prev;return ie.next=ee,ee.prev=ie,te.next=ne,ne.prev=te,re.next=te,te.prev=re,se.next=re,re.prev=se,re}function insertNode$1(ie,ee,te,re){const ne=new Node$1(ie,ee,te);return re?(ne.next=re.next,ne.prev=re,re.next.prev=ne,re.next=ne):(ne.prev=ne,ne.next=ne),ne}function removeNode$1(ie){ie.next.prev=ie.prev,ie.prev.next=ie.next,ie.prevZ&&(ie.prevZ.nextZ=ie.nextZ),ie.nextZ&&(ie.nextZ.prevZ=ie.prevZ)}function Node$1(ie,ee,te){this.i=ie,this.x=ee,this.y=te,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea$1(ie,ee,te,re){let ne=0;for(let se=ee,ae=te-re;se<te;se+=re)ne+=(ie[ae]-ie[se])*(ie[se+1]+ie[ae+1]),ae=se;return ne}class ShapeUtils{static area(ee){const te=ee.length;let re=0;for(let ne=te-1,se=0;se<te;ne=se++)re+=ee[ne].x*ee[se].y-ee[se].x*ee[ne].y;return re*.5}static isClockWise(ee){return ShapeUtils.area(ee)<0}static triangulateShape(ee,te){const re=[],ne=[],se=[];removeDupEndPts(ee),addContour(re,ee);let ae=ee.length;te.forEach(removeDupEndPts);for(let le=0;le<te.length;le++)ne.push(ae),ae+=te[le].length,addContour(re,te[le]);const oe=Earcut.triangulate(re,ne);for(let le=0;le<oe.length;le+=3)se.push(oe.slice(le,le+3));return se}}function removeDupEndPts(ie){const ee=ie.length;ee>2&&ie[ee-1].equals(ie[0])&&ie.pop()}function addContour(ie,ee){for(let te=0;te<ee.length;te++)ie.push(ee[te].x),ie.push(ee[te].y)}class ExtrudeGeometry extends BufferGeometry{constructor(ee=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),te={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:ee,options:te},ee=Array.isArray(ee)?ee:[ee];const re=this,ne=[],se=[];for(let oe=0,le=ee.length;oe<le;oe++){const he=ee[oe];ae(he)}this.setAttribute("position",new Float32BufferAttribute(ne,3)),this.setAttribute("uv",new Float32BufferAttribute(se,2)),this.computeVertexNormals();function ae(oe){const le=[],he=te.curveSegments!==void 0?te.curveSegments:12,ce=te.steps!==void 0?te.steps:1;let de=te.depth!==void 0?te.depth:1,ue=te.bevelEnabled!==void 0?te.bevelEnabled:!0,fe=te.bevelThickness!==void 0?te.bevelThickness:.2,pe=te.bevelSize!==void 0?te.bevelSize:fe-.1,me=te.bevelOffset!==void 0?te.bevelOffset:0,xe=te.bevelSegments!==void 0?te.bevelSegments:3;const ge=te.extrudePath,_e=te.UVGenerator!==void 0?te.UVGenerator:WorldUVGenerator;te.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),de=te.amount);let ve,ye=!1,be,we,Se,Te;ge&&(ve=ge.getSpacedPoints(ce),ye=!0,ue=!1,be=ge.computeFrenetFrames(ce,!1),we=new Vector3,Se=new Vector3,Te=new Vector3),ue||(xe=0,fe=0,pe=0,me=0);const Pe=oe.extractPoints(he);let Be=Pe.shape;const Ce=Pe.holes;if(!ShapeUtils.isClockWise(Be)){Be=Be.reverse();for(let je=0,He=Ce.length;je<He;je++){const Qe=Ce[je];ShapeUtils.isClockWise(Qe)&&(Ce[je]=Qe.reverse())}}const Re=ShapeUtils.triangulateShape(Be,Ce),Le=Be;for(let je=0,He=Ce.length;je<He;je++){const Qe=Ce[je];Be=Be.concat(Qe)}function ke(je,He,Qe){return He||console.error("THREE.ExtrudeGeometry: vec does not exist"),He.clone().multiplyScalar(Qe).add(je)}const Me=Be.length,Ee=Re.length;function Ae(je,He,Qe){let St,gt,Oe;const Ve=je.x-He.x,Ze=je.y-He.y,mt=Qe.x-je.x,pt=Qe.y-je.y,Tt=Ve*Ve+Ze*Ze,Et=Ve*pt-Ze*mt;if(Math.abs(Et)>Number.EPSILON){const Mt=Math.sqrt(Tt),Rt=Math.sqrt(mt*mt+pt*pt),bt=He.x-Ze/Mt,Ue=He.y+Ve/Mt,xt=Qe.x-pt/Rt,ht=Qe.y+mt/Rt,At=((xt-bt)*pt-(ht-Ue)*mt)/(Ve*pt-Ze*mt);St=bt+Ve*At-je.x,gt=Ue+Ze*At-je.y;const Pt=St*St+gt*gt;if(Pt<=2)return new Vector2(St,gt);Oe=Math.sqrt(Pt/2)}else{let Mt=!1;Ve>Number.EPSILON?mt>Number.EPSILON&&(Mt=!0):Ve<-Number.EPSILON?mt<-Number.EPSILON&&(Mt=!0):Math.sign(Ze)===Math.sign(pt)&&(Mt=!0),Mt?(St=-Ze,gt=Ve,Oe=Math.sqrt(Tt)):(St=Ve,gt=Ze,Oe=Math.sqrt(Tt/2))}return new Vector2(St/Oe,gt/Oe)}const Ie=[];for(let je=0,He=Le.length,Qe=He-1,St=je+1;je<He;je++,Qe++,St++)Qe===He&&(Qe=0),St===He&&(St=0),Ie[je]=Ae(Le[je],Le[Qe],Le[St]);const Fe=[];let Ne,$e=Ie.concat();for(let je=0,He=Ce.length;je<He;je++){const Qe=Ce[je];Ne=[];for(let St=0,gt=Qe.length,Oe=gt-1,Ve=St+1;St<gt;St++,Oe++,Ve++)Oe===gt&&(Oe=0),Ve===gt&&(Ve=0),Ne[St]=Ae(Qe[St],Qe[Oe],Qe[Ve]);Fe.push(Ne),$e=$e.concat(Ne)}for(let je=0;je<xe;je++){const He=je/xe,Qe=fe*Math.cos(He*Math.PI/2),St=pe*Math.sin(He*Math.PI/2)+me;for(let gt=0,Oe=Le.length;gt<Oe;gt++){const Ve=ke(Le[gt],Ie[gt],St);dt(Ve.x,Ve.y,-Qe)}for(let gt=0,Oe=Ce.length;gt<Oe;gt++){const Ve=Ce[gt];Ne=Fe[gt];for(let Ze=0,mt=Ve.length;Ze<mt;Ze++){const pt=ke(Ve[Ze],Ne[Ze],St);dt(pt.x,pt.y,-Qe)}}}const ze=pe+me;for(let je=0;je<Me;je++){const He=ue?ke(Be[je],$e[je],ze):Be[je];ye?(Se.copy(be.normals[0]).multiplyScalar(He.x),we.copy(be.binormals[0]).multiplyScalar(He.y),Te.copy(ve[0]).add(Se).add(we),dt(Te.x,Te.y,Te.z)):dt(He.x,He.y,0)}for(let je=1;je<=ce;je++)for(let He=0;He<Me;He++){const Qe=ue?ke(Be[He],$e[He],ze):Be[He];ye?(Se.copy(be.normals[je]).multiplyScalar(Qe.x),we.copy(be.binormals[je]).multiplyScalar(Qe.y),Te.copy(ve[je]).add(Se).add(we),dt(Te.x,Te.y,Te.z)):dt(Qe.x,Qe.y,de/ce*je)}for(let je=xe-1;je>=0;je--){const He=je/xe,Qe=fe*Math.cos(He*Math.PI/2),St=pe*Math.sin(He*Math.PI/2)+me;for(let gt=0,Oe=Le.length;gt<Oe;gt++){const Ve=ke(Le[gt],Ie[gt],St);dt(Ve.x,Ve.y,de+Qe)}for(let gt=0,Oe=Ce.length;gt<Oe;gt++){const Ve=Ce[gt];Ne=Fe[gt];for(let Ze=0,mt=Ve.length;Ze<mt;Ze++){const pt=ke(Ve[Ze],Ne[Ze],St);ye?dt(pt.x,pt.y+ve[ce-1].y,ve[ce-1].x+Qe):dt(pt.x,pt.y,de+Qe)}}}Xe(),Je();function Xe(){const je=ne.length/3;if(ue){let He=0,Qe=Me*He;for(let St=0;St<Ee;St++){const gt=Re[St];yt(gt[2]+Qe,gt[1]+Qe,gt[0]+Qe)}He=ce+xe*2,Qe=Me*He;for(let St=0;St<Ee;St++){const gt=Re[St];yt(gt[0]+Qe,gt[1]+Qe,gt[2]+Qe)}}else{for(let He=0;He<Ee;He++){const Qe=Re[He];yt(Qe[2],Qe[1],Qe[0])}for(let He=0;He<Ee;He++){const Qe=Re[He];yt(Qe[0]+Me*ce,Qe[1]+Me*ce,Qe[2]+Me*ce)}}re.addGroup(je,ne.length/3-je,0)}function Je(){const je=ne.length/3;let He=0;We(Le,He),He+=Le.length;for(let Qe=0,St=Ce.length;Qe<St;Qe++){const gt=Ce[Qe];We(gt,He),He+=gt.length}re.addGroup(je,ne.length/3-je,1)}function We(je,He){let Qe=je.length;for(;--Qe>=0;){const St=Qe;let gt=Qe-1;gt<0&&(gt=je.length-1);for(let Oe=0,Ve=ce+xe*2;Oe<Ve;Oe++){const Ze=Me*Oe,mt=Me*(Oe+1),pt=He+St+Ze,Tt=He+gt+Ze,Et=He+gt+mt,Mt=He+St+mt;vt(pt,Tt,Et,Mt)}}}function dt(je,He,Qe){le.push(je),le.push(He),le.push(Qe)}function yt(je,He,Qe){at(je),at(He),at(Qe);const St=ne.length/3,gt=_e.generateTopUV(re,ne,St-3,St-2,St-1);_t(gt[0]),_t(gt[1]),_t(gt[2])}function vt(je,He,Qe,St){at(je),at(He),at(St),at(He),at(Qe),at(St);const gt=ne.length/3,Oe=_e.generateSideWallUV(re,ne,gt-6,gt-3,gt-2,gt-1);_t(Oe[0]),_t(Oe[1]),_t(Oe[3]),_t(Oe[1]),_t(Oe[2]),_t(Oe[3])}function at(je){ne.push(le[je*3+0]),ne.push(le[je*3+1]),ne.push(le[je*3+2])}function _t(je){se.push(je.x),se.push(je.y)}}}toJSON(){const ee=super.toJSON(),te=this.parameters.shapes,re=this.parameters.options;return toJSON$1(te,re,ee)}static fromJSON(ee,te){const re=[];for(let se=0,ae=ee.shapes.length;se<ae;se++){const oe=te[ee.shapes[se]];re.push(oe)}const ne=ee.options.extrudePath;return ne!==void 0&&(ee.options.extrudePath=new Curves[ne.type]().fromJSON(ne)),new ExtrudeGeometry(re,ee.options)}}const WorldUVGenerator={generateTopUV:function(ie,ee,te,re,ne){const se=ee[te*3],ae=ee[te*3+1],oe=ee[re*3],le=ee[re*3+1],he=ee[ne*3],ce=ee[ne*3+1];return[new Vector2(se,ae),new Vector2(oe,le),new Vector2(he,ce)]},generateSideWallUV:function(ie,ee,te,re,ne,se){const ae=ee[te*3],oe=ee[te*3+1],le=ee[te*3+2],he=ee[re*3],ce=ee[re*3+1],de=ee[re*3+2],ue=ee[ne*3],fe=ee[ne*3+1],pe=ee[ne*3+2],me=ee[se*3],xe=ee[se*3+1],ge=ee[se*3+2];return Math.abs(oe-ce)<Math.abs(ae-he)?[new Vector2(ae,1-le),new Vector2(he,1-de),new Vector2(ue,1-pe),new Vector2(me,1-ge)]:[new Vector2(oe,1-le),new Vector2(ce,1-de),new Vector2(fe,1-pe),new Vector2(xe,1-ge)]}};function toJSON$1(ie,ee,te){if(te.shapes=[],Array.isArray(ie))for(let re=0,ne=ie.length;re<ne;re++){const se=ie[re];te.shapes.push(se.uuid)}else te.shapes.push(ie.uuid);return ee.extrudePath!==void 0&&(te.options.extrudePath=ee.extrudePath.toJSON()),te}class ShapeGeometry extends BufferGeometry{constructor(ee=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),te=12){super(),this.type="ShapeGeometry",this.parameters={shapes:ee,curveSegments:te};const re=[],ne=[],se=[],ae=[];let oe=0,le=0;if(Array.isArray(ee)===!1)he(ee);else for(let ce=0;ce<ee.length;ce++)he(ee[ce]),this.addGroup(oe,le,ce),oe+=le,le=0;this.setIndex(re),this.setAttribute("position",new Float32BufferAttribute(ne,3)),this.setAttribute("normal",new Float32BufferAttribute(se,3)),this.setAttribute("uv",new Float32BufferAttribute(ae,2));function he(ce){const de=ne.length/3,ue=ce.extractPoints(te);let fe=ue.shape;const pe=ue.holes;ShapeUtils.isClockWise(fe)===!1&&(fe=fe.reverse());for(let xe=0,ge=pe.length;xe<ge;xe++){const _e=pe[xe];ShapeUtils.isClockWise(_e)===!0&&(pe[xe]=_e.reverse())}const me=ShapeUtils.triangulateShape(fe,pe);for(let xe=0,ge=pe.length;xe<ge;xe++){const _e=pe[xe];fe=fe.concat(_e)}for(let xe=0,ge=fe.length;xe<ge;xe++){const _e=fe[xe];ne.push(_e.x,_e.y,0),se.push(0,0,1),ae.push(_e.x,_e.y)}for(let xe=0,ge=me.length;xe<ge;xe++){const _e=me[xe],ve=_e[0]+de,ye=_e[1]+de,be=_e[2]+de;re.push(ve,ye,be),le+=3}}}toJSON(){const ee=super.toJSON(),te=this.parameters.shapes;return toJSON(te,ee)}static fromJSON(ee,te){const re=[];for(let ne=0,se=ee.shapes.length;ne<se;ne++){const ae=te[ee.shapes[ne]];re.push(ae)}return new ShapeGeometry(re,ee.curveSegments)}}function toJSON(ie,ee){if(ee.shapes=[],Array.isArray(ie))for(let te=0,re=ie.length;te<re;te++){const ne=ie[te];ee.shapes.push(ne.uuid)}else ee.shapes.push(ie.uuid);return ee}class ShadowMaterial extends Material{constructor(ee){super(),this.type="ShadowMaterial",this.color=new Color$1(0),this.transparent=!0,this.setValues(ee)}copy(ee){return super.copy(ee),this.color.copy(ee.color),this}}ShadowMaterial.prototype.isShadowMaterial=!0;class MeshStandardMaterial extends Material{constructor(ee){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color$1(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(ee)}copy(ee){return super.copy(ee),this.defines={STANDARD:""},this.color.copy(ee.color),this.roughness=ee.roughness,this.metalness=ee.metalness,this.map=ee.map,this.lightMap=ee.lightMap,this.lightMapIntensity=ee.lightMapIntensity,this.aoMap=ee.aoMap,this.aoMapIntensity=ee.aoMapIntensity,this.emissive.copy(ee.emissive),this.emissiveMap=ee.emissiveMap,this.emissiveIntensity=ee.emissiveIntensity,this.bumpMap=ee.bumpMap,this.bumpScale=ee.bumpScale,this.normalMap=ee.normalMap,this.normalMapType=ee.normalMapType,this.normalScale.copy(ee.normalScale),this.displacementMap=ee.displacementMap,this.displacementScale=ee.displacementScale,this.displacementBias=ee.displacementBias,this.roughnessMap=ee.roughnessMap,this.metalnessMap=ee.metalnessMap,this.alphaMap=ee.alphaMap,this.envMap=ee.envMap,this.envMapIntensity=ee.envMapIntensity,this.refractionRatio=ee.refractionRatio,this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this.wireframeLinecap=ee.wireframeLinecap,this.wireframeLinejoin=ee.wireframeLinejoin,this.flatShading=ee.flatShading,this}}MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(ee){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(te){this.ior=(1+.4*te)/(1-.4*te)}}),this.sheenColor=new Color$1(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Color$1(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color$1(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(ee)}get sheen(){return this._sheen}set sheen(ee){this._sheen>0!=ee>0&&this.version++,this._sheen=ee}get clearcoat(){return this._clearcoat}set clearcoat(ee){this._clearcoat>0!=ee>0&&this.version++,this._clearcoat=ee}get transmission(){return this._transmission}set transmission(ee){this._transmission>0!=ee>0&&this.version++,this._transmission=ee}copy(ee){return super.copy(ee),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=ee.clearcoat,this.clearcoatMap=ee.clearcoatMap,this.clearcoatRoughness=ee.clearcoatRoughness,this.clearcoatRoughnessMap=ee.clearcoatRoughnessMap,this.clearcoatNormalMap=ee.clearcoatNormalMap,this.clearcoatNormalScale.copy(ee.clearcoatNormalScale),this.ior=ee.ior,this.sheen=ee.sheen,this.sheenColor.copy(ee.sheenColor),this.sheenColorMap=ee.sheenColorMap,this.sheenRoughness=ee.sheenRoughness,this.sheenRoughnessMap=ee.sheenRoughnessMap,this.transmission=ee.transmission,this.transmissionMap=ee.transmissionMap,this.thickness=ee.thickness,this.thicknessMap=ee.thicknessMap,this.attenuationDistance=ee.attenuationDistance,this.attenuationColor.copy(ee.attenuationColor),this.specularIntensity=ee.specularIntensity,this.specularIntensityMap=ee.specularIntensityMap,this.specularColor.copy(ee.specularColor),this.specularColorMap=ee.specularColorMap,this}}MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;class MeshPhongMaterial extends Material{constructor(ee){super(),this.type="MeshPhongMaterial",this.color=new Color$1(16777215),this.specular=new Color$1(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(ee)}copy(ee){return super.copy(ee),this.color.copy(ee.color),this.specular.copy(ee.specular),this.shininess=ee.shininess,this.map=ee.map,this.lightMap=ee.lightMap,this.lightMapIntensity=ee.lightMapIntensity,this.aoMap=ee.aoMap,this.aoMapIntensity=ee.aoMapIntensity,this.emissive.copy(ee.emissive),this.emissiveMap=ee.emissiveMap,this.emissiveIntensity=ee.emissiveIntensity,this.bumpMap=ee.bumpMap,this.bumpScale=ee.bumpScale,this.normalMap=ee.normalMap,this.normalMapType=ee.normalMapType,this.normalScale.copy(ee.normalScale),this.displacementMap=ee.displacementMap,this.displacementScale=ee.displacementScale,this.displacementBias=ee.displacementBias,this.specularMap=ee.specularMap,this.alphaMap=ee.alphaMap,this.envMap=ee.envMap,this.combine=ee.combine,this.reflectivity=ee.reflectivity,this.refractionRatio=ee.refractionRatio,this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this.wireframeLinecap=ee.wireframeLinecap,this.wireframeLinejoin=ee.wireframeLinejoin,this.flatShading=ee.flatShading,this}}MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;class MeshToonMaterial extends Material{constructor(ee){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color$1(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(ee)}copy(ee){return super.copy(ee),this.color.copy(ee.color),this.map=ee.map,this.gradientMap=ee.gradientMap,this.lightMap=ee.lightMap,this.lightMapIntensity=ee.lightMapIntensity,this.aoMap=ee.aoMap,this.aoMapIntensity=ee.aoMapIntensity,this.emissive.copy(ee.emissive),this.emissiveMap=ee.emissiveMap,this.emissiveIntensity=ee.emissiveIntensity,this.bumpMap=ee.bumpMap,this.bumpScale=ee.bumpScale,this.normalMap=ee.normalMap,this.normalMapType=ee.normalMapType,this.normalScale.copy(ee.normalScale),this.displacementMap=ee.displacementMap,this.displacementScale=ee.displacementScale,this.displacementBias=ee.displacementBias,this.alphaMap=ee.alphaMap,this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this.wireframeLinecap=ee.wireframeLinecap,this.wireframeLinejoin=ee.wireframeLinejoin,this}}MeshToonMaterial.prototype.isMeshToonMaterial=!0;class MeshNormalMaterial extends Material{constructor(ee){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(ee)}copy(ee){return super.copy(ee),this.bumpMap=ee.bumpMap,this.bumpScale=ee.bumpScale,this.normalMap=ee.normalMap,this.normalMapType=ee.normalMapType,this.normalScale.copy(ee.normalScale),this.displacementMap=ee.displacementMap,this.displacementScale=ee.displacementScale,this.displacementBias=ee.displacementBias,this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this.flatShading=ee.flatShading,this}}MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;class MeshLambertMaterial extends Material{constructor(ee){super(),this.type="MeshLambertMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(ee)}copy(ee){return super.copy(ee),this.color.copy(ee.color),this.map=ee.map,this.lightMap=ee.lightMap,this.lightMapIntensity=ee.lightMapIntensity,this.aoMap=ee.aoMap,this.aoMapIntensity=ee.aoMapIntensity,this.emissive.copy(ee.emissive),this.emissiveMap=ee.emissiveMap,this.emissiveIntensity=ee.emissiveIntensity,this.specularMap=ee.specularMap,this.alphaMap=ee.alphaMap,this.envMap=ee.envMap,this.combine=ee.combine,this.reflectivity=ee.reflectivity,this.refractionRatio=ee.refractionRatio,this.wireframe=ee.wireframe,this.wireframeLinewidth=ee.wireframeLinewidth,this.wireframeLinecap=ee.wireframeLinecap,this.wireframeLinejoin=ee.wireframeLinejoin,this}}MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;class MeshMatcapMaterial extends Material{constructor(ee){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color$1(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(ee)}copy(ee){return super.copy(ee),this.defines={MATCAP:""},this.color.copy(ee.color),this.matcap=ee.matcap,this.map=ee.map,this.bumpMap=ee.bumpMap,this.bumpScale=ee.bumpScale,this.normalMap=ee.normalMap,this.normalMapType=ee.normalMapType,this.normalScale.copy(ee.normalScale),this.displacementMap=ee.displacementMap,this.displacementScale=ee.displacementScale,this.displacementBias=ee.displacementBias,this.alphaMap=ee.alphaMap,this.flatShading=ee.flatShading,this}}MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;class LineDashedMaterial extends LineBasicMaterial{constructor(ee){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(ee)}copy(ee){return super.copy(ee),this.scale=ee.scale,this.dashSize=ee.dashSize,this.gapSize=ee.gapSize,this}}LineDashedMaterial.prototype.isLineDashedMaterial=!0;const AnimationUtils={arraySlice:function(ie,ee,te){return AnimationUtils.isTypedArray(ie)?new ie.constructor(ie.subarray(ee,te!==void 0?te:ie.length)):ie.slice(ee,te)},convertArray:function(ie,ee,te){return!ie||!te&&ie.constructor===ee?ie:typeof ee.BYTES_PER_ELEMENT=="number"?new ee(ie):Array.prototype.slice.call(ie)},isTypedArray:function(ie){return ArrayBuffer.isView(ie)&&!(ie instanceof DataView)},getKeyframeOrder:function(ie){function ee(ne,se){return ie[ne]-ie[se]}const te=ie.length,re=new Array(te);for(let ne=0;ne!==te;++ne)re[ne]=ne;return re.sort(ee),re},sortedArray:function(ie,ee,te){const re=ie.length,ne=new ie.constructor(re);for(let se=0,ae=0;ae!==re;++se){const oe=te[se]*ee;for(let le=0;le!==ee;++le)ne[ae++]=ie[oe+le]}return ne},flattenJSON:function(ie,ee,te,re){let ne=1,se=ie[0];for(;se!==void 0&&se[re]===void 0;)se=ie[ne++];if(se===void 0)return;let ae=se[re];if(ae!==void 0)if(Array.isArray(ae))do ae=se[re],ae!==void 0&&(ee.push(se.time),te.push.apply(te,ae)),se=ie[ne++];while(se!==void 0);else if(ae.toArray!==void 0)do ae=se[re],ae!==void 0&&(ee.push(se.time),ae.toArray(te,te.length)),se=ie[ne++];while(se!==void 0);else do ae=se[re],ae!==void 0&&(ee.push(se.time),te.push(ae)),se=ie[ne++];while(se!==void 0)},subclip:function(ie,ee,te,re,ne=30){const se=ie.clone();se.name=ee;const ae=[];for(let le=0;le<se.tracks.length;++le){const he=se.tracks[le],ce=he.getValueSize(),de=[],ue=[];for(let fe=0;fe<he.times.length;++fe){const pe=he.times[fe]*ne;if(!(pe<te||pe>=re)){de.push(he.times[fe]);for(let me=0;me<ce;++me)ue.push(he.values[fe*ce+me])}}de.length!==0&&(he.times=AnimationUtils.convertArray(de,he.times.constructor),he.values=AnimationUtils.convertArray(ue,he.values.constructor),ae.push(he))}se.tracks=ae;let oe=1/0;for(let le=0;le<se.tracks.length;++le)oe>se.tracks[le].times[0]&&(oe=se.tracks[le].times[0]);for(let le=0;le<se.tracks.length;++le)se.tracks[le].shift(-1*oe);return se.resetDuration(),se},makeClipAdditive:function(ie,ee=0,te=ie,re=30){re<=0&&(re=30);const ne=te.tracks.length,se=ee/re;for(let ae=0;ae<ne;++ae){const oe=te.tracks[ae],le=oe.ValueTypeName;if(le==="bool"||le==="string")continue;const he=ie.tracks.find(function(ge){return ge.name===oe.name&&ge.ValueTypeName===le});if(he===void 0)continue;let ce=0;const de=oe.getValueSize();oe.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ce=de/3);let ue=0;const fe=he.getValueSize();he.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ue=fe/3);const pe=oe.times.length-1;let me;if(se<=oe.times[0]){const ge=ce,_e=de-ce;me=AnimationUtils.arraySlice(oe.values,ge,_e)}else if(se>=oe.times[pe]){const ge=pe*de+ce,_e=ge+de-ce;me=AnimationUtils.arraySlice(oe.values,ge,_e)}else{const ge=oe.createInterpolant(),_e=ce,ve=de-ce;ge.evaluate(se),me=AnimationUtils.arraySlice(ge.resultBuffer,_e,ve)}le==="quaternion"&&new Quaternion().fromArray(me).normalize().conjugate().toArray(me);const xe=he.times.length;for(let ge=0;ge<xe;++ge){const _e=ge*fe+ue;if(le==="quaternion")Quaternion.multiplyQuaternionsFlat(he.values,_e,me,0,he.values,_e);else{const ve=fe-ue*2;for(let ye=0;ye<ve;++ye)he.values[_e+ye]-=me[ye]}}}return ie.blendMode=AdditiveAnimationBlendMode,ie}};class Interpolant{constructor(ee,te,re,ne){this.parameterPositions=ee,this._cachedIndex=0,this.resultBuffer=ne!==void 0?ne:new te.constructor(re),this.sampleValues=te,this.valueSize=re,this.settings=null,this.DefaultSettings_={}}evaluate(ee){const te=this.parameterPositions;let re=this._cachedIndex,ne=te[re],se=te[re-1];e:{t:{let ae;i:{r:if(!(ee<ne)){for(let oe=re+2;;){if(ne===void 0){if(ee<se)break r;return re=te.length,this._cachedIndex=re,this.afterEnd_(re-1,ee,se)}if(re===oe)break;if(se=ne,ne=te[++re],ee<ne)break t}ae=te.length;break i}if(!(ee>=se)){const oe=te[1];ee<oe&&(re=2,se=oe);for(let le=re-2;;){if(se===void 0)return this._cachedIndex=0,this.beforeStart_(0,ee,ne);if(re===le)break;if(ne=se,se=te[--re-1],ee>=se)break t}ae=re,re=0;break i}break e}for(;re<ae;){const oe=re+ae>>>1;ee<te[oe]?ae=oe:re=oe+1}if(ne=te[re],se=te[re-1],se===void 0)return this._cachedIndex=0,this.beforeStart_(0,ee,ne);if(ne===void 0)return re=te.length,this._cachedIndex=re,this.afterEnd_(re-1,se,ee)}this._cachedIndex=re,this.intervalChanged_(re,se,ne)}return this.interpolate_(re,se,ee,ne)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(ee){const te=this.resultBuffer,re=this.sampleValues,ne=this.valueSize,se=ee*ne;for(let ae=0;ae!==ne;++ae)te[ae]=re[se+ae];return te}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Interpolant.prototype.beforeStart_=Interpolant.prototype.copySampleValue_,Interpolant.prototype.afterEnd_=Interpolant.prototype.copySampleValue_;class CubicInterpolant extends Interpolant{constructor(ee,te,re,ne){super(ee,te,re,ne),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(ee,te,re){const ne=this.parameterPositions;let se=ee-2,ae=ee+1,oe=ne[se],le=ne[ae];if(oe===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:se=ee,oe=2*te-re;break;case WrapAroundEnding:se=ne.length-2,oe=te+ne[se]-ne[se+1];break;default:se=ee,oe=re}if(le===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:ae=ee,le=2*re-te;break;case WrapAroundEnding:ae=1,le=re+ne[1]-ne[0];break;default:ae=ee-1,le=te}const he=(re-te)*.5,ce=this.valueSize;this._weightPrev=he/(te-oe),this._weightNext=he/(le-re),this._offsetPrev=se*ce,this._offsetNext=ae*ce}interpolate_(ee,te,re,ne){const se=this.resultBuffer,ae=this.sampleValues,oe=this.valueSize,le=ee*oe,he=le-oe,ce=this._offsetPrev,de=this._offsetNext,ue=this._weightPrev,fe=this._weightNext,pe=(re-te)/(ne-te),me=pe*pe,xe=me*pe,ge=-ue*xe+2*ue*me-ue*pe,_e=(1+ue)*xe+(-1.5-2*ue)*me+(-.5+ue)*pe+1,ve=(-1-fe)*xe+(1.5+fe)*me+.5*pe,ye=fe*xe-fe*me;for(let be=0;be!==oe;++be)se[be]=ge*ae[ce+be]+_e*ae[he+be]+ve*ae[le+be]+ye*ae[de+be];return se}}class LinearInterpolant extends Interpolant{constructor(ee,te,re,ne){super(ee,te,re,ne)}interpolate_(ee,te,re,ne){const se=this.resultBuffer,ae=this.sampleValues,oe=this.valueSize,le=ee*oe,he=le-oe,ce=(re-te)/(ne-te),de=1-ce;for(let ue=0;ue!==oe;++ue)se[ue]=ae[he+ue]*de+ae[le+ue]*ce;return se}}class DiscreteInterpolant extends Interpolant{constructor(ee,te,re,ne){super(ee,te,re,ne)}interpolate_(ee){return this.copySampleValue_(ee-1)}}class KeyframeTrack{constructor(ee,te,re,ne){if(ee===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(te===void 0||te.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+ee);this.name=ee,this.times=AnimationUtils.convertArray(te,this.TimeBufferType),this.values=AnimationUtils.convertArray(re,this.ValueBufferType),this.setInterpolation(ne||this.DefaultInterpolation)}static toJSON(ee){const te=ee.constructor;let re;if(te.toJSON!==this.toJSON)re=te.toJSON(ee);else{re={name:ee.name,times:AnimationUtils.convertArray(ee.times,Array),values:AnimationUtils.convertArray(ee.values,Array)};const ne=ee.getInterpolation();ne!==ee.DefaultInterpolation&&(re.interpolation=ne)}return re.type=ee.ValueTypeName,re}InterpolantFactoryMethodDiscrete(ee){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),ee)}InterpolantFactoryMethodLinear(ee){return new LinearInterpolant(this.times,this.values,this.getValueSize(),ee)}InterpolantFactoryMethodSmooth(ee){return new CubicInterpolant(this.times,this.values,this.getValueSize(),ee)}setInterpolation(ee){let te;switch(ee){case InterpolateDiscrete:te=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:te=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:te=this.InterpolantFactoryMethodSmooth;break}if(te===void 0){const re="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(ee!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(re);return console.warn("THREE.KeyframeTrack:",re),this}return this.createInterpolant=te,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(ee){if(ee!==0){const te=this.times;for(let re=0,ne=te.length;re!==ne;++re)te[re]+=ee}return this}scale(ee){if(ee!==1){const te=this.times;for(let re=0,ne=te.length;re!==ne;++re)te[re]*=ee}return this}trim(ee,te){const re=this.times,ne=re.length;let se=0,ae=ne-1;for(;se!==ne&&re[se]<ee;)++se;for(;ae!==-1&&re[ae]>te;)--ae;if(++ae,se!==0||ae!==ne){se>=ae&&(ae=Math.max(ae,1),se=ae-1);const oe=this.getValueSize();this.times=AnimationUtils.arraySlice(re,se,ae),this.values=AnimationUtils.arraySlice(this.values,se*oe,ae*oe)}return this}validate(){let ee=!0;const te=this.getValueSize();te-Math.floor(te)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),ee=!1);const re=this.times,ne=this.values,se=re.length;se===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),ee=!1);let ae=null;for(let oe=0;oe!==se;oe++){const le=re[oe];if(typeof le=="number"&&isNaN(le)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,oe,le),ee=!1;break}if(ae!==null&&ae>le){console.error("THREE.KeyframeTrack: Out of order keys.",this,oe,le,ae),ee=!1;break}ae=le}if(ne!==void 0&&AnimationUtils.isTypedArray(ne))for(let oe=0,le=ne.length;oe!==le;++oe){const he=ne[oe];if(isNaN(he)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,oe,he),ee=!1;break}}return ee}optimize(){const ee=AnimationUtils.arraySlice(this.times),te=AnimationUtils.arraySlice(this.values),re=this.getValueSize(),ne=this.getInterpolation()===InterpolateSmooth,se=ee.length-1;let ae=1;for(let oe=1;oe<se;++oe){let le=!1;const he=ee[oe],ce=ee[oe+1];if(he!==ce&&(oe!==1||he!==ee[0]))if(ne)le=!0;else{const de=oe*re,ue=de-re,fe=de+re;for(let pe=0;pe!==re;++pe){const me=te[de+pe];if(me!==te[ue+pe]||me!==te[fe+pe]){le=!0;break}}}if(le){if(oe!==ae){ee[ae]=ee[oe];const de=oe*re,ue=ae*re;for(let fe=0;fe!==re;++fe)te[ue+fe]=te[de+fe]}++ae}}if(se>0){ee[ae]=ee[se];for(let oe=se*re,le=ae*re,he=0;he!==re;++he)te[le+he]=te[oe+he];++ae}return ae!==ee.length?(this.times=AnimationUtils.arraySlice(ee,0,ae),this.values=AnimationUtils.arraySlice(te,0,ae*re)):(this.times=ee,this.values=te),this}clone(){const ee=AnimationUtils.arraySlice(this.times,0),te=AnimationUtils.arraySlice(this.values,0),re=this.constructor,ne=new re(this.name,ee,te);return ne.createInterpolant=this.createInterpolant,ne}}KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(ee,te,re,ne){super(ee,te,re,ne)}interpolate_(ee,te,re,ne){const se=this.resultBuffer,ae=this.sampleValues,oe=this.valueSize,le=(re-te)/(ne-te);let he=ee*oe;for(let ce=he+oe;he!==ce;he+=4)Quaternion.slerpFlat(se,0,ae,he-oe,ae,he,le);return se}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(ee){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),ee)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear,QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(ee,te=-1,re,ne=NormalAnimationBlendMode){this.name=ee,this.tracks=re,this.duration=te,this.blendMode=ne,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(ee){const te=[],re=ee.tracks,ne=1/(ee.fps||1);for(let ae=0,oe=re.length;ae!==oe;++ae)te.push(parseKeyframeTrack(re[ae]).scale(ne));const se=new this(ee.name,ee.duration,te,ee.blendMode);return se.uuid=ee.uuid,se}static toJSON(ee){const te=[],re=ee.tracks,ne={name:ee.name,duration:ee.duration,tracks:te,uuid:ee.uuid,blendMode:ee.blendMode};for(let se=0,ae=re.length;se!==ae;++se)te.push(KeyframeTrack.toJSON(re[se]));return ne}static CreateFromMorphTargetSequence(ee,te,re,ne){const se=te.length,ae=[];for(let oe=0;oe<se;oe++){let le=[],he=[];le.push((oe+se-1)%se,oe,(oe+1)%se),he.push(0,1,0);const ce=AnimationUtils.getKeyframeOrder(le);le=AnimationUtils.sortedArray(le,1,ce),he=AnimationUtils.sortedArray(he,1,ce),!ne&&le[0]===0&&(le.push(se),he.push(he[0])),ae.push(new NumberKeyframeTrack(".morphTargetInfluences["+te[oe].name+"]",le,he).scale(1/re))}return new this(ee,-1,ae)}static findByName(ee,te){let re=ee;if(!Array.isArray(ee)){const ne=ee;re=ne.geometry&&ne.geometry.animations||ne.animations}for(let ne=0;ne<re.length;ne++)if(re[ne].name===te)return re[ne];return null}static CreateClipsFromMorphTargetSequences(ee,te,re){const ne={},se=/^([\w-]*?)([\d]+)$/;for(let oe=0,le=ee.length;oe<le;oe++){const he=ee[oe],ce=he.name.match(se);if(ce&&ce.length>1){const de=ce[1];let ue=ne[de];ue||(ne[de]=ue=[]),ue.push(he)}}const ae=[];for(const oe in ne)ae.push(this.CreateFromMorphTargetSequence(oe,ne[oe],te,re));return ae}static parseAnimation(ee,te){if(!ee)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const re=function(de,ue,fe,pe,me){if(fe.length!==0){const xe=[],ge=[];AnimationUtils.flattenJSON(fe,xe,ge,pe),xe.length!==0&&me.push(new de(ue,xe,ge))}},ne=[],se=ee.name||"default",ae=ee.fps||30,oe=ee.blendMode;let le=ee.length||-1;const he=ee.hierarchy||[];for(let de=0;de<he.length;de++){const ue=he[de].keys;if(!(!ue||ue.length===0))if(ue[0].morphTargets){const fe={};let pe;for(pe=0;pe<ue.length;pe++)if(ue[pe].morphTargets)for(let me=0;me<ue[pe].morphTargets.length;me++)fe[ue[pe].morphTargets[me]]=-1;for(const me in fe){const xe=[],ge=[];for(let _e=0;_e!==ue[pe].morphTargets.length;++_e){const ve=ue[pe];xe.push(ve.time),ge.push(ve.morphTarget===me?1:0)}ne.push(new NumberKeyframeTrack(".morphTargetInfluence["+me+"]",xe,ge))}le=fe.length*(ae||1)}else{const fe=".bones["+te[de].name+"]";re(VectorKeyframeTrack,fe+".position",ue,"pos",ne),re(QuaternionKeyframeTrack,fe+".quaternion",ue,"rot",ne),re(VectorKeyframeTrack,fe+".scale",ue,"scl",ne)}}return ne.length===0?null:new this(se,le,ne,oe)}resetDuration(){const ee=this.tracks;let te=0;for(let re=0,ne=ee.length;re!==ne;++re){const se=this.tracks[re];te=Math.max(te,se.times[se.times.length-1])}return this.duration=te,this}trim(){for(let ee=0;ee<this.tracks.length;ee++)this.tracks[ee].trim(0,this.duration);return this}validate(){let ee=!0;for(let te=0;te<this.tracks.length;te++)ee=ee&&this.tracks[te].validate();return ee}optimize(){for(let ee=0;ee<this.tracks.length;ee++)this.tracks[ee].optimize();return this}clone(){const ee=[];for(let te=0;te<this.tracks.length;te++)ee.push(this.tracks[te].clone());return new this.constructor(this.name,this.duration,ee,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(ie){switch(ie.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+ie)}function parseKeyframeTrack(ie){if(ie.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const ee=getTrackTypeForValueTypeName(ie.type);if(ie.times===void 0){const te=[],re=[];AnimationUtils.flattenJSON(ie.keys,te,re,"value"),ie.times=te,ie.values=re}return ee.parse!==void 0?ee.parse(ie):new ee(ie.name,ie.times,ie.values,ie.interpolation)}const Cache$1={enabled:!1,files:{},add:function(ie,ee){this.enabled!==!1&&(this.files[ie]=ee)},get:function(ie){if(this.enabled!==!1)return this.files[ie]},remove:function(ie){delete this.files[ie]},clear:function(){this.files={}}};class LoadingManager{constructor(ee,te,re){const ne=this;let se=!1,ae=0,oe=0,le;const he=[];this.onStart=void 0,this.onLoad=ee,this.onProgress=te,this.onError=re,this.itemStart=function(ce){oe++,se===!1&&ne.onStart!==void 0&&ne.onStart(ce,ae,oe),se=!0},this.itemEnd=function(ce){ae++,ne.onProgress!==void 0&&ne.onProgress(ce,ae,oe),ae===oe&&(se=!1,ne.onLoad!==void 0&&ne.onLoad())},this.itemError=function(ce){ne.onError!==void 0&&ne.onError(ce)},this.resolveURL=function(ce){return le?le(ce):ce},this.setURLModifier=function(ce){return le=ce,this},this.addHandler=function(ce,de){return he.push(ce,de),this},this.removeHandler=function(ce){const de=he.indexOf(ce);return de!==-1&&he.splice(de,2),this},this.getHandler=function(ce){for(let de=0,ue=he.length;de<ue;de+=2){const fe=he[de],pe=he[de+1];if(fe.global&&(fe.lastIndex=0),fe.test(ce))return pe}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader$1{constructor(ee){this.manager=ee!==void 0?ee:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(ee,te){const re=this;return new Promise(function(ne,se){re.load(ee,ne,te,se)})}parse(){}setCrossOrigin(ee){return this.crossOrigin=ee,this}setWithCredentials(ee){return this.withCredentials=ee,this}setPath(ee){return this.path=ee,this}setResourcePath(ee){return this.resourcePath=ee,this}setRequestHeader(ee){return this.requestHeader=ee,this}}const loading={};class FileLoader extends Loader$1{constructor(ee){super(ee)}load(ee,te,re,ne){ee===void 0&&(ee=""),this.path!==void 0&&(ee=this.path+ee),ee=this.manager.resolveURL(ee);const se=Cache$1.get(ee);if(se!==void 0)return this.manager.itemStart(ee),setTimeout(()=>{te&&te(se),this.manager.itemEnd(ee)},0),se;if(loading[ee]!==void 0){loading[ee].push({onLoad:te,onProgress:re,onError:ne});return}loading[ee]=[],loading[ee].push({onLoad:te,onProgress:re,onError:ne});const ae=new Request(ee,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(ae).then(oe=>{if(oe.status===200||oe.status===0){oe.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const le=loading[ee],he=oe.body.getReader(),ce=oe.headers.get("Content-Length"),de=ce?parseInt(ce):0,ue=de!==0;let fe=0;return new ReadableStream({start(pe){me();function me(){he.read().then(({done:xe,value:ge})=>{if(xe)pe.close();else{fe+=ge.byteLength;const _e=new ProgressEvent("progress",{lengthComputable:ue,loaded:fe,total:de});for(let ve=0,ye=le.length;ve<ye;ve++){const be=le[ve];be.onProgress&&be.onProgress(_e)}pe.enqueue(ge),me()}})}}})}else throw Error(`fetch for "${oe.url}" responded with ${oe.status}: ${oe.statusText}`)}).then(oe=>{const le=new Response(oe);switch(this.responseType){case"arraybuffer":return le.arrayBuffer();case"blob":return le.blob();case"document":return le.text().then(he=>new DOMParser().parseFromString(he,this.mimeType));case"json":return le.json();default:return le.text()}}).then(oe=>{Cache$1.add(ee,oe);const le=loading[ee];delete loading[ee];for(let he=0,ce=le.length;he<ce;he++){const de=le[he];de.onLoad&&de.onLoad(oe)}this.manager.itemEnd(ee)}).catch(oe=>{const le=loading[ee];delete loading[ee];for(let he=0,ce=le.length;he<ce;he++){const de=le[he];de.onError&&de.onError(oe)}this.manager.itemError(ee),this.manager.itemEnd(ee)}),this.manager.itemStart(ee)}setResponseType(ee){return this.responseType=ee,this}setMimeType(ee){return this.mimeType=ee,this}}class ImageLoader extends Loader$1{constructor(ee){super(ee)}load(ee,te,re,ne){this.path!==void 0&&(ee=this.path+ee),ee=this.manager.resolveURL(ee);const se=this,ae=Cache$1.get(ee);if(ae!==void 0)return se.manager.itemStart(ee),setTimeout(function(){te&&te(ae),se.manager.itemEnd(ee)},0),ae;const oe=createElementNS("img");function le(){ce(),Cache$1.add(ee,this),te&&te(this),se.manager.itemEnd(ee)}function he(de){ce(),ne&&ne(de),se.manager.itemError(ee),se.manager.itemEnd(ee)}function ce(){oe.removeEventListener("load",le,!1),oe.removeEventListener("error",he,!1)}return oe.addEventListener("load",le,!1),oe.addEventListener("error",he,!1),ee.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(oe.crossOrigin=this.crossOrigin),se.manager.itemStart(ee),oe.src=ee,oe}}class CubeTextureLoader extends Loader$1{constructor(ee){super(ee)}load(ee,te,re,ne){const se=new CubeTexture,ae=new ImageLoader(this.manager);ae.setCrossOrigin(this.crossOrigin),ae.setPath(this.path);let oe=0;function le(he){ae.load(ee[he],function(ce){se.images[he]=ce,oe++,oe===6&&(se.needsUpdate=!0,te&&te(se))},void 0,ne)}for(let he=0;he<ee.length;++he)le(he);return se}}class TextureLoader extends Loader$1{constructor(ee){super(ee)}load(ee,te,re,ne){const se=new Texture$1,ae=new ImageLoader(this.manager);return ae.setCrossOrigin(this.crossOrigin),ae.setPath(this.path),ae.load(ee,function(oe){se.image=oe,se.needsUpdate=!0,te!==void 0&&te(se)},re,ne),se}}class Light extends Object3D{constructor(ee,te=1){super(),this.type="Light",this.color=new Color$1(ee),this.intensity=te}dispose(){}copy(ee){return super.copy(ee),this.color.copy(ee.color),this.intensity=ee.intensity,this}toJSON(ee){const te=super.toJSON(ee);return te.object.color=this.color.getHex(),te.object.intensity=this.intensity,this.groundColor!==void 0&&(te.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(te.object.distance=this.distance),this.angle!==void 0&&(te.object.angle=this.angle),this.decay!==void 0&&(te.object.decay=this.decay),this.penumbra!==void 0&&(te.object.penumbra=this.penumbra),this.shadow!==void 0&&(te.object.shadow=this.shadow.toJSON()),te}}Light.prototype.isLight=!0;class HemisphereLight extends Light{constructor(ee,te,re){super(ee,re),this.type="HemisphereLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color$1(te)}copy(ee){return Light.prototype.copy.call(this,ee),this.groundColor.copy(ee.groundColor),this}}HemisphereLight.prototype.isHemisphereLight=!0;const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(ee){this.camera=ee,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(ee){const te=this.camera,re=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(ee.matrixWorld),te.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(ee.target.matrixWorld),te.lookAt(_lookTarget$1),te.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),re.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),re.multiply(te.projectionMatrix),re.multiply(te.matrixWorldInverse)}getViewport(ee){return this._viewports[ee]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(ee){return this.camera=ee.camera.clone(),this.bias=ee.bias,this.radius=ee.radius,this.mapSize.copy(ee.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const ee={};return this.bias!==0&&(ee.bias=this.bias),this.normalBias!==0&&(ee.normalBias=this.normalBias),this.radius!==1&&(ee.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(ee.mapSize=this.mapSize.toArray()),ee.camera=this.camera.toJSON(!1).object,delete ee.camera.matrix,ee}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.focus=1}updateMatrices(ee){const te=this.camera,re=RAD2DEG*2*ee.angle*this.focus,ne=this.mapSize.width/this.mapSize.height,se=ee.distance||te.far;(re!==te.fov||ne!==te.aspect||se!==te.far)&&(te.fov=re,te.aspect=ne,te.far=se,te.updateProjectionMatrix()),super.updateMatrices(ee)}copy(ee){return super.copy(ee),this.focus=ee.focus,this}}SpotLightShadow.prototype.isSpotLightShadow=!0;class SpotLight extends Light{constructor(ee,te,re=0,ne=Math.PI/3,se=0,ae=1){super(ee,te),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.distance=re,this.angle=ne,this.penumbra=se,this.decay=ae,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(ee){this.intensity=ee/Math.PI}dispose(){this.shadow.dispose()}copy(ee){return super.copy(ee),this.distance=ee.distance,this.angle=ee.angle,this.penumbra=ee.penumbra,this.decay=ee.decay,this.target=ee.target.clone(),this.shadow=ee.shadow.clone(),this}}SpotLight.prototype.isSpotLight=!0;const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(ee,te=0){const re=this.camera,ne=this.matrix,se=ee.distance||re.far;se!==re.far&&(re.far=se,re.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(ee.matrixWorld),re.position.copy(_lightPositionWorld),_lookTarget.copy(re.position),_lookTarget.add(this._cubeDirections[te]),re.up.copy(this._cubeUps[te]),re.lookAt(_lookTarget),re.updateMatrixWorld(),ne.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}PointLightShadow.prototype.isPointLightShadow=!0;class PointLight extends Light{constructor(ee,te,re=0,ne=1){super(ee,te),this.type="PointLight",this.distance=re,this.decay=ne,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(ee){this.intensity=ee/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(ee){return super.copy(ee),this.distance=ee.distance,this.decay=ee.decay,this.shadow=ee.shadow.clone(),this}}PointLight.prototype.isPointLight=!0;class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500))}}DirectionalLightShadow.prototype.isDirectionalLightShadow=!0;class DirectionalLight extends Light{constructor(ee,te){super(ee,te),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(ee){return super.copy(ee),this.target=ee.target.clone(),this.shadow=ee.shadow.clone(),this}}DirectionalLight.prototype.isDirectionalLight=!0;class AmbientLight extends Light{constructor(ee,te){super(ee,te),this.type="AmbientLight"}}AmbientLight.prototype.isAmbientLight=!0;class RectAreaLight extends Light{constructor(ee,te,re=10,ne=10){super(ee,te),this.type="RectAreaLight",this.width=re,this.height=ne}get power(){return this.intensity*this.width*this.height*Math.PI}set power(ee){this.intensity=ee/(this.width*this.height*Math.PI)}copy(ee){return super.copy(ee),this.width=ee.width,this.height=ee.height,this}toJSON(ee){const te=super.toJSON(ee);return te.object.width=this.width,te.object.height=this.height,te}}RectAreaLight.prototype.isRectAreaLight=!0;class SphericalHarmonics3{constructor(){this.coefficients=[];for(let ee=0;ee<9;ee++)this.coefficients.push(new Vector3)}set(ee){for(let te=0;te<9;te++)this.coefficients[te].copy(ee[te]);return this}zero(){for(let ee=0;ee<9;ee++)this.coefficients[ee].set(0,0,0);return this}getAt(ee,te){const re=ee.x,ne=ee.y,se=ee.z,ae=this.coefficients;return te.copy(ae[0]).multiplyScalar(.282095),te.addScaledVector(ae[1],.488603*ne),te.addScaledVector(ae[2],.488603*se),te.addScaledVector(ae[3],.488603*re),te.addScaledVector(ae[4],1.092548*(re*ne)),te.addScaledVector(ae[5],1.092548*(ne*se)),te.addScaledVector(ae[6],.315392*(3*se*se-1)),te.addScaledVector(ae[7],1.092548*(re*se)),te.addScaledVector(ae[8],.546274*(re*re-ne*ne)),te}getIrradianceAt(ee,te){const re=ee.x,ne=ee.y,se=ee.z,ae=this.coefficients;return te.copy(ae[0]).multiplyScalar(.886227),te.addScaledVector(ae[1],2*.511664*ne),te.addScaledVector(ae[2],2*.511664*se),te.addScaledVector(ae[3],2*.511664*re),te.addScaledVector(ae[4],2*.429043*re*ne),te.addScaledVector(ae[5],2*.429043*ne*se),te.addScaledVector(ae[6],.743125*se*se-.247708),te.addScaledVector(ae[7],2*.429043*re*se),te.addScaledVector(ae[8],.429043*(re*re-ne*ne)),te}add(ee){for(let te=0;te<9;te++)this.coefficients[te].add(ee.coefficients[te]);return this}addScaledSH(ee,te){for(let re=0;re<9;re++)this.coefficients[re].addScaledVector(ee.coefficients[re],te);return this}scale(ee){for(let te=0;te<9;te++)this.coefficients[te].multiplyScalar(ee);return this}lerp(ee,te){for(let re=0;re<9;re++)this.coefficients[re].lerp(ee.coefficients[re],te);return this}equals(ee){for(let te=0;te<9;te++)if(!this.coefficients[te].equals(ee.coefficients[te]))return!1;return!0}copy(ee){return this.set(ee.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(ee,te=0){const re=this.coefficients;for(let ne=0;ne<9;ne++)re[ne].fromArray(ee,te+ne*3);return this}toArray(ee=[],te=0){const re=this.coefficients;for(let ne=0;ne<9;ne++)re[ne].toArray(ee,te+ne*3);return ee}static getBasisAt(ee,te){const re=ee.x,ne=ee.y,se=ee.z;te[0]=.282095,te[1]=.488603*ne,te[2]=.488603*se,te[3]=.488603*re,te[4]=1.092548*re*ne,te[5]=1.092548*ne*se,te[6]=.315392*(3*se*se-1),te[7]=1.092548*re*se,te[8]=.546274*(re*re-ne*ne)}}SphericalHarmonics3.prototype.isSphericalHarmonics3=!0;class LightProbe extends Light{constructor(ee=new SphericalHarmonics3,te=1){super(void 0,te),this.sh=ee}copy(ee){return super.copy(ee),this.sh.copy(ee.sh),this}fromJSON(ee){return this.intensity=ee.intensity,this.sh.fromArray(ee.sh),this}toJSON(ee){const te=super.toJSON(ee);return te.object.sh=this.sh.toArray(),te}}LightProbe.prototype.isLightProbe=!0;class LoaderUtils{static decodeText(ee){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(ee);let te="";for(let re=0,ne=ee.length;re<ne;re++)te+=String.fromCharCode(ee[re]);try{return decodeURIComponent(escape(te))}catch{return te}}static extractUrlBase(ee){const te=ee.lastIndexOf("/");return te===-1?"./":ee.substr(0,te+1)}static resolveURL(ee,te){return typeof ee!="string"||ee===""?"":(/^https?:\/\//i.test(te)&&/^\//.test(ee)&&(te=te.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(ee)||/^data:.*,.*$/i.test(ee)||/^blob:.*$/i.test(ee)?ee:te+ee)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(ee){return super.copy(ee),this.instanceCount=ee.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const ee=super.toJSON(this);return ee.instanceCount=this.instanceCount,ee.isInstancedBufferGeometry=!0,ee}}InstancedBufferGeometry.prototype.isInstancedBufferGeometry=!0;class ImageBitmapLoader extends Loader$1{constructor(ee){super(ee),typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(ee){return this.options=ee,this}load(ee,te,re,ne){ee===void 0&&(ee=""),this.path!==void 0&&(ee=this.path+ee),ee=this.manager.resolveURL(ee);const se=this,ae=Cache$1.get(ee);if(ae!==void 0)return se.manager.itemStart(ee),setTimeout(function(){te&&te(ae),se.manager.itemEnd(ee)},0),ae;const oe={};oe.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",oe.headers=this.requestHeader,fetch(ee,oe).then(function(le){return le.blob()}).then(function(le){return createImageBitmap(le,Object.assign(se.options,{colorSpaceConversion:"none"}))}).then(function(le){Cache$1.add(ee,le),te&&te(le),se.manager.itemEnd(ee)}).catch(function(le){ne&&ne(le),se.manager.itemError(ee),se.manager.itemEnd(ee)}),se.manager.itemStart(ee)}}ImageBitmapLoader.prototype.isImageBitmapLoader=!0;let _context;const AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(ie){_context=ie}};class AudioLoader extends Loader$1{constructor(ee){super(ee)}load(ee,te,re,ne){const se=this,ae=new FileLoader(this.manager);ae.setResponseType("arraybuffer"),ae.setPath(this.path),ae.setRequestHeader(this.requestHeader),ae.setWithCredentials(this.withCredentials),ae.load(ee,function(oe){try{const le=oe.slice(0);AudioContext.getContext().decodeAudioData(le,function(ce){te(ce)})}catch(le){ne?ne(le):console.error(le),se.manager.itemError(ee)}},re,ne)}}class HemisphereLightProbe extends LightProbe{constructor(ee,te,re=1){super(void 0,re);const ne=new Color$1().set(ee),se=new Color$1().set(te),ae=new Vector3(ne.r,ne.g,ne.b),oe=new Vector3(se.r,se.g,se.b),le=Math.sqrt(Math.PI),he=le*Math.sqrt(.75);this.sh.coefficients[0].copy(ae).add(oe).multiplyScalar(le),this.sh.coefficients[1].copy(ae).sub(oe).multiplyScalar(he)}}HemisphereLightProbe.prototype.isHemisphereLightProbe=!0;class AmbientLightProbe extends LightProbe{constructor(ee,te=1){super(void 0,te);const re=new Color$1().set(ee);this.sh.coefficients[0].set(re.r,re.g,re.b).multiplyScalar(2*Math.sqrt(Math.PI))}}AmbientLightProbe.prototype.isAmbientLightProbe=!0;class Audio$1 extends Object3D{constructor(ee){super(),this.type="Audio",this.listener=ee,this.context=ee.context,this.gain=this.context.createGain(),this.gain.connect(ee.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(ee){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=ee,this.connect(),this}setMediaElementSource(ee){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(ee),this.connect(),this}setMediaStreamSource(ee){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(ee),this.connect(),this}setBuffer(ee){return this.buffer=ee,this.sourceType="buffer",this.autoplay&&this.play(),this}play(ee=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+ee;const te=this.context.createBufferSource();return te.buffer=this.buffer,te.loop=this.loop,te.loopStart=this.loopStart,te.loopEnd=this.loopEnd,te.onended=this.onEnded.bind(this),te.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=te,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let ee=1,te=this.filters.length;ee<te;ee++)this.filters[ee-1].connect(this.filters[ee]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let ee=1,te=this.filters.length;ee<te;ee++)this.filters[ee-1].disconnect(this.filters[ee]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(ee){return ee||(ee=[]),this._connected===!0?(this.disconnect(),this.filters=ee.slice(),this.connect()):this.filters=ee.slice(),this}setDetune(ee){if(this.detune=ee,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(ee){return this.setFilters(ee?[ee]:[])}setPlaybackRate(ee){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=ee,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(ee){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=ee,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(ee){return this.loopStart=ee,this}setLoopEnd(ee){return this.loopEnd=ee,this}getVolume(){return this.gain.gain.value}setVolume(ee){return this.gain.gain.setTargetAtTime(ee,this.context.currentTime,.01),this}}class PropertyMixer{constructor(ee,te,re){this.binding=ee,this.valueSize=re;let ne,se,ae;switch(te){case"quaternion":ne=this._slerp,se=this._slerpAdditive,ae=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(re*6),this._workIndex=5;break;case"string":case"bool":ne=this._select,se=this._select,ae=this._setAdditiveIdentityOther,this.buffer=new Array(re*5);break;default:ne=this._lerp,se=this._lerpAdditive,ae=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(re*5)}this._mixBufferRegion=ne,this._mixBufferRegionAdditive=se,this._setIdentity=ae,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(ee,te){const re=this.buffer,ne=this.valueSize,se=ee*ne+ne;let ae=this.cumulativeWeight;if(ae===0){for(let oe=0;oe!==ne;++oe)re[se+oe]=re[oe];ae=te}else{ae+=te;const oe=te/ae;this._mixBufferRegion(re,se,0,oe,ne)}this.cumulativeWeight=ae}accumulateAdditive(ee){const te=this.buffer,re=this.valueSize,ne=re*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(te,ne,0,ee,re),this.cumulativeWeightAdditive+=ee}apply(ee){const te=this.valueSize,re=this.buffer,ne=ee*te+te,se=this.cumulativeWeight,ae=this.cumulativeWeightAdditive,oe=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,se<1){const le=te*this._origIndex;this._mixBufferRegion(re,ne,le,1-se,te)}ae>0&&this._mixBufferRegionAdditive(re,ne,this._addIndex*te,1,te);for(let le=te,he=te+te;le!==he;++le)if(re[le]!==re[le+te]){oe.setValue(re,ne);break}}saveOriginalState(){const ee=this.binding,te=this.buffer,re=this.valueSize,ne=re*this._origIndex;ee.getValue(te,ne);for(let se=re,ae=ne;se!==ae;++se)te[se]=te[ne+se%re];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const ee=this.valueSize*3;this.binding.setValue(this.buffer,ee)}_setAdditiveIdentityNumeric(){const ee=this._addIndex*this.valueSize,te=ee+this.valueSize;for(let re=ee;re<te;re++)this.buffer[re]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const ee=this._origIndex*this.valueSize,te=this._addIndex*this.valueSize;for(let re=0;re<this.valueSize;re++)this.buffer[te+re]=this.buffer[ee+re]}_select(ee,te,re,ne,se){if(ne>=.5)for(let ae=0;ae!==se;++ae)ee[te+ae]=ee[re+ae]}_slerp(ee,te,re,ne){Quaternion.slerpFlat(ee,te,ee,te,ee,re,ne)}_slerpAdditive(ee,te,re,ne,se){const ae=this._workIndex*se;Quaternion.multiplyQuaternionsFlat(ee,ae,ee,te,ee,re),Quaternion.slerpFlat(ee,te,ee,te,ee,ae,ne)}_lerp(ee,te,re,ne,se){const ae=1-ne;for(let oe=0;oe!==se;++oe){const le=te+oe;ee[le]=ee[le]*ae+ee[re+oe]*ne}}_lerpAdditive(ee,te,re,ne,se){for(let ae=0;ae!==se;++ae){const oe=te+ae;ee[oe]=ee[oe]+ee[re+ae]*ne}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];class Composite{constructor(ee,te,re){const ne=re||PropertyBinding.parseTrackName(te);this._targetGroup=ee,this._bindings=ee.subscribe_(te,ne)}getValue(ee,te){this.bind();const re=this._targetGroup.nCachedObjects_,ne=this._bindings[re];ne!==void 0&&ne.getValue(ee,te)}setValue(ee,te){const re=this._bindings;for(let ne=this._targetGroup.nCachedObjects_,se=re.length;ne!==se;++ne)re[ne].setValue(ee,te)}bind(){const ee=this._bindings;for(let te=this._targetGroup.nCachedObjects_,re=ee.length;te!==re;++te)ee[te].bind()}unbind(){const ee=this._bindings;for(let te=this._targetGroup.nCachedObjects_,re=ee.length;te!==re;++te)ee[te].unbind()}}class PropertyBinding{constructor(ee,te,re){this.path=te,this.parsedPath=re||PropertyBinding.parseTrackName(te),this.node=PropertyBinding.findNode(ee,this.parsedPath.nodeName)||ee,this.rootNode=ee,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(ee,te,re){return ee&&ee.isAnimationObjectGroup?new PropertyBinding.Composite(ee,te,re):new PropertyBinding(ee,te,re)}static sanitizeNodeName(ee){return ee.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(ee){const te=_trackRe.exec(ee);if(!te)throw new Error("PropertyBinding: Cannot parse trackName: "+ee);const re={nodeName:te[2],objectName:te[3],objectIndex:te[4],propertyName:te[5],propertyIndex:te[6]},ne=re.nodeName&&re.nodeName.lastIndexOf(".");if(ne!==void 0&&ne!==-1){const se=re.nodeName.substring(ne+1);_supportedObjectNames.indexOf(se)!==-1&&(re.nodeName=re.nodeName.substring(0,ne),re.objectName=se)}if(re.propertyName===null||re.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+ee);return re}static findNode(ee,te){if(!te||te===""||te==="."||te===-1||te===ee.name||te===ee.uuid)return ee;if(ee.skeleton){const re=ee.skeleton.getBoneByName(te);if(re!==void 0)return re}if(ee.children){const re=function(se){for(let ae=0;ae<se.length;ae++){const oe=se[ae];if(oe.name===te||oe.uuid===te)return oe;const le=re(oe.children);if(le)return le}return null},ne=re(ee.children);if(ne)return ne}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(ee,te){ee[te]=this.targetObject[this.propertyName]}_getValue_array(ee,te){const re=this.resolvedProperty;for(let ne=0,se=re.length;ne!==se;++ne)ee[te++]=re[ne]}_getValue_arrayElement(ee,te){ee[te]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(ee,te){this.resolvedProperty.toArray(ee,te)}_setValue_direct(ee,te){this.targetObject[this.propertyName]=ee[te]}_setValue_direct_setNeedsUpdate(ee,te){this.targetObject[this.propertyName]=ee[te],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(ee,te){this.targetObject[this.propertyName]=ee[te],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(ee,te){const re=this.resolvedProperty;for(let ne=0,se=re.length;ne!==se;++ne)re[ne]=ee[te++]}_setValue_array_setNeedsUpdate(ee,te){const re=this.resolvedProperty;for(let ne=0,se=re.length;ne!==se;++ne)re[ne]=ee[te++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(ee,te){const re=this.resolvedProperty;for(let ne=0,se=re.length;ne!==se;++ne)re[ne]=ee[te++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(ee,te){this.resolvedProperty[this.propertyIndex]=ee[te]}_setValue_arrayElement_setNeedsUpdate(ee,te){this.resolvedProperty[this.propertyIndex]=ee[te],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(ee,te){this.resolvedProperty[this.propertyIndex]=ee[te],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(ee,te){this.resolvedProperty.fromArray(ee,te)}_setValue_fromArray_setNeedsUpdate(ee,te){this.resolvedProperty.fromArray(ee,te),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(ee,te){this.resolvedProperty.fromArray(ee,te),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(ee,te){this.bind(),this.getValue(ee,te)}_setValue_unbound(ee,te){this.bind(),this.setValue(ee,te)}bind(){let ee=this.node;const te=this.parsedPath,re=te.objectName,ne=te.propertyName;let se=te.propertyIndex;if(ee||(ee=PropertyBinding.findNode(this.rootNode,te.nodeName)||this.rootNode,this.node=ee),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!ee){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(re){let he=te.objectIndex;switch(re){case"materials":if(!ee.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!ee.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}ee=ee.material.materials;break;case"bones":if(!ee.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}ee=ee.skeleton.bones;for(let ce=0;ce<ee.length;ce++)if(ee[ce].name===he){he=ce;break}break;default:if(ee[re]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}ee=ee[re]}if(he!==void 0){if(ee[he]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,ee);return}ee=ee[he]}}const ae=ee[ne];if(ae===void 0){const he=te.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+he+"."+ne+" but it wasn't found.",ee);return}let oe=this.Versioning.None;this.targetObject=ee,ee.needsUpdate!==void 0?oe=this.Versioning.NeedsUpdate:ee.matrixWorldNeedsUpdate!==void 0&&(oe=this.Versioning.MatrixWorldNeedsUpdate);let le=this.BindingType.Direct;if(se!==void 0){if(ne==="morphTargetInfluences"){if(!ee.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(ee.geometry.isBufferGeometry){if(!ee.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}ee.morphTargetDictionary[se]!==void 0&&(se=ee.morphTargetDictionary[se])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}le=this.BindingType.ArrayElement,this.resolvedProperty=ae,this.propertyIndex=se}else ae.fromArray!==void 0&&ae.toArray!==void 0?(le=this.BindingType.HasFromToArray,this.resolvedProperty=ae):Array.isArray(ae)?(le=this.BindingType.EntireArray,this.resolvedProperty=ae):this.propertyName=ne;this.getValue=this.GetterByBindingType[le],this.setValue=this.SetterByBindingTypeAndVersioning[le][oe]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite,PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationAction{constructor(ee,te,re=null,ne=te.blendMode){this._mixer=ee,this._clip=te,this._localRoot=re,this.blendMode=ne;const se=te.tracks,ae=se.length,oe=new Array(ae),le={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let he=0;he!==ae;++he){const ce=se[he].createInterpolant(null);oe[he]=ce,ce.settings=le}this._interpolantSettings=le,this._interpolants=oe,this._propertyBindings=new Array(ae),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(ee){return this._startTime=ee,this}setLoop(ee,te){return this.loop=ee,this.repetitions=te,this}setEffectiveWeight(ee){return this.weight=ee,this._effectiveWeight=this.enabled?ee:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(ee){return this._scheduleFading(ee,0,1)}fadeOut(ee){return this._scheduleFading(ee,1,0)}crossFadeFrom(ee,te,re){if(ee.fadeOut(te),this.fadeIn(te),re){const ne=this._clip.duration,se=ee._clip.duration,ae=se/ne,oe=ne/se;ee.warp(1,ae,te),this.warp(oe,1,te)}return this}crossFadeTo(ee,te,re){return ee.crossFadeFrom(this,te,re)}stopFading(){const ee=this._weightInterpolant;return ee!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(ee)),this}setEffectiveTimeScale(ee){return this.timeScale=ee,this._effectiveTimeScale=this.paused?0:ee,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(ee){return this.timeScale=this._clip.duration/ee,this.stopWarping()}syncWith(ee){return this.time=ee.time,this.timeScale=ee.timeScale,this.stopWarping()}halt(ee){return this.warp(this._effectiveTimeScale,0,ee)}warp(ee,te,re){const ne=this._mixer,se=ne.time,ae=this.timeScale;let oe=this._timeScaleInterpolant;oe===null&&(oe=ne._lendControlInterpolant(),this._timeScaleInterpolant=oe);const le=oe.parameterPositions,he=oe.sampleValues;return le[0]=se,le[1]=se+re,he[0]=ee/ae,he[1]=te/ae,this}stopWarping(){const ee=this._timeScaleInterpolant;return ee!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(ee)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(ee,te,re,ne){if(!this.enabled){this._updateWeight(ee);return}const se=this._startTime;if(se!==null){const le=(ee-se)*re;if(le<0||re===0)return;this._startTime=null,te=re*le}te*=this._updateTimeScale(ee);const ae=this._updateTime(te),oe=this._updateWeight(ee);if(oe>0){const le=this._interpolants,he=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let ce=0,de=le.length;ce!==de;++ce)le[ce].evaluate(ae),he[ce].accumulateAdditive(oe);break;case NormalAnimationBlendMode:default:for(let ce=0,de=le.length;ce!==de;++ce)le[ce].evaluate(ae),he[ce].accumulate(ne,oe)}}}_updateWeight(ee){let te=0;if(this.enabled){te=this.weight;const re=this._weightInterpolant;if(re!==null){const ne=re.evaluate(ee)[0];te*=ne,ee>re.parameterPositions[1]&&(this.stopFading(),ne===0&&(this.enabled=!1))}}return this._effectiveWeight=te,te}_updateTimeScale(ee){let te=0;if(!this.paused){te=this.timeScale;const re=this._timeScaleInterpolant;re!==null&&(te*=re.evaluate(ee)[0],ee>re.parameterPositions[1]&&(this.stopWarping(),te===0?this.paused=!0:this.timeScale=te))}return this._effectiveTimeScale=te,te}_updateTime(ee){const te=this._clip.duration,re=this.loop;let ne=this.time+ee,se=this._loopCount;const ae=re===LoopPingPong;if(ee===0)return se===-1?ne:ae&&(se&1)===1?te-ne:ne;if(re===LoopOnce){se===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(ne>=te)ne=te;else if(ne<0)ne=0;else{this.time=ne;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=ne,this._mixer.dispatchEvent({type:"finished",action:this,direction:ee<0?-1:1})}}else{if(se===-1&&(ee>=0?(se=0,this._setEndings(!0,this.repetitions===0,ae)):this._setEndings(this.repetitions===0,!0,ae)),ne>=te||ne<0){const oe=Math.floor(ne/te);ne-=te*oe,se+=Math.abs(oe);const le=this.repetitions-se;if(le<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,ne=ee>0?te:0,this.time=ne,this._mixer.dispatchEvent({type:"finished",action:this,direction:ee>0?1:-1});else{if(le===1){const he=ee<0;this._setEndings(he,!he,ae)}else this._setEndings(!1,!1,ae);this._loopCount=se,this.time=ne,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:oe})}}else this.time=ne;if(ae&&(se&1)===1)return te-ne}return ne}_setEndings(ee,te,re){const ne=this._interpolantSettings;re?(ne.endingStart=ZeroSlopeEnding,ne.endingEnd=ZeroSlopeEnding):(ee?ne.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:ne.endingStart=WrapAroundEnding,te?ne.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:ne.endingEnd=WrapAroundEnding)}_scheduleFading(ee,te,re){const ne=this._mixer,se=ne.time;let ae=this._weightInterpolant;ae===null&&(ae=ne._lendControlInterpolant(),this._weightInterpolant=ae);const oe=ae.parameterPositions,le=ae.sampleValues;return oe[0]=se,le[0]=te,oe[1]=se+ee,le[1]=re,this}}class AnimationMixer extends EventDispatcher{constructor(ee){super(),this._root=ee,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(ee,te){const re=ee._localRoot||this._root,ne=ee._clip.tracks,se=ne.length,ae=ee._propertyBindings,oe=ee._interpolants,le=re.uuid,he=this._bindingsByRootAndName;let ce=he[le];ce===void 0&&(ce={},he[le]=ce);for(let de=0;de!==se;++de){const ue=ne[de],fe=ue.name;let pe=ce[fe];if(pe!==void 0)ae[de]=pe;else{if(pe=ae[de],pe!==void 0){pe._cacheIndex===null&&(++pe.referenceCount,this._addInactiveBinding(pe,le,fe));continue}const me=te&&te._propertyBindings[de].binding.parsedPath;pe=new PropertyMixer(PropertyBinding.create(re,fe,me),ue.ValueTypeName,ue.getValueSize()),++pe.referenceCount,this._addInactiveBinding(pe,le,fe),ae[de]=pe}oe[de].resultBuffer=pe.buffer}}_activateAction(ee){if(!this._isActiveAction(ee)){if(ee._cacheIndex===null){const re=(ee._localRoot||this._root).uuid,ne=ee._clip.uuid,se=this._actionsByClip[ne];this._bindAction(ee,se&&se.knownActions[0]),this._addInactiveAction(ee,ne,re)}const te=ee._propertyBindings;for(let re=0,ne=te.length;re!==ne;++re){const se=te[re];se.useCount++===0&&(this._lendBinding(se),se.saveOriginalState())}this._lendAction(ee)}}_deactivateAction(ee){if(this._isActiveAction(ee)){const te=ee._propertyBindings;for(let re=0,ne=te.length;re!==ne;++re){const se=te[re];--se.useCount===0&&(se.restoreOriginalState(),this._takeBackBinding(se))}this._takeBackAction(ee)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const ee=this;this.stats={actions:{get total(){return ee._actions.length},get inUse(){return ee._nActiveActions}},bindings:{get total(){return ee._bindings.length},get inUse(){return ee._nActiveBindings}},controlInterpolants:{get total(){return ee._controlInterpolants.length},get inUse(){return ee._nActiveControlInterpolants}}}}_isActiveAction(ee){const te=ee._cacheIndex;return te!==null&&te<this._nActiveActions}_addInactiveAction(ee,te,re){const ne=this._actions,se=this._actionsByClip;let ae=se[te];if(ae===void 0)ae={knownActions:[ee],actionByRoot:{}},ee._byClipCacheIndex=0,se[te]=ae;else{const oe=ae.knownActions;ee._byClipCacheIndex=oe.length,oe.push(ee)}ee._cacheIndex=ne.length,ne.push(ee),ae.actionByRoot[re]=ee}_removeInactiveAction(ee){const te=this._actions,re=te[te.length-1],ne=ee._cacheIndex;re._cacheIndex=ne,te[ne]=re,te.pop(),ee._cacheIndex=null;const se=ee._clip.uuid,ae=this._actionsByClip,oe=ae[se],le=oe.knownActions,he=le[le.length-1],ce=ee._byClipCacheIndex;he._byClipCacheIndex=ce,le[ce]=he,le.pop(),ee._byClipCacheIndex=null;const de=oe.actionByRoot,ue=(ee._localRoot||this._root).uuid;delete de[ue],le.length===0&&delete ae[se],this._removeInactiveBindingsForAction(ee)}_removeInactiveBindingsForAction(ee){const te=ee._propertyBindings;for(let re=0,ne=te.length;re!==ne;++re){const se=te[re];--se.referenceCount===0&&this._removeInactiveBinding(se)}}_lendAction(ee){const te=this._actions,re=ee._cacheIndex,ne=this._nActiveActions++,se=te[ne];ee._cacheIndex=ne,te[ne]=ee,se._cacheIndex=re,te[re]=se}_takeBackAction(ee){const te=this._actions,re=ee._cacheIndex,ne=--this._nActiveActions,se=te[ne];ee._cacheIndex=ne,te[ne]=ee,se._cacheIndex=re,te[re]=se}_addInactiveBinding(ee,te,re){const ne=this._bindingsByRootAndName,se=this._bindings;let ae=ne[te];ae===void 0&&(ae={},ne[te]=ae),ae[re]=ee,ee._cacheIndex=se.length,se.push(ee)}_removeInactiveBinding(ee){const te=this._bindings,re=ee.binding,ne=re.rootNode.uuid,se=re.path,ae=this._bindingsByRootAndName,oe=ae[ne],le=te[te.length-1],he=ee._cacheIndex;le._cacheIndex=he,te[he]=le,te.pop(),delete oe[se],Object.keys(oe).length===0&&delete ae[ne]}_lendBinding(ee){const te=this._bindings,re=ee._cacheIndex,ne=this._nActiveBindings++,se=te[ne];ee._cacheIndex=ne,te[ne]=ee,se._cacheIndex=re,te[re]=se}_takeBackBinding(ee){const te=this._bindings,re=ee._cacheIndex,ne=--this._nActiveBindings,se=te[ne];ee._cacheIndex=ne,te[ne]=ee,se._cacheIndex=re,te[re]=se}_lendControlInterpolant(){const ee=this._controlInterpolants,te=this._nActiveControlInterpolants++;let re=ee[te];return re===void 0&&(re=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),re.__cacheIndex=te,ee[te]=re),re}_takeBackControlInterpolant(ee){const te=this._controlInterpolants,re=ee.__cacheIndex,ne=--this._nActiveControlInterpolants,se=te[ne];ee.__cacheIndex=ne,te[ne]=ee,se.__cacheIndex=re,te[re]=se}clipAction(ee,te,re){const ne=te||this._root,se=ne.uuid;let ae=typeof ee=="string"?AnimationClip.findByName(ne,ee):ee;const oe=ae!==null?ae.uuid:ee,le=this._actionsByClip[oe];let he=null;if(re===void 0&&(ae!==null?re=ae.blendMode:re=NormalAnimationBlendMode),le!==void 0){const de=le.actionByRoot[se];if(de!==void 0&&de.blendMode===re)return de;he=le.knownActions[0],ae===null&&(ae=he._clip)}if(ae===null)return null;const ce=new AnimationAction(this,ae,te,re);return this._bindAction(ce,he),this._addInactiveAction(ce,oe,se),ce}existingAction(ee,te){const re=te||this._root,ne=re.uuid,se=typeof ee=="string"?AnimationClip.findByName(re,ee):ee,ae=se?se.uuid:ee,oe=this._actionsByClip[ae];return oe!==void 0&&oe.actionByRoot[ne]||null}stopAllAction(){const ee=this._actions,te=this._nActiveActions;for(let re=te-1;re>=0;--re)ee[re].stop();return this}update(ee){ee*=this.timeScale;const te=this._actions,re=this._nActiveActions,ne=this.time+=ee,se=Math.sign(ee),ae=this._accuIndex^=1;for(let he=0;he!==re;++he)te[he]._update(ne,ee,se,ae);const oe=this._bindings,le=this._nActiveBindings;for(let he=0;he!==le;++he)oe[he].apply(ae);return this}setTime(ee){this.time=0;for(let te=0;te<this._actions.length;te++)this._actions[te].time=0;return this.update(ee)}getRoot(){return this._root}uncacheClip(ee){const te=this._actions,re=ee.uuid,ne=this._actionsByClip,se=ne[re];if(se!==void 0){const ae=se.knownActions;for(let oe=0,le=ae.length;oe!==le;++oe){const he=ae[oe];this._deactivateAction(he);const ce=he._cacheIndex,de=te[te.length-1];he._cacheIndex=null,he._byClipCacheIndex=null,de._cacheIndex=ce,te[ce]=de,te.pop(),this._removeInactiveBindingsForAction(he)}delete ne[re]}}uncacheRoot(ee){const te=ee.uuid,re=this._actionsByClip;for(const ae in re){const oe=re[ae].actionByRoot,le=oe[te];le!==void 0&&(this._deactivateAction(le),this._removeInactiveAction(le))}const ne=this._bindingsByRootAndName,se=ne[te];if(se!==void 0)for(const ae in se){const oe=se[ae];oe.restoreOriginalState(),this._removeInactiveBinding(oe)}}uncacheAction(ee,te){const re=this.existingAction(ee,te);re!==null&&(this._deactivateAction(re),this._removeInactiveAction(re))}}AnimationMixer.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(ee,te,re=1){super(ee,te),this.meshPerAttribute=re}copy(ee){return super.copy(ee),this.meshPerAttribute=ee.meshPerAttribute,this}clone(ee){const te=super.clone(ee);return te.meshPerAttribute=this.meshPerAttribute,te}toJSON(ee){const te=super.toJSON(ee);return te.isInstancedInterleavedBuffer=!0,te.meshPerAttribute=this.meshPerAttribute,te}}InstancedInterleavedBuffer.prototype.isInstancedInterleavedBuffer=!0;const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(ee){const te=getBoneList(ee),re=new BufferGeometry,ne=[],se=[],ae=new Color$1(0,0,1),oe=new Color$1(0,1,0);for(let he=0;he<te.length;he++){const ce=te[he];ce.parent&&ce.parent.isBone&&(ne.push(0,0,0),ne.push(0,0,0),se.push(ae.r,ae.g,ae.b),se.push(oe.r,oe.g,oe.b))}re.setAttribute("position",new Float32BufferAttribute(ne,3)),re.setAttribute("color",new Float32BufferAttribute(se,3));const le=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(re,le),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=ee,this.bones=te,this.matrix=ee.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(ee){const te=this.bones,re=this.geometry,ne=re.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let se=0,ae=0;se<te.length;se++){const oe=te[se];oe.parent&&oe.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,oe.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),ne.setXYZ(ae,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,oe.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),ne.setXYZ(ae+1,_vector$2.x,_vector$2.y,_vector$2.z),ae+=2)}re.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(ee)}}function getBoneList(ie){const ee=[];ie&&ie.isBone&&ee.push(ie);for(let te=0;te<ie.children.length;te++)ee.push.apply(ee,getBoneList(ie.children[te]));return ee}class GridHelper extends LineSegments{constructor(ee=10,te=10,re=4473924,ne=8947848){re=new Color$1(re),ne=new Color$1(ne);const se=te/2,ae=ee/te,oe=ee/2,le=[],he=[];for(let ue=0,fe=0,pe=-oe;ue<=te;ue++,pe+=ae){le.push(-oe,0,pe,oe,0,pe),le.push(pe,0,-oe,pe,0,oe);const me=ue===se?re:ne;me.toArray(he,fe),fe+=3,me.toArray(he,fe),fe+=3,me.toArray(he,fe),fe+=3,me.toArray(he,fe),fe+=3}const ce=new BufferGeometry;ce.setAttribute("position",new Float32BufferAttribute(le,3)),ce.setAttribute("color",new Float32BufferAttribute(he,3));const de=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(ce,de),this.type="GridHelper"}}const _floatView=new Float32Array(1);new Int32Array(_floatView.buffer),Curve.create=function(ie,ee){return console.log("THREE.Curve.create() has been deprecated"),ie.prototype=Object.create(Curve.prototype),ie.prototype.constructor=ie,ie.prototype.getPoint=ee,ie},Path.prototype.fromPoints=function(ie){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(ie)},GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Loader$1.prototype.extractUrlBase=function(ie){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(ie)},Loader$1.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Box3.prototype.center=function(ie){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(ie)},Box3.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Box3.prototype.isIntersectionBox=function(ie){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ie)},Box3.prototype.isIntersectionSphere=function(ie){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(ie)},Box3.prototype.size=function(ie){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(ie)},Sphere.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Frustum.prototype.setFromMatrix=function(ie){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(ie)},Matrix3.prototype.flattenToArrayOffset=function(ie,ee){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(ie,ee)},Matrix3.prototype.multiplyVector3=function(ie){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),ie.applyMatrix3(this)},Matrix3.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Matrix3.prototype.applyToBufferAttribute=function(ie){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),ie.applyMatrix3(this)},Matrix3.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Matrix3.prototype.getInverse=function(ie){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(ie).invert()},Matrix4.prototype.extractPosition=function(ie){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(ie)},Matrix4.prototype.flattenToArrayOffset=function(ie,ee){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(ie,ee)},Matrix4.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},Matrix4.prototype.setRotationFromQuaternion=function(ie){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(ie)},Matrix4.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Matrix4.prototype.multiplyVector3=function(ie){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),ie.applyMatrix4(this)},Matrix4.prototype.multiplyVector4=function(ie){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),ie.applyMatrix4(this)},Matrix4.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Matrix4.prototype.rotateAxis=function(ie){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),ie.transformDirection(this)},Matrix4.prototype.crossVector=function(ie){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),ie.applyMatrix4(this)},Matrix4.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Matrix4.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Matrix4.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Matrix4.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Matrix4.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Matrix4.prototype.applyToBufferAttribute=function(ie){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),ie.applyMatrix4(this)},Matrix4.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Matrix4.prototype.makeFrustum=function(ie,ee,te,re,ne,se){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(ie,ee,re,te,ne,se)},Matrix4.prototype.getInverse=function(ie){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(ie).invert()},Plane.prototype.isIntersectionLine=function(ie){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(ie)},Quaternion.prototype.multiplyVector3=function(ie){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),ie.applyQuaternion(this)},Quaternion.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Ray.prototype.isIntersectionBox=function(ie){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ie)},Ray.prototype.isIntersectionPlane=function(ie){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(ie)},Ray.prototype.isIntersectionSphere=function(ie){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(ie)},Triangle.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Triangle.prototype.barycoordFromPoint=function(ie,ee){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(ie,ee)},Triangle.prototype.midpoint=function(ie){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(ie)},Triangle.prototypenormal=function(ie){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(ie)},Triangle.prototype.plane=function(ie){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(ie)},Triangle.barycoordFromPoint=function(ie,ee,te,re,ne){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(ie,ee,te,re,ne)},Triangle.normal=function(ie,ee,te,re){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(ie,ee,te,re)},Shape.prototype.extractAllPoints=function(ie){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(ie)},Shape.prototype.extrude=function(ie){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,ie)},Shape.prototype.makeGeometry=function(ie){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,ie)},Vector2.prototype.fromAttribute=function(ie,ee,te){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ie,ee,te)},Vector2.prototype.distanceToManhattan=function(ie){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(ie)},Vector2.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Vector3.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Vector3.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Vector3.prototype.getPositionFromMatrix=function(ie){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(ie)},Vector3.prototype.getScaleFromMatrix=function(ie){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(ie)},Vector3.prototype.getColumnFromMatrix=function(ie,ee){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(ee,ie)},Vector3.prototype.applyProjection=function(ie){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(ie)},Vector3.prototype.fromAttribute=function(ie,ee,te){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ie,ee,te)},Vector3.prototype.distanceToManhattan=function(ie){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(ie)},Vector3.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Vector4.prototype.fromAttribute=function(ie,ee,te){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ie,ee,te)},Vector4.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Object3D.prototype.getChildByName=function(ie){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(ie)},Object3D.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Object3D.prototype.translate=function(ie,ee){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(ee,ie)},Object3D.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Object3D.prototype.applyMatrix=function(ie){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ie)},Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(ie){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=ie}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Mesh$1.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Mesh$1.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},PerspectiveCamera.prototype.setLens=function(ie,ee){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),ee!==void 0&&(this.filmGauge=ee),this.setFocalLength(ie)},Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(ie){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=ie}},shadowCameraLeft:{set:function(ie){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=ie}},shadowCameraRight:{set:function(ie){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=ie}},shadowCameraTop:{set:function(ie){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=ie}},shadowCameraBottom:{set:function(ie){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=ie}},shadowCameraNear:{set:function(ie){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=ie}},shadowCameraFar:{set:function(ie){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=ie}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(ie){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=ie}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(ie){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=ie}},shadowMapHeight:{set:function(ie){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=ie}}}),Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}}),BufferAttribute.prototype.setDynamic=function(ie){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(ie===!0?DynamicDrawUsage:StaticDrawUsage),this},BufferAttribute.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},BufferAttribute.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},BufferGeometry.prototype.addIndex=function(ie){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(ie)},BufferGeometry.prototype.addAttribute=function(ie,ee){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(ee&&ee.isBufferAttribute)&&!(ee&&ee.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(ie,new BufferAttribute(arguments[1],arguments[2]))):ie==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(ee),this):this.setAttribute(ie,ee)},BufferGeometry.prototype.addDrawCall=function(ie,ee,te){te!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(ie,ee)},BufferGeometry.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},BufferGeometry.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},BufferGeometry.prototype.removeAttribute=function(ie){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(ie)},BufferGeometry.prototype.applyMatrix=function(ie){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ie)},Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),InterleavedBuffer.prototype.setDynamic=function(ie){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(ie===!0?DynamicDrawUsage:StaticDrawUsage),this},InterleavedBuffer.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ExtrudeGeometry.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ExtrudeGeometry.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ExtrudeGeometry.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Scene.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color$1}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(ie){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=ie===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(ie){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=ie}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(ie){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=ie}}}),WebGLRenderer.prototype.clearTarget=function(ie,ee,te,re){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(ie),this.clear(ee,te,re)},WebGLRenderer.prototype.animate=function(ie){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(ie)},WebGLRenderer.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},WebGLRenderer.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},WebGLRenderer.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},WebGLRenderer.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},WebGLRenderer.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},WebGLRenderer.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},WebGLRenderer.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},WebGLRenderer.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},WebGLRenderer.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},WebGLRenderer.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},WebGLRenderer.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},WebGLRenderer.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},WebGLRenderer.prototype.enableScissorTest=function(ie){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(ie)},WebGLRenderer.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},WebGLRenderer.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},WebGLRenderer.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},WebGLRenderer.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},WebGLRenderer.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},WebGLRenderer.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},WebGLRenderer.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},WebGLRenderer.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},WebGLRenderer.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},WebGLRenderer.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(ie){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=ie}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(ie){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=ie}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(ie){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=ie===!0?sRGBEncoding:LinearEncoding}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(ie){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=ie}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(ie){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=ie}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(ie){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=ie}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(ie){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=ie}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(ie){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=ie}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(ie){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=ie}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(ie){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=ie}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(ie){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=ie}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(ie){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=ie}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(ie){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=ie}}}),Audio$1.prototype.load=function(ie){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const ee=this;return new AudioLoader().load(ie,function(re){ee.setBuffer(re)}),this},CubeCamera.prototype.updateCubeMap=function(ie,ee){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(ie,ee)},CubeCamera.prototype.clear=function(ie,ee,te,re){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(ie,ee,te,re)},ImageUtils.crossOrigin=void 0,ImageUtils.loadTexture=function(ie,ee,te,re){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const ne=new TextureLoader;ne.setCrossOrigin(this.crossOrigin);const se=ne.load(ie,te,void 0,re);return ee&&(se.mapping=ee),se},ImageUtils.loadTextureCube=function(ie,ee,te,re){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const ne=new CubeTextureLoader;ne.setCrossOrigin(this.crossOrigin);const se=ne.load(ie,te,void 0,re);return ee&&(se.mapping=ee),se},ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}})),typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);var vertex_default=`uniform float time;
varying vec2 vUv;
varying vec3 vPosition;
uniform vec2 pixels;
float PI = 3.141592653589793238;
void main() {
vUv = uv;
gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragment_default=`uniform float time;
uniform float progress;
uniform sampler2D uDataTexture;
uniform sampler2D uTexture;

uniform vec4 resolution;
varying vec2 vUv;
varying vec3 vPosition;
float PI = 3.141592653589793238;
void main()	{
vec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);
vec4 color = texture2D(uTexture,newUV);
vec4 offset = texture2D(uDataTexture,vUv);
gl_FragColor = vec4(vUv,0.0,1.);
gl_FragColor = vec4(offset.r,0.,0.,1.);
gl_FragColor = color;
gl_FragColor = texture2D(uTexture,newUV - 0.02*offset.rg);

}`;function clamp(ie,ee,te){return Math.max(ee,Math.min(ie,te))}class HeroImg{constructor(ee,te){this.scene=new Scene,this.containerParent=ee.dom,this.container=ee.dom.querySelector(".hero__img"),this.img=this.container.querySelector("img"),this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.renderer=new WebGLRenderer({alpha:!0,premultipliedAlpha:!1}),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(this.width,this.height),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=sRGBEncoding,this.container.appendChild(this.renderer.domElement),this.camera=new PerspectiveCamera(70,this.width/this.height,.1,100);var re=1,ne=this.width/this.height;this.camera=new OrthographicCamera(re/-2,re/2,re/2,re/-2,-1e3,1e3),this.camera.position.set(0,0,2),this.time=0,this.mouse={x:0,y:0,prevX:0,prevY:0,vX:0,vY:0},this.frameAnimation=null,this.destroy=()=>{cancelAnimationFrame(this.frameAnimation),this.geometry.dispose(),this.material.dispose(),this.renderer.dispose()},this.isPlaying=!0,this.settings(ne,te),this.addObjects(),this.resize(),this.render(),this.setupResize(),this.mouseEvents(this.containerParent)}getValue(ee){return parseFloat(this.container.getAttribute("data-"+ee))}mouseEvents(ee){document.querySelector("header").addEventListener("mousemove",re=>{this.mouse.x=re.clientX/window.innerWidth,this.mouse.y=re.pageY/window.innerHeight,this.mouse.vX=this.mouse.x-this.mouse.prevX,this.mouse.vY=this.mouse.y-this.mouse.prevY,this.mouse.prevX=this.mouse.x,this.mouse.prevY=this.mouse.y})}settings(ee,te){this.settings={grid:this.getValue("grid")||800,mouse:this.getValue("mouse")||.1,strength:this.getValue("strength")||.16,relaxation:this.getValue("relaxation")||.96,aspectRatio:this.getValue("aspectRatio")||te}}setupResize(){window.addEventListener("resize",this.resize.bind(this))}resize(){this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.imageAspect=1/this.settings.aspectRatio;let ee,te;this.height/this.width>this.imageAspect?(ee=this.width/this.height*this.imageAspect,te=1):(ee=1,te=this.height/this.width/this.imageAspect),this.material.uniforms.resolution.value.x=this.width,this.material.uniforms.resolution.value.y=this.height,this.material.uniforms.resolution.value.z=ee,this.material.uniforms.resolution.value.w=te,this.camera.updateProjectionMatrix(),this.regenerateGrid()}regenerateGrid(){this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.size=this.settings.grid;const ee=this.size,te=this.size,re=ee*te,ne=new Float32Array(3*re),se=new Color$1(16777215);Math.floor(se.r*255),Math.floor(se.g*255),Math.floor(se.b*255);for(let ae=0;ae<re;ae++){let oe=Math.random()*10-5,le=Math.random()*10-5;const he=ae*3;ne[he]=oe,ne[he+1]=le,ne[he+2]=oe}this.texture=new DataTexture(ne,ee,te,RGBFormat,FloatType),this.texture.magFilter=NearestFilter,this.texture.minFilter=LinearFilter,this.material&&(this.material.uniforms.uDataTexture.value=this.texture,this.material.uniforms.uDataTexture.value.needsUpdate=!0)}addObjects(){this.regenerateGrid();let ee=new TextureLoader().load(this.img.src);ee.needsUpdate=!0,this.material=new ShaderMaterial({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:DoubleSide,uniforms:{time:{value:0},resolution:{value:new Vector4},uTexture:{value:ee},uDataTexture:{value:this.texture}},vertexShader:vertex_default,fragmentShader:fragment_default}),this.geometry=new PlaneGeometry(1,1,1,1),this.plane=new Mesh$1(this.geometry,this.material),this.scene.add(this.plane),this.resize()}updateDataTexture(){let ee=this.texture.image.data;for(let ae=0;ae<ee.length;ae+=3)ee[ae]*=this.settings.relaxation,ee[ae+1]*=this.settings.relaxation;let te=this.size*this.mouse.x,re=this.size*(1-this.mouse.y),ne=this.size*this.settings.mouse,se=this.height/this.width;for(let ae=0;ae<this.size;ae++)for(let oe=0;oe<this.size;oe++){let le=(te-ae)**2/se+(re-oe)**2,he=ne**2;if(le<he){let ce=3*(ae+this.size*oe),de=ne/Math.sqrt(le);de=clamp(de,0,10),ee[ce]+=this.settings.strength*100*this.mouse.vX*de,ee[ce+1]-=this.settings.strength*100*this.mouse.vY*de}}this.mouse.vX*=.9,this.mouse.vY*=.9,this.texture.needsUpdate=!0}render(){!this.isPlaying||(this.time+=.05,this.updateDataTexture(),this.material.uniforms.time.value=this.time,this.frameAnimation=requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera))}}gsapWithCSS.registerPlugin(SplitText);class _HomeLoader{constructor(ee,te){const re=()=>{let se=$(ee);se.addClass("loading");let ae=se.find(".hero"),oe=$(".loader"),le=$(".nav"),he=ae.find(".hero__name"),ce=oe.find(".loader__text");he.find(".f-750");let de=ce.find(".f-1190"),ue=oe.find(".loader__loading"),fe=oe.find(".loader__img").eq(0),pe=oe.find(".loader__img").eq(1),me=oe.find(".loader__img").eq(2),xe=ae.find(".hero__img"),ge=ae.find(".hero__title").find(".f-32"),_e=new SplitText(ge,{type:"lines"}),ve=$(".nav__logo"),ye=$(".nav__item");$(".nav__switcher");let be=$(".hero__descr").find(".f-25"),we=new SplitText(be,{type:"lines, chars"}),Se=6;oe.removeClass("complete"),oe.removeClass("loader-all"),oe.addClass("loader-home"),le.addClass("loading"),gsapWithCSS.set(oe,{autoAlpha:1});const Te=()=>{se.removeClass("loading"),oe.addClass("complete"),gsapWithCSS.set([se],{autoAlpha:1}),le.removeClass("loading")};gsapWithCSS.timeline({defaults:{duration:1.4,ease:"power3"}}).fromTo(de,{backgroundSize:"0"},{backgroundSize:"100%",duration:Se,ease:"power3"}).to(ue,{opacity:0,duration:.5,ease:"none",repeat:-1,yoyo:!0,repeatDelay:.5},"<").to(de,{xPercent:-40,duration:Se,ease:"power3"},"<0.1").fromTo(fe,{y:"100vh"},{y:"0vh",rotate:10},"<0.1").fromTo(pe,{y:"100vh"},{y:"0vh",rotate:-20},"<70%").fromTo(me,{y:"100vh"},{y:"0vh",rotate:0},"<70%").to([fe,pe,me],{y:"-100vh",duration:.6,ease:"power3.In",stagger:.1,onComplete:Te},">0.1").from(xe,{opacity:0,duration:.6,onStart:te},">0.3").from(ve,{opacity:0,duration:.6},"<0.1").from(_e.lines,{opacity:0,duration:.6,stagger:.1},"<0.1").from(ye,{opacity:0,duration:.6,stagger:.1},"<0.1").from(we.lines,{opacity:0,yPercent:100,duration:.6,stagger:.2},"<0.1").from(we.chars,{opacity:.4,duration:.6,stagger:.02},"<")};new FontFaceObserver("Neue Haas Grotesk").load().then(()=>{re()})}}gsapWithCSS.registerPlugin(SplitText);class HeroText{constructor(){let ee=$(".hero-contact__text").find(".f-320");new SplitText(ee,{type:"chars, lines",charsClass:"contact-chars"});let te=gsapWithCSS.timeline({repeat:-1});ee.each((re,ne)=>{let se=$(ne),ae=gsapWithCSS.timeline({repeat:1,yoyo:!0,repeatDelay:1});ae.to(se.find(".contact-chars"),{duration:.5,opacity:1,ease:"power3",stagger:.1}),te.add(ae)}),this.setFixed()}setFixed(){let ee=$(".hero-contact__img"),te=$(".hero-contact__text-parent"),re=ee.height();te.css("height",`${re}px`),window.addEventListener("resize",()=>{re=ee.height(),te.css("height",`${re}px`)})}}gsapWithCSS.registerPlugin(SplitText);class _ContactLoader{constructor(ee){const te=()=>{new HeroText};let ne=$(ee).find(".hero"),se=ne.find(".hero-contact__img"),ae=ne.find(".hero-contact__descr").find(".f-25"),oe=ne.find(".hero-contact__text-parent"),le=new SplitText(ae,{type:"lines"});gsapWithCSS.timeline({defaults:{duration:1,ease:"power3"}}).fromTo(se,{opacity:0},{opacity:1,duration:.1,onStart:()=>{se.addClass("faded")}},.4).fromTo(le.lines,{opacity:0,y:30},{opacity:1,y:0,stagger:.12},"<0.4").fromTo(oe,{opacity:0},{opacity:1,onStart:te},"<0.2")}}gsapWithCSS.registerPlugin(SplitText);class _ArticleLoader{constructor(ee){let te=$(ee),re=te.find(".article__back"),ne=te.find(".article__title").find(".f-120"),se=te.find(".article__descr").find(".f-25"),ae=te.find(".article__large-img"),oe=new SplitText(ne,{type:"chars, lines"}),le=new SplitText(se,{type:"lines"});gsapWithCSS.timeline({defaults:{duration:1,ease:"power3"}}).from(re,{opacity:0},.4).fromTo(oe.chars,{opacity:0,scaleY:0},{opacity:1,scaleY:1,transformOrigin:"bottom",stagger:.02},"<0.2").fromTo(le.lines,{opacity:0,y:30},{opacity:1,y:0,stagger:.12},"<0.2").fromTo(ae,{opacity:0},{opacity:1,duration:.1,onStart:()=>{ae.addClass("faded")}},"<0.4")}}gsapWithCSS.registerPlugin(SplitText);class _ResumeLoader{constructor(ee){let te=$(ee),re=te.find(".article__back"),ne=te.find(".f-450"),se=te.find(".resume-objective").find(".f-20"),ae=te.find(".resume-objective").find(".f-64"),oe=new SplitText(ne,{type:"chars, lines"}),le=new SplitText(se,{type:"lines"}),he=new SplitText(ae,{type:"lines, chars"});gsapWithCSS.timeline({defaults:{duration:1,ease:"power3"}}).from(re,{opacity:0},.6).fromTo(oe.chars,{rotateY:90},{rotateY:0,stagger:.02},"<0.2").fromTo(le.lines,{opacity:0,y:30},{opacity:1,y:0,stagger:.12},"<0.2").fromTo(he.chars,{opacity:0,scaleY:0},{opacity:1,scaleY:1,transformOrigin:"bottom",stagger:.02},"<0.2")}}var tinyEmitter={exports:{}};function E(){}E.prototype={on:function(ie,ee,te){var re=this.e||(this.e={});return(re[ie]||(re[ie]=[])).push({fn:ee,ctx:te}),this},once:function(ie,ee,te){var re=this;function ne(){re.off(ie,ne),ee.apply(te,arguments)}return ne._=ee,this.on(ie,ne,te)},emit:function(ie){var ee=[].slice.call(arguments,1),te=((this.e||(this.e={}))[ie]||[]).slice(),re=0,ne=te.length;for(re;re<ne;re++)te[re].fn.apply(te[re].ctx,ee);return this},off:function(ie,ee){var te=this.e||(this.e={}),re=te[ie],ne=[];if(re&&ee)for(var se=0,ae=re.length;se<ae;se++)re[se].fn!==ee&&re[se].fn._!==ee&&ne.push(re[se]);return ne.length?te[ie]=ne:delete te[ie],this}},tinyEmitter.exports=E;var TinyEmitter=tinyEmitter.exports.TinyEmitter=E,virtualscroll={exports:{}};(function(ie,ee){(function(te,re){ie.exports=re()})(commonjsGlobal$1,function(){var te=0;function re(me){return"__private_"+te+++"_"+me}function ne(me,xe){if(!Object.prototype.hasOwnProperty.call(me,xe))throw new TypeError("attempted to use private field on non-instance");return me}function se(){}se.prototype={on:function(me,xe,ge){var _e=this.e||(this.e={});return(_e[me]||(_e[me]=[])).push({fn:xe,ctx:ge}),this},once:function(me,xe,ge){var _e=this;function ve(){_e.off(me,ve),xe.apply(ge,arguments)}return ve._=xe,this.on(me,ve,ge)},emit:function(me){for(var xe=[].slice.call(arguments,1),ge=((this.e||(this.e={}))[me]||[]).slice(),_e=0,ve=ge.length;_e<ve;_e++)ge[_e].fn.apply(ge[_e].ctx,xe);return this},off:function(me,xe){var ge=this.e||(this.e={}),_e=ge[me],ve=[];if(_e&&xe)for(var ye=0,be=_e.length;ye<be;ye++)_e[ye].fn!==xe&&_e[ye].fn._!==xe&&ve.push(_e[ye]);return ve.length?ge[me]=ve:delete ge[me],this}};var ae=se;ae.TinyEmitter=se;var oe,le="virtualscroll",he=re("options"),ce=re("el"),de=re("emitter"),ue=re("event"),fe=re("touchStart"),pe=re("bodyTouchAction");return function(){function me(ge){var _e=this;Object.defineProperty(this,he,{writable:!0,value:void 0}),Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,ue,{writable:!0,value:void 0}),Object.defineProperty(this,fe,{writable:!0,value:void 0}),Object.defineProperty(this,pe,{writable:!0,value:void 0}),this._onWheel=function(ve){var ye=ne(_e,he)[he],be=ne(_e,ue)[ue];be.deltaX=ve.wheelDeltaX||-1*ve.deltaX,be.deltaY=ve.wheelDeltaY||-1*ve.deltaY,oe.isFirefox&&ve.deltaMode===1&&(be.deltaX*=ye.firefoxMultiplier,be.deltaY*=ye.firefoxMultiplier),be.deltaX*=ye.mouseMultiplier,be.deltaY*=ye.mouseMultiplier,_e._notify(ve)},this._onMouseWheel=function(ve){var ye=ne(_e,ue)[ue];ye.deltaX=ve.wheelDeltaX?ve.wheelDeltaX:0,ye.deltaY=ve.wheelDeltaY?ve.wheelDeltaY:ve.wheelDelta,_e._notify(ve)},this._onTouchStart=function(ve){var ye=ve.targetTouches?ve.targetTouches[0]:ve;ne(_e,fe)[fe].x=ye.pageX,ne(_e,fe)[fe].y=ye.pageY},this._onTouchMove=function(ve){var ye=ne(_e,he)[he];ye.preventTouch&&!ve.target.classList.contains(ye.unpreventTouchClass)&&ve.preventDefault();var be=ne(_e,ue)[ue],we=ve.targetTouches?ve.targetTouches[0]:ve;be.deltaX=(we.pageX-ne(_e,fe)[fe].x)*ye.touchMultiplier,be.deltaY=(we.pageY-ne(_e,fe)[fe].y)*ye.touchMultiplier,ne(_e,fe)[fe].x=we.pageX,ne(_e,fe)[fe].y=we.pageY,_e._notify(ve)},this._onKeyDown=function(ve){var ye=ne(_e,ue)[ue];ye.deltaX=ye.deltaY=0;var be=window.innerHeight-40;switch(ve.keyCode){case 37:case 38:ye.deltaY=ne(_e,he)[he].keyStep;break;case 39:case 40:ye.deltaY=-ne(_e,he)[he].keyStep;break;case 32:ye.deltaY=be*(ve.shiftKey?1:-1);break;default:return}_e._notify(ve)},ne(this,ce)[ce]=window,ge&&ge.el&&(ne(this,ce)[ce]=ge.el,delete ge.el),oe||(oe={hasWheelEvent:"onwheel"in document,hasMouseWheelEvent:"onmousewheel"in document,hasTouch:"ontouchstart"in document,hasTouchWin:navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointer:!!window.navigator.msPointerEnabled,hasKeyDown:"onkeydown"in document,isFirefox:navigator.userAgent.indexOf("Firefox")>-1}),ne(this,he)[he]=Object.assign({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",useKeyboard:!0,useTouch:!0},ge),ne(this,de)[de]=new ae,ne(this,ue)[ue]={y:0,x:0,deltaX:0,deltaY:0},ne(this,fe)[fe]={x:null,y:null},ne(this,pe)[pe]=null,ne(this,he)[he].passive!==void 0&&(this.listenerOptions={passive:ne(this,he)[he].passive})}var xe=me.prototype;return xe._notify=function(ge){var _e=ne(this,ue)[ue];_e.x+=_e.deltaX,_e.y+=_e.deltaY,ne(this,de)[de].emit(le,{x:_e.x,y:_e.y,deltaX:_e.deltaX,deltaY:_e.deltaY,originalEvent:ge})},xe._bind=function(){oe.hasWheelEvent&&ne(this,ce)[ce].addEventListener("wheel",this._onWheel,this.listenerOptions),oe.hasMouseWheelEvent&&ne(this,ce)[ce].addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),oe.hasTouch&&ne(this,he)[he].useTouch&&(ne(this,ce)[ce].addEventListener("touchstart",this._onTouchStart,this.listenerOptions),ne(this,ce)[ce].addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),oe.hasPointer&&oe.hasTouchWin&&(ne(this,pe)[pe]=document.body.style.msTouchAction,document.body.style.msTouchAction="none",ne(this,ce)[ce].addEventListener("MSPointerDown",this._onTouchStart,!0),ne(this,ce)[ce].addEventListener("MSPointerMove",this._onTouchMove,!0)),oe.hasKeyDown&&ne(this,he)[he].useKeyboard&&document.addEventListener("keydown",this._onKeyDown)},xe._unbind=function(){oe.hasWheelEvent&&ne(this,ce)[ce].removeEventListener("wheel",this._onWheel),oe.hasMouseWheelEvent&&ne(this,ce)[ce].removeEventListener("mousewheel",this._onMouseWheel),oe.hasTouch&&(ne(this,ce)[ce].removeEventListener("touchstart",this._onTouchStart),ne(this,ce)[ce].removeEventListener("touchmove",this._onTouchMove)),oe.hasPointer&&oe.hasTouchWin&&(document.body.style.msTouchAction=ne(this,pe)[pe],ne(this,ce)[ce].removeEventListener("MSPointerDown",this._onTouchStart,!0),ne(this,ce)[ce].removeEventListener("MSPointerMove",this._onTouchMove,!0)),oe.hasKeyDown&&ne(this,he)[he].useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)},xe.on=function(ge,_e){ne(this,de)[de].on(le,ge,_e);var ve=ne(this,de)[de].e;ve&&ve[le]&&ve[le].length===1&&this._bind()},xe.off=function(ge,_e){ne(this,de)[de].off(le,ge,_e);var ve=ne(this,de)[de].e;(!ve[le]||ve[le].length<=0)&&this._unbind()},xe.destroy=function(){ne(this,de)[de].off(),this._unbind()},me}()})})(virtualscroll);var e$1=virtualscroll.exports;function i$1(ie,ee){for(var te=0;te<ee.length;te++){var re=ee[te];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ie,re.key,re)}}function o$1(ie,ee,te){return ee&&i$1(ie.prototype,ee),te&&i$1(ie,te),Object.defineProperty(ie,"prototype",{writable:!1}),ie}function r$1(){return r$1=Object.assign?Object.assign.bind():function(ie){for(var ee=1;ee<arguments.length;ee++){var te=arguments[ee];for(var re in te)Object.prototype.hasOwnProperty.call(te,re)&&(ie[re]=te[re])}return ie},r$1.apply(this,arguments)}function n$1(ie,ee){return n$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,re){return te.__proto__=re,te},n$1(ie,ee)}function s$1(ie,ee){var te=ie%ee;return(ee>0&&te<0||ee<0&&te>0)&&(te+=ee),te}var l$1=["duration","easing"],a$1=function(){function ie(){}var ee=ie.prototype;return ee.to=function(te,re){var ne=this,se=re===void 0?{}:re,ae=se.duration,oe=ae===void 0?1:ae,le=se.easing,he=le===void 0?function(de){return de}:le,ce=function(de,ue){if(de==null)return{};var fe,pe,me={},xe=Object.keys(de);for(pe=0;pe<xe.length;pe++)ue.indexOf(fe=xe[pe])>=0||(me[fe]=de[fe]);return me}(se,l$1);this.target=te,this.fromKeys=r$1({},ce),this.toKeys=r$1({},ce),this.keys=Object.keys(r$1({},ce)),this.keys.forEach(function(de){ne.fromKeys[de]=te[de]}),this.duration=oe,this.easing=he,this.currentTime=0,this.isRunning=!0},ee.stop=function(){this.isRunning=!1},ee.raf=function(te){var re=this;if(this.isRunning){this.currentTime=Math.min(this.currentTime+te,this.duration);var ne=this.progress>=1?1:this.easing(this.progress);this.keys.forEach(function(se){var ae=re.fromKeys[se];re.target[se]=ae+(re.toKeys[se]-ae)*ne}),ne===1&&this.stop()}},o$1(ie,[{key:"progress",get:function(){return this.currentTime/this.duration}}]),ie}(),c$1=function(ie){var ee,te;function re(se){var ae,oe,le,he,ce=se===void 0?{}:se,de=ce.duration,ue=de===void 0?1.2:de,fe=ce.easing,pe=fe===void 0?function(Ae){return Math.min(1,1.001-Math.pow(2,-10*Ae))}:fe,me=ce.smooth,xe=me===void 0||me,ge=ce.mouseMultiplier,_e=ge===void 0?1:ge,ve=ce.smoothTouch,ye=ve!==void 0&&ve,be=ce.touchMultiplier,we=be===void 0?2:be,Se=ce.direction,Te=Se===void 0?"vertical":Se,Pe=ce.gestureDirection,Be=Pe===void 0?"vertical":Pe,Ce=ce.infinite,De=Ce!==void 0&&Ce,Re=ce.wrapper,Le=Re===void 0?window:Re,ke=ce.content,Me=ke===void 0?document.body:ke;(he=ie.call(this)||this).onWindowResize=function(){he.wrapperWidth=window.innerWidth,he.wrapperHeight=window.innerHeight},he.onWrapperResize=function(Ae){var Ie=Ae[0];if(Ie){var Fe=Ie.contentRect;he.wrapperWidth=Fe.width,he.wrapperHeight=Fe.height}},he.onContentResize=function(Ae){var Ie=Ae[0];if(Ie){var Fe=Ie.contentRect;he.contentWidth=Fe.width,he.contentHeight=Fe.height}},he.onVirtualScroll=function(Ae){var Ie=Ae.deltaY,Fe=Ae.deltaX,Ne=Ae.originalEvent;if(!(he.gestureDirection==="vertical"&&Ie===0||he.gestureDirection==="horizontal"&&Fe===0)){var $e=!!Ne.composedPath().find(function(ze){return ze.hasAttribute&&ze.hasAttribute("data-lenis-prevent")});Ne.ctrlKey||$e||(he.smooth=Ne.changedTouches?he.smoothTouch:he.options.smooth,he.stopped?Ne.preventDefault():he.smooth&&Ne.buttons!==4&&(he.smooth&&Ne.preventDefault(),he.targetScroll-=he.gestureDirection==="both"?Fe+Ie:he.gestureDirection==="horizontal"?Fe:Ie,he.scrollTo(he.targetScroll)))}},he.onScroll=function(Ae){he.isScrolling&&he.smooth||(he.targetScroll=he.scroll=he.lastScroll=he.wrapperNode[he.scrollProperty],he.notify())},window.lenisVersion="0.2.28",he.options={duration:ue,easing:pe,smooth:xe,mouseMultiplier:_e,smoothTouch:ye,touchMultiplier:we,direction:Te,gestureDirection:Be,infinite:De,wrapper:Le,content:Me},he.duration=ue,he.easing=pe,he.smooth=xe,he.mouseMultiplier=_e,he.smoothTouch=ye,he.touchMultiplier=we,he.direction=Te,he.gestureDirection=Be,he.infinite=De,he.wrapperNode=Le,he.contentNode=Me,he.wrapperNode.addEventListener("scroll",he.onScroll),he.wrapperNode===window?(he.wrapperNode.addEventListener("resize",he.onWindowResize),he.onWindowResize()):(he.wrapperHeight=he.wrapperNode.offsetHeight,he.wrapperWidth=he.wrapperNode.offsetWidth,he.wrapperObserver=new ResizeObserver(he.onWrapperResize),he.wrapperObserver.observe(he.wrapperNode)),he.contentHeight=he.contentNode.offsetHeight,he.contentWidth=he.contentNode.offsetWidth,he.contentObserver=new ResizeObserver(he.onContentResize),he.contentObserver.observe(he.contentNode),he.targetScroll=he.scroll=he.lastScroll=he.wrapperNode[he.scrollProperty],he.animate=new a$1;var Ee=((ae=navigator)==null||(oe=ae.userAgentData)==null?void 0:oe.platform)||((le=navigator)==null?void 0:le.platform)||"unknown";return he.virtualScroll=new e$1({el:he.wrapperNode,firefoxMultiplier:50,mouseMultiplier:he.mouseMultiplier*(Ee.includes("Win")||Ee.includes("Linux")?.84:.4),touchMultiplier:he.touchMultiplier,passive:!1,useKeyboard:!1,useTouch:!0}),he.virtualScroll.on(he.onVirtualScroll),he}te=ie,(ee=re).prototype=Object.create(te.prototype),ee.prototype.constructor=ee,n$1(ee,te);var ne=re.prototype;return ne.start=function(){var se=this.wrapperNode;this.wrapperNode===window&&(se=document.documentElement),se.classList.remove("lenis-stopped"),this.stopped=!1},ne.stop=function(){var se=this.wrapperNode;this.wrapperNode===window&&(se=document.documentElement),se.classList.add("lenis-stopped"),this.stopped=!0,this.animate.stop()},ne.destroy=function(){var se;this.wrapperNode===window&&this.wrapperNode.removeEventListener("resize",this.onWindowResize),this.wrapperNode.removeEventListener("scroll",this.onScroll),this.virtualScroll.destroy(),(se=this.wrapperObserver)==null||se.disconnect(),this.contentObserver.disconnect()},ne.raf=function(se){var ae=se-(this.now||0);this.now=se,!this.stopped&&this.smooth&&(this.lastScroll=this.scroll,this.animate.raf(.001*ae),this.scroll===this.targetScroll&&(this.lastScroll=this.scroll),this.isScrolling&&(this.setScroll(this.scroll),this.notify()),this.isScrolling=this.scroll!==this.targetScroll)},ne.setScroll=function(se){var ae=this.infinite?s$1(se,this.limit):se;this.direction==="horizontal"?this.wrapperNode.scrollTo(ae,0):this.wrapperNode.scrollTo(0,ae)},ne.notify=function(){var se=this.infinite?s$1(this.scroll,this.limit):this.scroll;this.emit("scroll",{scroll:se,limit:this.limit,velocity:this.velocity,direction:this.velocity===0?0:this.velocity>0?1:-1,progress:se/this.limit})},ne.scrollTo=function(se,ae){var oe=ae===void 0?{}:ae,le=oe.offset,he=le===void 0?0:le,ce=oe.immediate,de=ce!==void 0&&ce,ue=oe.duration,fe=ue===void 0?this.duration:ue,pe=oe.easing,me=pe===void 0?this.easing:pe;if(se!=null&&!this.stopped){var xe;if(typeof se=="number")xe=se;else if(se==="top"||se==="#top")xe=0;else if(se==="bottom")xe=this.limit;else{var ge;if(typeof se=="string")ge=document.querySelector(se);else{if(se==null||!se.nodeType)return;ge=se}if(!ge)return;var _e=0;if(this.wrapperNode!==window){var ve=this.wrapperNode.getBoundingClientRect();_e=this.direction==="horizontal"?ve.left:ve.top}var ye=ge.getBoundingClientRect();xe=(this.direction==="horizontal"?ye.left:ye.top)+this.scroll-_e}xe+=he,this.targetScroll=this.infinite?xe:Math.max(0,Math.min(xe,this.limit)),!this.smooth||de?(this.animate.stop(),this.scroll=this.lastScroll=this.targetScroll,this.setScroll(this.targetScroll)):this.animate.to(this,{duration:fe,easing:me,scroll:this.targetScroll})}},o$1(re,[{key:"scrollProperty",get:function(){return this.wrapperNode===window?this.direction==="horizontal"?"scrollX":"scrollY":this.direction==="horizontal"?"scrollLeft":"scrollTop"}},{key:"limit",get:function(){return this.direction==="horizontal"?this.contentWidth-this.wrapperWidth:this.contentHeight-this.wrapperHeight}},{key:"velocity",get:function(){return this.scroll-this.lastScroll}}]),re}(TinyEmitter);class Scroll{constructor(){this.lenis=new c$1({duration:.8,easing:re=>Math.min(1,1.001-Math.pow(2,-10*re)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1.2,smoothTouch:!1});let ee=this.lenis;function te(re){ee.raf(re),requestAnimationFrame(te)}requestAnimationFrame(te)}}gsapWithCSS.registerPlugin(ScrollTrigger);class Utils{constructor(){gsapWithCSS.set($(".nav"),{autoAlpha:1}),$(".year").text(new Date().getFullYear())}}class Switcher{constructor(){let ee=$("html");$(".nav__switcher").on("click",()=>{ee.hasClass("light-theme")?(ee.removeClass("light-theme"),api.set("theme","dark",{expires:7})):(ee.addClass("light-theme"),api.set("theme","light",{expires:7}))}),api.get("theme")==="light"&&ee.addClass("light-theme")}}gsapWithCSS.registerPlugin(SplitText);class SplitTextResize{constructor(ee,te){let re=window.innerWidth;const ne=()=>{let ae=window.innerWidth;re!==ae&&(ee.revert(),te()),re=window.innerWidth};function se(ae){let oe;return function(le){oe&&clearTimeout(oe),oe=setTimeout(ae,300,le)}}window.addEventListener("resize",se(function(ae){ne()}))}}gsapWithCSS.registerPlugin(ScrollTrigger,SplitText);class Title{constructor(){gsapWithCSS.matchMedia();let ee="top 85%",te,re,ne;const se=()=>{let ce=$("[text-char]");te=new SplitText(ce,{type:"lines, chars"}),$(ce).each(function(){let de=$(this),ue=de.find(te.chars),fe=gsapWithCSS.timeline({paused:!0,defaults:{duration:1,ease:"power3",stagger:.06,force3D:!0}});fe.fromTo(ue,{rotateY:90,z:0},{rotateY:0,z:0}),ScrollTrigger.create({trigger:de,start:ee,onEnter:()=>fe.play()})})},ae=()=>{let ce=$("[text-char-split]");ne=new SplitText(ce,{type:"lines, words, chars"}),$(ce).each(function(){let de=$(this),ue=de.find(ne.chars),fe=de.find(ne.lines),pe=gsapWithCSS.timeline({paused:!0,defaults:{duration:1,ease:"power3",stagger:.06}}),me=gsapWithCSS.utils.wrap(["top","bottom"]),xe=$(fe).eq(0).find(ue).length;pe.fromTo($(fe).eq(0).find(ue),{scaleY:0},{scaleY:1,transformOrigin:me}).fromTo($(fe).eq(1).find(ue),{scaleY:0},{scaleY:1,transformOrigin:"bottom"},`< ${xe*.02}`),ScrollTrigger.create({trigger:de,start:ee,onEnter:()=>pe.play()})})},oe=()=>{let ce=$("[text-line]");re=new SplitText(ce,{type:"lines",linesClass:"text-line"}),$(ce).each(function(){let de=$(this),ue=de.find(re.lines),fe=null;const pe=()=>{if(fe)return fe;fe=1,de.find('[img-popup="trigger"]').length>0&&de.find("span, a").each((ge,_e)=>{let ve=$(_e),ye=new SplitText(ve,{type:"chars, lines",linesClass:"span-line"});gsapWithCSS.to(ye.chars,{color:"#f10000",delay:ge*.3,duration:.6,stagger:.02,onStart:()=>$(ve).addClass("active")})})};let me=gsapWithCSS.timeline({paused:!0,defaults:{duration:1.4,ease:"power3",stagger:.12},onUpdate:()=>{me.progress()>.4&&pe()}});me.fromTo(ue,{opacity:0,y:30},{opacity:1,y:0}),ScrollTrigger.create({trigger:de,start:ee,onEnter:()=>me.play()})})};new FontFaceObserver("Right Grotesk").load().then(function(){se(),new SplitTextResize(te,se),ae(),new SplitTextResize(ne,ae)}),new FontFaceObserver("Neue Haas Grotesk").load().then(function(){oe(),new SplitTextResize(re,oe)})}}var lottie={exports:{}};(function(module,exports){typeof navigator!="undefined"&&function(ie,ee){module.exports=ee()}(commonjsGlobal$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(ee){_useWebWorker=!!ee},getWebWorker=function(){return _useWebWorker},setLocationHref=function(ee){locationHref=ee},getLocationHref=function(){return locationHref};function createTag(ie){return document.createElement(ie)}function extendPrototype(ie,ee){var te,re=ie.length,ne;for(te=0;te<re;te+=1){ne=ie[te].prototype;for(var se in ne)Object.prototype.hasOwnProperty.call(ne,se)&&(ee.prototype[se]=ne[se])}}function getDescriptor(ie,ee){return Object.getOwnPropertyDescriptor(ie,ee)}function createProxyFunction(ie){function ee(){}return ee.prototype=ie,ee}var audioControllerFactory=function(){function ie(ee){this.audios=[],this.audioFactory=ee,this._volume=1,this._isMuted=!1}return ie.prototype={addAudio:function(te){this.audios.push(te)},pause:function(){var te,re=this.audios.length;for(te=0;te<re;te+=1)this.audios[te].pause()},resume:function(){var te,re=this.audios.length;for(te=0;te<re;te+=1)this.audios[te].resume()},setRate:function(te){var re,ne=this.audios.length;for(re=0;re<ne;re+=1)this.audios[re].setRate(te)},createAudio:function(te){return this.audioFactory?this.audioFactory(te):window.Howl?new window.Howl({src:[te]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(te){this.audioFactory=te},setVolume:function(te){this._volume=te,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var te,re=this.audios.length;for(te=0;te<re;te+=1)this.audios[te].volume(this._volume*(this._isMuted?0:1))}},function(){return new ie}}(),createTypedArray=function(){function ie(te,re){var ne=0,se=[],ae;switch(te){case"int16":case"uint8c":ae=1;break;default:ae=1.1;break}for(ne=0;ne<re;ne+=1)se.push(ae);return se}function ee(te,re){return te==="float32"?new Float32Array(re):te==="int16"?new Int16Array(re):te==="uint8c"?new Uint8ClampedArray(re):ie(te,re)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?ee:ie}();function createSizedArray(ie){return Array.apply(null,{length:ie})}function _typeof$6(ie){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(te){return typeof te}:_typeof$6=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$6(ie)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var ie=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],ee,te=ie.length;for(ee=0;ee<te;ee+=1)BMMath[ie[ee]]=Math[ie[ee]]})(),BMMath.random=Math.random,BMMath.abs=function(ie){var ee=_typeof$6(ie);if(ee==="object"&&ie.length){var te=createSizedArray(ie.length),re,ne=ie.length;for(re=0;re<ne;re+=1)te[re]=Math.abs(ie[re]);return te}return Math.abs(ie)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(ie){ie.style.position="absolute",ie.style.top=0,ie.style.left=0,ie.style.display="block",ie.style.transformOrigin="0 0",ie.style.webkitTransformOrigin="0 0",ie.style.backfaceVisibility="visible",ie.style.webkitBackfaceVisibility="visible",ie.style.transformStyle="preserve-3d",ie.style.webkitTransformStyle="preserve-3d",ie.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(ie,ee,te,re){this.type=ie,this.currentTime=ee,this.totalTime=te,this.direction=re<0?-1:1}function BMCompleteEvent(ie,ee){this.type=ie,this.direction=ee<0?-1:1}function BMCompleteLoopEvent(ie,ee,te,re){this.type=ie,this.currentLoop=te,this.totalLoops=ee,this.direction=re<0?-1:1}function BMSegmentStartEvent(ie,ee,te){this.type=ie,this.firstFrame=ee,this.totalFrames=te}function BMDestroyEvent(ie,ee){this.type=ie,this.target=ee}function BMRenderFrameErrorEvent(ie,ee){this.type="renderFrameError",this.nativeError=ie,this.currentTime=ee}function BMConfigErrorEvent(ie){this.type="configError",this.nativeError=ie}var createElementID=function(){var ie=0;return function(){return ie+=1,idPrefix$1+"__lottie_element_"+ie}}();function HSVtoRGB(ie,ee,te){var re,ne,se,ae,oe,le,he,ce;switch(ae=Math.floor(ie*6),oe=ie*6-ae,le=te*(1-ee),he=te*(1-oe*ee),ce=te*(1-(1-oe)*ee),ae%6){case 0:re=te,ne=ce,se=le;break;case 1:re=he,ne=te,se=le;break;case 2:re=le,ne=te,se=ce;break;case 3:re=le,ne=he,se=te;break;case 4:re=ce,ne=le,se=te;break;case 5:re=te,ne=le,se=he;break}return[re,ne,se]}function RGBtoHSV(ie,ee,te){var re=Math.max(ie,ee,te),ne=Math.min(ie,ee,te),se=re-ne,ae,oe=re===0?0:se/re,le=re/255;switch(re){case ne:ae=0;break;case ie:ae=ee-te+se*(ee<te?6:0),ae/=6*se;break;case ee:ae=te-ie+se*2,ae/=6*se;break;case te:ae=ie-ee+se*4,ae/=6*se;break}return[ae,oe,le]}function addSaturationToRGB(ie,ee){var te=RGBtoHSV(ie[0]*255,ie[1]*255,ie[2]*255);return te[1]+=ee,te[1]>1?te[1]=1:te[1]<=0&&(te[1]=0),HSVtoRGB(te[0],te[1],te[2])}function addBrightnessToRGB(ie,ee){var te=RGBtoHSV(ie[0]*255,ie[1]*255,ie[2]*255);return te[2]+=ee,te[2]>1?te[2]=1:te[2]<0&&(te[2]=0),HSVtoRGB(te[0],te[1],te[2])}function addHueToRGB(ie,ee){var te=RGBtoHSV(ie[0]*255,ie[1]*255,ie[2]*255);return te[0]+=ee/360,te[0]>1?te[0]-=1:te[0]<0&&(te[0]+=1),HSVtoRGB(te[0],te[1],te[2])}var rgbToHex=function(){var ie=[],ee,te;for(ee=0;ee<256;ee+=1)te=ee.toString(16),ie[ee]=te.length===1?"0"+te:te;return function(re,ne,se){return re<0&&(re=0),ne<0&&(ne=0),se<0&&(se=0),"#"+ie[re]+ie[ne]+ie[se]}}(),setSubframeEnabled=function(ee){subframeEnabled=!!ee},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(ee){expressionsPlugin=ee},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(ee){expressionsInterfaces=ee},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(ee){defaultCurveSegments=ee},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(ee){idPrefix$1=ee};function createNS(ie){return document.createElementNS(svgNS,ie)}function _typeof$5(ie){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(te){return typeof te}:_typeof$5=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$5(ie)}var dataManager=function(){var ie=1,ee=[],te,re,ne={onmessage:function(){},postMessage:function(fe){te({data:fe})}},se={postMessage:function(fe){ne.onmessage({data:fe})}};function ae(ue){if(window.Worker&&window.Blob&&getWebWorker()){var fe=new Blob(["var _workerSelf = self; self.onmessage = ",ue.toString()],{type:"text/javascript"}),pe=URL.createObjectURL(fe);return new Worker(pe)}return te=ue,ne}function oe(){re||(re=ae(function(fe){function pe(){function xe(ke,Me){var Ee,Ae,Ie=ke.length,Fe,Ne,$e,ze;for(Ae=0;Ae<Ie;Ae+=1)if(Ee=ke[Ae],"ks"in Ee&&!Ee.completed){if(Ee.completed=!0,Ee.hasMask){var Xe=Ee.masksProperties;for(Ne=Xe.length,Fe=0;Fe<Ne;Fe+=1)if(Xe[Fe].pt.k.i)be(Xe[Fe].pt.k);else for(ze=Xe[Fe].pt.k.length,$e=0;$e<ze;$e+=1)Xe[Fe].pt.k[$e].s&&be(Xe[Fe].pt.k[$e].s[0]),Xe[Fe].pt.k[$e].e&&be(Xe[Fe].pt.k[$e].e[0])}Ee.ty===0?(Ee.layers=ve(Ee.refId,Me),xe(Ee.layers,Me)):Ee.ty===4?ye(Ee.shapes):Ee.ty===5&&Re(Ee)}}function ge(ke,Me){if(ke){var Ee=0,Ae=ke.length;for(Ee=0;Ee<Ae;Ee+=1)ke[Ee].t===1&&(ke[Ee].data.layers=ve(ke[Ee].data.refId,Me),xe(ke[Ee].data.layers,Me))}}function _e(ke,Me){for(var Ee=0,Ae=Me.length;Ee<Ae;){if(Me[Ee].id===ke)return Me[Ee];Ee+=1}return null}function ve(ke,Me){var Ee=_e(ke,Me);return Ee?Ee.layers.__used?JSON.parse(JSON.stringify(Ee.layers)):(Ee.layers.__used=!0,Ee.layers):null}function ye(ke){var Me,Ee=ke.length,Ae,Ie;for(Me=Ee-1;Me>=0;Me-=1)if(ke[Me].ty==="sh")if(ke[Me].ks.k.i)be(ke[Me].ks.k);else for(Ie=ke[Me].ks.k.length,Ae=0;Ae<Ie;Ae+=1)ke[Me].ks.k[Ae].s&&be(ke[Me].ks.k[Ae].s[0]),ke[Me].ks.k[Ae].e&&be(ke[Me].ks.k[Ae].e[0]);else ke[Me].ty==="gr"&&ye(ke[Me].it)}function be(ke){var Me,Ee=ke.i.length;for(Me=0;Me<Ee;Me+=1)ke.i[Me][0]+=ke.v[Me][0],ke.i[Me][1]+=ke.v[Me][1],ke.o[Me][0]+=ke.v[Me][0],ke.o[Me][1]+=ke.v[Me][1]}function we(ke,Me){var Ee=Me?Me.split("."):[100,100,100];return ke[0]>Ee[0]?!0:Ee[0]>ke[0]?!1:ke[1]>Ee[1]?!0:Ee[1]>ke[1]?!1:ke[2]>Ee[2]?!0:Ee[2]>ke[2]?!1:null}var Se=function(){var ke=[4,4,14];function Me(Ae){var Ie=Ae.t.d;Ae.t.d={k:[{s:Ie,t:0}]}}function Ee(Ae){var Ie,Fe=Ae.length;for(Ie=0;Ie<Fe;Ie+=1)Ae[Ie].ty===5&&Me(Ae[Ie])}return function(Ae){if(we(ke,Ae.v)&&(Ee(Ae.layers),Ae.assets)){var Ie,Fe=Ae.assets.length;for(Ie=0;Ie<Fe;Ie+=1)Ae.assets[Ie].layers&&Ee(Ae.assets[Ie].layers)}}}(),Te=function(){var ke=[4,7,99];return function(Me){if(Me.chars&&!we(ke,Me.v)){var Ee,Ae=Me.chars.length;for(Ee=0;Ee<Ae;Ee+=1){var Ie=Me.chars[Ee];Ie.data&&Ie.data.shapes&&(ye(Ie.data.shapes),Ie.data.ip=0,Ie.data.op=99999,Ie.data.st=0,Ie.data.sr=1,Ie.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Me.chars[Ee].t||(Ie.data.shapes.push({ty:"no"}),Ie.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Pe=function(){var ke=[5,7,15];function Me(Ae){var Ie=Ae.t.p;typeof Ie.a=="number"&&(Ie.a={a:0,k:Ie.a}),typeof Ie.p=="number"&&(Ie.p={a:0,k:Ie.p}),typeof Ie.r=="number"&&(Ie.r={a:0,k:Ie.r})}function Ee(Ae){var Ie,Fe=Ae.length;for(Ie=0;Ie<Fe;Ie+=1)Ae[Ie].ty===5&&Me(Ae[Ie])}return function(Ae){if(we(ke,Ae.v)&&(Ee(Ae.layers),Ae.assets)){var Ie,Fe=Ae.assets.length;for(Ie=0;Ie<Fe;Ie+=1)Ae.assets[Ie].layers&&Ee(Ae.assets[Ie].layers)}}}(),Be=function(){var ke=[4,1,9];function Me(Ae){var Ie,Fe=Ae.length,Ne,$e;for(Ie=0;Ie<Fe;Ie+=1)if(Ae[Ie].ty==="gr")Me(Ae[Ie].it);else if(Ae[Ie].ty==="fl"||Ae[Ie].ty==="st")if(Ae[Ie].c.k&&Ae[Ie].c.k[0].i)for($e=Ae[Ie].c.k.length,Ne=0;Ne<$e;Ne+=1)Ae[Ie].c.k[Ne].s&&(Ae[Ie].c.k[Ne].s[0]/=255,Ae[Ie].c.k[Ne].s[1]/=255,Ae[Ie].c.k[Ne].s[2]/=255,Ae[Ie].c.k[Ne].s[3]/=255),Ae[Ie].c.k[Ne].e&&(Ae[Ie].c.k[Ne].e[0]/=255,Ae[Ie].c.k[Ne].e[1]/=255,Ae[Ie].c.k[Ne].e[2]/=255,Ae[Ie].c.k[Ne].e[3]/=255);else Ae[Ie].c.k[0]/=255,Ae[Ie].c.k[1]/=255,Ae[Ie].c.k[2]/=255,Ae[Ie].c.k[3]/=255}function Ee(Ae){var Ie,Fe=Ae.length;for(Ie=0;Ie<Fe;Ie+=1)Ae[Ie].ty===4&&Me(Ae[Ie].shapes)}return function(Ae){if(we(ke,Ae.v)&&(Ee(Ae.layers),Ae.assets)){var Ie,Fe=Ae.assets.length;for(Ie=0;Ie<Fe;Ie+=1)Ae.assets[Ie].layers&&Ee(Ae.assets[Ie].layers)}}}(),Ce=function(){var ke=[4,4,18];function Me(Ae){var Ie,Fe=Ae.length,Ne,$e;for(Ie=Fe-1;Ie>=0;Ie-=1)if(Ae[Ie].ty==="sh")if(Ae[Ie].ks.k.i)Ae[Ie].ks.k.c=Ae[Ie].closed;else for($e=Ae[Ie].ks.k.length,Ne=0;Ne<$e;Ne+=1)Ae[Ie].ks.k[Ne].s&&(Ae[Ie].ks.k[Ne].s[0].c=Ae[Ie].closed),Ae[Ie].ks.k[Ne].e&&(Ae[Ie].ks.k[Ne].e[0].c=Ae[Ie].closed);else Ae[Ie].ty==="gr"&&Me(Ae[Ie].it)}function Ee(Ae){var Ie,Fe,Ne=Ae.length,$e,ze,Xe,Je;for(Fe=0;Fe<Ne;Fe+=1){if(Ie=Ae[Fe],Ie.hasMask){var We=Ie.masksProperties;for(ze=We.length,$e=0;$e<ze;$e+=1)if(We[$e].pt.k.i)We[$e].pt.k.c=We[$e].cl;else for(Je=We[$e].pt.k.length,Xe=0;Xe<Je;Xe+=1)We[$e].pt.k[Xe].s&&(We[$e].pt.k[Xe].s[0].c=We[$e].cl),We[$e].pt.k[Xe].e&&(We[$e].pt.k[Xe].e[0].c=We[$e].cl)}Ie.ty===4&&Me(Ie.shapes)}}return function(Ae){if(we(ke,Ae.v)&&(Ee(Ae.layers),Ae.assets)){var Ie,Fe=Ae.assets.length;for(Ie=0;Ie<Fe;Ie+=1)Ae.assets[Ie].layers&&Ee(Ae.assets[Ie].layers)}}}();function De(ke){ke.__complete||(Be(ke),Se(ke),Te(ke),Pe(ke),Ce(ke),xe(ke.layers,ke.assets),ge(ke.chars,ke.assets),ke.__complete=!0)}function Re(ke){ke.t.a.length===0&&"m"in ke.t.p}var Le={};return Le.completeData=De,Le.checkColors=Be,Le.checkChars=Te,Le.checkPathProperties=Pe,Le.checkShapes=Ce,Le.completeLayers=xe,Le}if(se.dataManager||(se.dataManager=pe()),se.assetLoader||(se.assetLoader=function(){function xe(_e){var ve=_e.getResponseHeader("content-type");return ve&&_e.responseType==="json"&&ve.indexOf("json")!==-1||_e.response&&_typeof$5(_e.response)==="object"?_e.response:_e.response&&typeof _e.response=="string"?JSON.parse(_e.response):_e.responseText?JSON.parse(_e.responseText):null}function ge(_e,ve,ye,be){var we,Se=new XMLHttpRequest;try{Se.responseType="json"}catch{}Se.onreadystatechange=function(){if(Se.readyState===4)if(Se.status===200)we=xe(Se),ye(we);else try{we=xe(Se),ye(we)}catch(Te){be&&be(Te)}};try{Se.open(["G","E","T"].join(""),_e,!0)}catch{Se.open(["G","E","T"].join(""),ve+"/"+_e,!0)}Se.send()}return{load:ge}}()),fe.data.type==="loadAnimation")se.assetLoader.load(fe.data.path,fe.data.fullPath,function(xe){se.dataManager.completeData(xe),se.postMessage({id:fe.data.id,payload:xe,status:"success"})},function(){se.postMessage({id:fe.data.id,status:"error"})});else if(fe.data.type==="complete"){var me=fe.data.animation;se.dataManager.completeData(me),se.postMessage({id:fe.data.id,payload:me,status:"success"})}else fe.data.type==="loadData"&&se.assetLoader.load(fe.data.path,fe.data.fullPath,function(xe){se.postMessage({id:fe.data.id,payload:xe,status:"success"})},function(){se.postMessage({id:fe.data.id,status:"error"})})}),re.onmessage=function(ue){var fe=ue.data,pe=fe.id,me=ee[pe];ee[pe]=null,fe.status==="success"?me.onComplete(fe.payload):me.onError&&me.onError()})}function le(ue,fe){ie+=1;var pe="processId_"+ie;return ee[pe]={onComplete:ue,onError:fe},pe}function he(ue,fe,pe){oe();var me=le(fe,pe);re.postMessage({type:"loadAnimation",path:ue,fullPath:window.location.origin+window.location.pathname,id:me})}function ce(ue,fe,pe){oe();var me=le(fe,pe);re.postMessage({type:"loadData",path:ue,fullPath:window.location.origin+window.location.pathname,id:me})}function de(ue,fe,pe){oe();var me=le(fe,pe);re.postMessage({type:"complete",animation:ue,id:me})}return{loadAnimation:he,loadData:ce,completeAnimation:de}}(),ImagePreloader=function(){var ie=function(){var ge=createTag("canvas");ge.width=1,ge.height=1;var _e=ge.getContext("2d");return _e.fillStyle="rgba(0,0,0,0)",_e.fillRect(0,0,1,1),ge}();function ee(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function te(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function re(ge,_e,ve){var ye="";if(ge.e)ye=ge.p;else if(_e){var be=ge.p;be.indexOf("images/")!==-1&&(be=be.split("/")[1]),ye=_e+be}else ye=ve,ye+=ge.u?ge.u:"",ye+=ge.p;return ye}function ne(ge){var _e=0,ve=setInterval(function(){var ye=ge.getBBox();(ye.width||_e>500)&&(this._imageLoaded(),clearInterval(ve)),_e+=1}.bind(this),50)}function se(ge){var _e=re(ge,this.assetsPath,this.path),ve=createNS("image");isSafari?this.testImageLoaded(ve):ve.addEventListener("load",this._imageLoaded,!1),ve.addEventListener("error",function(){ye.img=ie,this._imageLoaded()}.bind(this),!1),ve.setAttributeNS("http://www.w3.org/1999/xlink","href",_e),this._elementHelper.append?this._elementHelper.append(ve):this._elementHelper.appendChild(ve);var ye={img:ve,assetData:ge};return ye}function ae(ge){var _e=re(ge,this.assetsPath,this.path),ve=createTag("img");ve.crossOrigin="anonymous",ve.addEventListener("load",this._imageLoaded,!1),ve.addEventListener("error",function(){ye.img=ie,this._imageLoaded()}.bind(this),!1),ve.src=_e;var ye={img:ve,assetData:ge};return ye}function oe(ge){var _e={assetData:ge},ve=re(ge,this.assetsPath,this.path);return dataManager.loadData(ve,function(ye){_e.img=ye,this._footageLoaded()}.bind(this),function(){_e.img={},this._footageLoaded()}.bind(this)),_e}function le(ge,_e){this.imagesLoadedCb=_e;var ve,ye=ge.length;for(ve=0;ve<ye;ve+=1)ge[ve].layers||(!ge[ve].t||ge[ve].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(ge[ve]))):ge[ve].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(ge[ve]))))}function he(ge){this.path=ge||""}function ce(ge){this.assetsPath=ge||""}function de(ge){for(var _e=0,ve=this.images.length;_e<ve;){if(this.images[_e].assetData===ge)return this.images[_e].img;_e+=1}return null}function ue(){this.imagesLoadedCb=null,this.images.length=0}function fe(){return this.totalImages===this.loadedAssets}function pe(){return this.totalFootages===this.loadedFootagesCount}function me(ge,_e){ge==="svg"?(this._elementHelper=_e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function xe(){this._imageLoaded=ee.bind(this),this._footageLoaded=te.bind(this),this.testImageLoaded=ne.bind(this),this.createFootageData=oe.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return xe.prototype={loadAssets:le,setAssetsPath:ce,setPath:he,loadedImages:fe,loadedFootages:pe,destroy:ue,getAsset:de,createImgData:ae,createImageData:se,imageLoaded:ee,footageLoaded:te,setCacheType:me},xe}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(ee,te){if(this._cbs[ee])for(var re=this._cbs[ee],ne=0;ne<re.length;ne+=1)re[ne](te)},addEventListener:function(ee,te){return this._cbs[ee]||(this._cbs[ee]=[]),this._cbs[ee].push(te),function(){this.removeEventListener(ee,te)}.bind(this)},removeEventListener:function(ee,te){if(!te)this._cbs[ee]=null;else if(this._cbs[ee]){for(var re=0,ne=this._cbs[ee].length;re<ne;)this._cbs[ee][re]===te&&(this._cbs[ee].splice(re,1),re-=1,ne-=1),re+=1;this._cbs[ee].length||(this._cbs[ee]=null)}}};var markerParser=function(){function ie(ee){for(var te=ee.split(`\r
`),re={},ne,se=0,ae=0;ae<te.length;ae+=1)ne=te[ae].split(":"),ne.length===2&&(re[ne[0]]=ne[1].trim(),se+=1);if(se===0)throw new Error;return re}return function(ee){for(var te=[],re=0;re<ee.length;re+=1){var ne=ee[re],se={time:ne.tm,duration:ne.dr};try{se.payload=JSON.parse(ee[re].cm)}catch{try{se.payload=ie(ee[re].cm)}catch{se.payload={name:ee[re].cm}}}te.push(se)}return te}}(),ProjectInterface=function(){function ie(ee){this.compositions.push(ee)}return function(){function ee(te){for(var re=0,ne=this.compositions.length;re<ne;){if(this.compositions[re].data&&this.compositions[re].data.nm===te)return this.compositions[re].prepareFrame&&this.compositions[re].data.xt&&this.compositions[re].prepareFrame(this.currentFrame),this.compositions[re].compInterface;re+=1}return null}return ee.compositions=[],ee.currentFrame=0,ee.registerComposition=ie,ee}}(),renderers={},registerRenderer=function(ee,te){renderers[ee]=te};function getRenderer(ie){return renderers[ie]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var ie in renderers)if(renderers[ie])return ie;return""}function _typeof$4(ie){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(te){return typeof te}:_typeof$4=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$4(ie)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(ie){(ie.wrapper||ie.container)&&(this.wrapper=ie.wrapper||ie.container);var ee="svg";ie.animType?ee=ie.animType:ie.renderer&&(ee=ie.renderer);var te=getRenderer(ee);this.renderer=new te(this,ie.rendererSettings),this.imagePreloader.setCacheType(ee,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=ee,ie.loop===""||ie.loop===null||ie.loop===void 0||ie.loop===!0?this.loop=!0:ie.loop===!1?this.loop=!1:this.loop=parseInt(ie.loop,10),this.autoplay="autoplay"in ie?ie.autoplay:!0,this.name=ie.name?ie.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(ie,"autoloadSegments")?ie.autoloadSegments:!0,this.assetsPath=ie.assetsPath,this.initialSegment=ie.initialSegment,ie.audioFactory&&this.audioController.setAudioFactory(ie.audioFactory),ie.animationData?this.setupAnimation(ie.animationData):ie.path&&(ie.path.lastIndexOf("\\")!==-1?this.path=ie.path.substr(0,ie.path.lastIndexOf("\\")+1):this.path=ie.path.substr(0,ie.path.lastIndexOf("/")+1),this.fileName=ie.path.substr(ie.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(ie.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(ie){dataManager.completeAnimation(ie,this.configAnimation)},AnimationItem.prototype.setData=function(ie,ee){ee&&_typeof$4(ee)!=="object"&&(ee=JSON.parse(ee));var te={wrapper:ie,animationData:ee},re=ie.attributes;te.path=re.getNamedItem("data-animation-path")?re.getNamedItem("data-animation-path").value:re.getNamedItem("data-bm-path")?re.getNamedItem("data-bm-path").value:re.getNamedItem("bm-path")?re.getNamedItem("bm-path").value:"",te.animType=re.getNamedItem("data-anim-type")?re.getNamedItem("data-anim-type").value:re.getNamedItem("data-bm-type")?re.getNamedItem("data-bm-type").value:re.getNamedItem("bm-type")?re.getNamedItem("bm-type").value:re.getNamedItem("data-bm-renderer")?re.getNamedItem("data-bm-renderer").value:re.getNamedItem("bm-renderer")?re.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var ne=re.getNamedItem("data-anim-loop")?re.getNamedItem("data-anim-loop").value:re.getNamedItem("data-bm-loop")?re.getNamedItem("data-bm-loop").value:re.getNamedItem("bm-loop")?re.getNamedItem("bm-loop").value:"";ne==="false"?te.loop=!1:ne==="true"?te.loop=!0:ne!==""&&(te.loop=parseInt(ne,10));var se=re.getNamedItem("data-anim-autoplay")?re.getNamedItem("data-anim-autoplay").value:re.getNamedItem("data-bm-autoplay")?re.getNamedItem("data-bm-autoplay").value:re.getNamedItem("bm-autoplay")?re.getNamedItem("bm-autoplay").value:!0;te.autoplay=se!=="false",te.name=re.getNamedItem("data-name")?re.getNamedItem("data-name").value:re.getNamedItem("data-bm-name")?re.getNamedItem("data-bm-name").value:re.getNamedItem("bm-name")?re.getNamedItem("bm-name").value:"";var ae=re.getNamedItem("data-anim-prerender")?re.getNamedItem("data-anim-prerender").value:re.getNamedItem("data-bm-prerender")?re.getNamedItem("data-bm-prerender").value:re.getNamedItem("bm-prerender")?re.getNamedItem("bm-prerender").value:"";ae==="false"&&(te.prerender=!1),te.path?this.setParams(te):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(ie){ie.op>this.animationData.op&&(this.animationData.op=ie.op,this.totalFrames=Math.floor(ie.op-this.animationData.ip));var ee=this.animationData.layers,te,re=ee.length,ne=ie.layers,se,ae=ne.length;for(se=0;se<ae;se+=1)for(te=0;te<re;){if(ee[te].id===ne[se].id){ee[te]=ne[se];break}te+=1}if((ie.chars||ie.fonts)&&(this.renderer.globalData.fontManager.addChars(ie.chars),this.renderer.globalData.fontManager.addFonts(ie.fonts,this.renderer.globalData.defs)),ie.assets)for(re=ie.assets.length,te=0;te<re;te+=1)this.animationData.assets.push(ie.assets[te]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(ie){this.animationData=ie;var ee=getExpressionsPlugin();ee&&ee.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var ie=this.animationData.segments;if(!ie||ie.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var ee=ie.shift();this.timeCompleted=ee.time*this.frameRate;var te=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(te,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){var ie=this.animationData.segments;ie||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(ie){if(!!this.renderer)try{this.animationData=ie,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(ie),ie.assets||(ie.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(ie.assets),this.markers=markerParser(ie.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(ee){this.triggerConfigError(ee)}},AnimationItem.prototype.waitForFontsLoaded=function(){!this.renderer||(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var ie=getExpressionsPlugin();ie&&ie.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(ie,ee){var te=typeof ie=="number"?ie:void 0,re=typeof ee=="number"?ee:void 0;this.renderer.updateContainerSize(te,re)},AnimationItem.prototype.setSubframe=function(ie){this.isSubframeEnabled=!!ie},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(ie){this.triggerRenderFrameError(ie)}},AnimationItem.prototype.play=function(ie){ie&&this.name!==ie||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(ie){ie&&this.name!==ie||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(ie){ie&&this.name!==ie||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(ie){ie&&this.name!==ie||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(ie){for(var ee,te=0;te<this.markers.length;te+=1)if(ee=this.markers[te],ee.payload&&ee.payload.name===ie)return ee;return null},AnimationItem.prototype.goToAndStop=function(ie,ee,te){if(!(te&&this.name!==te)){var re=Number(ie);if(isNaN(re)){var ne=this.getMarkerData(ie);ne&&this.goToAndStop(ne.time,!0)}else ee?this.setCurrentRawFrameValue(ie):this.setCurrentRawFrameValue(ie*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(ie,ee,te){if(!(te&&this.name!==te)){var re=Number(ie);if(isNaN(re)){var ne=this.getMarkerData(ie);ne&&(ne.duration?this.playSegments([ne.time,ne.time+ne.duration],!0):this.goToAndStop(ne.time,!0))}else this.goToAndStop(re,ee,te);this.play()}},AnimationItem.prototype.advanceTime=function(ie){if(!(this.isPaused===!0||this.isLoaded===!1)){var ee=this.currentRawFrame+ie*this.frameModifier,te=!1;ee>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(ee>this.totalFrames?ee%this.totalFrames:0)||(te=!0,ee=this.totalFrames-1):ee>=this.totalFrames?(this.playCount+=1,this.checkSegments(ee%this.totalFrames)||(this.setCurrentRawFrameValue(ee%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(ee):ee<0?this.checkSegments(ee%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+ee%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(te=!0,ee=0)):this.setCurrentRawFrameValue(ee),te&&(this.setCurrentRawFrameValue(ee),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(ie,ee){this.playCount=0,ie[1]<ie[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=ie[0]-ie[1],this.timeCompleted=this.totalFrames,this.firstFrame=ie[1],this.setCurrentRawFrameValue(this.totalFrames-.001-ee)):ie[1]>ie[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=ie[1]-ie[0],this.timeCompleted=this.totalFrames,this.firstFrame=ie[0],this.setCurrentRawFrameValue(.001+ee)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(ie,ee){var te=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<ie?te=ie:this.currentRawFrame+this.firstFrame>ee&&(te=ee-ie)),this.firstFrame=ie,this.totalFrames=ee-ie,this.timeCompleted=this.totalFrames,te!==-1&&this.goToAndStop(te,!0)},AnimationItem.prototype.playSegments=function(ie,ee){if(ee&&(this.segments.length=0),_typeof$4(ie[0])==="object"){var te,re=ie.length;for(te=0;te<re;te+=1)this.segments.push(ie[te])}else this.segments.push(ie);this.segments.length&&ee&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(ie){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),ie&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(ie){return this.segments.length?(this.adjustSegment(this.segments.shift(),ie),!0):!1},AnimationItem.prototype.destroy=function(ie){ie&&this.name!==ie||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(ie){this.currentRawFrame=ie,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(ie){this.playSpeed=ie,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(ie){this.playDirection=ie<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(ie){this.loop=ie},AnimationItem.prototype.setVolume=function(ie,ee){ee&&this.name!==ee||this.audioController.setVolume(ie)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(ie){ie&&this.name!==ie||this.audioController.mute()},AnimationItem.prototype.unmute=function(ie){ie&&this.name!==ie||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(ie){var ee="";if(ie.e)ee=ie.p;else if(this.assetsPath){var te=ie.p;te.indexOf("images/")!==-1&&(te=te.split("/")[1]),ee=this.assetsPath+te}else ee=this.path,ee+=ie.u?ie.u:"",ee+=ie.p;return ee},AnimationItem.prototype.getAssetData=function(ie){for(var ee=0,te=this.assets.length;ee<te;){if(ie===this.assets[ee].id)return this.assets[ee];ee+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(ie){return ie?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(ie,ee,te){try{var re=this.renderer.getElementByPath(ie);re.updateDocumentData(ee,te)}catch{}},AnimationItem.prototype.trigger=function(ie){if(this._cbs&&this._cbs[ie])switch(ie){case"enterFrame":this.triggerEvent(ie,new BMEnterFrameEvent(ie,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(ie,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(ie,new BMCompleteLoopEvent(ie,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(ie,new BMCompleteEvent(ie,this.frameMult));break;case"segmentStart":this.triggerEvent(ie,new BMSegmentStartEvent(ie,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(ie,new BMDestroyEvent(ie,this));break;default:this.triggerEvent(ie)}ie==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(ie,this.currentFrame,this.totalFrames,this.frameMult)),ie==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(ie,this.loop,this.playCount,this.frameMult)),ie==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(ie,this.frameMult)),ie==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(ie,this.firstFrame,this.totalFrames)),ie==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(ie,this))},AnimationItem.prototype.triggerRenderFrameError=function(ie){var ee=new BMRenderFrameErrorEvent(ie,this.currentFrame);this.triggerEvent("error",ee),this.onError&&this.onError.call(this,ee)},AnimationItem.prototype.triggerConfigError=function(ie){var ee=new BMConfigErrorEvent(ie,this.currentFrame);this.triggerEvent("error",ee),this.onError&&this.onError.call(this,ee)};var animationManager=function(){var ie={},ee=[],te=0,re=0,ne=0,se=!0,ae=!1;function oe(Me){for(var Ee=0,Ae=Me.target;Ee<re;)ee[Ee].animation===Ae&&(ee.splice(Ee,1),Ee-=1,re-=1,Ae.isPaused||de()),Ee+=1}function le(Me,Ee){if(!Me)return null;for(var Ae=0;Ae<re;){if(ee[Ae].elem===Me&&ee[Ae].elem!==null)return ee[Ae].animation;Ae+=1}var Ie=new AnimationItem;return ue(Ie,Me),Ie.setData(Me,Ee),Ie}function he(){var Me,Ee=ee.length,Ae=[];for(Me=0;Me<Ee;Me+=1)Ae.push(ee[Me].animation);return Ae}function ce(){ne+=1,Be()}function de(){ne-=1}function ue(Me,Ee){Me.addEventListener("destroy",oe),Me.addEventListener("_active",ce),Me.addEventListener("_idle",de),ee.push({elem:Ee,animation:Me}),re+=1}function fe(Me){var Ee=new AnimationItem;return ue(Ee,null),Ee.setParams(Me),Ee}function pe(Me,Ee){var Ae;for(Ae=0;Ae<re;Ae+=1)ee[Ae].animation.setSpeed(Me,Ee)}function me(Me,Ee){var Ae;for(Ae=0;Ae<re;Ae+=1)ee[Ae].animation.setDirection(Me,Ee)}function xe(Me){var Ee;for(Ee=0;Ee<re;Ee+=1)ee[Ee].animation.play(Me)}function ge(Me){var Ee=Me-te,Ae;for(Ae=0;Ae<re;Ae+=1)ee[Ae].animation.advanceTime(Ee);te=Me,ne&&!ae?window.requestAnimationFrame(ge):se=!0}function _e(Me){te=Me,window.requestAnimationFrame(ge)}function ve(Me){var Ee;for(Ee=0;Ee<re;Ee+=1)ee[Ee].animation.pause(Me)}function ye(Me,Ee,Ae){var Ie;for(Ie=0;Ie<re;Ie+=1)ee[Ie].animation.goToAndStop(Me,Ee,Ae)}function be(Me){var Ee;for(Ee=0;Ee<re;Ee+=1)ee[Ee].animation.stop(Me)}function we(Me){var Ee;for(Ee=0;Ee<re;Ee+=1)ee[Ee].animation.togglePause(Me)}function Se(Me){var Ee;for(Ee=re-1;Ee>=0;Ee-=1)ee[Ee].animation.destroy(Me)}function Te(Me,Ee,Ae){var Ie=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Fe,Ne=Ie.length;for(Fe=0;Fe<Ne;Fe+=1)Ae&&Ie[Fe].setAttribute("data-bm-type",Ae),le(Ie[Fe],Me);if(Ee&&Ne===0){Ae||(Ae="svg");var $e=document.getElementsByTagName("body")[0];$e.innerText="";var ze=createTag("div");ze.style.width="100%",ze.style.height="100%",ze.setAttribute("data-bm-type",Ae),$e.appendChild(ze),le(ze,Me)}}function Pe(){var Me;for(Me=0;Me<re;Me+=1)ee[Me].animation.resize()}function Be(){!ae&&ne&&se&&(window.requestAnimationFrame(_e),se=!1)}function Ce(){ae=!0}function De(){ae=!1,Be()}function Re(Me,Ee){var Ae;for(Ae=0;Ae<re;Ae+=1)ee[Ae].animation.setVolume(Me,Ee)}function Le(Me){var Ee;for(Ee=0;Ee<re;Ee+=1)ee[Ee].animation.mute(Me)}function ke(Me){var Ee;for(Ee=0;Ee<re;Ee+=1)ee[Ee].animation.unmute(Me)}return ie.registerAnimation=le,ie.loadAnimation=fe,ie.setSpeed=pe,ie.setDirection=me,ie.play=xe,ie.pause=ve,ie.stop=be,ie.togglePause=we,ie.searchAnimations=Te,ie.resize=Pe,ie.goToAndStop=ye,ie.destroy=Se,ie.freeze=Ce,ie.unfreeze=De,ie.setVolume=Re,ie.mute=Le,ie.unmute=ke,ie.getRegisteredAnimations=he,ie}(),BezierFactory=function(){var ie={};ie.getBezierEasing=te;var ee={};function te(_e,ve,ye,be,we){var Se=we||("bez_"+_e+"_"+ve+"_"+ye+"_"+be).replace(/\./g,"p");if(ee[Se])return ee[Se];var Te=new ge([_e,ve,ye,be]);return ee[Se]=Te,Te}var re=4,ne=.001,se=1e-7,ae=10,oe=11,le=1/(oe-1),he=typeof Float32Array=="function";function ce(_e,ve){return 1-3*ve+3*_e}function de(_e,ve){return 3*ve-6*_e}function ue(_e){return 3*_e}function fe(_e,ve,ye){return((ce(ve,ye)*_e+de(ve,ye))*_e+ue(ve))*_e}function pe(_e,ve,ye){return 3*ce(ve,ye)*_e*_e+2*de(ve,ye)*_e+ue(ve)}function me(_e,ve,ye,be,we){var Se,Te,Pe=0;do Te=ve+(ye-ve)/2,Se=fe(Te,be,we)-_e,Se>0?ye=Te:ve=Te;while(Math.abs(Se)>se&&++Pe<ae);return Te}function xe(_e,ve,ye,be){for(var we=0;we<re;++we){var Se=pe(ve,ye,be);if(Se===0)return ve;var Te=fe(ve,ye,be)-_e;ve-=Te/Se}return ve}function ge(_e){this._p=_e,this._mSampleValues=he?new Float32Array(oe):new Array(oe),this._precomputed=!1,this.get=this.get.bind(this)}return ge.prototype={get:function(ve){var ye=this._p[0],be=this._p[1],we=this._p[2],Se=this._p[3];return this._precomputed||this._precompute(),ye===be&&we===Se?ve:ve===0?0:ve===1?1:fe(this._getTForX(ve),be,Se)},_precompute:function(){var ve=this._p[0],ye=this._p[1],be=this._p[2],we=this._p[3];this._precomputed=!0,(ve!==ye||be!==we)&&this._calcSampleValues()},_calcSampleValues:function(){for(var ve=this._p[0],ye=this._p[2],be=0;be<oe;++be)this._mSampleValues[be]=fe(be*le,ve,ye)},_getTForX:function(ve){for(var ye=this._p[0],be=this._p[2],we=this._mSampleValues,Se=0,Te=1,Pe=oe-1;Te!==Pe&&we[Te]<=ve;++Te)Se+=le;--Te;var Be=(ve-we[Te])/(we[Te+1]-we[Te]),Ce=Se+Be*le,De=pe(Ce,ye,be);return De>=ne?xe(ve,Ce,ye,be):De===0?Ce:me(ve,Se,Se+le,ye,be)}},ie}(),pooling=function(){function ie(ee){return ee.concat(createSizedArray(ee.length))}return{double:ie}}(),poolFactory=function(){return function(ie,ee,te){var re=0,ne=ie,se=createSizedArray(ne),ae={newElement:oe,release:le};function oe(){var he;return re?(re-=1,he=se[re]):he=ee(),he}function le(he){re===ne&&(se=pooling.double(se),ne*=2),te&&te(he),se[re]=he,re+=1}return ae}}(),bezierLengthPool=function(){function ie(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,ie)}(),segmentsLengthPool=function(){function ie(){return{lengths:[],totalLength:0}}function ee(te){var re,ne=te.lengths.length;for(re=0;re<ne;re+=1)bezierLengthPool.release(te.lengths[re]);te.lengths.length=0}return poolFactory(8,ie,ee)}();function bezFunction(){var ie=Math;function ee(ue,fe,pe,me,xe,ge){var _e=ue*me+fe*xe+pe*ge-xe*me-ge*ue-pe*fe;return _e>-.001&&_e<.001}function te(ue,fe,pe,me,xe,ge,_e,ve,ye){if(pe===0&&ge===0&&ye===0)return ee(ue,fe,me,xe,_e,ve);var be=ie.sqrt(ie.pow(me-ue,2)+ie.pow(xe-fe,2)+ie.pow(ge-pe,2)),we=ie.sqrt(ie.pow(_e-ue,2)+ie.pow(ve-fe,2)+ie.pow(ye-pe,2)),Se=ie.sqrt(ie.pow(_e-me,2)+ie.pow(ve-xe,2)+ie.pow(ye-ge,2)),Te;return be>we?be>Se?Te=be-we-Se:Te=Se-we-be:Se>we?Te=Se-we-be:Te=we-be-Se,Te>-1e-4&&Te<1e-4}var re=function(){return function(ue,fe,pe,me){var xe=getDefaultCurveSegments(),ge,_e,ve,ye,be,we=0,Se,Te=[],Pe=[],Be=bezierLengthPool.newElement();for(ve=pe.length,ge=0;ge<xe;ge+=1){for(be=ge/(xe-1),Se=0,_e=0;_e<ve;_e+=1)ye=bmPow(1-be,3)*ue[_e]+3*bmPow(1-be,2)*be*pe[_e]+3*(1-be)*bmPow(be,2)*me[_e]+bmPow(be,3)*fe[_e],Te[_e]=ye,Pe[_e]!==null&&(Se+=bmPow(Te[_e]-Pe[_e],2)),Pe[_e]=Te[_e];Se&&(Se=bmSqrt(Se),we+=Se),Be.percents[ge]=be,Be.lengths[ge]=we}return Be.addedLength=we,Be}}();function ne(ue){var fe=segmentsLengthPool.newElement(),pe=ue.c,me=ue.v,xe=ue.o,ge=ue.i,_e,ve=ue._length,ye=fe.lengths,be=0;for(_e=0;_e<ve-1;_e+=1)ye[_e]=re(me[_e],me[_e+1],xe[_e],ge[_e+1]),be+=ye[_e].addedLength;return pe&&ve&&(ye[_e]=re(me[_e],me[0],xe[_e],ge[0]),be+=ye[_e].addedLength),fe.totalLength=be,fe}function se(ue){this.segmentLength=0,this.points=new Array(ue)}function ae(ue,fe){this.partialLength=ue,this.point=fe}var oe=function(){var ue={};return function(fe,pe,me,xe){var ge=(fe[0]+"_"+fe[1]+"_"+pe[0]+"_"+pe[1]+"_"+me[0]+"_"+me[1]+"_"+xe[0]+"_"+xe[1]).replace(/\./g,"p");if(!ue[ge]){var _e=getDefaultCurveSegments(),ve,ye,be,we,Se,Te=0,Pe,Be,Ce=null;fe.length===2&&(fe[0]!==pe[0]||fe[1]!==pe[1])&&ee(fe[0],fe[1],pe[0],pe[1],fe[0]+me[0],fe[1]+me[1])&&ee(fe[0],fe[1],pe[0],pe[1],pe[0]+xe[0],pe[1]+xe[1])&&(_e=2);var De=new se(_e);for(be=me.length,ve=0;ve<_e;ve+=1){for(Be=createSizedArray(be),Se=ve/(_e-1),Pe=0,ye=0;ye<be;ye+=1)we=bmPow(1-Se,3)*fe[ye]+3*bmPow(1-Se,2)*Se*(fe[ye]+me[ye])+3*(1-Se)*bmPow(Se,2)*(pe[ye]+xe[ye])+bmPow(Se,3)*pe[ye],Be[ye]=we,Ce!==null&&(Pe+=bmPow(Be[ye]-Ce[ye],2));Pe=bmSqrt(Pe),Te+=Pe,De.points[ve]=new ae(Pe,Be),Ce=Be}De.segmentLength=Te,ue[ge]=De}return ue[ge]}}();function le(ue,fe){var pe=fe.percents,me=fe.lengths,xe=pe.length,ge=bmFloor((xe-1)*ue),_e=ue*fe.addedLength,ve=0;if(ge===xe-1||ge===0||_e===me[ge])return pe[ge];for(var ye=me[ge]>_e?-1:1,be=!0;be;)if(me[ge]<=_e&&me[ge+1]>_e?(ve=(_e-me[ge])/(me[ge+1]-me[ge]),be=!1):ge+=ye,ge<0||ge>=xe-1){if(ge===xe-1)return pe[ge];be=!1}return pe[ge]+(pe[ge+1]-pe[ge])*ve}function he(ue,fe,pe,me,xe,ge){var _e=le(xe,ge),ve=1-_e,ye=ie.round((ve*ve*ve*ue[0]+(_e*ve*ve+ve*_e*ve+ve*ve*_e)*pe[0]+(_e*_e*ve+ve*_e*_e+_e*ve*_e)*me[0]+_e*_e*_e*fe[0])*1e3)/1e3,be=ie.round((ve*ve*ve*ue[1]+(_e*ve*ve+ve*_e*ve+ve*ve*_e)*pe[1]+(_e*_e*ve+ve*_e*_e+_e*ve*_e)*me[1]+_e*_e*_e*fe[1])*1e3)/1e3;return[ye,be]}var ce=createTypedArray("float32",8);function de(ue,fe,pe,me,xe,ge,_e){xe<0?xe=0:xe>1&&(xe=1);var ve=le(xe,_e);ge=ge>1?1:ge;var ye=le(ge,_e),be,we=ue.length,Se=1-ve,Te=1-ye,Pe=Se*Se*Se,Be=ve*Se*Se*3,Ce=ve*ve*Se*3,De=ve*ve*ve,Re=Se*Se*Te,Le=ve*Se*Te+Se*ve*Te+Se*Se*ye,ke=ve*ve*Te+Se*ve*ye+ve*Se*ye,Me=ve*ve*ye,Ee=Se*Te*Te,Ae=ve*Te*Te+Se*ye*Te+Se*Te*ye,Ie=ve*ye*Te+Se*ye*ye+ve*Te*ye,Fe=ve*ye*ye,Ne=Te*Te*Te,$e=ye*Te*Te+Te*ye*Te+Te*Te*ye,ze=ye*ye*Te+Te*ye*ye+ye*Te*ye,Xe=ye*ye*ye;for(be=0;be<we;be+=1)ce[be*4]=ie.round((Pe*ue[be]+Be*pe[be]+Ce*me[be]+De*fe[be])*1e3)/1e3,ce[be*4+1]=ie.round((Re*ue[be]+Le*pe[be]+ke*me[be]+Me*fe[be])*1e3)/1e3,ce[be*4+2]=ie.round((Ee*ue[be]+Ae*pe[be]+Ie*me[be]+Fe*fe[be])*1e3)/1e3,ce[be*4+3]=ie.round((Ne*ue[be]+$e*pe[be]+ze*me[be]+Xe*fe[be])*1e3)/1e3;return ce}return{getSegmentsLength:ne,getNewSegment:de,getPointInSegment:he,buildBezierData:oe,pointOnLine2D:ee,pointOnLine3D:te}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(ie,ee){var te=this.offsetTime,re;this.propType==="multidimensional"&&(re=createTypedArray("float32",this.pv.length));for(var ne=ee.lastIndex,se=ne,ae=this.keyframes.length-1,oe=!0,le,he,ce;oe;){if(le=this.keyframes[se],he=this.keyframes[se+1],se===ae-1&&ie>=he.t-te){le.h&&(le=he),ne=0;break}if(he.t-te>ie){ne=se;break}se<ae-1?se+=1:(ne=0,oe=!1)}ce=this.keyframesMetadata[se]||{};var de,ue,fe,pe,me,xe,ge=he.t-te,_e=le.t-te,ve;if(le.to){ce.bezierData||(ce.bezierData=bez.buildBezierData(le.s,he.s||le.e,le.to,le.ti));var ye=ce.bezierData;if(ie>=ge||ie<_e){var be=ie>=ge?ye.points.length-1:0;for(ue=ye.points[be].point.length,de=0;de<ue;de+=1)re[de]=ye.points[be].point[de]}else{ce.__fnct?xe=ce.__fnct:(xe=BezierFactory.getBezierEasing(le.o.x,le.o.y,le.i.x,le.i.y,le.n).get,ce.__fnct=xe),fe=xe((ie-_e)/(ge-_e));var we=ye.segmentLength*fe,Se,Te=ee.lastFrame<ie&&ee._lastKeyframeIndex===se?ee._lastAddedLength:0;for(me=ee.lastFrame<ie&&ee._lastKeyframeIndex===se?ee._lastPoint:0,oe=!0,pe=ye.points.length;oe;){if(Te+=ye.points[me].partialLength,we===0||fe===0||me===ye.points.length-1){for(ue=ye.points[me].point.length,de=0;de<ue;de+=1)re[de]=ye.points[me].point[de];break}else if(we>=Te&&we<Te+ye.points[me+1].partialLength){for(Se=(we-Te)/ye.points[me+1].partialLength,ue=ye.points[me].point.length,de=0;de<ue;de+=1)re[de]=ye.points[me].point[de]+(ye.points[me+1].point[de]-ye.points[me].point[de])*Se;break}me<pe-1?me+=1:oe=!1}ee._lastPoint=me,ee._lastAddedLength=Te-ye.points[me].partialLength,ee._lastKeyframeIndex=se}}else{var Pe,Be,Ce,De,Re;if(ae=le.s.length,ve=he.s||le.e,this.sh&&le.h!==1)if(ie>=ge)re[0]=ve[0],re[1]=ve[1],re[2]=ve[2];else if(ie<=_e)re[0]=le.s[0],re[1]=le.s[1],re[2]=le.s[2];else{var Le=createQuaternion(le.s),ke=createQuaternion(ve),Me=(ie-_e)/(ge-_e);quaternionToEuler(re,slerp(Le,ke,Me))}else for(se=0;se<ae;se+=1)le.h!==1&&(ie>=ge?fe=1:ie<_e?fe=0:(le.o.x.constructor===Array?(ce.__fnct||(ce.__fnct=[]),ce.__fnct[se]?xe=ce.__fnct[se]:(Pe=le.o.x[se]===void 0?le.o.x[0]:le.o.x[se],Be=le.o.y[se]===void 0?le.o.y[0]:le.o.y[se],Ce=le.i.x[se]===void 0?le.i.x[0]:le.i.x[se],De=le.i.y[se]===void 0?le.i.y[0]:le.i.y[se],xe=BezierFactory.getBezierEasing(Pe,Be,Ce,De).get,ce.__fnct[se]=xe)):ce.__fnct?xe=ce.__fnct:(Pe=le.o.x,Be=le.o.y,Ce=le.i.x,De=le.i.y,xe=BezierFactory.getBezierEasing(Pe,Be,Ce,De).get,le.keyframeMetadata=xe),fe=xe((ie-_e)/(ge-_e)))),ve=he.s||le.e,Re=le.h===1?le.s[se]:le.s[se]+(ve[se]-le.s[se])*fe,this.propType==="multidimensional"?re[se]=Re:re=Re}return ee.lastIndex=ne,re}function slerp(ie,ee,te){var re=[],ne=ie[0],se=ie[1],ae=ie[2],oe=ie[3],le=ee[0],he=ee[1],ce=ee[2],de=ee[3],ue,fe,pe,me,xe;return fe=ne*le+se*he+ae*ce+oe*de,fe<0&&(fe=-fe,le=-le,he=-he,ce=-ce,de=-de),1-fe>1e-6?(ue=Math.acos(fe),pe=Math.sin(ue),me=Math.sin((1-te)*ue)/pe,xe=Math.sin(te*ue)/pe):(me=1-te,xe=te),re[0]=me*ne+xe*le,re[1]=me*se+xe*he,re[2]=me*ae+xe*ce,re[3]=me*oe+xe*de,re}function quaternionToEuler(ie,ee){var te=ee[0],re=ee[1],ne=ee[2],se=ee[3],ae=Math.atan2(2*re*se-2*te*ne,1-2*re*re-2*ne*ne),oe=Math.asin(2*te*re+2*ne*se),le=Math.atan2(2*te*se-2*re*ne,1-2*te*te-2*ne*ne);ie[0]=ae/degToRads,ie[1]=oe/degToRads,ie[2]=le/degToRads}function createQuaternion(ie){var ee=ie[0]*degToRads,te=ie[1]*degToRads,re=ie[2]*degToRads,ne=Math.cos(ee/2),se=Math.cos(te/2),ae=Math.cos(re/2),oe=Math.sin(ee/2),le=Math.sin(te/2),he=Math.sin(re/2),ce=ne*se*ae-oe*le*he,de=oe*le*ae+ne*se*he,ue=oe*se*ae+ne*le*he,fe=ne*le*ae-oe*se*he;return[de,ue,fe,ce]}function getValueAtCurrentTime(){var ie=this.comp.renderedFrame-this.offsetTime,ee=this.keyframes[0].t-this.offsetTime,te=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(ie===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=te&&ie>=te||this._caching.lastFrame<ee&&ie<ee))){this._caching.lastFrame>=ie&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var re=this.interpolateValue(ie,this._caching);this.pv=re}return this._caching.lastFrame=ie,this.pv}function setVValue(ie){var ee;if(this.propType==="unidimensional")ee=ie*this.mult,mathAbs(this.v-ee)>1e-5&&(this.v=ee,this._mdf=!0);else for(var te=0,re=this.v.length;te<re;)ee=ie[te]*this.mult,mathAbs(this.v[te]-ee)>1e-5&&(this.v[te]=ee,this._mdf=!0),te+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var ie,ee=this.effectsSequence.length,te=this.kf?this.pv:this.data.k;for(ie=0;ie<ee;ie+=1)te=this.effectsSequence[ie](te);this.setVValue(te),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(ie){this.effectsSequence.push(ie),this.container.addDynamicProperty(this)}function ValueProperty(ie,ee,te,re){this.propType="unidimensional",this.mult=te||1,this.data=ee,this.v=te?ee.k*te:ee.k,this.pv=ee.k,this._mdf=!1,this.elem=ie,this.container=re,this.comp=ie.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(ie,ee,te,re){this.propType="multidimensional",this.mult=te||1,this.data=ee,this._mdf=!1,this.elem=ie,this.container=re,this.comp=ie.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ne,se=ee.k.length;for(this.v=createTypedArray("float32",se),this.pv=createTypedArray("float32",se),this.vel=createTypedArray("float32",se),ne=0;ne<se;ne+=1)this.v[ne]=ee.k[ne]*this.mult,this.pv[ne]=ee.k[ne];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(ie,ee,te,re){this.propType="unidimensional",this.keyframes=ee.k,this.keyframesMetadata=[],this.offsetTime=ie.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=ee,this.mult=te||1,this.elem=ie,this.container=re,this.comp=ie.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(ie,ee,te,re){this.propType="multidimensional";var ne,se=ee.k.length,ae,oe,le,he;for(ne=0;ne<se-1;ne+=1)ee.k[ne].to&&ee.k[ne].s&&ee.k[ne+1]&&ee.k[ne+1].s&&(ae=ee.k[ne].s,oe=ee.k[ne+1].s,le=ee.k[ne].to,he=ee.k[ne].ti,(ae.length===2&&!(ae[0]===oe[0]&&ae[1]===oe[1])&&bez.pointOnLine2D(ae[0],ae[1],oe[0],oe[1],ae[0]+le[0],ae[1]+le[1])&&bez.pointOnLine2D(ae[0],ae[1],oe[0],oe[1],oe[0]+he[0],oe[1]+he[1])||ae.length===3&&!(ae[0]===oe[0]&&ae[1]===oe[1]&&ae[2]===oe[2])&&bez.pointOnLine3D(ae[0],ae[1],ae[2],oe[0],oe[1],oe[2],ae[0]+le[0],ae[1]+le[1],ae[2]+le[2])&&bez.pointOnLine3D(ae[0],ae[1],ae[2],oe[0],oe[1],oe[2],oe[0]+he[0],oe[1]+he[1],oe[2]+he[2]))&&(ee.k[ne].to=null,ee.k[ne].ti=null),ae[0]===oe[0]&&ae[1]===oe[1]&&le[0]===0&&le[1]===0&&he[0]===0&&he[1]===0&&(ae.length===2||ae[2]===oe[2]&&le[2]===0&&he[2]===0)&&(ee.k[ne].to=null,ee.k[ne].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=ee,this.keyframes=ee.k,this.keyframesMetadata=[],this.offsetTime=ie.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=te||1,this.elem=ie,this.container=re,this.comp=ie.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var ce=ee.k[0].s.length;for(this.v=createTypedArray("float32",ce),this.pv=createTypedArray("float32",ce),ne=0;ne<ce;ne+=1)this.v[ne]=initFrame,this.pv[ne]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",ce)},this.addEffect=addEffect}var PropertyFactory=function(){function ie(te,re,ne,se,ae){re.sid&&(re=te.globalData.slotManager.getProp(re));var oe;if(!re.k.length)oe=new ValueProperty(te,re,se,ae);else if(typeof re.k[0]=="number")oe=new MultiDimensionalProperty(te,re,se,ae);else switch(ne){case 0:oe=new KeyframedValueProperty(te,re,se,ae);break;case 1:oe=new KeyframedMultidimensionalProperty(te,re,se,ae);break}return oe.effectsSequence.length&&ae.addDynamicProperty(oe),oe}var ee={getProp:ie};return ee}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(ee){this.dynamicProperties.indexOf(ee)===-1&&(this.dynamicProperties.push(ee),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var ee,te=this.dynamicProperties.length;for(ee=0;ee<te;ee+=1)this.dynamicProperties[ee].getValue(),this.dynamicProperties[ee]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(ee){this.container=ee,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function ie(){return createTypedArray("float32",2)}return poolFactory(8,ie)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(ie,ee){this.c=ie,this.setLength(ee);for(var te=0;te<ee;)this.v[te]=pointPool.newElement(),this.o[te]=pointPool.newElement(),this.i[te]=pointPool.newElement(),te+=1},ShapePath.prototype.setLength=function(ie){for(;this._maxLength<ie;)this.doubleArrayLength();this._length=ie},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(ie,ee,te,re,ne){var se;switch(this._length=Math.max(this._length,re+1),this._length>=this._maxLength&&this.doubleArrayLength(),te){case"v":se=this.v;break;case"i":se=this.i;break;case"o":se=this.o;break;default:se=[];break}(!se[re]||se[re]&&!ne)&&(se[re]=pointPool.newElement()),se[re][0]=ie,se[re][1]=ee},ShapePath.prototype.setTripleAt=function(ie,ee,te,re,ne,se,ae,oe){this.setXYAt(ie,ee,"v",ae,oe),this.setXYAt(te,re,"o",ae,oe),this.setXYAt(ne,se,"i",ae,oe)},ShapePath.prototype.reverse=function(){var ie=new ShapePath;ie.setPathData(this.c,this._length);var ee=this.v,te=this.o,re=this.i,ne=0;this.c&&(ie.setTripleAt(ee[0][0],ee[0][1],re[0][0],re[0][1],te[0][0],te[0][1],0,!1),ne=1);var se=this._length-1,ae=this._length,oe;for(oe=ne;oe<ae;oe+=1)ie.setTripleAt(ee[se][0],ee[se][1],re[se][0],re[se][1],te[se][0],te[se][1],oe,!1),se-=1;return ie},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function ie(){return new ShapePath}function ee(ne){var se=ne._length,ae;for(ae=0;ae<se;ae+=1)pointPool.release(ne.v[ae]),pointPool.release(ne.i[ae]),pointPool.release(ne.o[ae]),ne.v[ae]=null,ne.i[ae]=null,ne.o[ae]=null;ne._length=0,ne.c=!1}function te(ne){var se=re.newElement(),ae,oe=ne._length===void 0?ne.v.length:ne._length;for(se.setLength(oe),se.c=ne.c,ae=0;ae<oe;ae+=1)se.setTripleAt(ne.v[ae][0],ne.v[ae][1],ne.o[ae][0],ne.o[ae][1],ne.i[ae][0],ne.i[ae][1],ae);return se}var re=poolFactory(4,ie,ee);return re.clone=te,re}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(ie){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=ie,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var ie;for(ie=0;ie<this._length;ie+=1)shapePool.release(this.shapes[ie]);this._length=0};var shapeCollectionPool=function(){var ie={newShapeCollection:ne,release:se},ee=0,te=4,re=createSizedArray(te);function ne(){var ae;return ee?(ee-=1,ae=re[ee]):ae=new ShapeCollection,ae}function se(ae){var oe,le=ae._length;for(oe=0;oe<le;oe+=1)shapePool.release(ae.shapes[oe]);ae._length=0,ee===te&&(re=pooling.double(re),te*=2),re[ee]=ae,ee+=1}return ie}(),ShapePropertyFactory=function(){var ie=-999999;function ee(ge,_e,ve){var ye=ve.lastIndex,be,we,Se,Te,Pe,Be,Ce,De,Re,Le=this.keyframes;if(ge<Le[0].t-this.offsetTime)be=Le[0].s[0],Se=!0,ye=0;else if(ge>=Le[Le.length-1].t-this.offsetTime)be=Le[Le.length-1].s?Le[Le.length-1].s[0]:Le[Le.length-2].e[0],Se=!0;else{for(var ke=ye,Me=Le.length-1,Ee=!0,Ae,Ie,Fe;Ee&&(Ae=Le[ke],Ie=Le[ke+1],!(Ie.t-this.offsetTime>ge));)ke<Me-1?ke+=1:Ee=!1;if(Fe=this.keyframesMetadata[ke]||{},Se=Ae.h===1,ye=ke,!Se){if(ge>=Ie.t-this.offsetTime)De=1;else if(ge<Ae.t-this.offsetTime)De=0;else{var Ne;Fe.__fnct?Ne=Fe.__fnct:(Ne=BezierFactory.getBezierEasing(Ae.o.x,Ae.o.y,Ae.i.x,Ae.i.y).get,Fe.__fnct=Ne),De=Ne((ge-(Ae.t-this.offsetTime))/(Ie.t-this.offsetTime-(Ae.t-this.offsetTime)))}we=Ie.s?Ie.s[0]:Ae.e[0]}be=Ae.s[0]}for(Be=_e._length,Ce=be.i[0].length,ve.lastIndex=ye,Te=0;Te<Be;Te+=1)for(Pe=0;Pe<Ce;Pe+=1)Re=Se?be.i[Te][Pe]:be.i[Te][Pe]+(we.i[Te][Pe]-be.i[Te][Pe])*De,_e.i[Te][Pe]=Re,Re=Se?be.o[Te][Pe]:be.o[Te][Pe]+(we.o[Te][Pe]-be.o[Te][Pe])*De,_e.o[Te][Pe]=Re,Re=Se?be.v[Te][Pe]:be.v[Te][Pe]+(we.v[Te][Pe]-be.v[Te][Pe])*De,_e.v[Te][Pe]=Re}function te(){var ge=this.comp.renderedFrame-this.offsetTime,_e=this.keyframes[0].t-this.offsetTime,ve=this.keyframes[this.keyframes.length-1].t-this.offsetTime,ye=this._caching.lastFrame;return ye!==ie&&(ye<_e&&ge<_e||ye>ve&&ge>ve)||(this._caching.lastIndex=ye<ge?this._caching.lastIndex:0,this.interpolateShape(ge,this.pv,this._caching)),this._caching.lastFrame=ge,this.pv}function re(){this.paths=this.localShapeCollection}function ne(ge,_e){if(ge._length!==_e._length||ge.c!==_e.c)return!1;var ve,ye=ge._length;for(ve=0;ve<ye;ve+=1)if(ge.v[ve][0]!==_e.v[ve][0]||ge.v[ve][1]!==_e.v[ve][1]||ge.o[ve][0]!==_e.o[ve][0]||ge.o[ve][1]!==_e.o[ve][1]||ge.i[ve][0]!==_e.i[ve][0]||ge.i[ve][1]!==_e.i[ve][1])return!1;return!0}function se(ge){ne(this.v,ge)||(this.v=shapePool.clone(ge),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function ae(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var ge;this.kf?ge=this.pv:this.data.ks?ge=this.data.ks.k:ge=this.data.pt.k;var _e,ve=this.effectsSequence.length;for(_e=0;_e<ve;_e+=1)ge=this.effectsSequence[_e](ge);this.setVValue(ge),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function oe(ge,_e,ve){this.propType="shape",this.comp=ge.comp,this.container=ge,this.elem=ge,this.data=_e,this.k=!1,this.kf=!1,this._mdf=!1;var ye=ve===3?_e.pt.k:_e.ks.k;this.v=shapePool.clone(ye),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=re,this.effectsSequence=[]}function le(ge){this.effectsSequence.push(ge),this.container.addDynamicProperty(this)}oe.prototype.interpolateShape=ee,oe.prototype.getValue=ae,oe.prototype.setVValue=se,oe.prototype.addEffect=le;function he(ge,_e,ve){this.propType="shape",this.comp=ge.comp,this.elem=ge,this.container=ge,this.offsetTime=ge.data.st,this.keyframes=ve===3?_e.pt.k:_e.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var ye=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,ye),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=ie,this.reset=re,this._caching={lastFrame:ie,lastIndex:0},this.effectsSequence=[te.bind(this)]}he.prototype.getValue=ae,he.prototype.interpolateShape=ee,he.prototype.setVValue=se,he.prototype.addEffect=le;var ce=function(){var ge=roundCorner;function _e(ve,ye){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=ye.d,this.elem=ve,this.comp=ve.comp,this.frameId=-1,this.initDynamicPropertyContainer(ve),this.p=PropertyFactory.getProp(ve,ye.p,1,0,this),this.s=PropertyFactory.getProp(ve,ye.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return _e.prototype={reset:re,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var ye=this.p.v[0],be=this.p.v[1],we=this.s.v[0]/2,Se=this.s.v[1]/2,Te=this.d!==3,Pe=this.v;Pe.v[0][0]=ye,Pe.v[0][1]=be-Se,Pe.v[1][0]=Te?ye+we:ye-we,Pe.v[1][1]=be,Pe.v[2][0]=ye,Pe.v[2][1]=be+Se,Pe.v[3][0]=Te?ye-we:ye+we,Pe.v[3][1]=be,Pe.i[0][0]=Te?ye-we*ge:ye+we*ge,Pe.i[0][1]=be-Se,Pe.i[1][0]=Te?ye+we:ye-we,Pe.i[1][1]=be-Se*ge,Pe.i[2][0]=Te?ye+we*ge:ye-we*ge,Pe.i[2][1]=be+Se,Pe.i[3][0]=Te?ye-we:ye+we,Pe.i[3][1]=be+Se*ge,Pe.o[0][0]=Te?ye+we*ge:ye-we*ge,Pe.o[0][1]=be-Se,Pe.o[1][0]=Te?ye+we:ye-we,Pe.o[1][1]=be+Se*ge,Pe.o[2][0]=Te?ye-we*ge:ye+we*ge,Pe.o[2][1]=be+Se,Pe.o[3][0]=Te?ye-we:ye+we,Pe.o[3][1]=be-Se*ge}},extendPrototype([DynamicPropertyContainer],_e),_e}(),de=function(){function ge(_e,ve){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=_e,this.comp=_e.comp,this.data=ve,this.frameId=-1,this.d=ve.d,this.initDynamicPropertyContainer(_e),ve.sy===1?(this.ir=PropertyFactory.getProp(_e,ve.ir,0,0,this),this.is=PropertyFactory.getProp(_e,ve.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(_e,ve.pt,0,0,this),this.p=PropertyFactory.getProp(_e,ve.p,1,0,this),this.r=PropertyFactory.getProp(_e,ve.r,0,degToRads,this),this.or=PropertyFactory.getProp(_e,ve.or,0,0,this),this.os=PropertyFactory.getProp(_e,ve.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return ge.prototype={reset:re,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var ve=Math.floor(this.pt.v)*2,ye=Math.PI*2/ve,be=!0,we=this.or.v,Se=this.ir.v,Te=this.os.v,Pe=this.is.v,Be=2*Math.PI*we/(ve*2),Ce=2*Math.PI*Se/(ve*2),De,Re,Le,ke,Me=-Math.PI/2;Me+=this.r.v;var Ee=this.data.d===3?-1:1;for(this.v._length=0,De=0;De<ve;De+=1){Re=be?we:Se,Le=be?Te:Pe,ke=be?Be:Ce;var Ae=Re*Math.cos(Me),Ie=Re*Math.sin(Me),Fe=Ae===0&&Ie===0?0:Ie/Math.sqrt(Ae*Ae+Ie*Ie),Ne=Ae===0&&Ie===0?0:-Ae/Math.sqrt(Ae*Ae+Ie*Ie);Ae+=+this.p.v[0],Ie+=+this.p.v[1],this.v.setTripleAt(Ae,Ie,Ae-Fe*ke*Le*Ee,Ie-Ne*ke*Le*Ee,Ae+Fe*ke*Le*Ee,Ie+Ne*ke*Le*Ee,De,!0),be=!be,Me+=ye*Ee}},convertPolygonToPath:function(){var ve=Math.floor(this.pt.v),ye=Math.PI*2/ve,be=this.or.v,we=this.os.v,Se=2*Math.PI*be/(ve*4),Te,Pe=-Math.PI*.5,Be=this.data.d===3?-1:1;for(Pe+=this.r.v,this.v._length=0,Te=0;Te<ve;Te+=1){var Ce=be*Math.cos(Pe),De=be*Math.sin(Pe),Re=Ce===0&&De===0?0:De/Math.sqrt(Ce*Ce+De*De),Le=Ce===0&&De===0?0:-Ce/Math.sqrt(Ce*Ce+De*De);Ce+=+this.p.v[0],De+=+this.p.v[1],this.v.setTripleAt(Ce,De,Ce-Re*Se*we*Be,De-Le*Se*we*Be,Ce+Re*Se*we*Be,De+Le*Se*we*Be,Te,!0),Pe+=ye*Be}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],ge),ge}(),ue=function(){function ge(_e,ve){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=_e,this.comp=_e.comp,this.frameId=-1,this.d=ve.d,this.initDynamicPropertyContainer(_e),this.p=PropertyFactory.getProp(_e,ve.p,1,0,this),this.s=PropertyFactory.getProp(_e,ve.s,1,0,this),this.r=PropertyFactory.getProp(_e,ve.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return ge.prototype={convertRectToPath:function(){var ve=this.p.v[0],ye=this.p.v[1],be=this.s.v[0]/2,we=this.s.v[1]/2,Se=bmMin(be,we,this.r.v),Te=Se*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(ve+be,ye-we+Se,ve+be,ye-we+Se,ve+be,ye-we+Te,0,!0),this.v.setTripleAt(ve+be,ye+we-Se,ve+be,ye+we-Te,ve+be,ye+we-Se,1,!0),Se!==0?(this.v.setTripleAt(ve+be-Se,ye+we,ve+be-Se,ye+we,ve+be-Te,ye+we,2,!0),this.v.setTripleAt(ve-be+Se,ye+we,ve-be+Te,ye+we,ve-be+Se,ye+we,3,!0),this.v.setTripleAt(ve-be,ye+we-Se,ve-be,ye+we-Se,ve-be,ye+we-Te,4,!0),this.v.setTripleAt(ve-be,ye-we+Se,ve-be,ye-we+Te,ve-be,ye-we+Se,5,!0),this.v.setTripleAt(ve-be+Se,ye-we,ve-be+Se,ye-we,ve-be+Te,ye-we,6,!0),this.v.setTripleAt(ve+be-Se,ye-we,ve+be-Te,ye-we,ve+be-Se,ye-we,7,!0)):(this.v.setTripleAt(ve-be,ye+we,ve-be+Te,ye+we,ve-be,ye+we,2),this.v.setTripleAt(ve-be,ye-we,ve-be,ye-we+Te,ve-be,ye-we,3))):(this.v.setTripleAt(ve+be,ye-we+Se,ve+be,ye-we+Te,ve+be,ye-we+Se,0,!0),Se!==0?(this.v.setTripleAt(ve+be-Se,ye-we,ve+be-Se,ye-we,ve+be-Te,ye-we,1,!0),this.v.setTripleAt(ve-be+Se,ye-we,ve-be+Te,ye-we,ve-be+Se,ye-we,2,!0),this.v.setTripleAt(ve-be,ye-we+Se,ve-be,ye-we+Se,ve-be,ye-we+Te,3,!0),this.v.setTripleAt(ve-be,ye+we-Se,ve-be,ye+we-Te,ve-be,ye+we-Se,4,!0),this.v.setTripleAt(ve-be+Se,ye+we,ve-be+Se,ye+we,ve-be+Te,ye+we,5,!0),this.v.setTripleAt(ve+be-Se,ye+we,ve+be-Te,ye+we,ve+be-Se,ye+we,6,!0),this.v.setTripleAt(ve+be,ye+we-Se,ve+be,ye+we-Se,ve+be,ye+we-Te,7,!0)):(this.v.setTripleAt(ve-be,ye-we,ve-be+Te,ye-we,ve-be,ye-we,1,!0),this.v.setTripleAt(ve-be,ye+we,ve-be,ye+we-Te,ve-be,ye+we,2,!0),this.v.setTripleAt(ve+be,ye+we,ve+be-Te,ye+we,ve+be,ye+we,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:re},extendPrototype([DynamicPropertyContainer],ge),ge}();function fe(ge,_e,ve){var ye;if(ve===3||ve===4){var be=ve===3?_e.pt:_e.ks,we=be.k;we.length?ye=new he(ge,_e,ve):ye=new oe(ge,_e,ve)}else ve===5?ye=new ue(ge,_e):ve===6?ye=new ce(ge,_e):ve===7&&(ye=new de(ge,_e));return ye.k&&ge.addDynamicProperty(ye),ye}function pe(){return oe}function me(){return he}var xe={};return xe.getShapeProp=fe,xe.getConstructorFunction=pe,xe.getKeyframedConstructorFunction=me,xe}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var ie=Math.cos,ee=Math.sin,te=Math.tan,re=Math.round;function ne(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function se(Ee){if(Ee===0)return this;var Ae=ie(Ee),Ie=ee(Ee);return this._t(Ae,-Ie,0,0,Ie,Ae,0,0,0,0,1,0,0,0,0,1)}function ae(Ee){if(Ee===0)return this;var Ae=ie(Ee),Ie=ee(Ee);return this._t(1,0,0,0,0,Ae,-Ie,0,0,Ie,Ae,0,0,0,0,1)}function oe(Ee){if(Ee===0)return this;var Ae=ie(Ee),Ie=ee(Ee);return this._t(Ae,0,Ie,0,0,1,0,0,-Ie,0,Ae,0,0,0,0,1)}function le(Ee){if(Ee===0)return this;var Ae=ie(Ee),Ie=ee(Ee);return this._t(Ae,-Ie,0,0,Ie,Ae,0,0,0,0,1,0,0,0,0,1)}function he(Ee,Ae){return this._t(1,Ae,Ee,1,0,0)}function ce(Ee,Ae){return this.shear(te(Ee),te(Ae))}function de(Ee,Ae){var Ie=ie(Ae),Fe=ee(Ae);return this._t(Ie,Fe,0,0,-Fe,Ie,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,te(Ee),1,0,0,0,0,1,0,0,0,0,1)._t(Ie,-Fe,0,0,Fe,Ie,0,0,0,0,1,0,0,0,0,1)}function ue(Ee,Ae,Ie){return!Ie&&Ie!==0&&(Ie=1),Ee===1&&Ae===1&&Ie===1?this:this._t(Ee,0,0,0,0,Ae,0,0,0,0,Ie,0,0,0,0,1)}function fe(Ee,Ae,Ie,Fe,Ne,$e,ze,Xe,Je,We,dt,yt,vt,at,_t,je){return this.props[0]=Ee,this.props[1]=Ae,this.props[2]=Ie,this.props[3]=Fe,this.props[4]=Ne,this.props[5]=$e,this.props[6]=ze,this.props[7]=Xe,this.props[8]=Je,this.props[9]=We,this.props[10]=dt,this.props[11]=yt,this.props[12]=vt,this.props[13]=at,this.props[14]=_t,this.props[15]=je,this}function pe(Ee,Ae,Ie){return Ie=Ie||0,Ee!==0||Ae!==0||Ie!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Ee,Ae,Ie,1):this}function me(Ee,Ae,Ie,Fe,Ne,$e,ze,Xe,Je,We,dt,yt,vt,at,_t,je){var He=this.props;if(Ee===1&&Ae===0&&Ie===0&&Fe===0&&Ne===0&&$e===1&&ze===0&&Xe===0&&Je===0&&We===0&&dt===1&&yt===0)return He[12]=He[12]*Ee+He[15]*vt,He[13]=He[13]*$e+He[15]*at,He[14]=He[14]*dt+He[15]*_t,He[15]*=je,this._identityCalculated=!1,this;var Qe=He[0],St=He[1],gt=He[2],Oe=He[3],Ve=He[4],Ze=He[5],mt=He[6],pt=He[7],Tt=He[8],Et=He[9],Mt=He[10],Rt=He[11],bt=He[12],Ue=He[13],xt=He[14],ht=He[15];return He[0]=Qe*Ee+St*Ne+gt*Je+Oe*vt,He[1]=Qe*Ae+St*$e+gt*We+Oe*at,He[2]=Qe*Ie+St*ze+gt*dt+Oe*_t,He[3]=Qe*Fe+St*Xe+gt*yt+Oe*je,He[4]=Ve*Ee+Ze*Ne+mt*Je+pt*vt,He[5]=Ve*Ae+Ze*$e+mt*We+pt*at,He[6]=Ve*Ie+Ze*ze+mt*dt+pt*_t,He[7]=Ve*Fe+Ze*Xe+mt*yt+pt*je,He[8]=Tt*Ee+Et*Ne+Mt*Je+Rt*vt,He[9]=Tt*Ae+Et*$e+Mt*We+Rt*at,He[10]=Tt*Ie+Et*ze+Mt*dt+Rt*_t,He[11]=Tt*Fe+Et*Xe+Mt*yt+Rt*je,He[12]=bt*Ee+Ue*Ne+xt*Je+ht*vt,He[13]=bt*Ae+Ue*$e+xt*We+ht*at,He[14]=bt*Ie+Ue*ze+xt*dt+ht*_t,He[15]=bt*Fe+Ue*Xe+xt*yt+ht*je,this._identityCalculated=!1,this}function xe(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function ge(Ee){for(var Ae=0;Ae<16;){if(Ee.props[Ae]!==this.props[Ae])return!1;Ae+=1}return!0}function _e(Ee){var Ae;for(Ae=0;Ae<16;Ae+=1)Ee.props[Ae]=this.props[Ae];return Ee}function ve(Ee){var Ae;for(Ae=0;Ae<16;Ae+=1)this.props[Ae]=Ee[Ae]}function ye(Ee,Ae,Ie){return{x:Ee*this.props[0]+Ae*this.props[4]+Ie*this.props[8]+this.props[12],y:Ee*this.props[1]+Ae*this.props[5]+Ie*this.props[9]+this.props[13],z:Ee*this.props[2]+Ae*this.props[6]+Ie*this.props[10]+this.props[14]}}function be(Ee,Ae,Ie){return Ee*this.props[0]+Ae*this.props[4]+Ie*this.props[8]+this.props[12]}function we(Ee,Ae,Ie){return Ee*this.props[1]+Ae*this.props[5]+Ie*this.props[9]+this.props[13]}function Se(Ee,Ae,Ie){return Ee*this.props[2]+Ae*this.props[6]+Ie*this.props[10]+this.props[14]}function Te(){var Ee=this.props[0]*this.props[5]-this.props[1]*this.props[4],Ae=this.props[5]/Ee,Ie=-this.props[1]/Ee,Fe=-this.props[4]/Ee,Ne=this.props[0]/Ee,$e=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Ee,ze=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Ee,Xe=new Matrix;return Xe.props[0]=Ae,Xe.props[1]=Ie,Xe.props[4]=Fe,Xe.props[5]=Ne,Xe.props[12]=$e,Xe.props[13]=ze,Xe}function Pe(Ee){var Ae=this.getInverseMatrix();return Ae.applyToPointArray(Ee[0],Ee[1],Ee[2]||0)}function Be(Ee){var Ae,Ie=Ee.length,Fe=[];for(Ae=0;Ae<Ie;Ae+=1)Fe[Ae]=Pe(Ee[Ae]);return Fe}function Ce(Ee,Ae,Ie){var Fe=createTypedArray("float32",6);if(this.isIdentity())Fe[0]=Ee[0],Fe[1]=Ee[1],Fe[2]=Ae[0],Fe[3]=Ae[1],Fe[4]=Ie[0],Fe[5]=Ie[1];else{var Ne=this.props[0],$e=this.props[1],ze=this.props[4],Xe=this.props[5],Je=this.props[12],We=this.props[13];Fe[0]=Ee[0]*Ne+Ee[1]*ze+Je,Fe[1]=Ee[0]*$e+Ee[1]*Xe+We,Fe[2]=Ae[0]*Ne+Ae[1]*ze+Je,Fe[3]=Ae[0]*$e+Ae[1]*Xe+We,Fe[4]=Ie[0]*Ne+Ie[1]*ze+Je,Fe[5]=Ie[0]*$e+Ie[1]*Xe+We}return Fe}function De(Ee,Ae,Ie){var Fe;return this.isIdentity()?Fe=[Ee,Ae,Ie]:Fe=[Ee*this.props[0]+Ae*this.props[4]+Ie*this.props[8]+this.props[12],Ee*this.props[1]+Ae*this.props[5]+Ie*this.props[9]+this.props[13],Ee*this.props[2]+Ae*this.props[6]+Ie*this.props[10]+this.props[14]],Fe}function Re(Ee,Ae){if(this.isIdentity())return Ee+","+Ae;var Ie=this.props;return Math.round((Ee*Ie[0]+Ae*Ie[4]+Ie[12])*100)/100+","+Math.round((Ee*Ie[1]+Ae*Ie[5]+Ie[13])*100)/100}function Le(){for(var Ee=0,Ae=this.props,Ie="matrix3d(",Fe=1e4;Ee<16;)Ie+=re(Ae[Ee]*Fe)/Fe,Ie+=Ee===15?")":",",Ee+=1;return Ie}function ke(Ee){var Ae=1e4;return Ee<1e-6&&Ee>0||Ee>-1e-6&&Ee<0?re(Ee*Ae)/Ae:Ee}function Me(){var Ee=this.props,Ae=ke(Ee[0]),Ie=ke(Ee[1]),Fe=ke(Ee[4]),Ne=ke(Ee[5]),$e=ke(Ee[12]),ze=ke(Ee[13]);return"matrix("+Ae+","+Ie+","+Fe+","+Ne+","+$e+","+ze+")"}return function(){this.reset=ne,this.rotate=se,this.rotateX=ae,this.rotateY=oe,this.rotateZ=le,this.skew=ce,this.skewFromAxis=de,this.shear=he,this.scale=ue,this.setTransform=fe,this.translate=pe,this.transform=me,this.applyToPoint=ye,this.applyToX=be,this.applyToY=we,this.applyToZ=Se,this.applyToPointArray=De,this.applyToTriplePoints=Ce,this.applyToPointStringified=Re,this.toCSS=Le,this.to2dCSS=Me,this.clone=_e,this.cloneFromProps=ve,this.equals=ge,this.inversePoints=Be,this.inversePoint=Pe,this.getInverseMatrix=Te,this._t=this.transform,this.isIdentity=xe,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(ie){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(te){return typeof te}:_typeof$3=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$3(ie)}var lottie={};function setLocation(ie){setLocationHref(ie)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(ie){setSubframeEnabled(ie)}function setPrefix(ie){setIdPrefix(ie)}function loadAnimation(ie){return animationManager.loadAnimation(ie)}function setQuality(ie){if(typeof ie=="string")switch(ie){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(ie)&&ie>1&&setDefaultCurveSegments(ie)}function inBrowser(){return typeof navigator!="undefined"}function installPlugin(ie,ee){ie==="expressions"&&setExpressionsPlugin(ee)}function getFactory(ie){switch(ie){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.11.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(ie){for(var ee=queryString.split("&"),te=0;te<ee.length;te+=1){var re=ee[te].split("=");if(decodeURIComponent(re[0])==ie)return decodeURIComponent(re[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(ie){}var ShapeModifiers=function(){var ie={},ee={};ie.registerModifier=te,ie.getModifier=re;function te(ne,se){ee[ne]||(ee[ne]=se)}function re(ne,se,ae){return new ee[ne](se,ae)}return ie}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(ie){if(!this.closed){ie.sh.container.addDynamicProperty(ie.sh);var ee={shape:ie.sh,data:ie,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(ee),this.addShapeToModifier(ee),this._isAnimated&&ie.setAsAnimated()}},ShapeModifier.prototype.init=function(ie,ee){this.shapes=[],this.elem=ie,this.initDynamicPropertyContainer(ie),this.initModifierProperties(ie,ee),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(ie,ee){this.s=PropertyFactory.getProp(ie,ee.s,0,.01,this),this.e=PropertyFactory.getProp(ie,ee.e,0,.01,this),this.o=PropertyFactory.getProp(ie,ee.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=ee.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(ie){ie.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(ie,ee,te,re,ne){var se=[];ee<=1?se.push({s:ie,e:ee}):ie>=1?se.push({s:ie-1,e:ee-1}):(se.push({s:ie,e:1}),se.push({s:0,e:ee-1}));var ae=[],oe,le=se.length,he;for(oe=0;oe<le;oe+=1)if(he=se[oe],!(he.e*ne<re||he.s*ne>re+te)){var ce,de;he.s*ne<=re?ce=0:ce=(he.s*ne-re)/te,he.e*ne>=re+te?de=1:de=(he.e*ne-re)/te,ae.push([ce,de])}return ae.length||ae.push([0,0]),ae},TrimModifier.prototype.releasePathsData=function(ie){var ee,te=ie.length;for(ee=0;ee<te;ee+=1)segmentsLengthPool.release(ie[ee]);return ie.length=0,ie},TrimModifier.prototype.processShapes=function(ie){var ee,te;if(this._mdf||ie){var re=this.o.v%360/360;if(re<0&&(re+=1),this.s.v>1?ee=1+re:this.s.v<0?ee=0+re:ee=this.s.v+re,this.e.v>1?te=1+re:this.e.v<0?te=0+re:te=this.e.v+re,ee>te){var ne=ee;ee=te,te=ne}ee=Math.round(ee*1e4)*1e-4,te=Math.round(te*1e4)*1e-4,this.sValue=ee,this.eValue=te}else ee=this.sValue,te=this.eValue;var se,ae,oe=this.shapes.length,le,he,ce,de,ue,fe=0;if(te===ee)for(ae=0;ae<oe;ae+=1)this.shapes[ae].localShapeCollection.releaseShapes(),this.shapes[ae].shape._mdf=!0,this.shapes[ae].shape.paths=this.shapes[ae].localShapeCollection,this._mdf&&(this.shapes[ae].pathsData.length=0);else if(te===1&&ee===0||te===0&&ee===1){if(this._mdf)for(ae=0;ae<oe;ae+=1)this.shapes[ae].pathsData.length=0,this.shapes[ae].shape._mdf=!0}else{var pe=[],me,xe;for(ae=0;ae<oe;ae+=1)if(me=this.shapes[ae],!me.shape._mdf&&!this._mdf&&!ie&&this.m!==2)me.shape.paths=me.localShapeCollection;else{if(se=me.shape.paths,he=se._length,ue=0,!me.shape._mdf&&me.pathsData.length)ue=me.totalShapeLength;else{for(ce=this.releasePathsData(me.pathsData),le=0;le<he;le+=1)de=bez.getSegmentsLength(se.shapes[le]),ce.push(de),ue+=de.totalLength;me.totalShapeLength=ue,me.pathsData=ce}fe+=ue,me.shape._mdf=!0}var ge=ee,_e=te,ve=0,ye;for(ae=oe-1;ae>=0;ae-=1)if(me=this.shapes[ae],me.shape._mdf){for(xe=me.localShapeCollection,xe.releaseShapes(),this.m===2&&oe>1?(ye=this.calculateShapeEdges(ee,te,me.totalShapeLength,ve,fe),ve+=me.totalShapeLength):ye=[[ge,_e]],he=ye.length,le=0;le<he;le+=1){ge=ye[le][0],_e=ye[le][1],pe.length=0,_e<=1?pe.push({s:me.totalShapeLength*ge,e:me.totalShapeLength*_e}):ge>=1?pe.push({s:me.totalShapeLength*(ge-1),e:me.totalShapeLength*(_e-1)}):(pe.push({s:me.totalShapeLength*ge,e:me.totalShapeLength}),pe.push({s:0,e:me.totalShapeLength*(_e-1)}));var be=this.addShapes(me,pe[0]);if(pe[0].s!==pe[0].e){if(pe.length>1){var we=me.shape.paths.shapes[me.shape.paths._length-1];if(we.c){var Se=be.pop();this.addPaths(be,xe),be=this.addShapes(me,pe[1],Se)}else this.addPaths(be,xe),be=this.addShapes(me,pe[1])}this.addPaths(be,xe)}}me.shape.paths=xe}}},TrimModifier.prototype.addPaths=function(ie,ee){var te,re=ie.length;for(te=0;te<re;te+=1)ee.addShape(ie[te])},TrimModifier.prototype.addSegment=function(ie,ee,te,re,ne,se,ae){ne.setXYAt(ee[0],ee[1],"o",se),ne.setXYAt(te[0],te[1],"i",se+1),ae&&ne.setXYAt(ie[0],ie[1],"v",se),ne.setXYAt(re[0],re[1],"v",se+1)},TrimModifier.prototype.addSegmentFromArray=function(ie,ee,te,re){ee.setXYAt(ie[1],ie[5],"o",te),ee.setXYAt(ie[2],ie[6],"i",te+1),re&&ee.setXYAt(ie[0],ie[4],"v",te),ee.setXYAt(ie[3],ie[7],"v",te+1)},TrimModifier.prototype.addShapes=function(ie,ee,te){var re=ie.pathsData,ne=ie.shape.paths.shapes,se,ae=ie.shape.paths._length,oe,le,he=0,ce,de,ue,fe,pe=[],me,xe=!0;for(te?(de=te._length,me=te._length):(te=shapePool.newElement(),de=0,me=0),pe.push(te),se=0;se<ae;se+=1){for(ue=re[se].lengths,te.c=ne[se].c,le=ne[se].c?ue.length:ue.length+1,oe=1;oe<le;oe+=1)if(ce=ue[oe-1],he+ce.addedLength<ee.s)he+=ce.addedLength,te.c=!1;else if(he>ee.e){te.c=!1;break}else ee.s<=he&&ee.e>=he+ce.addedLength?(this.addSegment(ne[se].v[oe-1],ne[se].o[oe-1],ne[se].i[oe],ne[se].v[oe],te,de,xe),xe=!1):(fe=bez.getNewSegment(ne[se].v[oe-1],ne[se].v[oe],ne[se].o[oe-1],ne[se].i[oe],(ee.s-he)/ce.addedLength,(ee.e-he)/ce.addedLength,ue[oe-1]),this.addSegmentFromArray(fe,te,de,xe),xe=!1,te.c=!1),he+=ce.addedLength,de+=1;if(ne[se].c&&ue.length){if(ce=ue[oe-1],he<=ee.e){var ge=ue[oe-1].addedLength;ee.s<=he&&ee.e>=he+ge?(this.addSegment(ne[se].v[oe-1],ne[se].o[oe-1],ne[se].i[0],ne[se].v[0],te,de,xe),xe=!1):(fe=bez.getNewSegment(ne[se].v[oe-1],ne[se].v[0],ne[se].o[oe-1],ne[se].i[0],(ee.s-he)/ge,(ee.e-he)/ge,ue[oe-1]),this.addSegmentFromArray(fe,te,de,xe),xe=!1,te.c=!1)}else te.c=!1;he+=ce.addedLength,de+=1}if(te._length&&(te.setXYAt(te.v[me][0],te.v[me][1],"i",me),te.setXYAt(te.v[te._length-1][0],te.v[te._length-1][1],"o",te._length-1)),he>ee.e)break;se<ae-1&&(te=shapePool.newElement(),xe=!0,pe.push(te),de=0)}return pe};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(ie,ee){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(ie,ee.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(ie,ee){var te=ee/100,re=[0,0],ne=ie._length,se=0;for(se=0;se<ne;se+=1)re[0]+=ie.v[se][0],re[1]+=ie.v[se][1];re[0]/=ne,re[1]/=ne;var ae=shapePool.newElement();ae.c=ie.c;var oe,le,he,ce,de,ue;for(se=0;se<ne;se+=1)oe=ie.v[se][0]+(re[0]-ie.v[se][0])*te,le=ie.v[se][1]+(re[1]-ie.v[se][1])*te,he=ie.o[se][0]+(re[0]-ie.o[se][0])*-te,ce=ie.o[se][1]+(re[1]-ie.o[se][1])*-te,de=ie.i[se][0]+(re[0]-ie.i[se][0])*-te,ue=ie.i[se][1]+(re[1]-ie.i[se][1])*-te,ae.setTripleAt(oe,le,he,ce,de,ue,se);return ae},PuckerAndBloatModifier.prototype.processShapes=function(ie){var ee,te,re=this.shapes.length,ne,se,ae=this.amount.v;if(ae!==0){var oe,le;for(te=0;te<re;te+=1){if(oe=this.shapes[te],le=oe.localShapeCollection,!(!oe.shape._mdf&&!this._mdf&&!ie))for(le.releaseShapes(),oe.shape._mdf=!0,ee=oe.shape.paths.shapes,se=oe.shape.paths._length,ne=0;ne<se;ne+=1)le.addShape(this.processPath(ee[ne],ae));oe.shape.paths=oe.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var ie=[0,0];function ee(le){var he=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||he,this.a&&le.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&le.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&le.skewFromAxis(-this.sk.v,this.sa.v),this.r?le.rotate(-this.r.v):le.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?le.translate(this.px.v,this.py.v,-this.pz.v):le.translate(this.px.v,this.py.v,0):le.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function te(le){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||le){var he;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var ce,de;if(he=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(ce=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/he,0),de=this.p.getValueAtTime(this.p.keyframes[0].t/he,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(ce=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/he,0),de=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/he,0)):(ce=this.p.pv,de=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/he,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){ce=[],de=[];var ue=this.px,fe=this.py;ue._caching.lastFrame+ue.offsetTime<=ue.keyframes[0].t?(ce[0]=ue.getValueAtTime((ue.keyframes[0].t+.01)/he,0),ce[1]=fe.getValueAtTime((fe.keyframes[0].t+.01)/he,0),de[0]=ue.getValueAtTime(ue.keyframes[0].t/he,0),de[1]=fe.getValueAtTime(fe.keyframes[0].t/he,0)):ue._caching.lastFrame+ue.offsetTime>=ue.keyframes[ue.keyframes.length-1].t?(ce[0]=ue.getValueAtTime(ue.keyframes[ue.keyframes.length-1].t/he,0),ce[1]=fe.getValueAtTime(fe.keyframes[fe.keyframes.length-1].t/he,0),de[0]=ue.getValueAtTime((ue.keyframes[ue.keyframes.length-1].t-.01)/he,0),de[1]=fe.getValueAtTime((fe.keyframes[fe.keyframes.length-1].t-.01)/he,0)):(ce=[ue.pv,fe.pv],de[0]=ue.getValueAtTime((ue._caching.lastFrame+ue.offsetTime-.01)/he,ue.offsetTime),de[1]=fe.getValueAtTime((fe._caching.lastFrame+fe.offsetTime-.01)/he,fe.offsetTime))}else de=ie,ce=de;this.v.rotate(-Math.atan2(ce[1]-de[1],ce[0]-de[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function re(){if(!this.a.k)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function ne(){}function se(le){this._addDynamicProperty(le),this.elem.addDynamicProperty(le),this._isDirty=!0}function ae(le,he,ce){if(this.elem=le,this.frameId=-1,this.propType="transform",this.data=he,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(ce||le),he.p&&he.p.s?(this.px=PropertyFactory.getProp(le,he.p.x,0,0,this),this.py=PropertyFactory.getProp(le,he.p.y,0,0,this),he.p.z&&(this.pz=PropertyFactory.getProp(le,he.p.z,0,0,this))):this.p=PropertyFactory.getProp(le,he.p||{k:[0,0,0]},1,0,this),he.rx){if(this.rx=PropertyFactory.getProp(le,he.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(le,he.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(le,he.rz,0,degToRads,this),he.or.k[0].ti){var de,ue=he.or.k.length;for(de=0;de<ue;de+=1)he.or.k[de].to=null,he.or.k[de].ti=null}this.or=PropertyFactory.getProp(le,he.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(le,he.r||{k:0},0,degToRads,this);he.sk&&(this.sk=PropertyFactory.getProp(le,he.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(le,he.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(le,he.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(le,he.s||{k:[100,100,100]},1,.01,this),he.o?this.o=PropertyFactory.getProp(le,he.o,0,.01,le):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}ae.prototype={applyToMatrix:ee,getValue:te,precalculateMatrix:re,autoOrient:ne},extendPrototype([DynamicPropertyContainer],ae),ae.prototype.addDynamicProperty=se,ae.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function oe(le,he,ce){return new ae(le,he,ce)}return{getTransformProperty:oe}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(ie,ee){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(ie,ee.c,0,null,this),this.o=PropertyFactory.getProp(ie,ee.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(ie,ee.tr,this),this.so=PropertyFactory.getProp(ie,ee.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(ie,ee.tr.eo,0,.01,this),this.data=ee,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(ie,ee,te,re,ne,se){var ae=se?-1:1,oe=re.s.v[0]+(1-re.s.v[0])*(1-ne),le=re.s.v[1]+(1-re.s.v[1])*(1-ne);ie.translate(re.p.v[0]*ae*ne,re.p.v[1]*ae*ne,re.p.v[2]),ee.translate(-re.a.v[0],-re.a.v[1],re.a.v[2]),ee.rotate(-re.r.v*ae*ne),ee.translate(re.a.v[0],re.a.v[1],re.a.v[2]),te.translate(-re.a.v[0],-re.a.v[1],re.a.v[2]),te.scale(se?1/oe:oe,se?1/le:le),te.translate(re.a.v[0],re.a.v[1],re.a.v[2])},RepeaterModifier.prototype.init=function(ie,ee,te,re){for(this.elem=ie,this.arr=ee,this.pos=te,this.elemsData=re,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(ie),this.initModifierProperties(ie,ee[te]);te>0;)te-=1,this._elements.unshift(ee[te]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(ie){var ee,te=ie.length;for(ee=0;ee<te;ee+=1)ie[ee]._processed=!1,ie[ee].ty==="gr"&&this.resetElements(ie[ee].it)},RepeaterModifier.prototype.cloneElements=function(ie){var ee=JSON.parse(JSON.stringify(ie));return this.resetElements(ee),ee},RepeaterModifier.prototype.changeGroupRender=function(ie,ee){var te,re=ie.length;for(te=0;te<re;te+=1)ie[te]._render=ee,ie[te].ty==="gr"&&this.changeGroupRender(ie[te].it,ee)},RepeaterModifier.prototype.processShapes=function(ie){var ee,te,re,ne,se,ae=!1;if(this._mdf||ie){var oe=Math.ceil(this.c.v);if(this._groups.length<oe){for(;this._groups.length<oe;){var le={it:this.cloneElements(this._elements),ty:"gr"};le.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,le),this._groups.splice(0,0,le),this._currentCopies+=1}this.elem.reloadShapes(),ae=!0}se=0;var he;for(re=0;re<=this._groups.length-1;re+=1){if(he=se<oe,this._groups[re]._render=he,this.changeGroupRender(this._groups[re].it,he),!he){var ce=this.elemsData[re].it,de=ce[ce.length-1];de.transform.op.v!==0?(de.transform.op._mdf=!0,de.transform.op.v=0):de.transform.op._mdf=!1}se+=1}this._currentCopies=oe;var ue=this.o.v,fe=ue%1,pe=ue>0?Math.floor(ue):Math.ceil(ue),me=this.pMatrix.props,xe=this.rMatrix.props,ge=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var _e=0;if(ue>0){for(;_e<pe;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),_e+=1;fe&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,fe,!1),_e+=fe)}else if(ue<0){for(;_e>pe;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),_e-=1;fe&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-fe,!0),_e-=fe)}re=this.data.m===1?0:this._currentCopies-1,ne=this.data.m===1?1:-1,se=this._currentCopies;for(var ve,ye;se;){if(ee=this.elemsData[re].it,te=ee[ee.length-1].transform.mProps.v.props,ye=te.length,ee[ee.length-1].transform.mProps._mdf=!0,ee[ee.length-1].transform.op._mdf=!0,ee[ee.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(re/(this._currentCopies-1)),_e!==0){for((re!==0&&ne===1||re!==this._currentCopies-1&&ne===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(xe[0],xe[1],xe[2],xe[3],xe[4],xe[5],xe[6],xe[7],xe[8],xe[9],xe[10],xe[11],xe[12],xe[13],xe[14],xe[15]),this.matrix.transform(ge[0],ge[1],ge[2],ge[3],ge[4],ge[5],ge[6],ge[7],ge[8],ge[9],ge[10],ge[11],ge[12],ge[13],ge[14],ge[15]),this.matrix.transform(me[0],me[1],me[2],me[3],me[4],me[5],me[6],me[7],me[8],me[9],me[10],me[11],me[12],me[13],me[14],me[15]),ve=0;ve<ye;ve+=1)te[ve]=this.matrix.props[ve];this.matrix.reset()}else for(this.matrix.reset(),ve=0;ve<ye;ve+=1)te[ve]=this.matrix.props[ve];_e+=1,se-=1,re+=ne}}else for(se=this._currentCopies,re=0,ne=1;se;)ee=this.elemsData[re].it,te=ee[ee.length-1].transform.mProps.v.props,ee[ee.length-1].transform.mProps._mdf=!1,ee[ee.length-1].transform.op._mdf=!1,se-=1,re+=ne;return ae},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(ie,ee){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(ie,ee.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(ie,ee){var te=shapePool.newElement();te.c=ie.c;var re,ne=ie._length,se,ae,oe,le,he,ce,de=0,ue,fe,pe,me,xe,ge;for(re=0;re<ne;re+=1)se=ie.v[re],oe=ie.o[re],ae=ie.i[re],se[0]===oe[0]&&se[1]===oe[1]&&se[0]===ae[0]&&se[1]===ae[1]?(re===0||re===ne-1)&&!ie.c?(te.setTripleAt(se[0],se[1],oe[0],oe[1],ae[0],ae[1],de),de+=1):(re===0?le=ie.v[ne-1]:le=ie.v[re-1],he=Math.sqrt(Math.pow(se[0]-le[0],2)+Math.pow(se[1]-le[1],2)),ce=he?Math.min(he/2,ee)/he:0,xe=se[0]+(le[0]-se[0])*ce,ue=xe,ge=se[1]-(se[1]-le[1])*ce,fe=ge,pe=ue-(ue-se[0])*roundCorner,me=fe-(fe-se[1])*roundCorner,te.setTripleAt(ue,fe,pe,me,xe,ge,de),de+=1,re===ne-1?le=ie.v[0]:le=ie.v[re+1],he=Math.sqrt(Math.pow(se[0]-le[0],2)+Math.pow(se[1]-le[1],2)),ce=he?Math.min(he/2,ee)/he:0,pe=se[0]+(le[0]-se[0])*ce,ue=pe,me=se[1]+(le[1]-se[1])*ce,fe=me,xe=ue-(ue-se[0])*roundCorner,ge=fe-(fe-se[1])*roundCorner,te.setTripleAt(ue,fe,pe,me,xe,ge,de),de+=1):(te.setTripleAt(ie.v[re][0],ie.v[re][1],ie.o[re][0],ie.o[re][1],ie.i[re][0],ie.i[re][1],de),de+=1);return te},RoundCornersModifier.prototype.processShapes=function(ie){var ee,te,re=this.shapes.length,ne,se,ae=this.rd.v;if(ae!==0){var oe,le;for(te=0;te<re;te+=1){if(oe=this.shapes[te],le=oe.localShapeCollection,!(!oe.shape._mdf&&!this._mdf&&!ie))for(le.releaseShapes(),oe.shape._mdf=!0,ee=oe.shape.paths.shapes,se=oe.shape.paths._length,ne=0;ne<se;ne+=1)le.addShape(this.processPath(ee[ne],ae));oe.shape.paths=oe.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(ie,ee){return Math.abs(ie-ee)*1e5<=Math.min(Math.abs(ie),Math.abs(ee))}function floatZero(ie){return Math.abs(ie)<=1e-5}function lerp(ie,ee,te){return ie*(1-te)+ee*te}function lerpPoint(ie,ee,te){return[lerp(ie[0],ee[0],te),lerp(ie[1],ee[1],te)]}function quadRoots(ie,ee,te){if(ie===0)return[];var re=ee*ee-4*ie*te;if(re<0)return[];var ne=-ee/(2*ie);if(re===0)return[ne];var se=Math.sqrt(re)/(2*ie);return[ne-se,ne+se]}function polynomialCoefficients(ie,ee,te,re){return[-ie+3*ee-3*te+re,3*ie-6*ee+3*te,-3*ie+3*ee,ie]}function singlePoint(ie){return new PolynomialBezier(ie,ie,ie,ie,!1)}function PolynomialBezier(ie,ee,te,re,ne){ne&&pointEqual(ie,ee)&&(ee=lerpPoint(ie,re,1/3)),ne&&pointEqual(te,re)&&(te=lerpPoint(ie,re,2/3));var se=polynomialCoefficients(ie[0],ee[0],te[0],re[0]),ae=polynomialCoefficients(ie[1],ee[1],te[1],re[1]);this.a=[se[0],ae[0]],this.b=[se[1],ae[1]],this.c=[se[2],ae[2]],this.d=[se[3],ae[3]],this.points=[ie,ee,te,re]}PolynomialBezier.prototype.point=function(ie){return[((this.a[0]*ie+this.b[0])*ie+this.c[0])*ie+this.d[0],((this.a[1]*ie+this.b[1])*ie+this.c[1])*ie+this.d[1]]},PolynomialBezier.prototype.derivative=function(ie){return[(3*ie*this.a[0]+2*this.b[0])*ie+this.c[0],(3*ie*this.a[1]+2*this.b[1])*ie+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(ie){var ee=this.derivative(ie);return Math.atan2(ee[1],ee[0])},PolynomialBezier.prototype.normalAngle=function(ie){var ee=this.derivative(ie);return Math.atan2(ee[0],ee[1])},PolynomialBezier.prototype.inflectionPoints=function(){var ie=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(ie))return[];var ee=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/ie,te=ee*ee-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/ie;if(te<0)return[];var re=Math.sqrt(te);return floatZero(re)?re>0&&re<1?[ee]:[]:[ee-re,ee+re].filter(function(ne){return ne>0&&ne<1})},PolynomialBezier.prototype.split=function(ie){if(ie<=0)return[singlePoint(this.points[0]),this];if(ie>=1)return[this,singlePoint(this.points[this.points.length-1])];var ee=lerpPoint(this.points[0],this.points[1],ie),te=lerpPoint(this.points[1],this.points[2],ie),re=lerpPoint(this.points[2],this.points[3],ie),ne=lerpPoint(ee,te,ie),se=lerpPoint(te,re,ie),ae=lerpPoint(ne,se,ie);return[new PolynomialBezier(this.points[0],ee,ne,ae,!0),new PolynomialBezier(ae,se,re,this.points[3],!0)]};function extrema(ie,ee){var te=ie.points[0][ee],re=ie.points[ie.points.length-1][ee];if(te>re){var ne=re;re=te,te=ne}for(var se=quadRoots(3*ie.a[ee],2*ie.b[ee],ie.c[ee]),ae=0;ae<se.length;ae+=1)if(se[ae]>0&&se[ae]<1){var oe=ie.point(se[ae])[ee];oe<te?te=oe:oe>re&&(re=oe)}return{min:te,max:re}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var ie=this.bounds();return{left:ie.x.min,right:ie.x.max,top:ie.y.min,bottom:ie.y.max,width:ie.x.max-ie.x.min,height:ie.y.max-ie.y.min,cx:(ie.x.max+ie.x.min)/2,cy:(ie.y.max+ie.y.min)/2}};function intersectData(ie,ee,te){var re=ie.boundingBox();return{cx:re.cx,cy:re.cy,width:re.width,height:re.height,bez:ie,t:(ee+te)/2,t1:ee,t2:te}}function splitData(ie){var ee=ie.bez.split(.5);return[intersectData(ee[0],ie.t1,ie.t),intersectData(ee[1],ie.t,ie.t2)]}function boxIntersect(ie,ee){return Math.abs(ie.cx-ee.cx)*2<ie.width+ee.width&&Math.abs(ie.cy-ee.cy)*2<ie.height+ee.height}function intersectsImpl(ie,ee,te,re,ne,se){if(!!boxIntersect(ie,ee)){if(te>=se||ie.width<=re&&ie.height<=re&&ee.width<=re&&ee.height<=re){ne.push([ie.t,ee.t]);return}var ae=splitData(ie),oe=splitData(ee);intersectsImpl(ae[0],oe[0],te+1,re,ne,se),intersectsImpl(ae[0],oe[1],te+1,re,ne,se),intersectsImpl(ae[1],oe[0],te+1,re,ne,se),intersectsImpl(ae[1],oe[1],te+1,re,ne,se)}}PolynomialBezier.prototype.intersections=function(ie,ee,te){ee===void 0&&(ee=2),te===void 0&&(te=7);var re=[];return intersectsImpl(intersectData(this,0,1),intersectData(ie,0,1),0,ee,re,te),re},PolynomialBezier.shapeSegment=function(ie,ee){var te=(ee+1)%ie.length();return new PolynomialBezier(ie.v[ee],ie.o[ee],ie.i[te],ie.v[te],!0)},PolynomialBezier.shapeSegmentInverted=function(ie,ee){var te=(ee+1)%ie.length();return new PolynomialBezier(ie.v[te],ie.i[te],ie.o[ee],ie.v[ee],!0)};function crossProduct(ie,ee){return[ie[1]*ee[2]-ie[2]*ee[1],ie[2]*ee[0]-ie[0]*ee[2],ie[0]*ee[1]-ie[1]*ee[0]]}function lineIntersection(ie,ee,te,re){var ne=[ie[0],ie[1],1],se=[ee[0],ee[1],1],ae=[te[0],te[1],1],oe=[re[0],re[1],1],le=crossProduct(crossProduct(ne,se),crossProduct(ae,oe));return floatZero(le[2])?null:[le[0]/le[2],le[1]/le[2]]}function polarOffset(ie,ee,te){return[ie[0]+Math.cos(ee)*te,ie[1]-Math.sin(ee)*te]}function pointDistance(ie,ee){return Math.hypot(ie[0]-ee[0],ie[1]-ee[1])}function pointEqual(ie,ee){return floatEqual(ie[0],ee[0])&&floatEqual(ie[1],ee[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(ie,ee){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(ie,ee.s,0,null,this),this.frequency=PropertyFactory.getProp(ie,ee.r,0,null,this),this.pointsType=PropertyFactory.getProp(ie,ee.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(ie,ee,te,re,ne,se,ae){var oe=te-Math.PI/2,le=te+Math.PI/2,he=ee[0]+Math.cos(te)*re*ne,ce=ee[1]-Math.sin(te)*re*ne;ie.setTripleAt(he,ce,he+Math.cos(oe)*se,ce-Math.sin(oe)*se,he+Math.cos(le)*ae,ce-Math.sin(le)*ae,ie.length())}function getPerpendicularVector(ie,ee){var te=[ee[0]-ie[0],ee[1]-ie[1]],re=-Math.PI*.5,ne=[Math.cos(re)*te[0]-Math.sin(re)*te[1],Math.sin(re)*te[0]+Math.cos(re)*te[1]];return ne}function getProjectingAngle(ie,ee){var te=ee===0?ie.length()-1:ee-1,re=(ee+1)%ie.length(),ne=ie.v[te],se=ie.v[re],ae=getPerpendicularVector(ne,se);return Math.atan2(0,1)-Math.atan2(ae[1],ae[0])}function zigZagCorner(ie,ee,te,re,ne,se,ae){var oe=getProjectingAngle(ee,te),le=ee.v[te%ee._length],he=ee.v[te===0?ee._length-1:te-1],ce=ee.v[(te+1)%ee._length],de=se===2?Math.sqrt(Math.pow(le[0]-he[0],2)+Math.pow(le[1]-he[1],2)):0,ue=se===2?Math.sqrt(Math.pow(le[0]-ce[0],2)+Math.pow(le[1]-ce[1],2)):0;setPoint(ie,ee.v[te%ee._length],oe,ae,re,ue/((ne+1)*2),de/((ne+1)*2))}function zigZagSegment(ie,ee,te,re,ne,se){for(var ae=0;ae<re;ae+=1){var oe=(ae+1)/(re+1),le=ne===2?Math.sqrt(Math.pow(ee.points[3][0]-ee.points[0][0],2)+Math.pow(ee.points[3][1]-ee.points[0][1],2)):0,he=ee.normalAngle(oe),ce=ee.point(oe);setPoint(ie,ce,he,se,te,le/((re+1)*2),le/((re+1)*2)),se=-se}return se}ZigZagModifier.prototype.processPath=function(ie,ee,te,re){var ne=ie._length,se=shapePool.newElement();if(se.c=ie.c,ie.c||(ne-=1),ne===0)return se;var ae=-1,oe=PolynomialBezier.shapeSegment(ie,0);zigZagCorner(se,ie,0,ee,te,re,ae);for(var le=0;le<ne;le+=1)ae=zigZagSegment(se,oe,ee,te,re,-ae),le===ne-1&&!ie.c?oe=null:oe=PolynomialBezier.shapeSegment(ie,(le+1)%ne),zigZagCorner(se,ie,le+1,ee,te,re,ae);return se},ZigZagModifier.prototype.processShapes=function(ie){var ee,te,re=this.shapes.length,ne,se,ae=this.amplitude.v,oe=Math.max(0,Math.round(this.frequency.v)),le=this.pointsType.v;if(ae!==0){var he,ce;for(te=0;te<re;te+=1){if(he=this.shapes[te],ce=he.localShapeCollection,!(!he.shape._mdf&&!this._mdf&&!ie))for(ce.releaseShapes(),he.shape._mdf=!0,ee=he.shape.paths.shapes,se=he.shape.paths._length,ne=0;ne<se;ne+=1)ce.addShape(this.processPath(ee[ne],ae,oe,le));he.shape.paths=he.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(ie,ee,te){var re=Math.atan2(ee[0]-ie[0],ee[1]-ie[1]);return[polarOffset(ie,re,te),polarOffset(ee,re,te)]}function offsetSegment(ie,ee){var te,re,ne,se,ae,oe,le;le=linearOffset(ie.points[0],ie.points[1],ee),te=le[0],re=le[1],le=linearOffset(ie.points[1],ie.points[2],ee),ne=le[0],se=le[1],le=linearOffset(ie.points[2],ie.points[3],ee),ae=le[0],oe=le[1];var he=lineIntersection(te,re,ne,se);he===null&&(he=re);var ce=lineIntersection(ae,oe,ne,se);return ce===null&&(ce=ae),new PolynomialBezier(te,he,ce,oe)}function joinLines(ie,ee,te,re,ne){var se=ee.points[3],ae=te.points[0];if(re===3||pointEqual(se,ae))return se;if(re===2){var oe=-ee.tangentAngle(1),le=-te.tangentAngle(0)+Math.PI,he=lineIntersection(se,polarOffset(se,oe+Math.PI/2,100),ae,polarOffset(ae,oe+Math.PI/2,100)),ce=he?pointDistance(he,se):pointDistance(se,ae)/2,de=polarOffset(se,oe,2*ce*roundCorner);return ie.setXYAt(de[0],de[1],"o",ie.length()-1),de=polarOffset(ae,le,2*ce*roundCorner),ie.setTripleAt(ae[0],ae[1],ae[0],ae[1],de[0],de[1],ie.length()),ae}var ue=pointEqual(se,ee.points[2])?ee.points[0]:ee.points[2],fe=pointEqual(ae,te.points[1])?te.points[3]:te.points[1],pe=lineIntersection(ue,se,ae,fe);return pe&&pointDistance(pe,se)<ne?(ie.setTripleAt(pe[0],pe[1],pe[0],pe[1],pe[0],pe[1],ie.length()),pe):se}function getIntersection(ie,ee){var te=ie.intersections(ee);return te.length&&floatEqual(te[0][0],1)&&te.shift(),te.length?te[0]:null}function pruneSegmentIntersection(ie,ee){var te=ie.slice(),re=ee.slice(),ne=getIntersection(ie[ie.length-1],ee[0]);return ne&&(te[ie.length-1]=ie[ie.length-1].split(ne[0])[0],re[0]=ee[0].split(ne[1])[1]),ie.length>1&&ee.length>1&&(ne=getIntersection(ie[0],ee[ee.length-1]),ne)?[[ie[0].split(ne[0])[0]],[ee[ee.length-1].split(ne[1])[1]]]:[te,re]}function pruneIntersections(ie){for(var ee,te=1;te<ie.length;te+=1)ee=pruneSegmentIntersection(ie[te-1],ie[te]),ie[te-1]=ee[0],ie[te]=ee[1];return ie.length>1&&(ee=pruneSegmentIntersection(ie[ie.length-1],ie[0]),ie[ie.length-1]=ee[0],ie[0]=ee[1]),ie}function offsetSegmentSplit(ie,ee){var te=ie.inflectionPoints(),re,ne,se,ae;if(te.length===0)return[offsetSegment(ie,ee)];if(te.length===1||floatEqual(te[1],1))return se=ie.split(te[0]),re=se[0],ne=se[1],[offsetSegment(re,ee),offsetSegment(ne,ee)];se=ie.split(te[0]),re=se[0];var oe=(te[1]-te[0])/(1-te[0]);return se=se[1].split(oe),ae=se[0],ne=se[1],[offsetSegment(re,ee),offsetSegment(ae,ee),offsetSegment(ne,ee)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(ie,ee){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(ie,ee.a,0,null,this),this.miterLimit=PropertyFactory.getProp(ie,ee.ml,0,null,this),this.lineJoin=ee.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(ie,ee,te,re){var ne=shapePool.newElement();ne.c=ie.c;var se=ie.length();ie.c||(se-=1);var ae,oe,le,he=[];for(ae=0;ae<se;ae+=1)le=PolynomialBezier.shapeSegment(ie,ae),he.push(offsetSegmentSplit(le,ee));if(!ie.c)for(ae=se-1;ae>=0;ae-=1)le=PolynomialBezier.shapeSegmentInverted(ie,ae),he.push(offsetSegmentSplit(le,ee));he=pruneIntersections(he);var ce=null,de=null;for(ae=0;ae<he.length;ae+=1){var ue=he[ae];for(de&&(ce=joinLines(ne,de,ue[0],te,re)),de=ue[ue.length-1],oe=0;oe<ue.length;oe+=1)le=ue[oe],ce&&pointEqual(le.points[0],ce)?ne.setXYAt(le.points[1][0],le.points[1][1],"o",ne.length()-1):ne.setTripleAt(le.points[0][0],le.points[0][1],le.points[1][0],le.points[1][1],le.points[0][0],le.points[0][1],ne.length()),ne.setTripleAt(le.points[3][0],le.points[3][1],le.points[3][0],le.points[3][1],le.points[2][0],le.points[2][1],ne.length()),ce=le.points[3]}return he.length&&joinLines(ne,de,he[0][0],te,re),ne},OffsetPathModifier.prototype.processShapes=function(ie){var ee,te,re=this.shapes.length,ne,se,ae=this.amount.v,oe=this.miterLimit.v,le=this.lineJoin;if(ae!==0){var he,ce;for(te=0;te<re;te+=1){if(he=this.shapes[te],ce=he.localShapeCollection,!(!he.shape._mdf&&!this._mdf&&!ie))for(ce.releaseShapes(),he.shape._mdf=!0,ee=he.shape.paths.shapes,se=he.shape.paths._length,ne=0;ne<se;ne+=1)ce.addShape(this.processPath(ee[ne],ae,le,oe));he.shape.paths=he.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(ie){for(var ee=ie.fStyle?ie.fStyle.split(" "):[],te="normal",re="normal",ne=ee.length,se,ae=0;ae<ne;ae+=1)switch(se=ee[ae].toLowerCase(),se){case"italic":re="italic";break;case"bold":te="700";break;case"black":te="900";break;case"medium":te="500";break;case"regular":case"normal":te="400";break;case"light":case"thin":te="200";break}return{style:re,weight:ie.fWeight||te}}var FontManager=function(){var ie=5e3,ee={w:0,size:0,shapes:[],data:{shapes:[]}},te=[];te=te.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var re=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],ne=[65039,8205];function se(ye){var be=ye.split(","),we,Se=be.length,Te=[];for(we=0;we<Se;we+=1)be[we]!=="sans-serif"&&be[we]!=="monospace"&&Te.push(be[we]);return Te.join(",")}function ae(ye,be){var we=createTag("span");we.setAttribute("aria-hidden",!0),we.style.fontFamily=be;var Se=createTag("span");Se.innerText="giItT1WQy@!-/#",we.style.position="absolute",we.style.left="-10000px",we.style.top="-10000px",we.style.fontSize="300px",we.style.fontVariant="normal",we.style.fontStyle="normal",we.style.fontWeight="normal",we.style.letterSpacing="0",we.appendChild(Se),document.body.appendChild(we);var Te=Se.offsetWidth;return Se.style.fontFamily=se(ye)+", "+be,{node:Se,w:Te,parent:we}}function oe(){var ye,be=this.fonts.length,we,Se,Te=be;for(ye=0;ye<be;ye+=1)this.fonts[ye].loaded?Te-=1:this.fonts[ye].fOrigin==="n"||this.fonts[ye].origin===0?this.fonts[ye].loaded=!0:(we=this.fonts[ye].monoCase.node,Se=this.fonts[ye].monoCase.w,we.offsetWidth!==Se?(Te-=1,this.fonts[ye].loaded=!0):(we=this.fonts[ye].sansCase.node,Se=this.fonts[ye].sansCase.w,we.offsetWidth!==Se&&(Te-=1,this.fonts[ye].loaded=!0)),this.fonts[ye].loaded&&(this.fonts[ye].sansCase.parent.parentNode.removeChild(this.fonts[ye].sansCase.parent),this.fonts[ye].monoCase.parent.parentNode.removeChild(this.fonts[ye].monoCase.parent)));Te!==0&&Date.now()-this.initTime<ie?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function le(ye,be){var we=document.body&&be?"svg":"canvas",Se,Te=getFontProperties(ye);if(we==="svg"){var Pe=createNS("text");Pe.style.fontSize="100px",Pe.setAttribute("font-family",ye.fFamily),Pe.setAttribute("font-style",Te.style),Pe.setAttribute("font-weight",Te.weight),Pe.textContent="1",ye.fClass?(Pe.style.fontFamily="inherit",Pe.setAttribute("class",ye.fClass)):Pe.style.fontFamily=ye.fFamily,be.appendChild(Pe),Se=Pe}else{var Be=new OffscreenCanvas(500,500).getContext("2d");Be.font=Te.style+" "+Te.weight+" 100px "+ye.fFamily,Se=Be}function Ce(De){return we==="svg"?(Se.textContent=De,Se.getComputedTextLength()):Se.measureText(De).width}return{measureText:Ce}}function he(ye,be){if(!ye){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=ye.list;return}if(!document.body){this.isLoaded=!0,ye.list.forEach(function(Me){Me.helper=le(Me),Me.cache={}}),this.fonts=ye.list;return}var we=ye.list,Se,Te=we.length,Pe=Te;for(Se=0;Se<Te;Se+=1){var Be=!0,Ce,De;if(we[Se].loaded=!1,we[Se].monoCase=ae(we[Se].fFamily,"monospace"),we[Se].sansCase=ae(we[Se].fFamily,"sans-serif"),!we[Se].fPath)we[Se].loaded=!0,Pe-=1;else if(we[Se].fOrigin==="p"||we[Se].origin===3){if(Ce=document.querySelectorAll('style[f-forigin="p"][f-family="'+we[Se].fFamily+'"], style[f-origin="3"][f-family="'+we[Se].fFamily+'"]'),Ce.length>0&&(Be=!1),Be){var Re=createTag("style");Re.setAttribute("f-forigin",we[Se].fOrigin),Re.setAttribute("f-origin",we[Se].origin),Re.setAttribute("f-family",we[Se].fFamily),Re.type="text/css",Re.innerText="@font-face {font-family: "+we[Se].fFamily+"; font-style: normal; src: url('"+we[Se].fPath+"');}",be.appendChild(Re)}}else if(we[Se].fOrigin==="g"||we[Se].origin===1){for(Ce=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),De=0;De<Ce.length;De+=1)Ce[De].href.indexOf(we[Se].fPath)!==-1&&(Be=!1);if(Be){var Le=createTag("link");Le.setAttribute("f-forigin",we[Se].fOrigin),Le.setAttribute("f-origin",we[Se].origin),Le.type="text/css",Le.rel="stylesheet",Le.href=we[Se].fPath,document.body.appendChild(Le)}}else if(we[Se].fOrigin==="t"||we[Se].origin===2){for(Ce=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),De=0;De<Ce.length;De+=1)we[Se].fPath===Ce[De].src&&(Be=!1);if(Be){var ke=createTag("link");ke.setAttribute("f-forigin",we[Se].fOrigin),ke.setAttribute("f-origin",we[Se].origin),ke.setAttribute("rel","stylesheet"),ke.setAttribute("href",we[Se].fPath),be.appendChild(ke)}}we[Se].helper=le(we[Se],be),we[Se].cache={},this.fonts.push(we[Se])}Pe===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function ce(ye){if(!!ye){this.chars||(this.chars=[]);var be,we=ye.length,Se,Te=this.chars.length,Pe;for(be=0;be<we;be+=1){for(Se=0,Pe=!1;Se<Te;)this.chars[Se].style===ye[be].style&&this.chars[Se].fFamily===ye[be].fFamily&&this.chars[Se].ch===ye[be].ch&&(Pe=!0),Se+=1;Pe||(this.chars.push(ye[be]),Te+=1)}}}function de(ye,be,we){for(var Se=0,Te=this.chars.length;Se<Te;){if(this.chars[Se].ch===ye&&this.chars[Se].style===be&&this.chars[Se].fFamily===we)return this.chars[Se];Se+=1}return(typeof ye=="string"&&ye.charCodeAt(0)!==13||!ye)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",ye,be,we)),ee}function ue(ye,be,we){var Se=this.getFontByName(be),Te=ye.charCodeAt(0);if(!Se.cache[Te+1]){var Pe=Se.helper;if(ye===" "){var Be=Pe.measureText("|"+ye+"|"),Ce=Pe.measureText("||");Se.cache[Te+1]=(Be-Ce)/100}else Se.cache[Te+1]=Pe.measureText(ye)/100}return Se.cache[Te+1]*we}function fe(ye){for(var be=0,we=this.fonts.length;be<we;){if(this.fonts[be].fName===ye)return this.fonts[be];be+=1}return this.fonts[0]}function pe(ye,be){var we=ye.toString(16)+be.toString(16);return re.indexOf(we)!==-1}function me(ye,be){return be?ye===ne[0]&&be===ne[1]:ye===ne[1]}function xe(ye){return te.indexOf(ye)!==-1}function ge(){this.isLoaded=!0}var _e=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};_e.isModifier=pe,_e.isZeroWidthJoiner=me,_e.isCombinedCharacter=xe;var ve={addChars:ce,addFonts:he,getCharData:de,getFontByName:fe,measureText:ue,checkLoadedFonts:oe,setIsLoaded:ge};return _e.prototype=ve,_e}();function SlotManager(ie){this.animationData=ie}SlotManager.prototype.getProp=function(ie){return this.animationData.slots&&this.animationData.slots[ie.sid]?Object.assign(ie,this.animationData.slots[ie.sid].p):ie};function slotFactory(ie){return new SlotManager(ie)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(ee){this.renderableComponents.indexOf(ee)===-1&&this.renderableComponents.push(ee)},removeRenderableComponent:function(ee){this.renderableComponents.indexOf(ee)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(ee),1)},prepareRenderableFrame:function(ee){this.checkLayerLimits(ee)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(ee){this.data.ip-this.data.st<=ee&&this.data.op-this.data.st>ee?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var ee,te=this.renderableComponents.length;for(ee=0;ee<te;ee+=1)this.renderableComponents[ee].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var ie={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(ee){return ie[ee]||""}}();function SliderEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,0,0,te)}function AngleEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,0,0,te)}function ColorEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,1,0,te)}function PointEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,1,0,te)}function LayerIndexEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,0,0,te)}function MaskIndexEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,0,0,te)}function CheckboxEffect(ie,ee,te){this.p=PropertyFactory.getProp(ee,ie.v,0,0,te)}function NoValueEffect(){this.p={}}function EffectsManager(ie,ee){var te=ie.ef||[];this.effectElements=[];var re,ne=te.length,se;for(re=0;re<ne;re+=1)se=new GroupEffect(te[re],ee),this.effectElements.push(se)}function GroupEffect(ie,ee){this.init(ie,ee)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(ie,ee){this.data=ie,this.effectElements=[],this.initDynamicPropertyContainer(ee);var te,re=this.data.ef.length,ne,se=this.data.ef;for(te=0;te<re;te+=1){switch(ne=null,se[te].ty){case 0:ne=new SliderEffect(se[te],ee,this);break;case 1:ne=new AngleEffect(se[te],ee,this);break;case 2:ne=new ColorEffect(se[te],ee,this);break;case 3:ne=new PointEffect(se[te],ee,this);break;case 4:case 7:ne=new CheckboxEffect(se[te],ee,this);break;case 10:ne=new LayerIndexEffect(se[te],ee,this);break;case 11:ne=new MaskIndexEffect(se[te],ee,this);break;case 5:ne=new EffectsManager(se[te],ee);break;default:ne=new NoValueEffect(se[te]);break}ne&&this.effectElements.push(ne)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var ee=0,te=this.data.masksProperties.length;ee<te;){if(this.data.masksProperties[ee].mode!=="n"&&this.data.masksProperties[ee].cl!==!1)return!0;ee+=1}return!1},initExpressions:function(){var ee=getExpressionInterfaces();if(!!ee){var te=ee("layer"),re=ee("effects"),ne=ee("shape"),se=ee("text"),ae=ee("comp");this.layerInterface=te(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var oe=re.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(oe),this.data.ty===0||this.data.xt?this.compInterface=ae(this):this.data.ty===4?(this.layerInterface.shapeInterface=ne(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=se(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var ee=getBlendMode(this.data.bm),te=this.baseElement||this.layerElement;te.style["mix-blend-mode"]=ee},initBaseData:function(ee,te,re){this.globalData=te,this.comp=re,this.data=ee,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(ee,te){var re,ne=this.dynamicProperties.length;for(re=0;re<ne;re+=1)(te||this._isParent&&this.dynamicProperties[re].propType==="transform")&&(this.dynamicProperties[re].getValue(),this.dynamicProperties[re]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(ee){this.dynamicProperties.indexOf(ee)===-1&&this.dynamicProperties.push(ee)}};function FootageElement(ie,ee,te){this.initFrame(),this.initRenderable(),this.assetData=ee.getAssetData(ie.refId),this.footageData=ee.imageLoader.getAsset(this.assetData),this.initBaseData(ie,ee,te)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var ie=getExpressionInterfaces();if(!!ie){var ee=ie("footage");this.layerInterface=ee(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(ie,ee,te){this.initFrame(),this.initRenderable(),this.assetData=ee.getAssetData(ie.refId),this.initBaseData(ie,ee,te),this._isPlaying=!1,this._canPlay=!1;var re=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(re),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=ie.tm?PropertyFactory.getProp(this,ie.tm,0,ee.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,ie.au&&ie.au.lv?ie.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(ie){if(this.prepareRenderableFrame(ie,!0),this.prepareProperties(ie,!0),this.tm._placeholder)this._currentTime=ie/this.data.sr;else{var ee=this.tm.v;this._currentTime=ee}this._volume=this.lv.v[0];var te=this._volume*this._volumeMultiplier;this._previousVolume!==te&&(this._previousVolume=te,this.audio.volume(te))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(ie){this.audio.rate(ie)},AudioElement.prototype.volume=function(ie){this._volumeMultiplier=ie,this._previousVolume=ie*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(ie){var ee,te=this.layers.length,re;for(this.completeLayers=!0,ee=te-1;ee>=0;ee-=1)this.elements[ee]||(re=this.layers[ee],re.ip-re.st<=ie-this.layers[ee].st&&re.op-re.st>ie-this.layers[ee].st&&this.buildItem(ee)),this.completeLayers=this.elements[ee]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(ie){switch(ie.ty){case 2:return this.createImage(ie);case 0:return this.createComp(ie);case 1:return this.createSolid(ie);case 3:return this.createNull(ie);case 4:return this.createShape(ie);case 5:return this.createText(ie);case 6:return this.createAudio(ie);case 13:return this.createCamera(ie);case 15:return this.createFootage(ie);default:return this.createNull(ie)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(ie){return new AudioElement(ie,this.globalData,this)},BaseRenderer.prototype.createFootage=function(ie){return new FootageElement(ie,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var ie,ee=this.layers.length;for(ie=0;ie<ee;ie+=1)this.buildItem(ie);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(ie){this.completeLayers=!1;var ee,te=ie.length,re,ne=this.layers.length;for(ee=0;ee<te;ee+=1)for(re=0;re<ne;){if(this.layers[re].id===ie[ee].id){this.layers[re]=ie[ee];break}re+=1}},BaseRenderer.prototype.setProjectInterface=function(ie){this.globalData.projectInterface=ie},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(ie,ee,te){for(var re=this.elements,ne=this.layers,se=0,ae=ne.length;se<ae;)ne[se].ind==ee&&(!re[se]||re[se]===!0?(this.buildItem(se),this.addPendingElement(ie)):(te.push(re[se]),re[se].setAsParent(),ne[se].parent!==void 0?this.buildElementParenting(ie,ne[se].parent,te):ie.setHierarchy(te))),se+=1},BaseRenderer.prototype.addPendingElement=function(ie){this.pendingElements.push(ie)},BaseRenderer.prototype.searchExtraCompositions=function(ie){var ee,te=ie.length;for(ee=0;ee<te;ee+=1)if(ie[ee].xt){var re=this.createComp(ie[ee]);re.initExpressions(),this.globalData.projectInterface.registerComposition(re)}},BaseRenderer.prototype.getElementById=function(ie){var ee,te=this.elements.length;for(ee=0;ee<te;ee+=1)if(this.elements[ee].data.ind===ie)return this.elements[ee];return null},BaseRenderer.prototype.getElementByPath=function(ie){var ee=ie.shift(),te;if(typeof ee=="number")te=this.elements[ee];else{var re,ne=this.elements.length;for(re=0;re<ne;re+=1)if(this.elements[re].data.nm===ee){te=this.elements[re];break}}return ie.length===0?te:te.getElementByPath(ie)},BaseRenderer.prototype.setupGlobalData=function(ie,ee){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(ie),this.globalData.fontManager.addChars(ie.chars),this.globalData.fontManager.addFonts(ie.fonts,ee),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=ie.fr,this.globalData.nm=ie.nm,this.globalData.compSize={w:ie.w,h:ie.h}};function TransformElement(){}TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var ee,te=this.finalTransform.mat,re=0,ne=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;re<ne;){if(this.hierarchy[re].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}re+=1}if(this.finalTransform._matMdf)for(ee=this.finalTransform.mProp.v.props,te.cloneFromProps(ee),re=0;re<ne;re+=1)ee=this.hierarchy[re].finalTransform.mProp.v.props,te.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5],ee[6],ee[7],ee[8],ee[9],ee[10],ee[11],ee[12],ee[13],ee[14],ee[15])}},globalToLocal:function(ee){var te=[];te.push(this.finalTransform);for(var re=!0,ne=this.comp;re;)ne.finalTransform?(ne.data.hasMask&&te.splice(0,0,ne.finalTransform),ne=ne.comp):re=!1;var se,ae=te.length,oe;for(se=0;se<ae;se+=1)oe=te[se].mat.applyToPointArray(0,0,0),ee=[ee[0]-oe[0],ee[1]-oe[1],0];return ee},mHelper:new Matrix};function MaskElement(ie,ee,te){this.data=ie,this.element=ee,this.globalData=te,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var re=this.globalData.defs,ne,se=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(se),this.solidPath="";var ae,oe=this.masksProperties,le=0,he=[],ce,de,ue=createElementID(),fe,pe,me,xe,ge="clipPath",_e="clip-path";for(ne=0;ne<se;ne+=1)if((oe[ne].mode!=="a"&&oe[ne].mode!=="n"||oe[ne].inv||oe[ne].o.k!==100||oe[ne].o.x)&&(ge="mask",_e="mask"),(oe[ne].mode==="s"||oe[ne].mode==="i")&&le===0?(fe=createNS("rect"),fe.setAttribute("fill","#ffffff"),fe.setAttribute("width",this.element.comp.data.w||0),fe.setAttribute("height",this.element.comp.data.h||0),he.push(fe)):fe=null,ae=createNS("path"),oe[ne].mode==="n")this.viewData[ne]={op:PropertyFactory.getProp(this.element,oe[ne].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,oe[ne],3),elem:ae,lastPath:""},re.appendChild(ae);else{le+=1,ae.setAttribute("fill",oe[ne].mode==="s"?"#000000":"#ffffff"),ae.setAttribute("clip-rule","nonzero");var ve;if(oe[ne].x.k!==0?(ge="mask",_e="mask",xe=PropertyFactory.getProp(this.element,oe[ne].x,0,null,this.element),ve=createElementID(),pe=createNS("filter"),pe.setAttribute("id",ve),me=createNS("feMorphology"),me.setAttribute("operator","erode"),me.setAttribute("in","SourceGraphic"),me.setAttribute("radius","0"),pe.appendChild(me),re.appendChild(pe),ae.setAttribute("stroke",oe[ne].mode==="s"?"#000000":"#ffffff")):(me=null,xe=null),this.storedData[ne]={elem:ae,x:xe,expan:me,lastPath:"",lastOperator:"",filterId:ve,lastRadius:0},oe[ne].mode==="i"){de=he.length;var ye=createNS("g");for(ce=0;ce<de;ce+=1)ye.appendChild(he[ce]);var be=createNS("mask");be.setAttribute("mask-type","alpha"),be.setAttribute("id",ue+"_"+le),be.appendChild(ae),re.appendChild(be),ye.setAttribute("mask","url("+getLocationHref()+"#"+ue+"_"+le+")"),he.length=0,he.push(ye)}else he.push(ae);oe[ne].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[ne]={elem:ae,lastPath:"",op:PropertyFactory.getProp(this.element,oe[ne].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,oe[ne],3),invRect:fe},this.viewData[ne].prop.k||this.drawPath(oe[ne],this.viewData[ne].prop.v,this.viewData[ne])}for(this.maskElement=createNS(ge),se=he.length,ne=0;ne<se;ne+=1)this.maskElement.appendChild(he[ne]);le>0&&(this.maskElement.setAttribute("id",ue),this.element.maskedElement.setAttribute(_e,"url("+getLocationHref()+"#"+ue+")"),re.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(ie){return this.viewData[ie].prop},MaskElement.prototype.renderFrame=function(ie){var ee=this.element.finalTransform.mat,te,re=this.masksProperties.length;for(te=0;te<re;te+=1)if((this.viewData[te].prop._mdf||ie)&&this.drawPath(this.masksProperties[te],this.viewData[te].prop.v,this.viewData[te]),(this.viewData[te].op._mdf||ie)&&this.viewData[te].elem.setAttribute("fill-opacity",this.viewData[te].op.v),this.masksProperties[te].mode!=="n"&&(this.viewData[te].invRect&&(this.element.finalTransform.mProp._mdf||ie)&&this.viewData[te].invRect.setAttribute("transform",ee.getInverseMatrix().to2dCSS()),this.storedData[te].x&&(this.storedData[te].x._mdf||ie))){var ne=this.storedData[te].expan;this.storedData[te].x.v<0?(this.storedData[te].lastOperator!=="erode"&&(this.storedData[te].lastOperator="erode",this.storedData[te].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[te].filterId+")")),ne.setAttribute("radius",-this.storedData[te].x.v)):(this.storedData[te].lastOperator!=="dilate"&&(this.storedData[te].lastOperator="dilate",this.storedData[te].elem.setAttribute("filter",null)),this.storedData[te].elem.setAttribute("stroke-width",this.storedData[te].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var ie="M0,0 ";return ie+=" h"+this.globalData.compSize.w,ie+=" v"+this.globalData.compSize.h,ie+=" h-"+this.globalData.compSize.w,ie+=" v-"+this.globalData.compSize.h+" ",ie},MaskElement.prototype.drawPath=function(ie,ee,te){var re=" M"+ee.v[0][0]+","+ee.v[0][1],ne,se;for(se=ee._length,ne=1;ne<se;ne+=1)re+=" C"+ee.o[ne-1][0]+","+ee.o[ne-1][1]+" "+ee.i[ne][0]+","+ee.i[ne][1]+" "+ee.v[ne][0]+","+ee.v[ne][1];if(ee.c&&se>1&&(re+=" C"+ee.o[ne-1][0]+","+ee.o[ne-1][1]+" "+ee.i[0][0]+","+ee.i[0][1]+" "+ee.v[0][0]+","+ee.v[0][1]),te.lastPath!==re){var ae="";te.elem&&(ee.c&&(ae=ie.inv?this.solidPath+re:re),te.elem.setAttribute("d",ae)),te.lastPath=re}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var ie={};ie.createFilter=ee,ie.createAlphaToLuminanceFilter=te;function ee(re,ne){var se=createNS("filter");return se.setAttribute("id",re),ne!==!0&&(se.setAttribute("filterUnits","objectBoundingBox"),se.setAttribute("x","0%"),se.setAttribute("y","0%"),se.setAttribute("width","100%"),se.setAttribute("height","100%")),se}function te(){var re=createNS("feColorMatrix");return re.setAttribute("type","matrix"),re.setAttribute("color-interpolation-filters","sRGB"),re.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),re}return ie}(),featureSupport=function(){var ie={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas!="undefined"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(ie.maskType=!1),/firefox/i.test(navigator.userAgent)&&(ie.svgLumaHidden=!1),ie}(),registeredEffects={},idPrefix="filter_result_";function SVGEffects(ie){var ee,te="SourceGraphic",re=ie.data.ef?ie.data.ef.length:0,ne=createElementID(),se=filtersFactory.createFilter(ne,!0),ae=0;this.filters=[];var oe;for(ee=0;ee<re;ee+=1){oe=null;var le=ie.data.ef[ee].ty;if(registeredEffects[le]){var he=registeredEffects[le].effect;oe=new he(se,ie.effectsManager.effectElements[ee],ie,idPrefix+ae,te),te=idPrefix+ae,registeredEffects[le].countsAsEffect&&(ae+=1)}oe&&this.filters.push(oe)}ae&&(ie.globalData.defs.appendChild(se),ie.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+ne+")")),this.filters.length&&ie.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(ie){var ee,te=this.filters.length;for(ee=0;ee<te;ee+=1)this.filters[ee].renderFrame(ie)};function registerEffect(ie,ee,te){registeredEffects[ie]={effect:ee,countsAsEffect:te}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var ee=null;if(this.data.td){this.matteMasks={};var te=createNS("g");te.setAttribute("id",this.layerId),te.appendChild(this.layerElement),ee=te,this.globalData.defs.appendChild(te)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),ee=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var re=createNS("clipPath"),ne=createNS("path");ne.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var se=createElementID();if(re.setAttribute("id",se),re.appendChild(ne),this.globalData.defs.appendChild(re),this.checkMasks()){var ae=createNS("g");ae.setAttribute("clip-path","url("+getLocationHref()+"#"+se+")"),ae.appendChild(this.layerElement),this.transformedElement=ae,ee?ee.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+se+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},getMatte:function(ee){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[ee]){var te=this.layerId+"_"+ee,re,ne,se,ae;if(ee===1||ee===3){var oe=createNS("mask");oe.setAttribute("id",te),oe.setAttribute("mask-type",ee===3?"luminance":"alpha"),se=createNS("use"),se.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),oe.appendChild(se),this.globalData.defs.appendChild(oe),!featureSupport.maskType&&ee===1&&(oe.setAttribute("mask-type","luminance"),re=createElementID(),ne=filtersFactory.createFilter(re),this.globalData.defs.appendChild(ne),ne.appendChild(filtersFactory.createAlphaToLuminanceFilter()),ae=createNS("g"),ae.appendChild(se),oe.appendChild(ae),ae.setAttribute("filter","url("+getLocationHref()+"#"+re+")"))}else if(ee===2){var le=createNS("mask");le.setAttribute("id",te),le.setAttribute("mask-type","alpha");var he=createNS("g");le.appendChild(he),re=createElementID(),ne=filtersFactory.createFilter(re);var ce=createNS("feComponentTransfer");ce.setAttribute("in","SourceGraphic"),ne.appendChild(ce);var de=createNS("feFuncA");de.setAttribute("type","table"),de.setAttribute("tableValues","1.0 0.0"),ce.appendChild(de),this.globalData.defs.appendChild(ne);var ue=createNS("rect");ue.setAttribute("width",this.comp.data.w),ue.setAttribute("height",this.comp.data.h),ue.setAttribute("x","0"),ue.setAttribute("y","0"),ue.setAttribute("fill","#ffffff"),ue.setAttribute("opacity","0"),he.setAttribute("filter","url("+getLocationHref()+"#"+re+")"),he.appendChild(ue),se=createNS("use"),se.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),he.appendChild(se),featureSupport.maskType||(le.setAttribute("mask-type","luminance"),ne.appendChild(filtersFactory.createAlphaToLuminanceFilter()),ae=createNS("g"),he.appendChild(ue),ae.appendChild(this.layerElement),he.appendChild(ae)),this.globalData.defs.appendChild(le)}this.matteMasks[ee]=te}return this.matteMasks[ee]},setMatte:function(ee){!this.matteElement||this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+ee+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(ee){this.hierarchy=ee},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var ie={initElement:function(te,re,ne){this.initFrame(),this.initBaseData(te,re,ne),this.initTransform(te,re,ne),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var te=this.baseElement||this.layerElement;te.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var te=this.baseElement||this.layerElement;te.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(te){this._mdf=!1,this.prepareRenderableFrame(te),this.prepareProperties(te,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(ie)],RenderableDOMElement)})();function IImageElement(ie,ee,te){this.assetData=ee.getAssetData(ie.refId),this.assetData&&this.assetData.sid&&(this.assetData=ee.slotManager.getProp(this.assetData)),this.initElement(ie,ee,te),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var ie=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",ie),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(ie,ee){this.elem=ie,this.pos=ee}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(ee){var te,re=this.shapeModifiers.length;for(te=0;te<re;te+=1)this.shapeModifiers[te].addShape(ee)},isShapeInAnimatedModifiers:function(ee){for(var te=0,re=this.shapeModifiers.length;te<re;)if(this.shapeModifiers[te].isAnimatedWithShape(ee))return!0;return!1},renderModifiers:function(){if(!!this.shapeModifiers.length){var ee,te=this.shapes.length;for(ee=0;ee<te;ee+=1)this.shapes[ee].sh.reset();te=this.shapeModifiers.length;var re;for(ee=te-1;ee>=0&&(re=this.shapeModifiers[ee].processShapes(this._isFirstFrame),!re);ee-=1);}},searchProcessedElement:function(ee){for(var te=this.processedElements,re=0,ne=te.length;re<ne;){if(te[re].elem===ee)return te[re].pos;re+=1}return 0},addProcessedElement:function(ee,te){for(var re=this.processedElements,ne=re.length;ne;)if(ne-=1,re[ne].elem===ee){re[ne].pos=te;return}re.push(new ProcessedElement(ee,te))},prepareFrame:function(ee){this.prepareRenderableFrame(ee),this.prepareProperties(ee,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(ie,ee,te){this.caches=[],this.styles=[],this.transformers=ie,this.lStr="",this.sh=te,this.lvl=ee,this._isAnimated=!!te.k;for(var re=0,ne=ie.length;re<ne;){if(ie[re].mProps.dynamicProperties.length){this._isAnimated=!0;break}re+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(ie,ee){this.data=ie,this.type=ie.ty,this.d="",this.lvl=ee,this._mdf=!1,this.closed=ie.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(ie,ee,te,re){this.elem=ie,this.frameId=-1,this.dataProps=createSizedArray(ee.length),this.renderer=te,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",ee.length?ee.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(re);var ne,se=ee.length||0,ae;for(ne=0;ne<se;ne+=1)ae=PropertyFactory.getProp(ie,ee[ne].v,0,0,this),this.k=ae.k||this.k,this.dataProps[ne]={n:ee[ne].n,p:ae};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(ie){if(!(this.elem.globalData.frameId===this.frameId&&!ie)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||ie,this._mdf)){var ee=0,te=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),ee=0;ee<te;ee+=1)this.dataProps[ee].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[ee].p.v:this.dashArray[ee]=this.dataProps[ee].p.v:this.dashoffset[0]=this.dataProps[ee].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(ie,ee,te){this.initDynamicPropertyContainer(ie),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(ie,ee.o,0,.01,this),this.w=PropertyFactory.getProp(ie,ee.w,0,null,this),this.d=new DashProperty(ie,ee.d||{},"svg",this),this.c=PropertyFactory.getProp(ie,ee.c,1,255,this),this.style=te,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(ie,ee,te){this.initDynamicPropertyContainer(ie),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(ie,ee.o,0,.01,this),this.c=PropertyFactory.getProp(ie,ee.c,1,255,this),this.style=te}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(ie,ee,te){this.initDynamicPropertyContainer(ie),this.getValue=this.iterateDynamicProperties,this.style=te}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(ie,ee,te){this.data=ee,this.c=createTypedArray("uint8c",ee.p*4);var re=ee.k.k[0].s?ee.k.k[0].s.length-ee.p*4:ee.k.k.length-ee.p*4;this.o=createTypedArray("float32",re),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=re,this.initDynamicPropertyContainer(te),this.prop=PropertyFactory.getProp(ie,ee.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(ie,ee){for(var te=0,re=this.o.length/2,ne;te<re;){if(ne=Math.abs(ie[te*4]-ie[ee*4+te*2]),ne>.01)return!1;te+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var ie=0,ee=this.data.k.k.length;ie<ee;){if(!this.comparePoints(this.data.k.k[ie].s,this.data.p))return!1;ie+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(ie){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||ie){var ee,te=this.data.p*4,re,ne;for(ee=0;ee<te;ee+=1)re=ee%4===0?100:255,ne=Math.round(this.prop.v[ee]*re),this.c[ee]!==ne&&(this.c[ee]=ne,this._cmdf=!ie);if(this.o.length)for(te=this.prop.v.length,ee=this.data.p*4;ee<te;ee+=1)re=ee%2===0?100:1,ne=ee%2===0?Math.round(this.prop.v[ee]*100):this.prop.v[ee],this.o[ee-this.data.p*4]!==ne&&(this.o[ee-this.data.p*4]=ne,this._omdf=!ie);this._mdf=!ie}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(ie,ee,te){this.initDynamicPropertyContainer(ie),this.getValue=this.iterateDynamicProperties,this.initGradientData(ie,ee,te)}SVGGradientFillStyleData.prototype.initGradientData=function(ie,ee,te){this.o=PropertyFactory.getProp(ie,ee.o,0,.01,this),this.s=PropertyFactory.getProp(ie,ee.s,1,null,this),this.e=PropertyFactory.getProp(ie,ee.e,1,null,this),this.h=PropertyFactory.getProp(ie,ee.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(ie,ee.a||{k:0},0,degToRads,this),this.g=new GradientProperty(ie,ee.g,this),this.style=te,this.stops=[],this.setGradientData(te.pElem,ee),this.setGradientOpacity(ee,te),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(ie,ee){var te=createElementID(),re=createNS(ee.t===1?"linearGradient":"radialGradient");re.setAttribute("id",te),re.setAttribute("spreadMethod","pad"),re.setAttribute("gradientUnits","userSpaceOnUse");var ne=[],se,ae,oe;for(oe=ee.g.p*4,ae=0;ae<oe;ae+=4)se=createNS("stop"),re.appendChild(se),ne.push(se);ie.setAttribute(ee.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+te+")"),this.gf=re,this.cst=ne},SVGGradientFillStyleData.prototype.setGradientOpacity=function(ie,ee){if(this.g._hasOpacity&&!this.g._collapsable){var te,re,ne,se=createNS("mask"),ae=createNS("path");se.appendChild(ae);var oe=createElementID(),le=createElementID();se.setAttribute("id",le);var he=createNS(ie.t===1?"linearGradient":"radialGradient");he.setAttribute("id",oe),he.setAttribute("spreadMethod","pad"),he.setAttribute("gradientUnits","userSpaceOnUse"),ne=ie.g.k.k[0].s?ie.g.k.k[0].s.length:ie.g.k.k.length;var ce=this.stops;for(re=ie.g.p*4;re<ne;re+=2)te=createNS("stop"),te.setAttribute("stop-color","rgb(255,255,255)"),he.appendChild(te),ce.push(te);ae.setAttribute(ie.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+oe+")"),ie.ty==="gs"&&(ae.setAttribute("stroke-linecap",lineCapEnum[ie.lc||2]),ae.setAttribute("stroke-linejoin",lineJoinEnum[ie.lj||2]),ie.lj===1&&ae.setAttribute("stroke-miterlimit",ie.ml)),this.of=he,this.ms=se,this.ost=ce,this.maskId=le,ee.msElem=ae}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(ie,ee,te){this.initDynamicPropertyContainer(ie),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(ie,ee.w,0,null,this),this.d=new DashProperty(ie,ee.d||{},"svg",this),this.initGradientData(ie,ee,te),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(ie,ee,te){this.transform={mProps:ie,op:ee,container:te},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(ee,te,re,ne){if(te===0)return"";var se=ee.o,ae=ee.i,oe=ee.v,le,he=" M"+ne.applyToPointStringified(oe[0][0],oe[0][1]);for(le=1;le<te;le+=1)he+=" C"+ne.applyToPointStringified(se[le-1][0],se[le-1][1])+" "+ne.applyToPointStringified(ae[le][0],ae[le][1])+" "+ne.applyToPointStringified(oe[le][0],oe[le][1]);return re&&te&&(he+=" C"+ne.applyToPointStringified(se[le-1][0],se[le-1][1])+" "+ne.applyToPointStringified(ae[0][0],ae[0][1])+" "+ne.applyToPointStringified(oe[0][0],oe[0][1]),he+="z"),he},SVGElementsRenderer=function(){var ie=new Matrix,ee=new Matrix,te={createRenderFunction:re};function re(de){switch(de.ty){case"fl":return oe;case"gf":return he;case"gs":return le;case"st":return ce;case"sh":case"el":case"rc":case"sr":return ae;case"tr":return ne;case"no":return se;default:return null}}function ne(de,ue,fe){(fe||ue.transform.op._mdf)&&ue.transform.container.setAttribute("opacity",ue.transform.op.v),(fe||ue.transform.mProps._mdf)&&ue.transform.container.setAttribute("transform",ue.transform.mProps.v.to2dCSS())}function se(){}function ae(de,ue,fe){var pe,me,xe,ge,_e,ve,ye=ue.styles.length,be=ue.lvl,we,Se,Te,Pe,Be;for(ve=0;ve<ye;ve+=1){if(ge=ue.sh._mdf||fe,ue.styles[ve].lvl<be){for(Se=ee.reset(),Pe=be-ue.styles[ve].lvl,Be=ue.transformers.length-1;!ge&&Pe>0;)ge=ue.transformers[Be].mProps._mdf||ge,Pe-=1,Be-=1;if(ge)for(Pe=be-ue.styles[ve].lvl,Be=ue.transformers.length-1;Pe>0;)Te=ue.transformers[Be].mProps.v.props,Se.transform(Te[0],Te[1],Te[2],Te[3],Te[4],Te[5],Te[6],Te[7],Te[8],Te[9],Te[10],Te[11],Te[12],Te[13],Te[14],Te[15]),Pe-=1,Be-=1}else Se=ie;if(we=ue.sh.paths,me=we._length,ge){for(xe="",pe=0;pe<me;pe+=1)_e=we.shapes[pe],_e&&_e._length&&(xe+=buildShapeString(_e,_e._length,_e.c,Se));ue.caches[ve]=xe}else xe=ue.caches[ve];ue.styles[ve].d+=de.hd===!0?"":xe,ue.styles[ve]._mdf=ge||ue.styles[ve]._mdf}}function oe(de,ue,fe){var pe=ue.style;(ue.c._mdf||fe)&&pe.pElem.setAttribute("fill","rgb("+bmFloor(ue.c.v[0])+","+bmFloor(ue.c.v[1])+","+bmFloor(ue.c.v[2])+")"),(ue.o._mdf||fe)&&pe.pElem.setAttribute("fill-opacity",ue.o.v)}function le(de,ue,fe){he(de,ue,fe),ce(de,ue,fe)}function he(de,ue,fe){var pe=ue.gf,me=ue.g._hasOpacity,xe=ue.s.v,ge=ue.e.v;if(ue.o._mdf||fe){var _e=de.ty==="gf"?"fill-opacity":"stroke-opacity";ue.style.pElem.setAttribute(_e,ue.o.v)}if(ue.s._mdf||fe){var ve=de.t===1?"x1":"cx",ye=ve==="x1"?"y1":"cy";pe.setAttribute(ve,xe[0]),pe.setAttribute(ye,xe[1]),me&&!ue.g._collapsable&&(ue.of.setAttribute(ve,xe[0]),ue.of.setAttribute(ye,xe[1]))}var be,we,Se,Te;if(ue.g._cmdf||fe){be=ue.cst;var Pe=ue.g.c;for(Se=be.length,we=0;we<Se;we+=1)Te=be[we],Te.setAttribute("offset",Pe[we*4]+"%"),Te.setAttribute("stop-color","rgb("+Pe[we*4+1]+","+Pe[we*4+2]+","+Pe[we*4+3]+")")}if(me&&(ue.g._omdf||fe)){var Be=ue.g.o;for(ue.g._collapsable?be=ue.cst:be=ue.ost,Se=be.length,we=0;we<Se;we+=1)Te=be[we],ue.g._collapsable||Te.setAttribute("offset",Be[we*2]+"%"),Te.setAttribute("stop-opacity",Be[we*2+1])}if(de.t===1)(ue.e._mdf||fe)&&(pe.setAttribute("x2",ge[0]),pe.setAttribute("y2",ge[1]),me&&!ue.g._collapsable&&(ue.of.setAttribute("x2",ge[0]),ue.of.setAttribute("y2",ge[1])));else{var Ce;if((ue.s._mdf||ue.e._mdf||fe)&&(Ce=Math.sqrt(Math.pow(xe[0]-ge[0],2)+Math.pow(xe[1]-ge[1],2)),pe.setAttribute("r",Ce),me&&!ue.g._collapsable&&ue.of.setAttribute("r",Ce)),ue.e._mdf||ue.h._mdf||ue.a._mdf||fe){Ce||(Ce=Math.sqrt(Math.pow(xe[0]-ge[0],2)+Math.pow(xe[1]-ge[1],2)));var De=Math.atan2(ge[1]-xe[1],ge[0]-xe[0]),Re=ue.h.v;Re>=1?Re=.99:Re<=-1&&(Re=-.99);var Le=Ce*Re,ke=Math.cos(De+ue.a.v)*Le+xe[0],Me=Math.sin(De+ue.a.v)*Le+xe[1];pe.setAttribute("fx",ke),pe.setAttribute("fy",Me),me&&!ue.g._collapsable&&(ue.of.setAttribute("fx",ke),ue.of.setAttribute("fy",Me))}}}function ce(de,ue,fe){var pe=ue.style,me=ue.d;me&&(me._mdf||fe)&&me.dashStr&&(pe.pElem.setAttribute("stroke-dasharray",me.dashStr),pe.pElem.setAttribute("stroke-dashoffset",me.dashoffset[0])),ue.c&&(ue.c._mdf||fe)&&pe.pElem.setAttribute("stroke","rgb("+bmFloor(ue.c.v[0])+","+bmFloor(ue.c.v[1])+","+bmFloor(ue.c.v[2])+")"),(ue.o._mdf||fe)&&pe.pElem.setAttribute("stroke-opacity",ue.o.v),(ue.w._mdf||fe)&&(pe.pElem.setAttribute("stroke-width",ue.w.v),pe.msElem&&pe.msElem.setAttribute("stroke-width",ue.w.v))}return te}();function SVGShapeElement(ie,ee,te){this.shapes=[],this.shapesData=ie.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(ie,ee,te),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var ie,ee=this.shapes.length,te,re,ne=this.stylesList.length,se,ae=[],oe=!1;for(re=0;re<ne;re+=1){for(se=this.stylesList[re],oe=!1,ae.length=0,ie=0;ie<ee;ie+=1)te=this.shapes[ie],te.styles.indexOf(se)!==-1&&(ae.push(te),oe=te._isAnimated||oe);ae.length>1&&oe&&this.setShapesAsAnimated(ae)}},SVGShapeElement.prototype.setShapesAsAnimated=function(ie){var ee,te=ie.length;for(ee=0;ee<te;ee+=1)ie[ee].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(ie,ee){var te,re=new SVGStyleData(ie,ee),ne=re.pElem;if(ie.ty==="st")te=new SVGStrokeStyleData(this,ie,re);else if(ie.ty==="fl")te=new SVGFillStyleData(this,ie,re);else if(ie.ty==="gf"||ie.ty==="gs"){var se=ie.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;te=new se(this,ie,re),this.globalData.defs.appendChild(te.gf),te.maskId&&(this.globalData.defs.appendChild(te.ms),this.globalData.defs.appendChild(te.of),ne.setAttribute("mask","url("+getLocationHref()+"#"+te.maskId+")"))}else ie.ty==="no"&&(te=new SVGNoStyleData(this,ie,re));return(ie.ty==="st"||ie.ty==="gs")&&(ne.setAttribute("stroke-linecap",lineCapEnum[ie.lc||2]),ne.setAttribute("stroke-linejoin",lineJoinEnum[ie.lj||2]),ne.setAttribute("fill-opacity","0"),ie.lj===1&&ne.setAttribute("stroke-miterlimit",ie.ml)),ie.r===2&&ne.setAttribute("fill-rule","evenodd"),ie.ln&&ne.setAttribute("id",ie.ln),ie.cl&&ne.setAttribute("class",ie.cl),ie.bm&&(ne.style["mix-blend-mode"]=getBlendMode(ie.bm)),this.stylesList.push(re),this.addToAnimatedContents(ie,te),te},SVGShapeElement.prototype.createGroupElement=function(ie){var ee=new ShapeGroupData;return ie.ln&&ee.gr.setAttribute("id",ie.ln),ie.cl&&ee.gr.setAttribute("class",ie.cl),ie.bm&&(ee.gr.style["mix-blend-mode"]=getBlendMode(ie.bm)),ee},SVGShapeElement.prototype.createTransformElement=function(ie,ee){var te=TransformPropertyFactory.getTransformProperty(this,ie,this),re=new SVGTransformData(te,te.o,ee);return this.addToAnimatedContents(ie,re),re},SVGShapeElement.prototype.createShapeElement=function(ie,ee,te){var re=4;ie.ty==="rc"?re=5:ie.ty==="el"?re=6:ie.ty==="sr"&&(re=7);var ne=ShapePropertyFactory.getShapeProp(this,ie,re,this),se=new SVGShapeData(ee,te,ne);return this.shapes.push(se),this.addShapeToModifiers(se),this.addToAnimatedContents(ie,se),se},SVGShapeElement.prototype.addToAnimatedContents=function(ie,ee){for(var te=0,re=this.animatedContents.length;te<re;){if(this.animatedContents[te].element===ee)return;te+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(ie),element:ee,data:ie})},SVGShapeElement.prototype.setElementStyles=function(ie){var ee=ie.styles,te,re=this.stylesList.length;for(te=0;te<re;te+=1)this.stylesList[te].closed||ee.push(this.stylesList[te])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var ie,ee=this.itemsData.length;for(ie=0;ie<ee;ie+=1)this.prevViewData[ie]=this.itemsData[ie];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),ee=this.dynamicProperties.length,ie=0;ie<ee;ie+=1)this.dynamicProperties[ie].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(ie,ee,te,re,ne,se,ae){var oe=[].concat(se),le,he=ie.length-1,ce,de,ue=[],fe=[],pe,me,xe;for(le=he;le>=0;le-=1){if(xe=this.searchProcessedElement(ie[le]),xe?ee[le]=te[xe-1]:ie[le]._render=ae,ie[le].ty==="fl"||ie[le].ty==="st"||ie[le].ty==="gf"||ie[le].ty==="gs"||ie[le].ty==="no")xe?ee[le].style.closed=!1:ee[le]=this.createStyleElement(ie[le],ne),ie[le]._render&&ee[le].style.pElem.parentNode!==re&&re.appendChild(ee[le].style.pElem),ue.push(ee[le].style);else if(ie[le].ty==="gr"){if(!xe)ee[le]=this.createGroupElement(ie[le]);else for(de=ee[le].it.length,ce=0;ce<de;ce+=1)ee[le].prevViewData[ce]=ee[le].it[ce];this.searchShapes(ie[le].it,ee[le].it,ee[le].prevViewData,ee[le].gr,ne+1,oe,ae),ie[le]._render&&ee[le].gr.parentNode!==re&&re.appendChild(ee[le].gr)}else ie[le].ty==="tr"?(xe||(ee[le]=this.createTransformElement(ie[le],re)),pe=ee[le].transform,oe.push(pe)):ie[le].ty==="sh"||ie[le].ty==="rc"||ie[le].ty==="el"||ie[le].ty==="sr"?(xe||(ee[le]=this.createShapeElement(ie[le],oe,ne)),this.setElementStyles(ee[le])):ie[le].ty==="tm"||ie[le].ty==="rd"||ie[le].ty==="ms"||ie[le].ty==="pb"||ie[le].ty==="zz"||ie[le].ty==="op"?(xe?(me=ee[le],me.closed=!1):(me=ShapeModifiers.getModifier(ie[le].ty),me.init(this,ie[le]),ee[le]=me,this.shapeModifiers.push(me)),fe.push(me)):ie[le].ty==="rp"&&(xe?(me=ee[le],me.closed=!0):(me=ShapeModifiers.getModifier(ie[le].ty),ee[le]=me,me.init(this,ie,le,ee),this.shapeModifiers.push(me),ae=!1),fe.push(me));this.addProcessedElement(ie[le],le+1)}for(he=ue.length,le=0;le<he;le+=1)ue[le].closed=!0;for(he=fe.length,le=0;le<he;le+=1)fe[le].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var ie,ee=this.stylesList.length;for(ie=0;ie<ee;ie+=1)this.stylesList[ie].reset();for(this.renderShape(),ie=0;ie<ee;ie+=1)(this.stylesList[ie]._mdf||this._isFirstFrame)&&(this.stylesList[ie].msElem&&(this.stylesList[ie].msElem.setAttribute("d",this.stylesList[ie].d),this.stylesList[ie].d="M0 0"+this.stylesList[ie].d),this.stylesList[ie].pElem.setAttribute("d",this.stylesList[ie].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var ie,ee=this.animatedContents.length,te;for(ie=0;ie<ee;ie+=1)te=this.animatedContents[ie],(this._isFirstFrame||te.element._isAnimated)&&te.data!==!0&&te.fn(te.data,te.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(ie,ee,te,re,ne,se){this.o=ie,this.sw=ee,this.sc=te,this.fc=re,this.m=ne,this.p=se,this._mdf={o:!0,sw:!!ee,sc:!!te,fc:!!re,m:!0,p:!0}}LetterProps.prototype.update=function(ie,ee,te,re,ne,se){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var ae=!1;return this.o!==ie&&(this.o=ie,this._mdf.o=!0,ae=!0),this.sw!==ee&&(this.sw=ee,this._mdf.sw=!0,ae=!0),this.sc!==te&&(this.sc=te,this._mdf.sc=!0,ae=!0),this.fc!==re&&(this.fc=re,this._mdf.fc=!0,ae=!0),this.m!==ne&&(this.m=ne,this._mdf.m=!0,ae=!0),se.length&&(this.p[0]!==se[0]||this.p[1]!==se[1]||this.p[4]!==se[4]||this.p[5]!==se[5]||this.p[12]!==se[12]||this.p[13]!==se[13])&&(this.p=se,this._mdf.p=!0,ae=!0),ae};function TextProperty(ie,ee){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,ee.d&&ee.d.sid&&(ee.d=ie.globalData.slotManager.getProp(ee.d)),this.data=ee,this.elem=ie,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(ie,ee){for(var te in ee)Object.prototype.hasOwnProperty.call(ee,te)&&(ie[te]=ee[te]);return ie},TextProperty.prototype.setCurrentData=function(ie){ie.__complete||this.completeTextData(ie),this.currentData=ie,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(ie){this.effectsSequence.push(ie),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(ie){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!ie)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var ee=this.currentData,te=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var re,ne=this.effectsSequence.length,se=ie||this.data.d.k[this.keysIndex].s;for(re=0;re<ne;re+=1)te!==this.keysIndex?se=this.effectsSequence[re](se,se.t):se=this.effectsSequence[re](this.currentData,se.t);ee!==se&&this.setCurrentData(se),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var ie=this.data.d.k,ee=this.elem.comp.renderedFrame,te=0,re=ie.length;te<=re-1&&!(te===re-1||ie[te+1].t>ee);)te+=1;return this.keysIndex!==te&&(this.keysIndex=te),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(ie){for(var ee=[],te=0,re=ie.length,ne,se,ae=!1;te<re;)ne=ie.charCodeAt(te),FontManager.isCombinedCharacter(ne)?ee[ee.length-1]+=ie.charAt(te):ne>=55296&&ne<=56319?(se=ie.charCodeAt(te+1),se>=56320&&se<=57343?(ae||FontManager.isModifier(ne,se)?(ee[ee.length-1]+=ie.substr(te,2),ae=!1):ee.push(ie.substr(te,2)),te+=1):ee.push(ie.charAt(te))):ne>56319?(se=ie.charCodeAt(te+1),FontManager.isZeroWidthJoiner(ne,se)?(ae=!0,ee[ee.length-1]+=ie.substr(te,2),te+=1):ee.push(ie.charAt(te))):FontManager.isZeroWidthJoiner(ne)?(ee[ee.length-1]+=ie.charAt(te),ae=!0):ee.push(ie.charAt(te)),te+=1;return ee},TextProperty.prototype.completeTextData=function(ie){ie.__complete=!0;var ee=this.elem.globalData.fontManager,te=this.data,re=[],ne,se,ae,oe=0,le,he=te.m.g,ce=0,de=0,ue=0,fe=[],pe=0,me=0,xe,ge,_e=ee.getFontByName(ie.f),ve,ye=0,be=getFontProperties(_e);ie.fWeight=be.weight,ie.fStyle=be.style,ie.finalSize=ie.s,ie.finalText=this.buildFinalText(ie.t),se=ie.finalText.length,ie.finalLineHeight=ie.lh;var we=ie.tr/1e3*ie.finalSize,Se;if(ie.sz)for(var Te=!0,Pe=ie.sz[0],Be=ie.sz[1],Ce,De;Te;){De=this.buildFinalText(ie.t),Ce=0,pe=0,se=De.length,we=ie.tr/1e3*ie.finalSize;var Re=-1;for(ne=0;ne<se;ne+=1)Se=De[ne].charCodeAt(0),ae=!1,De[ne]===" "?Re=ne:(Se===13||Se===3)&&(pe=0,ae=!0,Ce+=ie.finalLineHeight||ie.finalSize*1.2),ee.chars?(ve=ee.getCharData(De[ne],_e.fStyle,_e.fFamily),ye=ae?0:ve.w*ie.finalSize/100):ye=ee.measureText(De[ne],ie.f,ie.finalSize),pe+ye>Pe&&De[ne]!==" "?(Re===-1?se+=1:ne=Re,Ce+=ie.finalLineHeight||ie.finalSize*1.2,De.splice(ne,Re===ne?1:0,"\r"),Re=-1,pe=0):(pe+=ye,pe+=we);Ce+=_e.ascent*ie.finalSize/100,this.canResize&&ie.finalSize>this.minimumFontSize&&Be<Ce?(ie.finalSize-=1,ie.finalLineHeight=ie.finalSize*ie.lh/ie.s):(ie.finalText=De,se=ie.finalText.length,Te=!1)}pe=-we,ye=0;var Le=0,ke;for(ne=0;ne<se;ne+=1)if(ae=!1,ke=ie.finalText[ne],Se=ke.charCodeAt(0),Se===13||Se===3?(Le=0,fe.push(pe),me=pe>me?pe:me,pe=-2*we,le="",ae=!0,ue+=1):le=ke,ee.chars?(ve=ee.getCharData(ke,_e.fStyle,ee.getFontByName(ie.f).fFamily),ye=ae?0:ve.w*ie.finalSize/100):ye=ee.measureText(le,ie.f,ie.finalSize),ke===" "?Le+=ye+we:(pe+=ye+we+Le,Le=0),re.push({l:ye,an:ye,add:ce,n:ae,anIndexes:[],val:le,line:ue,animatorJustifyOffset:0}),he==2){if(ce+=ye,le===""||le===" "||ne===se-1){for((le===""||le===" ")&&(ce-=ye);de<=ne;)re[de].an=ce,re[de].ind=oe,re[de].extra=ye,de+=1;oe+=1,ce=0}}else if(he==3){if(ce+=ye,le===""||ne===se-1){for(le===""&&(ce-=ye);de<=ne;)re[de].an=ce,re[de].ind=oe,re[de].extra=ye,de+=1;ce=0,oe+=1}}else re[oe].ind=oe,re[oe].extra=0,oe+=1;if(ie.l=re,me=pe>me?pe:me,fe.push(pe),ie.sz)ie.boxWidth=ie.sz[0],ie.justifyOffset=0;else switch(ie.boxWidth=me,ie.j){case 1:ie.justifyOffset=-ie.boxWidth;break;case 2:ie.justifyOffset=-ie.boxWidth/2;break;default:ie.justifyOffset=0}ie.lineWidths=fe;var Me=te.a,Ee,Ae;ge=Me.length;var Ie,Fe,Ne=[];for(xe=0;xe<ge;xe+=1){for(Ee=Me[xe],Ee.a.sc&&(ie.strokeColorAnim=!0),Ee.a.sw&&(ie.strokeWidthAnim=!0),(Ee.a.fc||Ee.a.fh||Ee.a.fs||Ee.a.fb)&&(ie.fillColorAnim=!0),Fe=0,Ie=Ee.s.b,ne=0;ne<se;ne+=1)Ae=re[ne],Ae.anIndexes[xe]=Fe,(Ie==1&&Ae.val!==""||Ie==2&&Ae.val!==""&&Ae.val!==" "||Ie==3&&(Ae.n||Ae.val==" "||ne==se-1)||Ie==4&&(Ae.n||ne==se-1))&&(Ee.s.rn===1&&Ne.push(Fe),Fe+=1);te.a[xe].s.totalChars=Fe;var $e=-1,ze;if(Ee.s.rn===1)for(ne=0;ne<se;ne+=1)Ae=re[ne],$e!=Ae.anIndexes[xe]&&($e=Ae.anIndexes[xe],ze=Ne.splice(Math.floor(Math.random()*Ne.length),1)[0]),Ae.anIndexes[xe]=ze}ie.yOffset=ie.finalLineHeight||ie.finalSize*1.2,ie.ls=ie.ls||0,ie.ascent=_e.ascent*ie.finalSize/100},TextProperty.prototype.updateDocumentData=function(ie,ee){ee=ee===void 0?this.keysIndex:ee;var te=this.copyData({},this.data.d.k[ee].s);te=this.copyData(te,ie),this.data.d.k[ee].s=te,this.recalculate(ee),this.setCurrentData(te),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(ie){var ee=this.data.d.k[ie].s;ee.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(ee)},TextProperty.prototype.canResizeFont=function(ie){this.canResize=ie,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(ie){this.minimumFontSize=Math.floor(ie)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var ie=Math.max,ee=Math.min,te=Math.floor;function re(se,ae){this._currentTextLength=-1,this.k=!1,this.data=ae,this.elem=se,this.comp=se.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(se),this.s=PropertyFactory.getProp(se,ae.s||{k:0},0,0,this),"e"in ae?this.e=PropertyFactory.getProp(se,ae.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(se,ae.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(se,ae.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(se,ae.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(se,ae.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(se,ae.a,0,.01,this),this.dynamicProperties.length||this.getValue()}re.prototype={getMult:function(ae){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var oe=0,le=0,he=1,ce=1;this.ne.v>0?oe=this.ne.v/100:le=-this.ne.v/100,this.xe.v>0?he=1-this.xe.v/100:ce=1+this.xe.v/100;var de=BezierFactory.getBezierEasing(oe,le,he,ce).get,ue=0,fe=this.finalS,pe=this.finalE,me=this.data.sh;if(me===2)pe===fe?ue=ae>=pe?1:0:ue=ie(0,ee(.5/(pe-fe)+(ae-fe)/(pe-fe),1)),ue=de(ue);else if(me===3)pe===fe?ue=ae>=pe?0:1:ue=1-ie(0,ee(.5/(pe-fe)+(ae-fe)/(pe-fe),1)),ue=de(ue);else if(me===4)pe===fe?ue=0:(ue=ie(0,ee(.5/(pe-fe)+(ae-fe)/(pe-fe),1)),ue<.5?ue*=2:ue=1-2*(ue-.5)),ue=de(ue);else if(me===5){if(pe===fe)ue=0;else{var xe=pe-fe;ae=ee(ie(0,ae+.5-fe),pe-fe);var ge=-xe/2+ae,_e=xe/2;ue=Math.sqrt(1-ge*ge/(_e*_e))}ue=de(ue)}else me===6?(pe===fe?ue=0:(ae=ee(ie(0,ae+.5-fe),pe-fe),ue=(1+Math.cos(Math.PI+Math.PI*2*ae/(pe-fe)))/2),ue=de(ue)):(ae>=te(fe)&&(ae-fe<0?ue=ie(0,ee(ee(pe,1)-(fe-ae),1)):ue=ie(0,ee(pe-ae,1))),ue=de(ue));if(this.sm.v!==100){var ve=this.sm.v*.01;ve===0&&(ve=1e-8);var ye=.5-ve*.5;ue<ye?ue=0:(ue=(ue-ye)/ve,ue>1&&(ue=1))}return ue*this.a.v},getValue:function(ae){this.iterateDynamicProperties(),this._mdf=ae||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,ae&&this.data.r===2&&(this.e.v=this._currentTextLength);var oe=this.data.r===2?1:100/this.data.totalChars,le=this.o.v/oe,he=this.s.v/oe+le,ce=this.e.v/oe+le;if(he>ce){var de=he;he=ce,ce=de}this.finalS=he,this.finalE=ce}},extendPrototype([DynamicPropertyContainer],re);function ne(se,ae,oe){return new re(se,ae)}return{getTextSelectorProp:ne}}();function TextAnimatorDataProperty(ie,ee,te){var re={propType:!1},ne=PropertyFactory.getProp,se=ee.a;this.a={r:se.r?ne(ie,se.r,0,degToRads,te):re,rx:se.rx?ne(ie,se.rx,0,degToRads,te):re,ry:se.ry?ne(ie,se.ry,0,degToRads,te):re,sk:se.sk?ne(ie,se.sk,0,degToRads,te):re,sa:se.sa?ne(ie,se.sa,0,degToRads,te):re,s:se.s?ne(ie,se.s,1,.01,te):re,a:se.a?ne(ie,se.a,1,0,te):re,o:se.o?ne(ie,se.o,0,.01,te):re,p:se.p?ne(ie,se.p,1,0,te):re,sw:se.sw?ne(ie,se.sw,0,0,te):re,sc:se.sc?ne(ie,se.sc,1,0,te):re,fc:se.fc?ne(ie,se.fc,1,0,te):re,fh:se.fh?ne(ie,se.fh,0,0,te):re,fs:se.fs?ne(ie,se.fs,0,.01,te):re,fb:se.fb?ne(ie,se.fb,0,.01,te):re,t:se.t?ne(ie,se.t,0,0,te):re},this.s=TextSelectorProp.getTextSelectorProp(ie,ee.s,te),this.s.t=ee.s.t}function TextAnimatorProperty(ie,ee,te){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=ie,this._renderType=ee,this._elem=te,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(te)}TextAnimatorProperty.prototype.searchProperties=function(){var ie,ee=this._textData.a.length,te,re=PropertyFactory.getProp;for(ie=0;ie<ee;ie+=1)te=this._textData.a[ie],this._animatorsData[ie]=new TextAnimatorDataProperty(this._elem,te,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:re(this._elem,this._textData.p.a,0,0,this),f:re(this._elem,this._textData.p.f,0,0,this),l:re(this._elem,this._textData.p.l,0,0,this),r:re(this._elem,this._textData.p.r,0,0,this),p:re(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=re(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(ie,ee){if(this.lettersChangedFlag=ee,!(!this._mdf&&!this._isFirstFrame&&!ee&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var te=this._moreOptions.alignment.v,re=this._animatorsData,ne=this._textData,se=this.mHelper,ae=this._renderType,oe=this.renderedLetters.length,le,he,ce,de,ue=ie.l,fe,pe,me,xe,ge,_e,ve,ye,be,we,Se,Te,Pe,Be,Ce;if(this._hasMaskedPath){if(Ce=this._pathData.m,!this._pathData.n||this._pathData._mdf){var De=Ce.v;this._pathData.r.v&&(De=De.reverse()),fe={tLength:0,segments:[]},de=De._length-1;var Re;for(Te=0,ce=0;ce<de;ce+=1)Re=bez.buildBezierData(De.v[ce],De.v[ce+1],[De.o[ce][0]-De.v[ce][0],De.o[ce][1]-De.v[ce][1]],[De.i[ce+1][0]-De.v[ce+1][0],De.i[ce+1][1]-De.v[ce+1][1]]),fe.tLength+=Re.segmentLength,fe.segments.push(Re),Te+=Re.segmentLength;ce=de,Ce.v.c&&(Re=bez.buildBezierData(De.v[ce],De.v[0],[De.o[ce][0]-De.v[ce][0],De.o[ce][1]-De.v[ce][1]],[De.i[0][0]-De.v[0][0],De.i[0][1]-De.v[0][1]]),fe.tLength+=Re.segmentLength,fe.segments.push(Re),Te+=Re.segmentLength),this._pathData.pi=fe}if(fe=this._pathData.pi,pe=this._pathData.f.v,ve=0,_e=1,xe=0,ge=!0,we=fe.segments,pe<0&&Ce.v.c)for(fe.tLength<Math.abs(pe)&&(pe=-Math.abs(pe)%fe.tLength),ve=we.length-1,be=we[ve].points,_e=be.length-1;pe<0;)pe+=be[_e].partialLength,_e-=1,_e<0&&(ve-=1,be=we[ve].points,_e=be.length-1);be=we[ve].points,ye=be[_e-1],me=be[_e],Se=me.partialLength}de=ue.length,le=0,he=0;var Le=ie.finalSize*1.2*.714,ke=!0,Me,Ee,Ae,Ie,Fe;Ie=re.length;var Ne,$e=-1,ze,Xe,Je,We=pe,dt=ve,yt=_e,vt=-1,at,_t,je,He,Qe,St,gt,Oe,Ve="",Ze=this.defaultPropsArray,mt;if(ie.j===2||ie.j===1){var pt=0,Tt=0,Et=ie.j===2?-.5:-1,Mt=0,Rt=!0;for(ce=0;ce<de;ce+=1)if(ue[ce].n){for(pt&&(pt+=Tt);Mt<ce;)ue[Mt].animatorJustifyOffset=pt,Mt+=1;pt=0,Rt=!0}else{for(Ae=0;Ae<Ie;Ae+=1)Me=re[Ae].a,Me.t.propType&&(Rt&&ie.j===2&&(Tt+=Me.t.v*Et),Ee=re[Ae].s,Ne=Ee.getMult(ue[ce].anIndexes[Ae],ne.a[Ae].s.totalChars),Ne.length?pt+=Me.t.v*Ne[0]*Et:pt+=Me.t.v*Ne*Et);Rt=!1}for(pt&&(pt+=Tt);Mt<ce;)ue[Mt].animatorJustifyOffset=pt,Mt+=1}for(ce=0;ce<de;ce+=1){if(se.reset(),at=1,ue[ce].n)le=0,he+=ie.yOffset,he+=ke?1:0,pe=We,ke=!1,this._hasMaskedPath&&(ve=dt,_e=yt,be=we[ve].points,ye=be[_e-1],me=be[_e],Se=me.partialLength,xe=0),Ve="",Oe="",St="",mt="",Ze=this.defaultPropsArray;else{if(this._hasMaskedPath){if(vt!==ue[ce].line){switch(ie.j){case 1:pe+=Te-ie.lineWidths[ue[ce].line];break;case 2:pe+=(Te-ie.lineWidths[ue[ce].line])/2;break}vt=ue[ce].line}$e!==ue[ce].ind&&(ue[$e]&&(pe+=ue[$e].extra),pe+=ue[ce].an/2,$e=ue[ce].ind),pe+=te[0]*ue[ce].an*.005;var bt=0;for(Ae=0;Ae<Ie;Ae+=1)Me=re[Ae].a,Me.p.propType&&(Ee=re[Ae].s,Ne=Ee.getMult(ue[ce].anIndexes[Ae],ne.a[Ae].s.totalChars),Ne.length?bt+=Me.p.v[0]*Ne[0]:bt+=Me.p.v[0]*Ne),Me.a.propType&&(Ee=re[Ae].s,Ne=Ee.getMult(ue[ce].anIndexes[Ae],ne.a[Ae].s.totalChars),Ne.length?bt+=Me.a.v[0]*Ne[0]:bt+=Me.a.v[0]*Ne);for(ge=!0,this._pathData.a.v&&(pe=ue[0].an*.5+(Te-this._pathData.f.v-ue[0].an*.5-ue[ue.length-1].an*.5)*$e/(de-1),pe+=this._pathData.f.v);ge;)xe+Se>=pe+bt||!be?(Pe=(pe+bt-xe)/me.partialLength,Xe=ye.point[0]+(me.point[0]-ye.point[0])*Pe,Je=ye.point[1]+(me.point[1]-ye.point[1])*Pe,se.translate(-te[0]*ue[ce].an*.005,-(te[1]*Le)*.01),ge=!1):be&&(xe+=me.partialLength,_e+=1,_e>=be.length&&(_e=0,ve+=1,we[ve]?be=we[ve].points:Ce.v.c?(_e=0,ve=0,be=we[ve].points):(xe-=me.partialLength,be=null)),be&&(ye=me,me=be[_e],Se=me.partialLength));ze=ue[ce].an/2-ue[ce].add,se.translate(-ze,0,0)}else ze=ue[ce].an/2-ue[ce].add,se.translate(-ze,0,0),se.translate(-te[0]*ue[ce].an*.005,-te[1]*Le*.01,0);for(Ae=0;Ae<Ie;Ae+=1)Me=re[Ae].a,Me.t.propType&&(Ee=re[Ae].s,Ne=Ee.getMult(ue[ce].anIndexes[Ae],ne.a[Ae].s.totalChars),(le!==0||ie.j!==0)&&(this._hasMaskedPath?Ne.length?pe+=Me.t.v*Ne[0]:pe+=Me.t.v*Ne:Ne.length?le+=Me.t.v*Ne[0]:le+=Me.t.v*Ne));for(ie.strokeWidthAnim&&(je=ie.sw||0),ie.strokeColorAnim&&(ie.sc?_t=[ie.sc[0],ie.sc[1],ie.sc[2]]:_t=[0,0,0]),ie.fillColorAnim&&ie.fc&&(He=[ie.fc[0],ie.fc[1],ie.fc[2]]),Ae=0;Ae<Ie;Ae+=1)Me=re[Ae].a,Me.a.propType&&(Ee=re[Ae].s,Ne=Ee.getMult(ue[ce].anIndexes[Ae],ne.a[Ae].s.totalChars),Ne.length?se.translate(-Me.a.v[0]*Ne[0],-Me.a.v[1]*Ne[1],Me.a.v[2]*Ne[2]):se.translate(-Me.a.v[0]*Ne,-Me.a.v[1]*Ne,Me.a.v[2]*Ne));for(Ae=0;Ae<Ie;Ae+=1)Me=re[Ae].a,Me.s.propType&&(Ee=re[Ae].s,Ne=Ee.getMult(ue[ce].anIndexes[Ae],ne.a[Ae].s.totalChars),Ne.length?se.scale(1+(Me.s.v[0]-1)*Ne[0],1+(Me.s.v[1]-1)*Ne[1],1):se.scale(1+(Me.s.v[0]-1)*Ne,1+(Me.s.v[1]-1)*Ne,1));for(Ae=0;Ae<Ie;Ae+=1){if(Me=re[Ae].a,Ee=re[Ae].s,Ne=Ee.getMult(ue[ce].anIndexes[Ae],ne.a[Ae].s.totalChars),Me.sk.propType&&(Ne.length?se.skewFromAxis(-Me.sk.v*Ne[0],Me.sa.v*Ne[1]):se.skewFromAxis(-Me.sk.v*Ne,Me.sa.v*Ne)),Me.r.propType&&(Ne.length?se.rotateZ(-Me.r.v*Ne[2]):se.rotateZ(-Me.r.v*Ne)),Me.ry.propType&&(Ne.length?se.rotateY(Me.ry.v*Ne[1]):se.rotateY(Me.ry.v*Ne)),Me.rx.propType&&(Ne.length?se.rotateX(Me.rx.v*Ne[0]):se.rotateX(Me.rx.v*Ne)),Me.o.propType&&(Ne.length?at+=(Me.o.v*Ne[0]-at)*Ne[0]:at+=(Me.o.v*Ne-at)*Ne),ie.strokeWidthAnim&&Me.sw.propType&&(Ne.length?je+=Me.sw.v*Ne[0]:je+=Me.sw.v*Ne),ie.strokeColorAnim&&Me.sc.propType)for(Qe=0;Qe<3;Qe+=1)Ne.length?_t[Qe]+=(Me.sc.v[Qe]-_t[Qe])*Ne[0]:_t[Qe]+=(Me.sc.v[Qe]-_t[Qe])*Ne;if(ie.fillColorAnim&&ie.fc){if(Me.fc.propType)for(Qe=0;Qe<3;Qe+=1)Ne.length?He[Qe]+=(Me.fc.v[Qe]-He[Qe])*Ne[0]:He[Qe]+=(Me.fc.v[Qe]-He[Qe])*Ne;Me.fh.propType&&(Ne.length?He=addHueToRGB(He,Me.fh.v*Ne[0]):He=addHueToRGB(He,Me.fh.v*Ne)),Me.fs.propType&&(Ne.length?He=addSaturationToRGB(He,Me.fs.v*Ne[0]):He=addSaturationToRGB(He,Me.fs.v*Ne)),Me.fb.propType&&(Ne.length?He=addBrightnessToRGB(He,Me.fb.v*Ne[0]):He=addBrightnessToRGB(He,Me.fb.v*Ne))}}for(Ae=0;Ae<Ie;Ae+=1)Me=re[Ae].a,Me.p.propType&&(Ee=re[Ae].s,Ne=Ee.getMult(ue[ce].anIndexes[Ae],ne.a[Ae].s.totalChars),this._hasMaskedPath?Ne.length?se.translate(0,Me.p.v[1]*Ne[0],-Me.p.v[2]*Ne[1]):se.translate(0,Me.p.v[1]*Ne,-Me.p.v[2]*Ne):Ne.length?se.translate(Me.p.v[0]*Ne[0],Me.p.v[1]*Ne[1],-Me.p.v[2]*Ne[2]):se.translate(Me.p.v[0]*Ne,Me.p.v[1]*Ne,-Me.p.v[2]*Ne));if(ie.strokeWidthAnim&&(St=je<0?0:je),ie.strokeColorAnim&&(gt="rgb("+Math.round(_t[0]*255)+","+Math.round(_t[1]*255)+","+Math.round(_t[2]*255)+")"),ie.fillColorAnim&&ie.fc&&(Oe="rgb("+Math.round(He[0]*255)+","+Math.round(He[1]*255)+","+Math.round(He[2]*255)+")"),this._hasMaskedPath){if(se.translate(0,-ie.ls),se.translate(0,te[1]*Le*.01+he,0),this._pathData.p.v){Be=(me.point[1]-ye.point[1])/(me.point[0]-ye.point[0]);var Ue=Math.atan(Be)*180/Math.PI;me.point[0]<ye.point[0]&&(Ue+=180),se.rotate(-Ue*Math.PI/180)}se.translate(Xe,Je,0),pe-=te[0]*ue[ce].an*.005,ue[ce+1]&&$e!==ue[ce+1].ind&&(pe+=ue[ce].an/2,pe+=ie.tr*.001*ie.finalSize)}else{switch(se.translate(le,he,0),ie.ps&&se.translate(ie.ps[0],ie.ps[1]+ie.ascent,0),ie.j){case 1:se.translate(ue[ce].animatorJustifyOffset+ie.justifyOffset+(ie.boxWidth-ie.lineWidths[ue[ce].line]),0,0);break;case 2:se.translate(ue[ce].animatorJustifyOffset+ie.justifyOffset+(ie.boxWidth-ie.lineWidths[ue[ce].line])/2,0,0);break}se.translate(0,-ie.ls),se.translate(ze,0,0),se.translate(te[0]*ue[ce].an*.005,te[1]*Le*.01,0),le+=ue[ce].l+ie.tr*.001*ie.finalSize}ae==="html"?Ve=se.toCSS():ae==="svg"?Ve=se.to2dCSS():Ze=[se.props[0],se.props[1],se.props[2],se.props[3],se.props[4],se.props[5],se.props[6],se.props[7],se.props[8],se.props[9],se.props[10],se.props[11],se.props[12],se.props[13],se.props[14],se.props[15]],mt=at}oe<=ce?(Fe=new LetterProps(mt,St,gt,Oe,Ve,Ze),this.renderedLetters.push(Fe),oe+=1,this.lettersChangedFlag=!0):(Fe=this.renderedLetters[ce],this.lettersChangedFlag=Fe.update(mt,St,gt,Oe,Ve,Ze)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(ie,ee,te){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(ie,ee,te),this.textProperty=new TextProperty(this,ie.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(ie.t,this.renderType,this),this.initTransform(ie,ee,te),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(ie){this._mdf=!1,this.prepareRenderableFrame(ie),this.prepareProperties(ie,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(ie,ee){var te,re=ee.length,ne,se="";for(te=0;te<re;te+=1)ee[te].ty==="sh"&&(ne=ee[te].ks.k,se+=buildShapeString(ne,ne.i.length,!0,ie));return se},ITextElement.prototype.updateDocumentData=function(ie,ee){this.textProperty.updateDocumentData(ie,ee)},ITextElement.prototype.canResizeFont=function(ie){this.textProperty.canResizeFont(ie)},ITextElement.prototype.setMinimumFontSize=function(ie){this.textProperty.setMinimumFontSize(ie)},ITextElement.prototype.applyTextPropertiesToMatrix=function(ie,ee,te,re,ne){switch(ie.ps&&ee.translate(ie.ps[0],ie.ps[1]+ie.ascent,0),ee.translate(0,-ie.ls,0),ie.j){case 1:ee.translate(ie.justifyOffset+(ie.boxWidth-ie.lineWidths[te]),0,0);break;case 2:ee.translate(ie.justifyOffset+(ie.boxWidth-ie.lineWidths[te])/2,0,0);break}ee.translate(re,ne,0)},ITextElement.prototype.buildColor=function(ie){return"rgb("+Math.round(ie[0]*255)+","+Math.round(ie[1]*255)+","+Math.round(ie[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(ie,ee,te){this.textSpans=[],this.renderType="svg",this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(ie){for(var ee=0,te=ie.length,re=[],ne="";ee<te;)ie[ee]===String.fromCharCode(13)||ie[ee]===String.fromCharCode(3)?(re.push(ne),ne=""):ne+=ie[ee],ee+=1;return re.push(ne),re},SVGTextLottieElement.prototype.buildShapeData=function(ie,ee){if(ie.shapes&&ie.shapes.length){var te=ie.shapes[0];if(te.it){var re=te.it[te.it.length-1];re.s&&(re.s.k[0]=ee,re.s.k[1]=ee)}}return ie},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var ie,ee,te=this.textProperty.currentData;this.renderedLetters=createSizedArray(te?te.l.length:0),te.fc?this.layerElement.setAttribute("fill",this.buildColor(te.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),te.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(te.sc)),this.layerElement.setAttribute("stroke-width",te.sw)),this.layerElement.setAttribute("font-size",te.finalSize);var re=this.globalData.fontManager.getFontByName(te.f);if(re.fClass)this.layerElement.setAttribute("class",re.fClass);else{this.layerElement.setAttribute("font-family",re.fFamily);var ne=te.fWeight,se=te.fStyle;this.layerElement.setAttribute("font-style",se),this.layerElement.setAttribute("font-weight",ne)}this.layerElement.setAttribute("aria-label",te.t);var ae=te.l||[],oe=!!this.globalData.fontManager.chars;ee=ae.length;var le,he=this.mHelper,ce="",de=this.data.singleShape,ue=0,fe=0,pe=!0,me=te.tr*.001*te.finalSize;if(de&&!oe&&!te.sz){var xe=this.textContainer,ge="start";switch(te.j){case 1:ge="end";break;case 2:ge="middle";break;default:ge="start";break}xe.setAttribute("text-anchor",ge),xe.setAttribute("letter-spacing",me);var _e=this.buildTextContents(te.finalText);for(ee=_e.length,fe=te.ps?te.ps[1]+te.ascent:0,ie=0;ie<ee;ie+=1)le=this.textSpans[ie].span||createNS("tspan"),le.textContent=_e[ie],le.setAttribute("x",0),le.setAttribute("y",fe),le.style.display="inherit",xe.appendChild(le),this.textSpans[ie]||(this.textSpans[ie]={span:null,glyph:null}),this.textSpans[ie].span=le,fe+=te.finalLineHeight;this.layerElement.appendChild(xe)}else{var ve=this.textSpans.length,ye;for(ie=0;ie<ee;ie+=1){if(this.textSpans[ie]||(this.textSpans[ie]={span:null,childSpan:null,glyph:null}),!oe||!de||ie===0){if(le=ve>ie?this.textSpans[ie].span:createNS(oe?"g":"text"),ve<=ie){if(le.setAttribute("stroke-linecap","butt"),le.setAttribute("stroke-linejoin","round"),le.setAttribute("stroke-miterlimit","4"),this.textSpans[ie].span=le,oe){var be=createNS("g");le.appendChild(be),this.textSpans[ie].childSpan=be}this.textSpans[ie].span=le,this.layerElement.appendChild(le)}le.style.display="inherit"}if(he.reset(),de&&(ae[ie].n&&(ue=-me,fe+=te.yOffset,fe+=pe?1:0,pe=!1),this.applyTextPropertiesToMatrix(te,he,ae[ie].line,ue,fe),ue+=ae[ie].l||0,ue+=me),oe){ye=this.globalData.fontManager.getCharData(te.finalText[ie],re.fStyle,this.globalData.fontManager.getFontByName(te.f).fFamily);var we;if(ye.t===1)we=new SVGCompElement(ye.data,this.globalData,this);else{var Se=emptyShapeData;ye.data&&ye.data.shapes&&(Se=this.buildShapeData(ye.data,te.finalSize)),we=new SVGShapeElement(Se,this.globalData,this)}if(this.textSpans[ie].glyph){var Te=this.textSpans[ie].glyph;this.textSpans[ie].childSpan.removeChild(Te.layerElement),Te.destroy()}this.textSpans[ie].glyph=we,we._debug=!0,we.prepareFrame(0),we.renderFrame(),this.textSpans[ie].childSpan.appendChild(we.layerElement),ye.t===1&&this.textSpans[ie].childSpan.setAttribute("transform","scale("+te.finalSize/100+","+te.finalSize/100+")")}else de&&le.setAttribute("transform","translate("+he.props[12]+","+he.props[13]+")"),le.textContent=ae[ie].val,le.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}de&&le&&le.setAttribute("d",ce)}for(;ie<this.textSpans.length;)this.textSpans[ie].span.style.display="none",ie+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var ie=this.layerElement.getBBox();this.bbox={top:ie.y,left:ie.x,width:ie.width,height:ie.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var ie,ee=this.textSpans.length,te;for(this.renderedFrame=this.comp.renderedFrame,ie=0;ie<ee;ie+=1)te=this.textSpans[ie].glyph,te&&(te.prepareFrame(this.comp.renderedFrame-this.data.st),te._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var ie,ee,te=this.textAnimator.renderedLetters,re=this.textProperty.currentData.l;ee=re.length;var ne,se,ae;for(ie=0;ie<ee;ie+=1)re[ie].n||(ne=te[ie],se=this.textSpans[ie].span,ae=this.textSpans[ie].glyph,ae&&ae.renderFrame(),ne._mdf.m&&se.setAttribute("transform",ne.m),ne._mdf.o&&se.setAttribute("opacity",ne.o),ne._mdf.sw&&se.setAttribute("stroke-width",ne.sw),ne._mdf.sc&&se.setAttribute("stroke",ne.sc),ne._mdf.fc&&se.setAttribute("fill",ne.fc))}};function ISolidElement(ie,ee,te){this.initElement(ie,ee,te)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var ie=createNS("rect");ie.setAttribute("width",this.data.sw),ie.setAttribute("height",this.data.sh),ie.setAttribute("fill",this.data.sc),this.layerElement.appendChild(ie)};function NullElement(ie,ee,te){this.initFrame(),this.initBaseData(ie,ee,te),this.initFrame(),this.initTransform(ie,ee,te),this.initHierarchy()}NullElement.prototype.prepareFrame=function(ie){this.prepareProperties(ie,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(ie){return new NullElement(ie,this.globalData,this)},SVGRendererBase.prototype.createShape=function(ie){return new SVGShapeElement(ie,this.globalData,this)},SVGRendererBase.prototype.createText=function(ie){return new SVGTextLottieElement(ie,this.globalData,this)},SVGRendererBase.prototype.createImage=function(ie){return new IImageElement(ie,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(ie){return new ISolidElement(ie,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(ie){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+ie.w+" "+ie.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",ie.w),this.svgElement.setAttribute("height",ie.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var ee=this.globalData.defs;this.setupGlobalData(ie,ee),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=ie;var te=createNS("clipPath"),re=createNS("rect");re.setAttribute("width",ie.w),re.setAttribute("height",ie.h),re.setAttribute("x",0),re.setAttribute("y",0);var ne=createElementID();te.setAttribute("id",ne),te.appendChild(re),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ne+")"),ee.appendChild(te),this.layers=ie.layers,this.elements=createSizedArray(ie.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var ie,ee=this.layers?this.layers.length:0;for(ie=0;ie<ee;ie+=1)this.elements[ie]&&this.elements[ie].destroy&&this.elements[ie].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(ie){var ee=0,te=this.layers.length;for(ee=0;ee<te;ee+=1)if(this.layers[ee].ind===ie)return ee;return-1},SVGRendererBase.prototype.buildItem=function(ie){var ee=this.elements;if(!(ee[ie]||this.layers[ie].ty===99)){ee[ie]=!0;var te=this.createItem(this.layers[ie]);if(ee[ie]=te,getExpressionsPlugin()&&(this.layers[ie].ty===0&&this.globalData.projectInterface.registerComposition(te),te.initExpressions()),this.appendElementInPos(te,ie),this.layers[ie].tt){var re="tp"in this.layers[ie]?this.findIndexByInd(this.layers[ie].tp):ie-1;if(re===-1)return;if(!this.elements[re]||this.elements[re]===!0)this.buildItem(re),this.addPendingElement(te);else{var ne=ee[re],se=ne.getMatte(this.layers[ie].tt);te.setMatte(se)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var ie=this.pendingElements.pop();if(ie.checkParenting(),ie.data.tt)for(var ee=0,te=this.elements.length;ee<te;){if(this.elements[ee]===ie){var re="tp"in ie.data?this.findIndexByInd(ie.data.tp):ee-1,ne=this.elements[re],se=ne.getMatte(this.layers[ee].tt);ie.setMatte(se);break}ee+=1}}},SVGRendererBase.prototype.renderFrame=function(ie){if(!(this.renderedFrame===ie||this.destroyed)){ie===null?ie=this.renderedFrame:this.renderedFrame=ie,this.globalData.frameNum=ie,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=ie,this.globalData._mdf=!1;var ee,te=this.layers.length;for(this.completeLayers||this.checkLayers(ie),ee=te-1;ee>=0;ee-=1)(this.completeLayers||this.elements[ee])&&this.elements[ee].prepareFrame(ie-this.layers[ee].st);if(this.globalData._mdf)for(ee=0;ee<te;ee+=1)(this.completeLayers||this.elements[ee])&&this.elements[ee].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(ie,ee){var te=ie.getBaseElement();if(!!te){for(var re=0,ne;re<ee;)this.elements[re]&&this.elements[re]!==!0&&this.elements[re].getBaseElement()&&(ne=this.elements[re].getBaseElement()),re+=1;ne?this.layerElement.insertBefore(te,ne):this.layerElement.appendChild(te)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(ie,ee,te){this.initFrame(),this.initBaseData(ie,ee,te),this.initTransform(ie,ee,te),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!ee.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(ie){if(this._mdf=!1,this.prepareRenderableFrame(ie),this.prepareProperties(ie,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=ie/this.data.sr;else{var ee=this.tm.v;ee===this.data.op&&(ee=this.data.op-1),this.renderedFrame=ee}var te,re=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),te=re-1;te>=0;te-=1)(this.completeLayers||this.elements[te])&&(this.elements[te].prepareFrame(this.renderedFrame-this.layers[te].st),this.elements[te]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var ie,ee=this.layers.length;for(ie=0;ie<ee;ie+=1)(this.completeLayers||this.elements[ie])&&this.elements[ie].renderFrame()},ICompElement.prototype.setElements=function(ie){this.elements=ie},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var ie,ee=this.layers.length;for(ie=0;ie<ee;ie+=1)this.elements[ie]&&this.elements[ie].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(ie,ee,te){this.layers=ie.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(ie,ee,te),this.tm=ie.tm?PropertyFactory.getProp(this,ie.tm,0,ee.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(ie){return new SVGCompElement(ie,this.globalData,this)};function SVGRenderer(ie,ee){this.animationItem=ie,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var te="";if(ee&&ee.title){var re=createNS("title"),ne=createElementID();re.setAttribute("id",ne),re.textContent=ee.title,this.svgElement.appendChild(re),te+=ne}if(ee&&ee.description){var se=createNS("desc"),ae=createElementID();se.setAttribute("id",ae),se.textContent=ee.description,this.svgElement.appendChild(se),te+=" "+ae}te&&this.svgElement.setAttribute("aria-labelledby",te);var oe=createNS("defs");this.svgElement.appendChild(oe);var le=createNS("g");this.svgElement.appendChild(le),this.layerElement=le,this.renderConfig={preserveAspectRatio:ee&&ee.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:ee&&ee.contentVisibility||"visible",progressiveLoad:ee&&ee.progressiveLoad||!1,hideOnTransparent:!(ee&&ee.hideOnTransparent===!1),viewBoxOnly:ee&&ee.viewBoxOnly||!1,viewBoxSize:ee&&ee.viewBoxSize||!1,className:ee&&ee.className||"",id:ee&&ee.id||"",focusable:ee&&ee.focusable,filterSize:{width:ee&&ee.filterSize&&ee.filterSize.width||"100%",height:ee&&ee.filterSize&&ee.filterSize.height||"100%",x:ee&&ee.filterSize&&ee.filterSize.x||"0%",y:ee&&ee.filterSize&&ee.filterSize.y||"0%"},width:ee&&ee.width,height:ee&&ee.height,runExpressions:!ee||ee.runExpressions===void 0||ee.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:oe,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(ie){return new SVGCompElement(ie,this.globalData,this)};function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var ie,ee=15;for(this.savedOp=createTypedArray("float32",ee),ie=0;ie<ee;ie+=1)this.saved[ie]=createTypedArray("float32",16);this._length=ee}CVContextData.prototype.duplicate=function(){var ie=this._length*2,ee=this.savedOp;this.savedOp=createTypedArray("float32",ie),this.savedOp.set(ee);var te=0;for(te=this._length;te<ie;te+=1)this.saved[te]=createTypedArray("float32",16);this._length=ie},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVContextData.prototype.popTransform=function(){var ie=this.saved[this.cArrPos],ee,te=this.cTr.props;for(ee=0;ee<16;ee+=1)te[ee]=ie[ee];return ie},CVContextData.prototype.popOpacity=function(){var ie=this.savedOp[this.cArrPos];return this.cO=ie,ie},CVContextData.prototype.pop=function(){this.cArrPos-=1;var ie=this.popTransform(),ee=this.popOpacity();return{transform:ie,opacity:ee}},CVContextData.prototype.push=function(){var ie=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var ee,te=this.saved[this.cArrPos];for(ee=0;ee<16;ee+=1)te[ee]=ie[ee];this.savedOp[this.cArrPos]=this.cO,this.cArrPos+=1},CVContextData.prototype.getTransform=function(){return this.cTr},CVContextData.prototype.getOpacity=function(){return this.cO},CVContextData.prototype.setOpacity=function(ie){this.cO=ie};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(ee){var te,re=ee.length,ne="_";for(te=0;te<re;te+=1)ne+=ee[te].transform.key+"_";var se=this.sequences[ne];return se||(se={transforms:[].concat(ee),finalTransform:new Matrix,_mdf:!1},this.sequences[ne]=se,this.sequenceList.push(se)),se},processSequence:function(ee,te){for(var re=0,ne=ee.transforms.length,se=te;re<ne&&!te;){if(ee.transforms[re].transform.mProps._mdf){se=!0;break}re+=1}if(se){var ae;for(ee.finalTransform.reset(),re=ne-1;re>=0;re-=1)ae=ee.transforms[re].transform.mProps.v.props,ee.finalTransform.transform(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5],ae[6],ae[7],ae[8],ae[9],ae[10],ae[11],ae[12],ae[13],ae[14],ae[15])}ee._mdf=se},processSequences:function(ee){var te,re=this.sequenceList.length;for(te=0;te<re;te+=1)this.processSequence(this.sequenceList[te],ee)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var ee="__lottie_element_luma_buffer",te=null,re=null,ne=null;function se(){var le=createNS("svg"),he=createNS("filter"),ce=createNS("feColorMatrix");return he.setAttribute("id",ee),ce.setAttribute("type","matrix"),ce.setAttribute("color-interpolation-filters","sRGB"),ce.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),he.appendChild(ce),le.appendChild(he),le.setAttribute("id",ee+"_svg"),featureSupport.svgLumaHidden&&(le.style.display="none"),le}function ae(){te||(ne=se(),document.body.appendChild(ne),te=createTag("canvas"),re=te.getContext("2d"),re.filter="url(#"+ee+")",re.fillStyle="rgba(0,0,0,0)",re.fillRect(0,0,1,1))}function oe(le){return te||ae(),te.width=le.width,te.height=le.height,re.filter="url(#"+ee+")",te}return{load:ae,get:oe}};function createCanvas(ie,ee){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(ie,ee);var te=createTag("canvas");return te.width=ie,te.height=ee,te}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}();function CVEffects(){}CVEffects.prototype.renderFrame=function(){};function CVMaskElement(ie,ee){this.data=ie,this.element=ee,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var te,re=this.masksProperties.length,ne=!1;for(te=0;te<re;te+=1)this.masksProperties[te].mode!=="n"&&(ne=!0),this.viewData[te]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[te],3);this.hasMasks=ne,ne&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(!!this.hasMasks){var ie=this.element.finalTransform.mat,ee=this.element.canvasContext,te,re=this.masksProperties.length,ne,se,ae;for(ee.beginPath(),te=0;te<re;te+=1)if(this.masksProperties[te].mode!=="n"){this.masksProperties[te].inv&&(ee.moveTo(0,0),ee.lineTo(this.element.globalData.compSize.w,0),ee.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),ee.lineTo(0,this.element.globalData.compSize.h),ee.lineTo(0,0)),ae=this.viewData[te].v,ne=ie.applyToPointArray(ae.v[0][0],ae.v[0][1],0),ee.moveTo(ne[0],ne[1]);var oe,le=ae._length;for(oe=1;oe<le;oe+=1)se=ie.applyToTriplePoints(ae.o[oe-1],ae.i[oe],ae.v[oe]),ee.bezierCurveTo(se[0],se[1],se[2],se[3],se[4],se[5]);se=ie.applyToTriplePoints(ae.o[oe-1],ae.i[0],ae.v[0]),ee.bezierCurveTo(se[0],se[1],se[2],se[3],se[4],se[5])}this.element.globalData.renderer.save(!0),ee.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var ee=this.globalData.canvasContext,te=assetLoader.createCanvas(ee.canvas.width,ee.canvas.height);this.buffers.push(te);var re=assetLoader.createCanvas(ee.canvas.width,ee.canvas.height);this.buffers.push(re),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects},createContent:function(){},setBlendMode:function(){var ee=this.globalData;if(ee.blendMode!==this.data.bm){ee.blendMode=this.data.bm;var te=getBlendMode(this.data.bm);ee.canvasContext.globalCompositeOperation=te}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(ee){ee.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var ee=this.buffers[0],te=ee.getContext("2d");this.clearCanvas(te),te.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var ee=this.buffers[1],te=ee.getContext("2d");this.clearCanvas(te),te.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var re=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(re.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var ne=assetLoader.getLumaCanvas(this.canvasContext.canvas),se=ne.getContext("2d");se.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(ne,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(ee,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(ee){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!ee)){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var te=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(te),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(te),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(ie,ee,te,re){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var ne=4;ee.ty==="rc"?ne=5:ee.ty==="el"?ne=6:ee.ty==="sr"&&(ne=7),this.sh=ShapePropertyFactory.getShapeProp(ie,ee,ne,ie);var se,ae=te.length,oe;for(se=0;se<ae;se+=1)te[se].closed||(oe={transforms:re.addTransformSequence(te[se].transforms),trNodes:[]},this.styledShapes.push(oe),te[se].elements.push(oe))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(ie,ee,te){this.shapes=[],this.shapesData=ie.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(ie,ee){var te={data:ie,type:ie.ty,preTransforms:this.transformsManager.addTransformSequence(ee),transforms:[],elements:[],closed:ie.hd===!0},re={};if(ie.ty==="fl"||ie.ty==="st"?(re.c=PropertyFactory.getProp(this,ie.c,1,255,this),re.c.k||(te.co="rgb("+bmFloor(re.c.v[0])+","+bmFloor(re.c.v[1])+","+bmFloor(re.c.v[2])+")")):(ie.ty==="gf"||ie.ty==="gs")&&(re.s=PropertyFactory.getProp(this,ie.s,1,null,this),re.e=PropertyFactory.getProp(this,ie.e,1,null,this),re.h=PropertyFactory.getProp(this,ie.h||{k:0},0,.01,this),re.a=PropertyFactory.getProp(this,ie.a||{k:0},0,degToRads,this),re.g=new GradientProperty(this,ie.g,this)),re.o=PropertyFactory.getProp(this,ie.o,0,.01,this),ie.ty==="st"||ie.ty==="gs"){if(te.lc=lineCapEnum[ie.lc||2],te.lj=lineJoinEnum[ie.lj||2],ie.lj==1&&(te.ml=ie.ml),re.w=PropertyFactory.getProp(this,ie.w,0,null,this),re.w.k||(te.wi=re.w.v),ie.d){var ne=new DashProperty(this,ie.d,"canvas",this);re.d=ne,re.d.k||(te.da=re.d.dashArray,te.do=re.d.dashoffset[0])}}else te.r=ie.r===2?"evenodd":"nonzero";return this.stylesList.push(te),re.style=te,re},CVShapeElement.prototype.createGroupElement=function(){var ie={it:[],prevViewData:[]};return ie},CVShapeElement.prototype.createTransformElement=function(ie){var ee={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,ie.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,ie,this)}};return ee},CVShapeElement.prototype.createShapeElement=function(ie){var ee=new CVShapeData(this,ie,this.stylesList,this.transformsManager);return this.shapes.push(ee),this.addShapeToModifiers(ee),ee},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var ie,ee=this.itemsData.length;for(ie=0;ie<ee;ie+=1)this.prevViewData[ie]=this.itemsData[ie];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),ee=this.dynamicProperties.length,ie=0;ie<ee;ie+=1)this.dynamicProperties[ie].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(ie){var ee,te=this.stylesList.length;for(ee=0;ee<te;ee+=1)this.stylesList[ee].closed||this.stylesList[ee].transforms.push(ie)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var ie,ee=this.stylesList.length;for(ie=0;ie<ee;ie+=1)this.stylesList[ie].closed||this.stylesList[ie].transforms.pop()},CVShapeElement.prototype.closeStyles=function(ie){var ee,te=ie.length;for(ee=0;ee<te;ee+=1)ie[ee].closed=!0},CVShapeElement.prototype.searchShapes=function(ie,ee,te,re,ne){var se,ae=ie.length-1,oe,le,he=[],ce=[],de,ue,fe,pe=[].concat(ne);for(se=ae;se>=0;se-=1){if(de=this.searchProcessedElement(ie[se]),de?ee[se]=te[de-1]:ie[se]._shouldRender=re,ie[se].ty==="fl"||ie[se].ty==="st"||ie[se].ty==="gf"||ie[se].ty==="gs")de?ee[se].style.closed=!1:ee[se]=this.createStyleElement(ie[se],pe),he.push(ee[se].style);else if(ie[se].ty==="gr"){if(!de)ee[se]=this.createGroupElement(ie[se]);else for(le=ee[se].it.length,oe=0;oe<le;oe+=1)ee[se].prevViewData[oe]=ee[se].it[oe];this.searchShapes(ie[se].it,ee[se].it,ee[se].prevViewData,re,pe)}else ie[se].ty==="tr"?(de||(fe=this.createTransformElement(ie[se]),ee[se]=fe),pe.push(ee[se]),this.addTransformToStyleList(ee[se])):ie[se].ty==="sh"||ie[se].ty==="rc"||ie[se].ty==="el"||ie[se].ty==="sr"?de||(ee[se]=this.createShapeElement(ie[se])):ie[se].ty==="tm"||ie[se].ty==="rd"||ie[se].ty==="pb"||ie[se].ty==="zz"||ie[se].ty==="op"?(de?(ue=ee[se],ue.closed=!1):(ue=ShapeModifiers.getModifier(ie[se].ty),ue.init(this,ie[se]),ee[se]=ue,this.shapeModifiers.push(ue)),ce.push(ue)):ie[se].ty==="rp"&&(de?(ue=ee[se],ue.closed=!0):(ue=ShapeModifiers.getModifier(ie[se].ty),ee[se]=ue,ue.init(this,ie,se,ee),this.shapeModifiers.push(ue),re=!1),ce.push(ue));this.addProcessedElement(ie[se],se+1)}for(this.removeTransformFromStyleList(),this.closeStyles(he),ae=ce.length,se=0;se<ae;se+=1)ce[se].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(ie,ee){(ie._opMdf||ee.op._mdf||this._isFirstFrame)&&(ee.opacity=ie.opacity,ee.opacity*=ee.op.v,ee._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var ie,ee=this.stylesList.length,te,re,ne,se,ae,oe,le=this.globalData.renderer,he=this.globalData.canvasContext,ce,de;for(ie=0;ie<ee;ie+=1)if(de=this.stylesList[ie],ce=de.type,!((ce==="st"||ce==="gs")&&de.wi===0||!de.data._shouldRender||de.coOp===0||this.globalData.currentGlobalAlpha===0)){for(le.save(),ae=de.elements,ce==="st"||ce==="gs"?(he.strokeStyle=ce==="st"?de.co:de.grd,he.lineWidth=de.wi,he.lineCap=de.lc,he.lineJoin=de.lj,he.miterLimit=de.ml||0):he.fillStyle=ce==="fl"?de.co:de.grd,le.ctxOpacity(de.coOp),ce!=="st"&&ce!=="gs"&&he.beginPath(),le.ctxTransform(de.preTransforms.finalTransform.props),re=ae.length,te=0;te<re;te+=1){for((ce==="st"||ce==="gs")&&(he.beginPath(),de.da&&(he.setLineDash(de.da),he.lineDashOffset=de.do)),oe=ae[te].trNodes,se=oe.length,ne=0;ne<se;ne+=1)oe[ne].t==="m"?he.moveTo(oe[ne].p[0],oe[ne].p[1]):oe[ne].t==="c"?he.bezierCurveTo(oe[ne].pts[0],oe[ne].pts[1],oe[ne].pts[2],oe[ne].pts[3],oe[ne].pts[4],oe[ne].pts[5]):he.closePath();(ce==="st"||ce==="gs")&&(he.stroke(),de.da&&he.setLineDash(this.dashResetter))}ce!=="st"&&ce!=="gs"&&he.fill(de.r),le.restore()}},CVShapeElement.prototype.renderShape=function(ie,ee,te,re){var ne,se=ee.length-1,ae;for(ae=ie,ne=se;ne>=0;ne-=1)ee[ne].ty==="tr"?(ae=te[ne].transform,this.renderShapeTransform(ie,ae)):ee[ne].ty==="sh"||ee[ne].ty==="el"||ee[ne].ty==="rc"||ee[ne].ty==="sr"?this.renderPath(ee[ne],te[ne]):ee[ne].ty==="fl"?this.renderFill(ee[ne],te[ne],ae):ee[ne].ty==="st"?this.renderStroke(ee[ne],te[ne],ae):ee[ne].ty==="gf"||ee[ne].ty==="gs"?this.renderGradientFill(ee[ne],te[ne],ae):ee[ne].ty==="gr"?this.renderShape(ae,ee[ne].it,te[ne].it):ee[ne].ty;re&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(ie,ee){if(this._isFirstFrame||ee._mdf||ie.transforms._mdf){var te=ie.trNodes,re=ee.paths,ne,se,ae,oe=re._length;te.length=0;var le=ie.transforms.finalTransform;for(ae=0;ae<oe;ae+=1){var he=re.shapes[ae];if(he&&he.v){for(se=he._length,ne=1;ne<se;ne+=1)ne===1&&te.push({t:"m",p:le.applyToPointArray(he.v[0][0],he.v[0][1],0)}),te.push({t:"c",pts:le.applyToTriplePoints(he.o[ne-1],he.i[ne],he.v[ne])});se===1&&te.push({t:"m",p:le.applyToPointArray(he.v[0][0],he.v[0][1],0)}),he.c&&se&&(te.push({t:"c",pts:le.applyToTriplePoints(he.o[ne-1],he.i[0],he.v[0])}),te.push({t:"z"}))}}ie.trNodes=te}},CVShapeElement.prototype.renderPath=function(ie,ee){if(ie.hd!==!0&&ie._shouldRender){var te,re=ee.styledShapes.length;for(te=0;te<re;te+=1)this.renderStyledShape(ee.styledShapes[te],ee.sh)}},CVShapeElement.prototype.renderFill=function(ie,ee,te){var re=ee.style;(ee.c._mdf||this._isFirstFrame)&&(re.co="rgb("+bmFloor(ee.c.v[0])+","+bmFloor(ee.c.v[1])+","+bmFloor(ee.c.v[2])+")"),(ee.o._mdf||te._opMdf||this._isFirstFrame)&&(re.coOp=ee.o.v*te.opacity)},CVShapeElement.prototype.renderGradientFill=function(ie,ee,te){var re=ee.style,ne;if(!re.grd||ee.g._mdf||ee.s._mdf||ee.e._mdf||ie.t!==1&&(ee.h._mdf||ee.a._mdf)){var se=this.globalData.canvasContext,ae=ee.s.v,oe=ee.e.v;if(ie.t===1)ne=se.createLinearGradient(ae[0],ae[1],oe[0],oe[1]);else{var le=Math.sqrt(Math.pow(ae[0]-oe[0],2)+Math.pow(ae[1]-oe[1],2)),he=Math.atan2(oe[1]-ae[1],oe[0]-ae[0]),ce=ee.h.v;ce>=1?ce=.99:ce<=-1&&(ce=-.99);var de=le*ce,ue=Math.cos(he+ee.a.v)*de+ae[0],fe=Math.sin(he+ee.a.v)*de+ae[1];ne=se.createRadialGradient(ue,fe,0,ae[0],ae[1],le)}var pe,me=ie.g.p,xe=ee.g.c,ge=1;for(pe=0;pe<me;pe+=1)ee.g._hasOpacity&&ee.g._collapsable&&(ge=ee.g.o[pe*2+1]),ne.addColorStop(xe[pe*4]/100,"rgba("+xe[pe*4+1]+","+xe[pe*4+2]+","+xe[pe*4+3]+","+ge+")");re.grd=ne}re.coOp=ee.o.v*te.opacity},CVShapeElement.prototype.renderStroke=function(ie,ee,te){var re=ee.style,ne=ee.d;ne&&(ne._mdf||this._isFirstFrame)&&(re.da=ne.dashArray,re.do=ne.dashoffset[0]),(ee.c._mdf||this._isFirstFrame)&&(re.co="rgb("+bmFloor(ee.c.v[0])+","+bmFloor(ee.c.v[1])+","+bmFloor(ee.c.v[2])+")"),(ee.o._mdf||te._opMdf||this._isFirstFrame)&&(re.coOp=ee.o.v*te.opacity),(ee.w._mdf||this._isFirstFrame)&&(re.wi=ee.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(ie,ee,te){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var ie=this.textProperty.currentData;this.renderedLetters=createSizedArray(ie.l?ie.l.length:0);var ee=!1;ie.fc?(ee=!0,this.values.fill=this.buildColor(ie.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=ee;var te=!1;ie.sc&&(te=!0,this.values.stroke=this.buildColor(ie.sc),this.values.sWidth=ie.sw);var re=this.globalData.fontManager.getFontByName(ie.f),ne,se,ae=ie.l,oe=this.mHelper;this.stroke=te,this.values.fValue=ie.finalSize+"px "+this.globalData.fontManager.getFontByName(ie.f).fFamily,se=ie.finalText.length;var le,he,ce,de,ue,fe,pe,me,xe,ge,_e=this.data.singleShape,ve=ie.tr*.001*ie.finalSize,ye=0,be=0,we=!0,Se=0;for(ne=0;ne<se;ne+=1){le=this.globalData.fontManager.getCharData(ie.finalText[ne],re.fStyle,this.globalData.fontManager.getFontByName(ie.f).fFamily),he=le&&le.data||{},oe.reset(),_e&&ae[ne].n&&(ye=-ve,be+=ie.yOffset,be+=we?1:0,we=!1),ue=he.shapes?he.shapes[0].it:[],pe=ue.length,oe.scale(ie.finalSize/100,ie.finalSize/100),_e&&this.applyTextPropertiesToMatrix(ie,oe,ae[ne].line,ye,be),xe=createSizedArray(pe-1);var Te=0;for(fe=0;fe<pe;fe+=1)if(ue[fe].ty==="sh"){for(de=ue[fe].ks.k.i.length,me=ue[fe].ks.k,ge=[],ce=1;ce<de;ce+=1)ce===1&&ge.push(oe.applyToX(me.v[0][0],me.v[0][1],0),oe.applyToY(me.v[0][0],me.v[0][1],0)),ge.push(oe.applyToX(me.o[ce-1][0],me.o[ce-1][1],0),oe.applyToY(me.o[ce-1][0],me.o[ce-1][1],0),oe.applyToX(me.i[ce][0],me.i[ce][1],0),oe.applyToY(me.i[ce][0],me.i[ce][1],0),oe.applyToX(me.v[ce][0],me.v[ce][1],0),oe.applyToY(me.v[ce][0],me.v[ce][1],0));ge.push(oe.applyToX(me.o[ce-1][0],me.o[ce-1][1],0),oe.applyToY(me.o[ce-1][0],me.o[ce-1][1],0),oe.applyToX(me.i[0][0],me.i[0][1],0),oe.applyToY(me.i[0][0],me.i[0][1],0),oe.applyToX(me.v[0][0],me.v[0][1],0),oe.applyToY(me.v[0][0],me.v[0][1],0)),xe[Te]=ge,Te+=1}_e&&(ye+=ae[ne].l,ye+=ve),this.textSpans[Se]?this.textSpans[Se].elem=xe:this.textSpans[Se]={elem:xe},Se+=1}},CVTextElement.prototype.renderInnerContent=function(){var ie=this.canvasContext;ie.font=this.values.fValue,ie.lineCap="butt",ie.lineJoin="miter",ie.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var ee,te,re,ne,se,ae,oe=this.textAnimator.renderedLetters,le=this.textProperty.currentData.l;te=le.length;var he,ce=null,de=null,ue=null,fe,pe;for(ee=0;ee<te;ee+=1)if(!le[ee].n){if(he=oe[ee],he&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(he.p),this.globalData.renderer.ctxOpacity(he.o)),this.fill){for(he&&he.fc?ce!==he.fc&&(ce=he.fc,ie.fillStyle=he.fc):ce!==this.values.fill&&(ce=this.values.fill,ie.fillStyle=this.values.fill),fe=this.textSpans[ee].elem,ne=fe.length,this.globalData.canvasContext.beginPath(),re=0;re<ne;re+=1)for(pe=fe[re],ae=pe.length,this.globalData.canvasContext.moveTo(pe[0],pe[1]),se=2;se<ae;se+=6)this.globalData.canvasContext.bezierCurveTo(pe[se],pe[se+1],pe[se+2],pe[se+3],pe[se+4],pe[se+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(he&&he.sw?ue!==he.sw&&(ue=he.sw,ie.lineWidth=he.sw):ue!==this.values.sWidth&&(ue=this.values.sWidth,ie.lineWidth=this.values.sWidth),he&&he.sc?de!==he.sc&&(de=he.sc,ie.strokeStyle=he.sc):de!==this.values.stroke&&(de=this.values.stroke,ie.strokeStyle=this.values.stroke),fe=this.textSpans[ee].elem,ne=fe.length,this.globalData.canvasContext.beginPath(),re=0;re<ne;re+=1)for(pe=fe[re],ae=pe.length,this.globalData.canvasContext.moveTo(pe[0],pe[1]),se=2;se<ae;se+=6)this.globalData.canvasContext.bezierCurveTo(pe[se],pe[se+1],pe[se+2],pe[se+3],pe[se+4],pe[se+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}he&&this.globalData.renderer.restore()}};function CVImageElement(ie,ee,te){this.assetData=ee.getAssetData(ie.refId),this.img=ee.imageLoader.getAsset(this.assetData),this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var ie=createTag("canvas");ie.width=this.assetData.w,ie.height=this.assetData.h;var ee=ie.getContext("2d"),te=this.img.width,re=this.img.height,ne=te/re,se=this.assetData.w/this.assetData.h,ae,oe,le=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;ne>se&&le==="xMidYMid slice"||ne<se&&le!=="xMidYMid slice"?(oe=re,ae=oe*se):(ae=te,oe=ae/se),ee.drawImage(this.img,(te-ae)/2,(re-oe)/2,ae,oe,0,0,this.assetData.w,this.assetData.h),this.img=ie}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(ie,ee,te){this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var ie=this.canvasContext;ie.fillStyle=this.data.sc,ie.fillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(ie,ee){this.animationItem=ie,this.renderConfig={clearCanvas:ee&&ee.clearCanvas!==void 0?ee.clearCanvas:!0,context:ee&&ee.context||null,progressiveLoad:ee&&ee.progressiveLoad||!1,preserveAspectRatio:ee&&ee.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:ee&&ee.contentVisibility||"visible",className:ee&&ee.className||"",id:ee&&ee.id||""},this.renderConfig.dpr=ee&&ee.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=ee&&ee.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(ie){return new CVShapeElement(ie,this.globalData,this)},CanvasRendererBase.prototype.createText=function(ie){return new CVTextElement(ie,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(ie){return new CVImageElement(ie,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(ie){return new CVSolidElement(ie,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(ie){if(!(ie[0]===1&&ie[1]===0&&ie[4]===0&&ie[5]===1&&ie[12]===0&&ie[13]===0)){if(!this.renderConfig.clearCanvas){this.canvasContext.transform(ie[0],ie[1],ie[4],ie[5],ie[12],ie[13]);return}this.transformMat.cloneFromProps(ie);var ee=this.contextData.getTransform(),te=ee.props;this.transformMat.transform(te[0],te[1],te[2],te[3],te[4],te[5],te[6],te[7],te[8],te[9],te[10],te[11],te[12],te[13],te[14],te[15]),ee.cloneFromProps(this.transformMat.props);var re=ee.props;this.canvasContext.setTransform(re[0],re[1],re[4],re[5],re[12],re[13])}},CanvasRendererBase.prototype.ctxOpacity=function(ie){var ee=this.contextData.getOpacity();if(!this.renderConfig.clearCanvas){this.canvasContext.globalAlpha*=ie<0?0:ie,this.globalData.currentGlobalAlpha=ee;return}ee*=ie<0?0:ie,this.contextData.setOpacity(ee),this.globalData.currentGlobalAlpha!==ee&&(this.canvasContext.globalAlpha=ee,this.globalData.currentGlobalAlpha=ee)},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(ie){if(!this.renderConfig.clearCanvas){this.canvasContext.save();return}ie&&this.canvasContext.save(),this.contextData.push()},CanvasRendererBase.prototype.restore=function(ie){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}ie&&(this.canvasContext.restore(),this.globalData.blendMode="source-over");var ee=this.contextData.pop(),te=ee.transform,re=ee.opacity;this.canvasContext.setTransform(te[0],te[1],te[4],te[5],te[12],te[13]),this.globalData.currentGlobalAlpha!==re&&(this.canvasContext.globalAlpha=re,this.globalData.currentGlobalAlpha=re)},CanvasRendererBase.prototype.configAnimation=function(ie){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var ee=this.animationItem.container.style;ee.width="100%",ee.height="100%";var te="0px 0px 0px";ee.transformOrigin=te,ee.mozTransformOrigin=te,ee.webkitTransformOrigin=te,ee["-webkit-transform"]=te,ee.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=ie,this.layers=ie.layers,this.transformCanvas={w:ie.w,h:ie.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(ie,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(ie.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(ie,ee){this.reset();var te,re;ie?(te=ie,re=ee,this.canvasContext.canvas.width=te,this.canvasContext.canvas.height=re):(this.animationItem.wrapper&&this.animationItem.container?(te=this.animationItem.wrapper.offsetWidth,re=this.animationItem.wrapper.offsetHeight):(te=this.canvasContext.canvas.width,re=this.canvasContext.canvas.height),this.canvasContext.canvas.width=te*this.renderConfig.dpr,this.canvasContext.canvas.height=re*this.renderConfig.dpr);var ne,se;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var ae=this.renderConfig.preserveAspectRatio.split(" "),oe=ae[1]||"meet",le=ae[0]||"xMidYMid",he=le.substr(0,4),ce=le.substr(4);ne=te/re,se=this.transformCanvas.w/this.transformCanvas.h,se>ne&&oe==="meet"||se<ne&&oe==="slice"?(this.transformCanvas.sx=te/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=te/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=re/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=re/(this.transformCanvas.h/this.renderConfig.dpr)),he==="xMid"&&(se<ne&&oe==="meet"||se>ne&&oe==="slice")?this.transformCanvas.tx=(te-this.transformCanvas.w*(re/this.transformCanvas.h))/2*this.renderConfig.dpr:he==="xMax"&&(se<ne&&oe==="meet"||se>ne&&oe==="slice")?this.transformCanvas.tx=(te-this.transformCanvas.w*(re/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,ce==="YMid"&&(se>ne&&oe==="meet"||se<ne&&oe==="slice")?this.transformCanvas.ty=(re-this.transformCanvas.h*(te/this.transformCanvas.w))/2*this.renderConfig.dpr:ce==="YMax"&&(se>ne&&oe==="meet"||se<ne&&oe==="slice")?this.transformCanvas.ty=(re-this.transformCanvas.h*(te/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=te/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=re/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var ie,ee=this.layers?this.layers.length:0;for(ie=ee-1;ie>=0;ie-=1)this.elements[ie]&&this.elements[ie].destroy&&this.elements[ie].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(ie,ee){if(!(this.renderedFrame===ie&&this.renderConfig.clearCanvas===!0&&!ee||this.destroyed||ie===-1)){this.renderedFrame=ie,this.globalData.frameNum=ie-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||ee,this.globalData.projectInterface.currentFrame=ie;var te,re=this.layers.length;for(this.completeLayers||this.checkLayers(ie),te=0;te<re;te+=1)(this.completeLayers||this.elements[te])&&this.elements[te].prepareFrame(ie-this.layers[te].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),te=re-1;te>=0;te-=1)(this.completeLayers||this.elements[te])&&this.elements[te].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(ie){var ee=this.elements;if(!(ee[ie]||this.layers[ie].ty===99)){var te=this.createItem(this.layers[ie],this,this.globalData);ee[ie]=te,te.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var ie=this.pendingElements.pop();ie.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CVCompElement(ie,ee,te){this.completeLayers=!1,this.layers=ie.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(ie,ee,te),this.tm=ie.tm?PropertyFactory.getProp(this,ie.tm,0,ee.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var ie=this.canvasContext;ie.beginPath(),ie.moveTo(0,0),ie.lineTo(this.data.w,0),ie.lineTo(this.data.w,this.data.h),ie.lineTo(0,this.data.h),ie.lineTo(0,0),ie.clip();var ee,te=this.layers.length;for(ee=te-1;ee>=0;ee-=1)(this.completeLayers||this.elements[ee])&&this.elements[ee].renderFrame()},CVCompElement.prototype.destroy=function(){var ie,ee=this.layers.length;for(ie=ee-1;ie>=0;ie-=1)this.elements[ie]&&this.elements[ie].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(ie){return new CVCompElement(ie,this.globalData,this)};function CanvasRenderer(ie,ee){this.animationItem=ie,this.renderConfig={clearCanvas:ee&&ee.clearCanvas!==void 0?ee.clearCanvas:!0,context:ee&&ee.context||null,progressiveLoad:ee&&ee.progressiveLoad||!1,preserveAspectRatio:ee&&ee.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:ee&&ee.contentVisibility||"visible",className:ee&&ee.className||"",id:ee&&ee.id||"",runExpressions:!ee||ee.runExpressions===void 0||ee.runExpressions},this.renderConfig.dpr=ee&&ee.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=ee&&ee.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(ie){return new CVCompElement(ie,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects,this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var ee=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var te=this.finalTransform.mat.toCSS();ee.transform=te,ee.webkitTransform=te}this.finalTransform._opMdf&&(ee.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(ie,ee,te){this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var ie;this.data.hasMask?(ie=createNS("rect"),ie.setAttribute("width",this.data.sw),ie.setAttribute("height",this.data.sh),ie.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(ie=createTag("div"),ie.style.width=this.data.sw+"px",ie.style.height=this.data.sh+"px",ie.style.backgroundColor=this.data.sc),this.layerElement.appendChild(ie)};function HShapeElement(ie,ee,te){this.shapes=[],this.shapesData=ie.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(ie,ee,te),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var ie;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),ie=this.svgElement;else{ie=createNS("svg");var ee=this.comp.data?this.comp.data:this.globalData.compSize;ie.setAttribute("width",ee.w),ie.setAttribute("height",ee.h),ie.appendChild(this.shapesContainer),this.layerElement.appendChild(ie)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=ie},HShapeElement.prototype.getTransformedPoint=function(ie,ee){var te,re=ie.length;for(te=0;te<re;te+=1)ee=ie[te].mProps.v.applyToPointArray(ee[0],ee[1],0);return ee},HShapeElement.prototype.calculateShapeBoundingBox=function(ie,ee){var te=ie.sh.v,re=ie.transformers,ne,se=te._length,ae,oe,le,he;if(!(se<=1)){for(ne=0;ne<se-1;ne+=1)ae=this.getTransformedPoint(re,te.v[ne]),oe=this.getTransformedPoint(re,te.o[ne]),le=this.getTransformedPoint(re,te.i[ne+1]),he=this.getTransformedPoint(re,te.v[ne+1]),this.checkBounds(ae,oe,le,he,ee);te.c&&(ae=this.getTransformedPoint(re,te.v[ne]),oe=this.getTransformedPoint(re,te.o[ne]),le=this.getTransformedPoint(re,te.i[0]),he=this.getTransformedPoint(re,te.v[0]),this.checkBounds(ae,oe,le,he,ee))}},HShapeElement.prototype.checkBounds=function(ie,ee,te,re,ne){this.getBoundsOfCurve(ie,ee,te,re);var se=this.shapeBoundingBox;ne.x=bmMin(se.left,ne.x),ne.xMax=bmMax(se.right,ne.xMax),ne.y=bmMin(se.top,ne.y),ne.yMax=bmMax(se.bottom,ne.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(ie,ee,te,re){for(var ne=[[ie[0],re[0]],[ie[1],re[1]]],se,ae,oe,le,he,ce,de,ue=0;ue<2;++ue)ae=6*ie[ue]-12*ee[ue]+6*te[ue],se=-3*ie[ue]+9*ee[ue]-9*te[ue]+3*re[ue],oe=3*ee[ue]-3*ie[ue],ae|=0,se|=0,oe|=0,se===0&&ae===0||(se===0?(le=-oe/ae,le>0&&le<1&&ne[ue].push(this.calculateF(le,ie,ee,te,re,ue))):(he=ae*ae-4*oe*se,he>=0&&(ce=(-ae+bmSqrt(he))/(2*se),ce>0&&ce<1&&ne[ue].push(this.calculateF(ce,ie,ee,te,re,ue)),de=(-ae-bmSqrt(he))/(2*se),de>0&&de<1&&ne[ue].push(this.calculateF(de,ie,ee,te,re,ue)))));this.shapeBoundingBox.left=bmMin.apply(null,ne[0]),this.shapeBoundingBox.top=bmMin.apply(null,ne[1]),this.shapeBoundingBox.right=bmMax.apply(null,ne[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,ne[1])},HShapeElement.prototype.calculateF=function(ie,ee,te,re,ne,se){return bmPow(1-ie,3)*ee[se]+3*bmPow(1-ie,2)*ie*te[se]+3*(1-ie)*bmPow(ie,2)*re[se]+bmPow(ie,3)*ne[se]},HShapeElement.prototype.calculateBoundingBox=function(ie,ee){var te,re=ie.length;for(te=0;te<re;te+=1)ie[te]&&ie[te].sh?this.calculateShapeBoundingBox(ie[te],ee):ie[te]&&ie[te].it?this.calculateBoundingBox(ie[te].it,ee):ie[te]&&ie[te].style&&ie[te].w&&this.expandStrokeBoundingBox(ie[te].w,ee)},HShapeElement.prototype.expandStrokeBoundingBox=function(ie,ee){var te=0;if(ie.keyframes){for(var re=0;re<ie.keyframes.length;re+=1){var ne=ie.keyframes[re].s;ne>te&&(te=ne)}te*=ie.mult}else te=ie.v*ie.mult;ee.x-=te,ee.xMax+=te,ee.y-=te,ee.yMax+=te},HShapeElement.prototype.currentBoxContains=function(ie){return this.currentBBox.x<=ie.x&&this.currentBBox.y<=ie.y&&this.currentBBox.width+this.currentBBox.x>=ie.x+ie.width&&this.currentBBox.height+this.currentBBox.y>=ie.y+ie.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var ie=this.tempBoundingBox,ee=999999;if(ie.x=ee,ie.xMax=-ee,ie.y=ee,ie.yMax=-ee,this.calculateBoundingBox(this.itemsData,ie),ie.width=ie.xMax<ie.x?0:ie.xMax-ie.x,ie.height=ie.yMax<ie.y?0:ie.yMax-ie.y,this.currentBoxContains(ie))return;var te=!1;if(this.currentBBox.w!==ie.width&&(this.currentBBox.w=ie.width,this.shapeCont.setAttribute("width",ie.width),te=!0),this.currentBBox.h!==ie.height&&(this.currentBBox.h=ie.height,this.shapeCont.setAttribute("height",ie.height),te=!0),te||this.currentBBox.x!==ie.x||this.currentBBox.y!==ie.y){this.currentBBox.w=ie.width,this.currentBBox.h=ie.height,this.currentBBox.x=ie.x,this.currentBBox.y=ie.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var re=this.shapeCont.style,ne="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";re.transform=ne,re.webkitTransform=ne}}};function HTextElement(ie,ee,te){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var ie=createNS("g");this.maskedElement.appendChild(ie),this.innerElem=ie}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var ie=this.textProperty.currentData;this.renderedLetters=createSizedArray(ie.l?ie.l.length:0);var ee=this.innerElem.style,te=ie.fc?this.buildColor(ie.fc):"rgba(0,0,0,0)";ee.fill=te,ee.color=te,ie.sc&&(ee.stroke=this.buildColor(ie.sc),ee.strokeWidth=ie.sw+"px");var re=this.globalData.fontManager.getFontByName(ie.f);if(!this.globalData.fontManager.chars)if(ee.fontSize=ie.finalSize+"px",ee.lineHeight=ie.finalSize+"px",re.fClass)this.innerElem.className=re.fClass;else{ee.fontFamily=re.fFamily;var ne=ie.fWeight,se=ie.fStyle;ee.fontStyle=se,ee.fontWeight=ne}var ae,oe,le=ie.l;oe=le.length;var he,ce,de,ue=this.mHelper,fe,pe="",me=0;for(ae=0;ae<oe;ae+=1){if(this.globalData.fontManager.chars?(this.textPaths[me]?he=this.textPaths[me]:(he=createNS("path"),he.setAttribute("stroke-linecap",lineCapEnum[1]),he.setAttribute("stroke-linejoin",lineJoinEnum[2]),he.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[me]?(ce=this.textSpans[me],de=ce.children[0]):(ce=createTag("div"),ce.style.lineHeight=0,de=createNS("svg"),de.appendChild(he),styleDiv(ce)))):this.isMasked?he=this.textPaths[me]?this.textPaths[me]:createNS("text"):this.textSpans[me]?(ce=this.textSpans[me],he=this.textPaths[me]):(ce=createTag("span"),styleDiv(ce),he=createTag("span"),styleDiv(he),ce.appendChild(he)),this.globalData.fontManager.chars){var xe=this.globalData.fontManager.getCharData(ie.finalText[ae],re.fStyle,this.globalData.fontManager.getFontByName(ie.f).fFamily),ge;if(xe?ge=xe.data:ge=null,ue.reset(),ge&&ge.shapes&&ge.shapes.length&&(fe=ge.shapes[0].it,ue.scale(ie.finalSize/100,ie.finalSize/100),pe=this.createPathShape(ue,fe),he.setAttribute("d",pe)),this.isMasked)this.innerElem.appendChild(he);else{if(this.innerElem.appendChild(ce),ge&&ge.shapes){document.body.appendChild(de);var _e=de.getBBox();de.setAttribute("width",_e.width+2),de.setAttribute("height",_e.height+2),de.setAttribute("viewBox",_e.x-1+" "+(_e.y-1)+" "+(_e.width+2)+" "+(_e.height+2));var ve=de.style,ye="translate("+(_e.x-1)+"px,"+(_e.y-1)+"px)";ve.transform=ye,ve.webkitTransform=ye,le[ae].yOffset=_e.y-1}else de.setAttribute("width",1),de.setAttribute("height",1);ce.appendChild(de)}}else if(he.textContent=le[ae].val,he.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(he);else{this.innerElem.appendChild(ce);var be=he.style,we="translate3d(0,"+-ie.finalSize/1.2+"px,0)";be.transform=we,be.webkitTransform=we}this.isMasked?this.textSpans[me]=he:this.textSpans[me]=ce,this.textSpans[me].style.display="block",this.textPaths[me]=he,me+=1}for(;me<this.textSpans.length;)this.textSpans[me].style.display="none",me+=1},HTextElement.prototype.renderInnerContent=function(){var ie;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),ie=this.svgElement.style;var ee="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";ie.transform=ee,ie.webkitTransform=ee}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var te,re,ne=0,se=this.textAnimator.renderedLetters,ae=this.textProperty.currentData.l;re=ae.length;var oe,le,he;for(te=0;te<re;te+=1)ae[te].n?ne+=1:(le=this.textSpans[te],he=this.textPaths[te],oe=se[ne],ne+=1,oe._mdf.m&&(this.isMasked?le.setAttribute("transform",oe.m):(le.style.webkitTransform=oe.m,le.style.transform=oe.m)),le.style.opacity=oe.o,oe.sw&&oe._mdf.sw&&he.setAttribute("stroke-width",oe.sw),oe.sc&&oe._mdf.sc&&he.setAttribute("stroke",oe.sc),oe.fc&&oe._mdf.fc&&(he.setAttribute("fill",oe.fc),he.style.color=oe.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var ce=this.innerElem.getBBox();this.currentBBox.w!==ce.width&&(this.currentBBox.w=ce.width,this.svgElement.setAttribute("width",ce.width)),this.currentBBox.h!==ce.height&&(this.currentBBox.h=ce.height,this.svgElement.setAttribute("height",ce.height));var de=1;if(this.currentBBox.w!==ce.width+de*2||this.currentBBox.h!==ce.height+de*2||this.currentBBox.x!==ce.x-de||this.currentBBox.y!==ce.y-de){this.currentBBox.w=ce.width+de*2,this.currentBBox.h=ce.height+de*2,this.currentBBox.x=ce.x-de,this.currentBBox.y=ce.y-de,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),ie=this.svgElement.style;var ue="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";ie.transform=ue,ie.webkitTransform=ue}}}};function HCameraElement(ie,ee,te){this.initFrame(),this.initBaseData(ie,ee,te),this.initHierarchy();var re=PropertyFactory.getProp;if(this.pe=re(this,ie.pe,0,0,this),ie.ks.p.s?(this.px=re(this,ie.ks.p.x,1,0,this),this.py=re(this,ie.ks.p.y,1,0,this),this.pz=re(this,ie.ks.p.z,1,0,this)):this.p=re(this,ie.ks.p,1,0,this),ie.ks.a&&(this.a=re(this,ie.ks.a,1,0,this)),ie.ks.or.k.length&&ie.ks.or.k[0].to){var ne,se=ie.ks.or.k.length;for(ne=0;ne<se;ne+=1)ie.ks.or.k[ne].to=null,ie.ks.or.k[ne].ti=null}this.or=re(this,ie.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=re(this,ie.ks.rx,0,degToRads,this),this.ry=re(this,ie.ks.ry,0,degToRads,this),this.rz=re(this,ie.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var ie,ee=this.comp.threeDElements.length,te,re,ne;for(ie=0;ie<ee;ie+=1)if(te=this.comp.threeDElements[ie],te.type==="3d"){re=te.perspectiveElem.style,ne=te.container.style;var se=this.pe.v+"px",ae="0px 0px 0px",oe="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";re.perspective=se,re.webkitPerspective=se,ne.transformOrigin=ae,ne.mozTransformOrigin=ae,ne.webkitTransformOrigin=ae,re.transform=oe,re.webkitTransform=oe}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var ie=this._isFirstFrame,ee,te;if(this.hierarchy)for(te=this.hierarchy.length,ee=0;ee<te;ee+=1)ie=this.hierarchy[ee].finalTransform.mProp._mdf||ie;if(ie||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(te=this.hierarchy.length-1,ee=te;ee>=0;ee-=1){var re=this.hierarchy[ee].finalTransform.mProp;this.mat.translate(-re.p.v[0],-re.p.v[1],re.p.v[2]),this.mat.rotateX(-re.or.v[0]).rotateY(-re.or.v[1]).rotateZ(re.or.v[2]),this.mat.rotateX(-re.rx.v).rotateY(-re.ry.v).rotateZ(re.rz.v),this.mat.scale(1/re.s.v[0],1/re.s.v[1],1/re.s.v[2]),this.mat.translate(re.a.v[0],re.a.v[1],re.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var ne;this.p?ne=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:ne=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var se=Math.sqrt(Math.pow(ne[0],2)+Math.pow(ne[1],2)+Math.pow(ne[2],2)),ae=[ne[0]/se,ne[1]/se,ne[2]/se],oe=Math.sqrt(ae[2]*ae[2]+ae[0]*ae[0]),le=Math.atan2(ae[1],oe),he=Math.atan2(ae[0],-ae[2]);this.mat.rotateY(he).rotateX(-le)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var ce=!this._prevMat.equals(this.mat);if((ce||this.pe._mdf)&&this.comp.threeDElements){te=this.comp.threeDElements.length;var de,ue,fe;for(ee=0;ee<te;ee+=1)if(de=this.comp.threeDElements[ee],de.type==="3d"){if(ce){var pe=this.mat.toCSS();fe=de.container.style,fe.transform=pe,fe.webkitTransform=pe}this.pe._mdf&&(ue=de.perspectiveElem.style,ue.perspective=this.pe.v+"px",ue.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(ie){this.prepareProperties(ie,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(ie,ee,te){this.assetData=ee.getAssetData(ie.refId),this.initElement(ie,ee,te)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var ie=this.globalData.getAssetsPath(this.assetData),ee=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",ie),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(ee),ee.crossOrigin="anonymous",ee.src=ie,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(ie,ee){this.animationItem=ie,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:ee&&ee.className||"",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(ee&&ee.hideOnTransparent===!1),filterSize:{width:ee&&ee.filterSize&&ee.filterSize.width||"400%",height:ee&&ee.filterSize&&ee.filterSize.height||"400%",x:ee&&ee.filterSize&&ee.filterSize.x||"-100%",y:ee&&ee.filterSize&&ee.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var ie=this.pendingElements.pop();ie.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(ie,ee){var te=ie.getBaseElement();if(!!te){var re=this.layers[ee];if(!re.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(te,ee);else{for(var ne=0,se,ae,oe;ne<ee;)this.elements[ne]&&this.elements[ne]!==!0&&this.elements[ne].getBaseElement&&(ae=this.elements[ne],oe=this.layers[ne].ddd?this.getThreeDContainerByPos(ne):ae.getBaseElement(),se=oe||se),ne+=1;se?(!re.ddd||!this.supports3d)&&this.layerElement.insertBefore(te,se):(!re.ddd||!this.supports3d)&&this.layerElement.appendChild(te)}else this.addTo3dContainer(te,ee)}},HybridRendererBase.prototype.createShape=function(ie){return this.supports3d?new HShapeElement(ie,this.globalData,this):new SVGShapeElement(ie,this.globalData,this)},HybridRendererBase.prototype.createText=function(ie){return this.supports3d?new HTextElement(ie,this.globalData,this):new SVGTextLottieElement(ie,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(ie){return this.camera=new HCameraElement(ie,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(ie){return this.supports3d?new HImageElement(ie,this.globalData,this):new IImageElement(ie,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(ie){return this.supports3d?new HSolidElement(ie,this.globalData,this):new ISolidElement(ie,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(ie){for(var ee=0,te=this.threeDElements.length;ee<te;){if(this.threeDElements[ee].startPos<=ie&&this.threeDElements[ee].endPos>=ie)return this.threeDElements[ee].perspectiveElem;ee+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(ie,ee){var te=createTag("div"),re,ne;styleDiv(te);var se=createTag("div");if(styleDiv(se),ee==="3d"){re=te.style,re.width=this.globalData.compSize.w+"px",re.height=this.globalData.compSize.h+"px";var ae="50% 50%";re.webkitTransformOrigin=ae,re.mozTransformOrigin=ae,re.transformOrigin=ae,ne=se.style;var oe="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ne.transform=oe,ne.webkitTransform=oe}te.appendChild(se);var le={container:se,perspectiveElem:te,startPos:ie,endPos:ie,type:ee};return this.threeDElements.push(le),le},HybridRendererBase.prototype.build3dContainers=function(){var ie,ee=this.layers.length,te,re="";for(ie=0;ie<ee;ie+=1)this.layers[ie].ddd&&this.layers[ie].ty!==3?(re!=="3d"&&(re="3d",te=this.createThreeDContainer(ie,"3d")),te.endPos=Math.max(te.endPos,ie)):(re!=="2d"&&(re="2d",te=this.createThreeDContainer(ie,"2d")),te.endPos=Math.max(te.endPos,ie));for(ee=this.threeDElements.length,ie=ee-1;ie>=0;ie-=1)this.resizerElem.appendChild(this.threeDElements[ie].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(ie,ee){for(var te=0,re=this.threeDElements.length;te<re;){if(ee<=this.threeDElements[te].endPos){for(var ne=this.threeDElements[te].startPos,se;ne<ee;)this.elements[ne]&&this.elements[ne].getBaseElement&&(se=this.elements[ne].getBaseElement()),ne+=1;se?this.threeDElements[te].container.insertBefore(ie,se):this.threeDElements[te].container.appendChild(ie);break}te+=1}},HybridRendererBase.prototype.configAnimation=function(ie){var ee=createTag("div"),te=this.animationItem.wrapper,re=ee.style;re.width=ie.w+"px",re.height=ie.h+"px",this.resizerElem=ee,styleDiv(ee),re.transformStyle="flat",re.mozTransformStyle="flat",re.webkitTransformStyle="flat",this.renderConfig.className&&ee.setAttribute("class",this.renderConfig.className),te.appendChild(ee),re.overflow="hidden";var ne=createNS("svg");ne.setAttribute("width","1"),ne.setAttribute("height","1"),styleDiv(ne),this.resizerElem.appendChild(ne);var se=createNS("defs");ne.appendChild(se),this.data=ie,this.setupGlobalData(ie,ne),this.globalData.defs=se,this.layers=ie.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var ie,ee=this.layers?this.layers.length:0;for(ie=0;ie<ee;ie+=1)this.elements[ie]&&this.elements[ie].destroy&&this.elements[ie].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var ie=this.animationItem.wrapper.offsetWidth,ee=this.animationItem.wrapper.offsetHeight,te=ie/ee,re=this.globalData.compSize.w/this.globalData.compSize.h,ne,se,ae,oe;re>te?(ne=ie/this.globalData.compSize.w,se=ie/this.globalData.compSize.w,ae=0,oe=(ee-this.globalData.compSize.h*(ie/this.globalData.compSize.w))/2):(ne=ee/this.globalData.compSize.h,se=ee/this.globalData.compSize.h,ae=(ie-this.globalData.compSize.w*(ee/this.globalData.compSize.h))/2,oe=0);var le=this.resizerElem.style;le.webkitTransform="matrix3d("+ne+",0,0,0,0,"+se+",0,0,0,0,1,0,"+ae+","+oe+",0,1)",le.transform=le.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var ie=this.globalData.compSize.w,ee=this.globalData.compSize.h,te,re=this.threeDElements.length;for(te=0;te<re;te+=1){var ne=this.threeDElements[te].perspectiveElem.style;ne.webkitPerspective=Math.sqrt(Math.pow(ie,2)+Math.pow(ee,2))+"px",ne.perspective=ne.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(ie){var ee,te=ie.length,re=createTag("div");for(ee=0;ee<te;ee+=1)if(ie[ee].xt){var ne=this.createComp(ie[ee],re,this.globalData.comp,null);ne.initExpressions(),this.globalData.projectInterface.registerComposition(ne)}};function HCompElement(ie,ee,te){this.layers=ie.layers,this.supports3d=!ie.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(ie,ee,te),this.tm=ie.tm?PropertyFactory.getProp(this,ie.tm,0,ee.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(ie,ee){for(var te=0,re;te<ee;)this.elements[te]&&this.elements[te].getBaseElement&&(re=this.elements[te].getBaseElement()),te+=1;re?this.layerElement.insertBefore(ie,re):this.layerElement.appendChild(ie)},HCompElement.prototype.createComp=function(ie){return this.supports3d?new HCompElement(ie,this.globalData,this):new SVGCompElement(ie,this.globalData,this)};function HybridRenderer(ie,ee){this.animationItem=ie,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:ee&&ee.className||"",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(ee&&ee.hideOnTransparent===!1),filterSize:{width:ee&&ee.filterSize&&ee.filterSize.width||"400%",height:ee&&ee.filterSize&&ee.filterSize.height||"400%",x:ee&&ee.filterSize&&ee.filterSize.x||"-100%",y:ee&&ee.filterSize&&ee.filterSize.y||"-100%"},runExpressions:!ee||ee.runExpressions===void 0||ee.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(ie){return this.supports3d?new HCompElement(ie,this.globalData,this):new SVGCompElement(ie,this.globalData,this)};var CompExpressionInterface=function(){return function(ie){function ee(te){for(var re=0,ne=ie.layers.length;re<ne;){if(ie.layers[re].nm===te||ie.layers[re].ind===te)return ie.elements[re].layerInterface;re+=1}return null}return Object.defineProperty(ee,"_name",{value:ie.data.nm}),ee.layer=ee,ee.pixelAspect=1,ee.height=ie.data.h||ie.globalData.compSize.h,ee.width=ie.data.w||ie.globalData.compSize.w,ee.pixelAspect=1,ee.frameDuration=1/ie.globalData.frameRate,ee.displayStartTime=0,ee.numLayers=ie.layers.length,ee}}(),Expressions=function(){var ie={};ie.initExpressions=ee;function ee(te){var re=0,ne=[];function se(){re+=1}function ae(){re-=1,re===0&&le()}function oe(he){ne.indexOf(he)===-1&&ne.push(he)}function le(){var he,ce=ne.length;for(he=0;he<ce;he+=1)ne[he].release();ne.length=0}te.renderer.compInterface=CompExpressionInterface(te.renderer),te.renderer.globalData.projectInterface.registerComposition(te.renderer),te.renderer.globalData.pushExpression=se,te.renderer.globalData.popExpression=ae,te.renderer.globalData.registerExpressionProperty=oe}return ie}(),MaskManagerInterface=function(){function ie(te,re){this._mask=te,this._data=re}Object.defineProperty(ie.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(ie.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var ee=function(re){var ne=createSizedArray(re.viewData.length),se,ae=re.viewData.length;for(se=0;se<ae;se+=1)ne[se]=new ie(re.viewData[se],re.masksProperties[se]);var oe=function(he){for(se=0;se<ae;){if(re.masksProperties[se].nm===he)return ne[se];se+=1}return null};return oe};return ee}(),ExpressionPropertyInterface=function(){var ie={pv:0,v:0,mult:1},ee={pv:[0,0,0],v:[0,0,0],mult:1};function te(ae,oe,le){Object.defineProperty(ae,"velocity",{get:function(){return oe.getVelocityAtTime(oe.comp.currentFrame)}}),ae.numKeys=oe.keyframes?oe.keyframes.length:0,ae.key=function(he){if(!ae.numKeys)return 0;var ce="";"s"in oe.keyframes[he-1]?ce=oe.keyframes[he-1].s:"e"in oe.keyframes[he-2]?ce=oe.keyframes[he-2].e:ce=oe.keyframes[he-2].s;var de=le==="unidimensional"?new Number(ce):Object.assign({},ce);return de.time=oe.keyframes[he-1].t/oe.elem.comp.globalData.frameRate,de.value=le==="unidimensional"?ce[0]:ce,de},ae.valueAtTime=oe.getValueAtTime,ae.speedAtTime=oe.getSpeedAtTime,ae.velocityAtTime=oe.getVelocityAtTime,ae.propertyGroup=oe.propertyGroup}function re(ae){(!ae||!("pv"in ae))&&(ae=ie);var oe=1/ae.mult,le=ae.pv*oe,he=new Number(le);return he.value=le,te(he,ae,"unidimensional"),function(){return ae.k&&ae.getValue(),le=ae.v*oe,he.value!==le&&(he=new Number(le),he.value=le,te(he,ae,"unidimensional")),he}}function ne(ae){(!ae||!("pv"in ae))&&(ae=ee);var oe=1/ae.mult,le=ae.data&&ae.data.l||ae.pv.length,he=createTypedArray("float32",le),ce=createTypedArray("float32",le);return he.value=ce,te(he,ae,"multidimensional"),function(){ae.k&&ae.getValue();for(var de=0;de<le;de+=1)ce[de]=ae.v[de]*oe,he[de]=ce[de];return he}}function se(){return ie}return function(ae){return ae?ae.propType==="unidimensional"?re(ae):ne(ae):se}}(),TransformExpressionInterface=function(){return function(ie){function ee(ae){switch(ae){case"scale":case"Scale":case"ADBE Scale":case 6:return ee.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return ee.rotation;case"ADBE Rotate X":return ee.xRotation;case"ADBE Rotate Y":return ee.yRotation;case"position":case"Position":case"ADBE Position":case 2:return ee.position;case"ADBE Position_0":return ee.xPosition;case"ADBE Position_1":return ee.yPosition;case"ADBE Position_2":return ee.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return ee.anchorPoint;case"opacity":case"Opacity":case 11:return ee.opacity;default:return null}}Object.defineProperty(ee,"rotation",{get:ExpressionPropertyInterface(ie.r||ie.rz)}),Object.defineProperty(ee,"zRotation",{get:ExpressionPropertyInterface(ie.rz||ie.r)}),Object.defineProperty(ee,"xRotation",{get:ExpressionPropertyInterface(ie.rx)}),Object.defineProperty(ee,"yRotation",{get:ExpressionPropertyInterface(ie.ry)}),Object.defineProperty(ee,"scale",{get:ExpressionPropertyInterface(ie.s)});var te,re,ne,se;return ie.p?se=ExpressionPropertyInterface(ie.p):(te=ExpressionPropertyInterface(ie.px),re=ExpressionPropertyInterface(ie.py),ie.pz&&(ne=ExpressionPropertyInterface(ie.pz))),Object.defineProperty(ee,"position",{get:function(){return ie.p?se():[te(),re(),ne?ne():0]}}),Object.defineProperty(ee,"xPosition",{get:ExpressionPropertyInterface(ie.px)}),Object.defineProperty(ee,"yPosition",{get:ExpressionPropertyInterface(ie.py)}),Object.defineProperty(ee,"zPosition",{get:ExpressionPropertyInterface(ie.pz)}),Object.defineProperty(ee,"anchorPoint",{get:ExpressionPropertyInterface(ie.a)}),Object.defineProperty(ee,"opacity",{get:ExpressionPropertyInterface(ie.o)}),Object.defineProperty(ee,"skew",{get:ExpressionPropertyInterface(ie.sk)}),Object.defineProperty(ee,"skewAxis",{get:ExpressionPropertyInterface(ie.sa)}),Object.defineProperty(ee,"orientation",{get:ExpressionPropertyInterface(ie.or)}),ee}}(),LayerExpressionInterface=function(){function ie(he){var ce=new Matrix;if(he!==void 0){var de=this._elem.finalTransform.mProp.getValueAtTime(he);de.clone(ce)}else{var ue=this._elem.finalTransform.mProp;ue.applyToMatrix(ce)}return ce}function ee(he,ce){var de=this.getMatrix(ce);return de.props[12]=0,de.props[13]=0,de.props[14]=0,this.applyPoint(de,he)}function te(he,ce){var de=this.getMatrix(ce);return this.applyPoint(de,he)}function re(he,ce){var de=this.getMatrix(ce);return de.props[12]=0,de.props[13]=0,de.props[14]=0,this.invertPoint(de,he)}function ne(he,ce){var de=this.getMatrix(ce);return this.invertPoint(de,he)}function se(he,ce){if(this._elem.hierarchy&&this._elem.hierarchy.length){var de,ue=this._elem.hierarchy.length;for(de=0;de<ue;de+=1)this._elem.hierarchy[de].finalTransform.mProp.applyToMatrix(he)}return he.applyToPointArray(ce[0],ce[1],ce[2]||0)}function ae(he,ce){if(this._elem.hierarchy&&this._elem.hierarchy.length){var de,ue=this._elem.hierarchy.length;for(de=0;de<ue;de+=1)this._elem.hierarchy[de].finalTransform.mProp.applyToMatrix(he)}return he.inversePoint(ce)}function oe(he){var ce=new Matrix;if(ce.reset(),this._elem.finalTransform.mProp.applyToMatrix(ce),this._elem.hierarchy&&this._elem.hierarchy.length){var de,ue=this._elem.hierarchy.length;for(de=0;de<ue;de+=1)this._elem.hierarchy[de].finalTransform.mProp.applyToMatrix(ce);return ce.inversePoint(he)}return ce.inversePoint(he)}function le(){return[1,1,1,1]}return function(he){var ce;function de(me){fe.mask=new MaskManagerInterface(me,he)}function ue(me){fe.effect=me}function fe(me){switch(me){case"ADBE Root Vectors Group":case"Contents":case 2:return fe.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return ce;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return fe.effect;case"ADBE Text Properties":return fe.textInterface;default:return null}}fe.getMatrix=ie,fe.invertPoint=ae,fe.applyPoint=se,fe.toWorld=te,fe.toWorldVec=ee,fe.fromWorld=ne,fe.fromWorldVec=re,fe.toComp=te,fe.fromComp=oe,fe.sampleImage=le,fe.sourceRectAtTime=he.sourceRectAtTime.bind(he),fe._elem=he,ce=TransformExpressionInterface(he.finalTransform.mProp);var pe=getDescriptor(ce,"anchorPoint");return Object.defineProperties(fe,{hasParent:{get:function(){return he.hierarchy.length}},parent:{get:function(){return he.hierarchy[0].layerInterface}},rotation:getDescriptor(ce,"rotation"),scale:getDescriptor(ce,"scale"),position:getDescriptor(ce,"position"),opacity:getDescriptor(ce,"opacity"),anchorPoint:pe,anchor_point:pe,transform:{get:function(){return ce}},active:{get:function(){return he.isInRange}}}),fe.startTime=he.data.st,fe.index=he.data.ind,fe.source=he.data.refId,fe.height=he.data.ty===0?he.data.h:100,fe.width=he.data.ty===0?he.data.w:100,fe.inPoint=he.data.ip/he.comp.globalData.frameRate,fe.outPoint=he.data.op/he.comp.globalData.frameRate,fe._name=he.data.nm,fe.registerMaskInterface=de,fe.registerEffectsInterface=ue,fe}}(),propertyGroupFactory=function(){return function(ie,ee){return function(te){return te=te===void 0?1:te,te<=0?ie:ee(te-1)}}}(),PropertyInterface=function(){return function(ie,ee){var te={_name:ie};function re(ne){return ne=ne===void 0?1:ne,ne<=0?te:ee(ne-1)}return re}}(),EffectsExpressionInterface=function(){var ie={createEffectsInterface:ee};function ee(ne,se){if(ne.effectsManager){var ae=[],oe=ne.data.ef,le,he=ne.effectsManager.effectElements.length;for(le=0;le<he;le+=1)ae.push(te(oe[le],ne.effectsManager.effectElements[le],se,ne));var ce=ne.data.ef||[],de=function(fe){for(le=0,he=ce.length;le<he;){if(fe===ce[le].nm||fe===ce[le].mn||fe===ce[le].ix)return ae[le];le+=1}return null};return Object.defineProperty(de,"numProperties",{get:function(){return ce.length}}),de}return null}function te(ne,se,ae,oe){function le(fe){for(var pe=ne.ef,me=0,xe=pe.length;me<xe;){if(fe===pe[me].nm||fe===pe[me].mn||fe===pe[me].ix)return pe[me].ty===5?ce[me]:ce[me]();me+=1}throw new Error}var he=propertyGroupFactory(le,ae),ce=[],de,ue=ne.ef.length;for(de=0;de<ue;de+=1)ne.ef[de].ty===5?ce.push(te(ne.ef[de],se.effectElements[de],se.effectElements[de].propertyGroup,oe)):ce.push(re(se.effectElements[de],ne.ef[de].ty,oe,he));return ne.mn==="ADBE Color Control"&&Object.defineProperty(le,"color",{get:function(){return ce[0]()}}),Object.defineProperties(le,{numProperties:{get:function(){return ne.np}},_name:{value:ne.nm},propertyGroup:{value:he}}),le.enabled=ne.en!==0,le.active=le.enabled,le}function re(ne,se,ae,oe){var le=ExpressionPropertyInterface(ne.p);function he(){return se===10?ae.comp.compInterface(ne.p.v):le()}return ne.p.setGroupProperty&&ne.p.setGroupProperty(PropertyInterface("",oe)),he}return ie}(),ShapePathInterface=function(){return function(ee,te,re){var ne=te.sh;function se(oe){return oe==="Shape"||oe==="shape"||oe==="Path"||oe==="path"||oe==="ADBE Vector Shape"||oe===2?se.path:null}var ae=propertyGroupFactory(se,re);return ne.setGroupProperty(PropertyInterface("Path",ae)),Object.defineProperties(se,{path:{get:function(){return ne.k&&ne.getValue(),ne}},shape:{get:function(){return ne.k&&ne.getValue(),ne}},_name:{value:ee.nm},ix:{value:ee.ix},propertyIndex:{value:ee.ix},mn:{value:ee.mn},propertyGroup:{value:re}}),se}}(),ShapeExpressionInterface=function(){function ie(pe,me,xe){var ge=[],_e,ve=pe?pe.length:0;for(_e=0;_e<ve;_e+=1)pe[_e].ty==="gr"?ge.push(te(pe[_e],me[_e],xe)):pe[_e].ty==="fl"?ge.push(re(pe[_e],me[_e],xe)):pe[_e].ty==="st"?ge.push(ae(pe[_e],me[_e],xe)):pe[_e].ty==="tm"?ge.push(oe(pe[_e],me[_e],xe)):pe[_e].ty==="tr"||(pe[_e].ty==="el"?ge.push(he(pe[_e],me[_e],xe)):pe[_e].ty==="sr"?ge.push(ce(pe[_e],me[_e],xe)):pe[_e].ty==="sh"?ge.push(ShapePathInterface(pe[_e],me[_e],xe)):pe[_e].ty==="rc"?ge.push(de(pe[_e],me[_e],xe)):pe[_e].ty==="rd"?ge.push(ue(pe[_e],me[_e],xe)):pe[_e].ty==="rp"?ge.push(fe(pe[_e],me[_e],xe)):pe[_e].ty==="gf"?ge.push(ne(pe[_e],me[_e],xe)):ge.push(se(pe[_e],me[_e])));return ge}function ee(pe,me,xe){var ge,_e=function(be){for(var we=0,Se=ge.length;we<Se;){if(ge[we]._name===be||ge[we].mn===be||ge[we].propertyIndex===be||ge[we].ix===be||ge[we].ind===be)return ge[we];we+=1}return typeof be=="number"?ge[be-1]:null};_e.propertyGroup=propertyGroupFactory(_e,xe),ge=ie(pe.it,me.it,_e.propertyGroup),_e.numProperties=ge.length;var ve=le(pe.it[pe.it.length-1],me.it[me.it.length-1],_e.propertyGroup);return _e.transform=ve,_e.propertyIndex=pe.cix,_e._name=pe.nm,_e}function te(pe,me,xe){var ge=function(be){switch(be){case"ADBE Vectors Group":case"Contents":case 2:return ge.content;default:return ge.transform}};ge.propertyGroup=propertyGroupFactory(ge,xe);var _e=ee(pe,me,ge.propertyGroup),ve=le(pe.it[pe.it.length-1],me.it[me.it.length-1],ge.propertyGroup);return ge.content=_e,ge.transform=ve,Object.defineProperty(ge,"_name",{get:function(){return pe.nm}}),ge.numProperties=pe.np,ge.propertyIndex=pe.ix,ge.nm=pe.nm,ge.mn=pe.mn,ge}function re(pe,me,xe){function ge(_e){return _e==="Color"||_e==="color"?ge.color:_e==="Opacity"||_e==="opacity"?ge.opacity:null}return Object.defineProperties(ge,{color:{get:ExpressionPropertyInterface(me.c)},opacity:{get:ExpressionPropertyInterface(me.o)},_name:{value:pe.nm},mn:{value:pe.mn}}),me.c.setGroupProperty(PropertyInterface("Color",xe)),me.o.setGroupProperty(PropertyInterface("Opacity",xe)),ge}function ne(pe,me,xe){function ge(_e){return _e==="Start Point"||_e==="start point"?ge.startPoint:_e==="End Point"||_e==="end point"?ge.endPoint:_e==="Opacity"||_e==="opacity"?ge.opacity:null}return Object.defineProperties(ge,{startPoint:{get:ExpressionPropertyInterface(me.s)},endPoint:{get:ExpressionPropertyInterface(me.e)},opacity:{get:ExpressionPropertyInterface(me.o)},type:{get:function(){return"a"}},_name:{value:pe.nm},mn:{value:pe.mn}}),me.s.setGroupProperty(PropertyInterface("Start Point",xe)),me.e.setGroupProperty(PropertyInterface("End Point",xe)),me.o.setGroupProperty(PropertyInterface("Opacity",xe)),ge}function se(){function pe(){return null}return pe}function ae(pe,me,xe){var ge=propertyGroupFactory(Se,xe),_e=propertyGroupFactory(we,ge);function ve(Te){Object.defineProperty(we,pe.d[Te].nm,{get:ExpressionPropertyInterface(me.d.dataProps[Te].p)})}var ye,be=pe.d?pe.d.length:0,we={};for(ye=0;ye<be;ye+=1)ve(ye),me.d.dataProps[ye].p.setGroupProperty(_e);function Se(Te){return Te==="Color"||Te==="color"?Se.color:Te==="Opacity"||Te==="opacity"?Se.opacity:Te==="Stroke Width"||Te==="stroke width"?Se.strokeWidth:null}return Object.defineProperties(Se,{color:{get:ExpressionPropertyInterface(me.c)},opacity:{get:ExpressionPropertyInterface(me.o)},strokeWidth:{get:ExpressionPropertyInterface(me.w)},dash:{get:function(){return we}},_name:{value:pe.nm},mn:{value:pe.mn}}),me.c.setGroupProperty(PropertyInterface("Color",ge)),me.o.setGroupProperty(PropertyInterface("Opacity",ge)),me.w.setGroupProperty(PropertyInterface("Stroke Width",ge)),Se}function oe(pe,me,xe){function ge(ve){return ve===pe.e.ix||ve==="End"||ve==="end"?ge.end:ve===pe.s.ix?ge.start:ve===pe.o.ix?ge.offset:null}var _e=propertyGroupFactory(ge,xe);return ge.propertyIndex=pe.ix,me.s.setGroupProperty(PropertyInterface("Start",_e)),me.e.setGroupProperty(PropertyInterface("End",_e)),me.o.setGroupProperty(PropertyInterface("Offset",_e)),ge.propertyIndex=pe.ix,ge.propertyGroup=xe,Object.defineProperties(ge,{start:{get:ExpressionPropertyInterface(me.s)},end:{get:ExpressionPropertyInterface(me.e)},offset:{get:ExpressionPropertyInterface(me.o)},_name:{value:pe.nm}}),ge.mn=pe.mn,ge}function le(pe,me,xe){function ge(ve){return pe.a.ix===ve||ve==="Anchor Point"?ge.anchorPoint:pe.o.ix===ve||ve==="Opacity"?ge.opacity:pe.p.ix===ve||ve==="Position"?ge.position:pe.r.ix===ve||ve==="Rotation"||ve==="ADBE Vector Rotation"?ge.rotation:pe.s.ix===ve||ve==="Scale"?ge.scale:pe.sk&&pe.sk.ix===ve||ve==="Skew"?ge.skew:pe.sa&&pe.sa.ix===ve||ve==="Skew Axis"?ge.skewAxis:null}var _e=propertyGroupFactory(ge,xe);return me.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",_e)),me.transform.mProps.p.setGroupProperty(PropertyInterface("Position",_e)),me.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",_e)),me.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",_e)),me.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",_e)),me.transform.mProps.sk&&(me.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",_e)),me.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",_e))),me.transform.op.setGroupProperty(PropertyInterface("Opacity",_e)),Object.defineProperties(ge,{opacity:{get:ExpressionPropertyInterface(me.transform.mProps.o)},position:{get:ExpressionPropertyInterface(me.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(me.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(me.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(me.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(me.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(me.transform.mProps.sa)},_name:{value:pe.nm}}),ge.ty="tr",ge.mn=pe.mn,ge.propertyGroup=xe,ge}function he(pe,me,xe){function ge(ye){return pe.p.ix===ye?ge.position:pe.s.ix===ye?ge.size:null}var _e=propertyGroupFactory(ge,xe);ge.propertyIndex=pe.ix;var ve=me.sh.ty==="tm"?me.sh.prop:me.sh;return ve.s.setGroupProperty(PropertyInterface("Size",_e)),ve.p.setGroupProperty(PropertyInterface("Position",_e)),Object.defineProperties(ge,{size:{get:ExpressionPropertyInterface(ve.s)},position:{get:ExpressionPropertyInterface(ve.p)},_name:{value:pe.nm}}),ge.mn=pe.mn,ge}function ce(pe,me,xe){function ge(ye){return pe.p.ix===ye?ge.position:pe.r.ix===ye?ge.rotation:pe.pt.ix===ye?ge.points:pe.or.ix===ye||ye==="ADBE Vector Star Outer Radius"?ge.outerRadius:pe.os.ix===ye?ge.outerRoundness:pe.ir&&(pe.ir.ix===ye||ye==="ADBE Vector Star Inner Radius")?ge.innerRadius:pe.is&&pe.is.ix===ye?ge.innerRoundness:null}var _e=propertyGroupFactory(ge,xe),ve=me.sh.ty==="tm"?me.sh.prop:me.sh;return ge.propertyIndex=pe.ix,ve.or.setGroupProperty(PropertyInterface("Outer Radius",_e)),ve.os.setGroupProperty(PropertyInterface("Outer Roundness",_e)),ve.pt.setGroupProperty(PropertyInterface("Points",_e)),ve.p.setGroupProperty(PropertyInterface("Position",_e)),ve.r.setGroupProperty(PropertyInterface("Rotation",_e)),pe.ir&&(ve.ir.setGroupProperty(PropertyInterface("Inner Radius",_e)),ve.is.setGroupProperty(PropertyInterface("Inner Roundness",_e))),Object.defineProperties(ge,{position:{get:ExpressionPropertyInterface(ve.p)},rotation:{get:ExpressionPropertyInterface(ve.r)},points:{get:ExpressionPropertyInterface(ve.pt)},outerRadius:{get:ExpressionPropertyInterface(ve.or)},outerRoundness:{get:ExpressionPropertyInterface(ve.os)},innerRadius:{get:ExpressionPropertyInterface(ve.ir)},innerRoundness:{get:ExpressionPropertyInterface(ve.is)},_name:{value:pe.nm}}),ge.mn=pe.mn,ge}function de(pe,me,xe){function ge(ye){return pe.p.ix===ye?ge.position:pe.r.ix===ye?ge.roundness:pe.s.ix===ye||ye==="Size"||ye==="ADBE Vector Rect Size"?ge.size:null}var _e=propertyGroupFactory(ge,xe),ve=me.sh.ty==="tm"?me.sh.prop:me.sh;return ge.propertyIndex=pe.ix,ve.p.setGroupProperty(PropertyInterface("Position",_e)),ve.s.setGroupProperty(PropertyInterface("Size",_e)),ve.r.setGroupProperty(PropertyInterface("Rotation",_e)),Object.defineProperties(ge,{position:{get:ExpressionPropertyInterface(ve.p)},roundness:{get:ExpressionPropertyInterface(ve.r)},size:{get:ExpressionPropertyInterface(ve.s)},_name:{value:pe.nm}}),ge.mn=pe.mn,ge}function ue(pe,me,xe){function ge(ye){return pe.r.ix===ye||ye==="Round Corners 1"?ge.radius:null}var _e=propertyGroupFactory(ge,xe),ve=me;return ge.propertyIndex=pe.ix,ve.rd.setGroupProperty(PropertyInterface("Radius",_e)),Object.defineProperties(ge,{radius:{get:ExpressionPropertyInterface(ve.rd)},_name:{value:pe.nm}}),ge.mn=pe.mn,ge}function fe(pe,me,xe){function ge(ye){return pe.c.ix===ye||ye==="Copies"?ge.copies:pe.o.ix===ye||ye==="Offset"?ge.offset:null}var _e=propertyGroupFactory(ge,xe),ve=me;return ge.propertyIndex=pe.ix,ve.c.setGroupProperty(PropertyInterface("Copies",_e)),ve.o.setGroupProperty(PropertyInterface("Offset",_e)),Object.defineProperties(ge,{copies:{get:ExpressionPropertyInterface(ve.c)},offset:{get:ExpressionPropertyInterface(ve.o)},_name:{value:pe.nm}}),ge.mn=pe.mn,ge}return function(pe,me,xe){var ge;function _e(ye){if(typeof ye=="number")return ye=ye===void 0?1:ye,ye===0?xe:ge[ye-1];for(var be=0,we=ge.length;be<we;){if(ge[be]._name===ye)return ge[be];be+=1}return null}function ve(){return xe}return _e.propertyGroup=propertyGroupFactory(_e,ve),ge=ie(pe,me,_e.propertyGroup),_e.numProperties=ge.length,_e._name="Contents",_e}}(),TextExpressionInterface=function(){return function(ie){var ee;function te(re){switch(re){case"ADBE Text Document":return te.sourceText;default:return null}}return Object.defineProperty(te,"sourceText",{get:function(){ie.textProperty.getValue();var ne=ie.textProperty.currentData.t;return(!ee||ne!==ee.value)&&(ee=new String(ne),ee.value=ne||new String(ne),Object.defineProperty(ee,"style",{get:function(){return{fillColor:ie.textProperty.currentData.fc}}})),ee}}),te}}();function _typeof$2(ie){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(te){return typeof te}:_typeof$2=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$2(ie)}var FootageInterface=function(){var ie=function(re){var ne="",se=re.getFootageData();function ae(){return ne="",se=re.getFootageData(),oe}function oe(le){if(se[le])return ne=le,se=se[le],_typeof$2(se)==="object"?oe:se;var he=le.indexOf(ne);if(he!==-1){var ce=parseInt(le.substr(he+ne.length),10);return se=se[ce],_typeof$2(se)==="object"?oe:se}return""}return ae},ee=function(re){function ne(se){return se==="Outline"?ne.outlineInterface():null}return ne._name="Outline",ne.outlineInterface=ie(re),ne};return function(te){function re(ne){return ne==="Data"?re.dataInterface:null}return re._name="Data",re.dataInterface=ee(te),re}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(ie){return interfaces[ie]||null}function _typeof$1(ie){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(te){return typeof te}:_typeof$1=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof$1(ie)}function seedRandom(ie,ee){var te=this,re=256,ne=6,se=52,ae="random",oe=ee.pow(re,ne),le=ee.pow(2,se),he=le*2,ce=re-1,de;function ue(ve,ye,be){var we=[];ye=ye===!0?{entropy:!0}:ye||{};var Se=xe(me(ye.entropy?[ve,_e(ie)]:ve===null?ge():ve,3),we),Te=new fe(we),Pe=function(){for(var Ce=Te.g(ne),De=oe,Re=0;Ce<le;)Ce=(Ce+Re)*re,De*=re,Re=Te.g(1);for(;Ce>=he;)Ce/=2,De/=2,Re>>>=1;return(Ce+Re)/De};return Pe.int32=function(){return Te.g(4)|0},Pe.quick=function(){return Te.g(4)/4294967296},Pe.double=Pe,xe(_e(Te.S),ie),(ye.pass||be||function(Be,Ce,De,Re){return Re&&(Re.S&&pe(Re,Te),Be.state=function(){return pe(Te,{})}),De?(ee[ae]=Be,Ce):Be})(Pe,Se,"global"in ye?ye.global:this==ee,ye.state)}ee["seed"+ae]=ue;function fe(ve){var ye,be=ve.length,we=this,Se=0,Te=we.i=we.j=0,Pe=we.S=[];for(be||(ve=[be++]);Se<re;)Pe[Se]=Se++;for(Se=0;Se<re;Se++)Pe[Se]=Pe[Te=ce&Te+ve[Se%be]+(ye=Pe[Se])],Pe[Te]=ye;we.g=function(Be){for(var Ce,De=0,Re=we.i,Le=we.j,ke=we.S;Be--;)Ce=ke[Re=ce&Re+1],De=De*re+ke[ce&(ke[Re]=ke[Le=ce&Le+Ce])+(ke[Le]=Ce)];return we.i=Re,we.j=Le,De}}function pe(ve,ye){return ye.i=ve.i,ye.j=ve.j,ye.S=ve.S.slice(),ye}function me(ve,ye){var be=[],we=_typeof$1(ve),Se;if(ye&&we=="object")for(Se in ve)try{be.push(me(ve[Se],ye-1))}catch{}return be.length?be:we=="string"?ve:ve+"\0"}function xe(ve,ye){for(var be=ve+"",we,Se=0;Se<be.length;)ye[ce&Se]=ce&(we^=ye[ce&Se]*19)+be.charCodeAt(Se++);return _e(ye)}function ge(){try{var ve=new Uint8Array(re);return(te.crypto||te.msCrypto).getRandomValues(ve),_e(ve)}catch{var ye=te.navigator,be=ye&&ye.plugins;return[+new Date,te,be,te.screen,_e(ie)]}}function _e(ve){return String.fromCharCode.apply(0,ve)}xe(ee.random(),ie)}function initialize$2(ie){seedRandom([],ie)}var propTypes={SHAPE:"shape"};function _typeof(ie){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(te){return typeof te}:_typeof=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},_typeof(ie)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;initialize$2(BMMath);function $bm_isInstanceOfArray(ie){return ie.constructor===Array||ie.constructor===Float32Array}function isNumerable(ie,ee){return ie==="number"||ie==="boolean"||ie==="string"||ee instanceof Number}function $bm_neg(ie){var ee=_typeof(ie);if(ee==="number"||ee==="boolean"||ie instanceof Number)return-ie;if($bm_isInstanceOfArray(ie)){var te,re=ie.length,ne=[];for(te=0;te<re;te+=1)ne[te]=-ie[te];return ne}return ie.propType?ie.v:-ie}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(ie,ee){var te=_typeof(ie),re=_typeof(ee);if(te==="string"||re==="string"||isNumerable(te,ie)&&isNumerable(re,ee))return ie+ee;if($bm_isInstanceOfArray(ie)&&isNumerable(re,ee))return ie=ie.slice(0),ie[0]+=ee,ie;if(isNumerable(te,ie)&&$bm_isInstanceOfArray(ee))return ee=ee.slice(0),ee[0]=ie+ee[0],ee;if($bm_isInstanceOfArray(ie)&&$bm_isInstanceOfArray(ee)){for(var ne=0,se=ie.length,ae=ee.length,oe=[];ne<se||ne<ae;)(typeof ie[ne]=="number"||ie[ne]instanceof Number)&&(typeof ee[ne]=="number"||ee[ne]instanceof Number)?oe[ne]=ie[ne]+ee[ne]:oe[ne]=ee[ne]===void 0?ie[ne]:ie[ne]||ee[ne],ne+=1;return oe}return 0}var add=sum;function sub(ie,ee){var te=_typeof(ie),re=_typeof(ee);if(isNumerable(te,ie)&&isNumerable(re,ee))return te==="string"&&(ie=parseInt(ie,10)),re==="string"&&(ee=parseInt(ee,10)),ie-ee;if($bm_isInstanceOfArray(ie)&&isNumerable(re,ee))return ie=ie.slice(0),ie[0]-=ee,ie;if(isNumerable(te,ie)&&$bm_isInstanceOfArray(ee))return ee=ee.slice(0),ee[0]=ie-ee[0],ee;if($bm_isInstanceOfArray(ie)&&$bm_isInstanceOfArray(ee)){for(var ne=0,se=ie.length,ae=ee.length,oe=[];ne<se||ne<ae;)(typeof ie[ne]=="number"||ie[ne]instanceof Number)&&(typeof ee[ne]=="number"||ee[ne]instanceof Number)?oe[ne]=ie[ne]-ee[ne]:oe[ne]=ee[ne]===void 0?ie[ne]:ie[ne]||ee[ne],ne+=1;return oe}return 0}function mul(ie,ee){var te=_typeof(ie),re=_typeof(ee),ne;if(isNumerable(te,ie)&&isNumerable(re,ee))return ie*ee;var se,ae;if($bm_isInstanceOfArray(ie)&&isNumerable(re,ee)){for(ae=ie.length,ne=createTypedArray("float32",ae),se=0;se<ae;se+=1)ne[se]=ie[se]*ee;return ne}if(isNumerable(te,ie)&&$bm_isInstanceOfArray(ee)){for(ae=ee.length,ne=createTypedArray("float32",ae),se=0;se<ae;se+=1)ne[se]=ie*ee[se];return ne}return 0}function div(ie,ee){var te=_typeof(ie),re=_typeof(ee),ne;if(isNumerable(te,ie)&&isNumerable(re,ee))return ie/ee;var se,ae;if($bm_isInstanceOfArray(ie)&&isNumerable(re,ee)){for(ae=ie.length,ne=createTypedArray("float32",ae),se=0;se<ae;se+=1)ne[se]=ie[se]/ee;return ne}if(isNumerable(te,ie)&&$bm_isInstanceOfArray(ee)){for(ae=ee.length,ne=createTypedArray("float32",ae),se=0;se<ae;se+=1)ne[se]=ie/ee[se];return ne}return 0}function mod(ie,ee){return typeof ie=="string"&&(ie=parseInt(ie,10)),typeof ee=="string"&&(ee=parseInt(ee,10)),ie%ee}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(ie,ee,te){if(ee>te){var re=te;te=ee,ee=re}return Math.min(Math.max(ie,ee),te)}function radiansToDegrees(ie){return ie/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(ie){return ie*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(ie,ee){if(typeof ie=="number"||ie instanceof Number)return ee=ee||0,Math.abs(ie-ee);ee||(ee=helperLengthArray);var te,re=Math.min(ie.length,ee.length),ne=0;for(te=0;te<re;te+=1)ne+=Math.pow(ee[te]-ie[te],2);return Math.sqrt(ne)}function normalize(ie){return div(ie,length(ie))}function rgbToHsl(ie){var ee=ie[0],te=ie[1],re=ie[2],ne=Math.max(ee,te,re),se=Math.min(ee,te,re),ae,oe,le=(ne+se)/2;if(ne===se)ae=0,oe=0;else{var he=ne-se;switch(oe=le>.5?he/(2-ne-se):he/(ne+se),ne){case ee:ae=(te-re)/he+(te<re?6:0);break;case te:ae=(re-ee)/he+2;break;case re:ae=(ee-te)/he+4;break}ae/=6}return[ae,oe,le,ie[3]]}function hue2rgb(ie,ee,te){return te<0&&(te+=1),te>1&&(te-=1),te<1/6?ie+(ee-ie)*6*te:te<1/2?ee:te<2/3?ie+(ee-ie)*(2/3-te)*6:ie}function hslToRgb(ie){var ee=ie[0],te=ie[1],re=ie[2],ne,se,ae;if(te===0)ne=re,ae=re,se=re;else{var oe=re<.5?re*(1+te):re+te-re*te,le=2*re-oe;ne=hue2rgb(le,oe,ee+1/3),se=hue2rgb(le,oe,ee),ae=hue2rgb(le,oe,ee-1/3)}return[ne,se,ae,ie[3]]}function linear(ie,ee,te,re,ne){if((re===void 0||ne===void 0)&&(re=ee,ne=te,ee=0,te=1),te<ee){var se=te;te=ee,ee=se}if(ie<=ee)return re;if(ie>=te)return ne;var ae=te===ee?0:(ie-ee)/(te-ee);if(!re.length)return re+(ne-re)*ae;var oe,le=re.length,he=createTypedArray("float32",le);for(oe=0;oe<le;oe+=1)he[oe]=re[oe]+(ne[oe]-re[oe])*ae;return he}function random(ie,ee){if(ee===void 0&&(ie===void 0?(ie=0,ee=1):(ee=ie,ie=void 0)),ee.length){var te,re=ee.length;ie||(ie=createTypedArray("float32",re));var ne=createTypedArray("float32",re),se=BMMath.random();for(te=0;te<re;te+=1)ne[te]=ie[te]+se*(ee[te]-ie[te]);return ne}ie===void 0&&(ie=0);var ae=BMMath.random();return ie+ae*(ee-ie)}function createPath(ie,ee,te,re){var ne,se=ie.length,ae=shapePool.newElement();ae.setPathData(!!re,se);var oe=[0,0],le,he;for(ne=0;ne<se;ne+=1)le=ee&&ee[ne]?ee[ne]:oe,he=te&&te[ne]?te[ne]:oe,ae.setTripleAt(ie[ne][0],ie[ne][1],he[0]+ie[ne][0],he[1]+ie[ne][1],le[0]+ie[ne][0],le[1]+ie[ne][1],ne,!0);return ae}function initiateExpression(elem,data,property){function noOp(ie){return ie}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function ie(ee,te){var re,ne,se=this.pv.length?this.pv.length:1,ae=createTypedArray("float32",se);ee=5;var oe=Math.floor(time*ee);for(re=0,ne=0;re<oe;){for(ne=0;ne<se;ne+=1)ae[ne]+=-te+te*2*BMMath.random();re+=1}var le=time*ee,he=le-Math.floor(le),ce=createTypedArray("float32",se);if(se>1){for(ne=0;ne<se;ne+=1)ce[ne]=this.pv[ne]+ae[ne]+(-te+te*2*BMMath.random())*he;return ce}return this.pv+ae[0]+(-te+te*2*BMMath.random())*he}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(ie,ee){return loopIn(ie,ee,!0)}function loopOutDuration(ie,ee){return loopOut(ie,ee,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(ie,ee){var te=[ee[0]-ie[0],ee[1]-ie[1],ee[2]-ie[2]],re=Math.atan2(te[0],Math.sqrt(te[1]*te[1]+te[2]*te[2]))/degToRads,ne=-Math.atan2(te[1],te[2])/degToRads;return[ne,re,0]}function easeOut(ie,ee,te,re,ne){return applyEase(easeOutBez,ie,ee,te,re,ne)}function easeIn(ie,ee,te,re,ne){return applyEase(easeInBez,ie,ee,te,re,ne)}function ease(ie,ee,te,re,ne){return applyEase(easeInOutBez,ie,ee,te,re,ne)}function applyEase(ie,ee,te,re,ne,se){ne===void 0?(ne=te,se=re):ee=(ee-te)/(re-te),ee>1?ee=1:ee<0&&(ee=0);var ae=ie(ee);if($bm_isInstanceOfArray(ne)){var oe,le=ne.length,he=createTypedArray("float32",le);for(oe=0;oe<le;oe+=1)he[oe]=(se[oe]-ne[oe])*ae+ne[oe];return he}return(se-ne)*ae+ne}function nearestKey(ie){var ee,te=data.k.length,re,ne;if(!data.k.length||typeof data.k[0]=="number")re=0,ne=0;else if(re=-1,ie*=elem.comp.globalData.frameRate,ie<data.k[0].t)re=1,ne=data.k[0].t;else{for(ee=0;ee<te-1;ee+=1)if(ie===data.k[ee].t){re=ee+1,ne=data.k[ee].t;break}else if(ie>data.k[ee].t&&ie<data.k[ee+1].t){ie-data.k[ee].t>data.k[ee+1].t-ie?(re=ee+2,ne=data.k[ee+1].t):(re=ee+1,ne=data.k[ee].t);break}re===-1&&(re=ee+1,ne=data.k[ee].t)}var se={};return se.index=re,se.time=ne/elem.comp.globalData.frameRate,se}function key(ie){var ee,te,re;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+ie);ie-=1,ee={time:data.k[ie].t/elem.comp.globalData.frameRate,value:[]};var ne=Object.prototype.hasOwnProperty.call(data.k[ie],"s")?data.k[ie].s:data.k[ie-1].e;for(re=ne.length,te=0;te<re;te+=1)ee[te]=ne[te],ee.value[te]=ne[te];return ee}function framesToTime(ie,ee){return ee||(ee=elem.comp.globalData.frameRate),ie/ee}function timeToFrames(ie,ee){return!ie&&ie!==0&&(ie=time),ee||(ee=elem.comp.globalData.frameRate),ie*ee}function seedRandom(ie){BMMath.seedrandom(randSeed+ie)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(ie,ee){return typeof value=="string"?ee===void 0?value.substring(ie):value.substring(ie,ee):""}function substr(ie,ee){return typeof value=="string"?ee===void 0?value.substr(ie):value.substr(ie,ee):""}function posterizeTime(ie){time=ie===0?0:Math.floor(time*ie)/ie,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(ie){return value=ie,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers=function(){function ie(ae,oe,le){oe.x&&(le.k=!0,le.x=!0,le.initiateExpression=ExpressionManager.initiateExpression,le.effectsSequence.push(le.initiateExpression(ae,oe,le).bind(le)))}function ee(ae){return ae*=this.elem.globalData.frameRate,ae-=this.offsetTime,ae!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<ae?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(ae,this._cachingAtTime),this._cachingAtTime.lastFrame=ae),this._cachingAtTime.value}function te(ae){var oe=-.01,le=this.getValueAtTime(ae),he=this.getValueAtTime(ae+oe),ce=0;if(le.length){var de;for(de=0;de<le.length;de+=1)ce+=Math.pow(he[de]-le[de],2);ce=Math.sqrt(ce)*100}else ce=0;return ce}function re(ae){if(this.vel!==void 0)return this.vel;var oe=-.001,le=this.getValueAtTime(ae),he=this.getValueAtTime(ae+oe),ce;if(le.length){ce=createTypedArray("float32",le.length);var de;for(de=0;de<le.length;de+=1)ce[de]=(he[de]-le[de])/oe}else ce=(he-le)/oe;return ce}function ne(){return this.pv}function se(ae){this.propertyGroup=ae}return{searchExpressions:ie,getSpeedAtTime:te,getVelocityAtTime:re,getValueAtTime:ee,getStaticValueAtTime:ne,setGroupProperty:se}}();function addPropertyDecorator(){function ie(ue,fe,pe){if(!this.k||!this.keyframes)return this.pv;ue=ue?ue.toLowerCase():"";var me=this.comp.renderedFrame,xe=this.keyframes,ge=xe[xe.length-1].t;if(me<=ge)return this.pv;var _e,ve;pe?(fe?_e=Math.abs(ge-this.elem.comp.globalData.frameRate*fe):_e=Math.max(0,ge-this.elem.data.ip),ve=ge-_e):((!fe||fe>xe.length-1)&&(fe=xe.length-1),ve=xe[xe.length-1-fe].t,_e=ge-ve);var ye,be,we;if(ue==="pingpong"){var Se=Math.floor((me-ve)/_e);if(Se%2!==0)return this.getValueAtTime((_e-(me-ve)%_e+ve)/this.comp.globalData.frameRate,0)}else if(ue==="offset"){var Te=this.getValueAtTime(ve/this.comp.globalData.frameRate,0),Pe=this.getValueAtTime(ge/this.comp.globalData.frameRate,0),Be=this.getValueAtTime(((me-ve)%_e+ve)/this.comp.globalData.frameRate,0),Ce=Math.floor((me-ve)/_e);if(this.pv.length){for(we=new Array(Te.length),be=we.length,ye=0;ye<be;ye+=1)we[ye]=(Pe[ye]-Te[ye])*Ce+Be[ye];return we}return(Pe-Te)*Ce+Be}else if(ue==="continue"){var De=this.getValueAtTime(ge/this.comp.globalData.frameRate,0),Re=this.getValueAtTime((ge-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(we=new Array(De.length),be=we.length,ye=0;ye<be;ye+=1)we[ye]=De[ye]+(De[ye]-Re[ye])*((me-ge)/this.comp.globalData.frameRate)/5e-4;return we}return De+(De-Re)*((me-ge)/.001)}return this.getValueAtTime(((me-ve)%_e+ve)/this.comp.globalData.frameRate,0)}function ee(ue,fe,pe){if(!this.k)return this.pv;ue=ue?ue.toLowerCase():"";var me=this.comp.renderedFrame,xe=this.keyframes,ge=xe[0].t;if(me>=ge)return this.pv;var _e,ve;pe?(fe?_e=Math.abs(this.elem.comp.globalData.frameRate*fe):_e=Math.max(0,this.elem.data.op-ge),ve=ge+_e):((!fe||fe>xe.length-1)&&(fe=xe.length-1),ve=xe[fe].t,_e=ve-ge);var ye,be,we;if(ue==="pingpong"){var Se=Math.floor((ge-me)/_e);if(Se%2===0)return this.getValueAtTime(((ge-me)%_e+ge)/this.comp.globalData.frameRate,0)}else if(ue==="offset"){var Te=this.getValueAtTime(ge/this.comp.globalData.frameRate,0),Pe=this.getValueAtTime(ve/this.comp.globalData.frameRate,0),Be=this.getValueAtTime((_e-(ge-me)%_e+ge)/this.comp.globalData.frameRate,0),Ce=Math.floor((ge-me)/_e)+1;if(this.pv.length){for(we=new Array(Te.length),be=we.length,ye=0;ye<be;ye+=1)we[ye]=Be[ye]-(Pe[ye]-Te[ye])*Ce;return we}return Be-(Pe-Te)*Ce}else if(ue==="continue"){var De=this.getValueAtTime(ge/this.comp.globalData.frameRate,0),Re=this.getValueAtTime((ge+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(we=new Array(De.length),be=we.length,ye=0;ye<be;ye+=1)we[ye]=De[ye]+(De[ye]-Re[ye])*(ge-me)/.001;return we}return De+(De-Re)*(ge-me)/.001}return this.getValueAtTime((_e-((ge-me)%_e+ge))/this.comp.globalData.frameRate,0)}function te(ue,fe){if(!this.k)return this.pv;if(ue=(ue||.4)*.5,fe=Math.floor(fe||5),fe<=1)return this.pv;var pe=this.comp.renderedFrame/this.comp.globalData.frameRate,me=pe-ue,xe=pe+ue,ge=fe>1?(xe-me)/(fe-1):1,_e=0,ve=0,ye;this.pv.length?ye=createTypedArray("float32",this.pv.length):ye=0;for(var be;_e<fe;){if(be=this.getValueAtTime(me+_e*ge),this.pv.length)for(ve=0;ve<this.pv.length;ve+=1)ye[ve]+=be[ve];else ye+=be;_e+=1}if(this.pv.length)for(ve=0;ve<this.pv.length;ve+=1)ye[ve]/=fe;else ye/=fe;return ye}function re(ue){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var fe=this._transformCachingAtTime.v;if(fe.cloneFromProps(this.pre.props),this.appliedTransformations<1){var pe=this.a.getValueAtTime(ue);fe.translate(-pe[0]*this.a.mult,-pe[1]*this.a.mult,pe[2]*this.a.mult)}if(this.appliedTransformations<2){var me=this.s.getValueAtTime(ue);fe.scale(me[0]*this.s.mult,me[1]*this.s.mult,me[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var xe=this.sk.getValueAtTime(ue),ge=this.sa.getValueAtTime(ue);fe.skewFromAxis(-xe*this.sk.mult,ge*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var _e=this.r.getValueAtTime(ue);fe.rotate(-_e*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var ve=this.rz.getValueAtTime(ue),ye=this.ry.getValueAtTime(ue),be=this.rx.getValueAtTime(ue),we=this.or.getValueAtTime(ue);fe.rotateZ(-ve*this.rz.mult).rotateY(ye*this.ry.mult).rotateX(be*this.rx.mult).rotateZ(-we[2]*this.or.mult).rotateY(we[1]*this.or.mult).rotateX(we[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Se=this.px.getValueAtTime(ue),Te=this.py.getValueAtTime(ue);if(this.data.p.z){var Pe=this.pz.getValueAtTime(ue);fe.translate(Se*this.px.mult,Te*this.py.mult,-Pe*this.pz.mult)}else fe.translate(Se*this.px.mult,Te*this.py.mult,0)}else{var Be=this.p.getValueAtTime(ue);fe.translate(Be[0]*this.p.mult,Be[1]*this.p.mult,-Be[2]*this.p.mult)}return fe}function ne(){return this.v.clone(new Matrix)}var se=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(ue,fe,pe){var me=se(ue,fe,pe);return me.dynamicProperties.length?me.getValueAtTime=re.bind(me):me.getValueAtTime=ne.bind(me),me.setGroupProperty=expressionHelpers.setGroupProperty,me};var ae=PropertyFactory.getProp;PropertyFactory.getProp=function(ue,fe,pe,me,xe){var ge=ae(ue,fe,pe,me,xe);ge.kf?ge.getValueAtTime=expressionHelpers.getValueAtTime.bind(ge):ge.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(ge),ge.setGroupProperty=expressionHelpers.setGroupProperty,ge.loopOut=ie,ge.loopIn=ee,ge.smooth=te,ge.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(ge),ge.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(ge),ge.numKeys=fe.a===1?fe.k.length:0,ge.propertyIndex=fe.ix;var _e=0;return pe!==0&&(_e=createTypedArray("float32",fe.a===1?fe.k[0].s.length:fe.k.length)),ge._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:_e},expressionHelpers.searchExpressions(ue,fe,ge),ge.k&&xe.addDynamicProperty(ge),ge};function oe(ue){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),ue*=this.elem.globalData.frameRate,ue-=this.offsetTime,ue!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<ue?this._caching.lastIndex:0,this._cachingAtTime.lastTime=ue,this.interpolateShape(ue,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var le=ShapePropertyFactory.getConstructorFunction(),he=ShapePropertyFactory.getKeyframedConstructorFunction();function ce(){}ce.prototype={vertices:function(fe,pe){this.k&&this.getValue();var me=this.v;pe!==void 0&&(me=this.getValueAtTime(pe,0));var xe,ge=me._length,_e=me[fe],ve=me.v,ye=createSizedArray(ge);for(xe=0;xe<ge;xe+=1)fe==="i"||fe==="o"?ye[xe]=[_e[xe][0]-ve[xe][0],_e[xe][1]-ve[xe][1]]:ye[xe]=[_e[xe][0],_e[xe][1]];return ye},points:function(fe){return this.vertices("v",fe)},inTangents:function(fe){return this.vertices("i",fe)},outTangents:function(fe){return this.vertices("o",fe)},isClosed:function(){return this.v.c},pointOnPath:function(fe,pe){var me=this.v;pe!==void 0&&(me=this.getValueAtTime(pe,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(me));for(var xe=this._segmentsLength,ge=xe.lengths,_e=xe.totalLength*fe,ve=0,ye=ge.length,be=0,we;ve<ye;){if(be+ge[ve].addedLength>_e){var Se=ve,Te=me.c&&ve===ye-1?0:ve+1,Pe=(_e-be)/ge[ve].addedLength;we=bez.getPointInSegment(me.v[Se],me.v[Te],me.o[Se],me.i[Te],Pe,ge[ve]);break}else be+=ge[ve].addedLength;ve+=1}return we||(we=me.c?[me.v[0][0],me.v[0][1]]:[me.v[me._length-1][0],me.v[me._length-1][1]]),we},vectorOnPath:function(fe,pe,me){fe==1?fe=this.v.c:fe==0&&(fe=.999);var xe=this.pointOnPath(fe,pe),ge=this.pointOnPath(fe+.001,pe),_e=ge[0]-xe[0],ve=ge[1]-xe[1],ye=Math.sqrt(Math.pow(_e,2)+Math.pow(ve,2));if(ye===0)return[0,0];var be=me==="tangent"?[_e/ye,ve/ye]:[-ve/ye,_e/ye];return be},tangentOnPath:function(fe,pe){return this.vectorOnPath(fe,pe,"tangent")},normalOnPath:function(fe,pe){return this.vectorOnPath(fe,pe,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([ce],le),extendPrototype([ce],he),he.prototype.getValueAtTime=oe,he.prototype.initiateExpression=ExpressionManager.initiateExpression;var de=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(ue,fe,pe,me,xe){var ge=de(ue,fe,pe,me,xe);return ge.propertyIndex=fe.ix,ge.lock=!1,pe===3?expressionHelpers.searchExpressions(ue,fe.pt,ge):pe===4&&expressionHelpers.searchExpressions(ue,fe.ks,ge),ge.k&&ue.addDynamicProperty(ge),ge}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function ie(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(ee,te){var re=this.calculateExpression(te);if(ee.t!==re){var ne={};return this.copyData(ne,ee),ne.t=re.toString(),ne.__complete=!1,ne}return ee},TextProperty.prototype.searchProperty=function(){var ee=this.searchKeyframes(),te=this.searchExpressions();return this.kf=ee||te,this.kf},TextProperty.prototype.searchExpressions=ie}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function ie(ee,te){var re=createNS("feMerge");re.setAttribute("result",ee);var ne,se;for(se=0;se<te.length;se+=1)ne=createNS("feMergeNode"),ne.setAttribute("in",te[se]),re.appendChild(ne),re.appendChild(ne);return re}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(ie,ee,te,re,ne){this.filterManager=ee;var se=createNS("feColorMatrix");se.setAttribute("type","matrix"),se.setAttribute("color-interpolation-filters","linearRGB"),se.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=se,se.setAttribute("result",re+"_tint_1"),ie.appendChild(se),se=createNS("feColorMatrix"),se.setAttribute("type","matrix"),se.setAttribute("color-interpolation-filters","sRGB"),se.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),se.setAttribute("result",re+"_tint_2"),ie.appendChild(se),this.matrixFilter=se;var ae=this.createMergeNode(re,[ne,re+"_tint_1",re+"_tint_2"]);ie.appendChild(ae)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){var ee=this.filterManager.effectElements[0].p.v,te=this.filterManager.effectElements[1].p.v,re=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+re+" 0"),this.matrixFilter.setAttribute("values",te[0]-ee[0]+" 0 0 0 "+ee[0]+" "+(te[1]-ee[1])+" 0 0 0 "+ee[1]+" "+(te[2]-ee[2])+" 0 0 0 "+ee[2]+" 0 0 0 1 0")}};function SVGFillFilter(ie,ee,te,re){this.filterManager=ee;var ne=createNS("feColorMatrix");ne.setAttribute("type","matrix"),ne.setAttribute("color-interpolation-filters","sRGB"),ne.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ne.setAttribute("result",re),ie.appendChild(ne),this.matrixFilter=ne}SVGFillFilter.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){var ee=this.filterManager.effectElements[2].p.v,te=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+ee[0]+" 0 0 0 0 "+ee[1]+" 0 0 0 0 "+ee[2]+" 0 0 0 "+te+" 0")}};function SVGStrokeEffect(ie,ee,te){this.initialized=!1,this.filterManager=ee,this.elem=te,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var ie=this.elem.layerElement.children||this.elem.layerElement.childNodes,ee,te,re,ne;for(this.filterManager.effectElements[1].p.v===1?(ne=this.elem.maskManager.masksProperties.length,re=0):(re=this.filterManager.effectElements[0].p.v-1,ne=re+1),te=createNS("g"),te.setAttribute("fill","none"),te.setAttribute("stroke-linecap","round"),te.setAttribute("stroke-dashoffset",1),re;re<ne;re+=1)ee=createNS("path"),te.appendChild(ee),this.paths.push({p:ee,m:re});if(this.filterManager.effectElements[10].p.v===3){var se=createNS("mask"),ae=createElementID();se.setAttribute("id",ae),se.setAttribute("mask-type","alpha"),se.appendChild(te),this.elem.globalData.defs.appendChild(se);var oe=createNS("g");for(oe.setAttribute("mask","url("+getLocationHref()+"#"+ae+")");ie[0];)oe.appendChild(ie[0]);this.elem.layerElement.appendChild(oe),this.masker=se,te.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(ie=this.elem.layerElement.children||this.elem.layerElement.childNodes;ie.length;)this.elem.layerElement.removeChild(ie[0]);this.elem.layerElement.appendChild(te),this.elem.layerElement.removeAttribute("mask"),te.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=te},SVGStrokeEffect.prototype.renderFrame=function(ie){this.initialized||this.initialize();var ee,te=this.paths.length,re,ne;for(ee=0;ee<te;ee+=1)if(this.paths[ee].m!==-1&&(re=this.elem.maskManager.viewData[this.paths[ee].m],ne=this.paths[ee].p,(ie||this.filterManager._mdf||re.prop._mdf)&&ne.setAttribute("d",re.lastPath),ie||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||re.prop._mdf)){var se;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var ae=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,oe=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,le=ne.getTotalLength();se="0 0 0 "+le*ae+" ";var he=le*(oe-ae),ce=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,de=Math.floor(he/ce),ue;for(ue=0;ue<de;ue+=1)se+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";se+="0 "+le*10+" 0 0"}else se="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;ne.setAttribute("stroke-dasharray",se)}if((ie||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(ie||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(ie||this.filterManager.effectElements[3].p._mdf)){var fe=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(fe[0]*255)+","+bmFloor(fe[1]*255)+","+bmFloor(fe[2]*255)+")")}};function SVGTritoneFilter(ie,ee,te,re){this.filterManager=ee;var ne=createNS("feColorMatrix");ne.setAttribute("type","matrix"),ne.setAttribute("color-interpolation-filters","linearRGB"),ne.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),ie.appendChild(ne);var se=createNS("feComponentTransfer");se.setAttribute("color-interpolation-filters","sRGB"),se.setAttribute("result",re),this.matrixFilter=se;var ae=createNS("feFuncR");ae.setAttribute("type","table"),se.appendChild(ae),this.feFuncR=ae;var oe=createNS("feFuncG");oe.setAttribute("type","table"),se.appendChild(oe),this.feFuncG=oe;var le=createNS("feFuncB");le.setAttribute("type","table"),se.appendChild(le),this.feFuncB=le,ie.appendChild(se)}SVGTritoneFilter.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){var ee=this.filterManager.effectElements[0].p.v,te=this.filterManager.effectElements[1].p.v,re=this.filterManager.effectElements[2].p.v,ne=re[0]+" "+te[0]+" "+ee[0],se=re[1]+" "+te[1]+" "+ee[1],ae=re[2]+" "+te[2]+" "+ee[2];this.feFuncR.setAttribute("tableValues",ne),this.feFuncG.setAttribute("tableValues",se),this.feFuncB.setAttribute("tableValues",ae)}};function SVGProLevelsFilter(ie,ee,te,re){this.filterManager=ee;var ne=this.filterManager.effectElements,se=createNS("feComponentTransfer");(ne[10].p.k||ne[10].p.v!==0||ne[11].p.k||ne[11].p.v!==1||ne[12].p.k||ne[12].p.v!==1||ne[13].p.k||ne[13].p.v!==0||ne[14].p.k||ne[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",se)),(ne[17].p.k||ne[17].p.v!==0||ne[18].p.k||ne[18].p.v!==1||ne[19].p.k||ne[19].p.v!==1||ne[20].p.k||ne[20].p.v!==0||ne[21].p.k||ne[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",se)),(ne[24].p.k||ne[24].p.v!==0||ne[25].p.k||ne[25].p.v!==1||ne[26].p.k||ne[26].p.v!==1||ne[27].p.k||ne[27].p.v!==0||ne[28].p.k||ne[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",se)),(ne[31].p.k||ne[31].p.v!==0||ne[32].p.k||ne[32].p.v!==1||ne[33].p.k||ne[33].p.v!==1||ne[34].p.k||ne[34].p.v!==0||ne[35].p.k||ne[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",se)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(se.setAttribute("color-interpolation-filters","sRGB"),ie.appendChild(se)),(ne[3].p.k||ne[3].p.v!==0||ne[4].p.k||ne[4].p.v!==1||ne[5].p.k||ne[5].p.v!==1||ne[6].p.k||ne[6].p.v!==0||ne[7].p.k||ne[7].p.v!==1)&&(se=createNS("feComponentTransfer"),se.setAttribute("color-interpolation-filters","sRGB"),se.setAttribute("result",re),ie.appendChild(se),this.feFuncRComposed=this.createFeFunc("feFuncR",se),this.feFuncGComposed=this.createFeFunc("feFuncG",se),this.feFuncBComposed=this.createFeFunc("feFuncB",se))}SVGProLevelsFilter.prototype.createFeFunc=function(ie,ee){var te=createNS(ie);return te.setAttribute("type","table"),ee.appendChild(te),te},SVGProLevelsFilter.prototype.getTableValue=function(ie,ee,te,re,ne){for(var se=0,ae=256,oe,le=Math.min(ie,ee),he=Math.max(ie,ee),ce=Array.call(null,{length:ae}),de,ue=0,fe=ne-re,pe=ee-ie;se<=256;)oe=se/256,oe<=le?de=pe<0?ne:re:oe>=he?de=pe<0?re:ne:de=re+fe*Math.pow((oe-ie)/pe,1/te),ce[ue]=de,ue+=1,se+=256/(ae-1);return ce.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){var ee,te=this.filterManager.effectElements;this.feFuncRComposed&&(ie||te[3].p._mdf||te[4].p._mdf||te[5].p._mdf||te[6].p._mdf||te[7].p._mdf)&&(ee=this.getTableValue(te[3].p.v,te[4].p.v,te[5].p.v,te[6].p.v,te[7].p.v),this.feFuncRComposed.setAttribute("tableValues",ee),this.feFuncGComposed.setAttribute("tableValues",ee),this.feFuncBComposed.setAttribute("tableValues",ee)),this.feFuncR&&(ie||te[10].p._mdf||te[11].p._mdf||te[12].p._mdf||te[13].p._mdf||te[14].p._mdf)&&(ee=this.getTableValue(te[10].p.v,te[11].p.v,te[12].p.v,te[13].p.v,te[14].p.v),this.feFuncR.setAttribute("tableValues",ee)),this.feFuncG&&(ie||te[17].p._mdf||te[18].p._mdf||te[19].p._mdf||te[20].p._mdf||te[21].p._mdf)&&(ee=this.getTableValue(te[17].p.v,te[18].p.v,te[19].p.v,te[20].p.v,te[21].p.v),this.feFuncG.setAttribute("tableValues",ee)),this.feFuncB&&(ie||te[24].p._mdf||te[25].p._mdf||te[26].p._mdf||te[27].p._mdf||te[28].p._mdf)&&(ee=this.getTableValue(te[24].p.v,te[25].p.v,te[26].p.v,te[27].p.v,te[28].p.v),this.feFuncB.setAttribute("tableValues",ee)),this.feFuncA&&(ie||te[31].p._mdf||te[32].p._mdf||te[33].p._mdf||te[34].p._mdf||te[35].p._mdf)&&(ee=this.getTableValue(te[31].p.v,te[32].p.v,te[33].p.v,te[34].p.v,te[35].p.v),this.feFuncA.setAttribute("tableValues",ee))}};function SVGDropShadowEffect(ie,ee,te,re,ne){var se=ee.container.globalData.renderConfig.filterSize,ae=ee.data.fs||se;ie.setAttribute("x",ae.x||se.x),ie.setAttribute("y",ae.y||se.y),ie.setAttribute("width",ae.width||se.width),ie.setAttribute("height",ae.height||se.height),this.filterManager=ee;var oe=createNS("feGaussianBlur");oe.setAttribute("in","SourceAlpha"),oe.setAttribute("result",re+"_drop_shadow_1"),oe.setAttribute("stdDeviation","0"),this.feGaussianBlur=oe,ie.appendChild(oe);var le=createNS("feOffset");le.setAttribute("dx","25"),le.setAttribute("dy","0"),le.setAttribute("in",re+"_drop_shadow_1"),le.setAttribute("result",re+"_drop_shadow_2"),this.feOffset=le,ie.appendChild(le);var he=createNS("feFlood");he.setAttribute("flood-color","#00ff00"),he.setAttribute("flood-opacity","1"),he.setAttribute("result",re+"_drop_shadow_3"),this.feFlood=he,ie.appendChild(he);var ce=createNS("feComposite");ce.setAttribute("in",re+"_drop_shadow_3"),ce.setAttribute("in2",re+"_drop_shadow_2"),ce.setAttribute("operator","in"),ce.setAttribute("result",re+"_drop_shadow_4"),ie.appendChild(ce);var de=this.createMergeNode(re,[re+"_drop_shadow_4",ne]);ie.appendChild(de)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){if((ie||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),ie||this.filterManager.effectElements[0].p._mdf){var ee=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(ee[0]*255),Math.round(ee[1]*255),Math.round(ee[2]*255)))}if((ie||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),ie||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var te=this.filterManager.effectElements[3].p.v,re=(this.filterManager.effectElements[2].p.v-90)*degToRads,ne=te*Math.cos(re),se=te*Math.sin(re);this.feOffset.setAttribute("dx",ne),this.feOffset.setAttribute("dy",se)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(ie,ee,te){this.initialized=!1,this.filterManager=ee,this.filterElem=ie,this.elem=te,te.matteElement=createNS("g"),te.matteElement.appendChild(te.layerElement),te.matteElement.appendChild(te.transformedElement),te.baseElement=te.matteElement}SVGMatte3Effect.prototype.findSymbol=function(ie){for(var ee=0,te=_svgMatteSymbols.length;ee<te;){if(_svgMatteSymbols[ee]===ie)return _svgMatteSymbols[ee];ee+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(ie,ee){var te=ie.layerElement.parentNode;if(!!te){for(var re=te.children,ne=0,se=re.length;ne<se&&re[ne]!==ie.layerElement;)ne+=1;var ae;ne<=se-2&&(ae=re[ne+1]);var oe=createNS("use");oe.setAttribute("href","#"+ee),ae?te.insertBefore(oe,ae):te.appendChild(oe)}},SVGMatte3Effect.prototype.setElementAsMask=function(ie,ee){if(!this.findSymbol(ee)){var te=createElementID(),re=createNS("mask");re.setAttribute("id",ee.layerId),re.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(ee);var ne=ie.globalData.defs;ne.appendChild(re);var se=createNS("symbol");se.setAttribute("id",te),this.replaceInParent(ee,te),se.appendChild(ee.layerElement),ne.appendChild(se);var ae=createNS("use");ae.setAttribute("href","#"+te),re.appendChild(ae),ee.data.hd=!1,ee.show()}ie.setMatte(ee.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var ie=this.filterManager.effectElements[0].p.v,ee=this.elem.comp.elements,te=0,re=ee.length;te<re;)ee[te]&&ee[te].data.ind===ie&&this.setElementAsMask(this.elem,ee[te]),te+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(ie,ee,te,re){ie.setAttribute("x","-100%"),ie.setAttribute("y","-100%"),ie.setAttribute("width","300%"),ie.setAttribute("height","300%"),this.filterManager=ee;var ne=createNS("feGaussianBlur");ne.setAttribute("result",re),ie.appendChild(ne),this.feGaussianBlur=ne}return SVGGaussianBlurEffect.prototype.renderFrame=function(ie){if(ie||this.filterManager._mdf){var ee=.3,te=this.filterManager.effectElements[0].p.v*ee,re=this.filterManager.effectElements[1].p.v,ne=re==3?0:te,se=re==2?0:te;this.feGaussianBlur.setAttribute("stdDeviation",ne+" "+se);var ae=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",ae)}},registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie})})(lottie,lottie.exports);var Lottie=lottie.exports;gsapWithCSS.registerPlugin(ScrollTrigger);class Footer{constructor(){let ee=$(".footer"),te={frame:0},re=Lottie.loadAnimation({container:document.querySelector(".footer__signature"),renderer:"svg",loop:!1,autoplay:!1,path:"https://uploads-ssl.webflow.com/644918964e907d2eeb9e57a0/6450bf2d08974b7254f134be_Signature.json"}),ne=gsapWithCSS.timeline({paused:!0});re.addEventListener("DOMLoaded",function(){ne.to(te,{frame:re.totalFrames-1,ease:"none",onUpdate:()=>re.goToAndStop(te.frame,!0),duration:2})}),ScrollTrigger.create({trigger:ee,start:"top bottom",end:"bottom bottom",onEnter:()=>ne.play()})}}gsapWithCSS.registerPlugin(ScrollTrigger);class ScrollParallax{constructor(){$("[scroll-from]").each((ne,se)=>{let ae=$(se),oe=ae.attr("scroll-from");gsapWithCSS.timeline({scrollTrigger:{trigger:ae,start:"top bottom",end:"bottom top",scrub:1}}).fromTo(ae,{yPercent:oe},{yPercent:0,ease:"none"},0)}),$("[scroll-to]").each((ne,se)=>{let ae=$(se),oe=ae.attr("scroll-to");gsapWithCSS.timeline({scrollTrigger:{trigger:ae,start:"top bottom",end:"bottom top",scrub:1}}).fromTo(ae,{yPercent:0},{yPercent:oe,ease:"none"},0)}),$("[scroll-from-to]").each((ne,se)=>{let ae=$(se),oe=ae.attr("scroll-from-to");gsapWithCSS.timeline({scrollTrigger:{trigger:ae,start:"top bottom",end:"bottom top",scrub:1}}).fromTo(ae,{yPercent:0-oe},{yPercent:oe,ease:"none"},0)})}}gsapWithCSS.registerPlugin(ScrollTrigger);class Batch$1{constructor(){let ee=$(".clients__item").find("img");ScrollTrigger.batch(ee,{start:"top 90%",onEnter:te=>gsapWithCSS.to(te,{opacity:1,y:0,stagger:.1,duration:1.4})})}}var ENV=(ie=>(ie[ie.WEBGL_LEGACY=0]="WEBGL_LEGACY",ie[ie.WEBGL=1]="WEBGL",ie[ie.WEBGL2=2]="WEBGL2",ie))(ENV||{}),RENDERER_TYPE=(ie=>(ie[ie.UNKNOWN=0]="UNKNOWN",ie[ie.WEBGL=1]="WEBGL",ie[ie.CANVAS=2]="CANVAS",ie))(RENDERER_TYPE||{}),BUFFER_BITS=(ie=>(ie[ie.COLOR=16384]="COLOR",ie[ie.DEPTH=256]="DEPTH",ie[ie.STENCIL=1024]="STENCIL",ie))(BUFFER_BITS||{}),BLEND_MODES=(ie=>(ie[ie.NORMAL=0]="NORMAL",ie[ie.ADD=1]="ADD",ie[ie.MULTIPLY=2]="MULTIPLY",ie[ie.SCREEN=3]="SCREEN",ie[ie.OVERLAY=4]="OVERLAY",ie[ie.DARKEN=5]="DARKEN",ie[ie.LIGHTEN=6]="LIGHTEN",ie[ie.COLOR_DODGE=7]="COLOR_DODGE",ie[ie.COLOR_BURN=8]="COLOR_BURN",ie[ie.HARD_LIGHT=9]="HARD_LIGHT",ie[ie.SOFT_LIGHT=10]="SOFT_LIGHT",ie[ie.DIFFERENCE=11]="DIFFERENCE",ie[ie.EXCLUSION=12]="EXCLUSION",ie[ie.HUE=13]="HUE",ie[ie.SATURATION=14]="SATURATION",ie[ie.COLOR=15]="COLOR",ie[ie.LUMINOSITY=16]="LUMINOSITY",ie[ie.NORMAL_NPM=17]="NORMAL_NPM",ie[ie.ADD_NPM=18]="ADD_NPM",ie[ie.SCREEN_NPM=19]="SCREEN_NPM",ie[ie.NONE=20]="NONE",ie[ie.SRC_OVER=0]="SRC_OVER",ie[ie.SRC_IN=21]="SRC_IN",ie[ie.SRC_OUT=22]="SRC_OUT",ie[ie.SRC_ATOP=23]="SRC_ATOP",ie[ie.DST_OVER=24]="DST_OVER",ie[ie.DST_IN=25]="DST_IN",ie[ie.DST_OUT=26]="DST_OUT",ie[ie.DST_ATOP=27]="DST_ATOP",ie[ie.ERASE=26]="ERASE",ie[ie.SUBTRACT=28]="SUBTRACT",ie[ie.XOR=29]="XOR",ie))(BLEND_MODES||{}),DRAW_MODES=(ie=>(ie[ie.POINTS=0]="POINTS",ie[ie.LINES=1]="LINES",ie[ie.LINE_LOOP=2]="LINE_LOOP",ie[ie.LINE_STRIP=3]="LINE_STRIP",ie[ie.TRIANGLES=4]="TRIANGLES",ie[ie.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",ie[ie.TRIANGLE_FAN=6]="TRIANGLE_FAN",ie))(DRAW_MODES||{}),FORMATS=(ie=>(ie[ie.RGBA=6408]="RGBA",ie[ie.RGB=6407]="RGB",ie[ie.RG=33319]="RG",ie[ie.RED=6403]="RED",ie[ie.RGBA_INTEGER=36249]="RGBA_INTEGER",ie[ie.RGB_INTEGER=36248]="RGB_INTEGER",ie[ie.RG_INTEGER=33320]="RG_INTEGER",ie[ie.RED_INTEGER=36244]="RED_INTEGER",ie[ie.ALPHA=6406]="ALPHA",ie[ie.LUMINANCE=6409]="LUMINANCE",ie[ie.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",ie[ie.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",ie[ie.DEPTH_STENCIL=34041]="DEPTH_STENCIL",ie))(FORMATS||{}),TARGETS=(ie=>(ie[ie.TEXTURE_2D=3553]="TEXTURE_2D",ie[ie.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",ie[ie.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",ie[ie.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",ie[ie.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",ie[ie.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",ie[ie.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",ie[ie.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",ie[ie.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",ie))(TARGETS||{}),TYPES=(ie=>(ie[ie.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",ie[ie.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",ie[ie.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",ie[ie.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",ie[ie.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",ie[ie.UNSIGNED_INT=5125]="UNSIGNED_INT",ie[ie.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",ie[ie.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",ie[ie.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",ie[ie.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",ie[ie.BYTE=5120]="BYTE",ie[ie.SHORT=5122]="SHORT",ie[ie.INT=5124]="INT",ie[ie.FLOAT=5126]="FLOAT",ie[ie.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",ie[ie.HALF_FLOAT=36193]="HALF_FLOAT",ie))(TYPES||{}),SAMPLER_TYPES=(ie=>(ie[ie.FLOAT=0]="FLOAT",ie[ie.INT=1]="INT",ie[ie.UINT=2]="UINT",ie))(SAMPLER_TYPES||{}),SCALE_MODES=(ie=>(ie[ie.NEAREST=0]="NEAREST",ie[ie.LINEAR=1]="LINEAR",ie))(SCALE_MODES||{}),WRAP_MODES=(ie=>(ie[ie.CLAMP=33071]="CLAMP",ie[ie.REPEAT=10497]="REPEAT",ie[ie.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",ie))(WRAP_MODES||{}),MIPMAP_MODES=(ie=>(ie[ie.OFF=0]="OFF",ie[ie.POW2=1]="POW2",ie[ie.ON=2]="ON",ie[ie.ON_MANUAL=3]="ON_MANUAL",ie))(MIPMAP_MODES||{}),ALPHA_MODES=(ie=>(ie[ie.NPM=0]="NPM",ie[ie.UNPACK=1]="UNPACK",ie[ie.PMA=2]="PMA",ie[ie.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",ie[ie.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",ie[ie.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",ie))(ALPHA_MODES||{}),CLEAR_MODES=(ie=>(ie[ie.NO=0]="NO",ie[ie.YES=1]="YES",ie[ie.AUTO=2]="AUTO",ie[ie.BLEND=0]="BLEND",ie[ie.CLEAR=1]="CLEAR",ie[ie.BLIT=2]="BLIT",ie))(CLEAR_MODES||{}),GC_MODES=(ie=>(ie[ie.AUTO=0]="AUTO",ie[ie.MANUAL=1]="MANUAL",ie))(GC_MODES||{}),PRECISION=(ie=>(ie.LOW="lowp",ie.MEDIUM="mediump",ie.HIGH="highp",ie))(PRECISION||{}),MASK_TYPES=(ie=>(ie[ie.NONE=0]="NONE",ie[ie.SCISSOR=1]="SCISSOR",ie[ie.STENCIL=2]="STENCIL",ie[ie.SPRITE=3]="SPRITE",ie[ie.COLOR=4]="COLOR",ie))(MASK_TYPES||{}),MSAA_QUALITY=(ie=>(ie[ie.NONE=0]="NONE",ie[ie.LOW=2]="LOW",ie[ie.MEDIUM=4]="MEDIUM",ie[ie.HIGH=8]="HIGH",ie))(MSAA_QUALITY||{}),BUFFER_TYPE=(ie=>(ie[ie.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",ie[ie.ARRAY_BUFFER=34962]="ARRAY_BUFFER",ie[ie.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",ie))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(ie,ee)=>{const te=document.createElement("canvas");return te.width=ie,te.height=ee,te},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var ie;return(ie=document.baseURI)!=null?ie:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(ie,ee)=>fetch(ie,ee),parseXML:ie=>new DOMParser().parseFromString(ie,"text/xml")},settings={ADAPTER:BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(ie){return typeof ie!="undefined"&&ie.platform==="MacIntel"&&typeof ie.maxTouchPoints=="number"&&ie.maxTouchPoints>1&&typeof MSStream=="undefined"};function createMatch(ie){return function(ee){return ee.test(ie)}}function isMobile$1(ie){var ee={userAgent:"",platform:"",maxTouchPoints:0};!ie&&typeof navigator!="undefined"?ee={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof ie=="string"?ee.userAgent=ie:ie&&ie.userAgent&&(ee={userAgent:ie.userAgent,platform:ie.platform,maxTouchPoints:ie.maxTouchPoints||0});var te=ee.userAgent,re=te.split("[FBAN");typeof re[1]!="undefined"&&(te=re[0]),re=te.split("Twitter"),typeof re[1]!="undefined"&&(te=re[0]);var ne=createMatch(te),se={apple:{phone:ne(appleIphone)&&!ne(windowsPhone),ipod:ne(appleIpod),tablet:!ne(appleIphone)&&(ne(appleTablet)||isAppleTabletOnIos13(ee))&&!ne(windowsPhone),universal:ne(appleUniversal),device:(ne(appleIphone)||ne(appleIpod)||ne(appleTablet)||ne(appleUniversal)||isAppleTabletOnIos13(ee))&&!ne(windowsPhone)},amazon:{phone:ne(amazonPhone),tablet:!ne(amazonPhone)&&ne(amazonTablet),device:ne(amazonPhone)||ne(amazonTablet)},android:{phone:!ne(windowsPhone)&&ne(amazonPhone)||!ne(windowsPhone)&&ne(androidPhone),tablet:!ne(windowsPhone)&&!ne(amazonPhone)&&!ne(androidPhone)&&(ne(amazonTablet)||ne(androidTablet)),device:!ne(windowsPhone)&&(ne(amazonPhone)||ne(amazonTablet)||ne(androidPhone)||ne(androidTablet))||ne(/\bokhttp\b/i)},windows:{phone:ne(windowsPhone),tablet:ne(windowsTablet),device:ne(windowsPhone)||ne(windowsTablet)},other:{blackberry:ne(otherBlackBerry),blackberry10:ne(otherBlackBerry10),opera:ne(otherOpera),firefox:ne(otherFirefox),chrome:ne(otherChrome),device:ne(otherBlackBerry)||ne(otherBlackBerry10)||ne(otherOpera)||ne(otherFirefox)||ne(otherChrome)},any:!1,phone:!1,tablet:!1};return se.any=se.apple.device||se.android.device||se.windows.device||se.other.device,se.phone=se.apple.phone||se.android.phone||se.windows.phone,se.tablet=se.apple.tablet||se.android.tablet||se.windows.tablet,se}const isMobileCall=(pi=isMobile$1.default)!=null?pi:isMobile$1,isMobile=isMobileCall(globalThis.navigator);settings.RETINA_PREFIX=/@([0-9\.]+)x/,settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var eventemitter3={exports:{}};(function(ie){var ee=Object.prototype.hasOwnProperty,te="~";function re(){}Object.create&&(re.prototype=Object.create(null),new re().__proto__||(te=!1));function ne(le,he,ce){this.fn=le,this.context=he,this.once=ce||!1}function se(le,he,ce,de,ue){if(typeof ce!="function")throw new TypeError("The listener must be a function");var fe=new ne(ce,de||le,ue),pe=te?te+he:he;return le._events[pe]?le._events[pe].fn?le._events[pe]=[le._events[pe],fe]:le._events[pe].push(fe):(le._events[pe]=fe,le._eventsCount++),le}function ae(le,he){--le._eventsCount===0?le._events=new re:delete le._events[he]}function oe(){this._events=new re,this._eventsCount=0}oe.prototype.eventNames=function(){var he=[],ce,de;if(this._eventsCount===0)return he;for(de in ce=this._events)ee.call(ce,de)&&he.push(te?de.slice(1):de);return Object.getOwnPropertySymbols?he.concat(Object.getOwnPropertySymbols(ce)):he},oe.prototype.listeners=function(he){var ce=te?te+he:he,de=this._events[ce];if(!de)return[];if(de.fn)return[de.fn];for(var ue=0,fe=de.length,pe=new Array(fe);ue<fe;ue++)pe[ue]=de[ue].fn;return pe},oe.prototype.listenerCount=function(he){var ce=te?te+he:he,de=this._events[ce];return de?de.fn?1:de.length:0},oe.prototype.emit=function(he,ce,de,ue,fe,pe){var me=te?te+he:he;if(!this._events[me])return!1;var xe=this._events[me],ge=arguments.length,_e,ve;if(xe.fn){switch(xe.once&&this.removeListener(he,xe.fn,void 0,!0),ge){case 1:return xe.fn.call(xe.context),!0;case 2:return xe.fn.call(xe.context,ce),!0;case 3:return xe.fn.call(xe.context,ce,de),!0;case 4:return xe.fn.call(xe.context,ce,de,ue),!0;case 5:return xe.fn.call(xe.context,ce,de,ue,fe),!0;case 6:return xe.fn.call(xe.context,ce,de,ue,fe,pe),!0}for(ve=1,_e=new Array(ge-1);ve<ge;ve++)_e[ve-1]=arguments[ve];xe.fn.apply(xe.context,_e)}else{var ye=xe.length,be;for(ve=0;ve<ye;ve++)switch(xe[ve].once&&this.removeListener(he,xe[ve].fn,void 0,!0),ge){case 1:xe[ve].fn.call(xe[ve].context);break;case 2:xe[ve].fn.call(xe[ve].context,ce);break;case 3:xe[ve].fn.call(xe[ve].context,ce,de);break;case 4:xe[ve].fn.call(xe[ve].context,ce,de,ue);break;default:if(!_e)for(be=1,_e=new Array(ge-1);be<ge;be++)_e[be-1]=arguments[be];xe[ve].fn.apply(xe[ve].context,_e)}}return!0},oe.prototype.on=function(he,ce,de){return se(this,he,ce,de,!1)},oe.prototype.once=function(he,ce,de){return se(this,he,ce,de,!0)},oe.prototype.removeListener=function(he,ce,de,ue){var fe=te?te+he:he;if(!this._events[fe])return this;if(!ce)return ae(this,fe),this;var pe=this._events[fe];if(pe.fn)pe.fn===ce&&(!ue||pe.once)&&(!de||pe.context===de)&&ae(this,fe);else{for(var me=0,xe=[],ge=pe.length;me<ge;me++)(pe[me].fn!==ce||ue&&!pe[me].once||de&&pe[me].context!==de)&&xe.push(pe[me]);xe.length?this._events[fe]=xe.length===1?xe[0]:xe:ae(this,fe)}return this},oe.prototype.removeAllListeners=function(he){var ce;return he?(ce=te?te+he:he,this._events[ce]&&ae(this,ce)):(this._events=new re,this._eventsCount=0),this},oe.prototype.off=oe.prototype.removeListener,oe.prototype.addListener=oe.prototype.on,oe.prefixed=te,oe.EventEmitter=oe,ie.exports=oe})(eventemitter3);var EventEmitter=eventemitter3.exports,earcut$1={exports:{}};earcut$1.exports=earcut,earcut$1.exports.default=earcut;function earcut(ie,ee,te){te=te||2;var re=ee&&ee.length,ne=re?ee[0]*te:ie.length,se=linkedList(ie,0,ne,te,!0),ae=[];if(!se||se.next===se.prev)return ae;var oe,le,he,ce,de,ue,fe;if(re&&(se=eliminateHoles(ie,ee,se,te)),ie.length>80*te){oe=he=ie[0],le=ce=ie[1];for(var pe=te;pe<ne;pe+=te)de=ie[pe],ue=ie[pe+1],de<oe&&(oe=de),ue<le&&(le=ue),de>he&&(he=de),ue>ce&&(ce=ue);fe=Math.max(he-oe,ce-le),fe=fe!==0?32767/fe:0}return earcutLinked(se,ae,te,oe,le,fe,0),ae}function linkedList(ie,ee,te,re,ne){var se,ae;if(ne===signedArea(ie,ee,te,re)>0)for(se=ee;se<te;se+=re)ae=insertNode(se,ie[se],ie[se+1],ae);else for(se=te-re;se>=ee;se-=re)ae=insertNode(se,ie[se],ie[se+1],ae);return ae&&equals(ae,ae.next)&&(removeNode(ae),ae=ae.next),ae}function filterPoints(ie,ee){if(!ie)return ie;ee||(ee=ie);var te=ie,re;do if(re=!1,!te.steiner&&(equals(te,te.next)||area(te.prev,te,te.next)===0)){if(removeNode(te),te=ee=te.prev,te===te.next)break;re=!0}else te=te.next;while(re||te!==ee);return ee}function earcutLinked(ie,ee,te,re,ne,se,ae){if(!!ie){!ae&&se&&indexCurve(ie,re,ne,se);for(var oe=ie,le,he;ie.prev!==ie.next;){if(le=ie.prev,he=ie.next,se?isEarHashed(ie,re,ne,se):isEar(ie)){ee.push(le.i/te|0),ee.push(ie.i/te|0),ee.push(he.i/te|0),removeNode(ie),ie=he.next,oe=he.next;continue}if(ie=he,ie===oe){ae?ae===1?(ie=cureLocalIntersections(filterPoints(ie),ee,te),earcutLinked(ie,ee,te,re,ne,se,2)):ae===2&&splitEarcut(ie,ee,te,re,ne,se):earcutLinked(filterPoints(ie),ee,te,re,ne,se,1);break}}}}function isEar(ie){var ee=ie.prev,te=ie,re=ie.next;if(area(ee,te,re)>=0)return!1;for(var ne=ee.x,se=te.x,ae=re.x,oe=ee.y,le=te.y,he=re.y,ce=ne<se?ne<ae?ne:ae:se<ae?se:ae,de=oe<le?oe<he?oe:he:le<he?le:he,ue=ne>se?ne>ae?ne:ae:se>ae?se:ae,fe=oe>le?oe>he?oe:he:le>he?le:he,pe=re.next;pe!==ee;){if(pe.x>=ce&&pe.x<=ue&&pe.y>=de&&pe.y<=fe&&pointInTriangle(ne,oe,se,le,ae,he,pe.x,pe.y)&&area(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function isEarHashed(ie,ee,te,re){var ne=ie.prev,se=ie,ae=ie.next;if(area(ne,se,ae)>=0)return!1;for(var oe=ne.x,le=se.x,he=ae.x,ce=ne.y,de=se.y,ue=ae.y,fe=oe<le?oe<he?oe:he:le<he?le:he,pe=ce<de?ce<ue?ce:ue:de<ue?de:ue,me=oe>le?oe>he?oe:he:le>he?le:he,xe=ce>de?ce>ue?ce:ue:de>ue?de:ue,ge=zOrder(fe,pe,ee,te,re),_e=zOrder(me,xe,ee,te,re),ve=ie.prevZ,ye=ie.nextZ;ve&&ve.z>=ge&&ye&&ye.z<=_e;){if(ve.x>=fe&&ve.x<=me&&ve.y>=pe&&ve.y<=xe&&ve!==ne&&ve!==ae&&pointInTriangle(oe,ce,le,de,he,ue,ve.x,ve.y)&&area(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,ye.x>=fe&&ye.x<=me&&ye.y>=pe&&ye.y<=xe&&ye!==ne&&ye!==ae&&pointInTriangle(oe,ce,le,de,he,ue,ye.x,ye.y)&&area(ye.prev,ye,ye.next)>=0))return!1;ye=ye.nextZ}for(;ve&&ve.z>=ge;){if(ve.x>=fe&&ve.x<=me&&ve.y>=pe&&ve.y<=xe&&ve!==ne&&ve!==ae&&pointInTriangle(oe,ce,le,de,he,ue,ve.x,ve.y)&&area(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;ye&&ye.z<=_e;){if(ye.x>=fe&&ye.x<=me&&ye.y>=pe&&ye.y<=xe&&ye!==ne&&ye!==ae&&pointInTriangle(oe,ce,le,de,he,ue,ye.x,ye.y)&&area(ye.prev,ye,ye.next)>=0)return!1;ye=ye.nextZ}return!0}function cureLocalIntersections(ie,ee,te){var re=ie;do{var ne=re.prev,se=re.next.next;!equals(ne,se)&&intersects(ne,re,re.next,se)&&locallyInside(ne,se)&&locallyInside(se,ne)&&(ee.push(ne.i/te|0),ee.push(re.i/te|0),ee.push(se.i/te|0),removeNode(re),removeNode(re.next),re=ie=se),re=re.next}while(re!==ie);return filterPoints(re)}function splitEarcut(ie,ee,te,re,ne,se){var ae=ie;do{for(var oe=ae.next.next;oe!==ae.prev;){if(ae.i!==oe.i&&isValidDiagonal(ae,oe)){var le=splitPolygon(ae,oe);ae=filterPoints(ae,ae.next),le=filterPoints(le,le.next),earcutLinked(ae,ee,te,re,ne,se,0),earcutLinked(le,ee,te,re,ne,se,0);return}oe=oe.next}ae=ae.next}while(ae!==ie)}function eliminateHoles(ie,ee,te,re){var ne=[],se,ae,oe,le,he;for(se=0,ae=ee.length;se<ae;se++)oe=ee[se]*re,le=se<ae-1?ee[se+1]*re:ie.length,he=linkedList(ie,oe,le,re,!1),he===he.next&&(he.steiner=!0),ne.push(getLeftmost(he));for(ne.sort(compareX),se=0;se<ne.length;se++)te=eliminateHole(ne[se],te);return te}function compareX(ie,ee){return ie.x-ee.x}function eliminateHole(ie,ee){var te=findHoleBridge(ie,ee);if(!te)return ee;var re=splitPolygon(te,ie);return filterPoints(re,re.next),filterPoints(te,te.next)}function findHoleBridge(ie,ee){var te=ee,re=ie.x,ne=ie.y,se=-1/0,ae;do{if(ne<=te.y&&ne>=te.next.y&&te.next.y!==te.y){var oe=te.x+(ne-te.y)*(te.next.x-te.x)/(te.next.y-te.y);if(oe<=re&&oe>se&&(se=oe,ae=te.x<te.next.x?te:te.next,oe===re))return ae}te=te.next}while(te!==ee);if(!ae)return null;var le=ae,he=ae.x,ce=ae.y,de=1/0,ue;te=ae;do re>=te.x&&te.x>=he&&re!==te.x&&pointInTriangle(ne<ce?re:se,ne,he,ce,ne<ce?se:re,ne,te.x,te.y)&&(ue=Math.abs(ne-te.y)/(re-te.x),locallyInside(te,ie)&&(ue<de||ue===de&&(te.x>ae.x||te.x===ae.x&&sectorContainsSector(ae,te)))&&(ae=te,de=ue)),te=te.next;while(te!==le);return ae}function sectorContainsSector(ie,ee){return area(ie.prev,ie,ee.prev)<0&&area(ee.next,ie,ie.next)<0}function indexCurve(ie,ee,te,re){var ne=ie;do ne.z===0&&(ne.z=zOrder(ne.x,ne.y,ee,te,re)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==ie);ne.prevZ.nextZ=null,ne.prevZ=null,sortLinked(ne)}function sortLinked(ie){var ee,te,re,ne,se,ae,oe,le,he=1;do{for(te=ie,ie=null,se=null,ae=0;te;){for(ae++,re=te,oe=0,ee=0;ee<he&&(oe++,re=re.nextZ,!!re);ee++);for(le=he;oe>0||le>0&&re;)oe!==0&&(le===0||!re||te.z<=re.z)?(ne=te,te=te.nextZ,oe--):(ne=re,re=re.nextZ,le--),se?se.nextZ=ne:ie=ne,ne.prevZ=se,se=ne;te=re}se.nextZ=null,he*=2}while(ae>1);return ie}function zOrder(ie,ee,te,re,ne){return ie=(ie-te)*ne|0,ee=(ee-re)*ne|0,ie=(ie|ie<<8)&16711935,ie=(ie|ie<<4)&252645135,ie=(ie|ie<<2)&858993459,ie=(ie|ie<<1)&1431655765,ee=(ee|ee<<8)&16711935,ee=(ee|ee<<4)&252645135,ee=(ee|ee<<2)&858993459,ee=(ee|ee<<1)&1431655765,ie|ee<<1}function getLeftmost(ie){var ee=ie,te=ie;do(ee.x<te.x||ee.x===te.x&&ee.y<te.y)&&(te=ee),ee=ee.next;while(ee!==ie);return te}function pointInTriangle(ie,ee,te,re,ne,se,ae,oe){return(ne-ae)*(ee-oe)>=(ie-ae)*(se-oe)&&(ie-ae)*(re-oe)>=(te-ae)*(ee-oe)&&(te-ae)*(se-oe)>=(ne-ae)*(re-oe)}function isValidDiagonal(ie,ee){return ie.next.i!==ee.i&&ie.prev.i!==ee.i&&!intersectsPolygon(ie,ee)&&(locallyInside(ie,ee)&&locallyInside(ee,ie)&&middleInside(ie,ee)&&(area(ie.prev,ie,ee.prev)||area(ie,ee.prev,ee))||equals(ie,ee)&&area(ie.prev,ie,ie.next)>0&&area(ee.prev,ee,ee.next)>0)}function area(ie,ee,te){return(ee.y-ie.y)*(te.x-ee.x)-(ee.x-ie.x)*(te.y-ee.y)}function equals(ie,ee){return ie.x===ee.x&&ie.y===ee.y}function intersects(ie,ee,te,re){var ne=sign$1(area(ie,ee,te)),se=sign$1(area(ie,ee,re)),ae=sign$1(area(te,re,ie)),oe=sign$1(area(te,re,ee));return!!(ne!==se&&ae!==oe||ne===0&&onSegment(ie,te,ee)||se===0&&onSegment(ie,re,ee)||ae===0&&onSegment(te,ie,re)||oe===0&&onSegment(te,ee,re))}function onSegment(ie,ee,te){return ee.x<=Math.max(ie.x,te.x)&&ee.x>=Math.min(ie.x,te.x)&&ee.y<=Math.max(ie.y,te.y)&&ee.y>=Math.min(ie.y,te.y)}function sign$1(ie){return ie>0?1:ie<0?-1:0}function intersectsPolygon(ie,ee){var te=ie;do{if(te.i!==ie.i&&te.next.i!==ie.i&&te.i!==ee.i&&te.next.i!==ee.i&&intersects(te,te.next,ie,ee))return!0;te=te.next}while(te!==ie);return!1}function locallyInside(ie,ee){return area(ie.prev,ie,ie.next)<0?area(ie,ee,ie.next)>=0&&area(ie,ie.prev,ee)>=0:area(ie,ee,ie.prev)<0||area(ie,ie.next,ee)<0}function middleInside(ie,ee){var te=ie,re=!1,ne=(ie.x+ee.x)/2,se=(ie.y+ee.y)/2;do te.y>se!=te.next.y>se&&te.next.y!==te.y&&ne<(te.next.x-te.x)*(se-te.y)/(te.next.y-te.y)+te.x&&(re=!re),te=te.next;while(te!==ie);return re}function splitPolygon(ie,ee){var te=new Node(ie.i,ie.x,ie.y),re=new Node(ee.i,ee.x,ee.y),ne=ie.next,se=ee.prev;return ie.next=ee,ee.prev=ie,te.next=ne,ne.prev=te,re.next=te,te.prev=re,se.next=re,re.prev=se,re}function insertNode(ie,ee,te,re){var ne=new Node(ie,ee,te);return re?(ne.next=re.next,ne.prev=re,re.next.prev=ne,re.next=ne):(ne.prev=ne,ne.next=ne),ne}function removeNode(ie){ie.next.prev=ie.prev,ie.prev.next=ie.next,ie.prevZ&&(ie.prevZ.nextZ=ie.nextZ),ie.nextZ&&(ie.nextZ.prevZ=ie.prevZ)}function Node(ie,ee,te){this.i=ie,this.x=ee,this.y=te,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(ie,ee,te,re){var ne=ee&&ee.length,se=ne?ee[0]*te:ie.length,ae=Math.abs(signedArea(ie,0,se,te));if(ne)for(var oe=0,le=ee.length;oe<le;oe++){var he=ee[oe]*te,ce=oe<le-1?ee[oe+1]*te:ie.length;ae-=Math.abs(signedArea(ie,he,ce,te))}var de=0;for(oe=0;oe<re.length;oe+=3){var ue=re[oe]*te,fe=re[oe+1]*te,pe=re[oe+2]*te;de+=Math.abs((ie[ue]-ie[pe])*(ie[fe+1]-ie[ue+1])-(ie[ue]-ie[fe])*(ie[pe+1]-ie[ue+1]))}return ae===0&&de===0?0:Math.abs((de-ae)/ae)};function signedArea(ie,ee,te,re){for(var ne=0,se=ee,ae=te-re;se<te;se+=re)ne+=(ie[ae]-ie[se])*(ie[se+1]+ie[ae+1]),ae=se;return ne}earcut.flatten=function(ie){for(var ee=ie[0][0].length,te={vertices:[],holes:[],dimensions:ee},re=0,ne=0;ne<ie.length;ne++){for(var se=0;se<ie[ne].length;se++)for(var ae=0;ae<ee;ae++)te.vertices.push(ie[ne][se][ae]);ne>0&&(re+=ie[ne-1].length,te.holes.push(re))}return te};var earcut_1=earcut$1.exports,punycode$1={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(ie,ee){(function(te){var re=ee&&!ee.nodeType&&ee,ne=ie&&!ie.nodeType&&ie,se=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1;(se.global===se||se.window===se||se.self===se)&&(te=se);var ae,oe=2147483647,le=36,he=1,ce=26,de=38,ue=700,fe=72,pe=128,me="-",xe=/^xn--/,ge=/[^\x20-\x7E]/,_e=/[\x2E\u3002\uFF0E\uFF61]/g,ve={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ye=le-he,be=Math.floor,we=String.fromCharCode,Se;function Te(Fe){throw RangeError(ve[Fe])}function Pe(Fe,Ne){for(var $e=Fe.length,ze=[];$e--;)ze[$e]=Ne(Fe[$e]);return ze}function Be(Fe,Ne){var $e=Fe.split("@"),ze="";$e.length>1&&(ze=$e[0]+"@",Fe=$e[1]),Fe=Fe.replace(_e,".");var Xe=Fe.split("."),Je=Pe(Xe,Ne).join(".");return ze+Je}function Ce(Fe){for(var Ne=[],$e=0,ze=Fe.length,Xe,Je;$e<ze;)Xe=Fe.charCodeAt($e++),Xe>=55296&&Xe<=56319&&$e<ze?(Je=Fe.charCodeAt($e++),(Je&64512)==56320?Ne.push(((Xe&1023)<<10)+(Je&1023)+65536):(Ne.push(Xe),$e--)):Ne.push(Xe);return Ne}function De(Fe){return Pe(Fe,function(Ne){var $e="";return Ne>65535&&(Ne-=65536,$e+=we(Ne>>>10&1023|55296),Ne=56320|Ne&1023),$e+=we(Ne),$e}).join("")}function Re(Fe){return Fe-48<10?Fe-22:Fe-65<26?Fe-65:Fe-97<26?Fe-97:le}function Le(Fe,Ne){return Fe+22+75*(Fe<26)-((Ne!=0)<<5)}function ke(Fe,Ne,$e){var ze=0;for(Fe=$e?be(Fe/ue):Fe>>1,Fe+=be(Fe/Ne);Fe>ye*ce>>1;ze+=le)Fe=be(Fe/ye);return be(ze+(ye+1)*Fe/(Fe+de))}function Me(Fe){var Ne=[],$e=Fe.length,ze,Xe=0,Je=pe,We=fe,dt,yt,vt,at,_t,je,He,Qe,St;for(dt=Fe.lastIndexOf(me),dt<0&&(dt=0),yt=0;yt<dt;++yt)Fe.charCodeAt(yt)>=128&&Te("not-basic"),Ne.push(Fe.charCodeAt(yt));for(vt=dt>0?dt+1:0;vt<$e;){for(at=Xe,_t=1,je=le;vt>=$e&&Te("invalid-input"),He=Re(Fe.charCodeAt(vt++)),(He>=le||He>be((oe-Xe)/_t))&&Te("overflow"),Xe+=He*_t,Qe=je<=We?he:je>=We+ce?ce:je-We,!(He<Qe);je+=le)St=le-Qe,_t>be(oe/St)&&Te("overflow"),_t*=St;ze=Ne.length+1,We=ke(Xe-at,ze,at==0),be(Xe/ze)>oe-Je&&Te("overflow"),Je+=be(Xe/ze),Xe%=ze,Ne.splice(Xe++,0,Je)}return De(Ne)}function Ee(Fe){var Ne,$e,ze,Xe,Je,We,dt,yt,vt,at,_t,je=[],He,Qe,St,gt;for(Fe=Ce(Fe),He=Fe.length,Ne=pe,$e=0,Je=fe,We=0;We<He;++We)_t=Fe[We],_t<128&&je.push(we(_t));for(ze=Xe=je.length,Xe&&je.push(me);ze<He;){for(dt=oe,We=0;We<He;++We)_t=Fe[We],_t>=Ne&&_t<dt&&(dt=_t);for(Qe=ze+1,dt-Ne>be((oe-$e)/Qe)&&Te("overflow"),$e+=(dt-Ne)*Qe,Ne=dt,We=0;We<He;++We)if(_t=Fe[We],_t<Ne&&++$e>oe&&Te("overflow"),_t==Ne){for(yt=$e,vt=le;at=vt<=Je?he:vt>=Je+ce?ce:vt-Je,!(yt<at);vt+=le)gt=yt-at,St=le-at,je.push(we(Le(at+gt%St,0))),yt=be(gt/St);je.push(we(Le(yt,0))),Je=ke($e,Qe,ze==Xe),$e=0,++ze}++$e,++Ne}return je.join("")}function Ae(Fe){return Be(Fe,function(Ne){return xe.test(Ne)?Me(Ne.slice(4).toLowerCase()):Ne})}function Ie(Fe){return Be(Fe,function(Ne){return ge.test(Ne)?"xn--"+Ee(Ne):Ne})}if(ae={version:"1.3.2",ucs2:{decode:Ce,encode:De},decode:Me,encode:Ee,toASCII:Ie,toUnicode:Ae},re&&ne)if(ie.exports==re)ne.exports=ae;else for(Se in ae)ae.hasOwnProperty(Se)&&(re[Se]=ae[Se]);else te.punycode=ae})(commonjsGlobal$1)})(punycode$1,punycode$1.exports);var util$1={isString:function(ie){return typeof ie=="string"},isObject:function(ie){return typeof ie=="object"&&ie!==null},isNull:function(ie){return ie===null},isNullOrUndefined:function(ie){return ie==null}},querystring$1={};function hasOwnProperty(ie,ee){return Object.prototype.hasOwnProperty.call(ie,ee)}var decode=function(ie,ee,te,re){ee=ee||"&",te=te||"=";var ne={};if(typeof ie!="string"||ie.length===0)return ne;var se=/\+/g;ie=ie.split(ee);var ae=1e3;re&&typeof re.maxKeys=="number"&&(ae=re.maxKeys);var oe=ie.length;ae>0&&oe>ae&&(oe=ae);for(var le=0;le<oe;++le){var he=ie[le].replace(se,"%20"),ce=he.indexOf(te),de,ue,fe,pe;ce>=0?(de=he.substr(0,ce),ue=he.substr(ce+1)):(de=he,ue=""),fe=decodeURIComponent(de),pe=decodeURIComponent(ue),hasOwnProperty(ne,fe)?Array.isArray(ne[fe])?ne[fe].push(pe):ne[fe]=[ne[fe],pe]:ne[fe]=pe}return ne},stringifyPrimitive=function(ie){switch(typeof ie){case"string":return ie;case"boolean":return ie?"true":"false";case"number":return isFinite(ie)?ie:"";default:return""}},encode=function(ie,ee,te,re){return ee=ee||"&",te=te||"=",ie===null&&(ie=void 0),typeof ie=="object"?Object.keys(ie).map(function(ne){var se=encodeURIComponent(stringifyPrimitive(ne))+te;return Array.isArray(ie[ne])?ie[ne].map(function(ae){return se+encodeURIComponent(stringifyPrimitive(ae))}).join(ee):se+encodeURIComponent(stringifyPrimitive(ie[ne]))}).join(ee):re?encodeURIComponent(stringifyPrimitive(re))+te+encodeURIComponent(stringifyPrimitive(ie)):""};querystring$1.decode=querystring$1.parse=decode,querystring$1.encode=querystring$1.stringify=encode;var punycode=punycode$1.exports,util=util$1,parse=urlParse,resolve=urlResolve,format=urlFormat;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=querystring$1;function urlParse(ie,ee,te){if(ie&&util.isObject(ie)&&ie instanceof Url)return ie;var re=new Url;return re.parse(ie,ee,te),re}Url.prototype.parse=function(ie,ee,te){if(!util.isString(ie))throw new TypeError("Parameter 'url' must be a string, not "+typeof ie);var re=ie.indexOf("?"),ne=re!==-1&&re<ie.indexOf("#")?"?":"#",se=ie.split(ne),ae=/\\/g;se[0]=se[0].replace(ae,"/"),ie=se.join(ne);var oe=ie;if(oe=oe.trim(),!te&&ie.split("#").length===1){var le=simplePathPattern.exec(oe);if(le)return this.path=oe,this.href=oe,this.pathname=le[1],le[2]?(this.search=le[2],ee?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):ee&&(this.search="",this.query={}),this}var he=protocolPattern.exec(oe);if(he){he=he[0];var ce=he.toLowerCase();this.protocol=ce,oe=oe.substr(he.length)}if(te||he||oe.match(/^\/\/[^@\/]+@[^@\/]+/)){var de=oe.substr(0,2)==="//";de&&!(he&&hostlessProtocol[he])&&(oe=oe.substr(2),this.slashes=!0)}if(!hostlessProtocol[he]&&(de||he&&!slashedProtocol[he])){for(var ue=-1,fe=0;fe<hostEndingChars.length;fe++){var pe=oe.indexOf(hostEndingChars[fe]);pe!==-1&&(ue===-1||pe<ue)&&(ue=pe)}var me,xe;ue===-1?xe=oe.lastIndexOf("@"):xe=oe.lastIndexOf("@",ue),xe!==-1&&(me=oe.slice(0,xe),oe=oe.slice(xe+1),this.auth=decodeURIComponent(me)),ue=-1;for(var fe=0;fe<nonHostChars.length;fe++){var pe=oe.indexOf(nonHostChars[fe]);pe!==-1&&(ue===-1||pe<ue)&&(ue=pe)}ue===-1&&(ue=oe.length),this.host=oe.slice(0,ue),oe=oe.slice(ue),this.parseHost(),this.hostname=this.hostname||"";var ge=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ge)for(var _e=this.hostname.split(/\./),fe=0,ve=_e.length;fe<ve;fe++){var ye=_e[fe];if(!!ye&&!ye.match(hostnamePartPattern)){for(var be="",we=0,Se=ye.length;we<Se;we++)ye.charCodeAt(we)>127?be+="x":be+=ye[we];if(!be.match(hostnamePartPattern)){var Te=_e.slice(0,fe),Pe=_e.slice(fe+1),Be=ye.match(hostnamePartStart);Be&&(Te.push(Be[1]),Pe.unshift(Be[2])),Pe.length&&(oe="/"+Pe.join(".")+oe),this.hostname=Te.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),ge||(this.hostname=punycode.toASCII(this.hostname));var Ce=this.port?":"+this.port:"",De=this.hostname||"";this.host=De+Ce,this.href+=this.host,ge&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),oe[0]!=="/"&&(oe="/"+oe))}if(!unsafeProtocol[ce])for(var fe=0,ve=autoEscape.length;fe<ve;fe++){var Re=autoEscape[fe];if(oe.indexOf(Re)!==-1){var Le=encodeURIComponent(Re);Le===Re&&(Le=escape(Re)),oe=oe.split(Re).join(Le)}}var ke=oe.indexOf("#");ke!==-1&&(this.hash=oe.substr(ke),oe=oe.slice(0,ke));var Me=oe.indexOf("?");if(Me!==-1?(this.search=oe.substr(Me),this.query=oe.substr(Me+1),ee&&(this.query=querystring.parse(this.query)),oe=oe.slice(0,Me)):ee&&(this.search="",this.query={}),oe&&(this.pathname=oe),slashedProtocol[ce]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Ce=this.pathname||"",Ee=this.search||"";this.path=Ce+Ee}return this.href=this.format(),this};function urlFormat(ie){return util.isString(ie)&&(ie=urlParse(ie)),ie instanceof Url?ie.format():Url.prototype.format.call(ie)}Url.prototype.format=function(){var ie=this.auth||"";ie&&(ie=encodeURIComponent(ie),ie=ie.replace(/%3A/i,":"),ie+="@");var ee=this.protocol||"",te=this.pathname||"",re=this.hash||"",ne=!1,se="";this.host?ne=ie+this.host:this.hostname&&(ne=ie+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(ne+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(se=querystring.stringify(this.query));var ae=this.search||se&&"?"+se||"";return ee&&ee.substr(-1)!==":"&&(ee+=":"),this.slashes||(!ee||slashedProtocol[ee])&&ne!==!1?(ne="//"+(ne||""),te&&te.charAt(0)!=="/"&&(te="/"+te)):ne||(ne=""),re&&re.charAt(0)!=="#"&&(re="#"+re),ae&&ae.charAt(0)!=="?"&&(ae="?"+ae),te=te.replace(/[?#]/g,function(oe){return encodeURIComponent(oe)}),ae=ae.replace("#","%23"),ee+ne+te+ae+re};function urlResolve(ie,ee){return urlParse(ie,!1,!0).resolve(ee)}Url.prototype.resolve=function(ie){return this.resolveObject(urlParse(ie,!1,!0)).format()},Url.prototype.resolveObject=function(ie){if(util.isString(ie)){var ee=new Url;ee.parse(ie,!1,!0),ie=ee}for(var te=new Url,re=Object.keys(this),ne=0;ne<re.length;ne++){var se=re[ne];te[se]=this[se]}if(te.hash=ie.hash,ie.href==="")return te.href=te.format(),te;if(ie.slashes&&!ie.protocol){for(var ae=Object.keys(ie),oe=0;oe<ae.length;oe++){var le=ae[oe];le!=="protocol"&&(te[le]=ie[le])}return slashedProtocol[te.protocol]&&te.hostname&&!te.pathname&&(te.path=te.pathname="/"),te.href=te.format(),te}if(ie.protocol&&ie.protocol!==te.protocol){if(!slashedProtocol[ie.protocol]){for(var he=Object.keys(ie),ce=0;ce<he.length;ce++){var de=he[ce];te[de]=ie[de]}return te.href=te.format(),te}if(te.protocol=ie.protocol,!ie.host&&!hostlessProtocol[ie.protocol]){for(var ve=(ie.pathname||"").split("/");ve.length&&!(ie.host=ve.shift()););ie.host||(ie.host=""),ie.hostname||(ie.hostname=""),ve[0]!==""&&ve.unshift(""),ve.length<2&&ve.unshift(""),te.pathname=ve.join("/")}else te.pathname=ie.pathname;if(te.search=ie.search,te.query=ie.query,te.host=ie.host||"",te.auth=ie.auth,te.hostname=ie.hostname||ie.host,te.port=ie.port,te.pathname||te.search){var ue=te.pathname||"",fe=te.search||"";te.path=ue+fe}return te.slashes=te.slashes||ie.slashes,te.href=te.format(),te}var pe=te.pathname&&te.pathname.charAt(0)==="/",me=ie.host||ie.pathname&&ie.pathname.charAt(0)==="/",xe=me||pe||te.host&&ie.pathname,ge=xe,_e=te.pathname&&te.pathname.split("/")||[],ve=ie.pathname&&ie.pathname.split("/")||[],ye=te.protocol&&!slashedProtocol[te.protocol];if(ye&&(te.hostname="",te.port=null,te.host&&(_e[0]===""?_e[0]=te.host:_e.unshift(te.host)),te.host="",ie.protocol&&(ie.hostname=null,ie.port=null,ie.host&&(ve[0]===""?ve[0]=ie.host:ve.unshift(ie.host)),ie.host=null),xe=xe&&(ve[0]===""||_e[0]==="")),me)te.host=ie.host||ie.host===""?ie.host:te.host,te.hostname=ie.hostname||ie.hostname===""?ie.hostname:te.hostname,te.search=ie.search,te.query=ie.query,_e=ve;else if(ve.length)_e||(_e=[]),_e.pop(),_e=_e.concat(ve),te.search=ie.search,te.query=ie.query;else if(!util.isNullOrUndefined(ie.search)){if(ye){te.hostname=te.host=_e.shift();var be=te.host&&te.host.indexOf("@")>0?te.host.split("@"):!1;be&&(te.auth=be.shift(),te.host=te.hostname=be.shift())}return te.search=ie.search,te.query=ie.query,(!util.isNull(te.pathname)||!util.isNull(te.search))&&(te.path=(te.pathname?te.pathname:"")+(te.search?te.search:"")),te.href=te.format(),te}if(!_e.length)return te.pathname=null,te.search?te.path="/"+te.search:te.path=null,te.href=te.format(),te;for(var we=_e.slice(-1)[0],Se=(te.host||ie.host||_e.length>1)&&(we==="."||we==="..")||we==="",Te=0,Pe=_e.length;Pe>=0;Pe--)we=_e[Pe],we==="."?_e.splice(Pe,1):we===".."?(_e.splice(Pe,1),Te++):Te&&(_e.splice(Pe,1),Te--);if(!xe&&!ge)for(;Te--;Te)_e.unshift("..");xe&&_e[0]!==""&&(!_e[0]||_e[0].charAt(0)!=="/")&&_e.unshift(""),Se&&_e.join("/").substr(-1)!=="/"&&_e.push("");var Be=_e[0]===""||_e[0]&&_e[0].charAt(0)==="/";if(ye){te.hostname=te.host=Be?"":_e.length?_e.shift():"";var be=te.host&&te.host.indexOf("@")>0?te.host.split("@"):!1;be&&(te.auth=be.shift(),te.host=te.hostname=be.shift())}return xe=xe||te.host&&_e.length,xe&&!Be&&_e.unshift(""),_e.length?te.pathname=_e.join("/"):(te.pathname=null,te.path=null),(!util.isNull(te.pathname)||!util.isNull(te.search))&&(te.path=(te.pathname?te.pathname:"")+(te.search?te.search:"")),te.auth=ie.auth||te.auth,te.slashes=te.slashes||ie.slashes,te.href=te.format(),te},Url.prototype.parseHost=function(){var ie=this.host,ee=portPattern.exec(ie);ee&&(ee=ee[0],ee!==":"&&(this.port=ee.substr(1)),ie=ie.substr(0,ie.length-ee.length)),ie&&(this.hostname=ie)};const url={parse,format,resolve};function assertPath(ie){if(typeof ie!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(ie)}`)}function removeUrlParams(ie){return ie.split("?")[0].split("#")[0]}function escapeRegExp(ie){return ie.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(ie,ee,te){return ie.replace(new RegExp(escapeRegExp(ee),"g"),te)}function normalizeStringPosix(ie,ee){let te="",re=0,ne=-1,se=0,ae=-1;for(let oe=0;oe<=ie.length;++oe){if(oe<ie.length)ae=ie.charCodeAt(oe);else{if(ae===47)break;ae=47}if(ae===47){if(!(ne===oe-1||se===1))if(ne!==oe-1&&se===2){if(te.length<2||re!==2||te.charCodeAt(te.length-1)!==46||te.charCodeAt(te.length-2)!==46){if(te.length>2){const le=te.lastIndexOf("/");if(le!==te.length-1){le===-1?(te="",re=0):(te=te.slice(0,le),re=te.length-1-te.lastIndexOf("/")),ne=oe,se=0;continue}}else if(te.length===2||te.length===1){te="",re=0,ne=oe,se=0;continue}}ee&&(te.length>0?te+="/..":te="..",re=2)}else te.length>0?te+=`/${ie.slice(ne+1,oe)}`:te=ie.slice(ne+1,oe),re=oe-ne-1;ne=oe,se=0}else ae===46&&se!==-1?++se:se=-1}return te}const path={toPosix(ie){return replaceAll(ie,"\\","/")},isUrl(ie){return/^https?:/.test(this.toPosix(ie))},isDataUrl(ie){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(ie)},hasProtocol(ie){return/^[^/:]+:\//.test(this.toPosix(ie))},getProtocol(ie){assertPath(ie),ie=this.toPosix(ie);let ee="";const te=/^file:\/\/\//.exec(ie),re=/^[^/:]+:\/\//.exec(ie),ne=/^[^/:]+:\//.exec(ie);if(te||re||ne){const se=(te==null?void 0:te[0])||(re==null?void 0:re[0])||(ne==null?void 0:ne[0]);ee=se,ie=ie.slice(se.length)}return ee},toAbsolute(ie,ee,te){if(this.isDataUrl(ie))return ie;const re=removeUrlParams(this.toPosix(ee!=null?ee:settings.ADAPTER.getBaseUrl())),ne=removeUrlParams(this.toPosix(te!=null?te:this.rootname(re)));return assertPath(ie),ie=this.toPosix(ie),ie.startsWith("/")?path.join(ne,ie.slice(1)):this.isAbsolute(ie)?ie:this.join(re,ie)},normalize(ie){if(ie=this.toPosix(ie),assertPath(ie),ie.length===0)return".";let ee="";const te=ie.startsWith("/");this.hasProtocol(ie)&&(ee=this.rootname(ie),ie=ie.slice(ee.length));const re=ie.endsWith("/");return ie=normalizeStringPosix(ie,!1),ie.length>0&&re&&(ie+="/"),te?`/${ie}`:ee+ie},isAbsolute(ie){return assertPath(ie),ie=this.toPosix(ie),this.hasProtocol(ie)?!0:ie.startsWith("/")},join(...ie){var te;if(ie.length===0)return".";let ee;for(let re=0;re<ie.length;++re){const ne=ie[re];if(assertPath(ne),ne.length>0)if(ee===void 0)ee=ne;else{const se=(te=ie[re-1])!=null?te:"";this.extname(se)?ee+=`/../${ne}`:ee+=`/${ne}`}}return ee===void 0?".":this.normalize(ee)},dirname(ie){if(assertPath(ie),ie.length===0)return".";ie=this.toPosix(ie);let ee=ie.charCodeAt(0);const te=ee===47;let re=-1,ne=!0;const se=this.getProtocol(ie),ae=ie;ie=ie.slice(se.length);for(let oe=ie.length-1;oe>=1;--oe)if(ee=ie.charCodeAt(oe),ee===47){if(!ne){re=oe;break}}else ne=!1;return re===-1?te?"/":this.isUrl(ae)?se+ie:se:te&&re===1?"//":se+ie.slice(0,re)},rootname(ie){assertPath(ie),ie=this.toPosix(ie);let ee="";if(ie.startsWith("/")?ee="/":ee=this.getProtocol(ie),this.isUrl(ie)){const te=ie.indexOf("/",ee.length);te!==-1?ee=ie.slice(0,te):ee=ie,ee.endsWith("/")||(ee+="/")}return ee},basename(ie,ee){assertPath(ie),ee&&assertPath(ee),ie=removeUrlParams(this.toPosix(ie));let te=0,re=-1,ne=!0,se;if(ee!==void 0&&ee.length>0&&ee.length<=ie.length){if(ee.length===ie.length&&ee===ie)return"";let ae=ee.length-1,oe=-1;for(se=ie.length-1;se>=0;--se){const le=ie.charCodeAt(se);if(le===47){if(!ne){te=se+1;break}}else oe===-1&&(ne=!1,oe=se+1),ae>=0&&(le===ee.charCodeAt(ae)?--ae===-1&&(re=se):(ae=-1,re=oe))}return te===re?re=oe:re===-1&&(re=ie.length),ie.slice(te,re)}for(se=ie.length-1;se>=0;--se)if(ie.charCodeAt(se)===47){if(!ne){te=se+1;break}}else re===-1&&(ne=!1,re=se+1);return re===-1?"":ie.slice(te,re)},extname(ie){assertPath(ie),ie=removeUrlParams(this.toPosix(ie));let ee=-1,te=0,re=-1,ne=!0,se=0;for(let ae=ie.length-1;ae>=0;--ae){const oe=ie.charCodeAt(ae);if(oe===47){if(!ne){te=ae+1;break}continue}re===-1&&(ne=!1,re=ae+1),oe===46?ee===-1?ee=ae:se!==1&&(se=1):ee!==-1&&(se=-1)}return ee===-1||re===-1||se===0||se===1&&ee===re-1&&ee===te+1?"":ie.slice(ee,re)},parse(ie){assertPath(ie);const ee={root:"",dir:"",base:"",ext:"",name:""};if(ie.length===0)return ee;ie=removeUrlParams(this.toPosix(ie));let te=ie.charCodeAt(0);const re=this.isAbsolute(ie);let ne;ee.root=this.rootname(ie),re||this.hasProtocol(ie)?ne=1:ne=0;let se=-1,ae=0,oe=-1,le=!0,he=ie.length-1,ce=0;for(;he>=ne;--he){if(te=ie.charCodeAt(he),te===47){if(!le){ae=he+1;break}continue}oe===-1&&(le=!1,oe=he+1),te===46?se===-1?se=he:ce!==1&&(ce=1):se!==-1&&(ce=-1)}return se===-1||oe===-1||ce===0||ce===1&&se===oe-1&&se===ae+1?oe!==-1&&(ae===0&&re?ee.base=ee.name=ie.slice(1,oe):ee.base=ee.name=ie.slice(ae,oe)):(ae===0&&re?(ee.name=ie.slice(1,se),ee.base=ie.slice(1,oe)):(ee.name=ie.slice(ae,se),ee.base=ie.slice(ae,oe)),ee.ext=ie.slice(se,oe)),ee.dir=this.dirname(ie),ee},sep:"/",delimiter:":"},warnings={};function deprecation(ie,ee,te=3){if(warnings[ee])return;let re=new Error().stack;typeof re=="undefined"?console.warn("PixiJS Deprecation Warning: ",`${ee}
Deprecated since v${ie}`):(re=re.split(`
`).splice(te).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${ee}
Deprecated since v${ie}`),console.warn(re),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${ee}
Deprecated since v${ie}`),console.warn(re))),warnings[ee]=!0}let supported;function isWebGLSupported(){return typeof supported=="undefined"&&(supported=function(){var te;const ee={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings.ADAPTER.getWebGLRenderingContext())return!1;const re=settings.ADAPTER.createCanvas();let ne=re.getContext("webgl",ee)||re.getContext("experimental-webgl",ee);const se=!!((te=ne==null?void 0:ne.getContextAttributes())!=null&&te.stencil);if(ne){const ae=ne.getExtension("WEBGL_lose_context");ae&&ae.loseContext()}return ne=null,se}catch{return!1}}()),supported}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(ie){return typeof ie=="string"?ie.length>0:typeof ie=="number"},n=function(ie,ee,te){return ee===void 0&&(ee=0),te===void 0&&(te=Math.pow(10,ee)),Math.round(te*ie)/te+0},e=function(ie,ee,te){return ee===void 0&&(ee=0),te===void 0&&(te=1),ie>te?te:ie>ee?ie:ee},u=function(ie){return(ie=isFinite(ie)?ie%360:0)>0?ie:ie+360},a=function(ie){return{r:e(ie.r,0,255),g:e(ie.g,0,255),b:e(ie.b,0,255),a:e(ie.a)}},o=function(ie){return{r:n(ie.r),g:n(ie.g),b:n(ie.b),a:n(ie.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(ie){var ee=ie.toString(16);return ee.length<2?"0"+ee:ee},h=function(ie){var ee=ie.r,te=ie.g,re=ie.b,ne=ie.a,se=Math.max(ee,te,re),ae=se-Math.min(ee,te,re),oe=ae?se===ee?(te-re)/ae:se===te?2+(re-ee)/ae:4+(ee-te)/ae:0;return{h:60*(oe<0?oe+6:oe),s:se?ae/se*100:0,v:se/255*100,a:ne}},b=function(ie){var ee=ie.h,te=ie.s,re=ie.v,ne=ie.a;ee=ee/360*6,te/=100,re/=100;var se=Math.floor(ee),ae=re*(1-te),oe=re*(1-(ee-se)*te),le=re*(1-(1-ee+se)*te),he=se%6;return{r:255*[re,oe,ae,ae,le,re][he],g:255*[le,re,re,oe,ae,ae][he],b:255*[ae,ae,le,re,re,oe][he],a:ne}},g=function(ie){return{h:u(ie.h),s:e(ie.s,0,100),l:e(ie.l,0,100),a:e(ie.a)}},d=function(ie){return{h:n(ie.h),s:n(ie.s),l:n(ie.l),a:n(ie.a,3)}},f=function(ie){return b((te=(ee=ie).s,{h:ee.h,s:(te*=((re=ee.l)<50?re:100-re)/100)>0?2*te/(re+te)*100:0,v:re+te,a:ee.a}));var ee,te,re},c=function(ie){return{h:(ee=h(ie)).h,s:(ne=(200-(te=ee.s))*(re=ee.v)/100)>0&&ne<200?te*re/100/(ne<=100?ne:200-ne)*100:0,l:ne/2,a:ee.a};var ee,te,re,ne},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(ie){var ee=i.exec(ie);return ee?(ie=ee[1]).length<=4?{r:parseInt(ie[0]+ie[0],16),g:parseInt(ie[1]+ie[1],16),b:parseInt(ie[2]+ie[2],16),a:ie.length===4?n(parseInt(ie[3]+ie[3],16)/255,2):1}:ie.length===6||ie.length===8?{r:parseInt(ie.substr(0,2),16),g:parseInt(ie.substr(2,2),16),b:parseInt(ie.substr(4,2),16),a:ie.length===8?n(parseInt(ie.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(ie){var ee=v.exec(ie)||m.exec(ie);return ee?ee[2]!==ee[4]||ee[4]!==ee[6]?null:a({r:Number(ee[1])/(ee[2]?100/255:1),g:Number(ee[3])/(ee[4]?100/255:1),b:Number(ee[5])/(ee[6]?100/255:1),a:ee[7]===void 0?1:Number(ee[7])/(ee[8]?100:1)}):null},"rgb"],[function(ie){var ee=l.exec(ie)||p.exec(ie);if(!ee)return null;var te,re,ne=g({h:(te=ee[1],re=ee[2],re===void 0&&(re="deg"),Number(te)*(r[re]||1)),s:Number(ee[3]),l:Number(ee[4]),a:ee[5]===void 0?1:Number(ee[5])/(ee[6]?100:1)});return f(ne)},"hsl"]],object:[[function(ie){var ee=ie.r,te=ie.g,re=ie.b,ne=ie.a,se=ne===void 0?1:ne;return t(ee)&&t(te)&&t(re)?a({r:Number(ee),g:Number(te),b:Number(re),a:Number(se)}):null},"rgb"],[function(ie){var ee=ie.h,te=ie.s,re=ie.l,ne=ie.a,se=ne===void 0?1:ne;if(!t(ee)||!t(te)||!t(re))return null;var ae=g({h:Number(ee),s:Number(te),l:Number(re),a:Number(se)});return f(ae)},"hsl"],[function(ie){var ee=ie.h,te=ie.s,re=ie.v,ne=ie.a,se=ne===void 0?1:ne;if(!t(ee)||!t(te)||!t(re))return null;var ae=function(oe){return{h:u(oe.h),s:e(oe.s,0,100),v:e(oe.v,0,100),a:e(oe.a)}}({h:Number(ee),s:Number(te),v:Number(re),a:Number(se)});return b(ae)},"hsv"]]},N=function(ie,ee){for(var te=0;te<ee.length;te++){var re=ee[te][0](ie);if(re)return[re,ee[te][1]]}return[null,void 0]},x=function(ie){return typeof ie=="string"?N(ie.trim(),y.string):typeof ie=="object"&&ie!==null?N(ie,y.object):[null,void 0]},M=function(ie,ee){var te=c(ie);return{h:te.h,s:e(te.s+100*ee,0,100),l:te.l,a:te.a}},H=function(ie){return(299*ie.r+587*ie.g+114*ie.b)/1e3/255},$$1=function(ie,ee){var te=c(ie);return{h:te.h,s:te.s,l:e(te.l+100*ee,0,100),a:te.a}},j=function(){function ie(ee){this.parsed=x(ee)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return ie.prototype.isValid=function(){return this.parsed!==null},ie.prototype.brightness=function(){return n(H(this.rgba),2)},ie.prototype.isDark=function(){return H(this.rgba)<.5},ie.prototype.isLight=function(){return H(this.rgba)>=.5},ie.prototype.toHex=function(){return ee=o(this.rgba),te=ee.r,re=ee.g,ne=ee.b,ae=(se=ee.a)<1?s(n(255*se)):"","#"+s(te)+s(re)+s(ne)+ae;var ee,te,re,ne,se,ae},ie.prototype.toRgb=function(){return o(this.rgba)},ie.prototype.toRgbString=function(){return ee=o(this.rgba),te=ee.r,re=ee.g,ne=ee.b,(se=ee.a)<1?"rgba("+te+", "+re+", "+ne+", "+se+")":"rgb("+te+", "+re+", "+ne+")";var ee,te,re,ne,se},ie.prototype.toHsl=function(){return d(c(this.rgba))},ie.prototype.toHslString=function(){return ee=d(c(this.rgba)),te=ee.h,re=ee.s,ne=ee.l,(se=ee.a)<1?"hsla("+te+", "+re+"%, "+ne+"%, "+se+")":"hsl("+te+", "+re+"%, "+ne+"%)";var ee,te,re,ne,se},ie.prototype.toHsv=function(){return ee=h(this.rgba),{h:n(ee.h),s:n(ee.s),v:n(ee.v),a:n(ee.a,3)};var ee},ie.prototype.invert=function(){return w({r:255-(ee=this.rgba).r,g:255-ee.g,b:255-ee.b,a:ee.a});var ee},ie.prototype.saturate=function(ee){return ee===void 0&&(ee=.1),w(M(this.rgba,ee))},ie.prototype.desaturate=function(ee){return ee===void 0&&(ee=.1),w(M(this.rgba,-ee))},ie.prototype.grayscale=function(){return w(M(this.rgba,-1))},ie.prototype.lighten=function(ee){return ee===void 0&&(ee=.1),w($$1(this.rgba,ee))},ie.prototype.darken=function(ee){return ee===void 0&&(ee=.1),w($$1(this.rgba,-ee))},ie.prototype.rotate=function(ee){return ee===void 0&&(ee=15),this.hue(this.hue()+ee)},ie.prototype.alpha=function(ee){return typeof ee=="number"?w({r:(te=this.rgba).r,g:te.g,b:te.b,a:ee}):n(this.rgba.a,3);var te},ie.prototype.hue=function(ee){var te=c(this.rgba);return typeof ee=="number"?w({h:ee,s:te.s,l:te.l,a:te.a}):n(te.h)},ie.prototype.isEqual=function(ee){return this.toHex()===w(ee).toHex()},ie}(),w=function(ie){return ie instanceof j?ie:new j(ie)},S=[],k=function(ie){ie.forEach(function(ee){S.indexOf(ee)<0&&(ee(j,y),S.push(ee))})};function namesPlugin(ie,ee){var te={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},re={};for(var ne in te)re[te[ne]]=ne;var se={};ie.prototype.toName=function(ae){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var oe,le,he=re[this.toHex()];if(he)return he;if(ae!=null&&ae.closest){var ce=this.toRgb(),de=1/0,ue="black";if(!se.length)for(var fe in te)se[fe]=new ie(te[fe]).toRgb();for(var pe in te){var me=(oe=ce,le=se[pe],Math.pow(oe.r-le.r,2)+Math.pow(oe.g-le.g,2)+Math.pow(oe.b-le.b,2));me<de&&(de=me,ue=pe)}return ue}},ee.string.push([function(ae){var oe=ae.toLowerCase(),le=oe==="transparent"?"#0000":te[oe];return le?new ie(le).toRgb():null},"name"])}k([namesPlugin]);const _Color=class{constructor(ie=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=ie}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(ie){return this.value=ie,this}set value(ie){if(ie instanceof _Color)this._value=this.cloneSource(ie._value),this._int=ie._int,this._components.set(ie._components);else{if(ie===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,ie))&&(this.normalize(ie),this._value=this.cloneSource(ie))}}get value(){return this._value}cloneSource(ie){return typeof ie=="string"||typeof ie=="number"||ie instanceof Number||ie===null?ie:Array.isArray(ie)||ArrayBuffer.isView(ie)?ie.slice(0):typeof ie=="object"&&ie!==null?{...ie}:ie}isSourceEqual(ie,ee){const te=typeof ie;if(te!==typeof ee)return!1;if(te==="number"||te==="string"||ie instanceof Number)return ie===ee;if(Array.isArray(ie)&&Array.isArray(ee)||ArrayBuffer.isView(ie)&&ArrayBuffer.isView(ee))return ie.length!==ee.length?!1:ie.every((ne,se)=>ne===ee[se]);if(ie!==null&&ee!==null){const ne=Object.keys(ie),se=Object.keys(ee);return ne.length!==se.length?!1:ne.every(ae=>ie[ae]===ee[ae])}return ie===ee}toRgba(){const[ie,ee,te,re]=this._components;return{r:ie,g:ee,b:te,a:re}}toRgb(){const[ie,ee,te]=this._components;return{r:ie,g:ee,b:te}}toRgbaString(){const[ie,ee,te]=this.toUint8RgbArray();return`rgba(${ie},${ee},${te},${this.alpha})`}toUint8RgbArray(ie){const[ee,te,re]=this._components;return ie=ie!=null?ie:[],ie[0]=Math.round(ee*255),ie[1]=Math.round(te*255),ie[2]=Math.round(re*255),ie}toRgbArray(ie){ie=ie!=null?ie:[];const[ee,te,re]=this._components;return ie[0]=ee,ie[1]=te,ie[2]=re,ie}toNumber(){return this._int}toLittleEndianNumber(){const ie=this._int;return(ie>>16)+(ie&65280)+((ie&255)<<16)}multiply(ie){const[ee,te,re,ne]=_Color.temp.setValue(ie)._components;return this._components[0]*=ee,this._components[1]*=te,this._components[2]*=re,this._components[3]*=ne,this.refreshInt(),this._value=null,this}premultiply(ie,ee=!0){return ee&&(this._components[0]*=ie,this._components[1]*=ie,this._components[2]*=ie),this._components[3]=ie,this.refreshInt(),this._value=null,this}toPremultiplied(ie,ee=!0){if(ie===1)return(255<<24)+this._int;if(ie===0)return ee?0:this._int;let te=this._int>>16&255,re=this._int>>8&255,ne=this._int&255;return ee&&(te=te*ie+.5|0,re=re*ie+.5|0,ne=ne*ie+.5|0),(ie*255<<24)+(te<<16)+(re<<8)+ne}toHex(){const ie=this._int.toString(16);return`#${"000000".substring(0,6-ie.length)+ie}`}toHexa(){const ee=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-ee.length)+ee}setAlpha(ie){return this._components[3]=this._clamp(ie),this}round(ie){const[ee,te,re]=this._components;return this._components[0]=Math.round(ee*ie)/ie,this._components[1]=Math.round(te*ie)/ie,this._components[2]=Math.round(re*ie)/ie,this.refreshInt(),this._value=null,this}toArray(ie){ie=ie!=null?ie:[];const[ee,te,re,ne]=this._components;return ie[0]=ee,ie[1]=te,ie[2]=re,ie[3]=ne,ie}normalize(ie){let ee,te,re,ne;if((typeof ie=="number"||ie instanceof Number)&&ie>=0&&ie<=16777215){const se=ie;ee=(se>>16&255)/255,te=(se>>8&255)/255,re=(se&255)/255,ne=1}else if((Array.isArray(ie)||ie instanceof Float32Array)&&ie.length>=3&&ie.length<=4)ie=this._clamp(ie),[ee,te,re,ne=1]=ie;else if((ie instanceof Uint8Array||ie instanceof Uint8ClampedArray)&&ie.length>=3&&ie.length<=4)ie=this._clamp(ie,0,255),[ee,te,re,ne=255]=ie,ee/=255,te/=255,re/=255,ne/=255;else if(typeof ie=="string"||typeof ie=="object"){if(typeof ie=="string"){const ae=_Color.HEX_PATTERN.exec(ie);ae&&(ie=`#${ae[2]}`)}const se=w(ie);se.isValid()&&({r:ee,g:te,b:re,a:ne}=se.rgba,ee/=255,te/=255,re/=255)}if(ee!==void 0)this._components[0]=ee,this._components[1]=te,this._components[2]=re,this._components[3]=ne,this.refreshInt();else throw new Error(`Unable to convert color ${ie}`)}refreshInt(){this._clamp(this._components);const[ie,ee,te]=this._components;this._int=(ie*255<<16)+(ee*255<<8)+(te*255|0)}_clamp(ie,ee=0,te=1){return typeof ie=="number"?Math.min(Math.max(ie,ee),te):(ie.forEach((re,ne)=>{ie[ne]=Math.min(Math.max(re,ee),te)}),ie)}};let Color=_Color;Color.shared=new _Color,Color.temp=new _Color,Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function hex2string(ie){return deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Color.shared.setValue(ie).toHex()}function rgb2hex(ie){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Color.shared.setValue(ie).toNumber()}function mapPremultipliedBlendModes(){const ie=[],ee=[];for(let re=0;re<32;re++)ie[re]=re,ee[re]=re;ie[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,ie[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,ie[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,ee[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,ee[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,ee[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const te=[];return te.push(ee),te.push(ie),te}const premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(ie,ee){return premultiplyBlendMode[ee?1:0][ie]}function createIndicesForQuads(ie,ee=null){const te=ie*6;if(ee=ee||new Uint16Array(te),ee.length!==te)throw new Error(`Out buffer length is incorrect, got ${ee.length} and expected ${te}`);for(let re=0,ne=0;re<te;re+=6,ne+=4)ee[re+0]=ne+0,ee[re+1]=ne+1,ee[re+2]=ne+2,ee[re+3]=ne+0,ee[re+4]=ne+2,ee[re+5]=ne+3;return ee}function getBufferType(ie){if(ie.BYTES_PER_ELEMENT===4)return ie instanceof Float32Array?"Float32Array":ie instanceof Uint32Array?"Uint32Array":"Int32Array";if(ie.BYTES_PER_ELEMENT===2){if(ie instanceof Uint16Array)return"Uint16Array"}else if(ie.BYTES_PER_ELEMENT===1&&ie instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(ie){return ie+=ie===0?1:0,--ie,ie|=ie>>>1,ie|=ie>>>2,ie|=ie>>>4,ie|=ie>>>8,ie|=ie>>>16,ie+1}function isPow2(ie){return!(ie&ie-1)&&!!ie}function log2(ie){let ee=(ie>65535?1:0)<<4;ie>>>=ee;let te=(ie>255?1:0)<<3;return ie>>>=te,ee|=te,te=(ie>15?1:0)<<2,ie>>>=te,ee|=te,te=(ie>3?1:0)<<1,ie>>>=te,ee|=te,ee|ie>>1}function removeItems(ie,ee,te){const re=ie.length;let ne;if(ee>=re||te===0)return;te=ee+te>re?re-ee:te;const se=re-te;for(ne=ee;ne<se;++ne)ie[ne]=ie[ne+te];ie.length=se}function sign(ie){return ie===0?0:ie<0?-1:1}let nextUid=0;function uid(){return++nextUid}const _BoundingBox=class{constructor(ie,ee,te,re){this.left=ie,this.top=ee,this.right=te,this.bottom=re}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let BoundingBox=_BoundingBox;BoundingBox.EMPTY=new _BoundingBox(0,0,0,0);const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);class CanvasRenderTarget{constructor(ee,te,re){this._canvas=settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=re||settings.RESOLUTION,this.resize(ee,te)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(ee,te){this._checkDestroyed(),this._canvas.width=Math.round(ee*this.resolution),this._canvas.height=Math.round(te*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(ee){this._checkDestroyed(),this._canvas.width=Math.round(ee)}get height(){return this._checkDestroyed(),this._canvas.height}set height(ee){this._checkDestroyed(),this._canvas.height=Math.round(ee)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function checkRow(ie,ee,te){for(let re=0,ne=4*te*ee;re<ee;++re,ne+=4)if(ie[ne+3]!==0)return!1;return!0}function checkColumn(ie,ee,te,re,ne){const se=4*ee;for(let ae=re,oe=re*se+4*te;ae<=ne;++ae,oe+=se)if(ie[oe+3]!==0)return!1;return!0}function getCanvasBoundingBox(ie){const{width:ee,height:te}=ie,re=ie.getContext("2d",{willReadFrequently:!0});if(re===null)throw new TypeError("Failed to get canvas 2D context");const se=re.getImageData(0,0,ee,te).data;let ae=0,oe=0,le=ee-1,he=te-1;for(;oe<te&&checkRow(se,ee,oe);)++oe;if(oe===te)return BoundingBox.EMPTY;for(;checkRow(se,ee,he);)--he;for(;checkColumn(se,ee,ae,oe,he);)++ae;for(;checkColumn(se,ee,le,oe,he);)--le;return++le,++he,new BoundingBox(ae,oe,le,he)}function trimCanvas(ie){const ee=getCanvasBoundingBox(ie),{width:te,height:re}=ee;let ne=null;if(!ee.isEmpty()){const se=ie.getContext("2d");if(se===null)throw new TypeError("Failed to get canvas 2D context");ne=se.getImageData(ee.left,ee.top,te,re)}return{width:te,height:re,data:ne}}let tempAnchor;function determineCrossOrigin(ie,ee=globalThis.location){if(ie.startsWith("data:"))return"";ee=ee||globalThis.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=ie;const te=url.parse(tempAnchor.href),re=!te.port&&ee.port===""||te.port===ee.port;return te.hostname!==ee.hostname||!re||te.protocol!==ee.protocol?"anonymous":""}function getResolutionOfUrl(ie,ee=1){var re;const te=(re=settings.RETINA_PREFIX)==null?void 0:re.exec(ie);return te?parseFloat(te[1]):ee}var ExtensionType=(ie=>(ie.Renderer="renderer",ie.Application="application",ie.RendererSystem="renderer-webgl-system",ie.RendererPlugin="renderer-webgl-plugin",ie.CanvasRendererSystem="renderer-canvas-system",ie.CanvasRendererPlugin="renderer-canvas-plugin",ie.Asset="asset",ie.LoadParser="load-parser",ie.ResolveParser="resolve-parser",ie.CacheParser="cache-parser",ie.DetectionParser="detection-parser",ie))(ExtensionType||{});const normalizeExtension=ie=>{if(typeof ie=="function"||typeof ie=="object"&&ie.extension){if(!ie.extension)throw new Error("Extension class must have an extension object");ie={...typeof ie.extension!="object"?{type:ie.extension}:ie.extension,ref:ie}}if(typeof ie=="object")ie={...ie};else throw new Error("Invalid extension type");return typeof ie.type=="string"&&(ie.type=[ie.type]),ie},normalizePriority=(ie,ee)=>{var te;return(te=normalizeExtension(ie).priority)!=null?te:ee},extensions$1={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...ie){return ie.map(normalizeExtension).forEach(ee=>{ee.type.forEach(te=>{var re,ne;return(ne=(re=this._removeHandlers)[te])==null?void 0:ne.call(re,ee)})}),this},add(...ie){return ie.map(normalizeExtension).forEach(ee=>{ee.type.forEach(te=>{const re=this._addHandlers,ne=this._queue;re[te]?re[te](ee):(ne[te]=ne[te]||[],ne[te].push(ee))})}),this},handle(ie,ee,te){const re=this._addHandlers,ne=this._removeHandlers;if(re[ie]||ne[ie])throw new Error(`Extension type ${ie} already has a handler`);re[ie]=ee,ne[ie]=te;const se=this._queue;return se[ie]&&(se[ie].forEach(ae=>ee(ae)),delete se[ie]),this},handleByMap(ie,ee){return this.handle(ie,te=>{ee[te.name]=te.ref},te=>{delete ee[te.name]})},handleByList(ie,ee,te=-1){return this.handle(ie,re=>{ee.includes(re.ref)||(ee.push(re.ref),ee.sort((ne,se)=>normalizePriority(se,te)-normalizePriority(ne,te)))},re=>{const ne=ee.indexOf(re.ref);ne!==-1&&ee.splice(ne,1)})}};class ViewableBuffer{constructor(ee){typeof ee=="number"?this.rawBinaryData=new ArrayBuffer(ee):ee instanceof Uint8Array?this.rawBinaryData=ee.buffer:this.rawBinaryData=ee,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(ee){return this[`${ee}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(ee){switch(ee){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${ee} isn't a valid view type`)}}}const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(ie){let ee="";for(let te=0;te<ie;++te)te>0&&(ee+=`
else `),te<ie-1&&(ee+=`if(test == ${te}.0){}`);return ee}function checkMaxIfStatementsInShader(ie,ee){if(ie===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const te=ee.createShader(ee.FRAGMENT_SHADER);for(;;){const re=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(ie));if(ee.shaderSource(te,re),ee.compileShader(te),!ee.getShaderParameter(te,ee.COMPILE_STATUS))ie=ie/2|0;else break}return ie}const BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(ee){!!(this.data&1<<BLEND$1)!==ee&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(ee){!!(this.data&1<<OFFSET$1)!==ee&&(this.data^=1<<OFFSET$1)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(ee){!!(this.data&1<<CULLING$1)!==ee&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(ee){!!(this.data&1<<DEPTH_TEST$1)!==ee&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(ee){!!(this.data&1<<DEPTH_MASK$1)!==ee&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(ee){!!(this.data&1<<WINDING$1)!==ee&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(ee){this.blend=ee!==BLEND_MODES.NONE,this._blendMode=ee}get polygonOffset(){return this._polygonOffset}set polygonOffset(ee){this.offsets=!!ee,this._polygonOffset=ee}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const ee=new State;return ee.depthTest=!1,ee.blend=!0,ee}}const INSTALLED=[];function autoDetectResource(ie,ee){if(!ie)return null;let te="";if(typeof ie=="string"){const re=/\.(\w{3,4})(?:$|\?|#)/i.exec(ie);re&&(te=re[1].toLowerCase())}for(let re=INSTALLED.length-1;re>=0;--re){const ne=INSTALLED[re];if(ne.test&&ne.test(ie,te))return new ne(ie,ee)}throw new Error("Unrecognized source type to auto-detect Resource")}class Runner{constructor(ee){this.items=[],this._name=ee,this._aliasCount=0}emit(ee,te,re,ne,se,ae,oe,le){if(arguments.length>8)throw new Error("max arguments reached");const{name:he,items:ce}=this;this._aliasCount++;for(let de=0,ue=ce.length;de<ue;de++)ce[de][he](ee,te,re,ne,se,ae,oe,le);return ce===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(ee){return ee[this._name]&&(this.ensureNonAliasedItems(),this.remove(ee),this.items.push(ee)),this}remove(ee){const te=this.items.indexOf(ee);return te!==-1&&(this.ensureNonAliasedItems(),this.items.splice(te,1)),this}contains(ee){return this.items.includes(ee)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});class Resource{constructor(ee=0,te=0){this._width=ee,this._height=te,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(ee){this.onResize.add(ee),this.onUpdate.add(ee),this.onError.add(ee),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(ee){this.onResize.remove(ee),this.onUpdate.remove(ee),this.onError.remove(ee)}resize(ee,te){(ee!==this._width||te!==this._height)&&(this._width=ee,this._height=te,this.onResize.emit(ee,te))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(ee,te,re){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(ee,te){return!1}}class BufferResource extends Resource{constructor(ee,te){const{width:re,height:ne}=te||{};if(!re||!ne)throw new Error("BufferResource width or height invalid");super(re,ne),this.data=ee}upload(ee,te,re){const ne=ee.gl;ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.alphaMode===ALPHA_MODES.UNPACK);const se=te.realWidth,ae=te.realHeight;return re.width===se&&re.height===ae?ne.texSubImage2D(te.target,0,0,0,se,ae,te.format,re.type,this.data):(re.width=se,re.height=ae,ne.texImage2D(te.target,0,re.internalFormat,se,ae,0,te.format,re.type,this.data)),!0}dispose(){this.data=null}static test(ee){return ee instanceof Float32Array||ee instanceof Uint8Array||ee instanceof Uint32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,format:FORMATS.RGBA,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class extends EventEmitter{constructor(ie=null,ee=null){super(),ee=Object.assign({},_BaseTexture.defaultOptions,ee);const{alphaMode:te,mipmap:re,anisotropicLevel:ne,scaleMode:se,width:ae,height:oe,wrapMode:le,format:he,type:ce,target:de,resolution:ue,resourceOptions:fe}=ee;ie&&!(ie instanceof Resource)&&(ie=autoDetectResource(ie,fe),ie.internal=!0),this.resolution=ue||settings.RESOLUTION,this.width=Math.round((ae||0)*this.resolution)/this.resolution,this.height=Math.round((oe||0)*this.resolution)/this.resolution,this._mipmap=re,this.anisotropicLevel=ne,this._wrapMode=le,this._scaleMode=se,this.format=he,this.type=ce,this.target=de,this.alphaMode=te,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=ae>0&&oe>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(ie)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(ie){this._mipmap!==ie&&(this._mipmap=ie,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(ie){this._scaleMode!==ie&&(this._scaleMode=ie,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(ie){this._wrapMode!==ie&&(this._wrapMode=ie,this.dirtyStyleId++)}setStyle(ie,ee){let te;return ie!==void 0&&ie!==this.scaleMode&&(this.scaleMode=ie,te=!0),ee!==void 0&&ee!==this.mipmap&&(this.mipmap=ee,te=!0),te&&this.dirtyStyleId++,this}setSize(ie,ee,te){return te=te||this.resolution,this.setRealSize(ie*te,ee*te,te)}setRealSize(ie,ee,te){return this.resolution=te||this.resolution,this.width=Math.round(ie)/this.resolution,this.height=Math.round(ee)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(ie){const ee=this.resolution;return ee===ie?this:(this.resolution=ie,this.valid&&(this.width=Math.round(this.width*ee)/ie,this.height=Math.round(this.height*ee)/ie,this.emit("update",this)),this._refreshPOT(),this)}setResource(ie){if(this.resource===ie)return this;if(this.resource)throw new Error("Resource can be set only once");return ie.bind(this),this.resource=ie,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(ie){this.emit("error",this,ie)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.dispose(),_BaseTexture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(ie,ee,te=settings.STRICT_TEXTURE_CACHE){const re=typeof ie=="string";let ne=null;if(re)ne=ie;else{if(!ie._pixiId){const ae=(ee==null?void 0:ee.pixiIdPrefix)||"pixiid";ie._pixiId=`${ae}_${uid()}`}ne=ie._pixiId}let se=BaseTextureCache[ne];if(re&&te&&!se)throw new Error(`The cacheId "${ne}" does not exist in BaseTextureCache.`);return se||(se=new _BaseTexture(ie,ee),se.cacheId=ne,_BaseTexture.addToCache(se,ne)),se}static fromBuffer(ie,ee,te,re){ie=ie||new Float32Array(ee*te*4);const ne=new BufferResource(ie,{width:ee,height:te}),se=ie instanceof Float32Array?TYPES.FLOAT:TYPES.UNSIGNED_BYTE;return new _BaseTexture(ne,Object.assign({},defaultBufferOptions,{type:se},re))}static addToCache(ie,ee){ee&&(ie.textureCacheIds.includes(ee)||ie.textureCacheIds.push(ee),BaseTextureCache[ee]&&BaseTextureCache[ee]!==ie&&console.warn(`BaseTexture added to the cache with an id [${ee}] that already had an entry`),BaseTextureCache[ee]=ie)}static removeFromCache(ie){if(typeof ie=="string"){const ee=BaseTextureCache[ie];if(ee){const te=ee.textureCacheIds.indexOf(ie);return te>-1&&ee.textureCacheIds.splice(te,1),delete BaseTextureCache[ie],ee}}else if(ie!=null&&ie.textureCacheIds){for(let ee=0;ee<ie.textureCacheIds.length;++ee)delete BaseTextureCache[ie.textureCacheIds[ee]];return ie.textureCacheIds.length=0,ie}return null}};let BaseTexture=_BaseTexture;BaseTexture.defaultOptions={mipmap:MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:SCALE_MODES.LINEAR,wrapMode:WRAP_MODES.CLAMP,alphaMode:ALPHA_MODES.UNPACK,target:TARGETS.TEXTURE_2D,format:FORMATS.RGBA,type:TYPES.UNSIGNED_BYTE},BaseTexture._globalBatch=0;class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}let UID$4=0;class Buffer{constructor(ee,te=!0,re=!1){this.data=ee||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=re,this.static=te,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(ee){ee instanceof Array&&(ee=new Float32Array(ee)),this.data=ee||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(ee){this.type=ee?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(ee){return ee instanceof Array&&(ee=new Float32Array(ee)),new Buffer(ee)}}class Attribute{constructor(ee,te=0,re=!1,ne=TYPES.FLOAT,se,ae,oe,le=1){this.buffer=ee,this.size=te,this.normalized=re,this.type=ne,this.stride=se,this.start=ae,this.instance=oe,this.divisor=le}destroy(){this.buffer=null}static from(ee,te,re,ne,se){return new Attribute(ee,te,re,ne,se)}}const map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(ie,ee){let te=0,re=0;const ne={};for(let le=0;le<ie.length;le++)re+=ee[le],te+=ie[le].length;const se=new ArrayBuffer(te*4);let ae=null,oe=0;for(let le=0;le<ie.length;le++){const he=ee[le],ce=ie[le],de=getBufferType(ce);ne[de]||(ne[de]=new map$1[de](se)),ae=ne[de];for(let ue=0;ue<ce.length;ue++){const fe=(ue/he|0)*re+oe,pe=ue%he;ae[fe+pe]=ce[ue]}oe+=he}return new Float32Array(se)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(ee=[],te={}){this.buffers=ee,this.indexBuffer=null,this.attributes=te,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(ee,te,re=0,ne=!1,se,ae,oe,le=!1){if(!te)throw new Error("You must pass a buffer when creating an attribute");te instanceof Buffer||(te instanceof Array&&(te=new Float32Array(te)),te=new Buffer(te));const he=ee.split("|");if(he.length>1){for(let de=0;de<he.length;de++)this.addAttribute(he[de],te,re,ne,se);return this}let ce=this.buffers.indexOf(te);return ce===-1&&(this.buffers.push(te),ce=this.buffers.length-1),this.attributes[ee]=new Attribute(ce,re,ne,se,ae,oe,le),this.instanced=this.instanced||le,this}getAttribute(ee){return this.attributes[ee]}getBuffer(ee){return this.buffers[this.getAttribute(ee).buffer]}addIndex(ee){return ee instanceof Buffer||(ee instanceof Array&&(ee=new Uint16Array(ee)),ee=new Buffer(ee)),ee.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=ee,this.buffers.includes(ee)||this.buffers.push(ee),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const ee=[],te=[],re=new Buffer;let ne;for(ne in this.attributes){const se=this.attributes[ne],ae=this.buffers[se.buffer];ee.push(ae.data),te.push(se.size*byteSizeMap$1[se.type]/4),se.buffer=0}for(re.data=interleaveTypedArrays(ee,te),ne=0;ne<this.buffers.length;ne++)this.buffers[ne]!==this.indexBuffer&&this.buffers[ne].destroy();return this.buffers=[re],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const ee in this.attributes){const te=this.attributes[ee];return this.buffers[te.buffer].data.length/(te.stride/4||te.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const ee=new Geometry;for(let te=0;te<this.buffers.length;te++)ee.buffers[te]=new Buffer(this.buffers[te].data.slice(0));for(const te in this.attributes){const re=this.attributes[te];ee.attributes[te]=new Attribute(re.buffer,re.size,re.normalized,re.type,re.stride,re.start,re.instance)}return this.indexBuffer&&(ee.indexBuffer=ee.buffers[this.buffers.indexOf(this.indexBuffer)],ee.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),ee}static merge(ee){const te=new Geometry,re=[],ne=[],se=[];let ae;for(let oe=0;oe<ee.length;oe++){ae=ee[oe];for(let le=0;le<ae.buffers.length;le++)ne[le]=ne[le]||0,ne[le]+=ae.buffers[le].data.length,se[le]=0}for(let oe=0;oe<ae.buffers.length;oe++)re[oe]=new map[getBufferType(ae.buffers[oe].data)](ne[oe]),te.buffers[oe]=new Buffer(re[oe]);for(let oe=0;oe<ee.length;oe++){ae=ee[oe];for(let le=0;le<ae.buffers.length;le++)re[le].set(ae.buffers[le].data,se[le]),se[le]+=ae.buffers[le].data.length}if(te.attributes=ae.attributes,ae.indexBuffer){te.indexBuffer=te.buffers[ae.buffers.indexOf(ae.indexBuffer)],te.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let oe=0,le=0,he=0,ce=0;for(let de=0;de<ae.buffers.length;de++)if(ae.buffers[de]!==ae.indexBuffer){ce=de;break}for(const de in ae.attributes){const ue=ae.attributes[de];(ue.buffer|0)===ce&&(le+=ue.size*byteSizeMap$1[ue.type]/4)}for(let de=0;de<ee.length;de++){const ue=ee[de].indexBuffer.data;for(let fe=0;fe<ue.length;fe++)te.indexBuffer.data[fe+he]+=oe;oe+=ee[de].buffers[ce].data.length/le,he+=ue.length}}return te}}class BatchGeometry extends Geometry{constructor(ee=!1){super(),this._buffer=new Buffer(null,ee,!1),this._indexBuffer=new Buffer(null,ee,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}const PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(ie=>(ie[ie.POLY=0]="POLY",ie[ie.RECT=1]="RECT",ie[ie.CIRC=2]="CIRC",ie[ie.ELIP=3]="ELIP",ie[ie.RREC=4]="RREC",ie))(SHAPES||{});class Point{constructor(ee=0,te=0){this.x=0,this.y=0,this.x=ee,this.y=te}clone(){return new Point(this.x,this.y)}copyFrom(ee){return this.set(ee.x,ee.y),this}copyTo(ee){return ee.set(this.x,this.y),ee}equals(ee){return ee.x===this.x&&ee.y===this.y}set(ee=0,te=ee){return this.x=ee,this.y=te,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const tempPoints$1=[new Point,new Point,new Point,new Point];class Rectangle{constructor(ee=0,te=0,re=0,ne=0){this.x=Number(ee),this.y=Number(te),this.width=Number(re),this.height=Number(ne),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(ee){return this.x=ee.x,this.y=ee.y,this.width=ee.width,this.height=ee.height,this}copyTo(ee){return ee.x=this.x,ee.y=this.y,ee.width=this.width,ee.height=this.height,ee}contains(ee,te){return this.width<=0||this.height<=0?!1:ee>=this.x&&ee<this.x+this.width&&te>=this.y&&te<this.y+this.height}intersects(ee,te){if(!te){const Te=this.x<ee.x?ee.x:this.x;if((this.right>ee.right?ee.right:this.right)<=Te)return!1;const Be=this.y<ee.y?ee.y:this.y;return(this.bottom>ee.bottom?ee.bottom:this.bottom)>Be}const re=this.left,ne=this.right,se=this.top,ae=this.bottom;if(ne<=re||ae<=se)return!1;const oe=tempPoints$1[0].set(ee.left,ee.top),le=tempPoints$1[1].set(ee.left,ee.bottom),he=tempPoints$1[2].set(ee.right,ee.top),ce=tempPoints$1[3].set(ee.right,ee.bottom);if(he.x<=oe.x||le.y<=oe.y)return!1;const de=Math.sign(te.a*te.d-te.b*te.c);if(de===0||(te.apply(oe,oe),te.apply(le,le),te.apply(he,he),te.apply(ce,ce),Math.max(oe.x,le.x,he.x,ce.x)<=re||Math.min(oe.x,le.x,he.x,ce.x)>=ne||Math.max(oe.y,le.y,he.y,ce.y)<=se||Math.min(oe.y,le.y,he.y,ce.y)>=ae))return!1;const ue=de*(le.y-oe.y),fe=de*(oe.x-le.x),pe=ue*re+fe*se,me=ue*ne+fe*se,xe=ue*re+fe*ae,ge=ue*ne+fe*ae;if(Math.max(pe,me,xe,ge)<=ue*oe.x+fe*oe.y||Math.min(pe,me,xe,ge)>=ue*ce.x+fe*ce.y)return!1;const _e=de*(oe.y-he.y),ve=de*(he.x-oe.x),ye=_e*re+ve*se,be=_e*ne+ve*se,we=_e*re+ve*ae,Se=_e*ne+ve*ae;return!(Math.max(ye,be,we,Se)<=_e*oe.x+ve*oe.y||Math.min(ye,be,we,Se)>=_e*ce.x+ve*ce.y)}pad(ee=0,te=ee){return this.x-=ee,this.y-=te,this.width+=ee*2,this.height+=te*2,this}fit(ee){const te=Math.max(this.x,ee.x),re=Math.min(this.x+this.width,ee.x+ee.width),ne=Math.max(this.y,ee.y),se=Math.min(this.y+this.height,ee.y+ee.height);return this.x=te,this.width=Math.max(re-te,0),this.y=ne,this.height=Math.max(se-ne,0),this}ceil(ee=1,te=.001){const re=Math.ceil((this.x+this.width-te)*ee)/ee,ne=Math.ceil((this.y+this.height-te)*ee)/ee;return this.x=Math.floor((this.x+te)*ee)/ee,this.y=Math.floor((this.y+te)*ee)/ee,this.width=re-this.x,this.height=ne-this.y,this}enlarge(ee){const te=Math.min(this.x,ee.x),re=Math.max(this.x+this.width,ee.x+ee.width),ne=Math.min(this.y,ee.y),se=Math.max(this.y+this.height,ee.y+ee.height);return this.x=te,this.width=re-te,this.y=ne,this.height=se-ne,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Circle{constructor(ee=0,te=0,re=0){this.x=ee,this.y=te,this.radius=re,this.type=SHAPES.CIRC}clone(){return new Circle(this.x,this.y,this.radius)}contains(ee,te){if(this.radius<=0)return!1;const re=this.radius*this.radius;let ne=this.x-ee,se=this.y-te;return ne*=ne,se*=se,ne+se<=re}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Ellipse{constructor(ee=0,te=0,re=0,ne=0){this.x=ee,this.y=te,this.width=re,this.height=ne,this.type=SHAPES.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(ee,te){if(this.width<=0||this.height<=0)return!1;let re=(ee-this.x)/this.width,ne=(te-this.y)/this.height;return re*=re,ne*=ne,re+ne<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Polygon{constructor(...ee){let te=Array.isArray(ee[0])?ee[0]:ee;if(typeof te[0]!="number"){const re=[];for(let ne=0,se=te.length;ne<se;ne++)re.push(te[ne].x,te[ne].y);te=re}this.points=te,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const ee=this.points.slice(),te=new Polygon(ee);return te.closeStroke=this.closeStroke,te}contains(ee,te){let re=!1;const ne=this.points.length/2;for(let se=0,ae=ne-1;se<ne;ae=se++){const oe=this.points[se*2],le=this.points[se*2+1],he=this.points[ae*2],ce=this.points[ae*2+1];le>te!=ce>te&&ee<(he-oe)*((te-le)/(ce-le))+oe&&(re=!re)}return re}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((ee,te)=>`${ee}, ${te}`,"")}]`}}class RoundedRectangle{constructor(ee=0,te=0,re=0,ne=0,se=20){this.x=ee,this.y=te,this.width=re,this.height=ne,this.radius=se,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(ee,te){if(this.width<=0||this.height<=0)return!1;if(ee>=this.x&&ee<=this.x+this.width&&te>=this.y&&te<=this.y+this.height){const re=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(te>=this.y+re&&te<=this.y+this.height-re||ee>=this.x+re&&ee<=this.x+this.width-re)return!0;let ne=ee-(this.x+re),se=te-(this.y+re);const ae=re*re;if(ne*ne+se*se<=ae||(ne=ee-(this.x+this.width-re),ne*ne+se*se<=ae)||(se=te-(this.y+this.height-re),ne*ne+se*se<=ae)||(ne=ee-(this.x+re),ne*ne+se*se<=ae))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Matrix{constructor(ee=1,te=0,re=0,ne=1,se=0,ae=0){this.array=null,this.a=ee,this.b=te,this.c=re,this.d=ne,this.tx=se,this.ty=ae}fromArray(ee){this.a=ee[0],this.b=ee[1],this.c=ee[3],this.d=ee[4],this.tx=ee[2],this.ty=ee[5]}set(ee,te,re,ne,se,ae){return this.a=ee,this.b=te,this.c=re,this.d=ne,this.tx=se,this.ty=ae,this}toArray(ee,te){this.array||(this.array=new Float32Array(9));const re=te||this.array;return ee?(re[0]=this.a,re[1]=this.b,re[2]=0,re[3]=this.c,re[4]=this.d,re[5]=0,re[6]=this.tx,re[7]=this.ty,re[8]=1):(re[0]=this.a,re[1]=this.c,re[2]=this.tx,re[3]=this.b,re[4]=this.d,re[5]=this.ty,re[6]=0,re[7]=0,re[8]=1),re}apply(ee,te){te=te||new Point;const re=ee.x,ne=ee.y;return te.x=this.a*re+this.c*ne+this.tx,te.y=this.b*re+this.d*ne+this.ty,te}applyInverse(ee,te){te=te||new Point;const re=1/(this.a*this.d+this.c*-this.b),ne=ee.x,se=ee.y;return te.x=this.d*re*ne+-this.c*re*se+(this.ty*this.c-this.tx*this.d)*re,te.y=this.a*re*se+-this.b*re*ne+(-this.ty*this.a+this.tx*this.b)*re,te}translate(ee,te){return this.tx+=ee,this.ty+=te,this}scale(ee,te){return this.a*=ee,this.d*=te,this.c*=ee,this.b*=te,this.tx*=ee,this.ty*=te,this}rotate(ee){const te=Math.cos(ee),re=Math.sin(ee),ne=this.a,se=this.c,ae=this.tx;return this.a=ne*te-this.b*re,this.b=ne*re+this.b*te,this.c=se*te-this.d*re,this.d=se*re+this.d*te,this.tx=ae*te-this.ty*re,this.ty=ae*re+this.ty*te,this}append(ee){const te=this.a,re=this.b,ne=this.c,se=this.d;return this.a=ee.a*te+ee.b*ne,this.b=ee.a*re+ee.b*se,this.c=ee.c*te+ee.d*ne,this.d=ee.c*re+ee.d*se,this.tx=ee.tx*te+ee.ty*ne+this.tx,this.ty=ee.tx*re+ee.ty*se+this.ty,this}setTransform(ee,te,re,ne,se,ae,oe,le,he){return this.a=Math.cos(oe+he)*se,this.b=Math.sin(oe+he)*se,this.c=-Math.sin(oe-le)*ae,this.d=Math.cos(oe-le)*ae,this.tx=ee-(re*this.a+ne*this.c),this.ty=te-(re*this.b+ne*this.d),this}prepend(ee){const te=this.tx;if(ee.a!==1||ee.b!==0||ee.c!==0||ee.d!==1){const re=this.a,ne=this.c;this.a=re*ee.a+this.b*ee.c,this.b=re*ee.b+this.b*ee.d,this.c=ne*ee.a+this.d*ee.c,this.d=ne*ee.b+this.d*ee.d}return this.tx=te*ee.a+this.ty*ee.c+ee.tx,this.ty=te*ee.b+this.ty*ee.d+ee.ty,this}decompose(ee){const te=this.a,re=this.b,ne=this.c,se=this.d,ae=ee.pivot,oe=-Math.atan2(-ne,se),le=Math.atan2(re,te),he=Math.abs(oe+le);return he<1e-5||Math.abs(PI_2-he)<1e-5?(ee.rotation=le,ee.skew.x=ee.skew.y=0):(ee.rotation=0,ee.skew.x=oe,ee.skew.y=le),ee.scale.x=Math.sqrt(te*te+re*re),ee.scale.y=Math.sqrt(ne*ne+se*se),ee.position.x=this.tx+(ae.x*te+ae.y*ne),ee.position.y=this.ty+(ae.x*re+ae.y*se),ee}invert(){const ee=this.a,te=this.b,re=this.c,ne=this.d,se=this.tx,ae=ee*ne-te*re;return this.a=ne/ae,this.b=-te/ae,this.c=-re/ae,this.d=ee/ae,this.tx=(re*this.ty-ne*se)/ae,this.ty=-(ee*this.ty-te*se)/ae,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const ee=new Matrix;return ee.a=this.a,ee.b=this.b,ee.c=this.c,ee.d=this.d,ee.tx=this.tx,ee.ty=this.ty,ee}copyTo(ee){return ee.a=this.a,ee.b=this.b,ee.c=this.c,ee.d=this.d,ee.tx=this.tx,ee.ty=this.ty,ee}copyFrom(ee){return this.a=ee.a,this.b=ee.b,this.c=ee.c,this.d=ee.d,this.tx=ee.tx,this.ty=ee.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(let ie=0;ie<16;ie++){const ee=[];rotationCayley.push(ee);for(let te=0;te<16;te++){const re=signum(ux[ie]*ux[te]+vx[ie]*uy[te]),ne=signum(uy[ie]*ux[te]+vy[ie]*uy[te]),se=signum(ux[ie]*vx[te]+vx[ie]*vy[te]),ae=signum(uy[ie]*vx[te]+vy[ie]*vy[te]);for(let oe=0;oe<16;oe++)if(ux[oe]===re&&uy[oe]===ne&&vx[oe]===se&&vy[oe]===ae){ee.push(oe);break}}}for(let ie=0;ie<16;ie++){const ee=new Matrix;ee.set(ux[ie],uy[ie],vx[ie],vy[ie],0,0),rotationMatrices.push(ee)}}init();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:ie=>ux[ie],uY:ie=>uy[ie],vX:ie=>vx[ie],vY:ie=>vy[ie],inv:ie=>ie&8?ie&15:-ie&7,add:(ie,ee)=>rotationCayley[ie][ee],sub:(ie,ee)=>rotationCayley[ie][groupD8.inv(ee)],rotate180:ie=>ie^4,isVertical:ie=>(ie&3)===2,byDirection:(ie,ee)=>Math.abs(ie)*2<=Math.abs(ee)?ee>=0?groupD8.S:groupD8.N:Math.abs(ee)*2<=Math.abs(ie)?ie>0?groupD8.E:groupD8.W:ee>0?ie>0?groupD8.SE:groupD8.SW:ie>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(ie,ee,te=0,re=0)=>{const ne=rotationMatrices[groupD8.inv(ee)];ne.tx=te,ne.ty=re,ie.append(ne)}};class ObservablePoint{constructor(ee,te,re=0,ne=0){this._x=re,this._y=ne,this.cb=ee,this.scope=te}clone(ee=this.cb,te=this.scope){return new ObservablePoint(ee,te,this._x,this._y)}set(ee=0,te=ee){return(this._x!==ee||this._y!==te)&&(this._x=ee,this._y=te,this.cb.call(this.scope)),this}copyFrom(ee){return(this._x!==ee.x||this._y!==ee.y)&&(this._x=ee.x,this._y=ee.y,this.cb.call(this.scope)),this}copyTo(ee){return ee.set(this._x,this._y),ee}equals(ee){return ee.x===this._x&&ee.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this.scope}]`}get x(){return this._x}set x(ee){this._x!==ee&&(this._x=ee,this.cb.call(this.scope))}get y(){return this._y}set y(ee){this._y!==ee&&(this._y=ee,this.cb.call(this.scope))}}const _Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const ie=this.localTransform;this._localID!==this._currentLocalID&&(ie.a=this._cx*this.scale.x,ie.b=this._sx*this.scale.x,ie.c=this._cy*this.scale.y,ie.d=this._sy*this.scale.y,ie.tx=this.position.x-(this.pivot.x*ie.a+this.pivot.y*ie.c),ie.ty=this.position.y-(this.pivot.x*ie.b+this.pivot.y*ie.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(ie){const ee=this.localTransform;if(this._localID!==this._currentLocalID&&(ee.a=this._cx*this.scale.x,ee.b=this._sx*this.scale.x,ee.c=this._cy*this.scale.y,ee.d=this._sy*this.scale.y,ee.tx=this.position.x-(this.pivot.x*ee.a+this.pivot.y*ee.c),ee.ty=this.position.y-(this.pivot.x*ee.b+this.pivot.y*ee.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==ie._worldID){const te=ie.worldTransform,re=this.worldTransform;re.a=ee.a*te.a+ee.b*te.c,re.b=ee.a*te.b+ee.b*te.d,re.c=ee.c*te.a+ee.d*te.c,re.d=ee.c*te.b+ee.d*te.d,re.tx=ee.tx*te.a+ee.ty*te.c+te.tx,re.ty=ee.tx*te.b+ee.ty*te.d+te.ty,this._parentID=ie._worldID,this._worldID++}}setFromMatrix(ie){ie.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(ie){this._rotation!==ie&&(this._rotation=ie,this.updateSkew())}};let Transform=_Transform;Transform.IDENTITY=new _Transform;var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function compileShader(ie,ee,te){const re=ie.createShader(ee);return ie.shaderSource(re,te),ie.compileShader(re),re}function booleanArray(ie){const ee=new Array(ie);for(let te=0;te<ee.length;te++)ee[te]=!1;return ee}function defaultValue(ie,ee){switch(ie){case"float":return 0;case"vec2":return new Float32Array(2*ee);case"vec3":return new Float32Array(3*ee);case"vec4":return new Float32Array(4*ee);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*ee);case"ivec3":return new Int32Array(3*ee);case"ivec4":return new Int32Array(4*ee);case"uvec2":return new Uint32Array(2*ee);case"uvec3":return new Uint32Array(3*ee);case"uvec4":return new Uint32Array(4*ee);case"bool":return!1;case"bvec2":return booleanArray(2*ee);case"bvec3":return booleanArray(3*ee);case"bvec4":return booleanArray(4*ee);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const uniformParsers=[{test:ie=>ie.type==="float"&&ie.size===1&&!ie.isArray,code:ie=>`
            if(uv["${ie}"] !== ud["${ie}"].value)
            {
                ud["${ie}"].value = uv["${ie}"]
                gl.uniform1f(ud["${ie}"].location, uv["${ie}"])
            }
            `},{test:(ie,ee)=>(ie.type==="sampler2D"||ie.type==="samplerCube"||ie.type==="sampler2DArray")&&ie.size===1&&!ie.isArray&&(ee==null||ee.castToBaseTexture!==void 0),code:ie=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${ie}"], t);

            if(ud["${ie}"].value !== t)
            {
                ud["${ie}"].value = t;
                gl.uniform1i(ud["${ie}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(ie,ee)=>ie.type==="mat3"&&ie.size===1&&!ie.isArray&&ee.a!==void 0,code:ie=>`
            gl.uniformMatrix3fv(ud["${ie}"].location, false, uv["${ie}"].toArray(true));
            `,codeUbo:ie=>`
                var ${ie}_matrix = uv.${ie}.toArray(true);

                data[offset] = ${ie}_matrix[0];
                data[offset+1] = ${ie}_matrix[1];
                data[offset+2] = ${ie}_matrix[2];
        
                data[offset + 4] = ${ie}_matrix[3];
                data[offset + 5] = ${ie}_matrix[4];
                data[offset + 6] = ${ie}_matrix[5];
        
                data[offset + 8] = ${ie}_matrix[6];
                data[offset + 9] = ${ie}_matrix[7];
                data[offset + 10] = ${ie}_matrix[8];
            `},{test:(ie,ee)=>ie.type==="vec2"&&ie.size===1&&!ie.isArray&&ee.x!==void 0,code:ie=>`
                cv = ud["${ie}"].value;
                v = uv["${ie}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${ie}"].location, v.x, v.y);
                }`,codeUbo:ie=>`
                v = uv.${ie};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:ie=>ie.type==="vec2"&&ie.size===1&&!ie.isArray,code:ie=>`
                cv = ud["${ie}"].value;
                v = uv["${ie}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${ie}"].location, v[0], v[1]);
                }
            `},{test:(ie,ee)=>ie.type==="vec4"&&ie.size===1&&!ie.isArray&&ee.width!==void 0,code:ie=>`
                cv = ud["${ie}"].value;
                v = uv["${ie}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${ie}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:ie=>`
                    v = uv.${ie};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(ie,ee)=>ie.type==="vec4"&&ie.size===1&&!ie.isArray&&ee.red!==void 0,code:ie=>`
                cv = ud["${ie}"].value;
                v = uv["${ie}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${ie}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:ie=>`
                    v = uv.${ie};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(ie,ee)=>ie.type==="vec3"&&ie.size===1&&!ie.isArray&&ee.red!==void 0,code:ie=>`
                cv = ud["${ie}"].value;
                v = uv["${ie}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${ie}"].location, v.red, v.green, v.blue)
                }`,codeUbo:ie=>`
                    v = uv.${ie};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:ie=>ie.type==="vec4"&&ie.size===1&&!ie.isArray,code:ie=>`
                cv = ud["${ie}"].value;
                v = uv["${ie}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${ie}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(ie,ee){var re;const te=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const ne in ie.uniforms){const se=ee[ne];if(!se){(re=ie.uniforms[ne])!=null&&re.group&&(ie.uniforms[ne].ubo?te.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${ne}, '${ne}');
                    `):te.push(`
                        renderer.shader.syncUniformGroup(uv.${ne}, syncData);
                    `));continue}const ae=ie.uniforms[ne];let oe=!1;for(let le=0;le<uniformParsers.length;le++)if(uniformParsers[le].test(se,ae)){te.push(uniformParsers[le].code(ne,ae)),oe=!0;break}if(!oe){const he=(se.size===1&&!se.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[se.type].replace("location",`ud["${ne}"].location`);te.push(`
            cu = ud["${ne}"];
            cv = cu.value;
            v = uv["${ne}"];
            ${he};`)}}return new Function("ud","uv","renderer","syncData",te.join(`
`))}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||(context==null?void 0:context.isContextLost())){const ie=settings.ADAPTER.createCanvas();let ee;settings.PREFER_ENV>=ENV.WEBGL2&&(ee=ie.getContext("webgl2",{})),ee||(ee=ie.getContext("webgl",{})||ie.getContext("experimental-webgl",{}),ee?ee.getExtension("WEBGL_draw_buffers"):ee=null),context=ee}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const ie=getTestContext();ie&&ie.getShaderPrecisionFormat&&(maxFragmentPrecision=ie.getShaderPrecisionFormat(ie.FRAGMENT_SHADER,ie.HIGH_FLOAT).precision?PRECISION.HIGH:PRECISION.MEDIUM)}return maxFragmentPrecision}function logPrettyShaderError(ie,ee){const te=ie.getShaderSource(ee).split(`
`).map((he,ce)=>`${ce}: ${he}`),re=ie.getShaderInfoLog(ee),ne=re.split(`
`),se={},ae=ne.map(he=>parseFloat(he.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(he=>he&&!se[he]?(se[he]=!0,!0):!1),oe=[""];ae.forEach(he=>{te[he-1]=`%c${te[he-1]}%c`,oe.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const le=te.join(`
`);oe[0]=le,console.error(re),console.groupCollapsed("click to view full shader code"),console.warn(...oe),console.groupEnd()}function logProgramError(ie,ee,te,re){ie.getProgramParameter(ee,ie.LINK_STATUS)||(ie.getShaderParameter(te,ie.COMPILE_STATUS)||logPrettyShaderError(ie,te),ie.getShaderParameter(re,ie.COMPILE_STATUS)||logPrettyShaderError(ie,re),console.error("PixiJS Error: Could not initialize shader."),ie.getProgramInfoLog(ee)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",ie.getProgramInfoLog(ee)))}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(ie){return GLSL_TO_SIZE[ie]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(ie,ee){if(!GL_TABLE){const te=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let re=0;re<te.length;++re){const ne=te[re];GL_TABLE[ie[ne]]=GL_TO_GLSL_TYPES[ne]}}return GL_TABLE[ee]}function setPrecision(ie,ee,te){if(ie.substring(0,9)!=="precision"){let re=ee;return ee===PRECISION.HIGH&&te!==PRECISION.HIGH&&(re=PRECISION.MEDIUM),`precision ${re} float;
${ie}`}else if(te!==PRECISION.HIGH&&ie.substring(0,15)==="precision highp")return ie.replace("precision highp","precision mediump");return ie}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}let UID$2=0;const nameCache={},_Program=class{constructor(ie,ee,te="pixi-shader",re={}){this.extra={},this.id=UID$2++,this.vertexSrc=ie||_Program.defaultVertexSrc,this.fragmentSrc=ee||_Program.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=re,this.vertexSrc.substring(0,8)!=="#version"&&(te=te.replace(/\s+/g,"-"),nameCache[te]?(nameCache[te]++,te+=`-${nameCache[te]}`):nameCache[te]=1,this.vertexSrc=`#define SHADER_NAME ${te}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${te}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,_Program.defaultVertexPrecision,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,_Program.defaultFragmentPrecision,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$3}static get defaultFragmentSrc(){return defaultFragment$2}static from(ie,ee,te){const re=ie+ee;let ne=ProgramCache[re];return ne||(ProgramCache[re]=ne=new _Program(ie,ee,te)),ne}};let Program=_Program;Program.defaultVertexPrecision=PRECISION.HIGH,Program.defaultFragmentPrecision=isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM;let UID$1=0;class UniformGroup{constructor(ee,te,re){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$1++,this.static=!!te,this.ubo=!!re,ee instanceof Buffer?(this.buffer=ee,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=ee,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(ee,te,re){if(!this.ubo)this.uniforms[ee]=new UniformGroup(te,re);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(ee,te,re){return new UniformGroup(ee,te,re)}static uboFrom(ee,te){return new UniformGroup(ee,te!=null?te:!0,!0)}}class Shader{constructor(ee,te){this.uniformBindCount=0,this.program=ee,te?te instanceof UniformGroup?this.uniformGroup=te:this.uniformGroup=new UniformGroup(te):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(ee,te){if(te.uniforms[ee])return!0;for(const re in te.uniforms){const ne=te.uniforms[re];if(ne.group&&this.checkUniformExists(ee,ne))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(ee,te,re){const ne=Program.from(ee,te);return new Shader(ne,re)}}class BatchShaderGenerator{constructor(ee,te){if(this.vertexSrc=ee,this.fragTemplate=te,this.programCache={},this.defaultGroupCache={},!te.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!te.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(ee){if(!this.programCache[ee]){const re=new Int32Array(ee);for(let se=0;se<ee;se++)re[se]=se;this.defaultGroupCache[ee]=UniformGroup.from({uSamplers:re},!0);let ne=this.fragTemplate;ne=ne.replace(/%count%/gi,`${ee}`),ne=ne.replace(/%forloop%/gi,this.generateSampleSrc(ee)),this.programCache[ee]=new Program(this.vertexSrc,ne)}const te={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[ee]};return new Shader(this.programCache[ee],te)}generateSampleSrc(ee){let te="";te+=`
`,te+=`
`;for(let re=0;re<ee;re++)re>0&&(te+=`
else `),re<ee-1&&(te+=`if(vTextureId < ${re}.5)`),te+=`
{`,te+=`
	color = texture2D(uSamplers[${re}], vTextureCoord);`,te+=`
}`;return te+=`
`,te+=`
`,te}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let ee=0;ee<this.count;ee++)this.elements[ee]=null;this.count=0}}function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(ie){let ee=!0;const te=settings.ADAPTER.getNavigator();if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const re=te.userAgent.match(/OS (\d+)_(\d+)?/);re&&parseInt(re[1],10)<11&&(ee=!1)}if(isMobile.android.device){const re=te.userAgent.match(/Android\s([0-9.]*)/);re&&parseInt(re[1],10)<7&&(ee=!1)}}return ee?ie:4}class ObjectRenderer{constructor(ee){this.renderer=ee}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(ee){}}var defaultFragment$1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,defaultVertex$2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _BatchRenderer=class extends ObjectRenderer{constructor(ie){super(ie),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=_BatchRenderer.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),ie.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){var ie;return this._defaultMaxTextures=(ie=this._defaultMaxTextures)!=null?ie:maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(ie){this._defaultMaxTextures=ie}static get canUploadSameBuffer(){var ie;return this._canUploadSameBuffer=(ie=this._canUploadSameBuffer)!=null?ie:canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(ie){this._canUploadSameBuffer=ie}get MAX_TEXTURES(){return deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentTemplate(){return defaultFragment$1}setShaderGenerator({vertex:ie=_BatchRenderer.defaultVertexSrc,fragment:ee=_BatchRenderer.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(ie,ee)}contextChange(){const ie=this.renderer.gl;settings.PREFER_ENV===ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(ie.getParameter(ie.MAX_TEXTURE_IMAGE_UNITS),_BatchRenderer.defaultMaxTextures),this.maxTextures=checkMaxIfStatementsInShader(this.maxTextures,ie)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let ee=0;ee<this._packedGeometryPoolSize;ee++)this._packedGeometries[ee]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:ie,_textureArrayPool:ee}=_BatchRenderer,te=this.size/4,re=Math.floor(te/this.maxTextures)+1;for(;ie.length<te;)ie.push(new BatchDrawCall);for(;ee.length<re;)ee.push(new BatchTextureArray);for(let ne=0;ne<this.maxTextures;ne++)this._tempBoundTextures[ne]=null}onPrerender(){this._flushId=0}render(ie){!ie._texture.valid||(this._vertexCount+ie.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=ie.vertexData.length/2,this._indexCount+=ie.indices.length,this._bufferedTextures[this._bufferSize]=ie._texture.baseTexture,this._bufferedElements[this._bufferSize++]=ie)}buildTexturesAndDrawCalls(){const{_bufferedTextures:ie,maxTextures:ee}=this,te=_BatchRenderer._textureArrayPool,re=this.renderer.batch,ne=this._tempBoundTextures,se=this.renderer.textureGC.count;let ae=++BaseTexture._globalBatch,oe=0,le=te[0],he=0;re.copyBoundTextures(ne,ee);for(let ce=0;ce<this._bufferSize;++ce){const de=ie[ce];ie[ce]=null,de._batchEnabled!==ae&&(le.count>=ee&&(re.boundArray(le,ne,ae,ee),this.buildDrawCalls(le,he,ce),he=ce,le=te[++oe],++ae),de._batchEnabled=ae,de.touched=se,le.elements[le.count++]=de)}le.count>0&&(re.boundArray(le,ne,ae,ee),this.buildDrawCalls(le,he,this._bufferSize),++oe,++ae);for(let ce=0;ce<ne.length;ce++)ne[ce]=null;BaseTexture._globalBatch=ae}buildDrawCalls(ie,ee,te){const{_bufferedElements:re,_attributeBuffer:ne,_indexBuffer:se,vertexSize:ae}=this,oe=_BatchRenderer._drawCallPool;let le=this._dcIndex,he=this._aIndex,ce=this._iIndex,de=oe[le];de.start=this._iIndex,de.texArray=ie;for(let ue=ee;ue<te;++ue){const fe=re[ue],pe=fe._texture.baseTexture,me=premultiplyBlendMode[pe.alphaMode?1:0][fe.blendMode];re[ue]=null,ee<ue&&de.blend!==me&&(de.size=ce-de.start,ee=ue,de=oe[++le],de.texArray=ie,de.start=ce),this.packInterleavedGeometry(fe,ne,se,he,ce),he+=fe.vertexData.length/2*ae,ce+=fe.indices.length,de.blend=me}ee<te&&(de.size=ce-de.start,++le),this._dcIndex=le,this._aIndex=he,this._iIndex=ce}bindAndClearTexArray(ie){const ee=this.renderer.texture;for(let te=0;te<ie.count;te++)ee.bind(ie.elements[te],ie.ids[te]),ie.elements[te]=null;ie.count=0}updateGeometry(){const{_packedGeometries:ie,_attributeBuffer:ee,_indexBuffer:te}=this;_BatchRenderer.canUploadSameBuffer?(ie[this._flushId]._buffer.update(ee.rawBinaryData),ie[this._flushId]._indexBuffer.update(te),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,ie[this._flushId]=new this.geometryClass),ie[this._flushId]._buffer.update(ee.rawBinaryData),ie[this._flushId]._indexBuffer.update(te),this.renderer.geometry.bind(ie[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const ie=this._dcIndex,{gl:ee,state:te}=this.renderer,re=_BatchRenderer._drawCallPool;let ne=null;for(let se=0;se<ie;se++){const{texArray:ae,type:oe,size:le,start:he,blend:ce}=re[se];ne!==ae&&(ne=ae,this.bindAndClearTexArray(ae)),this.state.blendMode=ce,te.set(this.state),ee.drawElements(oe,le,ee.UNSIGNED_SHORT,he*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),_BatchRenderer.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let ie=0;ie<this._packedGeometryPoolSize;ie++)this._packedGeometries[ie]&&this._packedGeometries[ie].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(ie){const ee=nextPow2(Math.ceil(ie/8)),te=log2(ee),re=ee*8;this._aBuffers.length<=te&&(this._iBuffers.length=te+1);let ne=this._aBuffers[re];return ne||(this._aBuffers[re]=ne=new ViewableBuffer(re*this.vertexSize*4)),ne}getIndexBuffer(ie){const ee=nextPow2(Math.ceil(ie/12)),te=log2(ee),re=ee*12;this._iBuffers.length<=te&&(this._iBuffers.length=te+1);let ne=this._iBuffers[te];return ne||(this._iBuffers[te]=ne=new Uint16Array(re)),ne}packInterleavedGeometry(ie,ee,te,re,ne){const{uint32View:se,float32View:ae}=ee,oe=re/this.vertexSize,le=ie.uvs,he=ie.indices,ce=ie.vertexData,de=ie._texture.baseTexture._batchLocation,ue=Math.min(ie.worldAlpha,1),fe=Color.shared.setValue(ie._tintRGB).toPremultiplied(ue,ie._texture.baseTexture.alphaMode>0);for(let pe=0;pe<ce.length;pe+=2)ae[re++]=ce[pe],ae[re++]=ce[pe+1],ae[re++]=le[pe],ae[re++]=le[pe+1],se[re++]=fe,ae[re++]=de;for(let pe=0;pe<he.length;pe++)te[ne++]=oe+he[pe]}};let BatchRenderer=_BatchRenderer;BatchRenderer.defaultBatchSize=4096,BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin},BatchRenderer._drawCallPool=[],BatchRenderer._textureArrayPool=[],extensions$1.add(BatchRenderer);var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _Filter=class extends Shader{constructor(ie,ee,te){const re=Program.from(ie||_Filter.defaultVertexSrc,ee||_Filter.defaultFragmentSrc);super(re,te),this.padding=0,this.resolution=_Filter.defaultResolution,this.multisample=_Filter.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(ie,ee,te,re,ne){ie.applyFilter(this,ee,te,re)}get blendMode(){return this.state.blendMode}set blendMode(ie){this.state.blendMode=ie}get resolution(){return this._resolution}set resolution(ie){this._resolution=ie}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentSrc(){return defaultFragment}};let Filter$2=_Filter;Filter$2.defaultResolution=1,Filter$2.defaultMultisample=MSAA_QUALITY.NONE;class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color(0),this.alpha=1}init(ee){this.clearBeforeRender=ee.clearBeforeRender;const{backgroundColor:te,background:re,backgroundAlpha:ne}=ee,se=re!=null?re:te;se!==void 0&&(this.color=se),this.alpha=ne}get color(){return this._backgroundColor.value}set color(ee){this._backgroundColor.setValue(ee)}get alpha(){return this._backgroundColor.alpha}set alpha(ee){this._backgroundColor.setAlpha(ee)}get backgroundColor(){return this._backgroundColor}destroy(){}}BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"},extensions$1.add(BackgroundSystem);class BatchSystem{constructor(ee){this.renderer=ee,this.emptyRenderer=new ObjectRenderer(ee),this.currentRenderer=this.emptyRenderer}setObjectRenderer(ee){this.currentRenderer!==ee&&(this.currentRenderer.stop(),this.currentRenderer=ee,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(ee,te){const{boundTextures:re}=this.renderer.texture;for(let ne=te-1;ne>=0;--ne)ee[ne]=re[ne]||null,ee[ne]&&(ee[ne]._batchLocation=ne)}boundArray(ee,te,re,ne){const{elements:se,ids:ae,count:oe}=ee;let le=0;for(let he=0;he<oe;he++){const ce=se[he],de=ce._batchLocation;if(de>=0&&de<ne&&te[de]===ce){ae[he]=de;continue}for(;le<ne;){const ue=te[le];if(ue&&ue._batchEnabled===re&&ue._batchLocation===le){le++;continue}ae[he]=le,ce._batchLocation=le,te[le]=ce;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"},extensions$1.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(ee){this.renderer=ee,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(ee){this.gl=ee,this.renderer.gl=ee,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++}init(ee){if(ee.context)this.initFromContext(ee.context);else{const te=this.renderer.background.alpha<1,re=ee.premultipliedAlpha;this.preserveDrawingBuffer=ee.preserveDrawingBuffer,this.useContextAlpha=ee.useContextAlpha,this.powerPreference=ee.powerPreference,this.initFromOptions({alpha:te,premultipliedAlpha:re,antialias:ee.antialias,stencil:!0,preserveDrawingBuffer:ee.preserveDrawingBuffer,powerPreference:ee.powerPreference})}}initFromContext(ee){this.gl=ee,this.validateContext(ee),this.renderer.gl=ee,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(ee);const te=this.renderer.view;te.addEventListener!==void 0&&(te.addEventListener("webglcontextlost",this.handleContextLost,!1),te.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(ee){const te=this.createContext(this.renderer.view,ee);this.initFromContext(te)}createContext(ee,te){let re;if(settings.PREFER_ENV>=ENV.WEBGL2&&(re=ee.getContext("webgl2",te)),re)this.webGLVersion=2;else if(this.webGLVersion=1,re=ee.getContext("webgl",te)||ee.getContext("experimental-webgl",te),!re)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=re,this.getExtensions(),this.gl}getExtensions(){const{gl:ee}=this,te={loseContext:ee.getExtension("WEBGL_lose_context"),anisotropicFiltering:ee.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:ee.getExtension("OES_texture_float_linear"),s3tc:ee.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ee.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:ee.getExtension("WEBGL_compressed_texture_etc"),etc1:ee.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:ee.getExtension("WEBGL_compressed_texture_pvrtc")||ee.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:ee.getExtension("WEBGL_compressed_texture_atc"),astc:ee.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,te,{drawBuffers:ee.getExtension("WEBGL_draw_buffers"),depthTexture:ee.getExtension("WEBGL_depth_texture"),vertexArrayObject:ee.getExtension("OES_vertex_array_object")||ee.getExtension("MOZ_OES_vertex_array_object")||ee.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:ee.getExtension("OES_element_index_uint"),floatTexture:ee.getExtension("OES_texture_float"),floatTextureLinear:ee.getExtension("OES_texture_float_linear"),textureHalfFloat:ee.getExtension("OES_texture_half_float"),textureHalfFloatLinear:ee.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,te,{colorBufferFloat:ee.getExtension("EXT_color_buffer_float")})}handleContextLost(ee){ee.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const ee=this.renderer.view;this.renderer=null,ee.removeEventListener!==void 0&&(ee.removeEventListener("webglcontextlost",this.handleContextLost),ee.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(ee){const te=ee.getContextAttributes(),re="WebGL2RenderingContext"in globalThis&&ee instanceof globalThis.WebGL2RenderingContext;re&&(this.webGLVersion=2),te&&!te.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const ne=re||!!ee.getExtension("OES_element_index_uint");this.supports.uint32Indices=ne,ne||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"},extensions$1.add(ContextSystem);class DepthResource extends BufferResource{upload(ee,te,re){const ne=ee.gl;ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.alphaMode===ALPHA_MODES.UNPACK);const se=te.realWidth,ae=te.realHeight;return re.width===se&&re.height===ae?ne.texSubImage2D(te.target,0,0,0,se,ae,te.format,re.type,this.data):(re.width=se,re.height=ae,ne.texImage2D(te.target,0,re.internalFormat,se,ae,0,te.format,re.type,this.data)),!0}}class Framebuffer{constructor(ee,te){this.width=Math.round(ee||100),this.height=Math.round(te||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(ee=0,te){return this.colorTextures[ee]=te||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(ee){return this.depthTexture=ee||new BaseTexture(new DepthResource(null,{width:this.width,height:this.height}),{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(ee,te){if(ee=Math.round(ee),te=Math.round(te),!(ee===this.width&&te===this.height)){this.width=ee,this.height=te,this.dirtyId++,this.dirtySize++;for(let re=0;re<this.colorTextures.length;re++){const ne=this.colorTextures[re],se=ne.resolution;ne.setSize(ee/se,te/se)}if(this.depthTexture){const re=this.depthTexture.resolution;this.depthTexture.setSize(ee/re,te/re)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(ee={}){var te;if(typeof ee=="number"){const re=arguments[0],ne=arguments[1],se=arguments[2],ae=arguments[3];ee={width:re,height:ne,scaleMode:se,resolution:ae}}ee.width=ee.width||100,ee.height=ee.height||100,(te=ee.multisample)!=null||(ee.multisample=MSAA_QUALITY.NONE),super(null,ee),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this._clear=new Color([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=ee.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(ee){this._clear.setValue(ee)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(ee,te){this.framebuffer.resize(ee*this.resolution,te*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class BaseImageResource extends Resource{constructor(ee){const te=ee,re=te.naturalWidth||te.videoWidth||te.width,ne=te.naturalHeight||te.videoHeight||te.height;super(re,ne),this.source=ee,this.noSubImage=!1}static crossOrigin(ee,te,re){re===void 0&&!te.startsWith("data:")?ee.crossOrigin=determineCrossOrigin(te):re!==!1&&(ee.crossOrigin=typeof re=="string"?re:"anonymous")}upload(ee,te,re,ne){const se=ee.gl,ae=te.realWidth,oe=te.realHeight;if(ne=ne||this.source,typeof HTMLImageElement!="undefined"&&ne instanceof HTMLImageElement){if(!ne.complete||ne.naturalWidth===0)return!1}else if(typeof HTMLVideoElement!="undefined"&&ne instanceof HTMLVideoElement&&ne.readyState<=1&&ne.buffered.length===0)return!1;return se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&te.target===se.TEXTURE_2D&&re.width===ae&&re.height===oe?se.texSubImage2D(se.TEXTURE_2D,0,0,0,te.format,re.type,ne):(re.width=ae,re.height=oe,se.texImage2D(te.target,0,re.internalFormat,te.format,re.type,ne)),!0}update(){if(this.destroyed)return;const ee=this.source,te=ee.naturalWidth||ee.videoWidth||ee.width,re=ee.naturalHeight||ee.videoHeight||ee.height;this.resize(te,re),super.update()}dispose(){this.source=null}}class ImageResource extends BaseImageResource{constructor(ee,te){var re;if(te=te||{},typeof ee=="string"){const ne=new Image;BaseImageResource.crossOrigin(ne,ee,te.crossorigin),ne.src=ee,ee=ne}super(ee),!ee.complete&&!!this._width&&!!this._height&&(this._width=0,this._height=0),this.url=ee.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=((re=te.createBitmap)!=null?re:settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof te.alphaMode=="number"?te.alphaMode:null,this.bitmap=null,this._load=null,te.autoLoad!==!1&&this.load()}load(ee){return this._load?this._load:(ee!==void 0&&(this.createBitmap=ee),this._load=new Promise((te,re)=>{const ne=this.source;this.url=ne.src;const se=()=>{this.destroyed||(ne.onload=null,ne.onerror=null,this.resize(ne.width,ne.height),this._load=null,this.createBitmap?te(this.process()):te(this))};ne.complete&&ne.src?se():(ne.onload=se,ne.onerror=ae=>{re(ae),this.onError.emit(ae)})}),this._load)}process(){const ee=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const te=globalThis.createImageBitmap,re=!ee.crossOrigin||ee.crossOrigin==="anonymous";return this._process=fetch(ee.src,{mode:re?"cors":"no-cors"}).then(ne=>ne.blob()).then(ne=>te(ne,0,0,ee.width,ee.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(ne=>this.destroyed?Promise.reject():(this.bitmap=ne,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(ee,te,re){if(typeof this.alphaMode=="number"&&(te.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(ee,te,re);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(ee,te,re,this.bitmap),!this.preserveBitmap){let ne=!0;const se=te._glTextures;for(const ae in se){const oe=se[ae];if(oe!==re&&oe.dirtyId!==te.dirtyId){ne=!1;break}}ne&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(ee){return typeof HTMLImageElement!="undefined"&&(typeof ee=="string"||ee instanceof HTMLImageElement)}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(ee,te,re){const ne=te.width,se=te.height;if(re){const ae=ee.width/2/ne,oe=ee.height/2/se,le=ee.x/ne+ae,he=ee.y/se+oe;re=groupD8.add(re,groupD8.NW),this.x0=le+ae*groupD8.uX(re),this.y0=he+oe*groupD8.uY(re),re=groupD8.add(re,2),this.x1=le+ae*groupD8.uX(re),this.y1=he+oe*groupD8.uY(re),re=groupD8.add(re,2),this.x2=le+ae*groupD8.uX(re),this.y2=he+oe*groupD8.uY(re),re=groupD8.add(re,2),this.x3=le+ae*groupD8.uX(re),this.y3=he+oe*groupD8.uY(re)}else this.x0=ee.x/ne,this.y0=ee.y/se,this.x1=(ee.x+ee.width)/ne,this.y1=ee.y/se,this.x2=(ee.x+ee.width)/ne,this.y2=(ee.y+ee.height)/se,this.x3=ee.x/ne,this.y3=(ee.y+ee.height)/se;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(ie){ie.destroy=function(){},ie.on=function(){},ie.once=function(){},ie.emit=function(){}}class Texture extends EventEmitter{constructor(ee,te,re,ne,se,ae,oe){if(super(),this.noFrame=!1,te||(this.noFrame=!0,te=new Rectangle(0,0,1,1)),ee instanceof Texture&&(ee=ee.baseTexture),this.baseTexture=ee,this._frame=te,this.trim=ne,this.valid=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=re||te,this._rotate=Number(se||0),se===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=ae?new Point(ae.x,ae.y):new Point(0,0),this.defaultBorders=oe,this._updateID=0,this.textureCacheIds=[],ee.valid?this.noFrame?ee.valid&&this.onBaseTextureUpdated(ee):this.frame=te:ee.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&ee.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(ee){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=ee.width,this._frame.height=ee.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(ee){if(this.baseTexture){if(ee){const{resource:te}=this.baseTexture;(te==null?void 0:te.url)&&TextureCache[te.url]&&Texture.removeFromCache(te.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null}clone(){var ne;const ee=this._frame.clone(),te=this._frame===this.orig?ee:this.orig.clone(),re=new Texture(this.baseTexture,!this.noFrame&&ee,te,(ne=this.trim)==null?void 0:ne.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(re._frame=ee),re}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(ee,te={},re=settings.STRICT_TEXTURE_CACHE){const ne=typeof ee=="string";let se=null;if(ne)se=ee;else if(ee instanceof BaseTexture){if(!ee.cacheId){const oe=(te==null?void 0:te.pixiIdPrefix)||"pixiid";ee.cacheId=`${oe}-${uid()}`,BaseTexture.addToCache(ee,ee.cacheId)}se=ee.cacheId}else{if(!ee._pixiId){const oe=(te==null?void 0:te.pixiIdPrefix)||"pixiid";ee._pixiId=`${oe}_${uid()}`}se=ee._pixiId}let ae=TextureCache[se];if(ne&&re&&!ae)throw new Error(`The cacheId "${se}" does not exist in TextureCache.`);return!ae&&!(ee instanceof BaseTexture)?(te.resolution||(te.resolution=getResolutionOfUrl(ee)),ae=new Texture(new BaseTexture(ee,te)),ae.baseTexture.cacheId=se,BaseTexture.addToCache(ae.baseTexture,se),Texture.addToCache(ae,se)):!ae&&ee instanceof BaseTexture&&(ae=new Texture(ee),Texture.addToCache(ae,se)),ae}static fromURL(ee,te){const re=Object.assign({autoLoad:!1},te==null?void 0:te.resourceOptions),ne=Texture.from(ee,Object.assign({resourceOptions:re},te),!1),se=ne.baseTexture.resource;return ne.baseTexture.valid?Promise.resolve(ne):se.load().then(()=>Promise.resolve(ne))}static fromBuffer(ee,te,re,ne){return new Texture(BaseTexture.fromBuffer(ee,te,re,ne))}static fromLoader(ee,te,re,ne){const se=new BaseTexture(ee,Object.assign({scaleMode:BaseTexture.defaultOptions.scaleMode,resolution:getResolutionOfUrl(te)},ne)),{resource:ae}=se;ae instanceof ImageResource&&(ae.url=te);const oe=new Texture(se);return re||(re=te),BaseTexture.addToCache(oe.baseTexture,re),Texture.addToCache(oe,re),re!==te&&(BaseTexture.addToCache(oe.baseTexture,te),Texture.addToCache(oe,te)),oe.baseTexture.valid?Promise.resolve(oe):new Promise(le=>{oe.baseTexture.once("loaded",()=>le(oe))})}static addToCache(ee,te){te&&(ee.textureCacheIds.includes(te)||ee.textureCacheIds.push(te),TextureCache[te]&&TextureCache[te]!==ee&&console.warn(`Texture added to the cache with an id [${te}] that already had an entry`),TextureCache[te]=ee)}static removeFromCache(ee){if(typeof ee=="string"){const te=TextureCache[ee];if(te){const re=te.textureCacheIds.indexOf(ee);return re>-1&&te.textureCacheIds.splice(re,1),delete TextureCache[ee],te}}else if(ee!=null&&ee.textureCacheIds){for(let te=0;te<ee.textureCacheIds.length;++te)TextureCache[ee.textureCacheIds[te]]===ee&&delete TextureCache[ee.textureCacheIds[te]];return ee.textureCacheIds.length=0,ee}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(ee){this._frame=ee,this.noFrame=!1;const{x:te,y:re,width:ne,height:se}=ee,ae=te+ne>this.baseTexture.width,oe=re+se>this.baseTexture.height;if(ae||oe){const le=ae&&oe?"and":"or",he=`X: ${te} + ${ne} = ${te+ne} > ${this.baseTexture.width}`,ce=`Y: ${re} + ${se} = ${re+se} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${he} ${le} ${ce}`)}this.valid=ne&&se&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=ee),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(ee){this._rotate=ee,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const ee=settings.ADAPTER.createCanvas(16,16),te=ee.getContext("2d");ee.width=16,ee.height=16,te.fillStyle="white",te.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(ee)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(ee,te){super(ee,te),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(ee){this.framebuffer.multisample=ee}resize(ee,te,re=!0){const ne=this.baseTexture.resolution,se=Math.round(ee*ne)/ne,ae=Math.round(te*ne)/ne;this.valid=se>0&&ae>0,this._frame.width=this.orig.width=se,this._frame.height=this.orig.height=ae,re&&this.baseTexture.resize(se,ae),this.updateUvs()}setResolution(ee){const{baseTexture:te}=this;te.resolution!==ee&&(te.setResolution(ee),this.resize(te.width,te.height,!1))}static create(ee){return new RenderTexture(new BaseRenderTexture(ee))}}class RenderTexturePool{constructor(ee){this.texturePool={},this.textureOptions=ee||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(ee,te,re=MSAA_QUALITY.NONE){const ne=new BaseRenderTexture(Object.assign({width:ee,height:te,resolution:1,multisample:re},this.textureOptions));return new RenderTexture(ne)}getOptimalTexture(ee,te,re=1,ne=MSAA_QUALITY.NONE){let se;ee=Math.ceil(ee*re-1e-6),te=Math.ceil(te*re-1e-6),!this.enableFullScreen||ee!==this._pixelsWidth||te!==this._pixelsHeight?(ee=nextPow2(ee),te=nextPow2(te),se=((ee&65535)<<16|te&65535)>>>0,ne>1&&(se+=ne*4294967296)):se=ne>1?-ne:-1,this.texturePool[se]||(this.texturePool[se]=[]);let ae=this.texturePool[se].pop();return ae||(ae=this.createTexture(ee,te,ne)),ae.filterPoolKey=se,ae.setResolution(re),ae}getFilterTexture(ee,te,re){const ne=this.getOptimalTexture(ee.width,ee.height,te||ee.resolution,re||MSAA_QUALITY.NONE);return ne.filterFrame=ee.filterFrame,ne}returnTexture(ee){const te=ee.filterPoolKey;ee.filterFrame=null,this.texturePool[te].push(ee)}returnFilterTexture(ee){this.returnTexture(ee)}clear(ee){if(ee=ee!==!1,ee)for(const te in this.texturePool){const re=this.texturePool[te];if(re)for(let ne=0;ne<re.length;ne++)re[ne].destroy(!0)}this.texturePool={}}setScreenSize(ee){if(!(ee.width===this._pixelsWidth&&ee.height===this._pixelsHeight)){this.enableFullScreen=ee.width>0&&ee.height>0;for(const te in this.texturePool){if(!(Number(te)<0))continue;const re=this.texturePool[te];if(re)for(let ne=0;ne<re.length;ne++)re[ne].destroy(!0);this.texturePool[te]=[]}this._pixelsWidth=ee.width,this._pixelsHeight=ee.height}}}RenderTexturePool.SCREEN_KEY=-1;class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer(this.vertices),this.uvBuffer=new Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(ee,te){let re=0,ne=0;return this.uvs[0]=re,this.uvs[1]=ne,this.uvs[2]=re+te.width/ee.width,this.uvs[3]=ne,this.uvs[4]=re+te.width/ee.width,this.uvs[5]=ne+te.height/ee.height,this.uvs[6]=re,this.uvs[7]=ne+te.height/ee.height,re=te.x,ne=te.y,this.vertices[0]=re,this.vertices[1]=ne,this.vertices[2]=re+te.width,this.vertices[3]=ne,this.vertices[4]=re+te.width,this.vertices[5]=ne+te.height,this.vertices[6]=re,this.vertices[7]=ne+te.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$2=new Matrix;class FilterSystem{constructor(ee){this.renderer=ee,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(ee,te){var pe,me;const re=this.renderer,ne=this.defaultFilterStack,se=this.statePool.pop()||new FilterState,ae=this.renderer.renderTexture;let oe=te[0].resolution,le=te[0].multisample,he=te[0].padding,ce=te[0].autoFit,de=(pe=te[0].legacy)!=null?pe:!0;for(let xe=1;xe<te.length;xe++){const ge=te[xe];oe=Math.min(oe,ge.resolution),le=Math.min(le,ge.multisample),he=this.useMaxPadding?Math.max(he,ge.padding):he+ge.padding,ce=ce&&ge.autoFit,de=de||((me=ge.legacy)!=null?me:!0)}ne.length===1&&(this.defaultFilterStack[0].renderTexture=ae.current),ne.push(se),se.resolution=oe,se.multisample=le,se.legacy=de,se.target=ee,se.sourceFrame.copyFrom(ee.filterArea||ee.getBounds(!0)),se.sourceFrame.pad(he);const ue=this.tempRect.copyFrom(ae.sourceFrame);re.projection.transform&&this.transformAABB(tempMatrix$2.copyFrom(re.projection.transform).invert(),ue),ce?(se.sourceFrame.fit(ue),(se.sourceFrame.width<=0||se.sourceFrame.height<=0)&&(se.sourceFrame.width=0,se.sourceFrame.height=0)):se.sourceFrame.intersects(ue)||(se.sourceFrame.width=0,se.sourceFrame.height=0),this.roundFrame(se.sourceFrame,ae.current?ae.current.resolution:re.resolution,ae.sourceFrame,ae.destinationFrame,re.projection.transform),se.renderTexture=this.getOptimalFilterTexture(se.sourceFrame.width,se.sourceFrame.height,oe,le),se.filters=te,se.destinationFrame.width=se.renderTexture.width,se.destinationFrame.height=se.renderTexture.height;const fe=this.tempRect;fe.x=0,fe.y=0,fe.width=se.sourceFrame.width,fe.height=se.sourceFrame.height,se.renderTexture.filterFrame=se.sourceFrame,se.bindingSourceFrame.copyFrom(ae.sourceFrame),se.bindingDestinationFrame.copyFrom(ae.destinationFrame),se.transform=re.projection.transform,re.projection.transform=null,ae.bind(se.renderTexture,se.sourceFrame,fe),re.framebuffer.clear(0,0,0,0)}pop(){const ee=this.defaultFilterStack,te=ee.pop(),re=te.filters;this.activeState=te;const ne=this.globalUniforms.uniforms;ne.outputFrame=te.sourceFrame,ne.resolution=te.resolution;const se=ne.inputSize,ae=ne.inputPixel,oe=ne.inputClamp;if(se[0]=te.destinationFrame.width,se[1]=te.destinationFrame.height,se[2]=1/se[0],se[3]=1/se[1],ae[0]=Math.round(se[0]*te.resolution),ae[1]=Math.round(se[1]*te.resolution),ae[2]=1/ae[0],ae[3]=1/ae[1],oe[0]=.5*ae[2],oe[1]=.5*ae[3],oe[2]=te.sourceFrame.width*se[2]-.5*ae[2],oe[3]=te.sourceFrame.height*se[3]-.5*ae[3],te.legacy){const he=ne.filterArea;he[0]=te.destinationFrame.width,he[1]=te.destinationFrame.height,he[2]=te.sourceFrame.x,he[3]=te.sourceFrame.y,ne.filterClamp=ne.inputClamp}this.globalUniforms.update();const le=ee[ee.length-1];if(this.renderer.framebuffer.blit(),re.length===1)re[0].apply(this,te.renderTexture,le.renderTexture,CLEAR_MODES.BLEND,te),this.returnFilterTexture(te.renderTexture);else{let he=te.renderTexture,ce=this.getOptimalFilterTexture(he.width,he.height,te.resolution);ce.filterFrame=he.filterFrame;let de=0;for(de=0;de<re.length-1;++de){de===1&&te.multisample>1&&(ce=this.getOptimalFilterTexture(he.width,he.height,te.resolution),ce.filterFrame=he.filterFrame),re[de].apply(this,he,ce,CLEAR_MODES.CLEAR,te);const ue=he;he=ce,ce=ue}re[de].apply(this,he,le.renderTexture,CLEAR_MODES.BLEND,te),de>1&&te.multisample>1&&this.returnFilterTexture(te.renderTexture),this.returnFilterTexture(he),this.returnFilterTexture(ce)}te.clear(),this.statePool.push(te)}bindAndClear(ee,te=CLEAR_MODES.CLEAR){const{renderTexture:re,state:ne}=this.renderer;if(ee===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,ee!=null&&ee.filterFrame){const ae=this.tempRect;ae.x=0,ae.y=0,ae.width=ee.filterFrame.width,ae.height=ee.filterFrame.height,re.bind(ee,ee.filterFrame,ae)}else ee!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?re.bind(ee):this.renderer.renderTexture.bind(ee,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const se=ne.stateId&1||this.forceClear;(te===CLEAR_MODES.CLEAR||te===CLEAR_MODES.BLIT&&se)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(ee,te,re,ne){const se=this.renderer;se.state.set(ee.state),this.bindAndClear(re,ne),ee.uniforms.uSampler=te,ee.uniforms.filterGlobals=this.globalUniforms,se.shader.bind(ee),ee.legacy=!!ee.program.attributeData.aTextureCoord,ee.legacy?(this.quadUv.map(te._frame,te.filterFrame),se.geometry.bind(this.quadUv),se.geometry.draw(DRAW_MODES.TRIANGLES)):(se.geometry.bind(this.quad),se.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(ee,te){const{sourceFrame:re,destinationFrame:ne}=this.activeState,{orig:se}=te._texture,ae=ee.set(ne.width,0,0,ne.height,re.x,re.y),oe=te.worldTransform.copyTo(Matrix.TEMP_MATRIX);return oe.invert(),ae.prepend(oe),ae.scale(1/se.width,1/se.height),ae.translate(te.anchor.x,te.anchor.y),ae}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(ee,te,re=1,ne=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(ee,te,re,ne)}getFilterTexture(ee,te,re){if(typeof ee=="number"){const se=ee;ee=te,te=se}ee=ee||this.activeState.renderTexture;const ne=this.texturePool.getOptimalTexture(ee.width,ee.height,te||ee.resolution,re||MSAA_QUALITY.NONE);return ne.filterFrame=ee.filterFrame,ne}returnFilterTexture(ee){this.texturePool.returnTexture(ee)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(ee,te){const re=tempPoints[0],ne=tempPoints[1],se=tempPoints[2],ae=tempPoints[3];re.set(te.left,te.top),ne.set(te.left,te.bottom),se.set(te.right,te.top),ae.set(te.right,te.bottom),ee.apply(re,re),ee.apply(ne,ne),ee.apply(se,se),ee.apply(ae,ae);const oe=Math.min(re.x,ne.x,se.x,ae.x),le=Math.min(re.y,ne.y,se.y,ae.y),he=Math.max(re.x,ne.x,se.x,ae.x),ce=Math.max(re.y,ne.y,se.y,ae.y);te.x=oe,te.y=le,te.width=he-oe,te.height=ce-le}roundFrame(ee,te,re,ne,se){if(!(ee.width<=0||ee.height<=0||re.width<=0||re.height<=0)){if(se){const{a:ae,b:oe,c:le,d:he}=se;if((Math.abs(oe)>1e-4||Math.abs(le)>1e-4)&&(Math.abs(ae)>1e-4||Math.abs(he)>1e-4))return}se=se?tempMatrix$2.copyFrom(se):tempMatrix$2.identity(),se.translate(-re.x,-re.y).scale(ne.width/re.width,ne.height/re.height).translate(ne.x,ne.y),this.transformAABB(se,ee),ee.ceil(te),this.transformAABB(se.invert(),ee)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"},extensions$1.add(FilterSystem);class GLFramebuffer{constructor(ee){this.framebuffer=ee,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle;class FramebufferSystem{constructor(ee){this.renderer=ee,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const ee=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let te=this.renderer.context.extensions.drawBuffers,re=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(te=null,re=null),te?ee.drawBuffers=ne=>te.drawBuffersWEBGL(ne):(this.hasMRT=!1,ee.drawBuffers=()=>{}),re||(this.writeDepthTexture=!1)}else this.msaaSamples=ee.getInternalformatParameter(ee.RENDERBUFFER,ee.RGBA8,ee.SAMPLES)}bind(ee,te,re=0){const{gl:ne}=this;if(ee){const se=ee.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(ee);this.current!==ee&&(this.current=ee,ne.bindFramebuffer(ne.FRAMEBUFFER,se.framebuffer)),se.mipLevel!==re&&(ee.dirtyId++,ee.dirtyFormat++,se.mipLevel=re),se.dirtyId!==ee.dirtyId&&(se.dirtyId=ee.dirtyId,se.dirtyFormat!==ee.dirtyFormat?(se.dirtyFormat=ee.dirtyFormat,se.dirtySize=ee.dirtySize,this.updateFramebuffer(ee,re)):se.dirtySize!==ee.dirtySize&&(se.dirtySize=ee.dirtySize,this.resizeFramebuffer(ee)));for(let ae=0;ae<ee.colorTextures.length;ae++){const oe=ee.colorTextures[ae];this.renderer.texture.unbind(oe.parentTextureArray||oe)}if(ee.depthTexture&&this.renderer.texture.unbind(ee.depthTexture),te){const ae=te.width>>re,oe=te.height>>re,le=ae/te.width;this.setViewport(te.x*le,te.y*le,ae,oe)}else{const ae=ee.width>>re,oe=ee.height>>re;this.setViewport(0,0,ae,oe)}}else this.current&&(this.current=null,ne.bindFramebuffer(ne.FRAMEBUFFER,null)),te?this.setViewport(te.x,te.y,te.width,te.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(ee,te,re,ne){const se=this.viewport;ee=Math.round(ee),te=Math.round(te),re=Math.round(re),ne=Math.round(ne),(se.width!==re||se.height!==ne||se.x!==ee||se.y!==te)&&(se.x=ee,se.y=te,se.width=re,se.height=ne,this.gl.viewport(ee,te,re,ne))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(ee,te,re,ne,se=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:ae}=this;ae.clearColor(ee,te,re,ne),ae.clear(se)}initFramebuffer(ee){const{gl:te}=this,re=new GLFramebuffer(te.createFramebuffer());return re.multisample=this.detectSamples(ee.multisample),ee.glFramebuffers[this.CONTEXT_UID]=re,this.managedFramebuffers.push(ee),ee.disposeRunner.add(this),re}resizeFramebuffer(ee){const{gl:te}=this,re=ee.glFramebuffers[this.CONTEXT_UID];re.stencil&&(te.bindRenderbuffer(te.RENDERBUFFER,re.stencil),re.msaaBuffer?te.renderbufferStorageMultisample(te.RENDERBUFFER,re.multisample,te.DEPTH24_STENCIL8,ee.width,ee.height):te.renderbufferStorage(te.RENDERBUFFER,te.DEPTH_STENCIL,ee.width,ee.height));const ne=ee.colorTextures;let se=ne.length;te.drawBuffers||(se=Math.min(se,1));for(let ae=0;ae<se;ae++){const oe=ne[ae],le=oe.parentTextureArray||oe;this.renderer.texture.bind(le,0),ae===0&&re.msaaBuffer&&(te.bindRenderbuffer(te.RENDERBUFFER,re.msaaBuffer),te.renderbufferStorageMultisample(te.RENDERBUFFER,re.multisample,le._glTextures[this.CONTEXT_UID].internalFormat,ee.width,ee.height))}ee.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(ee.depthTexture,0)}updateFramebuffer(ee,te){const{gl:re}=this,ne=ee.glFramebuffers[this.CONTEXT_UID],se=ee.colorTextures;let ae=se.length;re.drawBuffers||(ae=Math.min(ae,1)),ne.multisample>1&&this.canMultisampleFramebuffer(ee)?ne.msaaBuffer=ne.msaaBuffer||re.createRenderbuffer():ne.msaaBuffer&&(re.deleteRenderbuffer(ne.msaaBuffer),ne.msaaBuffer=null,ne.blitFramebuffer&&(ne.blitFramebuffer.dispose(),ne.blitFramebuffer=null));const oe=[];for(let le=0;le<ae;le++){const he=se[le],ce=he.parentTextureArray||he;this.renderer.texture.bind(ce,0),le===0&&ne.msaaBuffer?(re.bindRenderbuffer(re.RENDERBUFFER,ne.msaaBuffer),re.renderbufferStorageMultisample(re.RENDERBUFFER,ne.multisample,ce._glTextures[this.CONTEXT_UID].internalFormat,ee.width,ee.height),re.framebufferRenderbuffer(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.RENDERBUFFER,ne.msaaBuffer)):(re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0+le,he.target,ce._glTextures[this.CONTEXT_UID].texture,te),oe.push(re.COLOR_ATTACHMENT0+le))}if(oe.length>1&&re.drawBuffers(oe),ee.depthTexture&&this.writeDepthTexture){const he=ee.depthTexture;this.renderer.texture.bind(he,0),re.framebufferTexture2D(re.FRAMEBUFFER,re.DEPTH_ATTACHMENT,re.TEXTURE_2D,he._glTextures[this.CONTEXT_UID].texture,te)}(ee.stencil||ee.depth)&&!(ee.depthTexture&&this.writeDepthTexture)?(ne.stencil=ne.stencil||re.createRenderbuffer(),re.bindRenderbuffer(re.RENDERBUFFER,ne.stencil),ne.msaaBuffer?re.renderbufferStorageMultisample(re.RENDERBUFFER,ne.multisample,re.DEPTH24_STENCIL8,ee.width,ee.height):re.renderbufferStorage(re.RENDERBUFFER,re.DEPTH_STENCIL,ee.width,ee.height),re.framebufferRenderbuffer(re.FRAMEBUFFER,re.DEPTH_STENCIL_ATTACHMENT,re.RENDERBUFFER,ne.stencil)):ne.stencil&&(re.deleteRenderbuffer(ne.stencil),ne.stencil=null)}canMultisampleFramebuffer(ee){return this.renderer.context.webGLVersion!==1&&ee.colorTextures.length<=1&&!ee.depthTexture}detectSamples(ee){const{msaaSamples:te}=this;let re=MSAA_QUALITY.NONE;if(ee<=1||te===null)return re;for(let ne=0;ne<te.length;ne++)if(te[ne]<=ee){re=te[ne];break}return re===1&&(re=MSAA_QUALITY.NONE),re}blit(ee,te,re){const{current:ne,renderer:se,gl:ae,CONTEXT_UID:oe}=this;if(se.context.webGLVersion!==2||!ne)return;const le=ne.glFramebuffers[oe];if(!le)return;if(!ee){if(!le.msaaBuffer)return;const ce=ne.colorTextures[0];if(!ce)return;le.blitFramebuffer||(le.blitFramebuffer=new Framebuffer(ne.width,ne.height),le.blitFramebuffer.addColorTexture(0,ce)),ee=le.blitFramebuffer,ee.colorTextures[0]!==ce&&(ee.colorTextures[0]=ce,ee.dirtyId++,ee.dirtyFormat++),(ee.width!==ne.width||ee.height!==ne.height)&&(ee.width=ne.width,ee.height=ne.height,ee.dirtyId++,ee.dirtySize++)}te||(te=tempRectangle,te.width=ne.width,te.height=ne.height),re||(re=te);const he=te.width===re.width&&te.height===re.height;this.bind(ee),ae.bindFramebuffer(ae.READ_FRAMEBUFFER,le.framebuffer),ae.blitFramebuffer(te.left,te.top,te.right,te.bottom,re.left,re.top,re.right,re.bottom,ae.COLOR_BUFFER_BIT,he?ae.NEAREST:ae.LINEAR),ae.bindFramebuffer(ae.READ_FRAMEBUFFER,ee.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(ee,te){const re=ee.glFramebuffers[this.CONTEXT_UID],ne=this.gl;if(!re)return;delete ee.glFramebuffers[this.CONTEXT_UID];const se=this.managedFramebuffers.indexOf(ee);se>=0&&this.managedFramebuffers.splice(se,1),ee.disposeRunner.remove(this),te||(ne.deleteFramebuffer(re.framebuffer),re.msaaBuffer&&ne.deleteRenderbuffer(re.msaaBuffer),re.stencil&&ne.deleteRenderbuffer(re.stencil)),re.blitFramebuffer&&this.disposeFramebuffer(re.blitFramebuffer,te)}disposeAll(ee){const te=this.managedFramebuffers;this.managedFramebuffers=[];for(let re=0;re<te.length;re++)this.disposeFramebuffer(te[re],ee)}forceStencil(){const ee=this.current;if(!ee)return;const te=ee.glFramebuffers[this.CONTEXT_UID];if(!te||te.stencil)return;ee.stencil=!0;const re=ee.width,ne=ee.height,se=this.gl,ae=se.createRenderbuffer();se.bindRenderbuffer(se.RENDERBUFFER,ae),te.msaaBuffer?se.renderbufferStorageMultisample(se.RENDERBUFFER,te.multisample,se.DEPTH24_STENCIL8,re,ne):se.renderbufferStorage(se.RENDERBUFFER,se.DEPTH_STENCIL,re,ne),te.stencil=ae,se.framebufferRenderbuffer(se.FRAMEBUFFER,se.DEPTH_STENCIL_ATTACHMENT,se.RENDERBUFFER,ae)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"},extensions$1.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(ee){this.renderer=ee,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const ee=this.gl=this.renderer.gl,te=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,te.webGLVersion!==2){let re=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(re=null),re?(ee.createVertexArray=()=>re.createVertexArrayOES(),ee.bindVertexArray=ne=>re.bindVertexArrayOES(ne),ee.deleteVertexArray=ne=>re.deleteVertexArrayOES(ne)):(this.hasVao=!1,ee.createVertexArray=()=>null,ee.bindVertexArray=()=>null,ee.deleteVertexArray=()=>null)}if(te.webGLVersion!==2){const re=ee.getExtension("ANGLE_instanced_arrays");re?(ee.vertexAttribDivisor=(ne,se)=>re.vertexAttribDivisorANGLE(ne,se),ee.drawElementsInstanced=(ne,se,ae,oe,le)=>re.drawElementsInstancedANGLE(ne,se,ae,oe,le),ee.drawArraysInstanced=(ne,se,ae,oe)=>re.drawArraysInstancedANGLE(ne,se,ae,oe)):this.hasInstance=!1}this.canUseUInt32ElementIndex=te.webGLVersion===2||!!te.extensions.uint32ElementIndex}bind(ee,te){te=te||this.renderer.shader.shader;const{gl:re}=this;let ne=ee.glVertexArrayObjects[this.CONTEXT_UID],se=!1;ne||(this.managedGeometries[ee.id]=ee,ee.disposeRunner.add(this),ee.glVertexArrayObjects[this.CONTEXT_UID]=ne={},se=!0);const ae=ne[te.program.id]||this.initGeometryVao(ee,te,se);this._activeGeometry=ee,this._activeVao!==ae&&(this._activeVao=ae,this.hasVao?re.bindVertexArray(ae):this.activateVao(ee,te.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const ee=this._activeGeometry,te=this.renderer.buffer;for(let re=0;re<ee.buffers.length;re++){const ne=ee.buffers[re];te.update(ne)}}checkCompatibility(ee,te){const re=ee.attributes,ne=te.attributeData;for(const se in ne)if(!re[se])throw new Error(`shader and geometry incompatible, geometry missing the "${se}" attribute`)}getSignature(ee,te){const re=ee.attributes,ne=te.attributeData,se=["g",ee.id];for(const ae in re)ne[ae]&&se.push(ae,ne[ae].location);return se.join("-")}initGeometryVao(ee,te,re=!0){const ne=this.gl,se=this.CONTEXT_UID,ae=this.renderer.buffer,oe=te.program;oe.glPrograms[se]||this.renderer.shader.generateProgram(te),this.checkCompatibility(ee,oe);const le=this.getSignature(ee,oe),he=ee.glVertexArrayObjects[this.CONTEXT_UID];let ce=he[le];if(ce)return he[oe.id]=ce,ce;const de=ee.buffers,ue=ee.attributes,fe={},pe={};for(const me in de)fe[me]=0,pe[me]=0;for(const me in ue)!ue[me].size&&oe.attributeData[me]?ue[me].size=oe.attributeData[me].size:ue[me].size||console.warn(`PIXI Geometry attribute '${me}' size cannot be determined (likely the bound shader does not have the attribute)`),fe[ue[me].buffer]+=ue[me].size*byteSizeMap[ue[me].type];for(const me in ue){const xe=ue[me],ge=xe.size;xe.stride===void 0&&(fe[xe.buffer]===ge*byteSizeMap[xe.type]?xe.stride=0:xe.stride=fe[xe.buffer]),xe.start===void 0&&(xe.start=pe[xe.buffer],pe[xe.buffer]+=ge*byteSizeMap[xe.type])}ce=ne.createVertexArray(),ne.bindVertexArray(ce);for(let me=0;me<de.length;me++){const xe=de[me];ae.bind(xe),re&&xe._glBuffers[se].refCount++}return this.activateVao(ee,oe),he[oe.id]=ce,he[le]=ce,ne.bindVertexArray(null),ae.unbind(BUFFER_TYPE.ARRAY_BUFFER),ce}disposeGeometry(ee,te){var oe;if(!this.managedGeometries[ee.id])return;delete this.managedGeometries[ee.id];const re=ee.glVertexArrayObjects[this.CONTEXT_UID],ne=this.gl,se=ee.buffers,ae=(oe=this.renderer)==null?void 0:oe.buffer;if(ee.disposeRunner.remove(this),!!re){if(ae)for(let le=0;le<se.length;le++){const he=se[le]._glBuffers[this.CONTEXT_UID];he&&(he.refCount--,he.refCount===0&&!te&&ae.dispose(se[le],te))}if(!te){for(const le in re)if(le[0]==="g"){const he=re[le];this._activeVao===he&&this.unbind(),ne.deleteVertexArray(he)}}delete ee.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(ee){const te=Object.keys(this.managedGeometries);for(let re=0;re<te.length;re++)this.disposeGeometry(this.managedGeometries[te[re]],ee)}activateVao(ee,te){const re=this.gl,ne=this.CONTEXT_UID,se=this.renderer.buffer,ae=ee.buffers,oe=ee.attributes;ee.indexBuffer&&se.bind(ee.indexBuffer);let le=null;for(const he in oe){const ce=oe[he],de=ae[ce.buffer],ue=de._glBuffers[ne];if(te.attributeData[he]){le!==ue&&(se.bind(de),le=ue);const fe=te.attributeData[he].location;if(re.enableVertexAttribArray(fe),re.vertexAttribPointer(fe,ce.size,ce.type||re.FLOAT,ce.normalized,ce.stride,ce.start),ce.instance)if(this.hasInstance)re.vertexAttribDivisor(fe,ce.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(ee,te,re,ne){const{gl:se}=this,ae=this._activeGeometry;if(ae.indexBuffer){const oe=ae.indexBuffer.data.BYTES_PER_ELEMENT,le=oe===2?se.UNSIGNED_SHORT:se.UNSIGNED_INT;oe===2||oe===4&&this.canUseUInt32ElementIndex?ae.instanced?se.drawElementsInstanced(ee,te||ae.indexBuffer.data.length,le,(re||0)*oe,ne||1):se.drawElements(ee,te||ae.indexBuffer.data.length,le,(re||0)*oe):console.warn("unsupported index buffer type: uint32")}else ae.instanced?se.drawArraysInstanced(ee,re,te||ae.getSize(),ne||1):se.drawArrays(ee,re,te||ae.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"},extensions$1.add(GeometrySystem);const tempMat$1=new Matrix;class TextureMatrix{constructor(ee,te){this._texture=ee,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof te=="undefined"?.5:te,this.isSimple=!1}get texture(){return this._texture}set texture(ee){this._texture=ee,this._textureID=-1}multiplyUvs(ee,te){te===void 0&&(te=ee);const re=this.mapCoord;for(let ne=0;ne<ee.length;ne+=2){const se=ee[ne],ae=ee[ne+1];te[ne]=se*re.a+ae*re.c+re.tx,te[ne+1]=se*re.b+ae*re.d+re.ty}return te}update(ee){const te=this._texture;if(!te||!te.valid||!ee&&this._textureID===te._updateID)return!1;this._textureID=te._updateID,this._updateID++;const re=te._uvs;this.mapCoord.set(re.x1-re.x0,re.y1-re.y0,re.x3-re.x0,re.y3-re.y0,re.x0,re.y0);const ne=te.orig,se=te.trim;se&&(tempMat$1.set(ne.width/se.width,0,0,ne.height/se.height,-se.x/se.width,-se.y/se.height),this.mapCoord.append(tempMat$1));const ae=te.baseTexture,oe=this.uClampFrame,le=this.clampMargin/ae.resolution,he=this.clampOffset;return oe[0]=(te._frame.x+le+he)/ae.width,oe[1]=(te._frame.y+le+he)/ae.height,oe[2]=(te._frame.x+te._frame.width-le+he)/ae.width,oe[3]=(te._frame.y+te._frame.height-le+he)/ae.height,this.uClampOffset[0]=he/ae.realWidth,this.uClampOffset[1]=he/ae.realHeight,this.isSimple=te._frame.width===ae.width&&te._frame.height===ae.height&&te.rotate===0,!0}}var fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SpriteMaskFilter extends Filter$2{constructor(ee,te,re){let ne=null;typeof ee!="string"&&te===void 0&&re===void 0&&(ne=ee,ee=void 0,te=void 0,re=void 0),super(ee||vertex$4,te||fragment$7,re),this.maskSprite=ne,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(ee){this._maskSprite=ee,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(ee,te,re,ne){const se=this._maskSprite,ae=se._texture;!ae.valid||(ae.uvMatrix||(ae.uvMatrix=new TextureMatrix(ae,0)),ae.uvMatrix.update(),this.uniforms.npmAlpha=ae.baseTexture.alphaMode?0:1,this.uniforms.mask=ae,this.uniforms.otherMatrix=ee.calculateSpriteMatrix(this.maskMatrix,se).prepend(ae.uvMatrix.mapCoord),this.uniforms.alpha=se.worldAlpha,this.uniforms.maskClamp=ae.uvMatrix.uClampFrame,ee.applyFilter(this,te,re,ne))}}class MaskData{constructor(ee=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=ee||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Filter$2.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(ee){ee?this._filters?this._filters[0]=ee:this._filters=[ee]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(ee){ee?(this._stencilCounter=ee._stencilCounter,this._scissorCounter=ee._scissorCounter,this._scissorRect=ee._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MaskSystem{constructor(ee){this.renderer=ee,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(ee){this.maskStack=ee,this.renderer.scissor.setMaskStack(ee),this.renderer.stencil.setMaskStack(ee)}push(ee,te){let re=te;if(!re.isMaskData){const se=this.maskDataPool.pop()||new MaskData;se.pooled=!0,se.maskObject=te,re=se}const ne=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(re.copyCountersOrReset(ne),re._colorMask=ne?ne._colorMask:15,re.autoDetect&&this.detect(re),re._target=ee,re.type!==MASK_TYPES.SPRITE&&this.maskStack.push(re),re.enabled)switch(re.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(re);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(re);break;case MASK_TYPES.SPRITE:re.copyCountersOrReset(null),this.pushSpriteMask(re);break;case MASK_TYPES.COLOR:this.pushColorMask(re);break}re.type===MASK_TYPES.SPRITE&&this.maskStack.push(re)}pop(ee){const te=this.maskStack.pop();if(!(!te||te._target!==ee)){if(te.enabled)switch(te.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(te);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(te.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(te);break;case MASK_TYPES.COLOR:this.popColorMask(te);break}if(te.reset(),te.pooled&&this.maskDataPool.push(te),this.maskStack.length!==0){const re=this.maskStack[this.maskStack.length-1];re.type===MASK_TYPES.SPRITE&&re._filters&&(re._filters[0].maskSprite=re.maskObject)}}}detect(ee){const te=ee.maskObject;te?te.isSprite?ee.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(ee)?ee.type=MASK_TYPES.SCISSOR:ee.type=MASK_TYPES.STENCIL:ee.type=MASK_TYPES.COLOR}pushSpriteMask(ee){var ce,de;const{maskObject:te}=ee,re=ee._target;let ne=ee._filters;ne||(ne=this.alphaMaskPool[this.alphaMaskIndex],ne||(ne=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter]));const se=this.renderer,ae=se.renderTexture;let oe,le;if(ae.current){const ue=ae.current;oe=ee.resolution||ue.resolution,le=(ce=ee.multisample)!=null?ce:ue.multisample}else oe=ee.resolution||se.resolution,le=(de=ee.multisample)!=null?de:se.multisample;ne[0].resolution=oe,ne[0].multisample=le,ne[0].maskSprite=te;const he=re.filterArea;re.filterArea=te.getBounds(!0),se.filter.push(re,ne),re.filterArea=he,ee._filters||this.alphaMaskIndex++}popSpriteMask(ee){this.renderer.filter.pop(),ee._filters?ee._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(ee){const te=ee._colorMask,re=ee._colorMask=te&ee.colorMask;re!==te&&this.renderer.gl.colorMask((re&1)!==0,(re&2)!==0,(re&4)!==0,(re&8)!==0)}popColorMask(ee){const te=ee._colorMask,re=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;re!==te&&this.renderer.gl.colorMask((re&1)!==0,(re&2)!==0,(re&4)!==0,(re&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"},extensions$1.add(MaskSystem);class AbstractMaskSystem{constructor(ee){this.renderer=ee,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(ee){const{gl:te}=this.renderer,re=this.getStackLength();this.maskStack=ee;const ne=this.getStackLength();ne!==re&&(ne===0?te.disable(this.glConst):(te.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix$1=new Matrix,rectPool=[],_ScissorSystem=class extends AbstractMaskSystem{constructor(ie){super(ie),this.glConst=settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const ie=this.maskStack[this.maskStack.length-1];return ie?ie._scissorCounter:0}calcScissorRect(ie){var ae;if(ie._scissorRectLocal)return;const ee=ie._scissorRect,{maskObject:te}=ie,{renderer:re}=this,ne=re.renderTexture,se=te.getBounds(!0,(ae=rectPool.pop())!=null?ae:new Rectangle);this.roundFrameToPixels(se,ne.current?ne.current.resolution:re.resolution,ne.sourceFrame,ne.destinationFrame,re.projection.transform),ee&&se.fit(ee),ie._scissorRectLocal=se}static isMatrixRotated(ie){if(!ie)return!1;const{a:ee,b:te,c:re,d:ne}=ie;return(Math.abs(te)>1e-4||Math.abs(re)>1e-4)&&(Math.abs(ee)>1e-4||Math.abs(ne)>1e-4)}testScissor(ie){const{maskObject:ee}=ie;if(!ee.isFastRect||!ee.isFastRect()||_ScissorSystem.isMatrixRotated(ee.worldTransform)||_ScissorSystem.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(ie);const te=ie._scissorRectLocal;return te.width>0&&te.height>0}roundFrameToPixels(ie,ee,te,re,ne){_ScissorSystem.isMatrixRotated(ne)||(ne=ne?tempMatrix$1.copyFrom(ne):tempMatrix$1.identity(),ne.translate(-te.x,-te.y).scale(re.width/te.width,re.height/te.height).translate(re.x,re.y),this.renderer.filter.transformAABB(ne,ie),ie.fit(re),ie.x=Math.round(ie.x*ee),ie.y=Math.round(ie.y*ee),ie.width=Math.round(ie.width*ee),ie.height=Math.round(ie.height*ee))}push(ie){ie._scissorRectLocal||this.calcScissorRect(ie);const{gl:ee}=this.renderer;ie._scissorRect||ee.enable(ee.SCISSOR_TEST),ie._scissorCounter++,ie._scissorRect=ie._scissorRectLocal,this._useCurrent()}pop(ie){const{gl:ee}=this.renderer;ie&&rectPool.push(ie._scissorRectLocal),this.getStackLength()>0?this._useCurrent():ee.disable(ee.SCISSOR_TEST)}_useCurrent(){const ie=this.maskStack[this.maskStack.length-1]._scissorRect;let ee;this.renderer.renderTexture.current?ee=ie.y:ee=this.renderer.height-ie.height-ie.y,this.renderer.gl.scissor(ie.x,ee,ie.width,ie.height)}};let ScissorSystem=_ScissorSystem;ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"},extensions$1.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(ee){super(ee),this.glConst=settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const ee=this.maskStack[this.maskStack.length-1];return ee?ee._stencilCounter:0}push(ee){const te=ee.maskObject,{gl:re}=this.renderer,ne=ee._stencilCounter;ne===0&&(this.renderer.framebuffer.forceStencil(),re.clearStencil(0),re.clear(re.STENCIL_BUFFER_BIT),re.enable(re.STENCIL_TEST)),ee._stencilCounter++;const se=ee._colorMask;se!==0&&(ee._colorMask=0,re.colorMask(!1,!1,!1,!1)),re.stencilFunc(re.EQUAL,ne,4294967295),re.stencilOp(re.KEEP,re.KEEP,re.INCR),te.renderable=!0,te.render(this.renderer),this.renderer.batch.flush(),te.renderable=!1,se!==0&&(ee._colorMask=se,re.colorMask((se&1)!==0,(se&2)!==0,(se&4)!==0,(se&8)!==0)),this._useCurrent()}pop(ee){const te=this.renderer.gl;if(this.getStackLength()===0)te.disable(te.STENCIL_TEST);else{const re=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,ne=re?re._colorMask:15;ne!==0&&(re._colorMask=0,te.colorMask(!1,!1,!1,!1)),te.stencilOp(te.KEEP,te.KEEP,te.DECR),ee.renderable=!0,ee.render(this.renderer),this.renderer.batch.flush(),ee.renderable=!1,ne!==0&&(re._colorMask=ne,te.colorMask((ne&1)!==0,(ne&2)!==0,(ne&4)!==0,(ne&8)!==0)),this._useCurrent()}}_useCurrent(){const ee=this.renderer.gl;ee.stencilFunc(ee.EQUAL,this.getStackLength(),4294967295),ee.stencilOp(ee.KEEP,ee.KEEP,ee.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"},extensions$1.add(StencilSystem);class PluginSystem{constructor(ee){this.renderer=ee,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),ee.extract}},prepare:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),ee.prepare}},interaction:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),ee.events}}})}init(){const ee=this.rendererPlugins;for(const te in ee)this.plugins[te]=new ee[te](this.renderer)}destroy(){for(const ee in this.plugins)this.plugins[ee].destroy(),this.plugins[ee]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"},extensions$1.add(PluginSystem);class ProjectionSystem{constructor(ee){this.renderer=ee,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(ee,te,re,ne){this.destinationFrame=ee||this.destinationFrame||this.defaultFrame,this.sourceFrame=te||this.sourceFrame||ee,this.calculateProjection(this.destinationFrame,this.sourceFrame,re,ne),this.transform&&this.projectionMatrix.append(this.transform);const se=this.renderer;se.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,se.globalUniforms.update(),se.shader.shader&&se.shader.syncUniformGroup(se.shader.shader.uniforms.globals)}calculateProjection(ee,te,re,ne){const se=this.projectionMatrix,ae=ne?-1:1;se.identity(),se.a=1/te.width*2,se.d=ae*(1/te.height*2),se.tx=-1-te.x*se.a,se.ty=-ae-te.y*se.d}setTransform(ee){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"},extensions$1.add(ProjectionSystem);const tempTransform=new Transform;class GenerateTextureSystem{constructor(ee){this.renderer=ee,this._tempMatrix=new Matrix}generateTexture(ee,te){const{region:re,...ne}=te||{},se=re||ee.getLocalBounds(null,!0);se.width===0&&(se.width=1),se.height===0&&(se.height=1);const ae=RenderTexture.create({width:se.width,height:se.height,...ne});this._tempMatrix.tx=-se.x,this._tempMatrix.ty=-se.y;const oe=ee.transform;return ee.transform=tempTransform,this.renderer.render(ee,{renderTexture:ae,transform:this._tempMatrix,skipUpdateTransform:!!ee.parent,blit:!0}),ee.transform=oe,ae}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"},extensions$1.add(GenerateTextureSystem);const tempRect=new Rectangle,tempRect2=new Rectangle;class RenderTextureSystem{constructor(ee){this.renderer=ee,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}contextChange(){var te;const ee=(te=this.renderer)==null?void 0:te.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(ee&&ee.alpha&&ee.premultipliedAlpha)}bind(ee=null,te,re){const ne=this.renderer;this.current=ee;let se,ae,oe;ee?(se=ee.baseTexture,oe=se.resolution,te||(tempRect.width=ee.frame.width,tempRect.height=ee.frame.height,te=tempRect),re||(tempRect2.x=ee.frame.x,tempRect2.y=ee.frame.y,tempRect2.width=te.width,tempRect2.height=te.height,re=tempRect2),ae=se.framebuffer):(oe=ne.resolution,te||(tempRect.width=ne._view.screen.width,tempRect.height=ne._view.screen.height,te=tempRect),re||(re=tempRect,re.width=te.width,re.height=te.height));const le=this.viewportFrame;le.x=re.x*oe,le.y=re.y*oe,le.width=re.width*oe,le.height=re.height*oe,ee||(le.y=ne.view.height-(le.y+le.height)),le.ceil(),this.renderer.framebuffer.bind(ae,le),this.renderer.projection.update(re,te,oe,!ae),ee?this.renderer.mask.setMaskStack(se.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(te),this.destinationFrame.copyFrom(re)}clear(ee,te){const re=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,ne=Color.shared.setValue(ee||re);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&ne.premultiply(ne.alpha);const se=this.destinationFrame,ae=this.current?this.current.baseTexture:this.renderer._view.screen,oe=se.width!==ae.width||se.height!==ae.height;if(oe){let{x:le,y:he,width:ce,height:de}=this.viewportFrame;le=Math.round(le),he=Math.round(he),ce=Math.round(ce),de=Math.round(de),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(le,he,ce,de)}this.renderer.framebuffer.clear(ne.red,ne.green,ne.blue,ne.alpha,te),oe&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"},extensions$1.add(RenderTextureSystem);class GLProgram{constructor(ee,te){this.program=ee,this.uniformData=te,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(ie,ee){const te={},re=ee.getProgramParameter(ie,ee.ACTIVE_ATTRIBUTES);for(let ne=0;ne<re;ne++){const se=ee.getActiveAttrib(ie,ne);if(se.name.startsWith("gl_"))continue;const ae=mapType(ee,se.type),oe={type:ae,name:se.name,size:mapSize(ae),location:ee.getAttribLocation(ie,se.name)};te[se.name]=oe}return te}function getUniformData(ie,ee){const te={},re=ee.getProgramParameter(ie,ee.ACTIVE_UNIFORMS);for(let ne=0;ne<re;ne++){const se=ee.getActiveUniform(ie,ne),ae=se.name.replace(/\[.*?\]$/,""),oe=!!se.name.match(/\[.*?\]$/),le=mapType(ee,se.type);te[ae]={name:ae,index:ne,type:le,size:se.size,isArray:oe,value:defaultValue(le,se.size)}}return te}function generateProgram(ie,ee){var le;const te=compileShader(ie,ie.VERTEX_SHADER,ee.vertexSrc),re=compileShader(ie,ie.FRAGMENT_SHADER,ee.fragmentSrc),ne=ie.createProgram();ie.attachShader(ne,te),ie.attachShader(ne,re);const se=(le=ee.extra)==null?void 0:le.transformFeedbackVaryings;if(se&&(typeof ie.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):ie.transformFeedbackVaryings(ne,se.names,se.bufferMode==="separate"?ie.SEPARATE_ATTRIBS:ie.INTERLEAVED_ATTRIBS)),ie.linkProgram(ne),ie.getProgramParameter(ne,ie.LINK_STATUS)||logProgramError(ie,ne,te,re),ee.attributeData=getAttributeData(ne,ie),ee.uniformData=getUniformData(ne,ie),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(ee.vertexSrc)){const he=Object.keys(ee.attributeData);he.sort((ce,de)=>ce>de?1:-1);for(let ce=0;ce<he.length;ce++)ee.attributeData[he[ce]].location=ce,ie.bindAttribLocation(ne,ce,he[ce]);ie.linkProgram(ne)}ie.deleteShader(te),ie.deleteShader(re);const ae={};for(const he in ee.uniformData){const ce=ee.uniformData[he];ae[he]={location:ie.getUniformLocation(ne,he),value:defaultValue(ce.type,ce.size)}}return new GLProgram(ne,ae)}function uboUpdate(ie,ee,te,re,ne){te.buffer.update(ne)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(ie){const ee=ie.map(se=>({data:se,offset:0,dataLen:0,dirty:0}));let te=0,re=0,ne=0;for(let se=0;se<ee.length;se++){const ae=ee[se];if(te=GLSL_TO_STD40_SIZE[ae.data.type],ae.data.size>1&&(te=Math.max(te,16)*ae.data.size),ae.dataLen=te,re%te!==0&&re<16){const oe=re%te%16;re+=oe,ne+=oe}re+te>16?(ne=Math.ceil(ne/16)*16,ae.offset=ne,ne+=te,re=te):(ae.offset=ne,re+=te,ne+=te)}return ne=Math.ceil(ne/16)*16,{uboElements:ee,size:ne}}function getUBOData(ie,ee){const te=[];for(const re in ie)ee[re]&&te.push(ee[re]);return te.sort((re,ne)=>re.index-ne.index),te}function generateUniformBufferSync(ie,ee){if(!ie.autoManage)return{size:0,syncFunc:uboUpdate};const te=getUBOData(ie.uniforms,ee),{uboElements:re,size:ne}=createUBOElements(te),se=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let ae=0;ae<re.length;ae++){const oe=re[ae],le=ie.uniforms[oe.data.name],he=oe.data.name;let ce=!1;for(let de=0;de<uniformParsers.length;de++){const ue=uniformParsers[de];if(ue.codeUbo&&ue.test(oe.data,le)){se.push(`offset = ${oe.offset/4};`,uniformParsers[de].codeUbo(oe.data.name,le)),ce=!0;break}}if(!ce)if(oe.data.size>1){const de=mapSize(oe.data.type),ue=Math.max(GLSL_TO_STD40_SIZE[oe.data.type]/16,1),fe=de/ue,pe=(4-fe%4)%4;se.push(`
                cv = ud.${he}.value;
                v = uv.${he};
                offset = ${oe.offset/4};

                t = 0;

                for(var i=0; i < ${oe.data.size*ue}; i++)
                {
                    for(var j = 0; j < ${fe}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${pe};
                }

                `)}else{const de=UBO_TO_SINGLE_SETTERS[oe.data.type];se.push(`
                cv = ud.${he}.value;
                v = uv.${he};
                offset = ${oe.offset/4};
                ${de};
                `)}}return se.push(`
       renderer.buffer.update(buffer);
    `),{size:ne,syncFunc:new Function("ud","uv","renderer","syncData","buffer",se.join(`
`))}}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(ee){this.destroyed=!1,this.renderer=ee,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(ee){this.gl=ee,this.reset()}bind(ee,te){ee.disposeRunner.add(this),ee.uniforms.globals=this.renderer.globalUniforms;const re=ee.program,ne=re.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(ee);return this.shader=ee,this.program!==re&&(this.program=re,this.gl.useProgram(ne.program)),te||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(ee.uniformGroup,defaultSyncData)),ne}setUniforms(ee){const te=this.shader.program,re=te.glPrograms[this.renderer.CONTEXT_UID];te.syncUniforms(re.uniformData,ee,this.renderer)}syncUniformGroup(ee,te){const re=this.getGlProgram();(!ee.static||ee.dirtyId!==re.uniformDirtyGroups[ee.id])&&(re.uniformDirtyGroups[ee.id]=ee.dirtyId,this.syncUniforms(ee,re,te))}syncUniforms(ee,te,re){(ee.syncUniforms[this.shader.program.id]||this.createSyncGroups(ee))(te.uniformData,ee.uniforms,this.renderer,re)}createSyncGroups(ee){const te=this.getSignature(ee,this.shader.program.uniformData,"u");return this.cache[te]||(this.cache[te]=generateUniformsSync(ee,this.shader.program.uniformData)),ee.syncUniforms[this.shader.program.id]=this.cache[te],ee.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(ee,te){const re=this.getGlProgram();if(!ee.static||ee.dirtyId!==0||!re.uniformGroups[ee.id]){ee.dirtyId=0;const ne=re.uniformGroups[ee.id]||this.createSyncBufferGroup(ee,re,te);ee.buffer.update(),ne(re.uniformData,ee.uniforms,this.renderer,defaultSyncData,ee.buffer)}this.renderer.buffer.bindBufferBase(ee.buffer,re.uniformBufferBindings[te])}createSyncBufferGroup(ee,te,re){const{gl:ne}=this.renderer;this.renderer.buffer.bind(ee.buffer);const se=this.gl.getUniformBlockIndex(te.program,re);te.uniformBufferBindings[re]=this.shader.uniformBindCount,ne.uniformBlockBinding(te.program,se,this.shader.uniformBindCount),this.shader.uniformBindCount++;const ae=this.getSignature(ee,this.shader.program.uniformData,"ubo");let oe=this._uboCache[ae];if(oe||(oe=this._uboCache[ae]=generateUniformBufferSync(ee,this.shader.program.uniformData)),ee.autoManage){const le=new Float32Array(oe.size/4);ee.buffer.update(le)}return te.uniformGroups[ee.id]=oe.syncFunc,te.uniformGroups[ee.id]}getSignature(ee,te,re){const ne=ee.uniforms,se=[`${re}-`];for(const ae in ne)se.push(ae),te[ae]&&se.push(te[ae].type);return se.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(ee){const te=this.gl,re=ee.program,ne=generateProgram(te,re);return re.glPrograms[this.renderer.CONTEXT_UID]=ne,ne}reset(){this.program=null,this.shader=null}disposeShader(ee){this.shader===ee&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"},extensions$1.add(ShaderSystem);class StartupSystem{constructor(ee){this.renderer=ee}run(ee){const{renderer:te}=this;te.runners.init.emit(te.options),ee.hello&&console.log(`PixiJS 7.2.4 - ${te.rendererLogId} - https://pixijs.com`),te.resize(te.screen.width,te.screen.height)}destroy(){}}StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"},extensions$1.add(StartupSystem);function mapWebGLBlendModesToPixi(ie,ee=[]){return ee[BLEND_MODES.NORMAL]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.ADD]=[ie.ONE,ie.ONE],ee[BLEND_MODES.MULTIPLY]=[ie.DST_COLOR,ie.ONE_MINUS_SRC_ALPHA,ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.SCREEN]=[ie.ONE,ie.ONE_MINUS_SRC_COLOR,ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.OVERLAY]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.DARKEN]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.LIGHTEN]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.COLOR_DODGE]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.COLOR_BURN]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.HARD_LIGHT]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.SOFT_LIGHT]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.DIFFERENCE]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.EXCLUSION]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.HUE]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.SATURATION]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.COLOR]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.LUMINOSITY]=[ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.NONE]=[0,0],ee[BLEND_MODES.NORMAL_NPM]=[ie.SRC_ALPHA,ie.ONE_MINUS_SRC_ALPHA,ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.ADD_NPM]=[ie.SRC_ALPHA,ie.ONE,ie.ONE,ie.ONE],ee[BLEND_MODES.SCREEN_NPM]=[ie.SRC_ALPHA,ie.ONE_MINUS_SRC_COLOR,ie.ONE,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.SRC_IN]=[ie.DST_ALPHA,ie.ZERO],ee[BLEND_MODES.SRC_OUT]=[ie.ONE_MINUS_DST_ALPHA,ie.ZERO],ee[BLEND_MODES.SRC_ATOP]=[ie.DST_ALPHA,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.DST_OVER]=[ie.ONE_MINUS_DST_ALPHA,ie.ONE],ee[BLEND_MODES.DST_IN]=[ie.ZERO,ie.SRC_ALPHA],ee[BLEND_MODES.DST_OUT]=[ie.ZERO,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.DST_ATOP]=[ie.ONE_MINUS_DST_ALPHA,ie.SRC_ALPHA],ee[BLEND_MODES.XOR]=[ie.ONE_MINUS_DST_ALPHA,ie.ONE_MINUS_SRC_ALPHA],ee[BLEND_MODES.SUBTRACT]=[ie.ONE,ie.ONE,ie.ONE,ie.ONE,ie.FUNC_REVERSE_SUBTRACT,ie.FUNC_ADD],ee}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(ie){this.gl=ie,this.blendModes=mapWebGLBlendModesToPixi(ie),this.set(this.defaultState),this.reset()}set(ie){if(ie=ie||this.defaultState,this.stateId!==ie.data){let ee=this.stateId^ie.data,te=0;for(;ee;)ee&1&&this.map[te].call(this,!!(ie.data&1<<te)),ee=ee>>1,te++;this.stateId=ie.data}for(let ee=0;ee<this.checks.length;ee++)this.checks[ee](this,ie)}forceState(ie){ie=ie||this.defaultState;for(let ee=0;ee<this.map.length;ee++)this.map[ee].call(this,!!(ie.data&1<<ee));for(let ee=0;ee<this.checks.length;ee++)this.checks[ee](this,ie);this.stateId=ie.data}setBlend(ie){this.updateCheck(_StateSystem.checkBlendMode,ie),this.gl[ie?"enable":"disable"](this.gl.BLEND)}setOffset(ie){this.updateCheck(_StateSystem.checkPolygonOffset,ie),this.gl[ie?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(ie){this.gl[ie?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(ie){this.gl.depthMask(ie)}setCullFace(ie){this.gl[ie?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(ie){this.gl.frontFace(this.gl[ie?"CW":"CCW"])}setBlendMode(ie){if(ie===this.blendMode)return;this.blendMode=ie;const ee=this.blendModes[ie],te=this.gl;ee.length===2?te.blendFunc(ee[0],ee[1]):te.blendFuncSeparate(ee[0],ee[1],ee[2],ee[3]),ee.length===6?(this._blendEq=!0,te.blendEquationSeparate(ee[4],ee[5])):this._blendEq&&(this._blendEq=!1,te.blendEquationSeparate(te.FUNC_ADD,te.FUNC_ADD))}setPolygonOffset(ie,ee){this.gl.polygonOffset(ie,ee)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(ie,ee){const te=this.checks.indexOf(ie);ee&&te===-1?this.checks.push(ie):!ee&&te!==-1&&this.checks.splice(te,1)}static checkBlendMode(ie,ee){ie.setBlendMode(ee.blendMode)}static checkPolygonOffset(ie,ee){ie.setPolygonOffset(1,ee.polygonOffset)}destroy(){this.gl=null}};let StateSystem=_StateSystem;StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"},extensions$1.add(StateSystem);class SystemManager extends EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(ee){var ne;this.addRunners(...ee.runners);const te=((ne=ee.priority)!=null?ne:[]).filter(se=>ee.systems[se]),re=[...te,...Object.keys(ee.systems).filter(se=>!te.includes(se))];for(const se of re)this.addSystem(ee.systems[se],se)}addRunners(...ee){ee.forEach(te=>{this.runners[te]=new Runner(te)})}addSystem(ee,te){const re=new ee(this);if(this[te])throw new Error(`Whoops! The name "${te}" is already in use`);this[te]=re,this._systemsHash[te]=re;for(const ne in this.runners)this.runners[ne].add(re);return this}emitWithCustomOptions(ee,te){const re=Object.keys(this._systemsHash);ee.items.forEach(ne=>{const se=re.find(ae=>this._systemsHash[ae]===ne);ne[ee.name](te[se])})}destroy(){Object.values(this.runners).forEach(ee=>{ee.destroy()}),this._systemsHash={}}}const _TextureGCSystem=class{constructor(ie){this.renderer=ie,this.count=0,this.checkCount=0,this.maxIdle=_TextureGCSystem.defaultMaxIdle,this.checkCountMax=_TextureGCSystem.defaultCheckCountMax,this.mode=_TextureGCSystem.defaultMode}postrender(){!this.renderer.objectRenderer.renderingToScreen||(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const ie=this.renderer.texture,ee=ie.managedTextures;let te=!1;for(let re=0;re<ee.length;re++){const ne=ee[re];!ne.framebuffer&&this.count-ne.touched>this.maxIdle&&(ie.destroyTexture(ne,!0),ee[re]=null,te=!0)}if(te){let re=0;for(let ne=0;ne<ee.length;ne++)ee[ne]!==null&&(ee[re++]=ee[ne]);ee.length=re}}unload(ie){const ee=this.renderer.texture,te=ie._texture;te&&!te.framebuffer&&ee.destroyTexture(te);for(let re=ie.children.length-1;re>=0;re--)this.unload(ie.children[re])}destroy(){this.renderer=null}};let TextureGCSystem=_TextureGCSystem;TextureGCSystem.defaultMode=GC_MODES.AUTO,TextureGCSystem.defaultMaxIdle=60*60,TextureGCSystem.defaultCheckCountMax=60*10,TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"},extensions$1.add(TextureGCSystem);class GLTexture{constructor(ee){this.texture=ee,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}function mapTypeAndFormatToInternalFormat(ie){let ee;return"WebGL2RenderingContext"in globalThis&&ie instanceof globalThis.WebGL2RenderingContext?ee={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:ie.RGBA8,[FORMATS.RGB]:ie.RGB8,[FORMATS.RG]:ie.RG8,[FORMATS.RED]:ie.R8,[FORMATS.RGBA_INTEGER]:ie.RGBA8UI,[FORMATS.RGB_INTEGER]:ie.RGB8UI,[FORMATS.RG_INTEGER]:ie.RG8UI,[FORMATS.RED_INTEGER]:ie.R8UI,[FORMATS.ALPHA]:ie.ALPHA,[FORMATS.LUMINANCE]:ie.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:ie.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:ie.RGBA8_SNORM,[FORMATS.RGB]:ie.RGB8_SNORM,[FORMATS.RG]:ie.RG8_SNORM,[FORMATS.RED]:ie.R8_SNORM,[FORMATS.RGBA_INTEGER]:ie.RGBA8I,[FORMATS.RGB_INTEGER]:ie.RGB8I,[FORMATS.RG_INTEGER]:ie.RG8I,[FORMATS.RED_INTEGER]:ie.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:ie.RGBA16UI,[FORMATS.RGB_INTEGER]:ie.RGB16UI,[FORMATS.RG_INTEGER]:ie.RG16UI,[FORMATS.RED_INTEGER]:ie.R16UI,[FORMATS.DEPTH_COMPONENT]:ie.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:ie.RGBA16I,[FORMATS.RGB_INTEGER]:ie.RGB16I,[FORMATS.RG_INTEGER]:ie.RG16I,[FORMATS.RED_INTEGER]:ie.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:ie.RGBA32UI,[FORMATS.RGB_INTEGER]:ie.RGB32UI,[FORMATS.RG_INTEGER]:ie.RG32UI,[FORMATS.RED_INTEGER]:ie.R32UI,[FORMATS.DEPTH_COMPONENT]:ie.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:ie.RGBA32I,[FORMATS.RGB_INTEGER]:ie.RGB32I,[FORMATS.RG_INTEGER]:ie.RG32I,[FORMATS.RED_INTEGER]:ie.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:ie.RGBA32F,[FORMATS.RGB]:ie.RGB32F,[FORMATS.RG]:ie.RG32F,[FORMATS.RED]:ie.R32F,[FORMATS.DEPTH_COMPONENT]:ie.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:ie.RGBA16F,[FORMATS.RGB]:ie.RGB16F,[FORMATS.RG]:ie.RG16F,[FORMATS.RED]:ie.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:ie.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:ie.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:ie.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:ie.RGB10_A2,[FORMATS.RGBA_INTEGER]:ie.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:ie.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:ie.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:ie.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:ie.DEPTH32F_STENCIL8}}:ee={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:ie.RGBA,[FORMATS.RGB]:ie.RGB,[FORMATS.ALPHA]:ie.ALPHA,[FORMATS.LUMINANCE]:ie.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:ie.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:ie.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:ie.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:ie.RGBA}},ee}class TextureSystem{constructor(ee){this.renderer=ee,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const ee=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(ee);const te=ee.getParameter(ee.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=te;for(let ne=0;ne<te;ne++)this.boundTextures[ne]=null;this.emptyTextures={};const re=new GLTexture(ee.createTexture());ee.bindTexture(ee.TEXTURE_2D,re.texture),ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,1,1,0,ee.RGBA,ee.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[ee.TEXTURE_2D]=re,this.emptyTextures[ee.TEXTURE_CUBE_MAP]=new GLTexture(ee.createTexture()),ee.bindTexture(ee.TEXTURE_CUBE_MAP,this.emptyTextures[ee.TEXTURE_CUBE_MAP].texture);for(let ne=0;ne<6;ne++)ee.texImage2D(ee.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,ee.RGBA,1,1,0,ee.RGBA,ee.UNSIGNED_BYTE,null);ee.texParameteri(ee.TEXTURE_CUBE_MAP,ee.TEXTURE_MAG_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_CUBE_MAP,ee.TEXTURE_MIN_FILTER,ee.LINEAR);for(let ne=0;ne<this.boundTextures.length;ne++)this.bind(null,ne)}bind(ee,te=0){const{gl:re}=this;if(ee=ee==null?void 0:ee.castToBaseTexture(),(ee==null?void 0:ee.valid)&&!ee.parentTextureArray){ee.touched=this.renderer.textureGC.count;const ne=ee._glTextures[this.CONTEXT_UID]||this.initTexture(ee);this.boundTextures[te]!==ee&&(this.currentLocation!==te&&(this.currentLocation=te,re.activeTexture(re.TEXTURE0+te)),re.bindTexture(ee.target,ne.texture)),ne.dirtyId!==ee.dirtyId?(this.currentLocation!==te&&(this.currentLocation=te,re.activeTexture(re.TEXTURE0+te)),this.updateTexture(ee)):ne.dirtyStyleId!==ee.dirtyStyleId&&this.updateTextureStyle(ee),this.boundTextures[te]=ee}else this.currentLocation!==te&&(this.currentLocation=te,re.activeTexture(re.TEXTURE0+te)),re.bindTexture(re.TEXTURE_2D,this.emptyTextures[re.TEXTURE_2D].texture),this.boundTextures[te]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let ee=0;ee<this.boundTextures.length;ee++)this.boundTextures[ee]=this.unknownTexture}unbind(ee){const{gl:te,boundTextures:re}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let ne=0;ne<re.length;ne++)re[ne]===this.unknownTexture&&this.bind(null,ne)}for(let ne=0;ne<re.length;ne++)re[ne]===ee&&(this.currentLocation!==ne&&(te.activeTexture(te.TEXTURE0+ne),this.currentLocation=ne),te.bindTexture(ee.target,this.emptyTextures[ee.target].texture),re[ne]=null)}ensureSamplerType(ee){const{boundTextures:te,hasIntegerTextures:re,CONTEXT_UID:ne}=this;if(!!re)for(let se=ee-1;se>=0;--se){const ae=te[se];ae&&ae._glTextures[ne].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(ae)}}initTexture(ee){const te=new GLTexture(this.gl.createTexture());return te.dirtyId=-1,ee._glTextures[this.CONTEXT_UID]=te,this.managedTextures.push(ee),ee.on("dispose",this.destroyTexture,this),te}initTextureType(ee,te){var re,ne;te.internalFormat=(ne=(re=this.internalFormats[ee.type])==null?void 0:re[ee.format])!=null?ne:ee.format,this.webGLVersion===2&&ee.type===TYPES.HALF_FLOAT?te.type=this.gl.HALF_FLOAT:te.type=ee.type}updateTexture(ee){var ne;const te=ee._glTextures[this.CONTEXT_UID];if(!te)return;const re=this.renderer;if(this.initTextureType(ee,te),(ne=ee.resource)!=null&&ne.upload(re,ee,te))te.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const se=ee.realWidth,ae=ee.realHeight,oe=re.gl;(te.width!==se||te.height!==ae||te.dirtyId<0)&&(te.width=se,te.height=ae,oe.texImage2D(ee.target,0,te.internalFormat,se,ae,0,ee.format,te.type,null))}ee.dirtyStyleId!==te.dirtyStyleId&&this.updateTextureStyle(ee),te.dirtyId=ee.dirtyId}destroyTexture(ee,te){const{gl:re}=this;if(ee=ee.castToBaseTexture(),ee._glTextures[this.CONTEXT_UID]&&(this.unbind(ee),re.deleteTexture(ee._glTextures[this.CONTEXT_UID].texture),ee.off("dispose",this.destroyTexture,this),delete ee._glTextures[this.CONTEXT_UID],!te)){const ne=this.managedTextures.indexOf(ee);ne!==-1&&removeItems(this.managedTextures,ne,1)}}updateTextureStyle(ee){var re;const te=ee._glTextures[this.CONTEXT_UID];!te||((ee.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!ee.isPowerOfTwo?te.mipmap=!1:te.mipmap=ee.mipmap>=1,this.webGLVersion!==2&&!ee.isPowerOfTwo?te.wrapMode=WRAP_MODES.CLAMP:te.wrapMode=ee.wrapMode,(re=ee.resource)!=null&&re.style(this.renderer,ee,te)||this.setStyle(ee,te),te.dirtyStyleId=ee.dirtyStyleId)}setStyle(ee,te){const re=this.gl;if(te.mipmap&&ee.mipmap!==MIPMAP_MODES.ON_MANUAL&&re.generateMipmap(ee.target),re.texParameteri(ee.target,re.TEXTURE_WRAP_S,te.wrapMode),re.texParameteri(ee.target,re.TEXTURE_WRAP_T,te.wrapMode),te.mipmap){re.texParameteri(ee.target,re.TEXTURE_MIN_FILTER,ee.scaleMode===SCALE_MODES.LINEAR?re.LINEAR_MIPMAP_LINEAR:re.NEAREST_MIPMAP_NEAREST);const ne=this.renderer.context.extensions.anisotropicFiltering;if(ne&&ee.anisotropicLevel>0&&ee.scaleMode===SCALE_MODES.LINEAR){const se=Math.min(ee.anisotropicLevel,re.getParameter(ne.MAX_TEXTURE_MAX_ANISOTROPY_EXT));re.texParameterf(ee.target,ne.TEXTURE_MAX_ANISOTROPY_EXT,se)}}else re.texParameteri(ee.target,re.TEXTURE_MIN_FILTER,ee.scaleMode===SCALE_MODES.LINEAR?re.LINEAR:re.NEAREST);re.texParameteri(ee.target,re.TEXTURE_MAG_FILTER,ee.scaleMode===SCALE_MODES.LINEAR?re.LINEAR:re.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"},extensions$1.add(TextureSystem);class TransformFeedbackSystem{constructor(ee){this.renderer=ee}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(ee){const{gl:te,CONTEXT_UID:re}=this,ne=ee._glTransformFeedbacks[re]||this.createGLTransformFeedback(ee);te.bindTransformFeedback(te.TRANSFORM_FEEDBACK,ne)}unbind(){const{gl:ee}=this;ee.bindTransformFeedback(ee.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(ee,te){const{gl:re,renderer:ne}=this;te&&ne.shader.bind(te),re.beginTransformFeedback(ee)}endTransformFeedback(){const{gl:ee}=this;ee.endTransformFeedback()}createGLTransformFeedback(ee){const{gl:te,renderer:re,CONTEXT_UID:ne}=this,se=te.createTransformFeedback();ee._glTransformFeedbacks[ne]=se,te.bindTransformFeedback(te.TRANSFORM_FEEDBACK,se);for(let ae=0;ae<ee.buffers.length;ae++){const oe=ee.buffers[ae];!oe||(re.buffer.update(oe),oe._glBuffers[ne].refCount++,te.bindBufferBase(te.TRANSFORM_FEEDBACK_BUFFER,ae,oe._glBuffers[ne].buffer||null))}return te.bindTransformFeedback(te.TRANSFORM_FEEDBACK,null),ee.disposeRunner.add(this),se}disposeTransformFeedback(ee,te){const re=ee._glTransformFeedbacks[this.CONTEXT_UID],ne=this.gl;ee.disposeRunner.remove(this);const se=this.renderer.buffer;if(se)for(let ae=0;ae<ee.buffers.length;ae++){const oe=ee.buffers[ae];if(!oe)continue;const le=oe._glBuffers[this.CONTEXT_UID];le&&(le.refCount--,le.refCount===0&&!te&&se.dispose(oe,te))}!re||(te||ne.deleteTransformFeedback(re),delete ee._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"},extensions$1.add(TransformFeedbackSystem);class ViewSystem{constructor(ee){this.renderer=ee}init(ee){this.screen=new Rectangle(0,0,ee.width,ee.height),this.element=ee.view||settings.ADAPTER.createCanvas(),this.resolution=ee.resolution||settings.RESOLUTION,this.autoDensity=!!ee.autoDensity}resizeView(ee,te){this.element.width=Math.round(ee*this.resolution),this.element.height=Math.round(te*this.resolution);const re=this.element.width/this.resolution,ne=this.element.height/this.resolution;this.screen.width=re,this.screen.height=ne,this.autoDensity&&(this.element.style.width=`${re}px`,this.element.style.height=`${ne}px`),this.renderer.emit("resize",re,ne),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(ee){var te;ee&&((te=this.element.parentNode)==null||te.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.defaultOptions={width:800,height:600,resolution:settings.RESOLUTION,autoDensity:!1},ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"},extensions$1.add(ViewSystem),settings.PREFER_ENV=ENV.WEBGL2,settings.STRICT_TEXTURE_CACHE=!1,settings.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions},Object.defineProperties(settings,{WRAP_MODE:{get(){return BaseTexture.defaultOptions.wrapMode},set(ie){deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),BaseTexture.defaultOptions.wrapMode=ie}},SCALE_MODE:{get(){return BaseTexture.defaultOptions.scaleMode},set(ie){deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),BaseTexture.defaultOptions.scaleMode=ie}},MIPMAP_TEXTURES:{get(){return BaseTexture.defaultOptions.mipmap},set(ie){deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),BaseTexture.defaultOptions.mipmap=ie}},ANISOTROPIC_LEVEL:{get(){return BaseTexture.defaultOptions.anisotropicLevel},set(ie){deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),BaseTexture.defaultOptions.anisotropicLevel=ie}},FILTER_RESOLUTION:{get(){return deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Filter$2.defaultResolution},set(ie){Filter$2.defaultResolution=ie}},FILTER_MULTISAMPLE:{get(){return deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Filter$2.defaultMultisample},set(ie){Filter$2.defaultMultisample=ie}},SPRITE_MAX_TEXTURES:{get(){return BatchRenderer.defaultMaxTextures},set(ie){deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),BatchRenderer.defaultMaxTextures=ie}},SPRITE_BATCH_SIZE:{get(){return BatchRenderer.defaultBatchSize},set(ie){deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),BatchRenderer.defaultBatchSize=ie}},CAN_UPLOAD_SAME_BUFFER:{get(){return BatchRenderer.canUploadSameBuffer},set(ie){deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),BatchRenderer.canUploadSameBuffer=ie}},GC_MODE:{get(){return TextureGCSystem.defaultMode},set(ie){deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TextureGCSystem.defaultMode=ie}},GC_MAX_IDLE:{get(){return TextureGCSystem.defaultMaxIdle},set(ie){deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TextureGCSystem.defaultMaxIdle=ie}},GC_MAX_CHECK_COUNT:{get(){return TextureGCSystem.defaultCheckCountMax},set(ie){deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TextureGCSystem.defaultCheckCountMax=ie}},PRECISION_VERTEX:{get(){return Program.defaultVertexPrecision},set(ie){deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Program.defaultVertexPrecision=ie}},PRECISION_FRAGMENT:{get(){return Program.defaultFragmentPrecision},set(ie){deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Program.defaultFragmentPrecision=ie}}});var UPDATE_PRIORITY=(ie=>(ie[ie.INTERACTION=50]="INTERACTION",ie[ie.HIGH=25]="HIGH",ie[ie.NORMAL=0]="NORMAL",ie[ie.LOW=-25]="LOW",ie[ie.UTILITY=-50]="UTILITY",ie))(UPDATE_PRIORITY||{});class TickerListener{constructor(ee,te=null,re=0,ne=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=ee,this.context=te,this.priority=re,this.once=ne}match(ee,te=null){return this.fn===ee&&this.context===te}emit(ee){this.fn&&(this.context?this.fn.call(this.context,ee):this.fn(ee));const te=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),te}connect(ee){this.previous=ee,ee.next&&(ee.next.previous=this),this.next=ee.next,ee.next=this}destroy(ee=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const te=this.next;return this.next=ee?null:te,this.previous=null,te}}const _Ticker=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/_Ticker.targetFPMS,this.elapsedMS=1/_Ticker.targetFPMS,this._tick=ie=>{this._requestId=null,this.started&&(this.update(ie),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(ie,ee,te=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(ie,ee,te))}addOnce(ie,ee,te=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(ie,ee,te,!0))}_addListener(ie){let ee=this._head.next,te=this._head;if(!ee)ie.connect(te);else{for(;ee;){if(ie.priority>ee.priority){ie.connect(te);break}te=ee,ee=ee.next}ie.previous||ie.connect(te)}return this._startIfPossible(),this}remove(ie,ee){let te=this._head.next;for(;te;)te.match(ie,ee)?te=te.destroy():te=te.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let ie=0,ee=this._head;for(;ee=ee.next;)ie++;return ie}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let ie=this._head.next;for(;ie;)ie=ie.destroy(!0);this._head.destroy(),this._head=null}}update(ie=performance.now()){let ee;if(ie>this.lastTime){if(ee=this.elapsedMS=ie-this.lastTime,ee>this._maxElapsedMS&&(ee=this._maxElapsedMS),ee*=this.speed,this._minElapsedMS){const ne=ie-this._lastFrame|0;if(ne<this._minElapsedMS)return;this._lastFrame=ie-ne%this._minElapsedMS}this.deltaMS=ee,this.deltaTime=this.deltaMS*_Ticker.targetFPMS;const te=this._head;let re=te.next;for(;re;)re=re.emit(this.deltaTime);te.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=ie}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(ie){const ee=Math.min(this.maxFPS,ie),te=Math.min(Math.max(0,ee)/1e3,_Ticker.targetFPMS);this._maxElapsedMS=1/te}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(ie){if(ie===0)this._minElapsedMS=0;else{const ee=Math.max(this.minFPS,ie);this._minElapsedMS=1/(ee/1e3)}}static get shared(){if(!_Ticker._shared){const ie=_Ticker._shared=new _Ticker;ie.autoStart=!0,ie._protected=!0}return _Ticker._shared}static get system(){if(!_Ticker._system){const ie=_Ticker._system=new _Ticker;ie.autoStart=!0,ie._protected=!0}return _Ticker._system}};let Ticker=_Ticker;Ticker.targetFPMS=.06,Object.defineProperties(settings,{TARGET_FPMS:{get(){return Ticker.targetFPMS},set(ie){deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ticker.targetFPMS=ie}}});class TickerPlugin{static init(ee){ee=Object.assign({autoStart:!0,sharedTicker:!1},ee),Object.defineProperty(this,"ticker",{set(te){this._ticker&&this._ticker.remove(this.render,this),this._ticker=te,te&&te.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=ee.sharedTicker?Ticker.shared:new Ticker,ee.autoStart&&this.start()}static destroy(){if(this._ticker){const ee=this._ticker;this.ticker=null,ee.destroy()}}}TickerPlugin.extension=ExtensionType.Application,extensions$1.add(TickerPlugin);const renderers=[];extensions$1.handleByList(ExtensionType.Renderer,renderers);function autoDetectRenderer(ie){for(const ee of renderers)if(ee.test(ie))return new ee(ie);throw new Error("Unable to auto-detect a suitable renderer.")}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const defaultVertex=$defaultVertex,defaultFilterVertex=$defaultFilterVertex;class MultisampleSystem{constructor(ee){this.renderer=ee}contextChange(ee){let te;if(this.renderer.context.webGLVersion===1){const re=ee.getParameter(ee.FRAMEBUFFER_BINDING);ee.bindFramebuffer(ee.FRAMEBUFFER,null),te=ee.getParameter(ee.SAMPLES),ee.bindFramebuffer(ee.FRAMEBUFFER,re)}else{const re=ee.getParameter(ee.DRAW_FRAMEBUFFER_BINDING);ee.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null),te=ee.getParameter(ee.SAMPLES),ee.bindFramebuffer(ee.DRAW_FRAMEBUFFER,re)}te>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:te>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:te>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"},extensions$1.add(MultisampleSystem);class GLBuffer{constructor(ee){this.buffer=ee||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(ee){this.renderer=ee,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(ee){const{gl:te,CONTEXT_UID:re}=this,ne=ee._glBuffers[re]||this.createGLBuffer(ee);te.bindBuffer(ee.type,ne.buffer)}unbind(ee){const{gl:te}=this;te.bindBuffer(ee,null)}bindBufferBase(ee,te){const{gl:re,CONTEXT_UID:ne}=this;if(this.boundBufferBases[te]!==ee){const se=ee._glBuffers[ne]||this.createGLBuffer(ee);this.boundBufferBases[te]=ee,re.bindBufferBase(re.UNIFORM_BUFFER,te,se.buffer)}}bindBufferRange(ee,te,re){const{gl:ne,CONTEXT_UID:se}=this;re=re||0;const ae=ee._glBuffers[se]||this.createGLBuffer(ee);ne.bindBufferRange(ne.UNIFORM_BUFFER,te||0,ae.buffer,re*256,256)}update(ee){const{gl:te,CONTEXT_UID:re}=this,ne=ee._glBuffers[re]||this.createGLBuffer(ee);if(ee._updateID!==ne.updateID)if(ne.updateID=ee._updateID,te.bindBuffer(ee.type,ne.buffer),ne.byteLength>=ee.data.byteLength)te.bufferSubData(ee.type,0,ee.data);else{const se=ee.static?te.STATIC_DRAW:te.DYNAMIC_DRAW;ne.byteLength=ee.data.byteLength,te.bufferData(ee.type,ee.data,se)}}dispose(ee,te){if(!this.managedBuffers[ee.id])return;delete this.managedBuffers[ee.id];const re=ee._glBuffers[this.CONTEXT_UID],ne=this.gl;ee.disposeRunner.remove(this),re&&(te||ne.deleteBuffer(re.buffer),delete ee._glBuffers[this.CONTEXT_UID])}disposeAll(ee){const te=Object.keys(this.managedBuffers);for(let re=0;re<te.length;re++)this.dispose(this.managedBuffers[te[re]],ee)}createGLBuffer(ee){const{CONTEXT_UID:te,gl:re}=this;return ee._glBuffers[te]=new GLBuffer(re.createBuffer()),this.managedBuffers[ee.id]=ee,ee.disposeRunner.add(this),ee._glBuffers[te]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"},extensions$1.add(BufferSystem);class ObjectRendererSystem{constructor(ee){this.renderer=ee}render(ee,te){const re=this.renderer;let ne,se,ae,oe;if(te&&(ne=te.renderTexture,se=te.clear,ae=te.transform,oe=te.skipUpdateTransform),this.renderingToScreen=!ne,re.runners.prerender.emit(),re.emit("prerender"),re.projection.transform=ae,!re.context.isLost){if(ne||(this.lastObjectRendered=ee),!oe){const le=ee.enableTempParent();ee.updateTransform(),ee.disableTempParent(le)}re.renderTexture.bind(ne),re.batch.currentRenderer.start(),(se!=null?se:re.background.clearBeforeRender)&&re.renderTexture.clear(),ee.render(re),re.batch.currentRenderer.flush(),ne&&(te.blit&&re.framebuffer.blit(),ne.baseTexture.update()),re.runners.postrender.emit(),re.projection.transform=null,re.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"},extensions$1.add(ObjectRendererSystem);const _Renderer=class extends SystemManager{constructor(ie){super(),this.type=RENDERER_TYPE.WEBGL,ie=Object.assign({},settings.RENDER_OPTIONS,ie),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const ee={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:_Renderer.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(ee),"useContextAlpha"in ie&&(deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),ie.premultipliedAlpha=ie.useContextAlpha&&ie.useContextAlpha!=="notMultiplied",ie.backgroundAlpha=ie.useContextAlpha===!1?1:ie.backgroundAlpha),this._plugin.rendererPlugins=_Renderer.__plugins,this.options=ie,this.startup.run(this.options)}static test(ie){return ie!=null&&ie.forceCanvas?!1:isWebGLSupported()}render(ie,ee){this.objectRenderer.render(ie,ee)}resize(ie,ee){this._view.resizeView(ie,ee)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(ie=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:ie}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(ie){this._view.resolution=ie,this.runners.resolutionChange.emit(ie)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(ie){deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=ie}get backgroundAlpha(){return deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(ie){deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=ie}get powerPreference(){return deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(ie,ee){return this.textureGenerator.generateTexture(ie,ee)}};let Renderer=_Renderer;Renderer.extension={type:ExtensionType.Renderer,priority:1},Renderer.__plugins={},Renderer.__systems={},extensions$1.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins),extensions$1.handleByMap(ExtensionType.RendererSystem,Renderer.__systems),extensions$1.add(Renderer);class AbstractMultiResource extends Resource{constructor(ee,te){const{width:re,height:ne}=te||{};super(re,ne),this.items=[],this.itemDirtyIds=[];for(let se=0;se<ee;se++){const ae=new BaseTexture;this.items.push(ae),this.itemDirtyIds.push(-2)}this.length=ee,this._load=null,this.baseTexture=null}initFromArray(ee,te){for(let re=0;re<this.length;re++)!ee[re]||(ee[re].castToBaseTexture?this.addBaseTextureAt(ee[re].castToBaseTexture(),re):ee[re]instanceof Resource?this.addResourceAt(ee[re],re):this.addResourceAt(autoDetectResource(ee[re],te),re))}dispose(){for(let ee=0,te=this.length;ee<te;ee++)this.items[ee].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(ee,te){if(!this.items[te])throw new Error(`Index ${te} is out of bounds`);return ee.valid&&!this.valid&&this.resize(ee.width,ee.height),this.items[te].setResource(ee),this}bind(ee){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(ee);for(let te=0;te<this.length;te++)this.items[te].parentTextureArray=ee,this.items[te].on("update",ee.update,ee)}unbind(ee){super.unbind(ee);for(let te=0;te<this.length;te++)this.items[te].parentTextureArray=null,this.items[te].off("update",ee.update,ee)}load(){if(this._load)return this._load;const te=this.items.map(re=>re.resource).filter(re=>re).map(re=>re.load());return this._load=Promise.all(te).then(()=>{const{realWidth:re,realHeight:ne}=this.items[0];return this.resize(re,ne),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(ee,te){const{width:re,height:ne}=te||{};let se,ae;Array.isArray(ee)?(se=ee,ae=ee.length):ae=ee,super(ae,{width:re,height:ne}),se&&this.initFromArray(se,te)}addBaseTextureAt(ee,te){if(ee.resource)this.addResourceAt(ee.resource,te);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(ee){super.bind(ee),ee.target=TARGETS.TEXTURE_2D_ARRAY}upload(ee,te,re){const{length:ne,itemDirtyIds:se,items:ae}=this,{gl:oe}=ee;re.dirtyId<0&&oe.texImage3D(oe.TEXTURE_2D_ARRAY,0,re.internalFormat,this._width,this._height,ne,0,te.format,re.type,null);for(let le=0;le<ne;le++){const he=ae[le];se[le]<he.dirtyId&&(se[le]=he.dirtyId,he.valid&&oe.texSubImage3D(oe.TEXTURE_2D_ARRAY,0,0,0,le,he.resource.width,he.resource.height,1,te.format,re.type,he.resource.source))}return!0}}class CanvasResource extends BaseImageResource{constructor(ee){super(ee)}static test(ee){const{OffscreenCanvas:te}=globalThis;return te&&ee instanceof te?!0:globalThis.HTMLCanvasElement&&ee instanceof HTMLCanvasElement}}const _CubeResource=class extends AbstractMultiResource{constructor(ie,ee){const{width:te,height:re,autoLoad:ne,linkBaseTexture:se}=ee||{};if(ie&&ie.length!==_CubeResource.SIDES)throw new Error(`Invalid length. Got ${ie.length}, expected 6`);super(6,{width:te,height:re});for(let ae=0;ae<_CubeResource.SIDES;ae++)this.items[ae].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+ae;this.linkBaseTexture=se!==!1,ie&&this.initFromArray(ie,ee),ne!==!1&&this.load()}bind(ie){super.bind(ie),ie.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(ie,ee,te){if(te===void 0&&(te=this.linkBaseTexture),!this.items[ee])throw new Error(`Index ${ee} is out of bounds`);if(!this.linkBaseTexture||ie.parentTextureArray||Object.keys(ie._glTextures).length>0)if(ie.resource)this.addResourceAt(ie.resource,ee);else throw new Error("CubeResource does not support copying of renderTexture.");else ie.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+ee,ie.parentTextureArray=this.baseTexture,this.items[ee]=ie;return ie.valid&&!this.valid&&this.resize(ie.realWidth,ie.realHeight),this.items[ee]=ie,this}upload(ie,ee,te){const re=this.itemDirtyIds;for(let ne=0;ne<_CubeResource.SIDES;ne++){const se=this.items[ne];(re[ne]<se.dirtyId||te.dirtyId<ee.dirtyId)&&(se.valid&&se.resource?(se.resource.upload(ie,se,te),re[ne]=se.dirtyId):re[ne]<-1&&(ie.gl.texImage2D(se.target,0,te.internalFormat,ee.realWidth,ee.realHeight,0,ee.format,te.type,null),re[ne]=-1))}return!0}static test(ie){return Array.isArray(ie)&&ie.length===_CubeResource.SIDES}};let CubeResource=_CubeResource;CubeResource.SIDES=6;class ImageBitmapResource extends BaseImageResource{constructor(ee,te){var se;te=te||{};let re,ne;typeof ee=="string"?(re=ImageBitmapResource.EMPTY,ne=ee):(re=ee,ne=null),super(re),this.url=ne,this.crossOrigin=(se=te.crossOrigin)!=null?se:!0,this.alphaMode=typeof te.alphaMode=="number"?te.alphaMode:null,this._load=null,te.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(ee,te)=>{if(this.url===null){ee(this);return}try{const re=await settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const ne=await re.blob();if(this.destroyed)return;const se=await createImageBitmap(ne,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=se,this.update(),ee(this)}catch(re){if(this.destroyed)return;te(re),this.onError.emit(re)}}),this._load)}upload(ee,te,re){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(te.alphaMode=this.alphaMode),super.upload(ee,te,re)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(ee){return!!globalThis.createImageBitmap&&typeof ImageBitmap!="undefined"&&(typeof ee=="string"||ee instanceof ImageBitmap)}static get EMPTY(){var ee;return ImageBitmapResource._EMPTY=(ee=ImageBitmapResource._EMPTY)!=null?ee:settings.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}const _SVGResource=class extends BaseImageResource{constructor(ie,ee){ee=ee||{},super(settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=ie,this.scale=ee.scale||1,this._overrideWidth=ee.width,this._overrideHeight=ee.height,this._resolve=null,this._crossorigin=ee.crossorigin,this._load=null,ee.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(ie=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),ie(this)},_SVGResource.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const ie=new Image;BaseImageResource.crossOrigin(ie,this.svg,this._crossorigin),ie.src=this.svg,ie.onerror=ee=>{!this._resolve||(ie.onerror=null,this.onError.emit(ee))},ie.onload=()=>{if(!this._resolve)return;const ee=ie.width,te=ie.height;if(!ee||!te)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let re=ee*this.scale,ne=te*this.scale;(this._overrideWidth||this._overrideHeight)&&(re=this._overrideWidth||this._overrideHeight/te*ee,ne=this._overrideHeight||this._overrideWidth/ee*te),re=Math.round(re),ne=Math.round(ne);const se=this.source;se.width=re,se.height=ne,se._pixiId=`canvas_${uid()}`,se.getContext("2d").drawImage(ie,0,0,ee,te,0,0,re,ne),this._resolve(),this._resolve=null}}static getSize(ie){const ee=_SVGResource.SVG_SIZE.exec(ie),te={};return ee&&(te[ee[1]]=Math.round(parseFloat(ee[3])),te[ee[5]]=Math.round(parseFloat(ee[7]))),te}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(ie,ee){return ee==="svg"||typeof ie=="string"&&ie.startsWith("data:image/svg+xml")||typeof ie=="string"&&_SVGResource.SVG_XML.test(ie)}};let SVGResource=_SVGResource;SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const _VideoResource=class extends BaseImageResource{constructor(ie,ee){if(ee=ee||{},!(ie instanceof HTMLVideoElement)){const te=document.createElement("video");te.setAttribute("preload","auto"),te.setAttribute("webkit-playsinline",""),te.setAttribute("playsinline",""),typeof ie=="string"&&(ie=[ie]);const re=ie[0].src||ie[0];BaseImageResource.crossOrigin(te,re,ee.crossorigin);for(let ne=0;ne<ie.length;++ne){const se=document.createElement("source");let{src:ae,mime:oe}=ie[ne];ae=ae||ie[ne];const le=ae.split("?").shift().toLowerCase(),he=le.slice(le.lastIndexOf(".")+1);oe=oe||_VideoResource.MIME_TYPES[he]||`video/${he}`,se.src=ae,se.type=oe,te.appendChild(se)}ie=te}super(ie),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=ee.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=ee.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),ee.autoLoad!==!1&&this.load()}update(ie=0){if(!this.destroyed){const ee=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-ee),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const ie=this.source;return(ie.readyState===ie.HAVE_ENOUGH_DATA||ie.readyState===ie.HAVE_FUTURE_DATA)&&ie.width&&ie.height&&(ie.complete=!0),ie.addEventListener("play",this._onPlayStart.bind(this)),ie.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(ie.addEventListener("canplay",this._onCanPlay),ie.addEventListener("canplaythrough",this._onCanPlay),ie.addEventListener("error",this._onError,!0)),this._load=new Promise(ee=>{this.valid?ee(this):(this._resolve=ee,ie.load())}),this._load}_onError(ie){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(ie)}_isSourcePlaying(){const ie=this.source;return!ie.paused&&!ie.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const ie=this.source;ie.removeEventListener("canplay",this._onCanPlay),ie.removeEventListener("canplaythrough",this._onCanPlay);const ee=this.valid;this.resize(ie.videoWidth,ie.videoHeight),!ee&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&ie.play()}dispose(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);const ie=this.source;ie&&(ie.removeEventListener("error",this._onError,!0),ie.pause(),ie.src="",ie.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(ie){ie!==this._autoUpdate&&(this._autoUpdate=ie,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(ie){ie!==this._updateFPS&&(this._updateFPS=ie)}static test(ie,ee){return globalThis.HTMLVideoElement&&ie instanceof HTMLVideoElement||_VideoResource.TYPES.includes(ee)}};let VideoResource=_VideoResource;VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,SVGResource,BufferResource,CubeResource,ArrayResource);class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(ee){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(ee=ee||new Rectangle(0,0,1,1),ee.x=this.minX,ee.y=this.minY,ee.width=this.maxX-this.minX,ee.height=this.maxY-this.minY,ee)}addPoint(ee){this.minX=Math.min(this.minX,ee.x),this.maxX=Math.max(this.maxX,ee.x),this.minY=Math.min(this.minY,ee.y),this.maxY=Math.max(this.maxY,ee.y)}addPointMatrix(ee,te){const{a:re,b:ne,c:se,d:ae,tx:oe,ty:le}=ee,he=re*te.x+se*te.y+oe,ce=ne*te.x+ae*te.y+le;this.minX=Math.min(this.minX,he),this.maxX=Math.max(this.maxX,he),this.minY=Math.min(this.minY,ce),this.maxY=Math.max(this.maxY,ce)}addQuad(ee){let te=this.minX,re=this.minY,ne=this.maxX,se=this.maxY,ae=ee[0],oe=ee[1];te=ae<te?ae:te,re=oe<re?oe:re,ne=ae>ne?ae:ne,se=oe>se?oe:se,ae=ee[2],oe=ee[3],te=ae<te?ae:te,re=oe<re?oe:re,ne=ae>ne?ae:ne,se=oe>se?oe:se,ae=ee[4],oe=ee[5],te=ae<te?ae:te,re=oe<re?oe:re,ne=ae>ne?ae:ne,se=oe>se?oe:se,ae=ee[6],oe=ee[7],te=ae<te?ae:te,re=oe<re?oe:re,ne=ae>ne?ae:ne,se=oe>se?oe:se,this.minX=te,this.minY=re,this.maxX=ne,this.maxY=se}addFrame(ee,te,re,ne,se){this.addFrameMatrix(ee.worldTransform,te,re,ne,se)}addFrameMatrix(ee,te,re,ne,se){const ae=ee.a,oe=ee.b,le=ee.c,he=ee.d,ce=ee.tx,de=ee.ty;let ue=this.minX,fe=this.minY,pe=this.maxX,me=this.maxY,xe=ae*te+le*re+ce,ge=oe*te+he*re+de;ue=xe<ue?xe:ue,fe=ge<fe?ge:fe,pe=xe>pe?xe:pe,me=ge>me?ge:me,xe=ae*ne+le*re+ce,ge=oe*ne+he*re+de,ue=xe<ue?xe:ue,fe=ge<fe?ge:fe,pe=xe>pe?xe:pe,me=ge>me?ge:me,xe=ae*te+le*se+ce,ge=oe*te+he*se+de,ue=xe<ue?xe:ue,fe=ge<fe?ge:fe,pe=xe>pe?xe:pe,me=ge>me?ge:me,xe=ae*ne+le*se+ce,ge=oe*ne+he*se+de,ue=xe<ue?xe:ue,fe=ge<fe?ge:fe,pe=xe>pe?xe:pe,me=ge>me?ge:me,this.minX=ue,this.minY=fe,this.maxX=pe,this.maxY=me}addVertexData(ee,te,re){let ne=this.minX,se=this.minY,ae=this.maxX,oe=this.maxY;for(let le=te;le<re;le+=2){const he=ee[le],ce=ee[le+1];ne=he<ne?he:ne,se=ce<se?ce:se,ae=he>ae?he:ae,oe=ce>oe?ce:oe}this.minX=ne,this.minY=se,this.maxX=ae,this.maxY=oe}addVertices(ee,te,re,ne){this.addVerticesMatrix(ee.worldTransform,te,re,ne)}addVerticesMatrix(ee,te,re,ne,se=0,ae=se){const oe=ee.a,le=ee.b,he=ee.c,ce=ee.d,de=ee.tx,ue=ee.ty;let fe=this.minX,pe=this.minY,me=this.maxX,xe=this.maxY;for(let ge=re;ge<ne;ge+=2){const _e=te[ge],ve=te[ge+1],ye=oe*_e+he*ve+de,be=ce*ve+le*_e+ue;fe=Math.min(fe,ye-se),me=Math.max(me,ye+se),pe=Math.min(pe,be-ae),xe=Math.max(xe,be+ae)}this.minX=fe,this.minY=pe,this.maxX=me,this.maxY=xe}addBounds(ee){const te=this.minX,re=this.minY,ne=this.maxX,se=this.maxY;this.minX=ee.minX<te?ee.minX:te,this.minY=ee.minY<re?ee.minY:re,this.maxX=ee.maxX>ne?ee.maxX:ne,this.maxY=ee.maxY>se?ee.maxY:se}addBoundsMask(ee,te){const re=ee.minX>te.minX?ee.minX:te.minX,ne=ee.minY>te.minY?ee.minY:te.minY,se=ee.maxX<te.maxX?ee.maxX:te.maxX,ae=ee.maxY<te.maxY?ee.maxY:te.maxY;if(re<=se&&ne<=ae){const oe=this.minX,le=this.minY,he=this.maxX,ce=this.maxY;this.minX=re<oe?re:oe,this.minY=ne<le?ne:le,this.maxX=se>he?se:he,this.maxY=ae>ce?ae:ce}}addBoundsMatrix(ee,te){this.addFrameMatrix(te,ee.minX,ee.minY,ee.maxX,ee.maxY)}addBoundsArea(ee,te){const re=ee.minX>te.x?ee.minX:te.x,ne=ee.minY>te.y?ee.minY:te.y,se=ee.maxX<te.x+te.width?ee.maxX:te.x+te.width,ae=ee.maxY<te.y+te.height?ee.maxY:te.y+te.height;if(re<=se&&ne<=ae){const oe=this.minX,le=this.minY,he=this.maxX,ce=this.maxY;this.minX=re<oe?re:oe,this.minY=ne<le?ne:le,this.maxX=se>he?se:he,this.maxY=ae>ce?ae:ce}}pad(ee=0,te=ee){this.isEmpty()||(this.minX-=ee,this.maxX+=ee,this.minY-=te,this.maxY+=te)}addFramePad(ee,te,re,ne,se,ae){ee-=se,te-=ae,re+=se,ne+=ae,this.minX=this.minX<ee?this.minX:ee,this.maxX=this.maxX>re?this.maxX:re,this.minY=this.minY<te?this.minY:te,this.maxY=this.maxY>ne?this.maxY:ne}}class DisplayObject extends EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(ee){const te=Object.keys(ee);for(let re=0;re<te.length;++re){const ne=te[re];Object.defineProperty(DisplayObject.prototype,ne,Object.getOwnPropertyDescriptor(ee,ne))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(ee,te){return ee||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),te||(this._boundsRect||(this._boundsRect=new Rectangle),te=this._boundsRect),this._bounds.getRectangle(te)}getLocalBounds(ee){ee||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),ee=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);const te=this.transform,re=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const ne=this._bounds,se=this._boundsID;this._bounds=this._localBounds;const ae=this.getBounds(!1,ee);return this.parent=re,this.transform=te,this._bounds=ne,this._bounds.updateID+=this._boundsID-se,ae}toGlobal(ee,te,re=!1){return re||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(ee,te)}toLocal(ee,te,re,ne){return te&&(ee=te.toGlobal(ee,re,ne)),ne||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(ee,re)}setParent(ee){if(!ee||!ee.addChild)throw new Error("setParent: Argument must be a Container");return ee.addChild(this),ee}removeFromParent(){var ee;(ee=this.parent)==null||ee.removeChild(this)}setTransform(ee=0,te=0,re=1,ne=1,se=0,ae=0,oe=0,le=0,he=0){return this.position.x=ee,this.position.y=te,this.scale.x=re||1,this.scale.y=ne||1,this.rotation=se,this.skew.x=ae,this.skew.y=oe,this.pivot.x=le,this.pivot.y=he,this}destroy(ee){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const ee=this.parent;return this.parent=this._tempDisplayObjectParent,ee}disableTempParent(ee){this.parent=ee}get x(){return this.position.x}set x(ee){this.transform.position.x=ee}get y(){return this.position.y}set y(ee){this.transform.position.y=ee}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(ee){this.transform.position.copyFrom(ee)}get scale(){return this.transform.scale}set scale(ee){this.transform.scale.copyFrom(ee)}get pivot(){return this.transform.pivot}set pivot(ee){this.transform.pivot.copyFrom(ee)}get skew(){return this.transform.skew}set skew(ee){this.transform.skew.copyFrom(ee)}get rotation(){return this.transform.rotation}set rotation(ee){this.transform.rotation=ee}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(ee){this.transform.rotation=ee*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(ee){this._zIndex=ee,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let ee=this;do{if(!ee.visible)return!1;ee=ee.parent}while(ee);return!0}get mask(){return this._mask}set mask(ee){if(this._mask!==ee){if(this._mask){const te=this._mask.isMaskData?this._mask.maskObject:this._mask;te&&(te._maskRefCount--,te._maskRefCount===0&&(te.renderable=!0,te.isMask=!1))}if(this._mask=ee,this._mask){const te=this._mask.isMaskData?this._mask.maskObject:this._mask;te&&(te._maskRefCount===0&&(te.renderable=!1,te.isMask=!0),te._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;const tempMatrix=new Matrix;function sortChildren(ie,ee){return ie.zIndex===ee.zIndex?ie._lastSortedIndex-ee._lastSortedIndex:ie.zIndex-ee.zIndex}const _Container=class extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=_Container.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(ie){}addChild(...ie){if(ie.length>1)for(let ee=0;ee<ie.length;ee++)this.addChild(ie[ee]);else{const ee=ie[0];ee.parent&&ee.parent.removeChild(ee),ee.parent=this,this.sortDirty=!0,ee.transform._parentID=-1,this.children.push(ee),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",ee,this,this.children.length-1),ee.emit("added",this)}return ie[0]}addChildAt(ie,ee){if(ee<0||ee>this.children.length)throw new Error(`${ie}addChildAt: The index ${ee} supplied is out of bounds ${this.children.length}`);return ie.parent&&ie.parent.removeChild(ie),ie.parent=this,this.sortDirty=!0,ie.transform._parentID=-1,this.children.splice(ee,0,ie),this._boundsID++,this.onChildrenChange(ee),ie.emit("added",this),this.emit("childAdded",ie,this,ee),ie}swapChildren(ie,ee){if(ie===ee)return;const te=this.getChildIndex(ie),re=this.getChildIndex(ee);this.children[te]=ee,this.children[re]=ie,this.onChildrenChange(te<re?te:re)}getChildIndex(ie){const ee=this.children.indexOf(ie);if(ee===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return ee}setChildIndex(ie,ee){if(ee<0||ee>=this.children.length)throw new Error(`The index ${ee} supplied is out of bounds ${this.children.length}`);const te=this.getChildIndex(ie);removeItems(this.children,te,1),this.children.splice(ee,0,ie),this.onChildrenChange(ee)}getChildAt(ie){if(ie<0||ie>=this.children.length)throw new Error(`getChildAt: Index (${ie}) does not exist.`);return this.children[ie]}removeChild(...ie){if(ie.length>1)for(let ee=0;ee<ie.length;ee++)this.removeChild(ie[ee]);else{const ee=ie[0],te=this.children.indexOf(ee);if(te===-1)return null;ee.parent=null,ee.transform._parentID=-1,removeItems(this.children,te,1),this._boundsID++,this.onChildrenChange(te),ee.emit("removed",this),this.emit("childRemoved",ee,this,te)}return ie[0]}removeChildAt(ie){const ee=this.getChildAt(ie);return ee.parent=null,ee.transform._parentID=-1,removeItems(this.children,ie,1),this._boundsID++,this.onChildrenChange(ie),ee.emit("removed",this),this.emit("childRemoved",ee,this,ie),ee}removeChildren(ie=0,ee=this.children.length){const te=ie,re=ee,ne=re-te;let se;if(ne>0&&ne<=re){se=this.children.splice(te,ne);for(let ae=0;ae<se.length;++ae)se[ae].parent=null,se[ae].transform&&(se[ae].transform._parentID=-1);this._boundsID++,this.onChildrenChange(ie);for(let ae=0;ae<se.length;++ae)se[ae].emit("removed",this),this.emit("childRemoved",se[ae],this,ae);return se}else if(ne===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let ie=!1;for(let ee=0,te=this.children.length;ee<te;++ee){const re=this.children[ee];re._lastSortedIndex=ee,!ie&&re.zIndex!==0&&(ie=!0)}ie&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let ie=0,ee=this.children.length;ie<ee;++ie){const te=this.children[ie];te.visible&&te.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let ie=0;ie<this.children.length;ie++){const ee=this.children[ie];if(!(!ee.visible||!ee.renderable))if(ee.calculateBounds(),ee._mask){const te=ee._mask.isMaskData?ee._mask.maskObject:ee._mask;te?(te.calculateBounds(),this._bounds.addBoundsMask(ee._bounds,te._bounds)):this._bounds.addBounds(ee._bounds)}else ee.filterArea?this._bounds.addBoundsArea(ee._bounds,ee.filterArea):this._bounds.addBounds(ee._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(ie,ee=!1){const te=super.getLocalBounds(ie);if(!ee)for(let re=0,ne=this.children.length;re<ne;++re){const se=this.children[re];se.visible&&se.updateTransform()}return te}_calculateBounds(){}_renderWithCulling(ie){const ee=ie.renderTexture.sourceFrame;if(!(ee.width>0&&ee.height>0))return;let te,re;this.cullArea?(te=this.cullArea,re=this.worldTransform):this._render!==_Container.prototype._render&&(te=this.getBounds(!0));const ne=ie.projection.transform;if(ne&&(re?(re=tempMatrix.copyFrom(re),re.prepend(ne)):re=ne),te&&ee.intersects(te,re))this._render(ie);else if(this.cullArea)return;for(let se=0,ae=this.children.length;se<ae;++se){const oe=this.children[se],le=oe.cullable;oe.cullable=le||!this.cullArea,oe.render(ie),oe.cullable=le}}render(ie){var ee;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||((ee=this.filters)==null?void 0:ee.length))this.renderAdvanced(ie);else if(this.cullable)this._renderWithCulling(ie);else{this._render(ie);for(let te=0,re=this.children.length;te<re;++te)this.children[te].render(ie)}}renderAdvanced(ie){var ne,se,ae;const ee=this.filters,te=this._mask;if(ee){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let oe=0;oe<ee.length;oe++)ee[oe].enabled&&this._enabledFilters.push(ee[oe])}const re=ee&&((ne=this._enabledFilters)==null?void 0:ne.length)||te&&(!te.isMaskData||te.enabled&&(te.autoDetect||te.type!==MASK_TYPES.NONE));if(re&&ie.batch.flush(),ee&&((se=this._enabledFilters)==null?void 0:se.length)&&ie.filter.push(this,this._enabledFilters),te&&ie.mask.push(this,this._mask),this.cullable)this._renderWithCulling(ie);else{this._render(ie);for(let oe=0,le=this.children.length;oe<le;++oe)this.children[oe].render(ie)}re&&ie.batch.flush(),te&&ie.mask.pop(this),ee&&((ae=this._enabledFilters)==null?void 0:ae.length)&&ie.filter.pop()}_render(ie){}destroy(ie){super.destroy(),this.sortDirty=!1;const ee=typeof ie=="boolean"?ie:ie==null?void 0:ie.children,te=this.removeChildren(0,this.children.length);if(ee)for(let re=0;re<te.length;++re)te[re].destroy(ie)}get width(){return this.scale.x*this.getLocalBounds().width}set width(ie){const ee=this.getLocalBounds().width;ee!==0?this.scale.x=ie/ee:this.scale.x=1,this._width=ie}get height(){return this.scale.y*this.getLocalBounds().height}set height(ie){const ee=this.getLocalBounds().height;ee!==0?this.scale.y=ie/ee:this.scale.y=1,this._height=ie}};let Container=_Container;Container.defaultSortableChildren=!1,Container.prototype.containerUpdateTransform=Container.prototype.updateTransform,Object.defineProperties(settings,{SORTABLE_CHILDREN:{get(){return Container.defaultSortableChildren},set(ie){deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Container.defaultSortableChildren=ie}}});const tempPoint$1=new Point,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(ee){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,ee?ee.defaultAnchor.x:0,ee?ee.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Color(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=ee||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const ee=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===ee._updateID)return;this._textureID!==ee._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=ee._updateID;const te=this.transform.worldTransform,re=te.a,ne=te.b,se=te.c,ae=te.d,oe=te.tx,le=te.ty,he=this.vertexData,ce=ee.trim,de=ee.orig,ue=this._anchor;let fe=0,pe=0,me=0,xe=0;if(ce?(pe=ce.x-ue._x*de.width,fe=pe+ce.width,xe=ce.y-ue._y*de.height,me=xe+ce.height):(pe=-ue._x*de.width,fe=pe+de.width,xe=-ue._y*de.height,me=xe+de.height),he[0]=re*pe+se*xe+oe,he[1]=ae*xe+ne*pe+le,he[2]=re*fe+se*xe+oe,he[3]=ae*xe+ne*fe+le,he[4]=re*fe+se*me+oe,he[5]=ae*me+ne*fe+le,he[6]=re*pe+se*me+oe,he[7]=ae*me+ne*pe+le,this._roundPixels){const ge=settings.RESOLUTION;for(let _e=0;_e<he.length;++_e)he[_e]=Math.round(he[_e]*ge)/ge}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const ee=this._texture,te=this.vertexTrimmedData,re=ee.orig,ne=this._anchor,se=this.transform.worldTransform,ae=se.a,oe=se.b,le=se.c,he=se.d,ce=se.tx,de=se.ty,ue=-ne._x*re.width,fe=ue+re.width,pe=-ne._y*re.height,me=pe+re.height;te[0]=ae*ue+le*pe+ce,te[1]=he*pe+oe*ue+de,te[2]=ae*fe+le*pe+ce,te[3]=he*pe+oe*fe+de,te[4]=ae*fe+le*me+ce,te[5]=he*me+oe*fe+de,te[6]=ae*ue+le*me+ce,te[7]=he*me+oe*ue+de}_render(ee){this.calculateVertices(),ee.batch.setObjectRenderer(ee.plugins[this.pluginName]),ee.plugins[this.pluginName].render(this)}_calculateBounds(){const ee=this._texture.trim,te=this._texture.orig;!ee||ee.width===te.width&&ee.height===te.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(ee){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),ee||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),ee=this._localBoundsRect),this._localBounds.getRectangle(ee)):super.getLocalBounds.call(this,ee)}containsPoint(ee){this.worldTransform.applyInverse(ee,tempPoint$1);const te=this._texture.orig.width,re=this._texture.orig.height,ne=-te*this.anchor.x;let se=0;return tempPoint$1.x>=ne&&tempPoint$1.x<ne+te&&(se=-re*this.anchor.y,tempPoint$1.y>=se&&tempPoint$1.y<se+re)}destroy(ee){if(super.destroy(ee),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof ee=="boolean"?ee:ee==null?void 0:ee.texture){const re=typeof ee=="boolean"?ee:ee==null?void 0:ee.baseTexture;this._texture.destroy(!!re)}this._texture=null}static from(ee,te){const re=ee instanceof Texture?ee:Texture.from(ee,te);return new Sprite(re)}set roundPixels(ee){this._roundPixels!==ee&&(this._transformID=-1),this._roundPixels=ee}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(ee){const te=sign(this.scale.x)||1;this.scale.x=te*ee/this._texture.orig.width,this._width=ee}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(ee){const te=sign(this.scale.y)||1;this.scale.y=te*ee/this._texture.orig.height,this._height=ee}get anchor(){return this._anchor}set anchor(ee){this._anchor.copyFrom(ee)}get tint(){return this._tintColor.value}set tint(ee){this._tintColor.setValue(ee),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(ee){this._texture!==ee&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=ee||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,ee&&(ee.baseTexture.valid?this._onTextureUpdate():ee.once("update",this._onTextureUpdate,this)))}}const _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1,DisplayObject.prototype._cacheData=null,DisplayObject.prototype._cacheAsBitmapResolution=null,DisplayObject.prototype._cacheAsBitmapMultisample=null;class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(ie){ie!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=ie,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(ie){ie!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=ie,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(ie){if(this._cacheAsBitmap===ie)return;this._cacheAsBitmap=ie;let ee;ie?(this._cacheData||(this._cacheData=new CacheData),ee=this._cacheData,ee.originalRender=this.render,ee.originalRenderCanvas=this.renderCanvas,ee.originalUpdateTransform=this.updateTransform,ee.originalCalculateBounds=this.calculateBounds,ee.originalGetLocalBounds=this.getLocalBounds,ee.originalDestroy=this.destroy,ee.originalContainsPoint=this.containsPoint,ee.originalMask=this._mask,ee.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(ee=this._cacheData,ee.sprite&&this._destroyCachedDisplayObject(),this.render=ee.originalRender,this.renderCanvas=ee.originalRenderCanvas,this.calculateBounds=ee.originalCalculateBounds,this.getLocalBounds=ee.originalGetLocalBounds,this.destroy=ee.originalDestroy,this.updateTransform=ee.originalUpdateTransform,this.containsPoint=ee.originalContainsPoint,this._mask=ee.originalMask,this.filterArea=ee.originalFilterArea)}}}),DisplayObject.prototype._renderCached=function ie(ee){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(ee),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(ee))},DisplayObject.prototype._initCachedDisplayObject=function ie(ee){var ue,fe,pe;if((ue=this._cacheData)!=null&&ue.sprite)return;const te=this.alpha;this.alpha=1,ee.batch.flush();const re=this.getLocalBounds(null,!0).clone();if((fe=this.filters)!=null&&fe.length){const me=this.filters[0].padding;re.pad(me)}re.ceil(settings.RESOLUTION);const ne=ee.renderTexture.current,se=ee.renderTexture.sourceFrame.clone(),ae=ee.renderTexture.destinationFrame.clone(),oe=ee.projection.transform,le=RenderTexture.create({width:re.width,height:re.height,resolution:this.cacheAsBitmapResolution||ee.resolution,multisample:(pe=this.cacheAsBitmapMultisample)!=null?pe:ee.multisample}),he=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=he,BaseTexture.addToCache(le.baseTexture,he),Texture.addToCache(le,he);const ce=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-re.x,-re.y);this.render=this._cacheData.originalRender,ee.render(this,{renderTexture:le,clear:!0,transform:ce,skipUpdateTransform:!1}),ee.framebuffer.blit(),ee.projection.transform=oe,ee.renderTexture.bind(ne,se,ae),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=te;const de=new Sprite(le);de.transform.worldTransform=this.transform.worldTransform,de.anchor.x=-(re.x/re.width),de.anchor.y=-(re.y/re.height),de.alpha=te,de._bounds=this._bounds,this._cacheData.sprite=de,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=de.containsPoint.bind(de)},DisplayObject.prototype._renderCachedCanvas=function ie(ee){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(ee),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(ee))},DisplayObject.prototype._initCachedDisplayObjectCanvas=function ie(ee){var ce;if((ce=this._cacheData)!=null&&ce.sprite)return;const te=this.getLocalBounds(null,!0),re=this.alpha;this.alpha=1;const ne=ee.canvasContext.activeContext,se=ee._projTransform;te.ceil(settings.RESOLUTION);const ae=RenderTexture.create({width:te.width,height:te.height}),oe=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=oe,BaseTexture.addToCache(ae.baseTexture,oe),Texture.addToCache(ae,oe);const le=_tempMatrix;this.transform.localTransform.copyTo(le),le.invert(),le.tx-=te.x,le.ty-=te.y,this.renderCanvas=this._cacheData.originalRenderCanvas,ee.render(this,{renderTexture:ae,clear:!0,transform:le,skipUpdateTransform:!1}),ee.canvasContext.activeContext=ne,ee._projTransform=se,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=re;const he=new Sprite(ae);he.transform.worldTransform=this.transform.worldTransform,he.anchor.x=-(te.x/te.width),he.anchor.y=-(te.y/te.height),he.alpha=re,he._bounds=this._bounds,this._cacheData.sprite=he,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=ee._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=he.containsPoint.bind(he)},DisplayObject.prototype._calculateCachedBounds=function ie(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},DisplayObject.prototype._getCachedLocalBounds=function ie(){return this._cacheData.sprite.getLocalBounds(null)},DisplayObject.prototype._destroyCachedDisplayObject=function ie(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},DisplayObject.prototype._cacheAsBitmapDestroy=function ie(ee){this.cacheAsBitmap=!1,this.destroy(ee)},DisplayObject.prototype.name=null,Container.prototype.getChildByName=function ie(ee,te){for(let re=0,ne=this.children.length;re<ne;re++)if(this.children[re].name===ee)return this.children[re];if(te)for(let re=0,ne=this.children.length;re<ne;re++){const se=this.children[re];if(!se.getChildByName)continue;const ae=se.getChildByName(ee,!0);if(ae)return ae}return null},DisplayObject.prototype.getGlobalPosition=function ie(ee=new Point,te=!1){return this.parent?this.parent.toGlobal(this.position,ee,te):(ee.x=this.position.x,ee.y=this.position.y),ee};var fragment$6=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class AlphaFilter extends Filter$2{constructor(ee=1){super(defaultVertex,fragment$6,{uAlpha:1}),this.alpha=ee}get alpha(){return this.uniforms.uAlpha}set alpha(ee){this.uniforms.uAlpha=ee}}const GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(ie){const ee=GAUSSIAN_VALUES[ie],te=ee.length;let re=fragTemplate,ne="";const se="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let ae;for(let oe=0;oe<ie;oe++){let le=se.replace("%index%",oe.toString());ae=oe,oe>=te&&(ae=ie-oe-1),le=le.replace("%value%",ee[ae].toString()),ne+=le,ne+=`
`}return re=re.replace("%blur%",ne),re=re.replace("%size%",ie.toString()),re}const vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(ie,ee){const te=Math.ceil(ie/2);let re=vertTemplate,ne="",se;ee?se="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":se="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let ae=0;ae<ie;ae++){let oe=se.replace("%index%",ae.toString());oe=oe.replace("%sampleIndex%",`${ae-(te-1)}.0`),ne+=oe,ne+=`
`}return re=re.replace("%blur%",ne),re=re.replace("%size%",ie.toString()),re}class BlurFilterPass extends Filter$2{constructor(ee,te=8,re=4,ne=Filter$2.defaultResolution,se=5){const ae=generateBlurVertSource(se,ee),oe=generateBlurFragSource(se);super(ae,oe),this.horizontal=ee,this.resolution=ne,this._quality=0,this.quality=re,this.blur=te}apply(ee,te,re,ne){if(re?this.horizontal?this.uniforms.strength=1/re.width*(re.width/te.width):this.uniforms.strength=1/re.height*(re.height/te.height):this.horizontal?this.uniforms.strength=1/ee.renderer.width*(ee.renderer.width/te.width):this.uniforms.strength=1/ee.renderer.height*(ee.renderer.height/te.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)ee.applyFilter(this,te,re,ne);else{const se=ee.getFilterTexture(),ae=ee.renderer;let oe=te,le=se;this.state.blend=!1,ee.applyFilter(this,oe,le,CLEAR_MODES.CLEAR);for(let he=1;he<this.passes-1;he++){ee.bindAndClear(oe,CLEAR_MODES.BLIT),this.uniforms.uSampler=le;const ce=le;le=oe,oe=ce,ae.shader.bind(this),ae.geometry.draw(5)}this.state.blend=!0,ee.applyFilter(this,le,re,ne),ee.returnFilterTexture(se)}}get blur(){return this.strength}set blur(ee){this.padding=1+Math.abs(ee)*2,this.strength=ee}get quality(){return this._quality}set quality(ee){this._quality=ee,this.passes=ee}}class BlurFilter extends Filter$2{constructor(ee=8,te=4,re=Filter$2.defaultResolution,ne=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass(!0,ee,te,re,ne),this.blurYFilter=new BlurFilterPass(!1,ee,te,re,ne),this.resolution=re,this.quality=te,this.blur=ee,this.repeatEdgePixels=!1}apply(ee,te,re,ne){const se=Math.abs(this.blurXFilter.strength),ae=Math.abs(this.blurYFilter.strength);if(se&&ae){const oe=ee.getFilterTexture();this.blurXFilter.apply(ee,te,oe,CLEAR_MODES.CLEAR),this.blurYFilter.apply(ee,oe,re,ne),ee.returnFilterTexture(oe)}else ae?this.blurYFilter.apply(ee,te,re,ne):this.blurXFilter.apply(ee,te,re,ne)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(ee){this.blurXFilter.blur=this.blurYFilter.blur=ee,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(ee){this.blurXFilter.quality=this.blurYFilter.quality=ee}get blurX(){return this.blurXFilter.blur}set blurX(ee){this.blurXFilter.blur=ee,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(ee){this.blurYFilter.blur=ee,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(ee){this.blurYFilter.blendMode=ee}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(ee){this._repeatEdgePixels=ee,this.updatePadding()}}var fragment$5=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ColorMatrixFilter extends Filter$2{constructor(){const ee={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(defaultFilterVertex,fragment$5,ee),this.alpha=1}_loadMatrix(ee,te=!1){let re=ee;te&&(this._multiply(re,this.uniforms.m,ee),re=this._colorMatrix(re)),this.uniforms.m=re}_multiply(ee,te,re){return ee[0]=te[0]*re[0]+te[1]*re[5]+te[2]*re[10]+te[3]*re[15],ee[1]=te[0]*re[1]+te[1]*re[6]+te[2]*re[11]+te[3]*re[16],ee[2]=te[0]*re[2]+te[1]*re[7]+te[2]*re[12]+te[3]*re[17],ee[3]=te[0]*re[3]+te[1]*re[8]+te[2]*re[13]+te[3]*re[18],ee[4]=te[0]*re[4]+te[1]*re[9]+te[2]*re[14]+te[3]*re[19]+te[4],ee[5]=te[5]*re[0]+te[6]*re[5]+te[7]*re[10]+te[8]*re[15],ee[6]=te[5]*re[1]+te[6]*re[6]+te[7]*re[11]+te[8]*re[16],ee[7]=te[5]*re[2]+te[6]*re[7]+te[7]*re[12]+te[8]*re[17],ee[8]=te[5]*re[3]+te[6]*re[8]+te[7]*re[13]+te[8]*re[18],ee[9]=te[5]*re[4]+te[6]*re[9]+te[7]*re[14]+te[8]*re[19]+te[9],ee[10]=te[10]*re[0]+te[11]*re[5]+te[12]*re[10]+te[13]*re[15],ee[11]=te[10]*re[1]+te[11]*re[6]+te[12]*re[11]+te[13]*re[16],ee[12]=te[10]*re[2]+te[11]*re[7]+te[12]*re[12]+te[13]*re[17],ee[13]=te[10]*re[3]+te[11]*re[8]+te[12]*re[13]+te[13]*re[18],ee[14]=te[10]*re[4]+te[11]*re[9]+te[12]*re[14]+te[13]*re[19]+te[14],ee[15]=te[15]*re[0]+te[16]*re[5]+te[17]*re[10]+te[18]*re[15],ee[16]=te[15]*re[1]+te[16]*re[6]+te[17]*re[11]+te[18]*re[16],ee[17]=te[15]*re[2]+te[16]*re[7]+te[17]*re[12]+te[18]*re[17],ee[18]=te[15]*re[3]+te[16]*re[8]+te[17]*re[13]+te[18]*re[18],ee[19]=te[15]*re[4]+te[16]*re[9]+te[17]*re[14]+te[18]*re[19]+te[19],ee}_colorMatrix(ee){const te=new Float32Array(ee);return te[4]/=255,te[9]/=255,te[14]/=255,te[19]/=255,te}brightness(ee,te){const re=[ee,0,0,0,0,0,ee,0,0,0,0,0,ee,0,0,0,0,0,1,0];this._loadMatrix(re,te)}tint(ee,te){const[re,ne,se]=Color.shared.setValue(ee).toArray(),ae=[re,0,0,0,0,0,ne,0,0,0,0,0,se,0,0,0,0,0,1,0];this._loadMatrix(ae,te)}greyscale(ee,te){const re=[ee,ee,ee,0,0,ee,ee,ee,0,0,ee,ee,ee,0,0,0,0,0,1,0];this._loadMatrix(re,te)}blackAndWhite(ee){const te=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(te,ee)}hue(ee,te){ee=(ee||0)/180*Math.PI;const re=Math.cos(ee),ne=Math.sin(ee),se=Math.sqrt,ae=1/3,oe=se(ae),le=re+(1-re)*ae,he=ae*(1-re)-oe*ne,ce=ae*(1-re)+oe*ne,de=ae*(1-re)+oe*ne,ue=re+ae*(1-re),fe=ae*(1-re)-oe*ne,pe=ae*(1-re)-oe*ne,me=ae*(1-re)+oe*ne,xe=re+ae*(1-re),ge=[le,he,ce,0,0,de,ue,fe,0,0,pe,me,xe,0,0,0,0,0,1,0];this._loadMatrix(ge,te)}contrast(ee,te){const re=(ee||0)+1,ne=-.5*(re-1),se=[re,0,0,0,ne,0,re,0,0,ne,0,0,re,0,ne,0,0,0,1,0];this._loadMatrix(se,te)}saturate(ee=0,te){const re=ee*2/3+1,ne=(re-1)*-.5,se=[re,ne,ne,0,0,ne,re,ne,0,0,ne,ne,re,0,0,0,0,0,1,0];this._loadMatrix(se,te)}desaturate(){this.saturate(-1)}negative(ee){const te=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(te,ee)}sepia(ee){const te=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(te,ee)}technicolor(ee){const te=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(te,ee)}polaroid(ee){const te=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(te,ee)}toBGR(ee){const te=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(te,ee)}kodachrome(ee){const te=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(te,ee)}browni(ee){const te=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(te,ee)}vintage(ee){const te=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(te,ee)}colorTone(ee,te,re,ne,se){ee=ee||.2,te=te||.15,re=re||16770432,ne=ne||3375104;const ae=Color.shared,[oe,le,he]=ae.setValue(re).toArray(),[ce,de,ue]=ae.setValue(ne).toArray(),fe=[.3,.59,.11,0,0,oe,le,he,ee,0,ce,de,ue,te,0,oe-ce,le-de,he-ue,0,0];this._loadMatrix(fe,se)}night(ee,te){ee=ee||.1;const re=[ee*-2,-ee,0,0,0,-ee,0,ee,0,0,0,ee,ee*2,0,0,0,0,0,1,0];this._loadMatrix(re,te)}predator(ee,te){const re=[11.224130630493164*ee,-4.794486999511719*ee,-2.8746118545532227*ee,0*ee,.40342438220977783*ee,-3.6330697536468506*ee,9.193157196044922*ee,-2.951810836791992*ee,0*ee,-1.316135048866272*ee,-3.2184197902679443*ee,-4.2375030517578125*ee,7.476448059082031*ee,0*ee,.8044459223747253*ee,0,0,0,1,0];this._loadMatrix(re,te)}lsd(ee){const te=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(te,ee)}reset(){const ee=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(ee,!1)}get matrix(){return this.uniforms.m}set matrix(ee){this.uniforms.m=ee}get alpha(){return this.uniforms.uAlpha}set alpha(ee){this.uniforms.uAlpha=ee}}ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;var fragment$4=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class DisplacementFilter extends Filter$2{constructor(ee,te){const re=new Matrix;ee.renderable=!1,super(vertex$3,fragment$4,{mapSampler:ee._texture,filterMatrix:re,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=ee,this.maskMatrix=re,te==null&&(te=20),this.scale=new Point(te,te)}apply(ee,te,re,ne){this.uniforms.filterMatrix=ee.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const se=this.maskSprite.worldTransform,ae=Math.sqrt(se.a*se.a+se.b*se.b),oe=Math.sqrt(se.c*se.c+se.d*se.d);ae!==0&&oe!==0&&(this.uniforms.rotation[0]=se.a/ae,this.uniforms.rotation[1]=se.b/ae,this.uniforms.rotation[2]=se.c/oe,this.uniforms.rotation[3]=se.d/oe),ee.applyFilter(this,te,re,ne)}get map(){return this.uniforms.mapSampler}set map(ee){this.uniforms.mapSampler=ee}}var fragment$3=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vertex$2=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class FXAAFilter extends Filter$2{constructor(){super(vertex$2,fragment$3)}}var fragment$2=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class NoiseFilter extends Filter$2{constructor(ee=.5,te=Math.random()){super(defaultFilterVertex,fragment$2,{uNoise:0,uSeed:0}),this.noise=ee,this.seed=te}get noise(){return this.uniforms.uNoise}set noise(ee){this.uniforms.uNoise=ee}get seed(){return this.uniforms.uSeed}set seed(ee){this.uniforms.uSeed=ee}}const filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter};Object.entries(filters).forEach(([ie,ee])=>{Object.defineProperty(filters,ie,{get(){return deprecation("7.1.0",`filters.${ie} has moved to ${ie}`),ee}})});class EventsTickerClass{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(ee){this.removeTickerListener(),this.events=ee,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(ee){this._pauseUpdate=ee}addTickerListener(){this.tickerAdded||!this.domElement||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){!this.tickerAdded||(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const ee=this.events.rootPointerEvent;this.events.supportsTouchEvents&&ee.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:ee.clientX,clientY:ee.clientY}))}tickerUpdate(ee){this._deltaTime+=ee,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const EventsTicker=new EventsTickerClass;class FederatedEvent{constructor(ee){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point,this.page=new Point,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=ee}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(ee,te,re){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(ee,te,re,ne,se){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point,this.movement=new Point,this.offset=new Point,this.global=new Point,this.screen=new Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(ee,te,re){return ee.worldTransform.applyInverse(re||this.global,te)}getModifierState(ee){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(ee)}initMouseEvent(ee,te,re,ne,se,ae,oe,le,he,ce,de,ue,fe,pe,me){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2;const PROPAGATION_LIMIT=2048,tempHitLocation=new Point,tempLocalMapping=new Point;class EventBoundary{constructor(ee){this.dispatch=new EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=ee,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(ee,te){this.mappingTable[ee]||(this.mappingTable[ee]=[]),this.mappingTable[ee].push({fn:te,priority:0}),this.mappingTable[ee].sort((re,ne)=>re.priority-ne.priority)}dispatchEvent(ee,te){ee.propagationStopped=!1,ee.propagationImmediatelyStopped=!1,this.propagate(ee,te),this.dispatch.emit(te||ee.type,ee)}mapEvent(ee){if(!this.rootTarget)return;const te=this.mappingTable[ee.type];if(te)for(let re=0,ne=te.length;re<ne;re++)te[re].fn(ee);else console.warn(`[EventBoundary]: Event mapping not defined for ${ee.type}`)}hitTest(ee,te){EventsTicker.pauseUpdate=!0;const ne=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",se=this[ne](this.rootTarget,this.rootTarget.eventMode,tempHitLocation.set(ee,te),this.hitTestFn,this.hitPruneFn);return se&&se[0]}propagate(ee,te){if(!ee.target)return;const re=ee.composedPath();ee.eventPhase=ee.CAPTURING_PHASE;for(let ne=0,se=re.length-1;ne<se;ne++)if(ee.currentTarget=re[ne],this.notifyTarget(ee,te),ee.propagationStopped||ee.propagationImmediatelyStopped)return;if(ee.eventPhase=ee.AT_TARGET,ee.currentTarget=ee.target,this.notifyTarget(ee,te),!(ee.propagationStopped||ee.propagationImmediatelyStopped)){ee.eventPhase=ee.BUBBLING_PHASE;for(let ne=re.length-2;ne>=0;ne--)if(ee.currentTarget=re[ne],this.notifyTarget(ee,te),ee.propagationStopped||ee.propagationImmediatelyStopped)return}}all(ee,te,re=this._allInteractiveElements){if(re.length===0)return;ee.eventPhase=ee.BUBBLING_PHASE;const ne=Array.isArray(te)?te:[te];for(let se=re.length-1;se>=0;se--)ne.forEach(ae=>{ee.currentTarget=re[se],this.notifyTarget(ee,ae)})}propagationPath(ee){const te=[ee];for(let re=0;re<PROPAGATION_LIMIT&&ee!==this.rootTarget;re++){if(!ee.parent)throw new Error("Cannot find propagation path to disconnected target");te.push(ee.parent),ee=ee.parent}return te.reverse(),te}hitTestMoveRecursive(ee,te,re,ne,se,ae=!1){let oe=!1;if(this._interactivePrune(ee))return null;if((ee.eventMode==="dynamic"||te==="dynamic")&&(EventsTicker.pauseUpdate=!1),ee.interactiveChildren&&ee.children){const ce=ee.children;for(let de=ce.length-1;de>=0;de--){const ue=ce[de],fe=this.hitTestMoveRecursive(ue,this._isInteractive(te)?te:ue.eventMode,re,ne,se,ae||se(ee,re));if(fe){if(fe.length>0&&!fe[fe.length-1].parent)continue;const pe=ee.isInteractive();(fe.length>0||pe)&&(pe&&this._allInteractiveElements.push(ee),fe.push(ee)),this._hitElements.length===0&&(this._hitElements=fe),oe=!0}}}const le=this._isInteractive(te),he=ee.isInteractive();return he&&he&&this._allInteractiveElements.push(ee),ae||this._hitElements.length>0?null:oe?this._hitElements:le&&!se(ee,re)&&ne(ee,re)?he?[ee]:[]:null}hitTestRecursive(ee,te,re,ne,se){if(this._interactivePrune(ee)||se(ee,re))return null;if((ee.eventMode==="dynamic"||te==="dynamic")&&(EventsTicker.pauseUpdate=!1),ee.interactiveChildren&&ee.children){const le=ee.children;for(let he=le.length-1;he>=0;he--){const ce=le[he],de=this.hitTestRecursive(ce,this._isInteractive(te)?te:ce.eventMode,re,ne,se);if(de){if(de.length>0&&!de[de.length-1].parent)continue;const ue=ee.isInteractive();return(de.length>0||ue)&&de.push(ee),de}}}const ae=this._isInteractive(te),oe=ee.isInteractive();return ae&&ne(ee,re)?oe?[ee]:[]:null}_isInteractive(ee){return ee==="static"||ee==="dynamic"}_interactivePrune(ee){return!!(!ee||ee.isMask||!ee.visible||!ee.renderable||ee.eventMode==="none"||ee.eventMode==="passive"&&!ee.interactiveChildren||ee.isMask)}hitPruneFn(ee,te){var re;if(ee.hitArea&&(ee.worldTransform.applyInverse(te,tempLocalMapping),!ee.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(ee._mask){const ne=ee._mask.isMaskData?ee._mask.maskObject:ee._mask;if(ne&&!((re=ne.containsPoint)!=null&&re.call(ne,te)))return!0}return!1}hitTestFn(ee,te){return ee.eventMode==="passive"?!1:ee.hitArea?!0:ee.containsPoint?ee.containsPoint(te):!1}notifyTarget(ee,te){var se,ae;te=te!=null?te:ee.type;const re=`on${te}`;(ae=(se=ee.currentTarget)[re])==null||ae.call(se,ee);const ne=ee.eventPhase===ee.CAPTURING_PHASE||ee.eventPhase===ee.AT_TARGET?`${te}capture`:te;this.notifyListeners(ee,ne),ee.eventPhase===ee.AT_TARGET&&this.notifyListeners(ee,te)}mapPointerDown(ee){if(!(ee instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const te=this.createPointerEvent(ee);if(this.dispatchEvent(te,"pointerdown"),te.pointerType==="touch")this.dispatchEvent(te,"touchstart");else if(te.pointerType==="mouse"||te.pointerType==="pen"){const ne=te.button===2;this.dispatchEvent(te,ne?"rightdown":"mousedown")}const re=this.trackingData(ee.pointerId);re.pressTargetsByButton[ee.button]=te.composedPath(),this.freeEvent(te)}mapPointerMove(ee){var le,he,ce;if(!(ee instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const te=this.createPointerEvent(ee);this._isPointerMoveEvent=!1;const re=te.pointerType==="mouse"||te.pointerType==="pen",ne=this.trackingData(ee.pointerId),se=this.findMountedTarget(ne.overTargets);if(((le=ne.overTargets)==null?void 0:le.length)>0&&se!==te.target){const de=ee.type==="mousemove"?"mouseout":"pointerout",ue=this.createPointerEvent(ee,de,se);if(this.dispatchEvent(ue,"pointerout"),re&&this.dispatchEvent(ue,"mouseout"),!te.composedPath().includes(se)){const fe=this.createPointerEvent(ee,"pointerleave",se);for(fe.eventPhase=fe.AT_TARGET;fe.target&&!te.composedPath().includes(fe.target);)fe.currentTarget=fe.target,this.notifyTarget(fe),re&&this.notifyTarget(fe,"mouseleave"),fe.target=fe.target.parent;this.freeEvent(fe)}this.freeEvent(ue)}if(se!==te.target){const de=ee.type==="mousemove"?"mouseover":"pointerover",ue=this.clonePointerEvent(te,de);this.dispatchEvent(ue,"pointerover"),re&&this.dispatchEvent(ue,"mouseover");let fe=se==null?void 0:se.parent;for(;fe&&fe!==this.rootTarget.parent&&fe!==te.target;)fe=fe.parent;if(!fe||fe===this.rootTarget.parent){const me=this.clonePointerEvent(te,"pointerenter");for(me.eventPhase=me.AT_TARGET;me.target&&me.target!==se&&me.target!==this.rootTarget.parent;)me.currentTarget=me.target,this.notifyTarget(me),re&&this.notifyTarget(me,"mouseenter"),me.target=me.target.parent;this.freeEvent(me)}this.freeEvent(ue)}const ae=[],oe=(he=this.enableGlobalMoveEvents)!=null?he:!0;this.moveOnAll?ae.push("pointermove"):this.dispatchEvent(te,"pointermove"),oe&&ae.push("globalpointermove"),te.pointerType==="touch"&&(this.moveOnAll?ae.splice(1,0,"touchmove"):this.dispatchEvent(te,"touchmove"),oe&&ae.push("globaltouchmove")),re&&(this.moveOnAll?ae.splice(1,0,"mousemove"):this.dispatchEvent(te,"mousemove"),oe&&ae.push("globalmousemove"),this.cursor=(ce=te.target)==null?void 0:ce.cursor),ae.length>0&&this.all(te,ae),this._allInteractiveElements.length=0,this._hitElements.length=0,ne.overTargets=te.composedPath(),this.freeEvent(te)}mapPointerOver(ee){var ae;if(!(ee instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const te=this.trackingData(ee.pointerId),re=this.createPointerEvent(ee),ne=re.pointerType==="mouse"||re.pointerType==="pen";this.dispatchEvent(re,"pointerover"),ne&&this.dispatchEvent(re,"mouseover"),re.pointerType==="mouse"&&(this.cursor=(ae=re.target)==null?void 0:ae.cursor);const se=this.clonePointerEvent(re,"pointerenter");for(se.eventPhase=se.AT_TARGET;se.target&&se.target!==this.rootTarget.parent;)se.currentTarget=se.target,this.notifyTarget(se),ne&&this.notifyTarget(se,"mouseenter"),se.target=se.target.parent;te.overTargets=re.composedPath(),this.freeEvent(re),this.freeEvent(se)}mapPointerOut(ee){if(!(ee instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const te=this.trackingData(ee.pointerId);if(te.overTargets){const re=ee.pointerType==="mouse"||ee.pointerType==="pen",ne=this.findMountedTarget(te.overTargets),se=this.createPointerEvent(ee,"pointerout",ne);this.dispatchEvent(se),re&&this.dispatchEvent(se,"mouseout");const ae=this.createPointerEvent(ee,"pointerleave",ne);for(ae.eventPhase=ae.AT_TARGET;ae.target&&ae.target!==this.rootTarget.parent;)ae.currentTarget=ae.target,this.notifyTarget(ae),re&&this.notifyTarget(ae,"mouseleave"),ae.target=ae.target.parent;te.overTargets=null,this.freeEvent(se),this.freeEvent(ae)}this.cursor=null}mapPointerUp(ee){if(!(ee instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const te=performance.now(),re=this.createPointerEvent(ee);if(this.dispatchEvent(re,"pointerup"),re.pointerType==="touch")this.dispatchEvent(re,"touchend");else if(re.pointerType==="mouse"||re.pointerType==="pen"){const oe=re.button===2;this.dispatchEvent(re,oe?"rightup":"mouseup")}const ne=this.trackingData(ee.pointerId),se=this.findMountedTarget(ne.pressTargetsByButton[ee.button]);let ae=se;if(se&&!re.composedPath().includes(se)){let oe=se;for(;oe&&!re.composedPath().includes(oe);){if(re.currentTarget=oe,this.notifyTarget(re,"pointerupoutside"),re.pointerType==="touch")this.notifyTarget(re,"touchendoutside");else if(re.pointerType==="mouse"||re.pointerType==="pen"){const le=re.button===2;this.notifyTarget(re,le?"rightupoutside":"mouseupoutside")}oe=oe.parent}delete ne.pressTargetsByButton[ee.button],ae=oe}if(ae){const oe=this.clonePointerEvent(re,"click");oe.target=ae,oe.path=null,ne.clicksByButton[ee.button]||(ne.clicksByButton[ee.button]={clickCount:0,target:oe.target,timeStamp:te});const le=ne.clicksByButton[ee.button];if(le.target===oe.target&&te-le.timeStamp<200?++le.clickCount:le.clickCount=1,le.target=oe.target,le.timeStamp=te,oe.detail=le.clickCount,oe.pointerType==="mouse"){const he=oe.button===2;this.dispatchEvent(oe,he?"rightclick":"click")}else oe.pointerType==="touch"&&this.dispatchEvent(oe,"tap");this.dispatchEvent(oe,"pointertap"),this.freeEvent(oe)}this.freeEvent(re)}mapPointerUpOutside(ee){if(!(ee instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const te=this.trackingData(ee.pointerId),re=this.findMountedTarget(te.pressTargetsByButton[ee.button]),ne=this.createPointerEvent(ee);if(re){let se=re;for(;se;)ne.currentTarget=se,this.notifyTarget(ne,"pointerupoutside"),ne.pointerType==="touch"?this.notifyTarget(ne,"touchendoutside"):(ne.pointerType==="mouse"||ne.pointerType==="pen")&&this.notifyTarget(ne,ne.button===2?"rightupoutside":"mouseupoutside"),se=se.parent;delete te.pressTargetsByButton[ee.button]}this.freeEvent(ne)}mapWheel(ee){if(!(ee instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const te=this.createWheelEvent(ee);this.dispatchEvent(te),this.freeEvent(te)}findMountedTarget(ee){if(!ee)return null;let te=ee[0];for(let re=1;re<ee.length&&ee[re].parent===te;re++)te=ee[re];return te}createPointerEvent(ee,te,re){var se;const ne=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(ee,ne),this.copyMouseData(ee,ne),this.copyData(ee,ne),ne.nativeEvent=ee.nativeEvent,ne.originalEvent=ee,ne.target=(se=re!=null?re:this.hitTest(ne.global.x,ne.global.y))!=null?se:this._hitElements[0],typeof te=="string"&&(ne.type=te),ne}createWheelEvent(ee){const te=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(ee,te),this.copyMouseData(ee,te),this.copyData(ee,te),te.nativeEvent=ee.nativeEvent,te.originalEvent=ee,te.target=this.hitTest(te.global.x,te.global.y),te}clonePointerEvent(ee,te){const re=this.allocateEvent(FederatedPointerEvent);return re.nativeEvent=ee.nativeEvent,re.originalEvent=ee.originalEvent,this.copyPointerData(ee,re),this.copyMouseData(ee,re),this.copyData(ee,re),re.target=ee.target,re.path=ee.composedPath().slice(),re.type=te!=null?te:re.type,re}copyWheelData(ee,te){te.deltaMode=ee.deltaMode,te.deltaX=ee.deltaX,te.deltaY=ee.deltaY,te.deltaZ=ee.deltaZ}copyPointerData(ee,te){ee instanceof FederatedPointerEvent&&te instanceof FederatedPointerEvent&&(te.pointerId=ee.pointerId,te.width=ee.width,te.height=ee.height,te.isPrimary=ee.isPrimary,te.pointerType=ee.pointerType,te.pressure=ee.pressure,te.tangentialPressure=ee.tangentialPressure,te.tiltX=ee.tiltX,te.tiltY=ee.tiltY,te.twist=ee.twist)}copyMouseData(ee,te){ee instanceof FederatedMouseEvent&&te instanceof FederatedMouseEvent&&(te.altKey=ee.altKey,te.button=ee.button,te.buttons=ee.buttons,te.client.copyFrom(ee.client),te.ctrlKey=ee.ctrlKey,te.metaKey=ee.metaKey,te.movement.copyFrom(ee.movement),te.screen.copyFrom(ee.screen),te.shiftKey=ee.shiftKey,te.global.copyFrom(ee.global))}copyData(ee,te){te.isTrusted=ee.isTrusted,te.srcElement=ee.srcElement,te.timeStamp=performance.now(),te.type=ee.type,te.detail=ee.detail,te.view=ee.view,te.which=ee.which,te.layer.copyFrom(ee.layer),te.page.copyFrom(ee.page)}trackingData(ee){return this.mappingState.trackingData[ee]||(this.mappingState.trackingData[ee]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[ee]}allocateEvent(ee){this.eventPool.has(ee)||this.eventPool.set(ee,[]);const te=this.eventPool.get(ee).pop()||new ee(this);return te.eventPhase=te.NONE,te.currentTarget=null,te.path=null,te.target=null,te}freeEvent(ee){if(ee.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const te=ee.constructor;this.eventPool.has(te)||this.eventPool.set(te,[]),this.eventPool.get(te).push(ee)}notifyListeners(ee,te){const re=ee.currentTarget._events[te];if(!!re&&!!ee.currentTarget.isInteractive())if("fn"in re)re.once&&ee.currentTarget.removeListener(te,re.fn,void 0,!0),re.fn.call(re.context,ee);else for(let ne=0,se=re.length;ne<se&&!ee.propagationImmediatelyStopped;ne++)re[ne].once&&ee.currentTarget.removeListener(te,re[ne].fn,void 0,!0),re[ne].fn.call(re[ne].context,ee)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_EventSystem=class{constructor(ie){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=ie,this.rootBoundary=new EventBoundary(null),EventsTicker.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({..._EventSystem.defaultEventFeatures},{set:(ee,te,re)=>(te==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=re),ee[te]=re,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(ie){var re,ne;const{view:ee,resolution:te}=this.renderer;this.setTargetElement(ee),this.resolution=te,_EventSystem._defaultEventMode=(re=ie.eventMode)!=null?re:"auto",Object.assign(this.features,(ne=ie.eventFeatures)!=null?ne:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(ie){this.resolution=ie}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(ie){ie=ie||"default";let ee=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(ee=!1),this.currentCursor===ie)return;this.currentCursor=ie;const te=this.cursorStyles[ie];if(te)switch(typeof te){case"string":ee&&(this.domElement.style.cursor=te);break;case"function":te(ie);break;case"object":ee&&Object.assign(this.domElement.style,te);break}else ee&&typeof ie=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,ie)&&(this.domElement.style.cursor=ie)}get pointer(){return this.rootPointerEvent}onPointerDown(ie){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&ie.pointerType==="touch"))return;const ee=this.normalizeToPointerData(ie);this.autoPreventDefault&&ee[0].isNormalized&&(ie.cancelable||!("cancelable"in ie))&&ie.preventDefault();for(let te=0,re=ee.length;te<re;te++){const ne=ee[te],se=this.bootstrapEvent(this.rootPointerEvent,ne);this.rootBoundary.mapEvent(se)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(ie){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&ie.pointerType==="touch"))return;EventsTicker.pointerMoved();const ee=this.normalizeToPointerData(ie);for(let te=0,re=ee.length;te<re;te++){const ne=this.bootstrapEvent(this.rootPointerEvent,ee[te]);this.rootBoundary.mapEvent(ne)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(ie){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&ie.pointerType==="touch"))return;let ee=ie.target;ie.composedPath&&ie.composedPath().length>0&&(ee=ie.composedPath()[0]);const te=ee!==this.domElement?"outside":"",re=this.normalizeToPointerData(ie);for(let ne=0,se=re.length;ne<se;ne++){const ae=this.bootstrapEvent(this.rootPointerEvent,re[ne]);ae.type+=te,this.rootBoundary.mapEvent(ae)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(ie){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&ie.pointerType==="touch"))return;const ee=this.normalizeToPointerData(ie);for(let te=0,re=ee.length;te<re;te++){const ne=this.bootstrapEvent(this.rootPointerEvent,ee[te]);this.rootBoundary.mapEvent(ne)}this.setCursor(this.rootBoundary.cursor)}onWheel(ie){if(!this.features.wheel)return;const ee=this.normalizeWheelEvent(ie);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(ee)}setTargetElement(ie){this.removeEvents(),this.domElement=ie,EventsTicker.domElement=ie,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;EventsTicker.addTickerListener();const ie=this.domElement.style;ie&&(globalThis.navigator.msPointerEnabled?(ie.msContentZooming="none",ie.msTouchAction="none"):this.supportsPointerEvents&&(ie.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;EventsTicker.removeTickerListener();const ie=this.domElement.style;globalThis.navigator.msPointerEnabled?(ie.msContentZooming="",ie.msTouchAction=""):this.supportsPointerEvents&&(ie.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(ie,ee,te){let re;this.domElement.parentElement?re=this.domElement.getBoundingClientRect():re={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const ne=1/this.resolution;ie.x=(ee-re.left)*(this.domElement.width/re.width)*ne,ie.y=(te-re.top)*(this.domElement.height/re.height)*ne}normalizeToPointerData(ie){const ee=[];if(this.supportsTouchEvents&&ie instanceof TouchEvent)for(let te=0,re=ie.changedTouches.length;te<re;te++){const ne=ie.changedTouches[te];typeof ne.button=="undefined"&&(ne.button=0),typeof ne.buttons=="undefined"&&(ne.buttons=1),typeof ne.isPrimary=="undefined"&&(ne.isPrimary=ie.touches.length===1&&ie.type==="touchstart"),typeof ne.width=="undefined"&&(ne.width=ne.radiusX||1),typeof ne.height=="undefined"&&(ne.height=ne.radiusY||1),typeof ne.tiltX=="undefined"&&(ne.tiltX=0),typeof ne.tiltY=="undefined"&&(ne.tiltY=0),typeof ne.pointerType=="undefined"&&(ne.pointerType="touch"),typeof ne.pointerId=="undefined"&&(ne.pointerId=ne.identifier||0),typeof ne.pressure=="undefined"&&(ne.pressure=ne.force||.5),typeof ne.twist=="undefined"&&(ne.twist=0),typeof ne.tangentialPressure=="undefined"&&(ne.tangentialPressure=0),typeof ne.layerX=="undefined"&&(ne.layerX=ne.offsetX=ne.clientX),typeof ne.layerY=="undefined"&&(ne.layerY=ne.offsetY=ne.clientY),ne.isNormalized=!0,ne.type=ie.type,ee.push(ne)}else if(!globalThis.MouseEvent||ie instanceof MouseEvent&&(!this.supportsPointerEvents||!(ie instanceof globalThis.PointerEvent))){const te=ie;typeof te.isPrimary=="undefined"&&(te.isPrimary=!0),typeof te.width=="undefined"&&(te.width=1),typeof te.height=="undefined"&&(te.height=1),typeof te.tiltX=="undefined"&&(te.tiltX=0),typeof te.tiltY=="undefined"&&(te.tiltY=0),typeof te.pointerType=="undefined"&&(te.pointerType="mouse"),typeof te.pointerId=="undefined"&&(te.pointerId=MOUSE_POINTER_ID),typeof te.pressure=="undefined"&&(te.pressure=.5),typeof te.twist=="undefined"&&(te.twist=0),typeof te.tangentialPressure=="undefined"&&(te.tangentialPressure=0),te.isNormalized=!0,ee.push(te)}else ee.push(ie);return ee}normalizeWheelEvent(ie){const ee=this.rootWheelEvent;return this.transferMouseData(ee,ie),ee.deltaX=ie.deltaX,ee.deltaY=ie.deltaY,ee.deltaZ=ie.deltaZ,ee.deltaMode=ie.deltaMode,this.mapPositionToPoint(ee.screen,ie.clientX,ie.clientY),ee.global.copyFrom(ee.screen),ee.offset.copyFrom(ee.screen),ee.nativeEvent=ie,ee.type=ie.type,ee}bootstrapEvent(ie,ee){return ie.originalEvent=null,ie.nativeEvent=ee,ie.pointerId=ee.pointerId,ie.width=ee.width,ie.height=ee.height,ie.isPrimary=ee.isPrimary,ie.pointerType=ee.pointerType,ie.pressure=ee.pressure,ie.tangentialPressure=ee.tangentialPressure,ie.tiltX=ee.tiltX,ie.tiltY=ee.tiltY,ie.twist=ee.twist,this.transferMouseData(ie,ee),this.mapPositionToPoint(ie.screen,ee.clientX,ee.clientY),ie.global.copyFrom(ie.screen),ie.offset.copyFrom(ie.screen),ie.isTrusted=ee.isTrusted,ie.type==="pointerleave"&&(ie.type="pointerout"),ie.type.startsWith("mouse")&&(ie.type=ie.type.replace("mouse","pointer")),ie.type.startsWith("touch")&&(ie.type=TOUCH_TO_POINTER[ie.type]||ie.type),ie}transferMouseData(ie,ee){ie.isTrusted=ee.isTrusted,ie.srcElement=ee.srcElement,ie.timeStamp=performance.now(),ie.type=ee.type,ie.altKey=ee.altKey,ie.button=ee.button,ie.buttons=ee.buttons,ie.client.x=ee.clientX,ie.client.y=ee.clientY,ie.ctrlKey=ee.ctrlKey,ie.metaKey=ee.metaKey,ie.movement.x=ee.movementX,ie.movement.y=ee.movementY,ie.page.x=ee.pageX,ie.page.y=ee.pageY,ie.relatedTarget=null,ie.shiftKey=ee.shiftKey}};let EventSystem=_EventSystem;EventSystem.extension={name:"events",type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem]},EventSystem.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0},extensions$1.add(EventSystem);function convertEventModeToInteractiveMode(ie){return ie==="dynamic"||ie==="static"}const FederatedDisplayObject={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){var ie;return(ie=this._internalInteractive)!=null?ie:convertEventModeToInteractiveMode(EventSystem.defaultEventMode)},set interactive(ie){deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=ie,this.eventMode=ie?"static":"auto"},_internalEventMode:void 0,get eventMode(){var ie;return(ie=this._internalEventMode)!=null?ie:EventSystem.defaultEventMode},set eventMode(ie){this._internalInteractive=convertEventModeToInteractiveMode(ie),this._internalEventMode=ie},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(ie,ee,te){const re=typeof te=="boolean"&&te||typeof te=="object"&&te.capture,ne=typeof ee=="function"?void 0:ee;ie=re?`${ie}capture`:ie,ee=typeof ee=="function"?ee:ee.handleEvent,this.on(ie,ee,ne)},removeEventListener(ie,ee,te){const re=typeof te=="boolean"&&te||typeof te=="object"&&te.capture,ne=typeof ee=="function"?void 0:ee;ie=re?`${ie}capture`:ie,ee=typeof ee=="function"?ee:ee.handleEvent,this.off(ie,ee,ne)},dispatchEvent(ie){if(!(ie instanceof FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return ie.defaultPrevented=!1,ie.path=null,ie.target=this,ie.manager.dispatchEvent(ie),!ie.defaultPrevented}};DisplayObject.mixin(FederatedDisplayObject);const accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);const KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2;class AccessibilityManager{constructor(ee){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();const te=document.createElement("div");te.style.width=`${DIV_TOUCH_SIZE}px`,te.style.height=`${DIV_TOUCH_SIZE}px`,te.style.position="absolute",te.style.top=`${DIV_TOUCH_POS_X}px`,te.style.left=`${DIV_TOUCH_POS_Y}px`,te.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=te,this.renderer=ee,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const ee=document.createElement("button");ee.style.width=`${DIV_HOOK_SIZE}px`,ee.style.height=`${DIV_HOOK_SIZE}px`,ee.style.position="absolute",ee.style.top=`${DIV_HOOK_POS_X}px`,ee.style.left=`${DIV_HOOK_POS_Y}px`,ee.style.zIndex=DIV_HOOK_ZINDEX.toString(),ee.style.backgroundColor="#FF0000",ee.title="select to enable accessibility for this content",ee.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(ee),this._hookDiv=ee}destroyTouchHook(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var ee;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(ee=this.renderer.view.parentNode)==null||ee.appendChild(this.div))}deactivate(){var ee;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(ee=this.div.parentNode)==null||ee.removeChild(this.div))}updateAccessibleObjects(ee){if(!ee.visible||!ee.accessibleChildren)return;ee.accessible&&ee.isInteractive()&&(ee._accessibleActive||this.addChild(ee),ee.renderId=this.renderId);const te=ee.children;if(te)for(let re=0;re<te.length;re++)this.updateAccessibleObjects(te[re])}update(){const ee=performance.now();if(isMobile.android.device&&ee<this.androidUpdateCount||(this.androidUpdateCount=ee+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:te,y:re,width:ne,height:se}=this.renderer.view.getBoundingClientRect(),{width:ae,height:oe,resolution:le}=this.renderer,he=ne/ae*le,ce=se/oe*le;let de=this.div;de.style.left=`${te}px`,de.style.top=`${re}px`,de.style.width=`${ae}px`,de.style.height=`${oe}px`;for(let ue=0;ue<this.children.length;ue++){const fe=this.children[ue];if(fe.renderId!==this.renderId)fe._accessibleActive=!1,removeItems(this.children,ue,1),this.div.removeChild(fe._accessibleDiv),this.pool.push(fe._accessibleDiv),fe._accessibleDiv=null,ue--;else{de=fe._accessibleDiv;let pe=fe.hitArea;const me=fe.worldTransform;fe.hitArea?(de.style.left=`${(me.tx+pe.x*me.a)*he}px`,de.style.top=`${(me.ty+pe.y*me.d)*ce}px`,de.style.width=`${pe.width*me.a*he}px`,de.style.height=`${pe.height*me.d*ce}px`):(pe=fe.getBounds(),this.capHitArea(pe),de.style.left=`${pe.x*he}px`,de.style.top=`${pe.y*ce}px`,de.style.width=`${pe.width*he}px`,de.style.height=`${pe.height*ce}px`,de.title!==fe.accessibleTitle&&fe.accessibleTitle!==null&&(de.title=fe.accessibleTitle),de.getAttribute("aria-label")!==fe.accessibleHint&&fe.accessibleHint!==null&&de.setAttribute("aria-label",fe.accessibleHint)),(fe.accessibleTitle!==de.title||fe.tabIndex!==de.tabIndex)&&(de.title=fe.accessibleTitle,de.tabIndex=fe.tabIndex,this.debug&&this.updateDebugHTML(de))}}this.renderId++}updateDebugHTML(ee){ee.innerHTML=`type: ${ee.type}</br> title : ${ee.title}</br> tabIndex: ${ee.tabIndex}`}capHitArea(ee){ee.x<0&&(ee.width+=ee.x,ee.x=0),ee.y<0&&(ee.height+=ee.y,ee.y=0);const{width:te,height:re}=this.renderer;ee.x+ee.width>te&&(ee.width=te-ee.x),ee.y+ee.height>re&&(ee.height=re-ee.y)}addChild(ee){let te=this.pool.pop();te||(te=document.createElement("button"),te.style.width=`${DIV_TOUCH_SIZE}px`,te.style.height=`${DIV_TOUCH_SIZE}px`,te.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",te.style.position="absolute",te.style.zIndex=DIV_TOUCH_ZINDEX.toString(),te.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?te.setAttribute("aria-live","off"):te.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?te.setAttribute("aria-relevant","additions"):te.setAttribute("aria-relevant","text"),te.addEventListener("click",this._onClick.bind(this)),te.addEventListener("focus",this._onFocus.bind(this)),te.addEventListener("focusout",this._onFocusOut.bind(this))),te.style.pointerEvents=ee.accessiblePointerEvents,te.type=ee.accessibleType,ee.accessibleTitle&&ee.accessibleTitle!==null?te.title=ee.accessibleTitle:(!ee.accessibleHint||ee.accessibleHint===null)&&(te.title=`displayObject ${ee.tabIndex}`),ee.accessibleHint&&ee.accessibleHint!==null&&te.setAttribute("aria-label",ee.accessibleHint),this.debug&&this.updateDebugHTML(te),ee._accessibleActive=!0,ee._accessibleDiv=te,te.displayObject=ee,this.children.push(ee),this.div.appendChild(ee._accessibleDiv),ee._accessibleDiv.tabIndex=ee.tabIndex}_dispatchEvent(ee,te){const{displayObject:re}=ee.target,ne=this.renderer.events.rootBoundary,se=Object.assign(new FederatedEvent(ne),{target:re});ne.rootTarget=this.renderer.lastObjectRendered,te.forEach(ae=>ne.dispatchEvent(se,ae))}_onClick(ee){this._dispatchEvent(ee,["click","pointertap","tap"])}_onFocus(ee){ee.target.getAttribute("aria-live")||ee.target.setAttribute("aria-live","assertive"),this._dispatchEvent(ee,["mouseover"])}_onFocusOut(ee){ee.target.getAttribute("aria-live")||ee.target.setAttribute("aria-live","polite"),this._dispatchEvent(ee,["mouseout"])}_onKeyDown(ee){ee.keyCode===KEY_CODE_TAB&&this.activate()}_onMouseMove(ee){ee.movementX===0&&ee.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}AccessibilityManager.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]},extensions$1.add(AccessibilityManager);const _Application=class{constructor(ie){this.stage=new Container,ie=Object.assign({forceCanvas:!1},ie),this.renderer=autoDetectRenderer(ie),_Application._plugins.forEach(ee=>{ee.init.call(this,ie)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(ie,ee){const te=_Application._plugins.slice(0);te.reverse(),te.forEach(re=>{re.destroy.call(this)}),this.stage.destroy(ee),this.stage=null,this.renderer.destroy(ie),this.renderer=null}};let Application=_Application;Application._plugins=[],extensions$1.handleByList(ExtensionType.Application,Application._plugins);class ResizePlugin{static init(ee){Object.defineProperty(this,"resizeTo",{set(te){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=te,te&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{!this._resizeTo||(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let te,re;if(this._resizeTo===globalThis.window)te=globalThis.innerWidth,re=globalThis.innerHeight;else{const{clientWidth:ne,clientHeight:se}=this._resizeTo;te=ne,re=se}this.renderer.resize(te,re),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=ee.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application,extensions$1.add(ResizePlugin);const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions$1.handle(ExtensionType.Asset,ie=>{const ee=ie.ref;Object.entries(assetKeyMap).filter(([te])=>!!ee[te]).forEach(([te,re])=>{var ne;return extensions$1.add(Object.assign(ee[te],{extension:(ne=ee[te].extension)!=null?ne:re}))})},ie=>{const ee=ie.ref;Object.keys(assetKeyMap).filter(te=>!!ee[te]).forEach(te=>extensions$1.remove(ee[te]))});class BackgroundLoader{constructor(ee,te=!1){this._loader=ee,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=te}add(ee){ee.forEach(te=>{this._assetList.push(te)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const ee=[],te=Math.min(this._assetList.length,this._maxConcurrent);for(let re=0;re<te;re++)ee.push(this._assetList.pop());await this._loader.load(ee),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(ee){this._isActive!==ee&&(this._isActive=ee,ee&&!this._isLoading&&this._next())}}function checkDataUrl(ie,ee){if(Array.isArray(ee)){for(const te of ee)if(ie.startsWith(`data:${te}`))return!0;return!1}return ie.startsWith(`data:${ee}`)}function checkExtension(ie,ee){const te=ie.split("?")[0],re=path.extname(te).toLowerCase();return Array.isArray(ee)?ee.includes(re):re===ee}const convertToList=(ie,ee)=>(Array.isArray(ie)||(ie=[ie]),ee?ie.map(te=>typeof te=="string"?ee(te):te):ie),copySearchParams=(ie,ee)=>{const te=ee.split("?")[1];return te&&(ie+=`?${te}`),ie};function processX(ie,ee,te,re,ne){const se=ee[te];for(let ae=0;ae<se.length;ae++){const oe=se[ae];te<ee.length-1?processX(ie.replace(re[te],oe),ee,te+1,re,ne):ne.push(ie.replace(re[te],oe))}}function createStringVariations(ie){const ee=/\{(.*?)\}/g,te=ie.match(ee),re=[];if(te){const ne=[];te.forEach(se=>{const ae=se.substring(1,se.length-1).split(",");ne.push(ae)}),processX(ie,ne,0,te,re)}else re.push(ie);return re}const isSingleItem=ie=>!Array.isArray(ie);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(ee){return this._cache.has(ee)}get(ee){const te=this._cache.get(ee);return te||console.warn(`[Assets] Asset id ${ee} was not found in the Cache`),te}set(ee,te){const re=convertToList(ee);let ne;for(let oe=0;oe<this.parsers.length;oe++){const le=this.parsers[oe];if(le.test(te)){ne=le.getCacheableAssets(re,te);break}}ne||(ne={},re.forEach(oe=>{ne[oe]=te}));const se=Object.keys(ne),ae={cacheKeys:se,keys:re};if(re.forEach(oe=>{this._cacheMap.set(oe,ae)}),se.forEach(oe=>{this._cache.has(oe)&&this._cache.get(oe)!==te&&console.warn("[Cache] already has key:",oe),this._cache.set(oe,ne[oe])}),te instanceof Texture){const oe=te;re.forEach(le=>{oe.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(oe.baseTexture,le),Texture.addToCache(oe,le)})}}remove(ee){if(this._cacheMap.get(ee),!this._cacheMap.has(ee)){console.warn(`[Assets] Asset id ${ee} was not found in the Cache`);return}const te=this._cacheMap.get(ee);te.cacheKeys.forEach(ne=>{this._cache.delete(ne)}),te.keys.forEach(ne=>{this._cacheMap.delete(ne)})}get parsers(){return this._parsers}}const Cache=new CacheClass;class Loader{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(ee,te,re)=>(this._parsersValidated=!1,ee[te]=re,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(ee,te){const re={promise:null,parser:null};return re.promise=(async()=>{var ae,oe;let ne=null,se=null;if(te.loadParser&&(se=this._parserHash[te.loadParser],se||console.warn(`[Assets] specified load parser "${te.loadParser}" not found while loading ${ee}`)),!se){for(let le=0;le<this.parsers.length;le++){const he=this.parsers[le];if(he.load&&((ae=he.test)==null?void 0:ae.call(he,ee,te,this))){se=he;break}}if(!se)return console.warn(`[Assets] ${ee} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}ne=await se.load(ee,te,this),re.parser=se;for(let le=0;le<this.parsers.length;le++){const he=this.parsers[le];he.parse&&he.parse&&await((oe=he.testParse)==null?void 0:oe.call(he,ne,te,this))&&(ne=await he.parse(ne,te,this)||ne,re.parser=he)}return ne})(),re}async load(ee,te){this._parsersValidated||this._validateParsers();let re=0;const ne={},se=isSingleItem(ee),ae=convertToList(ee,he=>({src:he})),oe=ae.length,le=ae.map(async he=>{const ce=path.toAbsolute(he.src);if(!ne[he.src])try{this.promiseCache[ce]||(this.promiseCache[ce]=this._getLoadPromiseAndParser(ce,he)),ne[he.src]=await this.promiseCache[ce].promise,te&&te(++re/oe)}catch(de){throw delete this.promiseCache[ce],delete ne[he.src],new Error(`[Loader.load] Failed to load ${ce}.
${de}`)}});return await Promise.all(le),se?ne[ae[0].src]:ne}async unload(ee){const re=convertToList(ee,ne=>({src:ne})).map(async ne=>{var oe,le;const se=path.toAbsolute(ne.src),ae=this.promiseCache[se];if(ae){const he=await ae.promise;(le=(oe=ae.parser)==null?void 0:oe.unload)==null||le.call(oe,he,ne,this),delete this.promiseCache[se]}});await Promise.all(re)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(ee=>ee.name).reduce((ee,te)=>(ee[te.name]&&console.warn(`[Assets] loadParser name conflict "${te.name}"`),{...ee,[te.name]:te}),{})}}var LoaderParserPriority=(ie=>(ie[ie.Low=0]="Low",ie[ie.Normal=1]="Normal",ie[ie.High=2]="High",ie))(LoaderParserPriority||{});const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",test(ie){return checkDataUrl(ie,validJSONMIME)||checkExtension(ie,validJSONExtension)},async load(ie){return await(await settings.ADAPTER.fetch(ie)).json()}};extensions$1.add(loadJson);const validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(ie){return checkDataUrl(ie,validTXTMIME)||checkExtension(ie,validTXTExtension)},async load(ie){return await(await settings.ADAPTER.fetch(ie)).text()}};extensions$1.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(ie){const ee=path.extname(ie),ne=path.basename(ie,ee).replace(/(-|_)/g," ").toLowerCase().split(" ").map(oe=>oe.charAt(0).toUpperCase()+oe.slice(1));let se=ne.length>0;for(const oe of ne)if(!oe.match(CSS_IDENT_TOKEN_REGEX)){se=!1;break}let ae=ne.join(" ");return se||(ae=`"${ae.replace(/[\\"]/g,"\\$&")}"`),ae}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",test(ie){return checkDataUrl(ie,validFontMIMEs)||checkExtension(ie,validFontExtensions)},async load(ie,ee){var re,ne,se,ae,oe,le;const te=settings.ADAPTER.getFontFaceSet();if(te){const he=[],ce=(ne=(re=ee.data)==null?void 0:re.family)!=null?ne:getFontFamilyName(ie),de=(oe=(ae=(se=ee.data)==null?void 0:se.weights)==null?void 0:ae.filter(fe=>validWeights.includes(fe)))!=null?oe:["normal"],ue=(le=ee.data)!=null?le:{};for(let fe=0;fe<de.length;fe++){const pe=de[fe],me=new FontFace(ce,`url(${encodeURI(ie)})`,{...ue,weight:pe});await me.load(),te.add(me),he.push(me)}return he.length===1?he[0]:he}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(ie){(Array.isArray(ie)?ie:[ie]).forEach(ee=>settings.ADAPTER.getFontFaceSet().delete(ee))}};extensions$1.add(loadWebFont);let UUID=0,MAX_WORKERS;const WHITE_PNG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",checkImageBitmapCode={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${WHITE_PNG}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},workerCode={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let workerURL;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(ee=>{const te=URL.createObjectURL(new Blob([checkImageBitmapCode.code],{type:"application/javascript"})),re=new Worker(te);re.addEventListener("message",ne=>{re.terminate(),URL.revokeObjectURL(te),ee(ne.data)})}),this._isImageBitmapSupported)}loadImageBitmap(ee){return this._run("loadImageBitmap",[ee])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let ee=this.workerPool.pop();return!ee&&this._createdWorkers<MAX_WORKERS&&(workerURL||(workerURL=URL.createObjectURL(new Blob([workerCode.code],{type:"application/javascript"}))),this._createdWorkers++,ee=new Worker(workerURL),ee.addEventListener("message",te=>{this.complete(te.data),this.returnWorker(te.target),this.next()})),ee}returnWorker(ee){this.workerPool.push(ee)}complete(ee){ee.error!==void 0?this.resolveHash[ee.uuid].reject(ee.error):this.resolveHash[ee.uuid].resolve(ee.data),this.resolveHash[ee.uuid]=null}async _run(ee,te){await this._initWorkers();const re=new Promise((ne,se)=>{this.queue.push({id:ee,arguments:te,resolve:ne,reject:se})});return this.next(),re}next(){if(!this.queue.length)return;const ee=this.getWorker();if(!ee)return;const te=this.queue.pop(),re=te.id;this.resolveHash[UUID]={resolve:te.resolve,reject:te.reject},ee.postMessage({data:te.arguments,uuid:UUID++,id:re})}}const WorkerManager=new WorkerManagerClass;function createTexture(ie,ee,te){const re=new Texture(ie);return re.baseTexture.on("dispose",()=>{delete ee.promiseCache[te]}),re}const validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(ie){const ee=await settings.ADAPTER.fetch(ie);if(!ee.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${ie}: ${ee.status} ${ee.statusText}`);const te=await ee.blob();return await createImageBitmap(te)}const loadTextures={name:"loadTextures",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(ie){return checkDataUrl(ie,validImageMIMEs)||checkExtension(ie,validImageExtensions)},async load(ie,ee,te){let re=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?re=await WorkerManager.loadImageBitmap(ie):re=await loadImageBitmap(ie):re=await new Promise(se=>{re=new Image,re.crossOrigin=this.config.crossOrigin,re.src=ie,re.complete?se(re):re.onload=()=>{se(re)}});const ne=new BaseTexture(re,{resolution:getResolutionOfUrl(ie),...ee.data});return ne.resource.src=ie,createTexture(ne,te,ie)},unload(ie){ie.destroy(!0)}};extensions$1.add(loadTextures);const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSVG={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadSVG",test(ie){return checkDataUrl(ie,validSVGMIME)||checkExtension(ie,validSVGExtension)},async testParse(ie){return SVGResource.test(ie)},async parse(ie,ee,te){var ae;const re=new SVGResource(ie,(ae=ee==null?void 0:ee.data)==null?void 0:ae.resourceOptions);await re.load();const ne=new BaseTexture(re,{resolution:getResolutionOfUrl(ie),...ee==null?void 0:ee.data});return ne.resource.src=ie,createTexture(ne,te,ie)},async load(ie,ee){return(await settings.ADAPTER.fetch(ie)).text()},unload:loadTextures.unload};extensions$1.add(loadSVG);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(ee,te)=>`${ee}${this._bundleIdConnector}${te}`,extractAssetIdFromBundle:(ee,te)=>te.replace(`${ee}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(ee){var te,re,ne;if(this._bundleIdConnector=(te=ee.connector)!=null?te:this._bundleIdConnector,this._createBundleAssetId=(re=ee.createBundleAssetId)!=null?re:this._createBundleAssetId,this._extractAssetIdFromBundle=(ne=ee.extractAssetIdFromBundle)!=null?ne:this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...ee){ee.forEach(te=>{this._preferredOrder.push(te),te.priority||(te.priority=Object.keys(te.params))}),this._resolverHash={}}set basePath(ee){this._basePath=ee}get basePath(){return this._basePath}set rootPath(ee){this._rootPath=ee}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(ee){if(typeof ee=="string")this._defaultSearchParams=ee;else{const te=ee;this._defaultSearchParams=Object.keys(te).map(re=>`${encodeURIComponent(re)}=${encodeURIComponent(te[re])}`).join("&")}}addManifest(ee){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=ee,ee.bundles.forEach(te=>{this.addBundle(te.name,te.assets)})}addBundle(ee,te){const re=[];Array.isArray(te)?te.forEach(ne=>{if(typeof ne.name=="string"){const se=this._createBundleAssetId(ee,ne.name);re.push(se),this.add([ne.name,se],ne.srcs,ne.data)}else{const se=ne.name.map(ae=>this._createBundleAssetId(ee,ae));se.forEach(ae=>{re.push(ae)}),this.add([...ne.name,...se],ne.srcs)}}):Object.keys(te).forEach(ne=>{re.push(this._createBundleAssetId(ee,ne)),this.add([ne,this._createBundleAssetId(ee,ne)],te[ne])}),this._bundles[ee]=re}add(ee,te,re){const ne=convertToList(ee);ne.forEach(ae=>{this.hasKey(ae)&&console.warn(`[Resolver] already has key: ${ae} overwriting`)}),Array.isArray(te)||(typeof te=="string"?te=createStringVariations(te):te=[te]);const se=te.map(ae=>{var le;let oe=ae;if(typeof ae=="string"){let he=!1;for(let ce=0;ce<this._parsers.length;ce++){const de=this._parsers[ce];if(de.test(ae)){oe=de.parse(ae),he=!0;break}}he||(oe={src:ae})}return oe.format||(oe.format=oe.src.split(".").pop()),oe.alias||(oe.alias=ne),(this._basePath||this._rootPath)&&(oe.src=path.toAbsolute(oe.src,this._basePath,this._rootPath)),oe.src=this._appendDefaultSearchParams(oe.src),oe.data=(le=oe.data)!=null?le:re,oe});ne.forEach(ae=>{this._assetMap[ae]=se})}resolveBundle(ee){const te=isSingleItem(ee);ee=convertToList(ee);const re={};return ee.forEach(ne=>{const se=this._bundles[ne];if(se){const ae=this.resolve(se),oe={};for(const le in ae){const he=ae[le];oe[this._extractAssetIdFromBundle(ne,le)]=he}re[ne]=oe}}),te?re[ee[0]]:re}resolveUrl(ee){const te=this.resolve(ee);if(typeof ee!="string"){const re={};for(const ne in te)re[ne]=te[ne].src;return re}return te.src}resolve(ee){const te=isSingleItem(ee);ee=convertToList(ee);const re={};return ee.forEach(ne=>{var se;if(!this._resolverHash[ne])if(this._assetMap[ne]){let ae=this._assetMap[ne];const oe=this._getPreferredOrder(ae),le=ae[0];oe==null||oe.priority.forEach(he=>{oe.params[he].forEach(ce=>{const de=ae.filter(ue=>ue[he]?ue[he]===ce:!1);de.length&&(ae=de)})}),this._resolverHash[ne]=(se=ae[0])!=null?se:le}else{let ae=ne;(this._basePath||this._rootPath)&&(ae=path.toAbsolute(ae,this._basePath,this._rootPath)),ae=this._appendDefaultSearchParams(ae),this._resolverHash[ne]={src:ae}}re[ne]=this._resolverHash[ne]}),te?re[ee[0]]:re}hasKey(ee){return!!this._assetMap[ee]}hasBundle(ee){return!!this._bundles[ee]}_getPreferredOrder(ee){for(let te=0;te<ee.length;te++){const re=ee[0],ne=this._preferredOrder.find(se=>se.params.format.includes(re.format));if(ne)return ne}return this._preferredOrder[0]}_appendDefaultSearchParams(ee){if(!this._defaultSearchParams)return ee;const te=/\?/.test(ee)?"&":"?";return`${ee}${te}${this._defaultSearchParams}`}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(ee={}){var se,ae,oe,le;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,ee.defaultSearchParams&&this.resolver.setDefaultSearchParams(ee.defaultSearchParams),ee.basePath&&(this.resolver.basePath=ee.basePath),ee.bundleIdentifier&&this.resolver.setBundleIdentifier(ee.bundleIdentifier),ee.manifest){let he=ee.manifest;typeof he=="string"&&(he=await this.load(he)),this.resolver.addManifest(he)}const te=(ae=(se=ee.texturePreference)==null?void 0:se.resolution)!=null?ae:1,re=typeof te=="number"?[te]:te;let ne=[];if((oe=ee.texturePreference)!=null&&oe.format){const he=(le=ee.texturePreference)==null?void 0:le.format;ne=typeof he=="string"?[he]:he;for(const ce of this._detections)await ce.test()||(ne=await ce.remove(ne))}else for(const he of this._detections)await he.test()&&(ne=await he.add(ne));this.resolver.prefer({params:{format:ne,resolution:re}}),ee.preferences&&this.setPreferences(ee.preferences)}add(ee,te,re){this.resolver.add(ee,te,re)}async load(ee,te){this._initialized||await this.init();const re=isSingleItem(ee),ne=convertToList(ee).map(oe=>typeof oe!="string"?(this.resolver.add(oe.src,oe),oe.src):(this.resolver.hasKey(oe)||this.resolver.add(oe,oe),oe)),se=this.resolver.resolve(ne),ae=await this._mapLoadToResolve(se,te);return re?ae[ne[0]]:ae}addBundle(ee,te){this.resolver.addBundle(ee,te)}async loadBundle(ee,te){this._initialized||await this.init();let re=!1;typeof ee=="string"&&(re=!0,ee=[ee]);const ne=this.resolver.resolveBundle(ee),se={},ae=Object.keys(ne);let oe=0,le=0;const he=()=>{te==null||te(++oe/le)},ce=ae.map(de=>{const ue=ne[de];return le+=Object.keys(ue).length,this._mapLoadToResolve(ue,he).then(fe=>{se[de]=fe})});return await Promise.all(ce),re?se[ee[0]]:se}async backgroundLoad(ee){this._initialized||await this.init(),typeof ee=="string"&&(ee=[ee]);const te=this.resolver.resolve(ee);this._backgroundLoader.add(Object.values(te))}async backgroundLoadBundle(ee){this._initialized||await this.init(),typeof ee=="string"&&(ee=[ee]);const te=this.resolver.resolveBundle(ee);Object.values(te).forEach(re=>{this._backgroundLoader.add(Object.values(re))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(ee){if(typeof ee=="string")return Cache.get(ee);const te={};for(let re=0;re<ee.length;re++)te[re]=Cache.get(ee[re]);return te}async _mapLoadToResolve(ee,te){const re=Object.values(ee),ne=Object.keys(ee);this._backgroundLoader.active=!1;const se=await this.loader.load(re,te);this._backgroundLoader.active=!0;const ae={};return re.forEach((oe,le)=>{const he=se[oe.src],ce=[oe.src];oe.alias&&ce.push(...oe.alias),ae[ne[le]]=he,Cache.set(ce,he)}),ae}async unload(ee){this._initialized||await this.init();const te=convertToList(ee).map(ne=>typeof ne!="string"?ne.src:ne),re=this.resolver.resolve(te);await this._unloadFromResolved(re)}async unloadBundle(ee){this._initialized||await this.init(),ee=convertToList(ee);const te=this.resolver.resolveBundle(ee),re=Object.keys(te).map(ne=>this._unloadFromResolved(te[ne]));await Promise.all(re)}async _unloadFromResolved(ee){const te=Object.values(ee);te.forEach(re=>{Cache.remove(re.src)}),await this.loader.unload(te)}get detections(){return this._detections}get preferWorkers(){return loadTextures.config.preferWorkers}set preferWorkers(ee){deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:ee})}setPreferences(ee){this.loader.parsers.forEach(te=>{!te.config||Object.keys(te.config).filter(re=>re in ee).forEach(re=>{te.config[re]=ee[re]})})}}const Assets=new AssetsClass;extensions$1.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const cacheTextureArray={extension:ExtensionType.CacheParser,test:ie=>Array.isArray(ie)&&ie.every(ee=>ee instanceof Texture),getCacheableAssets:(ie,ee)=>{const te={};return ie.forEach(re=>{ee.forEach((ne,se)=>{te[re+(se===0?"":se+1)]=ne})}),te}};extensions$1.add(cacheTextureArray);const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const ie="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",ee=await settings.ADAPTER.fetch(ie).then(te=>te.blob());return createImageBitmap(ee).then(()=>!0,()=>!1)},add:async ie=>[...ie,"avif"],remove:async ie=>ie.filter(ee=>ee!=="avif")};extensions$1.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const ie="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",ee=await settings.ADAPTER.fetch(ie).then(te=>te.blob());return createImageBitmap(ee).then(()=>!0,()=>!1)},add:async ie=>[...ie,"webp"],remove:async ie=>ie.filter(ee=>ee!=="webp")};extensions$1.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async ie=>[...ie,...imageFormats],remove:async ie=>ie.filter(ee=>!imageFormats.includes(ee))};extensions$1.add(detectDefaults);const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:ie=>{var ee,te;return{resolution:parseFloat((te=(ee=settings.RETINA_PREFIX.exec(ie))==null?void 0:ee[1])!=null?te:"1"),format:ie.split(".").pop(),src:ie}}};extensions$1.add(resolveTextureUrl);var INTERNAL_FORMATS=(ie=>(ie[ie.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",ie[ie.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",ie[ie.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",ie[ie.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",ie[ie.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",ie[ie.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",ie[ie.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",ie[ie.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",ie[ie.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",ie[ie.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",ie[ie.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",ie[ie.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",ie[ie.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",ie[ie.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",ie[ie.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",ie[ie.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",ie[ie.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",ie[ie.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",ie[ie.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",ie[ie.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",ie[ie.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",ie[ie.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",ie[ie.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",ie[ie.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",ie[ie.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",ie[ie.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",ie[ie.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",ie))(INTERNAL_FORMATS||{});const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let storedGl,extensions;function getCompressedTextureExtensions(){extensions={s3tc:storedGl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:storedGl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:storedGl.getExtension("WEBGL_compressed_texture_etc"),etc1:storedGl.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:storedGl.getExtension("WEBGL_compressed_texture_pvrtc")||storedGl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:storedGl.getExtension("WEBGL_compressed_texture_atc"),astc:storedGl.getExtension("WEBGL_compressed_texture_astc")}}const detectCompressedTextures={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>{const ee=settings.ADAPTER.createCanvas().getContext("webgl");return ee?(storedGl=ee,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async ie=>{extensions||getCompressedTextureExtensions();const ee=[];for(const te in extensions)!extensions[te]||ee.push(te);return[...ee,...ie]},remove:async ie=>(extensions||getCompressedTextureExtensions(),ie.filter(ee=>!(ee in extensions)))};extensions$1.add(detectCompressedTextures);class BlobResource extends BufferResource{constructor(ee,te={width:1,height:1,autoLoad:!0}){let re,ne;typeof ee=="string"?(re=ee,ne=new Uint8Array):(re=null,ne=ee),super(ne,te),this.origin=re,this.buffer=ne?new ViewableBuffer(ne):null,this._load=null,this.loaded=!1,this.origin!==null&&te.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(ee){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(ee=>ee.blob()).then(ee=>ee.arrayBuffer()).then(ee=>(this.data=new Uint32Array(ee),this.buffer=new ViewableBuffer(ee),this.loaded=!0,this.onBlobLoaded(ee),this.update(),this)),this._load)}}class CompressedTextureResource extends BlobResource{constructor(ee,te){super(ee,te),this.format=te.format,this.levels=te.levels||1,this._width=te.width,this._height=te.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(te.levelBuffers||this.buffer)&&(this._levelBuffers=te.levelBuffers||CompressedTextureResource._createLevelBuffers(ee instanceof Uint8Array?ee:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(ee,te,re){const ne=ee.gl;if(!ee.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let ae=0,oe=this.levels;ae<oe;ae++){const{levelID:le,levelWidth:he,levelHeight:ce,levelBuffer:de}=this._levelBuffers[ae];ne.compressedTexImage2D(ne.TEXTURE_2D,le,this.format,he,ce,0,de)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(ee){if(ee>=33776&&ee<=33779)return"s3tc";if(ee>=37488&&ee<=37497)return"etc";if(ee>=35840&&ee<=35843)return"pvrtc";if(ee>=36196)return"etc1";if(ee>=35986&&ee<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(ee,te,re,ne,se,ae,oe){const le=new Array(re);let he=ee.byteOffset,ce=ae,de=oe,ue=ce+ne-1&~(ne-1),fe=de+se-1&~(se-1),pe=ue*fe*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[te];for(let me=0;me<re;me++)le[me]={levelID:me,levelWidth:re>1?ce:ue,levelHeight:re>1?de:fe,levelBuffer:new Uint8Array(ee.buffer,he,pe)},he+=pe,ce=ce>>1||1,de=de>>1||1,ue=ce+ne-1&~(ne-1),fe=de+se-1&~(se-1),pe=ue*fe*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[te];return le}}const DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT={[FOURCC_DXT1]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[FOURCC_DXT3]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[FOURCC_DXT5]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},DXGI_TO_FORMAT={[70]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function parseDDS(ie){const ee=new Uint32Array(ie);if(ee[0]!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");const re=new Uint32Array(ie,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),ne=re[DDS_FIELDS.HEIGHT],se=re[DDS_FIELDS.WIDTH],ae=re[DDS_FIELDS.MIPMAP_COUNT],oe=new Uint32Array(ie,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),le=oe[PF_FLAGS];if(le&DDPF_FOURCC){const he=oe[DDS_PF_FIELDS.FOURCC];if(he!==FOURCC_DX10){const ve=FOURCC_TO_FORMAT[he],ye=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,be=new Uint8Array(ie,ye);return[new CompressedTextureResource(be,{format:ve,width:se,height:ne,levels:ae})]}const ce=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,de=new Uint32Array(ee.buffer,ce,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),ue=de[DDS_DX10_FIELDS.DXGI_FORMAT],fe=de[DDS_DX10_FIELDS.RESOURCE_DIMENSION],pe=de[DDS_DX10_FIELDS.MISC_FLAG],me=de[DDS_DX10_FIELDS.ARRAY_SIZE],xe=DXGI_TO_FORMAT[ue];if(xe===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${ue}`);if(pe===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(fe===6)throw new Error("DDSParser does not supported 3D texture data");const ge=new Array,_e=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(me===1)ge.push(new Uint8Array(ie,_e));else{const ve=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[xe];let ye=0,be=se,we=ne;for(let Te=0;Te<ae;Te++){const Pe=Math.max(1,be+3&-4),Be=Math.max(1,we+3&-4);ye+=Pe*Be*ve,be=be>>>1,we=we>>>1}let Se=_e;for(let Te=0;Te<me;Te++)ge.push(new Uint8Array(ie,Se,ye)),Se+=ye}return ge.map(ve=>new CompressedTextureResource(ve,{format:xe,width:se,height:ne,levels:ae}))}throw le&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):le&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):le&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):le&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT={[TYPES.UNSIGNED_BYTE]:1,[TYPES.UNSIGNED_SHORT]:2,[TYPES.INT]:4,[TYPES.UNSIGNED_INT]:4,[TYPES.FLOAT]:4,[TYPES.HALF_FLOAT]:8},FORMATS_TO_COMPONENTS={[FORMATS.RGBA]:4,[FORMATS.RGB]:3,[FORMATS.RG]:2,[FORMATS.RED]:1,[FORMATS.LUMINANCE]:1,[FORMATS.LUMINANCE_ALPHA]:2,[FORMATS.ALPHA]:1},TYPES_TO_BYTES_PER_PIXEL={[TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[TYPES.UNSIGNED_SHORT_5_6_5]:2};function parseKTX(ie,ee,te=!1){const re=new DataView(ee);if(!validate(ie,re))return null;const ne=re.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,se=re.getUint32(KTX_FIELDS.GL_TYPE,ne),ae=re.getUint32(KTX_FIELDS.GL_FORMAT,ne),oe=re.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,ne),le=re.getUint32(KTX_FIELDS.PIXEL_WIDTH,ne),he=re.getUint32(KTX_FIELDS.PIXEL_HEIGHT,ne)||1,ce=re.getUint32(KTX_FIELDS.PIXEL_DEPTH,ne)||1,de=re.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,ne)||1,ue=re.getUint32(KTX_FIELDS.NUMBER_OF_FACES,ne),fe=re.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,ne),pe=re.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,ne);if(he===0||ce!==1)throw new Error("Only 2D textures are supported");if(ue!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(de!==1)throw new Error("WebGL does not support array textures");const me=4,xe=4,ge=le+3&-4,_e=he+3&-4,ve=new Array(de);let ye=le*he;se===0&&(ye=ge*_e);let be;if(se!==0?TYPES_TO_BYTES_PER_COMPONENT[se]?be=TYPES_TO_BYTES_PER_COMPONENT[se]*FORMATS_TO_COMPONENTS[ae]:be=TYPES_TO_BYTES_PER_PIXEL[se]:be=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[oe],be===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const we=te?parseKvData(re,pe,ne):null;let Te=ye*be,Pe=le,Be=he,Ce=ge,De=_e,Re=FILE_HEADER_SIZE+pe;for(let Le=0;Le<fe;Le++){const ke=re.getUint32(Re,ne);let Me=Re+4;for(let Ee=0;Ee<de;Ee++){let Ae=ve[Ee];Ae||(Ae=ve[Ee]=new Array(fe)),Ae[Le]={levelID:Le,levelWidth:fe>1||se!==0?Pe:Ce,levelHeight:fe>1||se!==0?Be:De,levelBuffer:new Uint8Array(ee,Me,Te)},Me+=Te}Re+=ke+4,Re=Re%4!==0?Re+4-Re%4:Re,Pe=Pe>>1||1,Be=Be>>1||1,Ce=Pe+me-1&~(me-1),De=Be+xe-1&~(xe-1),Te=Ce*De*be}return se!==0?{uncompressed:ve.map(Le=>{let ke=Le[0].levelBuffer,Me=!1;return se===TYPES.FLOAT?ke=new Float32Array(Le[0].levelBuffer.buffer,Le[0].levelBuffer.byteOffset,Le[0].levelBuffer.byteLength/4):se===TYPES.UNSIGNED_INT?(Me=!0,ke=new Uint32Array(Le[0].levelBuffer.buffer,Le[0].levelBuffer.byteOffset,Le[0].levelBuffer.byteLength/4)):se===TYPES.INT&&(Me=!0,ke=new Int32Array(Le[0].levelBuffer.buffer,Le[0].levelBuffer.byteOffset,Le[0].levelBuffer.byteLength/4)),{resource:new BufferResource(ke,{width:Le[0].levelWidth,height:Le[0].levelHeight}),type:se,format:Me?convertFormatToInteger(ae):ae}}),kvData:we}:{compressed:ve.map(Le=>new CompressedTextureResource(null,{format:oe,width:le,height:he,levels:fe,levelBuffers:Le})),kvData:we}}function validate(ie,ee){for(let te=0;te<FILE_IDENTIFIER.length;te++)if(ee.getUint8(te)!==FILE_IDENTIFIER[te])return console.error(`${ie} is not a valid *.ktx file!`),!1;return!0}function convertFormatToInteger(ie){switch(ie){case FORMATS.RGBA:return FORMATS.RGBA_INTEGER;case FORMATS.RGB:return FORMATS.RGB_INTEGER;case FORMATS.RG:return FORMATS.RG_INTEGER;case FORMATS.RED:return FORMATS.RED_INTEGER;default:return ie}}function parseKvData(ie,ee,te){const re=new Map;let ne=0;for(;ne<ee;){const se=ie.getUint32(FILE_HEADER_SIZE+ne,te),ae=FILE_HEADER_SIZE+ne+4,oe=3-(se+3)%4;if(se===0||se>ee-ne){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let le=0;for(;le<se&&ie.getUint8(ae+le)!==0;le++);if(le===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const he=new TextDecoder().decode(new Uint8Array(ie.buffer,ae,le)),ce=new DataView(ie.buffer,ae+le+1,se-le-1);re.set(he,ce),ne+=4+se+oe}return re}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadDDS",test(ie){return checkExtension(ie,".dds")},async load(ie,ee,te){const ne=await(await settings.ADAPTER.fetch(ie)).arrayBuffer(),ae=parseDDS(ne).map(oe=>{const le=new BaseTexture(oe,{mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(ie),...ee.data});return createTexture(le,te,ie)});return ae.length===1?ae[0]:ae},unload(ie){Array.isArray(ie)?ie.forEach(ee=>ee.destroy(!0)):ie.destroy(!0)}};extensions$1.add(loadDDS);const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadKTX",test(ie){return checkExtension(ie,".ktx")},async load(ie,ee,te){const ne=await(await settings.ADAPTER.fetch(ie)).arrayBuffer(),{compressed:se,uncompressed:ae,kvData:oe}=parseKTX(ie,ne),le=se!=null?se:ae,he={mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(ie),...ee.data},ce=le.map(de=>{le===ae&&Object.assign(he,{type:de.type,format:de.format});const ue=new BaseTexture(de,he);return ue.ktxKeyValueData=oe,createTexture(ue,te,ie)});return ce.length===1?ce[0]:ce},unload(ie){Array.isArray(ie)?ie.forEach(ee=>ee.destroy(!0)):ie.destroy(!0)}};extensions$1.add(loadKTX);const resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:ie=>{const te=ie.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(te)},parse:ie=>{var re,ne,se,ae;if(ie.split("?")[0].split(".").pop()==="ktx"){const oe=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(oe.some(le=>ie.endsWith(le)))return{resolution:parseFloat((ne=(re=settings.RETINA_PREFIX.exec(ie))==null?void 0:re[1])!=null?ne:"1"),format:oe.find(le=>ie.endsWith(le)),src:ie}}return{resolution:parseFloat((ae=(se=settings.RETINA_PREFIX.exec(ie))==null?void 0:se[1])!=null?ae:"1"),format:ie.split(".").pop(),src:ie}}};extensions$1.add(resolveCompressedTextureUrl);const TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,_Extract=class{constructor(ie){this.renderer=ie}async image(ie,ee,te){const re=new Image;return re.src=await this.base64(ie,ee,te),re}async base64(ie,ee,te){const re=this.canvas(ie);if(re.toBlob!==void 0)return new Promise((ne,se)=>{re.toBlob(ae=>{if(!ae){se(new Error("ICanvas.toBlob failed!"));return}const oe=new FileReader;oe.onload=()=>ne(oe.result),oe.onerror=se,oe.readAsDataURL(ae)},ee,te)});if(re.toDataURL!==void 0)return re.toDataURL(ee,te);if(re.convertToBlob!==void 0){const ne=await re.convertToBlob({type:ee,quality:te});return new Promise((se,ae)=>{const oe=new FileReader;oe.onload=()=>se(oe.result),oe.onerror=ae,oe.readAsDataURL(ne)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(ie,ee){const{pixels:te,width:re,height:ne,flipY:se}=this._rawPixels(ie,ee);se&&_Extract._flipY(te,re,ne),_Extract._unpremultiplyAlpha(te);const ae=new CanvasRenderTarget(re,ne,1),oe=new ImageData(new Uint8ClampedArray(te.buffer),re,ne);return ae.context.putImageData(oe,0,0),ae.canvas}pixels(ie,ee){const{pixels:te,width:re,height:ne,flipY:se}=this._rawPixels(ie,ee);return se&&_Extract._flipY(te,re,ne),_Extract._unpremultiplyAlpha(te),te}_rawPixels(ie,ee){const te=this.renderer;if(!te)throw new Error("The Extract has already been destroyed");let re,ne=!1,se,ae=!1;if(ie&&(ie instanceof RenderTexture?se=ie:(se=te.generateTexture(ie,{resolution:te.resolution,multisample:te.multisample}),ae=!0)),se){if(re=se.baseTexture.resolution,ee=ee!=null?ee:se.frame,ne=!1,!ae){te.renderTexture.bind(se);const de=se.framebuffer.glFramebuffers[te.CONTEXT_UID];de.blitFramebuffer&&te.framebuffer.bind(de.blitFramebuffer)}}else re=te.resolution,ee||(ee=TEMP_RECT,ee.width=te.width/re,ee.height=te.height/re),ne=!0,te.renderTexture.bind();const oe=Math.round(ee.width*re),le=Math.round(ee.height*re),he=new Uint8Array(BYTES_PER_PIXEL*oe*le),ce=te.gl;return ce.readPixels(Math.round(ee.x*re),Math.round(ee.y*re),oe,le,ce.RGBA,ce.UNSIGNED_BYTE,he),ae&&(se==null||se.destroy(!0)),{pixels:he,width:oe,height:le,flipY:ne}}destroy(){this.renderer=null}static _flipY(ie,ee,te){const re=ee<<2,ne=te>>1,se=new Uint8Array(re);for(let ae=0;ae<ne;ae++){const oe=ae*re,le=(te-ae-1)*re;se.set(ie.subarray(oe,oe+re)),ie.copyWithin(oe,le,le+re),ie.set(se,le)}}static _unpremultiplyAlpha(ie){ie instanceof Uint8ClampedArray&&(ie=new Uint8Array(ie.buffer));const ee=ie.length;for(let te=0;te<ee;te+=4){const re=ie[te+3];if(re!==0){const ne=255.001/re;ie[te]=ie[te]*ne+.5,ie[te+1]=ie[te+1]*ne+.5,ie[te+2]=ie[te+2]*ne+.5}}}};let Extract=_Extract;Extract.extension={name:"extract",type:ExtensionType.RendererSystem},extensions$1.add(Extract);const buildCircle={build(ie){const ee=ie.points;let te,re,ne,se,ae,oe;if(ie.type===SHAPES.CIRC){const pe=ie.shape;te=pe.x,re=pe.y,ae=oe=pe.radius,ne=se=0}else if(ie.type===SHAPES.ELIP){const pe=ie.shape;te=pe.x,re=pe.y,ae=pe.width,oe=pe.height,ne=se=0}else{const pe=ie.shape,me=pe.width/2,xe=pe.height/2;te=pe.x+me,re=pe.y+xe,ae=oe=Math.max(0,Math.min(pe.radius,Math.min(me,xe))),ne=me-ae,se=xe-oe}if(!(ae>=0&&oe>=0&&ne>=0&&se>=0)){ee.length=0;return}const le=Math.ceil(2.3*Math.sqrt(ae+oe)),he=le*8+(ne?4:0)+(se?4:0);if(ee.length=he,he===0)return;if(le===0){ee.length=8,ee[0]=ee[6]=te+ne,ee[1]=ee[3]=re+se,ee[2]=ee[4]=te-ne,ee[5]=ee[7]=re-se;return}let ce=0,de=le*4+(ne?2:0)+2,ue=de,fe=he;{const pe=ne+ae,me=se,xe=te+pe,ge=te-pe,_e=re+me;if(ee[ce++]=xe,ee[ce++]=_e,ee[--de]=_e,ee[--de]=ge,se){const ve=re-me;ee[ue++]=ge,ee[ue++]=ve,ee[--fe]=ve,ee[--fe]=xe}}for(let pe=1;pe<le;pe++){const me=Math.PI/2*(pe/le),xe=ne+Math.cos(me)*ae,ge=se+Math.sin(me)*oe,_e=te+xe,ve=te-xe,ye=re+ge,be=re-ge;ee[ce++]=_e,ee[ce++]=ye,ee[--de]=ye,ee[--de]=ve,ee[ue++]=ve,ee[ue++]=be,ee[--fe]=be,ee[--fe]=_e}{const pe=ne,me=se+oe,xe=te+pe,ge=te-pe,_e=re+me,ve=re-me;ee[ce++]=xe,ee[ce++]=_e,ee[--fe]=ve,ee[--fe]=xe,ne&&(ee[ce++]=ge,ee[ce++]=_e,ee[--fe]=ve,ee[--fe]=ge)}},triangulate(ie,ee){const te=ie.points,re=ee.points,ne=ee.indices;if(te.length===0)return;let se=re.length/2;const ae=se;let oe,le;if(ie.type!==SHAPES.RREC){const ce=ie.shape;oe=ce.x,le=ce.y}else{const ce=ie.shape;oe=ce.x+ce.width/2,le=ce.y+ce.height/2}const he=ie.matrix;re.push(ie.matrix?he.a*oe+he.c*le+he.tx:oe,ie.matrix?he.b*oe+he.d*le+he.ty:le),se++,re.push(te[0],te[1]);for(let ce=2;ce<te.length;ce+=2)re.push(te[ce],te[ce+1]),ne.push(se++,ae,se);ne.push(ae+1,ae,se)}};function fixOrientation(ie,ee=!1){const te=ie.length;if(te<6)return;let re=0;for(let ne=0,se=ie[te-2],ae=ie[te-1];ne<te;ne+=2){const oe=ie[ne],le=ie[ne+1];re+=(oe-se)*(le+ae),se=oe,ae=le}if(!ee&&re>0||ee&&re<=0){const ne=te/2;for(let se=ne+ne%2;se<te;se+=2){const ae=te-se-2,oe=te-se-1,le=se,he=se+1;[ie[ae],ie[le]]=[ie[le],ie[ae]],[ie[oe],ie[he]]=[ie[he],ie[oe]]}}}const buildPoly={build(ie){ie.points=ie.shape.points.slice()},triangulate(ie,ee){let te=ie.points;const re=ie.holes,ne=ee.points,se=ee.indices;if(te.length>=6){fixOrientation(te,!1);const ae=[];for(let he=0;he<re.length;he++){const ce=re[he];fixOrientation(ce.points,!0),ae.push(te.length/2),te=te.concat(ce.points)}const oe=earcut_1(te,ae,2);if(!oe)return;const le=ne.length/2;for(let he=0;he<oe.length;he+=3)se.push(oe[he]+le),se.push(oe[he+1]+le),se.push(oe[he+2]+le);for(let he=0;he<te.length;he++)ne.push(te[he])}}},buildRectangle={build(ie){const ee=ie.shape,te=ee.x,re=ee.y,ne=ee.width,se=ee.height,ae=ie.points;ae.length=0,ne>=0&&se>=0&&ae.push(te,re,te+ne,re,te+ne,re+se,te,re+se)},triangulate(ie,ee){const te=ie.points,re=ee.points;if(te.length===0)return;const ne=re.length/2;re.push(te[0],te[1],te[2],te[3],te[6],te[7],te[4],te[5]),ee.indices.push(ne,ne+1,ne+2,ne+1,ne+2,ne+3)}},buildRoundedRectangle={build(ie){buildCircle.build(ie)},triangulate(ie,ee){buildCircle.triangulate(ie,ee)}};var LINE_JOIN=(ie=>(ie.MITER="miter",ie.BEVEL="bevel",ie.ROUND="round",ie))(LINE_JOIN||{}),LINE_CAP=(ie=>(ie.BUTT="butt",ie.ROUND="round",ie.SQUARE="square",ie))(LINE_CAP||{});const curves={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(ie,ee=20){if(!this.adaptive||!ie||isNaN(ie))return ee;let te=Math.ceil(ie/this.maxLength);return te<this.minSegments?te=this.minSegments:te>this.maxSegments&&(te=this.maxSegments),te}};class ArcUtils{static curveTo(ee,te,re,ne,se,ae){const oe=ae[ae.length-2],he=ae[ae.length-1]-te,ce=oe-ee,de=ne-te,ue=re-ee,fe=Math.abs(he*ue-ce*de);if(fe<1e-8||se===0)return(ae[ae.length-2]!==ee||ae[ae.length-1]!==te)&&ae.push(ee,te),null;const pe=he*he+ce*ce,me=de*de+ue*ue,xe=he*de+ce*ue,ge=se*Math.sqrt(pe)/fe,_e=se*Math.sqrt(me)/fe,ve=ge*xe/pe,ye=_e*xe/me,be=ge*ue+_e*ce,we=ge*de+_e*he,Se=ce*(_e+ve),Te=he*(_e+ve),Pe=ue*(ge+ye),Be=de*(ge+ye),Ce=Math.atan2(Te-we,Se-be),De=Math.atan2(Be-we,Pe-be);return{cx:be+ee,cy:we+te,radius:se,startAngle:Ce,endAngle:De,anticlockwise:ce*de>ue*he}}static arc(ee,te,re,ne,se,ae,oe,le,he){const ce=oe-ae,de=curves._segmentsCount(Math.abs(ce)*se,Math.ceil(Math.abs(ce)/PI_2)*40),ue=ce/(de*2),fe=ue*2,pe=Math.cos(ue),me=Math.sin(ue),xe=de-1,ge=xe%1/xe;for(let _e=0;_e<=xe;++_e){const ve=_e+ge*_e,ye=ue+ae+fe*ve,be=Math.cos(ye),we=-Math.sin(ye);he.push((pe*be+me*we)*se+re,(pe*-we+me*be)*se+ne)}}}class BatchPart{constructor(){this.reset()}begin(ee,te,re){this.reset(),this.style=ee,this.start=te,this.attribStart=re}end(ee,te){this.attribSize=te-this.attribStart,this.size=ee-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class BezierUtils{static curveLength(ee,te,re,ne,se,ae,oe,le){let ce=0,de=0,ue=0,fe=0,pe=0,me=0,xe=0,ge=0,_e=0,ve=0,ye=0,be=ee,we=te;for(let Se=1;Se<=10;++Se)de=Se/10,ue=de*de,fe=ue*de,pe=1-de,me=pe*pe,xe=me*pe,ge=xe*ee+3*me*de*re+3*pe*ue*se+fe*oe,_e=xe*te+3*me*de*ne+3*pe*ue*ae+fe*le,ve=be-ge,ye=we-_e,be=ge,we=_e,ce+=Math.sqrt(ve*ve+ye*ye);return ce}static curveTo(ee,te,re,ne,se,ae,oe){const le=oe[oe.length-2],he=oe[oe.length-1];oe.length-=2;const ce=curves._segmentsCount(BezierUtils.curveLength(le,he,ee,te,re,ne,se,ae));let de=0,ue=0,fe=0,pe=0,me=0;oe.push(le,he);for(let xe=1,ge=0;xe<=ce;++xe)ge=xe/ce,de=1-ge,ue=de*de,fe=ue*de,pe=ge*ge,me=pe*ge,oe.push(fe*le+3*ue*ge*ee+3*de*pe*re+me*se,fe*he+3*ue*ge*te+3*de*pe*ne+me*ae)}}function square(ie,ee,te,re,ne,se,ae,oe){const le=ie-te*ne,he=ee-re*ne,ce=ie+te*se,de=ee+re*se;let ue,fe;ae?(ue=re,fe=-te):(ue=-re,fe=te);const pe=le+ue,me=he+fe,xe=ce+ue,ge=de+fe;return oe.push(pe,me,xe,ge),2}function round(ie,ee,te,re,ne,se,ae,oe){const le=te-ie,he=re-ee;let ce=Math.atan2(le,he),de=Math.atan2(ne-ie,se-ee);oe&&ce<de?ce+=Math.PI*2:!oe&&ce>de&&(de+=Math.PI*2);let ue=ce;const fe=de-ce,pe=Math.abs(fe),me=Math.sqrt(le*le+he*he),xe=(15*pe*Math.sqrt(me)/Math.PI>>0)+1,ge=fe/xe;if(ue+=ge,oe){ae.push(ie,ee,te,re);for(let _e=1,ve=ue;_e<xe;_e++,ve+=ge)ae.push(ie,ee,ie+Math.sin(ve)*me,ee+Math.cos(ve)*me);ae.push(ie,ee,ne,se)}else{ae.push(te,re,ie,ee);for(let _e=1,ve=ue;_e<xe;_e++,ve+=ge)ae.push(ie+Math.sin(ve)*me,ee+Math.cos(ve)*me,ie,ee);ae.push(ne,se,ie,ee)}return xe*2}function buildNonNativeLine(ie,ee){const te=ie.shape;let re=ie.points||te.points.slice();const ne=ee.closePointEps;if(re.length===0)return;const se=ie.lineStyle,ae=new Point(re[0],re[1]),oe=new Point(re[re.length-2],re[re.length-1]),le=te.type!==SHAPES.POLY||te.closeStroke,he=Math.abs(ae.x-oe.x)<ne&&Math.abs(ae.y-oe.y)<ne;if(le){re=re.slice(),he&&(re.pop(),re.pop(),oe.set(re[re.length-2],re[re.length-1]));const Ee=(ae.x+oe.x)*.5,Ae=(oe.y+ae.y)*.5;re.unshift(Ee,Ae),re.push(Ee,Ae)}const ce=ee.points,de=re.length/2;let ue=re.length;const fe=ce.length/2,pe=se.width/2,me=pe*pe,xe=se.miterLimit*se.miterLimit;let ge=re[0],_e=re[1],ve=re[2],ye=re[3],be=0,we=0,Se=-(_e-ye),Te=ge-ve,Pe=0,Be=0,Ce=Math.sqrt(Se*Se+Te*Te);Se/=Ce,Te/=Ce,Se*=pe,Te*=pe;const De=se.alignment,Re=(1-De)*2,Le=De*2;le||(se.cap===LINE_CAP.ROUND?ue+=round(ge-Se*(Re-Le)*.5,_e-Te*(Re-Le)*.5,ge-Se*Re,_e-Te*Re,ge+Se*Le,_e+Te*Le,ce,!0)+2:se.cap===LINE_CAP.SQUARE&&(ue+=square(ge,_e,Se,Te,Re,Le,!0,ce))),ce.push(ge-Se*Re,_e-Te*Re,ge+Se*Le,_e+Te*Le);for(let Ee=1;Ee<de-1;++Ee){ge=re[(Ee-1)*2],_e=re[(Ee-1)*2+1],ve=re[Ee*2],ye=re[Ee*2+1],be=re[(Ee+1)*2],we=re[(Ee+1)*2+1],Se=-(_e-ye),Te=ge-ve,Ce=Math.sqrt(Se*Se+Te*Te),Se/=Ce,Te/=Ce,Se*=pe,Te*=pe,Pe=-(ye-we),Be=ve-be,Ce=Math.sqrt(Pe*Pe+Be*Be),Pe/=Ce,Be/=Ce,Pe*=pe,Be*=pe;const Ae=ve-ge,Ie=_e-ye,Fe=ve-be,Ne=we-ye,$e=Ae*Fe+Ie*Ne,ze=Ie*Fe-Ne*Ae,Xe=ze<0;if(Math.abs(ze)<.001*Math.abs($e)){ce.push(ve-Se*Re,ye-Te*Re,ve+Se*Le,ye+Te*Le),$e>=0&&(se.join===LINE_JOIN.ROUND?ue+=round(ve,ye,ve-Se*Re,ye-Te*Re,ve-Pe*Re,ye-Be*Re,ce,!1)+4:ue+=2,ce.push(ve-Pe*Le,ye-Be*Le,ve+Pe*Re,ye+Be*Re));continue}const Je=(-Se+ge)*(-Te+ye)-(-Se+ve)*(-Te+_e),We=(-Pe+be)*(-Be+ye)-(-Pe+ve)*(-Be+we),dt=(Ae*We-Fe*Je)/ze,yt=(Ne*Je-Ie*We)/ze,vt=(dt-ve)*(dt-ve)+(yt-ye)*(yt-ye),at=ve+(dt-ve)*Re,_t=ye+(yt-ye)*Re,je=ve-(dt-ve)*Le,He=ye-(yt-ye)*Le,Qe=Math.min(Ae*Ae+Ie*Ie,Fe*Fe+Ne*Ne),St=Xe?Re:Le,gt=Qe+St*St*me,Oe=vt<=gt;let Ve=se.join;if(Ve===LINE_JOIN.MITER&&vt/me>xe&&(Ve=LINE_JOIN.BEVEL),Oe)switch(Ve){case LINE_JOIN.MITER:{ce.push(at,_t,je,He);break}case LINE_JOIN.BEVEL:{Xe?ce.push(at,_t,ve+Se*Le,ye+Te*Le,at,_t,ve+Pe*Le,ye+Be*Le):ce.push(ve-Se*Re,ye-Te*Re,je,He,ve-Pe*Re,ye-Be*Re,je,He),ue+=2;break}case LINE_JOIN.ROUND:{Xe?(ce.push(at,_t,ve+Se*Le,ye+Te*Le),ue+=round(ve,ye,ve+Se*Le,ye+Te*Le,ve+Pe*Le,ye+Be*Le,ce,!0)+4,ce.push(at,_t,ve+Pe*Le,ye+Be*Le)):(ce.push(ve-Se*Re,ye-Te*Re,je,He),ue+=round(ve,ye,ve-Se*Re,ye-Te*Re,ve-Pe*Re,ye-Be*Re,ce,!1)+4,ce.push(ve-Pe*Re,ye-Be*Re,je,He));break}}else{switch(ce.push(ve-Se*Re,ye-Te*Re,ve+Se*Le,ye+Te*Le),Ve){case LINE_JOIN.MITER:{Xe?ce.push(je,He,je,He):ce.push(at,_t,at,_t),ue+=2;break}case LINE_JOIN.ROUND:{Xe?ue+=round(ve,ye,ve+Se*Le,ye+Te*Le,ve+Pe*Le,ye+Be*Le,ce,!0)+2:ue+=round(ve,ye,ve-Se*Re,ye-Te*Re,ve-Pe*Re,ye-Be*Re,ce,!1)+2;break}}ce.push(ve-Pe*Re,ye-Be*Re,ve+Pe*Le,ye+Be*Le),ue+=2}}ge=re[(de-2)*2],_e=re[(de-2)*2+1],ve=re[(de-1)*2],ye=re[(de-1)*2+1],Se=-(_e-ye),Te=ge-ve,Ce=Math.sqrt(Se*Se+Te*Te),Se/=Ce,Te/=Ce,Se*=pe,Te*=pe,ce.push(ve-Se*Re,ye-Te*Re,ve+Se*Le,ye+Te*Le),le||(se.cap===LINE_CAP.ROUND?ue+=round(ve-Se*(Re-Le)*.5,ye-Te*(Re-Le)*.5,ve-Se*Re,ye-Te*Re,ve+Se*Le,ye+Te*Le,ce,!1)+2:se.cap===LINE_CAP.SQUARE&&(ue+=square(ve,ye,Se,Te,Re,Le,!1,ce)));const ke=ee.indices,Me=curves.epsilon*curves.epsilon;for(let Ee=fe;Ee<ue+fe-2;++Ee)ge=ce[Ee*2],_e=ce[Ee*2+1],ve=ce[(Ee+1)*2],ye=ce[(Ee+1)*2+1],be=ce[(Ee+2)*2],we=ce[(Ee+2)*2+1],!(Math.abs(ge*(ye-we)+ve*(we-_e)+be*(_e-ye))<Me)&&ke.push(Ee,Ee+1,Ee+2)}function buildNativeLine(ie,ee){let te=0;const re=ie.shape,ne=ie.points||re.points,se=re.type!==SHAPES.POLY||re.closeStroke;if(ne.length===0)return;const ae=ee.points,oe=ee.indices,le=ne.length/2,he=ae.length/2;let ce=he;for(ae.push(ne[0],ne[1]),te=1;te<le;te++)ae.push(ne[te*2],ne[te*2+1]),oe.push(ce,ce+1),ce++;se&&oe.push(ce,he)}function buildLine(ie,ee){ie.lineStyle.native?buildNativeLine(ie,ee):buildNonNativeLine(ie,ee)}class QuadraticUtils{static curveLength(ee,te,re,ne,se,ae){const oe=ee-2*re+se,le=te-2*ne+ae,he=2*re-2*ee,ce=2*ne-2*te,de=4*(oe*oe+le*le),ue=4*(oe*he+le*ce),fe=he*he+ce*ce,pe=2*Math.sqrt(de+ue+fe),me=Math.sqrt(de),xe=2*de*me,ge=2*Math.sqrt(fe),_e=ue/me;return(xe*pe+me*ue*(pe-ge)+(4*fe*de-ue*ue)*Math.log((2*me+_e+pe)/(_e+ge)))/(4*xe)}static curveTo(ee,te,re,ne,se){const ae=se[se.length-2],oe=se[se.length-1],le=curves._segmentsCount(QuadraticUtils.curveLength(ae,oe,ee,te,re,ne));let he=0,ce=0;for(let de=1;de<=le;++de){const ue=de/le;he=ae+(ee-ae)*ue,ce=oe+(te-oe)*ue,se.push(he+(ee+(re-ee)*ue-he)*ue,ce+(te+(ne-te)*ue-ce)*ue)}}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(ee,te=null,re=null,ne=null){this.points=[],this.holes=[],this.shape=ee,this.lineStyle=re,this.fillStyle=te,this.matrix=ne,this.type=ee.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point,_GraphicsGeometry=class extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let ie=0;ie<this.drawCalls.length;ie++)this.drawCalls[ie].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[ie]);this.drawCalls.length=0;for(let ie=0;ie<this.batches.length;ie++){const ee=this.batches[ie];ee.reset(),BATCH_POOL.push(ee)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(ie,ee=null,te=null,re=null){const ne=new GraphicsData(ie,ee,te,re);return this.graphicsData.push(ne),this.dirty++,this}drawHole(ie,ee=null){if(!this.graphicsData.length)return null;const te=new GraphicsData(ie,null,null,ee),re=this.graphicsData[this.graphicsData.length-1];return te.lineStyle=re.lineStyle,re.holes.push(te),this.dirty++,this}destroy(){super.destroy();for(let ie=0;ie<this.graphicsData.length;++ie)this.graphicsData[ie].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(ie){const ee=this.graphicsData;for(let te=0;te<ee.length;++te){const re=ee[te];if(!!re.fillStyle.visible&&re.shape&&(re.matrix?re.matrix.applyInverse(ie,tmpPoint):tmpPoint.copyFrom(ie),re.shape.contains(tmpPoint.x,tmpPoint.y))){let ne=!1;if(re.holes){for(let se=0;se<re.holes.length;se++)if(re.holes[se].shape.contains(tmpPoint.x,tmpPoint.y)){ne=!0;break}}if(!ne)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const ie=this.uvs,ee=this.graphicsData;let te=null,re=null;this.batches.length>0&&(te=this.batches[this.batches.length-1],re=te.style);for(let oe=this.shapeIndex;oe<ee.length;oe++){this.shapeIndex++;const le=ee[oe],he=le.fillStyle,ce=le.lineStyle;FILL_COMMANDS[le.type].build(le),le.matrix&&this.transformPoints(le.points,le.matrix),(he.visible||ce.visible)&&this.processHoles(le.holes);for(let ue=0;ue<2;ue++){const fe=ue===0?he:ce;if(!fe.visible)continue;const pe=fe.texture.baseTexture,me=this.indices.length,xe=this.points.length/2;pe.wrapMode=WRAP_MODES.REPEAT,ue===0?this.processFill(le):this.processLine(le);const ge=this.points.length/2-xe;ge!==0&&(te&&!this._compareStyles(re,fe)&&(te.end(me,xe),te=null),te||(te=BATCH_POOL.pop()||new BatchPart,te.begin(fe,me,xe),this.batches.push(te),re=fe),this.addUvs(this.points,ie,fe.texture,xe,ge,fe.matrix))}}const ne=this.indices.length,se=this.points.length/2;if(te&&te.end(ne,se),this.batches.length===0){this.batchable=!0;return}const ae=se>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&ae===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=ae?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(ie,ee){return!(!ie||!ee||ie.texture.baseTexture!==ee.texture.baseTexture||ie.color+ie.alpha!==ee.color+ee.alpha||!!ie.native!=!!ee.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let ie=0,ee=this.graphicsData.length;ie<ee;ie++){const te=this.graphicsData[ie],re=te.fillStyle,ne=te.lineStyle;if(re&&!re.texture.baseTexture.valid||ne&&!ne.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const ie=this.batches;for(let ee=0,te=ie.length;ee<te;ee++){const re=ie[ee];for(let ne=0;ne<re.size;ne++){const se=re.start+ne;this.indicesUint16[se]=this.indicesUint16[se]-re.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const ie=this.batches;for(let ee=0;ee<ie.length;ee++)if(ie[ee].style.native)return!1;return this.points.length<_GraphicsGeometry.BATCHABLE_SIZE*2}buildDrawCalls(){let ie=++BaseTexture._globalBatch;for(let ce=0;ce<this.drawCalls.length;ce++)this.drawCalls[ce].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[ce]);this.drawCalls.length=0;const ee=this.colors,te=this.textureIds;let re=DRAW_CALL_POOL.pop();re||(re=new BatchDrawCall,re.texArray=new BatchTextureArray),re.texArray.count=0,re.start=0,re.size=0,re.type=DRAW_MODES.TRIANGLES;let ne=0,se=null,ae=0,oe=!1,le=DRAW_MODES.TRIANGLES,he=0;this.drawCalls.push(re);for(let ce=0;ce<this.batches.length;ce++){const de=this.batches[ce],ue=8,fe=de.style,pe=fe.texture.baseTexture;oe!==!!fe.native&&(oe=!!fe.native,le=oe?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,se=null,ne=ue,ie++),se!==pe&&(se=pe,pe._batchEnabled!==ie&&(ne===ue&&(ie++,ne=0,re.size>0&&(re=DRAW_CALL_POOL.pop(),re||(re=new BatchDrawCall,re.texArray=new BatchTextureArray),this.drawCalls.push(re)),re.start=he,re.size=0,re.texArray.count=0,re.type=le),pe.touched=1,pe._batchEnabled=ie,pe._batchLocation=ne,pe.wrapMode=WRAP_MODES.REPEAT,re.texArray.elements[re.texArray.count++]=pe,ne++)),re.size+=de.size,he+=de.size,ae=pe._batchLocation,this.addColors(ee,fe.color,fe.alpha,de.attribSize,de.attribStart),this.addTextureIds(te,ae,de.attribSize,de.attribStart)}BaseTexture._globalBatch=ie,this.packAttributes()}packAttributes(){const ie=this.points,ee=this.uvs,te=this.colors,re=this.textureIds,ne=new ArrayBuffer(ie.length*3*4),se=new Float32Array(ne),ae=new Uint32Array(ne);let oe=0;for(let le=0;le<ie.length/2;le++)se[oe++]=ie[le*2],se[oe++]=ie[le*2+1],se[oe++]=ee[le*2],se[oe++]=ee[le*2+1],ae[oe++]=te[le],se[oe++]=re[le];this._buffer.update(ne),this._indexBuffer.update(this.indicesUint16)}processFill(ie){ie.holes.length?buildPoly.triangulate(ie,this):FILL_COMMANDS[ie.type].triangulate(ie,this)}processLine(ie){buildLine(ie,this);for(let ee=0;ee<ie.holes.length;ee++)buildLine(ie.holes[ee],this)}processHoles(ie){for(let ee=0;ee<ie.length;ee++){const te=ie[ee];FILL_COMMANDS[te.type].build(te),te.matrix&&this.transformPoints(te.points,te.matrix)}}calculateBounds(){const ie=this._bounds;ie.clear(),ie.addVertexData(this.points,0,this.points.length),ie.pad(this.boundsPadding,this.boundsPadding)}transformPoints(ie,ee){for(let te=0;te<ie.length/2;te++){const re=ie[te*2],ne=ie[te*2+1];ie[te*2]=ee.a*re+ee.c*ne+ee.tx,ie[te*2+1]=ee.b*re+ee.d*ne+ee.ty}}addColors(ie,ee,te,re,ne=0){const se=Color.shared.setValue(ee).toLittleEndianNumber(),ae=Color.shared.setValue(se).toPremultiplied(te);ie.length=Math.max(ie.length,ne+re);for(let oe=0;oe<re;oe++)ie[ne+oe]=ae}addTextureIds(ie,ee,te,re=0){ie.length=Math.max(ie.length,re+te);for(let ne=0;ne<te;ne++)ie[re+ne]=ee}addUvs(ie,ee,te,re,ne,se=null){let ae=0;const oe=ee.length,le=te.frame;for(;ae<ne;){let ce=ie[(re+ae)*2],de=ie[(re+ae)*2+1];if(se){const ue=se.a*ce+se.c*de+se.tx;de=se.b*ce+se.d*de+se.ty,ce=ue}ae++,ee.push(ce/le.width,de/le.height)}const he=te.baseTexture;(le.width<he.width||le.height<he.height)&&this.adjustUvs(ee,te,oe,ne)}adjustUvs(ie,ee,te,re){const ne=ee.baseTexture,se=1e-6,ae=te+re*2,oe=ee.frame,le=oe.width/ne.width,he=oe.height/ne.height;let ce=oe.x/oe.width,de=oe.y/oe.height,ue=Math.floor(ie[te]+se),fe=Math.floor(ie[te+1]+se);for(let pe=te+2;pe<ae;pe+=2)ue=Math.min(ue,Math.floor(ie[pe]+se)),fe=Math.min(fe,Math.floor(ie[pe+1]+se));ce-=ue,de-=fe;for(let pe=te;pe<ae;pe+=2)ie[pe]=(ie[pe]+ce)*le,ie[pe+1]=(ie[pe+1]+de)*he}};let GraphicsGeometry=_GraphicsGeometry;GraphicsGeometry.BATCHABLE_SIZE=100;class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const ee=new FillStyle;return ee.color=this.color,ee.alpha=this.alpha,ee.texture=this.texture,ee.matrix=this.matrix,ee.visible=this.visible,ee}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const ee=new LineStyle;return ee.color=this.color,ee.alpha=this.alpha,ee.texture=this.texture,ee.matrix=this.matrix,ee.visible=this.visible,ee.width=this.width,ee.alignment=this.alignment,ee.native=this.native,ee.cap=this.cap,ee.join=this.join,ee.miterLimit=this.miterLimit,ee}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const DEFAULT_SHADERS={},_Graphics=class extends Container{constructor(ie=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State.for2d(),this._geometry=ie||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Color(16777215),this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new _Graphics(this._geometry)}set blendMode(ie){this.state.blendMode=ie}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(ie){this._tintColor.setValue(ie)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(ie=null,ee=0,te,re=.5,ne=!1){return typeof ie=="number"&&(ie={width:ie,color:ee,alpha:te,alignment:re,native:ne}),this.lineTextureStyle(ie)}lineTextureStyle(ie){const ee={width:0,texture:Texture.WHITE,color:ie!=null&&ie.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10};ie=Object.assign(ee,ie),this.normalizeColor(ie),this.currentPath&&this.startPoly();const te=ie.width>0&&ie.alpha>0;return te?(ie.matrix&&(ie.matrix=ie.matrix.clone(),ie.matrix.invert()),Object.assign(this._lineStyle,{visible:te},ie)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const ie=this.currentPath.points,ee=this.currentPath.points.length;ee>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(ie[ee-2],ie[ee-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(ie,ee){return this.startPoly(),this.currentPath.points[0]=ie,this.currentPath.points[1]=ee,this}lineTo(ie,ee){this.currentPath||this.moveTo(0,0);const te=this.currentPath.points,re=te[te.length-2],ne=te[te.length-1];return(re!==ie||ne!==ee)&&te.push(ie,ee),this}_initCurve(ie=0,ee=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[ie,ee]):this.moveTo(ie,ee)}quadraticCurveTo(ie,ee,te,re){this._initCurve();const ne=this.currentPath.points;return ne.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(ie,ee,te,re,ne),this}bezierCurveTo(ie,ee,te,re,ne,se){return this._initCurve(),BezierUtils.curveTo(ie,ee,te,re,ne,se,this.currentPath.points),this}arcTo(ie,ee,te,re,ne){this._initCurve(ie,ee);const se=this.currentPath.points,ae=ArcUtils.curveTo(ie,ee,te,re,ne,se);if(ae){const{cx:oe,cy:le,radius:he,startAngle:ce,endAngle:de,anticlockwise:ue}=ae;this.arc(oe,le,he,ce,de,ue)}return this}arc(ie,ee,te,re,ne,se=!1){if(re===ne)return this;if(!se&&ne<=re?ne+=PI_2:se&&re<=ne&&(re+=PI_2),ne-re===0)return this;const oe=ie+Math.cos(re)*te,le=ee+Math.sin(re)*te,he=this._geometry.closePointEps;let ce=this.currentPath?this.currentPath.points:null;if(ce){const de=Math.abs(ce[ce.length-2]-oe),ue=Math.abs(ce[ce.length-1]-le);de<he&&ue<he||ce.push(oe,le)}else this.moveTo(oe,le),ce=this.currentPath.points;return ArcUtils.arc(oe,le,ie,ee,te,re,ne,se,ce),this}beginFill(ie=0,ee){return this.beginTextureFill({texture:Texture.WHITE,color:ie,alpha:ee})}normalizeColor(ie){var te,re;const ee=Color.shared.setValue((te=ie.color)!=null?te:0);ie.color=ee.toNumber(),(re=ie.alpha)!=null||(ie.alpha=ee.alpha)}beginTextureFill(ie){const ee={texture:Texture.WHITE,color:16777215,matrix:null};ie=Object.assign(ee,ie),this.normalizeColor(ie),this.currentPath&&this.startPoly();const te=ie.alpha>0;return te?(ie.matrix&&(ie.matrix=ie.matrix.clone(),ie.matrix.invert()),Object.assign(this._fillStyle,{visible:te},ie)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(ie,ee,te,re){return this.drawShape(new Rectangle(ie,ee,te,re))}drawRoundedRect(ie,ee,te,re,ne){return this.drawShape(new RoundedRectangle(ie,ee,te,re,ne))}drawCircle(ie,ee,te){return this.drawShape(new Circle(ie,ee,te))}drawEllipse(ie,ee,te,re){return this.drawShape(new Ellipse(ie,ee,te,re))}drawPolygon(...ie){let ee,te=!0;const re=ie[0];re.points?(te=re.closeStroke,ee=re.points):Array.isArray(ie[0])?ee=ie[0]:ee=ie;const ne=new Polygon(ee);return ne.closeStroke=te,this.drawShape(ne),this}drawShape(ie){return this._holeMode?this._geometry.drawHole(ie,this._matrix):this._geometry.drawShape(ie,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const ie=this._geometry.graphicsData;return ie.length===1&&ie[0].shape.type===SHAPES.RECT&&!ie[0].matrix&&!ie[0].holes.length&&!(ie[0].lineStyle.visible&&ie[0].lineStyle.width)}_render(ie){this.finishPoly();const ee=this._geometry;ee.updateBatches(),ee.batchable?(this.batchDirty!==ee.batchDirty&&this._populateBatches(),this._renderBatched(ie)):(ie.batch.flush(),this._renderDirect(ie))}_populateBatches(){const ie=this._geometry,ee=this.blendMode,te=ie.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=ie.batchDirty,this.batches.length=te,this.vertexData=new Float32Array(ie.points);for(let re=0;re<te;re++){const ne=ie.batches[re],se=ne.style.color,ae=new Float32Array(this.vertexData.buffer,ne.attribStart*4*2,ne.attribSize*2),oe=new Float32Array(ie.uvsFloat32.buffer,ne.attribStart*4*2,ne.attribSize*2),le=new Uint16Array(ie.indicesUint16.buffer,ne.start*2,ne.size),he={vertexData:ae,blendMode:ee,indices:le,uvs:oe,_batchRGB:Color.shared.setValue(se).toRgbArray(),_tintRGB:se,_texture:ne.style.texture,alpha:ne.style.alpha,worldAlpha:1};this.batches[re]=he}}_renderBatched(ie){if(!!this.batches.length){ie.batch.setObjectRenderer(ie.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let ee=0,te=this.batches.length;ee<te;ee++){const re=this.batches[ee];re.worldAlpha=this.worldAlpha*re.alpha,ie.plugins[this.pluginName].render(re)}}}_renderDirect(ie){const ee=this._resolveDirectShader(ie),te=this._geometry,re=this.worldAlpha,ne=ee.uniforms,se=te.drawCalls;ne.translationMatrix=this.transform.worldTransform,Color.shared.setValue(this._tintColor).premultiply(re).toArray(ne.tint),ie.shader.bind(ee),ie.geometry.bind(te,ee),ie.state.set(this.state);for(let ae=0,oe=se.length;ae<oe;ae++)this._renderDrawCallDirect(ie,te.drawCalls[ae])}_renderDrawCallDirect(ie,ee){const{texArray:te,type:re,size:ne,start:se}=ee,ae=te.count;for(let oe=0;oe<ae;oe++)ie.texture.bind(te.elements[oe],oe);ie.geometry.draw(re,ne,se)}_resolveDirectShader(ie){let ee=this.shader;const te=this.pluginName;if(!ee){if(!DEFAULT_SHADERS[te]){const{maxTextures:re}=ie.plugins[te],ne=new Int32Array(re);for(let oe=0;oe<re;oe++)ne[oe]=oe;const se={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:ne},!0)},ae=ie.plugins[te]._shader.program;DEFAULT_SHADERS[te]=new Shader(ae,se)}ee=DEFAULT_SHADERS[te]}return ee}_calculateBounds(){this.finishPoly();const ie=this._geometry;if(!ie.graphicsData.length)return;const{minX:ee,minY:te,maxX:re,maxY:ne}=ie.bounds;this._bounds.addFrame(this.transform,ee,te,re,ne)}containsPoint(ie){return this.worldTransform.applyInverse(ie,_Graphics._TEMP_POINT),this._geometry.containsPoint(_Graphics._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let ie=0;ie<this.batches.length;ie++){const ee=this.batches[ie];ee._tintRGB=Color.shared.setValue(this._tintColor).multiply(ee._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const ie=this.transform._worldID;if(this._transformID===ie)return;this._transformID=ie;const ee=this.transform.worldTransform,te=ee.a,re=ee.b,ne=ee.c,se=ee.d,ae=ee.tx,oe=ee.ty,le=this._geometry.points,he=this.vertexData;let ce=0;for(let de=0;de<le.length;de+=2){const ue=le[de],fe=le[de+1];he[ce++]=te*ue+ne*fe+ae,he[ce++]=se*fe+re*ue+oe}}closePath(){const ie=this.currentPath;return ie&&(ie.closeStroke=!0,this.finishPoly()),this}setMatrix(ie){return this._matrix=ie,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(ie){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(ie)}};let Graphics=_Graphics;Graphics.curves=curves,Graphics._TEMP_POINT=new Point;class MeshBatchUvs{constructor(ee,te){this.uvBuffer=ee,this.uvMatrix=te,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(ee){if(!ee&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const te=this.uvBuffer.data;(!this.data||this.data.length!==te.length)&&(this.data=new Float32Array(te.length)),this.uvMatrix.multiplyUvs(te,this.data),this._updateID++}}const tempPoint=new Point,tempPolygon=new Polygon,_Mesh=class extends Container{constructor(ie,ee,te,re=DRAW_MODES.TRIANGLES){super(),this.geometry=ie,this.shader=ee,this.state=te||State.for2d(),this.drawMode=re,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(ie){this._geometry!==ie&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=ie,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(ie){this.shader=ie}get material(){return this.shader}set blendMode(ie){this.state.blendMode=ie}get blendMode(){return this.state.blendMode}set roundPixels(ie){this._roundPixels!==ie&&(this._transformID=-1),this._roundPixels=ie}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(ie){this.shader.tint=ie}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(ie){this.shader.texture=ie}_render(ie){const ee=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&ee.length<_Mesh.BATCHABLE_SIZE*2?this._renderToBatch(ie):this._renderDefault(ie)}_renderDefault(ie){const ee=this.shader;ee.alpha=this.worldAlpha,ee.update&&ee.update(),ie.batch.flush(),ee.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),ie.shader.bind(ee),ie.state.set(this.state),ie.geometry.bind(this.geometry,ee),ie.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(ie){const ee=this.geometry,te=this.shader;te.uvMatrix&&(te.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=ee.indexBuffer.data,this._tintRGB=te._tintRGB,this._texture=te.texture;const re=this.material.pluginName;ie.batch.setObjectRenderer(ie.plugins[re]),ie.plugins[re].render(this)}calculateVertices(){const ee=this.geometry.buffers[0],te=ee.data,re=ee._updateID;if(re===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==te.length&&(this.vertexData=new Float32Array(te.length));const ne=this.transform.worldTransform,se=ne.a,ae=ne.b,oe=ne.c,le=ne.d,he=ne.tx,ce=ne.ty,de=this.vertexData;for(let ue=0;ue<de.length/2;ue++){const fe=te[ue*2],pe=te[ue*2+1];de[ue*2]=se*fe+oe*pe+he,de[ue*2+1]=ae*fe+le*pe+ce}if(this._roundPixels){const ue=settings.RESOLUTION;for(let fe=0;fe<de.length;++fe)de[fe]=Math.round(de[fe]*ue)/ue}this.vertexDirty=re}calculateUvs(){const ie=this.geometry.buffers[1],ee=this.shader;ee.uvMatrix.isSimple?this.uvs=ie.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(ie,ee.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(ie){if(!this.getBounds().contains(ie.x,ie.y))return!1;this.worldTransform.applyInverse(ie,tempPoint);const ee=this.geometry.getBuffer("aVertexPosition").data,te=tempPolygon.points,re=this.geometry.getIndex().data,ne=re.length,se=this.drawMode===4?3:1;for(let ae=0;ae+2<ne;ae+=se){const oe=re[ae]*2,le=re[ae+1]*2,he=re[ae+2]*2;if(te[0]=ee[oe],te[1]=ee[oe+1],te[2]=ee[le],te[3]=ee[le+1],te[4]=ee[he],te[5]=ee[he+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1}destroy(ie){super.destroy(ie),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Mesh=_Mesh;Mesh.BATCHABLE_SIZE=100;class MeshGeometry extends Geometry{constructor(ee,te,re){super();const ne=new Buffer(ee),se=new Buffer(te,!0),ae=new Buffer(re,!0,!0);this.addAttribute("aVertexPosition",ne,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",se,2,!1,TYPES.FLOAT).addIndex(ae),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var fragment$1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(ee,te){const re={uSampler:ee,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};te=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},te),te.uniforms&&Object.assign(re,te.uniforms),super(te.program||Program.from(vertex$1,fragment$1),re),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(ee),this.batchable=te.program===void 0,this.pluginName=te.pluginName,this._tintColor=new Color(te.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=te.alpha}get texture(){return this.uniforms.uSampler}set texture(ee){this.uniforms.uSampler!==ee&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!ee.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=ee,this.uvMatrix.texture=ee)}set alpha(ee){ee!==this._alpha&&(this._alpha=ee,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(ee){ee!==this.tint&&(this._tintColor.setValue(ee),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const te=this.texture.baseTexture.alphaMode;Color.shared.setValue(this._tintColor).premultiply(this._alpha,te).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ParticleBuffer{constructor(ee,te,re){this.geometry=new Geometry,this.indexBuffer=null,this.size=re,this.dynamicProperties=[],this.staticProperties=[];for(let ne=0;ne<ee.length;++ne){let se=ee[ne];se={attributeName:se.attributeName,size:se.size,uploadFunction:se.uploadFunction,type:se.type||TYPES.FLOAT,offset:se.offset},te[ne]?this.dynamicProperties.push(se):this.staticProperties.push(se)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const ee=this.geometry;let te=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),ee.addIndex(this.indexBuffer),this.dynamicStride=0;for(let ae=0;ae<this.dynamicProperties.length;++ae){const oe=this.dynamicProperties[ae];oe.offset=te,te+=oe.size,this.dynamicStride+=oe.size}const re=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(re),this.dynamicDataUint32=new Uint32Array(re),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);let ne=0;this.staticStride=0;for(let ae=0;ae<this.staticProperties.length;++ae){const oe=this.staticProperties[ae];oe.offset=ne,ne+=oe.size,this.staticStride+=oe.size}const se=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(se),this.staticDataUint32=new Uint32Array(se),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(let ae=0;ae<this.dynamicProperties.length;++ae){const oe=this.dynamicProperties[ae];ee.addAttribute(oe.attributeName,this.dynamicBuffer,0,oe.type===TYPES.UNSIGNED_BYTE,oe.type,this.dynamicStride*4,oe.offset*4)}for(let ae=0;ae<this.staticProperties.length;++ae){const oe=this.staticProperties[ae];ee.addAttribute(oe.attributeName,this.staticBuffer,0,oe.type===TYPES.UNSIGNED_BYTE,oe.type,this.staticStride*4,oe.offset*4)}}uploadDynamic(ee,te,re){for(let ne=0;ne<this.dynamicProperties.length;ne++){const se=this.dynamicProperties[ne];se.uploadFunction(ee,te,re,se.type===TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,se.offset)}this.dynamicBuffer._updateID++}uploadStatic(ee,te,re){for(let ne=0;ne<this.staticProperties.length;ne++){const se=this.staticProperties[ne];se.uploadFunction(ee,te,re,se.type===TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,se.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fragment=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ParticleRenderer extends ObjectRenderer{constructor(ee){super(ee),this.shader=null,this.properties=null,this.tempMatrix=new Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Shader.from(vertex,fragment,{}),this.state=State.for2d()}render(ee){const te=ee.children,re=ee._maxSize,ne=ee._batchSize,se=this.renderer;let ae=te.length;if(ae===0)return;ae>re&&!ee.autoResize&&(ae=re);let oe=ee._buffers;oe||(oe=ee._buffers=this.generateBuffers(ee));const le=te[0]._texture.baseTexture,he=le.alphaMode>0;this.state.blendMode=correctBlendMode(ee.blendMode,he),se.state.set(this.state);const ce=se.gl,de=ee.worldTransform.copyTo(this.tempMatrix);de.prepend(se.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=de.toArray(!0),this.shader.uniforms.uColor=Color.shared.setValue(ee.tintRgb).premultiply(ee.worldAlpha,he).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=le,this.renderer.shader.bind(this.shader);let ue=!1;for(let fe=0,pe=0;fe<ae;fe+=ne,pe+=1){let me=ae-fe;me>ne&&(me=ne),pe>=oe.length&&oe.push(this._generateOneMoreBuffer(ee));const xe=oe[pe];xe.uploadDynamic(te,fe,me);const ge=ee._bufferUpdateIDs[pe]||0;ue=ue||xe._updateID<ge,ue&&(xe._updateID=ee._updateID,xe.uploadStatic(te,fe,me)),se.geometry.bind(xe.geometry),ce.drawElements(ce.TRIANGLES,me*6,ce.UNSIGNED_SHORT,0)}}generateBuffers(ee){const te=[],re=ee._maxSize,ne=ee._batchSize,se=ee._properties;for(let ae=0;ae<re;ae+=ne)te.push(new ParticleBuffer(this.properties,se,ne));return te}_generateOneMoreBuffer(ee){const te=ee._batchSize,re=ee._properties;return new ParticleBuffer(this.properties,re,te)}uploadVertices(ee,te,re,ne,se,ae){let oe=0,le=0,he=0,ce=0;for(let de=0;de<re;++de){const ue=ee[te+de],fe=ue._texture,pe=ue.scale.x,me=ue.scale.y,xe=fe.trim,ge=fe.orig;xe?(le=xe.x-ue.anchor.x*ge.width,oe=le+xe.width,ce=xe.y-ue.anchor.y*ge.height,he=ce+xe.height):(oe=ge.width*(1-ue.anchor.x),le=ge.width*-ue.anchor.x,he=ge.height*(1-ue.anchor.y),ce=ge.height*-ue.anchor.y),ne[ae]=le*pe,ne[ae+1]=ce*me,ne[ae+se]=oe*pe,ne[ae+se+1]=ce*me,ne[ae+se*2]=oe*pe,ne[ae+se*2+1]=he*me,ne[ae+se*3]=le*pe,ne[ae+se*3+1]=he*me,ae+=se*4}}uploadPosition(ee,te,re,ne,se,ae){for(let oe=0;oe<re;oe++){const le=ee[te+oe].position;ne[ae]=le.x,ne[ae+1]=le.y,ne[ae+se]=le.x,ne[ae+se+1]=le.y,ne[ae+se*2]=le.x,ne[ae+se*2+1]=le.y,ne[ae+se*3]=le.x,ne[ae+se*3+1]=le.y,ae+=se*4}}uploadRotation(ee,te,re,ne,se,ae){for(let oe=0;oe<re;oe++){const le=ee[te+oe].rotation;ne[ae]=le,ne[ae+se]=le,ne[ae+se*2]=le,ne[ae+se*3]=le,ae+=se*4}}uploadUvs(ee,te,re,ne,se,ae){for(let oe=0;oe<re;++oe){const le=ee[te+oe]._texture._uvs;le?(ne[ae]=le.x0,ne[ae+1]=le.y0,ne[ae+se]=le.x1,ne[ae+se+1]=le.y1,ne[ae+se*2]=le.x2,ne[ae+se*2+1]=le.y2,ne[ae+se*3]=le.x3,ne[ae+se*3+1]=le.y3,ae+=se*4):(ne[ae]=0,ne[ae+1]=0,ne[ae+se]=0,ne[ae+se+1]=0,ne[ae+se*2]=0,ne[ae+se*2+1]=0,ne[ae+se*3]=0,ne[ae+se*3+1]=0,ae+=se*4)}}uploadTint(ee,te,re,ne,se,ae){for(let oe=0;oe<re;++oe){const le=ee[te+oe],he=Color.shared.setValue(le._tintRGB).toPremultiplied(le.alpha,le.texture.baseTexture.alphaMode>0);ne[ae]=he,ne[ae+se]=he,ne[ae+se*2]=he,ne[ae+se*3]=he,ae+=se*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ParticleRenderer.extension={name:"particle",type:ExtensionType.RendererPlugin},extensions$1.add(ParticleRenderer);var TEXT_GRADIENT=(ie=>(ie[ie.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",ie[ie.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",ie))(TEXT_GRADIENT||{});const contextSettings={willReadFrequently:!0},_TextMetrics=class{static get experimentalLetterSpacingSupported(){let ie=_TextMetrics._experimentalLetterSpacingSupported;if(ie!==void 0){const ee=settings.ADAPTER.getCanvasRenderingContext2D().prototype;ie=_TextMetrics._experimentalLetterSpacingSupported="letterSpacing"in ee||"textLetterSpacing"in ee}return ie}constructor(ie,ee,te,re,ne,se,ae,oe,le){this.text=ie,this.style=ee,this.width=te,this.height=re,this.lines=ne,this.lineWidths=se,this.lineHeight=ae,this.maxLineWidth=oe,this.fontProperties=le}static measureText(ie,ee,te,re=_TextMetrics._canvas){te=te==null?ee.wordWrap:te;const ne=ee.toFontString(),se=_TextMetrics.measureFont(ne);se.fontSize===0&&(se.fontSize=ee.fontSize,se.ascent=ee.fontSize);const ae=re.getContext("2d",contextSettings);ae.font=ne;const le=(te?_TextMetrics.wordWrap(ie,ee,re):ie).split(/(?:\r\n|\r|\n)/),he=new Array(le.length);let ce=0;for(let pe=0;pe<le.length;pe++){const me=_TextMetrics._measureText(le[pe],ee.letterSpacing,ae);he[pe]=me,ce=Math.max(ce,me)}let de=ce+ee.strokeThickness;ee.dropShadow&&(de+=ee.dropShadowDistance);const ue=ee.lineHeight||se.fontSize+ee.strokeThickness;let fe=Math.max(ue,se.fontSize+ee.strokeThickness*2)+(le.length-1)*(ue+ee.leading);return ee.dropShadow&&(fe+=ee.dropShadowDistance),new _TextMetrics(ie,ee,de,fe,le,he,ue+ee.leading,ce,se)}static _measureText(ie,ee,te){let re=!1;_TextMetrics.experimentalLetterSpacingSupported&&(_TextMetrics.experimentalLetterSpacing?(te.letterSpacing=`${ee}px`,te.textLetterSpacing=`${ee}px`,re=!0):(te.letterSpacing="0px",te.textLetterSpacing="0px"));let ne=te.measureText(ie).width;return ne>0&&(re?ne-=ee:ne+=(_TextMetrics.graphemeSegmenter(ie).length-1)*ee),ne}static wordWrap(ie,ee,te=_TextMetrics._canvas){const re=te.getContext("2d",contextSettings);let ne=0,se="",ae="";const oe=Object.create(null),{letterSpacing:le,whiteSpace:he}=ee,ce=_TextMetrics.collapseSpaces(he),de=_TextMetrics.collapseNewlines(he);let ue=!ce;const fe=ee.wordWrapWidth+le,pe=_TextMetrics.tokenize(ie);for(let me=0;me<pe.length;me++){let xe=pe[me];if(_TextMetrics.isNewline(xe)){if(!de){ae+=_TextMetrics.addLine(se),ue=!ce,se="",ne=0;continue}xe=" "}if(ce){const _e=_TextMetrics.isBreakingSpace(xe),ve=_TextMetrics.isBreakingSpace(se[se.length-1]);if(_e&&ve)continue}const ge=_TextMetrics.getFromCache(xe,le,oe,re);if(ge>fe)if(se!==""&&(ae+=_TextMetrics.addLine(se),se="",ne=0),_TextMetrics.canBreakWords(xe,ee.breakWords)){const _e=_TextMetrics.wordWrapSplit(xe);for(let ve=0;ve<_e.length;ve++){let ye=_e[ve],be=ye,we=1;for(;_e[ve+we];){const Te=_e[ve+we];if(!_TextMetrics.canBreakChars(be,Te,xe,ve,ee.breakWords))ye+=Te;else break;be=Te,we++}ve+=we-1;const Se=_TextMetrics.getFromCache(ye,le,oe,re);Se+ne>fe&&(ae+=_TextMetrics.addLine(se),ue=!1,se="",ne=0),se+=ye,ne+=Se}}else{se.length>0&&(ae+=_TextMetrics.addLine(se),se="",ne=0);const _e=me===pe.length-1;ae+=_TextMetrics.addLine(xe,!_e),ue=!1,se="",ne=0}else ge+ne>fe&&(ue=!1,ae+=_TextMetrics.addLine(se),se="",ne=0),(se.length>0||!_TextMetrics.isBreakingSpace(xe)||ue)&&(se+=xe,ne+=ge)}return ae+=_TextMetrics.addLine(se,!1),ae}static addLine(ie,ee=!0){return ie=_TextMetrics.trimRight(ie),ie=ee?`${ie}
`:ie,ie}static getFromCache(ie,ee,te,re){let ne=te[ie];return typeof ne!="number"&&(ne=_TextMetrics._measureText(ie,ee,re)+ee,te[ie]=ne),ne}static collapseSpaces(ie){return ie==="normal"||ie==="pre-line"}static collapseNewlines(ie){return ie==="normal"}static trimRight(ie){if(typeof ie!="string")return"";for(let ee=ie.length-1;ee>=0;ee--){const te=ie[ee];if(!_TextMetrics.isBreakingSpace(te))break;ie=ie.slice(0,-1)}return ie}static isNewline(ie){return typeof ie!="string"?!1:_TextMetrics._newlines.includes(ie.charCodeAt(0))}static isBreakingSpace(ie,ee){return typeof ie!="string"?!1:_TextMetrics._breakingSpaces.includes(ie.charCodeAt(0))}static tokenize(ie){const ee=[];let te="";if(typeof ie!="string")return ee;for(let re=0;re<ie.length;re++){const ne=ie[re],se=ie[re+1];if(_TextMetrics.isBreakingSpace(ne,se)||_TextMetrics.isNewline(ne)){te!==""&&(ee.push(te),te=""),ee.push(ne);continue}te+=ne}return te!==""&&ee.push(te),ee}static canBreakWords(ie,ee){return ee}static canBreakChars(ie,ee,te,re,ne){return!0}static wordWrapSplit(ie){return _TextMetrics.graphemeSegmenter(ie)}static measureFont(ie){if(_TextMetrics._fonts[ie])return _TextMetrics._fonts[ie];const ee={ascent:0,descent:0,fontSize:0},te=_TextMetrics._canvas,re=_TextMetrics._context;re.font=ie;const ne=_TextMetrics.METRICS_STRING+_TextMetrics.BASELINE_SYMBOL,se=Math.ceil(re.measureText(ne).width);let ae=Math.ceil(re.measureText(_TextMetrics.BASELINE_SYMBOL).width);const oe=Math.ceil(_TextMetrics.HEIGHT_MULTIPLIER*ae);if(ae=ae*_TextMetrics.BASELINE_MULTIPLIER|0,se===0||oe===0)return _TextMetrics._fonts[ie]=ee,ee;te.width=se,te.height=oe,re.fillStyle="#f00",re.fillRect(0,0,se,oe),re.font=ie,re.textBaseline="alphabetic",re.fillStyle="#000",re.fillText(ne,0,ae);const le=re.getImageData(0,0,se,oe).data,he=le.length,ce=se*4;let de=0,ue=0,fe=!1;for(de=0;de<ae;++de){for(let pe=0;pe<ce;pe+=4)if(le[ue+pe]!==255){fe=!0;break}if(!fe)ue+=ce;else break}for(ee.ascent=ae-de,ue=he-ce,fe=!1,de=oe;de>ae;--de){for(let pe=0;pe<ce;pe+=4)if(le[ue+pe]!==255){fe=!0;break}if(!fe)ue-=ce;else break}return ee.descent=de-ae,ee.fontSize=ee.ascent+ee.descent,_TextMetrics._fonts[ie]=ee,ee}static clearMetrics(ie=""){ie?delete _TextMetrics._fonts[ie]:_TextMetrics._fonts={}}static get _canvas(){if(!_TextMetrics.__canvas){let ie;try{const ee=new OffscreenCanvas(0,0),te=ee.getContext("2d",contextSettings);if(te!=null&&te.measureText)return _TextMetrics.__canvas=ee,ee;ie=settings.ADAPTER.createCanvas()}catch{ie=settings.ADAPTER.createCanvas()}ie.width=ie.height=10,_TextMetrics.__canvas=ie}return _TextMetrics.__canvas}static get _context(){return _TextMetrics.__context||(_TextMetrics.__context=_TextMetrics._canvas.getContext("2d",contextSettings)),_TextMetrics.__context}};let TextMetrics=_TextMetrics;TextMetrics.METRICS_STRING="|\xC9q\xC5",TextMetrics.BASELINE_SYMBOL="M",TextMetrics.BASELINE_MULTIPLIER=1.4,TextMetrics.HEIGHT_MULTIPLIER=2,TextMetrics.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const ie=new Intl.Segmenter;return ee=>[...ie.segment(ee)].map(te=>te.segment)}return ie=>[...ie]})(),TextMetrics.experimentalLetterSpacing=!1,TextMetrics._fonts={},TextMetrics._newlines=[10,13],TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_TextStyle=class{constructor(ie){this.styleID=0,this.reset(),deepCopyProperties(this,ie,ie)}clone(){const ie={};return deepCopyProperties(ie,this,_TextStyle.defaultStyle),new _TextStyle(ie)}reset(){deepCopyProperties(this,_TextStyle.defaultStyle,_TextStyle.defaultStyle)}get align(){return this._align}set align(ie){this._align!==ie&&(this._align=ie,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(ie){this._breakWords!==ie&&(this._breakWords=ie,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(ie){this._dropShadow!==ie&&(this._dropShadow=ie,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(ie){this._dropShadowAlpha!==ie&&(this._dropShadowAlpha=ie,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(ie){this._dropShadowAngle!==ie&&(this._dropShadowAngle=ie,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(ie){this._dropShadowBlur!==ie&&(this._dropShadowBlur=ie,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(ie){const ee=getColor(ie);this._dropShadowColor!==ee&&(this._dropShadowColor=ee,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(ie){this._dropShadowDistance!==ie&&(this._dropShadowDistance=ie,this.styleID++)}get fill(){return this._fill}set fill(ie){const ee=getColor(ie);this._fill!==ee&&(this._fill=ee,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(ie){this._fillGradientType!==ie&&(this._fillGradientType=ie,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(ie){areArraysEqual(this._fillGradientStops,ie)||(this._fillGradientStops=ie,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(ie){this.fontFamily!==ie&&(this._fontFamily=ie,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(ie){this._fontSize!==ie&&(this._fontSize=ie,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(ie){this._fontStyle!==ie&&(this._fontStyle=ie,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(ie){this._fontVariant!==ie&&(this._fontVariant=ie,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(ie){this._fontWeight!==ie&&(this._fontWeight=ie,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(ie){this._letterSpacing!==ie&&(this._letterSpacing=ie,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(ie){this._lineHeight!==ie&&(this._lineHeight=ie,this.styleID++)}get leading(){return this._leading}set leading(ie){this._leading!==ie&&(this._leading=ie,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(ie){this._lineJoin!==ie&&(this._lineJoin=ie,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(ie){this._miterLimit!==ie&&(this._miterLimit=ie,this.styleID++)}get padding(){return this._padding}set padding(ie){this._padding!==ie&&(this._padding=ie,this.styleID++)}get stroke(){return this._stroke}set stroke(ie){const ee=getColor(ie);this._stroke!==ee&&(this._stroke=ee,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(ie){this._strokeThickness!==ie&&(this._strokeThickness=ie,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(ie){this._textBaseline!==ie&&(this._textBaseline=ie,this.styleID++)}get trim(){return this._trim}set trim(ie){this._trim!==ie&&(this._trim=ie,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(ie){this._whiteSpace!==ie&&(this._whiteSpace=ie,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(ie){this._wordWrap!==ie&&(this._wordWrap=ie,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(ie){this._wordWrapWidth!==ie&&(this._wordWrapWidth=ie,this.styleID++)}toFontString(){const ie=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let ee=this.fontFamily;Array.isArray(this.fontFamily)||(ee=this.fontFamily.split(","));for(let te=ee.length-1;te>=0;te--){let re=ee[te].trim();!/([\"\'])[^\'\"]+\1/.test(re)&&!genericFontFamilies.includes(re)&&(re=`"${re}"`),ee[te]=re}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${ie} ${ee.join(",")}`}};let TextStyle=_TextStyle;TextStyle.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function getColor(ie){const ee=Color.shared;return Array.isArray(ie)?ie.map(te=>ee.setValue(te).toHex()):ee.setValue(ie).toHex()}function areArraysEqual(ie,ee){if(!Array.isArray(ie)||!Array.isArray(ee)||ie.length!==ee.length)return!1;for(let te=0;te<ie.length;++te)if(ie[te]!==ee[te])return!1;return!0}function deepCopyProperties(ie,ee,te){for(const re in te)Array.isArray(ee[re])?ie[re]=ee[re].slice():ie[re]=ee[re]}const defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_Text=class extends Sprite{constructor(ie,ee,te){var se;let re=!1;te||(te=settings.ADAPTER.createCanvas(),re=!0),te.width=3,te.height=3;const ne=Texture.from(te);ne.orig=new Rectangle,ne.trim=new Rectangle,super(ne),this._ownCanvas=re,this.canvas=te,this.context=te.getContext("2d",{willReadFrequently:!0}),this._resolution=(se=_Text.defaultResolution)!=null?se:settings.RESOLUTION,this._autoResolution=_Text.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=ie,this.style=ee,this.localStyleID=-1}static get experimentalLetterSpacing(){return TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(ie){deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),TextMetrics.experimentalLetterSpacing=ie}updateText(ie){const ee=this._style;if(this.localStyleID!==ee.styleID&&(this.dirty=!0,this.localStyleID=ee.styleID),!this.dirty&&ie)return;this._font=this._style.toFontString();const te=this.context,re=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),ne=re.width,se=re.height,ae=re.lines,oe=re.lineHeight,le=re.lineWidths,he=re.maxLineWidth,ce=re.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,ne)+ee.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,se)+ee.padding*2)*this._resolution),te.scale(this._resolution,this._resolution),te.clearRect(0,0,this.canvas.width,this.canvas.height),te.font=this._font,te.lineWidth=ee.strokeThickness,te.textBaseline=ee.textBaseline,te.lineJoin=ee.lineJoin,te.miterLimit=ee.miterLimit;let de,ue;const fe=ee.dropShadow?2:1;for(let pe=0;pe<fe;++pe){const me=ee.dropShadow&&pe===0,xe=me?Math.ceil(Math.max(1,se)+ee.padding*2):0,ge=xe*this._resolution;if(me){te.fillStyle="black",te.strokeStyle="black";const ve=ee.dropShadowColor,ye=ee.dropShadowBlur*this._resolution,be=ee.dropShadowDistance*this._resolution;te.shadowColor=Color.shared.setValue(ve).setAlpha(ee.dropShadowAlpha).toRgbaString(),te.shadowBlur=ye,te.shadowOffsetX=Math.cos(ee.dropShadowAngle)*be,te.shadowOffsetY=Math.sin(ee.dropShadowAngle)*be+ge}else te.fillStyle=this._generateFillStyle(ee,ae,re),te.strokeStyle=ee.stroke,te.shadowColor="black",te.shadowBlur=0,te.shadowOffsetX=0,te.shadowOffsetY=0;let _e=(oe-ce.fontSize)/2;oe-ce.fontSize<0&&(_e=0);for(let ve=0;ve<ae.length;ve++)de=ee.strokeThickness/2,ue=ee.strokeThickness/2+ve*oe+ce.ascent+_e,ee.align==="right"?de+=he-le[ve]:ee.align==="center"&&(de+=(he-le[ve])/2),ee.stroke&&ee.strokeThickness&&this.drawLetterSpacing(ae[ve],de+ee.padding,ue+ee.padding-xe,!0),ee.fill&&this.drawLetterSpacing(ae[ve],de+ee.padding,ue+ee.padding-xe)}this.updateTexture()}drawLetterSpacing(ie,ee,te,re=!1){const se=this._style.letterSpacing;let ae=!1;if(TextMetrics.experimentalLetterSpacingSupported&&(TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${se}px`,this.context.textLetterSpacing=`${se}px`,ae=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),se===0||ae){re?this.context.strokeText(ie,ee,te):this.context.fillText(ie,ee,te);return}let oe=ee;const le=TextMetrics.graphemeSegmenter(ie);let he=this.context.measureText(ie).width,ce=0;for(let de=0;de<le.length;++de){const ue=le[de];re?this.context.strokeText(ue,oe,te):this.context.fillText(ue,oe,te);let fe="";for(let pe=de+1;pe<le.length;++pe)fe+=le[pe];ce=this.context.measureText(fe).width,oe+=he-ce+se,he=ce}}updateTexture(){const ie=this.canvas;if(this._style.trim){const se=trimCanvas(ie);se.data&&(ie.width=se.width,ie.height=se.height,this.context.putImageData(se.data,0,0))}const ee=this._texture,te=this._style,re=te.trim?0:te.padding,ne=ee.baseTexture;ee.trim.width=ee._frame.width=ie.width/this._resolution,ee.trim.height=ee._frame.height=ie.height/this._resolution,ee.trim.x=-re,ee.trim.y=-re,ee.orig.width=ee._frame.width-re*2,ee.orig.height=ee._frame.height-re*2,this._onTextureUpdate(),ne.setRealSize(ie.width,ie.height,this._resolution),ee.updateUvs(),this.dirty=!1}_render(ie){this._autoResolution&&this._resolution!==ie.resolution&&(this._resolution=ie.resolution,this.dirty=!0),this.updateText(!0),super._render(ie)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(ie,ee){return this.updateText(!0),this._textureID===-1&&(ie=!1),super.getBounds(ie,ee)}getLocalBounds(ie){return this.updateText(!0),super.getLocalBounds.call(this,ie)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(ie,ee,te){const re=ie.fill;if(Array.isArray(re)){if(re.length===1)return re[0]}else return re;let ne;const se=ie.dropShadow?ie.dropShadowDistance:0,ae=ie.padding||0,oe=this.canvas.width/this._resolution-se-ae*2,le=this.canvas.height/this._resolution-se-ae*2,he=re.slice(),ce=ie.fillGradientStops.slice();if(!ce.length){const de=he.length+1;for(let ue=1;ue<de;++ue)ce.push(ue/de)}if(he.unshift(re[0]),ce.unshift(0),he.push(re[re.length-1]),ce.push(1),ie.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){ne=this.context.createLinearGradient(oe/2,ae,oe/2,le+ae);const de=te.fontProperties.fontSize+ie.strokeThickness;for(let ue=0;ue<ee.length;ue++){const fe=te.lineHeight*(ue-1)+de,pe=te.lineHeight*ue;let me=pe;ue>0&&fe>pe&&(me=(pe+fe)/2);const xe=pe+de,ge=te.lineHeight*(ue+1);let _e=xe;ue+1<ee.length&&ge<xe&&(_e=(xe+ge)/2);const ve=(_e-me)/le;for(let ye=0;ye<he.length;ye++){let be=0;typeof ce[ye]=="number"?be=ce[ye]:be=ye/he.length;let we=Math.min(1,Math.max(0,me/le+be*ve));we=Number(we.toFixed(5)),ne.addColorStop(we,he[ye])}}}else{ne=this.context.createLinearGradient(ae,le/2,oe+ae,le/2);const de=he.length+1;let ue=1;for(let fe=0;fe<he.length;fe++){let pe;typeof ce[fe]=="number"?pe=ce[fe]:pe=ue/de,ne.addColorStop(pe,he[fe]),ue++}}return ne}destroy(ie){typeof ie=="boolean"&&(ie={children:ie}),ie=Object.assign({},defaultDestroyOptions,ie),super.destroy(ie),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(ie){this.updateText(!0);const ee=sign(this.scale.x)||1;this.scale.x=ee*ie/this._texture.orig.width,this._width=ie}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(ie){this.updateText(!0);const ee=sign(this.scale.y)||1;this.scale.y=ee*ie/this._texture.orig.height,this._height=ie}get style(){return this._style}set style(ie){ie=ie||{},ie instanceof TextStyle?this._style=ie:this._style=new TextStyle(ie),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(ie){ie=String(ie==null?"":ie),this._text!==ie&&(this._text=ie,this.dirty=!0)}get resolution(){return this._resolution}set resolution(ie){this._autoResolution=!1,this._resolution!==ie&&(this._resolution=ie,this.dirty=!0)}};let Text=_Text;Text.defaultAutoResolution=!0;class CountLimiter{constructor(ee){this.maxItemsPerFrame=ee,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function findMultipleBaseTextures(ie,ee){var re;let te=!1;if((re=ie==null?void 0:ie._textures)!=null&&re.length){for(let ne=0;ne<ie._textures.length;ne++)if(ie._textures[ne]instanceof Texture){const se=ie._textures[ne].baseTexture;ee.includes(se)||(ee.push(se),te=!0)}}return te}function findBaseTexture(ie,ee){if(ie.baseTexture instanceof BaseTexture){const te=ie.baseTexture;return ee.includes(te)||ee.push(te),!0}return!1}function findTexture(ie,ee){if(ie._texture&&ie._texture instanceof Texture){const te=ie._texture.baseTexture;return ee.includes(te)||ee.push(te),!0}return!1}function drawText(ie,ee){return ee instanceof Text?(ee.updateText(!0),!0):!1}function calculateTextStyle(ie,ee){if(ee instanceof TextStyle){const te=ee.toFontString();return TextMetrics.measureFont(te),!0}return!1}function findText(ie,ee){if(ie instanceof Text){ee.includes(ie.style)||ee.push(ie.style),ee.includes(ie)||ee.push(ie);const te=ie._texture.baseTexture;return ee.includes(te)||ee.push(te),!0}return!1}function findTextStyle(ie,ee){return ie instanceof TextStyle?(ee.includes(ie)||ee.push(ie),!0):!1}const _BasePrepare=class{constructor(ie){this.limiter=new CountLimiter(_BasePrepare.uploadsPerFrame),this.renderer=ie,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{!this.queue||this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(ie){return new Promise(ee=>{ie&&this.add(ie),this.queue.length?(this.completes.push(ee),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):ee()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const ie=this.queue[0];let ee=!1;if(ie&&!ie._destroyed){for(let te=0,re=this.uploadHooks.length;te<re;te++)if(this.uploadHooks[te](this.uploadHookHelper,ie)){this.queue.shift(),ee=!0;break}}ee||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const ie=this.completes.slice(0);this.completes.length=0;for(let ee=0,te=ie.length;ee<te;ee++)ie[ee]()}}registerFindHook(ie){return ie&&this.addHooks.push(ie),this}registerUploadHook(ie){return ie&&this.uploadHooks.push(ie),this}add(ie){for(let ee=0,te=this.addHooks.length;ee<te&&!this.addHooks[ee](ie,this.queue);ee++);if(ie instanceof Container)for(let ee=ie.children.length-1;ee>=0;ee--)this.add(ie.children[ee]);return this}destroy(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let BasePrepare=_BasePrepare;BasePrepare.uploadsPerFrame=4,Object.defineProperties(settings,{UPLOADS_PER_FRAME:{get(){return BasePrepare.uploadsPerFrame},set(ie){deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),BasePrepare.uploadsPerFrame=ie}}});function uploadBaseTextures(ie,ee){return ee instanceof BaseTexture?(ee._glTextures[ie.CONTEXT_UID]||ie.texture.bind(ee),!0):!1}function uploadGraphics(ie,ee){if(!(ee instanceof Graphics))return!1;const{geometry:te}=ee;ee.finishPoly(),te.updateBatches();const{batches:re}=te;for(let ne=0;ne<re.length;ne++){const{texture:se}=re[ne].style;se&&uploadBaseTextures(ie,se.baseTexture)}return te.batchable||ie.geometry.bind(te,ee._resolveDirectShader(ie)),!0}function findGraphics(ie,ee){return ie instanceof Graphics?(ee.push(ie),!0):!1}class Prepare extends BasePrepare{constructor(ee){super(ee),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}}Prepare.extension={name:"prepare",type:ExtensionType.RendererSystem},extensions$1.add(Prepare),new Point;var gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const tempMat=new Matrix;class TilingSpriteRenderer extends ObjectRenderer{constructor(ee){super(ee),ee.runners.contextChange.add(this),this.quad=new QuadUv,this.state=State.for2d()}contextChange(){const ee=this.renderer,te={globals:ee.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,te),this.shader=ee.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,te):Shader.from(gl1VertexSrc,gl1FragmentSrc,te)}render(ee){const te=this.renderer,re=this.quad;let ne=re.vertices;ne[0]=ne[6]=ee._width*-ee.anchor.x,ne[1]=ne[3]=ee._height*-ee.anchor.y,ne[2]=ne[4]=ee._width*(1-ee.anchor.x),ne[5]=ne[7]=ee._height*(1-ee.anchor.y);const se=ee.uvRespectAnchor?ee.anchor.x:0,ae=ee.uvRespectAnchor?ee.anchor.y:0;ne=re.uvs,ne[0]=ne[6]=-se,ne[1]=ne[3]=-ae,ne[2]=ne[4]=1-se,ne[5]=ne[7]=1-ae,re.invalidate();const oe=ee._texture,le=oe.baseTexture,he=le.alphaMode>0,ce=ee.tileTransform.localTransform,de=ee.uvMatrix;let ue=le.isPowerOfTwo&&oe.frame.width===le.width&&oe.frame.height===le.height;ue&&(le._glTextures[te.CONTEXT_UID]?ue=le.wrapMode!==WRAP_MODES.CLAMP:le.wrapMode===WRAP_MODES.CLAMP&&(le.wrapMode=WRAP_MODES.REPEAT));const fe=ue?this.simpleShader:this.shader,pe=oe.width,me=oe.height,xe=ee._width,ge=ee._height;tempMat.set(ce.a*pe/xe,ce.b*pe/ge,ce.c*me/xe,ce.d*me/ge,ce.tx/xe,ce.ty/ge),tempMat.invert(),ue?tempMat.prepend(de.mapCoord):(fe.uniforms.uMapCoord=de.mapCoord.toArray(!0),fe.uniforms.uClampFrame=de.uClampFrame,fe.uniforms.uClampOffset=de.uClampOffset),fe.uniforms.uTransform=tempMat.toArray(!0),fe.uniforms.uColor=Color.shared.setValue(ee.tint).premultiply(ee.worldAlpha,he).toArray(fe.uniforms.uColor),fe.uniforms.translationMatrix=ee.transform.worldTransform.toArray(!0),fe.uniforms.uSampler=oe,te.shader.bind(fe),te.geometry.bind(re),this.state.blendMode=correctBlendMode(ee.blendMode,he),te.state.set(this.state),te.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}TilingSpriteRenderer.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin},extensions$1.add(TilingSpriteRenderer);const _Spritesheet=class{constructor(ie,ee,te=null){this.linkedSheets=[],this._texture=ie instanceof Texture?ie:null,this.baseTexture=ie instanceof BaseTexture?ie:this._texture.baseTexture,this.textures={},this.animations={},this.data=ee;const re=this.baseTexture.resource;this.resolution=this._updateResolution(te||(re?re.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(ie=null){const{scale:ee}=this.data.meta;let te=getResolutionOfUrl(ie,null);return te===null&&(te=parseFloat(ee!=null?ee:"1")),te!==1&&this.baseTexture.setResolution(te),te}parse(){return new Promise(ie=>{this._callback=ie,this._batchIndex=0,this._frameKeys.length<=_Spritesheet.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(ie){let ee=ie;const te=_Spritesheet.BATCH_SIZE;for(;ee-ie<te&&ee<this._frameKeys.length;){const re=this._frameKeys[ee],ne=this._frames[re],se=ne.frame;if(se){let ae=null,oe=null;const le=ne.trimmed!==!1&&ne.sourceSize?ne.sourceSize:ne.frame,he=new Rectangle(0,0,Math.floor(le.w)/this.resolution,Math.floor(le.h)/this.resolution);ne.rotated?ae=new Rectangle(Math.floor(se.x)/this.resolution,Math.floor(se.y)/this.resolution,Math.floor(se.h)/this.resolution,Math.floor(se.w)/this.resolution):ae=new Rectangle(Math.floor(se.x)/this.resolution,Math.floor(se.y)/this.resolution,Math.floor(se.w)/this.resolution,Math.floor(se.h)/this.resolution),ne.trimmed!==!1&&ne.spriteSourceSize&&(oe=new Rectangle(Math.floor(ne.spriteSourceSize.x)/this.resolution,Math.floor(ne.spriteSourceSize.y)/this.resolution,Math.floor(se.w)/this.resolution,Math.floor(se.h)/this.resolution)),this.textures[re]=new Texture(this.baseTexture,ae,he,oe,ne.rotated?2:0,ne.anchor,ne.borders),Texture.addToCache(this.textures[re],re)}ee++}}_processAnimations(){const ie=this.data.animations||{};for(const ee in ie){this.animations[ee]=[];for(let te=0;te<ie[ee].length;te++){const re=ie[ee][te];this.animations[ee].push(this.textures[re])}}}_parseComplete(){const ie=this._callback;this._callback=null,this._batchIndex=0,ie.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*_Spritesheet.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*_Spritesheet.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(ie=!1){var ee;for(const te in this.textures)this.textures[te].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,ie&&((ee=this._texture)==null||ee.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Spritesheet=_Spritesheet;Spritesheet.BATCH_SIZE=1e3;const validImages=["jpg","png","jpeg","avif","webp"];function getCacheableAssets(ie,ee,te){const re={};if(ie.forEach(ne=>{re[ne]=ee}),Object.keys(ee.textures).forEach(ne=>{re[ne]=ee.textures[ne]}),!te){const ne=path.dirname(ie[0]);ee.linkedSheets.forEach((se,ae)=>{const oe=getCacheableAssets([`${ne}/${ee.data.meta.related_multi_packs[ae]}`],se,!0);Object.assign(re,oe)})}return re}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:ie=>ie instanceof Spritesheet,getCacheableAssets:(ie,ee)=>getCacheableAssets(ie,ee,!1)},resolver:{test:ie=>{const te=ie.split("?")[0].split("."),re=te.pop(),ne=te.pop();return re==="json"&&validImages.includes(ne)},parse:ie=>{var te,re;const ee=ie.split(".");return{resolution:parseFloat((re=(te=settings.RETINA_PREFIX.exec(ie))==null?void 0:te[1])!=null?re:"1"),format:ee[ee.length-2],src:ie}}},loader:{name:"spritesheetLoader",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},async testParse(ie,ee){return path.extname(ee.src).toLowerCase()===".json"&&!!ie.frames},async parse(ie,ee,te){var he,ce;let re=path.dirname(ee.src);re&&re.lastIndexOf("/")!==re.length-1&&(re+="/");let ne=re+ie.meta.image;ne=copySearchParams(ne,ee.src);const ae=(await te.load([ne]))[ne],oe=new Spritesheet(ae.baseTexture,ie,ee.src);await oe.parse();const le=(he=ie==null?void 0:ie.meta)==null?void 0:he.related_multi_packs;if(Array.isArray(le)){const de=[];for(const fe of le){if(typeof fe!="string")continue;let pe=re+fe;(ce=ee.data)!=null&&ce.ignoreMultiPack||(pe=copySearchParams(pe,ee.src),de.push(te.load({src:pe,data:{ignoreMultiPack:!0}})))}const ue=await Promise.all(de);oe.linkedSheets=ue,ue.forEach(fe=>{fe.linkedSheets=[oe].concat(oe.linkedSheets.filter(pe=>pe!==fe))})}return oe},unload(ie){ie.destroy(!0)}}};extensions$1.add(spritesheetAsset);class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class TextFormat{static test(ee){return typeof ee=="string"&&ee.startsWith("info face=")}static parse(ee){const te=ee.match(/^[a-z]+\s+.+$/gm),re={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const se in te){const ae=te[se].match(/^[a-z]+/gm)[0],oe=te[se].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),le={};for(const he in oe){const ce=oe[he].split("="),de=ce[0],ue=ce[1].replace(/"/gm,""),fe=parseFloat(ue),pe=isNaN(fe)?ue:fe;le[de]=pe}re[ae].push(le)}const ne=new BitmapFontData;return re.info.forEach(se=>ne.info.push({face:se.face,size:parseInt(se.size,10)})),re.common.forEach(se=>ne.common.push({lineHeight:parseInt(se.lineHeight,10)})),re.page.forEach(se=>ne.page.push({id:parseInt(se.id,10),file:se.file})),re.char.forEach(se=>ne.char.push({id:parseInt(se.id,10),page:parseInt(se.page,10),x:parseInt(se.x,10),y:parseInt(se.y,10),width:parseInt(se.width,10),height:parseInt(se.height,10),xoffset:parseInt(se.xoffset,10),yoffset:parseInt(se.yoffset,10),xadvance:parseInt(se.xadvance,10)})),re.kerning.forEach(se=>ne.kerning.push({first:parseInt(se.first,10),second:parseInt(se.second,10),amount:parseInt(se.amount,10)})),re.distanceField.forEach(se=>ne.distanceField.push({distanceRange:parseInt(se.distanceRange,10),fieldType:se.fieldType})),ne}}class XMLFormat{static test(ee){const te=ee;return"getElementsByTagName"in te&&te.getElementsByTagName("page").length&&te.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(ee){const te=new BitmapFontData,re=ee.getElementsByTagName("info"),ne=ee.getElementsByTagName("common"),se=ee.getElementsByTagName("page"),ae=ee.getElementsByTagName("char"),oe=ee.getElementsByTagName("kerning"),le=ee.getElementsByTagName("distanceField");for(let he=0;he<re.length;he++)te.info.push({face:re[he].getAttribute("face"),size:parseInt(re[he].getAttribute("size"),10)});for(let he=0;he<ne.length;he++)te.common.push({lineHeight:parseInt(ne[he].getAttribute("lineHeight"),10)});for(let he=0;he<se.length;he++)te.page.push({id:parseInt(se[he].getAttribute("id"),10)||0,file:se[he].getAttribute("file")});for(let he=0;he<ae.length;he++){const ce=ae[he];te.char.push({id:parseInt(ce.getAttribute("id"),10),page:parseInt(ce.getAttribute("page"),10)||0,x:parseInt(ce.getAttribute("x"),10),y:parseInt(ce.getAttribute("y"),10),width:parseInt(ce.getAttribute("width"),10),height:parseInt(ce.getAttribute("height"),10),xoffset:parseInt(ce.getAttribute("xoffset"),10),yoffset:parseInt(ce.getAttribute("yoffset"),10),xadvance:parseInt(ce.getAttribute("xadvance"),10)})}for(let he=0;he<oe.length;he++)te.kerning.push({first:parseInt(oe[he].getAttribute("first"),10),second:parseInt(oe[he].getAttribute("second"),10),amount:parseInt(oe[he].getAttribute("amount"),10)});for(let he=0;he<le.length;he++)te.distanceField.push({fieldType:le[he].getAttribute("fieldType"),distanceRange:parseInt(le[he].getAttribute("distanceRange"),10)});return te}}class XMLStringFormat{static test(ee){return typeof ee=="string"&&ee.includes("<font>")?XMLFormat.test(settings.ADAPTER.parseXML(ee)):!1}static parse(ee){return XMLFormat.parse(settings.ADAPTER.parseXML(ee))}}const formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(ie){for(let ee=0;ee<formats.length;ee++)if(formats[ee].test(ie))return formats[ee];return null}function generateFillStyle(ie,ee,te,re,ne,se){const ae=te.fill;if(Array.isArray(ae)){if(ae.length===1)return ae[0]}else return ae;let oe;const le=te.dropShadow?te.dropShadowDistance:0,he=te.padding||0,ce=ie.width/re-le-he*2,de=ie.height/re-le-he*2,ue=ae.slice(),fe=te.fillGradientStops.slice();if(!fe.length){const pe=ue.length+1;for(let me=1;me<pe;++me)fe.push(me/pe)}if(ue.unshift(ae[0]),fe.unshift(0),ue.push(ae[ae.length-1]),fe.push(1),te.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){oe=ee.createLinearGradient(ce/2,he,ce/2,de+he);let pe=0;const xe=(se.fontProperties.fontSize+te.strokeThickness)/de;for(let ge=0;ge<ne.length;ge++){const _e=se.lineHeight*ge;for(let ve=0;ve<ue.length;ve++){let ye=0;typeof fe[ve]=="number"?ye=fe[ve]:ye=ve/ue.length;const be=_e/de+ye*xe;let we=Math.max(pe,be);we=Math.min(we,1),oe.addColorStop(we,ue[ve]),pe=we}}}else{oe=ee.createLinearGradient(he,de/2,ce+he,de/2);const pe=ue.length+1;let me=1;for(let xe=0;xe<ue.length;xe++){let ge;typeof fe[xe]=="number"?ge=fe[xe]:ge=me/pe,oe.addColorStop(ge,ue[xe]),me++}}return oe}function drawGlyph(ie,ee,te,re,ne,se,ae){const oe=te.text,le=te.fontProperties;ee.translate(re,ne),ee.scale(se,se);const he=ae.strokeThickness/2,ce=-(ae.strokeThickness/2);if(ee.font=ae.toFontString(),ee.lineWidth=ae.strokeThickness,ee.textBaseline=ae.textBaseline,ee.lineJoin=ae.lineJoin,ee.miterLimit=ae.miterLimit,ee.fillStyle=generateFillStyle(ie,ee,ae,se,[oe],te),ee.strokeStyle=ae.stroke,ae.dropShadow){const de=ae.dropShadowColor,ue=ae.dropShadowBlur*se,fe=ae.dropShadowDistance*se;ee.shadowColor=Color.shared.setValue(de).setAlpha(ae.dropShadowAlpha).toRgbaString(),ee.shadowBlur=ue,ee.shadowOffsetX=Math.cos(ae.dropShadowAngle)*fe,ee.shadowOffsetY=Math.sin(ae.dropShadowAngle)*fe}else ee.shadowColor="black",ee.shadowBlur=0,ee.shadowOffsetX=0,ee.shadowOffsetY=0;ae.stroke&&ae.strokeThickness&&ee.strokeText(oe,he,ce+te.lineHeight-le.descent),ae.fill&&ee.fillText(oe,he,ce+te.lineHeight-le.descent),ee.setTransform(1,0,0,1,0,0),ee.fillStyle="rgba(0, 0, 0, 0)"}function extractCharCode(ie){return ie.codePointAt?ie.codePointAt(0):ie.charCodeAt(0)}function splitTextToCharacters(ie){return Array.from?Array.from(ie):ie.split("")}function resolveCharacters(ie){typeof ie=="string"&&(ie=[ie]);const ee=[];for(let te=0,re=ie.length;te<re;te++){const ne=ie[te];if(Array.isArray(ne)){if(ne.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${ne.length}.`);const se=ne[0].charCodeAt(0),ae=ne[1].charCodeAt(0);if(ae<se)throw new Error("[BitmapFont]: Invalid character range.");for(let oe=se,le=ae;oe<=le;oe++)ee.push(String.fromCharCode(oe))}else ee.push(...splitTextToCharacters(ne))}if(ee.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return ee}const _BitmapFont=class{constructor(ie,ee,te){var he,ce;const[re]=ie.info,[ne]=ie.common,[se]=ie.page,[ae]=ie.distanceField,oe=getResolutionOfUrl(se.file),le={};this._ownsTextures=te,this.font=re.face,this.size=re.size,this.lineHeight=ne.lineHeight/oe,this.chars={},this.pageTextures=le;for(let de=0;de<ie.page.length;de++){const{id:ue,file:fe}=ie.page[de];le[ue]=ee instanceof Array?ee[de]:ee[fe],(ae==null?void 0:ae.fieldType)&&ae.fieldType!=="none"&&(le[ue].baseTexture.alphaMode=ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,le[ue].baseTexture.mipmap=MIPMAP_MODES.OFF)}for(let de=0;de<ie.char.length;de++){const{id:ue,page:fe}=ie.char[de];let{x:pe,y:me,width:xe,height:ge,xoffset:_e,yoffset:ve,xadvance:ye}=ie.char[de];pe/=oe,me/=oe,xe/=oe,ge/=oe,_e/=oe,ve/=oe,ye/=oe;const be=new Rectangle(pe+le[fe].frame.x/oe,me+le[fe].frame.y/oe,xe,ge);this.chars[ue]={xOffset:_e,yOffset:ve,xAdvance:ye,kerning:{},texture:new Texture(le[fe].baseTexture,be),page:fe}}for(let de=0;de<ie.kerning.length;de++){let{first:ue,second:fe,amount:pe}=ie.kerning[de];ue/=oe,fe/=oe,pe/=oe,this.chars[fe]&&(this.chars[fe].kerning[ue]=pe)}this.distanceFieldRange=ae==null?void 0:ae.distanceRange,this.distanceFieldType=(ce=(he=ae==null?void 0:ae.fieldType)==null?void 0:he.toLowerCase())!=null?ce:"none"}destroy(){for(const ie in this.chars)this.chars[ie].texture.destroy(),this.chars[ie].texture=null;for(const ie in this.pageTextures)this._ownsTextures&&this.pageTextures[ie].destroy(!0),this.pageTextures[ie]=null;this.chars=null,this.pageTextures=null}static install(ie,ee,te){let re;if(ie instanceof BitmapFontData)re=ie;else{const se=autoDetectFormat(ie);if(!se)throw new Error("Unrecognized data format for font.");re=se.parse(ie)}ee instanceof Texture&&(ee=[ee]);const ne=new _BitmapFont(re,ee,te);return _BitmapFont.available[ne.font]=ne,ne}static uninstall(ie){const ee=_BitmapFont.available[ie];if(!ee)throw new Error(`No font found named '${ie}'`);ee.destroy(),delete _BitmapFont.available[ie]}static from(ie,ee,te){if(!ie)throw new Error("[BitmapFont] Property `name` is required.");const{chars:re,padding:ne,resolution:se,textureWidth:ae,textureHeight:oe,...le}=Object.assign({},_BitmapFont.defaultOptions,te),he=resolveCharacters(re),ce=ee instanceof TextStyle?ee:new TextStyle(ee),de=ae,ue=new BitmapFontData;ue.info[0]={face:ce.fontFamily,size:ce.fontSize},ue.common[0]={lineHeight:ce.fontSize};let fe=0,pe=0,me,xe,ge,_e=0;const ve=[];for(let be=0;be<he.length;be++){me||(me=settings.ADAPTER.createCanvas(),me.width=ae,me.height=oe,xe=me.getContext("2d"),ge=new BaseTexture(me,{resolution:se,...le}),ve.push(new Texture(ge)),ue.page.push({id:ve.length-1,file:""}));const we=he[be],Se=TextMetrics.measureText(we,ce,!1,me),Te=Se.width,Pe=Math.ceil(Se.height),Be=Math.ceil((ce.fontStyle==="italic"?2:1)*Te);if(pe>=oe-Pe*se){if(pe===0)throw new Error(`[BitmapFont] textureHeight ${oe}px is too small (fontFamily: '${ce.fontFamily}', fontSize: ${ce.fontSize}px, char: '${we}')`);--be,me=null,xe=null,ge=null,pe=0,fe=0,_e=0;continue}if(_e=Math.max(Pe+Se.fontProperties.descent,_e),Be*se+fe>=de){if(fe===0)throw new Error(`[BitmapFont] textureWidth ${ae}px is too small (fontFamily: '${ce.fontFamily}', fontSize: ${ce.fontSize}px, char: '${we}')`);--be,pe+=_e*se,pe=Math.ceil(pe),fe=0,_e=0;continue}drawGlyph(me,xe,Se,fe,pe,se,ce);const Ce=extractCharCode(Se.text);ue.char.push({id:Ce,page:ve.length-1,x:fe/se,y:pe/se,width:Be,height:Pe,xoffset:0,yoffset:0,xadvance:Te-(ce.dropShadow?ce.dropShadowDistance:0)-(ce.stroke?ce.strokeThickness:0)}),fe+=(Be+2*ne)*se,fe=Math.ceil(fe)}for(let be=0,we=he.length;be<we;be++){const Se=he[be];for(let Te=0;Te<we;Te++){const Pe=he[Te],Be=xe.measureText(Se).width,Ce=xe.measureText(Pe).width,Re=xe.measureText(Se+Pe).width-(Be+Ce);Re&&ue.kerning.push({first:extractCharCode(Se),second:extractCharCode(Pe),amount:Re})}}const ye=new _BitmapFont(ue,ve,!0);return _BitmapFont.available[ie]!==void 0&&_BitmapFont.uninstall(ie),_BitmapFont.available[ie]=ye,ye}};let BitmapFont=_BitmapFont;BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],BitmapFont.NUMERIC=[["0","9"]],BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],BitmapFont.ASCII=[[" ","~"]],BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_BitmapFont.ALPHANUMERIC},BitmapFont.available={};var msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],_BitmapText=class extends Container{constructor(ie,ee={}){super();const{align:te,tint:re,maxWidth:ne,letterSpacing:se,fontName:ae,fontSize:oe}=Object.assign({},_BitmapText.styleDefaults,ee);if(!BitmapFont.available[ae])throw new Error(`Missing BitmapFont "${ae}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=te,this._tintColor=new Color(re),this._font=void 0,this._fontName=ae,this._fontSize=oe,this.text=ie,this._maxWidth=ne,this._maxLineHeight=0,this._letterSpacing=se,this._anchor=new ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=settings.ROUND_PIXELS,this.dirty=!0,this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Be;const ie=BitmapFont.available[this._fontName],ee=this.fontSize,te=ee/ie.size,re=new Point,ne=[],se=[],ae=[],oe=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",le=splitTextToCharacters(oe),he=this._maxWidth*ie.size/ee,ce=ie.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;let de=null,ue=0,fe=0,pe=0,me=-1,xe=0,ge=0,_e=0,ve=0;for(let Ce=0;Ce<le.length;Ce++){const De=le[Ce],Re=extractCharCode(De);if(/(?:\s)/.test(De)&&(me=Ce,xe=ue,ve++),De==="\r"||De===`
`){se.push(ue),ae.push(-1),fe=Math.max(fe,ue),++pe,++ge,re.x=0,re.y+=ie.lineHeight,de=null,ve=0;continue}const Le=ie.chars[Re];if(!Le)continue;de&&Le.kerning[de]&&(re.x+=Le.kerning[de]);const ke=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};ke.texture=Le.texture,ke.line=pe,ke.charCode=Re,ke.position.x=Math.round(re.x+Le.xOffset+this._letterSpacing/2),ke.position.y=Math.round(re.y+Le.yOffset),ke.prevSpaces=ve,ne.push(ke),ue=ke.position.x+Math.max(Le.xAdvance-Le.xOffset,Le.texture.orig.width),re.x+=Le.xAdvance+this._letterSpacing,_e=Math.max(_e,Le.yOffset+Le.texture.height),de=Re,me!==-1&&he>0&&re.x>he&&(++ge,removeItems(ne,1+me-ge,1+Ce-me),Ce=me,me=-1,se.push(xe),ae.push(ne.length>0?ne[ne.length-1].prevSpaces:0),fe=Math.max(fe,xe),pe++,re.x=0,re.y+=ie.lineHeight,de=null,ve=0)}const ye=le[le.length-1];ye!=="\r"&&ye!==`
`&&(/(?:\s)/.test(ye)&&(ue=xe),se.push(ue),fe=Math.max(fe,ue),ae.push(-1));const be=[];for(let Ce=0;Ce<=pe;Ce++){let De=0;this._align==="right"?De=fe-se[Ce]:this._align==="center"?De=(fe-se[Ce])/2:this._align==="justify"&&(De=ae[Ce]<0?0:(fe-se[Ce])/ae[Ce]),be.push(De)}const we=ne.length,Se={},Te=[],Pe=this._activePagesMeshData;ce.push(...Pe);for(let Ce=0;Ce<we;Ce++){const De=ne[Ce].texture,Re=De.baseTexture.uid;if(!Se[Re]){let Le=ce.pop();if(!Le){const Me=new MeshGeometry;let Ee,Ae;ie.distanceFieldType==="none"?(Ee=new MeshMaterial(Texture.EMPTY),Ae=BLEND_MODES.NORMAL):(Ee=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),Ae=BLEND_MODES.NORMAL_NPM);const Ie=new Mesh(Me,Ee);Ie.blendMode=Ae,Le={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Ie,vertices:null,uvs:null,indices:null}}Le.index=0,Le.indexCount=0,Le.vertexCount=0,Le.uvsCount=0,Le.total=0;const{_textureCache:ke}=this;ke[Re]=ke[Re]||new Texture(De.baseTexture),Le.mesh.texture=ke[Re],Le.mesh.tint=this._tintColor.value,Te.push(Le),Se[Re]=Le}Se[Re].total++}for(let Ce=0;Ce<Pe.length;Ce++)Te.includes(Pe[Ce])||this.removeChild(Pe[Ce].mesh);for(let Ce=0;Ce<Te.length;Ce++)Te[Ce].mesh.parent!==this&&this.addChild(Te[Ce].mesh);this._activePagesMeshData=Te;for(const Ce in Se){const De=Se[Ce],Re=De.total;if(!(((Be=De.indices)==null?void 0:Be.length)>6*Re)||De.vertices.length<Mesh.BATCHABLE_SIZE*2)De.vertices=new Float32Array(4*2*Re),De.uvs=new Float32Array(4*2*Re),De.indices=new Uint16Array(6*Re);else{const Le=De.total,ke=De.vertices;for(let Me=Le*4*2;Me<ke.length;Me++)ke[Me]=0}De.mesh.size=6*Re}for(let Ce=0;Ce<we;Ce++){const De=ne[Ce];let Re=De.position.x+be[De.line]*(this._align==="justify"?De.prevSpaces:1);this._roundPixels&&(Re=Math.round(Re));const Le=Re*te,ke=De.position.y*te,Me=De.texture,Ee=Se[Me.baseTexture.uid],Ae=Me.frame,Ie=Me._uvs,Fe=Ee.index++;Ee.indices[Fe*6+0]=0+Fe*4,Ee.indices[Fe*6+1]=1+Fe*4,Ee.indices[Fe*6+2]=2+Fe*4,Ee.indices[Fe*6+3]=0+Fe*4,Ee.indices[Fe*6+4]=2+Fe*4,Ee.indices[Fe*6+5]=3+Fe*4,Ee.vertices[Fe*8+0]=Le,Ee.vertices[Fe*8+1]=ke,Ee.vertices[Fe*8+2]=Le+Ae.width*te,Ee.vertices[Fe*8+3]=ke,Ee.vertices[Fe*8+4]=Le+Ae.width*te,Ee.vertices[Fe*8+5]=ke+Ae.height*te,Ee.vertices[Fe*8+6]=Le,Ee.vertices[Fe*8+7]=ke+Ae.height*te,Ee.uvs[Fe*8+0]=Ie.x0,Ee.uvs[Fe*8+1]=Ie.y0,Ee.uvs[Fe*8+2]=Ie.x1,Ee.uvs[Fe*8+3]=Ie.y1,Ee.uvs[Fe*8+4]=Ie.x2,Ee.uvs[Fe*8+5]=Ie.y2,Ee.uvs[Fe*8+6]=Ie.x3,Ee.uvs[Fe*8+7]=Ie.y3}this._textWidth=fe*te,this._textHeight=(re.y+ie.lineHeight)*te;for(const Ce in Se){const De=Se[Ce];if(this.anchor.x!==0||this.anchor.y!==0){let Me=0;const Ee=this._textWidth*this.anchor.x,Ae=this._textHeight*this.anchor.y;for(let Ie=0;Ie<De.total;Ie++)De.vertices[Me++]-=Ee,De.vertices[Me++]-=Ae,De.vertices[Me++]-=Ee,De.vertices[Me++]-=Ae,De.vertices[Me++]-=Ee,De.vertices[Me++]-=Ae,De.vertices[Me++]-=Ee,De.vertices[Me++]-=Ae}this._maxLineHeight=_e*te;const Re=De.mesh.geometry.getBuffer("aVertexPosition"),Le=De.mesh.geometry.getBuffer("aTextureCoord"),ke=De.mesh.geometry.getIndex();Re.data=De.vertices,Le.data=De.uvs,ke.data=De.indices,Re.update(),Le.update(),ke.update()}for(let Ce=0;Ce<ne.length;Ce++)charRenderDataPool.push(ne[Ce]);this._font=ie,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(ie){this._autoResolution&&this._resolution!==ie.resolution&&(this._resolution=ie.resolution,this.dirty=!0);const{distanceFieldRange:ee,distanceFieldType:te,size:re}=BitmapFont.available[this._fontName];if(te!=="none"){const{a:ne,b:se,c:ae,d:oe}=this.worldTransform,le=Math.sqrt(ne*ne+se*se),he=Math.sqrt(ae*ae+oe*oe),ce=(Math.abs(le)+Math.abs(he))/2,de=this.fontSize/re,ue=ie._view.resolution;for(const fe of this._activePagesMeshData)fe.mesh.shader.uniforms.uFWidth=ce*ee*de*ue}super._render(ie)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const ie=BitmapFont.available[this._fontName];if(!ie)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==ie&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(ie){if(this.tint!==ie){this._tintColor.setValue(ie);for(let ee=0;ee<this._activePagesMeshData.length;ee++)this._activePagesMeshData[ee].mesh.tint=ie}}get align(){return this._align}set align(ie){this._align!==ie&&(this._align=ie,this.dirty=!0)}get fontName(){return this._fontName}set fontName(ie){if(!BitmapFont.available[ie])throw new Error(`Missing BitmapFont "${ie}"`);this._fontName!==ie&&(this._fontName=ie,this.dirty=!0)}get fontSize(){var ie;return(ie=this._fontSize)!=null?ie:BitmapFont.available[this._fontName].size}set fontSize(ie){this._fontSize!==ie&&(this._fontSize=ie,this.dirty=!0)}get anchor(){return this._anchor}set anchor(ie){typeof ie=="number"?this._anchor.set(ie):this._anchor.copyFrom(ie)}get text(){return this._text}set text(ie){ie=String(ie==null?"":ie),this._text!==ie&&(this._text=ie,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(ie){this._maxWidth!==ie&&(this._maxWidth=ie,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(ie){this._letterSpacing!==ie&&(this._letterSpacing=ie,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(ie){ie!==this._roundPixels&&(this._roundPixels=ie,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(ie){this._autoResolution=!1,this._resolution!==ie&&(this._resolution=ie,this.dirty=!0)}destroy(ie){const{_textureCache:ee}=this,re=BitmapFont.available[this._fontName].distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;re.push(...this._activePagesMeshData);for(const ne of this._activePagesMeshData)this.removeChild(ne.mesh);this._activePagesMeshData=[],re.filter(ne=>ee[ne.mesh.texture.baseTexture.uid]).forEach(ne=>{ne.mesh.texture=Texture.EMPTY});for(const ne in ee)ee[ne].destroy(),delete ee[ne];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(ie)}};let BitmapText=_BitmapText;BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const validExtensions=[".xml",".fnt"],loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},name:"loadBitmapFont",test(ie){return validExtensions.includes(path.extname(ie).toLowerCase())},async testParse(ie){return TextFormat.test(ie)||XMLStringFormat.test(ie)},async parse(ie,ee,te){const re=TextFormat.test(ie)?TextFormat.parse(ie):XMLStringFormat.parse(ie),{src:ne}=ee,{page:se}=re,ae=[];for(let he=0;he<se.length;++he){const ce=se[he].file;let de=path.join(path.dirname(ne),ce);de=copySearchParams(de,ne),ae.push(de)}const oe=await te.load(ae),le=ae.map(he=>oe[he]);return BitmapFont.install(re,le,!0)},async load(ie,ee){return(await settings.ADAPTER.fetch(ie)).text()},unload(ie){ie.destroy()}};extensions$1.add(loadBitmapFont);const _HTMLTextStyle=class extends TextStyle{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(ie){return new _HTMLTextStyle(Object.keys(_HTMLTextStyle.defaultOptions).reduce((ee,te)=>({...ee,[te]:ie[te]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(ie=>{URL.revokeObjectURL(ie.src),ie.refs--,ie.refs===0&&(ie.fontFace&&document.fonts.delete(ie.fontFace),delete _HTMLTextStyle.availableFonts[ie.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(ie,ee={}){const{availableFonts:te}=_HTMLTextStyle;if(te[ie]){const re=te[ie];return this._fonts.push(re),re.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return settings.ADAPTER.fetch(ie).then(re=>re.blob()).then(async re=>new Promise((ne,se)=>{const ae=URL.createObjectURL(re),oe=new FileReader;oe.onload=()=>ne([ae,oe.result]),oe.onerror=se,oe.readAsDataURL(re)})).then(async([re,ne])=>{const se=Object.assign({family:path.basename(ie,path.extname(ie)),weight:"normal",style:"normal",src:re,dataSrc:ne,refs:1,originalUrl:ie,fontFace:null},ee);te[ie]=se,this._fonts.push(se),this.styleID++;const ae=new FontFace(se.family,`url(${se.src})`,{weight:se.weight,style:se.style});se.fontFace=ae,await ae.load(),document.fonts.add(ae),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...ie){const ee=ie.filter(te=>!this._overrides.includes(te));ee.length>0&&(this._overrides.push(...ee),this.styleID++)}removeOverride(...ie){const ee=ie.filter(te=>this._overrides.includes(te));ee.length>0&&(this._overrides=this._overrides.filter(te=>!ee.includes(te)),this.styleID++)}toCSS(ie){return[`transform: scale(${ie})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((ie,ee)=>`${ie}
            @font-face {
                font-family: "${ee.family}";
                src: url('${ee.dataSrc}');
                font-weight: ${ee.weight};
                font-style: ${ee.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(ie){this._stylesheet!==ie&&(this._stylesheet=ie,this.styleID++)}normalizeColor(ie){return Array.isArray(ie)&&(ie=rgb2hex(ie)),typeof ie=="number"?hex2string(ie):ie}dropShadowToCSS(){let ie=this.normalizeColor(this.dropShadowColor);const ee=this.dropShadowAlpha,te=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),re=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);ie.startsWith("#")&&ee<1&&(ie+=(ee*255|0).toString(16).padStart(2,"0"));const ne=`${te}px ${re}px`;return this.dropShadowBlur>0?`text-shadow: ${ne} ${this.dropShadowBlur}px ${ie}`:`text-shadow: ${ne} ${ie}`}reset(){Object.assign(this,_HTMLTextStyle.defaultOptions)}onBeforeDraw(){const{fontsDirty:ie}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&ie?new Promise(ee=>setTimeout(ee,100)):Promise.resolve()}get isSafari(){const{userAgent:ie}=settings.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(ie)}set fillGradientStops(ie){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(ie){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(ie){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(ie){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(ie){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(ie){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(ie){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let HTMLTextStyle=_HTMLTextStyle;HTMLTextStyle.availableFonts={},HTMLTextStyle.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const _HTMLText=class extends Sprite{constructor(ie="",ee={}){var ce;super(Texture.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const te=new Image,re=Texture.from(te,{scaleMode:settings.SCALE_MODE,resourceOptions:{autoLoad:!1}});re.orig=new Rectangle,re.trim=new Rectangle,this.texture=re;const ne="http://www.w3.org/2000/svg",se="http://www.w3.org/1999/xhtml",ae=document.createElementNS(ne,"svg"),oe=document.createElementNS(ne,"foreignObject"),le=document.createElementNS(se,"div"),he=document.createElementNS(se,"style");oe.setAttribute("width","10000"),oe.setAttribute("height","10000"),oe.style.overflow="hidden",ae.appendChild(oe),this.maxWidth=_HTMLText.defaultMaxWidth,this.maxHeight=_HTMLText.defaultMaxHeight,this._domElement=le,this._styleElement=he,this._svgRoot=ae,this._foreignObject=oe,this._foreignObject.appendChild(he),this._foreignObject.appendChild(le),this._image=te,this._loadImage=new Image,this._autoResolution=_HTMLText.defaultAutoResolution,this._resolution=(ce=_HTMLText.defaultResolution)!=null?ce:settings.RESOLUTION,this.text=ie,this.style=ee}measureText(ie){var oe,le;const{text:ee,style:te,resolution:re}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},ie);Object.assign(this._domElement,{innerHTML:ee,style:te.toCSS(re)}),this._styleElement.textContent=te.toGlobalCSS(),document.body.appendChild(this._svgRoot);const ne=this._domElement.getBoundingClientRect();this._svgRoot.remove();const se=Math.min(this.maxWidth,Math.ceil(ne.width)),ae=Math.min(this.maxHeight,Math.ceil(ne.height));return this._svgRoot.setAttribute("width",se.toString()),this._svgRoot.setAttribute("height",ae.toString()),ee!==this._text&&(this._domElement.innerHTML=this._text),te!==this._style&&(Object.assign(this._domElement,{style:(oe=this._style)==null?void 0:oe.toCSS(re)}),this._styleElement.textContent=(le=this._style)==null?void 0:le.toGlobalCSS()),{width:se+te.padding*2,height:ae+te.padding*2}}async updateText(ie=!0){const{style:ee,_image:te,_loadImage:re}=this;if(this.localStyleID!==ee.styleID&&(this.dirty=!0,this.localStyleID=ee.styleID),!this.dirty&&ie)return;const{width:ne,height:se}=this.measureText();te.width=re.width=Math.ceil(Math.max(1,ne)),te.height=re.height=Math.ceil(Math.max(1,se)),this._loading||(this._loading=!0,await new Promise(ae=>{re.onload=async()=>{await ee.onBeforeDraw(),this._loading=!1,te.src=re.src,re.onload=null,re.src="",this.updateTexture(),ae()};const oe=new XMLSerializer().serializeToString(this._svgRoot);re.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(oe)}`}))}get source(){return this._image}updateTexture(){const{style:ie,texture:ee,_image:te,resolution:re}=this,{padding:ne}=ie,{baseTexture:se}=ee;ee.trim.width=ee._frame.width=te.width/re,ee.trim.height=ee._frame.height=te.height/re,ee.trim.x=-ne,ee.trim.y=-ne,ee.orig.width=ee._frame.width-ne*2,ee.orig.height=ee._frame.height-ne*2,this._onTextureUpdate(),se.setRealSize(te.width,te.height,re),this.dirty=!1}_render(ie){this._autoResolution&&this._resolution!==ie.resolution&&(this._resolution=ie.resolution,this.dirty=!0),this.updateText(!0),super._render(ie)}_renderCanvas(ie){this._autoResolution&&this._resolution!==ie.resolution&&(this._resolution=ie.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(ie)}getLocalBounds(ie){return this.updateText(!0),super.getLocalBounds(ie)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(ie){var te,re,ne,se,ae;typeof ie=="boolean"&&(ie={children:ie}),ie=Object.assign({},_HTMLText.defaultDestroyOptions,ie),super.destroy(ie);const ee=null;this.ownsStyle&&((te=this._style)==null||te.cleanFonts()),this._style=ee,(re=this._svgRoot)==null||re.remove(),this._svgRoot=ee,(ne=this._domElement)==null||ne.remove(),this._domElement=ee,(se=this._foreignObject)==null||se.remove(),this._foreignObject=ee,(ae=this._styleElement)==null||ae.remove(),this._styleElement=ee,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=ee,this._image.src="",this._image=ee}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(ie){this.updateText(!0);const ee=sign(this.scale.x)||1;this.scale.x=ee*ie/this._image.width/this.resolution,this._width=ie}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(ie){this.updateText(!0);const ee=sign(this.scale.y)||1;this.scale.y=ee*ie/this._image.height/this.resolution,this._height=ie}get style(){return this._style}set style(ie){this._style!==ie&&(ie=ie||{},ie instanceof HTMLTextStyle?(this.ownsStyle=!1,this._style=ie):ie instanceof TextStyle?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=HTMLTextStyle.from(ie)):(this.ownsStyle=!0,this._style=new HTMLTextStyle(ie)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(ie){ie=String(ie===""||ie===null||ie===void 0?" ":ie),ie=this.sanitiseText(ie),this._text!==ie&&(this._text=ie,this.dirty=!0)}get resolution(){return this._resolution}set resolution(ie){this._autoResolution=!1,this._resolution!==ie&&(this._resolution=ie,this.dirty=!0)}sanitiseText(ie){return ie.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let HTMLText=_HTMLText;HTMLText.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},HTMLText.defaultMaxWidth=2024,HTMLText.defaultMaxHeight=2024,HTMLText.defaultAutoResolution=!0,gsapWithCSS.registerPlugin(ScrollTrigger);class HeroName{constructor(){const ee=()=>{window.innerHeight/window.innerWidth<.56?$(".hero__name").add(".loader__text").addClass("scale-vh"):$(".hero__name").add(".loader__text").removeClass("scale-vh")};ee(),window.addEventListener("resize",()=>ee()),this.scroll()}scroll(){let ee=$(".hero"),te=$(".hero__name");gsapWithCSS.timeline({scrollTrigger:{trigger:ee,start:"top top",end:"bottom top",scrub:!0}}).to(te,{duration:1,y:"10%"})}}class Popups{constructor(){let ee=gsapWithCSS.matchMedia(),te="(min-width: 991px)";ee.add(te,()=>{this.init(),this.initLottie();let re=window.innerWidth;const ne=()=>{let ae=window.innerWidth;re!==ae&&this.init(),re=window.innerWidth};function se(ae){let oe;return function(le){oe&&clearTimeout(oe),oe=setTimeout(ae,400,le)}}window.addEventListener("resize",se(function(ae){ne()}))})}init(){$('[img-popup="parent"]').each((te,re)=>{let ne=$(re),se=ne.find('[img-popup="trigger"]'),ae=ne.find(".img-popup");se.each((oe,le)=>{let he=$(le),ce=he.attr("index"),de=ae.eq(ce);he.on("mouseenter",()=>{de.addClass("active")}),he.on("mouseleave",()=>{de.removeClass("active")})})})}initLottie(){let ee=$(".img-popup.is--3"),te=$(".img-popup.is--4.is--work");ee.find(".img-popup__logo");let re=ee.closest('[img-popup="parent"]'),ne=te.closest('[img-popup="parent"]'),se=re.find('[index="1"]'),ae=ne.find('[index="0"]'),oe={frame:0},le=Lottie.loadAnimation({container:document.querySelector(".img-popup__logo"),renderer:"svg",loop:!1,autoplay:!1,path:"https://uploads-ssl.webflow.com/644918964e907d2eeb9e57a0/6454a87cee2f168516152375_Won_logo2.json"}),he=gsapWithCSS.timeline({paused:!0});le.addEventListener("DOMLoaded",function(){he.to(oe,{frame:le.totalFrames-1,ease:"none",onUpdate:()=>le.goToAndStop(oe.frame,!0),duration:2.2,yoyo:!0,repeat:-1,repeatDelay:.1})}),se.add(ae).on("mouseenter",()=>{he.play()}),se.add(ae).on("mouseleave",()=>{he.pause()}),window.addEventListener("resize",()=>{setTimeout(()=>{se=re.find('[index="1"]'),ae=ne.find('[index="0"]'),se.add(ae).on("mouseenter",()=>{he.play()}),se.add(ae).on("mouseleave",()=>{he.pause()})},1e3)})}}gsapWithCSS.registerPlugin(ScrollTrigger,SplitText);class Quoute{constructor(){let ee=$(".quoute__text").find(".f-95"),te=new SplitText(ee,{type:"lines, chars"}),re=gsapWithCSS.timeline({paused:!0,defaults:{duration:1,ease:"power3",stagger:.1}});re.fromTo(te.chars,{opacity:.15},{opacity:1}),ScrollTrigger.create({trigger:ee,start:"top 90%",end:"center center",scrub:1,animation:re})}}gsapWithCSS.registerPlugin(ScrollTrigger);class Road{constructor(){let ee=gsapWithCSS.matchMedia(),te="(min-width: 1025px)",re="(max-width: 1024px) and (min-width: 481px)",ne="(max-width: 480px)";ee.add(te,()=>this.desktop()),ee.add(re,()=>this.tablet()),ee.add(ne,()=>this.mobile())}desktop(){let ee=window.innerHeight;$(".road__sticky-parent").each((re,ne)=>{let se=$(ne),ae=se.find(".road__svg"),le=ae.height()/ee,ce=(1-le+.1)/le;gsapWithCSS.timeline({scrollTrigger:{trigger:ae,start:"bottom bottom",endTrigger:se,end:"bottom bottom",scrub:!0},ease:"none"}).to(ae,{scaleY:ce,ease:"none",overwrite:!0})})}tablet(){$(".road__svg--parent").each((te,re)=>{let ne=$(re),se=ne.find(".road__svg");gsapWithCSS.timeline({scrollTrigger:{trigger:se,start:"bottom bottom",endTrigger:ne,end:"bottom bottom",scrub:!0},ease:"none"}).to(se,{scaleY:3,ease:"none",transformOrigin:"top"})})}mobile(){$(".road__mob-item-parent").each((te,re)=>{let ne=$(re),se=ne.find(".road__mob-item");gsapWithCSS.timeline({scrollTrigger:{trigger:se,start:"bottom bottom",endTrigger:ne,end:"bottom bottom",scrub:!0},ease:"none"}).to(se,{scaleY:3,ease:"none",transformOrigin:"top"})})}}gsapWithCSS.registerPlugin(SplitText,ScrollTrigger);class Testimonial{constructor(){let ee=this,te=$("#testimonial__length"),re=$("#testimonial__index"),ne=$(".testimonial__track--list"),se=ne.find(".testimonial__track--item"),ae=$(".testimonial__fade--item"),oe=$(".testimonial__arrow").eq(1),le=$(".testimonial__arrow").eq(0),he=0,ce=0,de=0,ue=1.39,fe=gsapWithCSS.matchMedia(),pe="(min-width: 991px)",me="(max-width: 991px)";fe.add(me,()=>ue=16),se.each((we,Se)=>{let Pe=$(Se).clone();ne.append(Pe)}),se.each((we,Se)=>{let Pe=$(Se).clone();ne.append(Pe)}),se=ne.find(".testimonial__track--item");let xe=se.length,ge=ae.length;te.text("0"+ge),se.eq(0).addClass("active");let _e=se.eq(1).width()/window.innerWidth*100+ue,ve=se.eq(0).outerWidth()/window.innerWidth*100+ue,ye=ve-_e,be;fe.add(pe,()=>{_e=se.eq(1).width()/window.innerWidth*100+ue,ve=se.eq(0).outerWidth()/window.innerWidth*100+ue,ye=ve-_e,be="em"}),fe.add(me,()=>{_e=se.eq(1).width()+ue,ve=se.eq(0).outerWidth()+ue,ye=ve-_e,be="px"}),se.each((we,Se)=>{let Te=$(Se);Te.attr("multuply",de),de++,we!=0?(Te.css("--move",`${ye+we*_e}${be}`),Te.attr("move",`${ye+we*_e}`)):(Te.css("--move",`${we*_e}${be}`),Te.attr("move",`${we*_e}`)),Te.css("transition","transform .4s ease, width .4s ease, height .4s ease")}),ae.eq(0).addClass("active"),ae.eq(0).addClass("active-delay"),oe.on("click",we=>{he++,he>xe-1&&(he=0),ce++,ce>ge-1&&(ce=0),re.text("0"+(ce+1)),se.removeClass("active"),ae.removeClass("active"),se.eq(he).addClass("active"),ae.eq(ce).addClass("active"),ee.changeMultuply(se.eq(he),se),se.each((Se,Te)=>{let Pe=$(Te),Be=parseInt(Pe.attr("move")),Ce;Pe.css("transition","all .4s ease"),Pe.hasClass("active")?Ce=0:(fe.add(me,()=>Ce=Be-_e),fe.add(pe,()=>Ce=Be-_e+ue/5),Pe.css("opacity","1")),Ce<=-_e*4&&(fe.add(me,()=>Ce=xe*_e+ye+Ce),fe.add(pe,()=>Ce=xe*_e+ye+Ce-ue*3),Pe.css("transition","none"),Pe.css("opacity","0")),Pe.css("--move",`${Ce}${be}`),Pe.attr("move",`${Ce}`)})}),le.on("click",we=>{he--,he<0&&(he=xe-1),ce--,ce<0&&(ce=ge-1),re.text("0"+(ce+1)),se.removeClass("active"),ae.removeClass("active"),se.eq(he).addClass("active"),ae.eq(ce).addClass("active"),ee.changeMultuplyPlus(se.eq(he),se),se.each((Se,Te)=>{let Pe=$(Te),Be=parseInt(Pe.attr("move")),Ce;Pe.css("transition","all .4s ease"),Pe.hasClass("active")?Ce=0:(Ce=Be+_e,Pe.css("opacity","1")),Be==0&&(Ce=_e+ye),Ce<=-_e*4&&(Ce=xe*_e+ye+Ce,Pe.css("transition","none"),Pe.css("opacity","0")),Pe.css("--move",`${Ce}${be}`),Pe.attr("move",`${Ce}`)})}),se.each((we,Se)=>{let Te=$(Se);Te.on("click",()=>{let Pe=parseInt(Te.attr("multuply"));Pe==1&&oe.trigger("click"),Pe==2&&(oe.trigger("click"),oe.trigger("click")),Pe==3&&(oe.trigger("click"),oe.trigger("click"),oe.trigger("click"))})}),this.split(),this.scroll()}changeMultuply(ee,te){te.each((re,ne)=>{let se=$(ne),ae=parseInt(se.attr("multuply"));ae<0?ae=te.length-2:ae--,se.attr("multuply",ae)})}changeMultuplyPlus(ee,te){te.each((re,ne)=>{let se=$(ne),ae=parseInt(se.attr("multuply"));ae>te.length-2?ae=0:ae++,se.attr("multuply",ae)})}split(){$(".testimonial__fade--item").each((ee,te)=>{let re=$(te),ne=re.find(".f-38");new SplitText(ne,{type:"lines, chars",charsClass:"testimonial__word"}),re.find(".testimonial__word").each((ae,oe)=>{$(oe).css("--delay",`${ae*.01+.1}s`)})})}scroll(){let re=$(".testimonial__fade--list").find(".testimonial__fade--item").eq(0).find(".testimonial__name");ScrollTrigger.create({trigger:re,start:"top 80%",onEnter:()=>{}})}resize(ee,te,re){let ne=window.innerWidth;window.addEventListener("resize",()=>{let se=window.innerWidth;ne!==se&&ee.each((ae,oe)=>{let le=$(oe),he=parseInt(le.attr("move")),ce;le.css("transition","none"),le.hasClass("active")?ce=0:(ce=he+te,le.css("opacity","1")),he==0&&(ce=te+re),ce<=-te*4&&(ce=trackLength*te+re+ce,le.css("transition","none"),le.css("opacity","0")),le.css("--move",`${ce}em`),le.attr("move",`${ce}`)}),ne=se})}}gsapWithCSS.registerPlugin(ScrollTrigger,SplitText);class Quo{constructor(){let ee=gsapWithCSS.matchMedia(),te="(min-width: 991px)";ee.add(te,()=>{let re=$(".beliefs__sticky-parent"),ne=re.find(".beliefs__bot"),se=$(".beliefs__item");se.find(".beliefs__bot--img"),se.find(".beliefs__grid--descr"),re.find(".beliefs__bot-heading").outerHeight(),ne.append('<div class="beliefs__triggers"></div>');let oe=$(".beliefs__triggers");se.each((he,ce)=>{let de=$(ce),ue=de.find(".f-25"),fe=de.find(".f-16");de.find(".beliefs__bot--img"),de.find(".beliefs__grid--descr"),new SplitText(ue,{type:"words, chars",charsClass:"beliefs__char"}),new SplitText(fe,{type:"lines",linesClass:"beliefs__line"}),oe.append('<div class="beliefs__trigger"></div>'),de.find(".beliefs__char").each((xe,ge)=>{let _e=$(ge),ve=xe*.02+.4;_e.css("--delay",ve+"s")}),de.find(".beliefs__line").each((xe,ge)=>{let _e=$(ge),ve=xe*.1+.4;_e.css("--delay",ve+"s")})}),$(".beliefs__trigger").each((he,ce)=>{let de=$(ce),ue=se.eq(he);ScrollTrigger.create({trigger:de,start:"top 45%",end:"bottom 45%",onToggle:fe=>{fe.isActive?(se.removeClass("active"),ue.addClass("active")):ue.removeClass("active")}})})})}}class QuoteRemove{constructor(){let ee=$(".quoute__span.is--mob");window.innerWidth>480&&ee.remove()}}class Home{constructor(){document.querySelector("main").querySelector(".hero"),this.road=new Road,this.scrollParallax=new ScrollParallax,this.testimonials=new Testimonial,this.popups=new Popups,this.batch=new Batch$1,this.quo=new Quo,this.removeQuote=new QuoteRemove,this.quoute=new Quoute,this.footer=new Footer,this.heroName=new HeroName}}class Cursor{constructor(){let te=new App().scroll.lenis,re=this,ne=$(".cursor-wrapper"),se=ne.find(".cursor"),ae=0,oe=0;window.addEventListener("mousemove",le=>{ae=le.clientX,oe=le.clientY,gsapWithCSS.to(se,{duration:.3,x:ae,y:oe})}),this.changeCursor(se,ne),this.hoverLarge(ne),this.magnet(se,ne,te,re.invertCursor),this.hideCursor(ne)}invertCursor(ee){ee.attr("cursor-red")==""&&(ee.on("mouseenter",()=>$(".cursor").addClass("invert")),ee.on("mouseleave",()=>$(".cursor").removeClass("invert")))}hoverLarge(ee){$("[change-cursor-large]").each((re,ne)=>{let se=$(ne);se.on("mouseenter",()=>{ee.css("--size","9.58em")}),se.on("mouseleave",()=>{ee.css("--size","1.53em")})})}changeCursor(ee,te){$("[change-cursor]").each((ne,se)=>{let ae=$(se);ae.on("mouseenter",()=>{let oe=ae[0].getBoundingClientRect().left,le=ae[0].getBoundingClientRect().top,he=ae[0].getBoundingClientRect().width,ce=ae[0].getBoundingClientRect().height;ae[0].tagName=="SPAN"&&(oe=ae[0].getBoundingClientRect().left-5,le=ae[0].getBoundingClientRect().top,he=ae[0].getBoundingClientRect().width+10,ce=ae[0].getBoundingClientRect().height),ae.attr("expand")&&(oe=ae[0].getBoundingClientRect().left-10,le=ae[0].getBoundingClientRect().top-10,he=ae[0].getBoundingClientRect().width+20,ce=ae[0].getBoundingClientRect().height+20),ee.css("--left",`${oe}px`),ee.css("--top",`${le}px`),ee.css("--width",`${he}px`),ee.css("--height",`${ce}px`),ee.addClass("change")}),ae.on("mouseleave",()=>{te.css("--size","1.53em"),ee.removeClass("change")})})}magnet(ee,te,re,ne){$("[magnet-parent]").each((ae,oe)=>{let le=$(oe),he=le.find("[magnet-elem]");he.length==0&&(he=le),ne(le),le.on("mouseenter",()=>{le.addClass("magnet");let ce=he[0].getBoundingClientRect().left,de=he[0].getBoundingClientRect().top,ue=he[0].getBoundingClientRect().width,fe=he[0].getBoundingClientRect().height;le.attr("expand")=="true"&&(ce=he[0].getBoundingClientRect().left-10,de=he[0].getBoundingClientRect().top-10,ue=he[0].getBoundingClientRect().width+20,fe=he[0].getBoundingClientRect().height+20),ee.css("--left",`${ce}px`),ee.css("--top",`${de}px`),ee.css("--width",`${ue}px`),ee.css("--height",`${fe}px`),ee.addClass("change"),re.on("scroll",()=>{le.hasClass("magnet")&&(ce=he[0].getBoundingClientRect().left,de=he[0].getBoundingClientRect().top,ue=he[0].getBoundingClientRect().width,fe=he[0].getBoundingClientRect().height,le.attr("expand")=="true"&&(ce=he[0].getBoundingClientRect().left-10,de=he[0].getBoundingClientRect().top-10,ue=he[0].getBoundingClientRect().width+20,fe=he[0].getBoundingClientRect().height+20),ee.css("--left",`${ce}px`),ee.css("--top",`${de}px`),ee.css("--width",`${ue}px`),ee.css("--height",`${fe}px`))})}),le.on("mouseleave",()=>{te.css("--size","1.53em"),ee.removeClass("change"),le.removeClass("magnet")}),le.on("click",()=>{le.find("a").length>0&&(te.css("--size","1.53em"),ee.removeClass("change"),le.removeClass("magnet"))})})}hideCursor(ee){$("[hide-cursor]").each((re,ne)=>{let se=$(ne);se.on("mouseenter",()=>{ee.css("--size","0em")}),se.on("mouseleave",()=>{ee.css("--size","1.53em")})})}}gsapWithCSS.registerPlugin(ScrollTrigger);class ImgFade{constructor(){$("[img-fade]").each((te,re)=>{let ne=$(re);ScrollTrigger.create({trigger:ne,start:"top 80%",end:"bottom 20%",onEnter:()=>ne.addClass("faded")})})}}function isObject$1(ie){return ie!==null&&typeof ie=="object"&&"constructor"in ie&&ie.constructor===Object}function extend$1(ie={},ee={}){Object.keys(ee).forEach(te=>{typeof ie[te]=="undefined"?ie[te]=ee[te]:isObject$1(ee[te])&&isObject$1(ie[te])&&Object.keys(ee[te]).length>0&&extend$1(ie[te],ee[te])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const ie=typeof document!="undefined"?document:{};return extend$1(ie,ssrDocument),ie}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function ie(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(ie){return typeof setTimeout=="undefined"?(ie(),null):setTimeout(ie,0)},cancelAnimationFrame(ie){typeof setTimeout!="undefined"&&clearTimeout(ie)}};function getWindow(){const ie=typeof window!="undefined"?window:{};return extend$1(ie,ssrWindow),ie}function deleteProps(ie){const ee=ie;Object.keys(ee).forEach(te=>{try{ee[te]=null}catch{}try{delete ee[te]}catch{}})}function nextTick(ie,ee=0){return setTimeout(ie,ee)}function now(){return Date.now()}function getComputedStyle$1(ie){const ee=getWindow();let te;return ee.getComputedStyle&&(te=ee.getComputedStyle(ie,null)),!te&&ie.currentStyle&&(te=ie.currentStyle),te||(te=ie.style),te}function getTranslate(ie,ee="x"){const te=getWindow();let re,ne,se;const ae=getComputedStyle$1(ie);return te.WebKitCSSMatrix?(ne=ae.transform||ae.webkitTransform,ne.split(",").length>6&&(ne=ne.split(", ").map(oe=>oe.replace(",",".")).join(", ")),se=new te.WebKitCSSMatrix(ne==="none"?"":ne)):(se=ae.MozTransform||ae.OTransform||ae.MsTransform||ae.msTransform||ae.transform||ae.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),re=se.toString().split(",")),ee==="x"&&(te.WebKitCSSMatrix?ne=se.m41:re.length===16?ne=parseFloat(re[12]):ne=parseFloat(re[4])),ee==="y"&&(te.WebKitCSSMatrix?ne=se.m42:re.length===16?ne=parseFloat(re[13]):ne=parseFloat(re[5])),ne||0}function isObject(ie){return typeof ie=="object"&&ie!==null&&ie.constructor&&Object.prototype.toString.call(ie).slice(8,-1)==="Object"}function isNode$1(ie){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?ie instanceof HTMLElement:ie&&(ie.nodeType===1||ie.nodeType===11)}function extend(...ie){const ee=Object(ie[0]),te=["__proto__","constructor","prototype"];for(let re=1;re<ie.length;re+=1){const ne=ie[re];if(ne!=null&&!isNode$1(ne)){const se=Object.keys(Object(ne)).filter(ae=>te.indexOf(ae)<0);for(let ae=0,oe=se.length;ae<oe;ae+=1){const le=se[ae],he=Object.getOwnPropertyDescriptor(ne,le);he!==void 0&&he.enumerable&&(isObject(ee[le])&&isObject(ne[le])?ne[le].__swiper__?ee[le]=ne[le]:extend(ee[le],ne[le]):!isObject(ee[le])&&isObject(ne[le])?(ee[le]={},ne[le].__swiper__?ee[le]=ne[le]:extend(ee[le],ne[le])):ee[le]=ne[le])}}}return ee}function setCSSProperty(ie,ee,te){ie.style.setProperty(ee,te)}function animateCSSModeScroll({swiper:ie,targetPosition:ee,side:te}){const re=getWindow(),ne=-ie.translate;let se=null,ae;const oe=ie.params.speed;ie.wrapperEl.style.scrollSnapType="none",re.cancelAnimationFrame(ie.cssModeFrameID);const le=ee>ne?"next":"prev",he=(de,ue)=>le==="next"&&de>=ue||le==="prev"&&de<=ue,ce=()=>{ae=new Date().getTime(),se===null&&(se=ae);const de=Math.max(Math.min((ae-se)/oe,1),0),ue=.5-Math.cos(de*Math.PI)/2;let fe=ne+ue*(ee-ne);if(he(fe,ee)&&(fe=ee),ie.wrapperEl.scrollTo({[te]:fe}),he(fe,ee)){ie.wrapperEl.style.overflow="hidden",ie.wrapperEl.style.scrollSnapType="",setTimeout(()=>{ie.wrapperEl.style.overflow="",ie.wrapperEl.scrollTo({[te]:fe})}),re.cancelAnimationFrame(ie.cssModeFrameID);return}ie.cssModeFrameID=re.requestAnimationFrame(ce)};ce()}function elementChildren(ie,ee=""){return[...ie.children].filter(te=>te.matches(ee))}function createElement(ie,ee=[]){const te=document.createElement(ie);return te.classList.add(...Array.isArray(ee)?ee:[ee]),te}function elementPrevAll(ie,ee){const te=[];for(;ie.previousElementSibling;){const re=ie.previousElementSibling;ee?re.matches(ee)&&te.push(re):te.push(re),ie=re}return te}function elementNextAll(ie,ee){const te=[];for(;ie.nextElementSibling;){const re=ie.nextElementSibling;ee?re.matches(ee)&&te.push(re):te.push(re),ie=re}return te}function elementStyle(ie,ee){return getWindow().getComputedStyle(ie,null).getPropertyValue(ee)}function elementIndex(ie){let ee=ie,te;if(ee){for(te=0;(ee=ee.previousSibling)!==null;)ee.nodeType===1&&(te+=1);return te}}function elementParents(ie,ee){const te=[];let re=ie.parentElement;for(;re;)ee?re.matches(ee)&&te.push(re):te.push(re),re=re.parentElement;return te}function elementTransitionEnd(ie,ee){function te(re){re.target===ie&&(ee.call(ie,re),ie.removeEventListener("transitionend",te))}ee&&ie.addEventListener("transitionend",te)}function elementOuterSize(ie,ee,te){const re=getWindow();return te?ie[ee==="width"?"offsetWidth":"offsetHeight"]+parseFloat(re.getComputedStyle(ie,null).getPropertyValue(ee==="width"?"margin-right":"margin-top"))+parseFloat(re.getComputedStyle(ie,null).getPropertyValue(ee==="width"?"margin-left":"margin-bottom")):ie.offsetWidth}let support;function calcSupport(){const ie=getWindow(),ee=getDocument();return{smoothScroll:ee.documentElement&&"scrollBehavior"in ee.documentElement.style,touch:!!("ontouchstart"in ie||ie.DocumentTouch&&ee instanceof ie.DocumentTouch)}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice({userAgent:ie}={}){const ee=getSupport(),te=getWindow(),re=te.navigator.platform,ne=ie||te.navigator.userAgent,se={ios:!1,android:!1},ae=te.screen.width,oe=te.screen.height,le=ne.match(/(Android);?[\s\/]+([\d.]+)?/);let he=ne.match(/(iPad).*OS\s([\d_]+)/);const ce=ne.match(/(iPod)(.*OS\s([\d_]+))?/),de=!he&&ne.match(/(iPhone\sOS|iOS)\s([\d_]+)/),ue=re==="Win32";let fe=re==="MacIntel";const pe=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!he&&fe&&ee.touch&&pe.indexOf(`${ae}x${oe}`)>=0&&(he=ne.match(/(Version)\/([\d.]+)/),he||(he=[0,1,"13_0_0"]),fe=!1),le&&!ue&&(se.os="android",se.android=!0),(he||de||ce)&&(se.os="ios",se.ios=!0),se}function getDevice(ie={}){return deviceCached||(deviceCached=calcDevice(ie)),deviceCached}let browser;function calcBrowser(){const ie=getWindow();let ee=!1;function te(){const re=ie.navigator.userAgent.toLowerCase();return re.indexOf("safari")>=0&&re.indexOf("chrome")<0&&re.indexOf("android")<0}if(te()){const re=String(ie.navigator.userAgent);if(re.includes("Version/")){const[ne,se]=re.split("Version/")[1].split(" ")[0].split(".").map(ae=>Number(ae));ee=ne<16||ne===16&&se<2}}return{isSafari:ee||te(),needPerspectiveFix:ee,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(ie.navigator.userAgent)}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize$1({swiper:ie,on:ee,emit:te}){const re=getWindow();let ne=null,se=null;const ae=()=>{!ie||ie.destroyed||!ie.initialized||(te("beforeResize"),te("resize"))},oe=()=>{!ie||ie.destroyed||!ie.initialized||(ne=new ResizeObserver(ce=>{se=re.requestAnimationFrame(()=>{const{width:de,height:ue}=ie;let fe=de,pe=ue;ce.forEach(({contentBoxSize:me,contentRect:xe,target:ge})=>{ge&&ge!==ie.el||(fe=xe?xe.width:(me[0]||me).inlineSize,pe=xe?xe.height:(me[0]||me).blockSize)}),(fe!==de||pe!==ue)&&ae()})}),ne.observe(ie.el))},le=()=>{se&&re.cancelAnimationFrame(se),ne&&ne.unobserve&&ie.el&&(ne.unobserve(ie.el),ne=null)},he=()=>{!ie||ie.destroyed||!ie.initialized||te("orientationchange")};ee("init",()=>{if(ie.params.resizeObserver&&typeof re.ResizeObserver!="undefined"){oe();return}re.addEventListener("resize",ae),re.addEventListener("orientationchange",he)}),ee("destroy",()=>{le(),re.removeEventListener("resize",ae),re.removeEventListener("orientationchange",he)})}function Observer({swiper:ie,extendParams:ee,on:te,emit:re}){const ne=[],se=getWindow(),ae=(he,ce={})=>{const de=se.MutationObserver||se.WebkitMutationObserver,ue=new de(fe=>{if(ie.__preventObserver__)return;if(fe.length===1){re("observerUpdate",fe[0]);return}const pe=function(){re("observerUpdate",fe[0])};se.requestAnimationFrame?se.requestAnimationFrame(pe):se.setTimeout(pe,0)});ue.observe(he,{attributes:typeof ce.attributes=="undefined"?!0:ce.attributes,childList:typeof ce.childList=="undefined"?!0:ce.childList,characterData:typeof ce.characterData=="undefined"?!0:ce.characterData}),ne.push(ue)},oe=()=>{if(!!ie.params.observer){if(ie.params.observeParents){const he=elementParents(ie.el);for(let ce=0;ce<he.length;ce+=1)ae(he[ce])}ae(ie.el,{childList:ie.params.observeSlideChildren}),ae(ie.wrapperEl,{attributes:!1})}},le=()=>{ne.forEach(he=>{he.disconnect()}),ne.splice(0,ne.length)};ee({observer:!1,observeParents:!1,observeSlideChildren:!1}),te("init",oe),te("destroy",le)}var eventsEmitter={on(ie,ee,te){const re=this;if(!re.eventsListeners||re.destroyed||typeof ee!="function")return re;const ne=te?"unshift":"push";return ie.split(" ").forEach(se=>{re.eventsListeners[se]||(re.eventsListeners[se]=[]),re.eventsListeners[se][ne](ee)}),re},once(ie,ee,te){const re=this;if(!re.eventsListeners||re.destroyed||typeof ee!="function")return re;function ne(...se){re.off(ie,ne),ne.__emitterProxy&&delete ne.__emitterProxy,ee.apply(re,se)}return ne.__emitterProxy=ee,re.on(ie,ne,te)},onAny(ie,ee){const te=this;if(!te.eventsListeners||te.destroyed||typeof ie!="function")return te;const re=ee?"unshift":"push";return te.eventsAnyListeners.indexOf(ie)<0&&te.eventsAnyListeners[re](ie),te},offAny(ie){const ee=this;if(!ee.eventsListeners||ee.destroyed||!ee.eventsAnyListeners)return ee;const te=ee.eventsAnyListeners.indexOf(ie);return te>=0&&ee.eventsAnyListeners.splice(te,1),ee},off(ie,ee){const te=this;return!te.eventsListeners||te.destroyed||!te.eventsListeners||ie.split(" ").forEach(re=>{typeof ee=="undefined"?te.eventsListeners[re]=[]:te.eventsListeners[re]&&te.eventsListeners[re].forEach((ne,se)=>{(ne===ee||ne.__emitterProxy&&ne.__emitterProxy===ee)&&te.eventsListeners[re].splice(se,1)})}),te},emit(...ie){const ee=this;if(!ee.eventsListeners||ee.destroyed||!ee.eventsListeners)return ee;let te,re,ne;return typeof ie[0]=="string"||Array.isArray(ie[0])?(te=ie[0],re=ie.slice(1,ie.length),ne=ee):(te=ie[0].events,re=ie[0].data,ne=ie[0].context||ee),re.unshift(ne),(Array.isArray(te)?te:te.split(" ")).forEach(ae=>{ee.eventsAnyListeners&&ee.eventsAnyListeners.length&&ee.eventsAnyListeners.forEach(oe=>{oe.apply(ne,[ae,...re])}),ee.eventsListeners&&ee.eventsListeners[ae]&&ee.eventsListeners[ae].forEach(oe=>{oe.apply(ne,re)})}),ee}};function updateSize(){const ie=this;let ee,te;const re=ie.el;typeof ie.params.width!="undefined"&&ie.params.width!==null?ee=ie.params.width:ee=re.clientWidth,typeof ie.params.height!="undefined"&&ie.params.height!==null?te=ie.params.height:te=re.clientHeight,!(ee===0&&ie.isHorizontal()||te===0&&ie.isVertical())&&(ee=ee-parseInt(elementStyle(re,"padding-left")||0,10)-parseInt(elementStyle(re,"padding-right")||0,10),te=te-parseInt(elementStyle(re,"padding-top")||0,10)-parseInt(elementStyle(re,"padding-bottom")||0,10),Number.isNaN(ee)&&(ee=0),Number.isNaN(te)&&(te=0),Object.assign(ie,{width:ee,height:te,size:ie.isHorizontal()?ee:te}))}function updateSlides(){const ie=this;function ee(Ce){return ie.isHorizontal()?Ce:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Ce]}function te(Ce,De){return parseFloat(Ce.getPropertyValue(ee(De))||0)}const re=ie.params,{wrapperEl:ne,slidesEl:se,size:ae,rtlTranslate:oe,wrongRTL:le}=ie,he=ie.virtual&&re.virtual.enabled,ce=he?ie.virtual.slides.length:ie.slides.length,de=elementChildren(se,`.${ie.params.slideClass}, swiper-slide`),ue=he?ie.virtual.slides.length:de.length;let fe=[];const pe=[],me=[];let xe=re.slidesOffsetBefore;typeof xe=="function"&&(xe=re.slidesOffsetBefore.call(ie));let ge=re.slidesOffsetAfter;typeof ge=="function"&&(ge=re.slidesOffsetAfter.call(ie));const _e=ie.snapGrid.length,ve=ie.slidesGrid.length;let ye=re.spaceBetween,be=-xe,we=0,Se=0;if(typeof ae=="undefined")return;typeof ye=="string"&&ye.indexOf("%")>=0?ye=parseFloat(ye.replace("%",""))/100*ae:typeof ye=="string"&&(ye=parseFloat(ye)),ie.virtualSize=-ye,de.forEach(Ce=>{oe?Ce.style.marginLeft="":Ce.style.marginRight="",Ce.style.marginBottom="",Ce.style.marginTop=""}),re.centeredSlides&&re.cssMode&&(setCSSProperty(ne,"--swiper-centered-offset-before",""),setCSSProperty(ne,"--swiper-centered-offset-after",""));const Te=re.grid&&re.grid.rows>1&&ie.grid;Te&&ie.grid.initSlides(ue);let Pe;const Be=re.slidesPerView==="auto"&&re.breakpoints&&Object.keys(re.breakpoints).filter(Ce=>typeof re.breakpoints[Ce].slidesPerView!="undefined").length>0;for(let Ce=0;Ce<ue;Ce+=1){Pe=0;let De;if(de[Ce]&&(De=de[Ce]),Te&&ie.grid.updateSlide(Ce,De,ue,ee),!(de[Ce]&&elementStyle(De,"display")==="none")){if(re.slidesPerView==="auto"){Be&&(de[Ce].style[ee("width")]="");const Re=getComputedStyle(De),Le=De.style.transform,ke=De.style.webkitTransform;if(Le&&(De.style.transform="none"),ke&&(De.style.webkitTransform="none"),re.roundLengths)Pe=ie.isHorizontal()?elementOuterSize(De,"width",!0):elementOuterSize(De,"height",!0);else{const Me=te(Re,"width"),Ee=te(Re,"padding-left"),Ae=te(Re,"padding-right"),Ie=te(Re,"margin-left"),Fe=te(Re,"margin-right"),Ne=Re.getPropertyValue("box-sizing");if(Ne&&Ne==="border-box")Pe=Me+Ie+Fe;else{const{clientWidth:$e,offsetWidth:ze}=De;Pe=Me+Ee+Ae+Ie+Fe+(ze-$e)}}Le&&(De.style.transform=Le),ke&&(De.style.webkitTransform=ke),re.roundLengths&&(Pe=Math.floor(Pe))}else Pe=(ae-(re.slidesPerView-1)*ye)/re.slidesPerView,re.roundLengths&&(Pe=Math.floor(Pe)),de[Ce]&&(de[Ce].style[ee("width")]=`${Pe}px`);de[Ce]&&(de[Ce].swiperSlideSize=Pe),me.push(Pe),re.centeredSlides?(be=be+Pe/2+we/2+ye,we===0&&Ce!==0&&(be=be-ae/2-ye),Ce===0&&(be=be-ae/2-ye),Math.abs(be)<1/1e3&&(be=0),re.roundLengths&&(be=Math.floor(be)),Se%re.slidesPerGroup===0&&fe.push(be),pe.push(be)):(re.roundLengths&&(be=Math.floor(be)),(Se-Math.min(ie.params.slidesPerGroupSkip,Se))%ie.params.slidesPerGroup===0&&fe.push(be),pe.push(be),be=be+Pe+ye),ie.virtualSize+=Pe+ye,we=Pe,Se+=1}}if(ie.virtualSize=Math.max(ie.virtualSize,ae)+ge,oe&&le&&(re.effect==="slide"||re.effect==="coverflow")&&(ne.style.width=`${ie.virtualSize+ye}px`),re.setWrapperSize&&(ne.style[ee("width")]=`${ie.virtualSize+ye}px`),Te&&ie.grid.updateWrapperSize(Pe,fe,ee),!re.centeredSlides){const Ce=[];for(let De=0;De<fe.length;De+=1){let Re=fe[De];re.roundLengths&&(Re=Math.floor(Re)),fe[De]<=ie.virtualSize-ae&&Ce.push(Re)}fe=Ce,Math.floor(ie.virtualSize-ae)-Math.floor(fe[fe.length-1])>1&&fe.push(ie.virtualSize-ae)}if(he&&re.loop){const Ce=me[0]+ye;if(re.slidesPerGroup>1){const De=Math.ceil((ie.virtual.slidesBefore+ie.virtual.slidesAfter)/re.slidesPerGroup),Re=Ce*re.slidesPerGroup;for(let Le=0;Le<De;Le+=1)fe.push(fe[fe.length-1]+Re)}for(let De=0;De<ie.virtual.slidesBefore+ie.virtual.slidesAfter;De+=1)re.slidesPerGroup===1&&fe.push(fe[fe.length-1]+Ce),pe.push(pe[pe.length-1]+Ce),ie.virtualSize+=Ce}if(fe.length===0&&(fe=[0]),ye!==0){const Ce=ie.isHorizontal()&&oe?"marginLeft":ee("marginRight");de.filter((De,Re)=>!re.cssMode||re.loop?!0:Re!==de.length-1).forEach(De=>{De.style[Ce]=`${ye}px`})}if(re.centeredSlides&&re.centeredSlidesBounds){let Ce=0;me.forEach(Re=>{Ce+=Re+(ye||0)}),Ce-=ye;const De=Ce-ae;fe=fe.map(Re=>Re<0?-xe:Re>De?De+ge:Re)}if(re.centerInsufficientSlides){let Ce=0;if(me.forEach(De=>{Ce+=De+(ye||0)}),Ce-=ye,Ce<ae){const De=(ae-Ce)/2;fe.forEach((Re,Le)=>{fe[Le]=Re-De}),pe.forEach((Re,Le)=>{pe[Le]=Re+De})}}if(Object.assign(ie,{slides:de,snapGrid:fe,slidesGrid:pe,slidesSizesGrid:me}),re.centeredSlides&&re.cssMode&&!re.centeredSlidesBounds){setCSSProperty(ne,"--swiper-centered-offset-before",`${-fe[0]}px`),setCSSProperty(ne,"--swiper-centered-offset-after",`${ie.size/2-me[me.length-1]/2}px`);const Ce=-ie.snapGrid[0],De=-ie.slidesGrid[0];ie.snapGrid=ie.snapGrid.map(Re=>Re+Ce),ie.slidesGrid=ie.slidesGrid.map(Re=>Re+De)}if(ue!==ce&&ie.emit("slidesLengthChange"),fe.length!==_e&&(ie.params.watchOverflow&&ie.checkOverflow(),ie.emit("snapGridLengthChange")),pe.length!==ve&&ie.emit("slidesGridLengthChange"),re.watchSlidesProgress&&ie.updateSlidesOffset(),!he&&!re.cssMode&&(re.effect==="slide"||re.effect==="fade")){const Ce=`${re.containerModifierClass}backface-hidden`,De=ie.el.classList.contains(Ce);ue<=re.maxBackfaceHiddenSlides?De||ie.el.classList.add(Ce):De&&ie.el.classList.remove(Ce)}}function updateAutoHeight(ie){const ee=this,te=[],re=ee.virtual&&ee.params.virtual.enabled;let ne=0,se;typeof ie=="number"?ee.setTransition(ie):ie===!0&&ee.setTransition(ee.params.speed);const ae=oe=>re?ee.slides[ee.getSlideIndexByData(oe)]:ee.slides[oe];if(ee.params.slidesPerView!=="auto"&&ee.params.slidesPerView>1)if(ee.params.centeredSlides)(ee.visibleSlides||[]).forEach(oe=>{te.push(oe)});else for(se=0;se<Math.ceil(ee.params.slidesPerView);se+=1){const oe=ee.activeIndex+se;if(oe>ee.slides.length&&!re)break;te.push(ae(oe))}else te.push(ae(ee.activeIndex));for(se=0;se<te.length;se+=1)if(typeof te[se]!="undefined"){const oe=te[se].offsetHeight;ne=oe>ne?oe:ne}(ne||ne===0)&&(ee.wrapperEl.style.height=`${ne}px`)}function updateSlidesOffset(){const ie=this,ee=ie.slides,te=ie.isElement?ie.isHorizontal()?ie.wrapperEl.offsetLeft:ie.wrapperEl.offsetTop:0;for(let re=0;re<ee.length;re+=1)ee[re].swiperSlideOffset=(ie.isHorizontal()?ee[re].offsetLeft:ee[re].offsetTop)-te-ie.cssOverflowAdjustment()}function updateSlidesProgress(ie=this&&this.translate||0){const ee=this,te=ee.params,{slides:re,rtlTranslate:ne,snapGrid:se}=ee;if(re.length===0)return;typeof re[0].swiperSlideOffset=="undefined"&&ee.updateSlidesOffset();let ae=-ie;ne&&(ae=ie),re.forEach(le=>{le.classList.remove(te.slideVisibleClass)}),ee.visibleSlidesIndexes=[],ee.visibleSlides=[];let oe=te.spaceBetween;typeof oe=="string"&&oe.indexOf("%")>=0?oe=parseFloat(oe.replace("%",""))/100*ee.size:typeof oe=="string"&&(oe=parseFloat(oe));for(let le=0;le<re.length;le+=1){const he=re[le];let ce=he.swiperSlideOffset;te.cssMode&&te.centeredSlides&&(ce-=re[0].swiperSlideOffset);const de=(ae+(te.centeredSlides?ee.minTranslate():0)-ce)/(he.swiperSlideSize+oe),ue=(ae-se[0]+(te.centeredSlides?ee.minTranslate():0)-ce)/(he.swiperSlideSize+oe),fe=-(ae-ce),pe=fe+ee.slidesSizesGrid[le];(fe>=0&&fe<ee.size-1||pe>1&&pe<=ee.size||fe<=0&&pe>=ee.size)&&(ee.visibleSlides.push(he),ee.visibleSlidesIndexes.push(le),re[le].classList.add(te.slideVisibleClass)),he.progress=ne?-de:de,he.originalProgress=ne?-ue:ue}}function updateProgress(ie){const ee=this;if(typeof ie=="undefined"){const ce=ee.rtlTranslate?-1:1;ie=ee&&ee.translate&&ee.translate*ce||0}const te=ee.params,re=ee.maxTranslate()-ee.minTranslate();let{progress:ne,isBeginning:se,isEnd:ae,progressLoop:oe}=ee;const le=se,he=ae;if(re===0)ne=0,se=!0,ae=!0;else{ne=(ie-ee.minTranslate())/re;const ce=Math.abs(ie-ee.minTranslate())<1,de=Math.abs(ie-ee.maxTranslate())<1;se=ce||ne<=0,ae=de||ne>=1,ce&&(ne=0),de&&(ne=1)}if(te.loop){const ce=ee.getSlideIndexByData(0),de=ee.getSlideIndexByData(ee.slides.length-1),ue=ee.slidesGrid[ce],fe=ee.slidesGrid[de],pe=ee.slidesGrid[ee.slidesGrid.length-1],me=Math.abs(ie);me>=ue?oe=(me-ue)/pe:oe=(me+pe-fe)/pe,oe>1&&(oe-=1)}Object.assign(ee,{progress:ne,progressLoop:oe,isBeginning:se,isEnd:ae}),(te.watchSlidesProgress||te.centeredSlides&&te.autoHeight)&&ee.updateSlidesProgress(ie),se&&!le&&ee.emit("reachBeginning toEdge"),ae&&!he&&ee.emit("reachEnd toEdge"),(le&&!se||he&&!ae)&&ee.emit("fromEdge"),ee.emit("progress",ne)}function updateSlidesClasses(){const ie=this,{slides:ee,params:te,slidesEl:re,activeIndex:ne}=ie,se=ie.virtual&&te.virtual.enabled,ae=le=>elementChildren(re,`.${te.slideClass}${le}, swiper-slide${le}`)[0];ee.forEach(le=>{le.classList.remove(te.slideActiveClass,te.slideNextClass,te.slidePrevClass)});let oe;if(se)if(te.loop){let le=ne-ie.virtual.slidesBefore;le<0&&(le=ie.virtual.slides.length+le),le>=ie.virtual.slides.length&&(le-=ie.virtual.slides.length),oe=ae(`[data-swiper-slide-index="${le}"]`)}else oe=ae(`[data-swiper-slide-index="${ne}"]`);else oe=ee[ne];if(oe){oe.classList.add(te.slideActiveClass);let le=elementNextAll(oe,`.${te.slideClass}, swiper-slide`)[0];te.loop&&!le&&(le=ee[0]),le&&le.classList.add(te.slideNextClass);let he=elementPrevAll(oe,`.${te.slideClass}, swiper-slide`)[0];te.loop&&!he===0&&(he=ee[ee.length-1]),he&&he.classList.add(te.slidePrevClass)}ie.emitSlidesClasses()}const processLazyPreloader=(ie,ee)=>{if(!ie||ie.destroyed||!ie.params)return;const te=()=>ie.isElement?"swiper-slide":`.${ie.params.slideClass}`,re=ee.closest(te());if(re){const ne=re.querySelector(`.${ie.params.lazyPreloaderClass}`);ne&&ne.remove()}},unlazy=(ie,ee)=>{if(!ie.slides[ee])return;const te=ie.slides[ee].querySelector('[loading="lazy"]');te&&te.removeAttribute("loading")},preload=ie=>{if(!ie||ie.destroyed||!ie.params)return;let ee=ie.params.lazyPreloadPrevNext;const te=ie.slides.length;if(!te||!ee||ee<0)return;ee=Math.min(ee,te);const re=ie.params.slidesPerView==="auto"?ie.slidesPerViewDynamic():Math.ceil(ie.params.slidesPerView),ne=ie.activeIndex,se=ne+re-1;if(ie.params.rewind)for(let ae=ne-ee;ae<=se+ee;ae+=1){const oe=(ae%te+te)%te;oe!==ne&&oe>se&&unlazy(ie,oe)}else for(let ae=Math.max(se-ee,0);ae<=Math.min(se+ee,te-1);ae+=1)ae!==ne&&ae>se&&unlazy(ie,ae)};function getActiveIndexByTranslate(ie){const{slidesGrid:ee,params:te}=ie,re=ie.rtlTranslate?ie.translate:-ie.translate;let ne;for(let se=0;se<ee.length;se+=1)typeof ee[se+1]!="undefined"?re>=ee[se]&&re<ee[se+1]-(ee[se+1]-ee[se])/2?ne=se:re>=ee[se]&&re<ee[se+1]&&(ne=se+1):re>=ee[se]&&(ne=se);return te.normalizeSlideIndex&&(ne<0||typeof ne=="undefined")&&(ne=0),ne}function updateActiveIndex(ie){const ee=this,te=ee.rtlTranslate?ee.translate:-ee.translate,{snapGrid:re,params:ne,activeIndex:se,realIndex:ae,snapIndex:oe}=ee;let le=ie,he;const ce=ue=>{let fe=ue-ee.virtual.slidesBefore;return fe<0&&(fe=ee.virtual.slides.length+fe),fe>=ee.virtual.slides.length&&(fe-=ee.virtual.slides.length),fe};if(typeof le=="undefined"&&(le=getActiveIndexByTranslate(ee)),re.indexOf(te)>=0)he=re.indexOf(te);else{const ue=Math.min(ne.slidesPerGroupSkip,le);he=ue+Math.floor((le-ue)/ne.slidesPerGroup)}if(he>=re.length&&(he=re.length-1),le===se){he!==oe&&(ee.snapIndex=he,ee.emit("snapIndexChange")),ee.params.loop&&ee.virtual&&ee.params.virtual.enabled&&(ee.realIndex=ce(le));return}let de;ee.virtual&&ne.virtual.enabled&&ne.loop?de=ce(le):ee.slides[le]?de=parseInt(ee.slides[le].getAttribute("data-swiper-slide-index")||le,10):de=le,Object.assign(ee,{previousSnapIndex:oe,snapIndex:he,previousRealIndex:ae,realIndex:de,previousIndex:se,activeIndex:le}),ee.initialized&&preload(ee),ee.emit("activeIndexChange"),ee.emit("snapIndexChange"),ae!==de&&ee.emit("realIndexChange"),(ee.initialized||ee.params.runCallbacksOnInit)&&ee.emit("slideChange")}function updateClickedSlide(ie){const ee=this,te=ee.params,re=ie.closest(`.${te.slideClass}, swiper-slide`);let ne=!1,se;if(re){for(let ae=0;ae<ee.slides.length;ae+=1)if(ee.slides[ae]===re){ne=!0,se=ae;break}}if(re&&ne)ee.clickedSlide=re,ee.virtual&&ee.params.virtual.enabled?ee.clickedIndex=parseInt(re.getAttribute("data-swiper-slide-index"),10):ee.clickedIndex=se;else{ee.clickedSlide=void 0,ee.clickedIndex=void 0;return}te.slideToClickedSlide&&ee.clickedIndex!==void 0&&ee.clickedIndex!==ee.activeIndex&&ee.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(ie=this.isHorizontal()?"x":"y"){const ee=this,{params:te,rtlTranslate:re,translate:ne,wrapperEl:se}=ee;if(te.virtualTranslate)return re?-ne:ne;if(te.cssMode)return ne;let ae=getTranslate(se,ie);return ae+=ee.cssOverflowAdjustment(),re&&(ae=-ae),ae||0}function setTranslate(ie,ee){const te=this,{rtlTranslate:re,params:ne,wrapperEl:se,progress:ae}=te;let oe=0,le=0;const he=0;te.isHorizontal()?oe=re?-ie:ie:le=ie,ne.roundLengths&&(oe=Math.floor(oe),le=Math.floor(le)),te.previousTranslate=te.translate,te.translate=te.isHorizontal()?oe:le,ne.cssMode?se[te.isHorizontal()?"scrollLeft":"scrollTop"]=te.isHorizontal()?-oe:-le:ne.virtualTranslate||(te.isHorizontal()?oe-=te.cssOverflowAdjustment():le-=te.cssOverflowAdjustment(),se.style.transform=`translate3d(${oe}px, ${le}px, ${he}px)`);let ce;const de=te.maxTranslate()-te.minTranslate();de===0?ce=0:ce=(ie-te.minTranslate())/de,ce!==ae&&te.updateProgress(ie),te.emit("setTranslate",te.translate,ee)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(ie=0,ee=this.params.speed,te=!0,re=!0,ne){const se=this,{params:ae,wrapperEl:oe}=se;if(se.animating&&ae.preventInteractionOnTransition)return!1;const le=se.minTranslate(),he=se.maxTranslate();let ce;if(re&&ie>le?ce=le:re&&ie<he?ce=he:ce=ie,se.updateProgress(ce),ae.cssMode){const de=se.isHorizontal();if(ee===0)oe[de?"scrollLeft":"scrollTop"]=-ce;else{if(!se.support.smoothScroll)return animateCSSModeScroll({swiper:se,targetPosition:-ce,side:de?"left":"top"}),!0;oe.scrollTo({[de?"left":"top"]:-ce,behavior:"smooth"})}return!0}return ee===0?(se.setTransition(0),se.setTranslate(ce),te&&(se.emit("beforeTransitionStart",ee,ne),se.emit("transitionEnd"))):(se.setTransition(ee),se.setTranslate(ce),te&&(se.emit("beforeTransitionStart",ee,ne),se.emit("transitionStart")),se.animating||(se.animating=!0,se.onTranslateToWrapperTransitionEnd||(se.onTranslateToWrapperTransitionEnd=function(ue){!se||se.destroyed||ue.target===this&&(se.wrapperEl.removeEventListener("transitionend",se.onTranslateToWrapperTransitionEnd),se.onTranslateToWrapperTransitionEnd=null,delete se.onTranslateToWrapperTransitionEnd,te&&se.emit("transitionEnd"))}),se.wrapperEl.addEventListener("transitionend",se.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(ie,ee){const te=this;te.params.cssMode||(te.wrapperEl.style.transitionDuration=`${ie}ms`),te.emit("setTransition",ie,ee)}function transitionEmit({swiper:ie,runCallbacks:ee,direction:te,step:re}){const{activeIndex:ne,previousIndex:se}=ie;let ae=te;if(ae||(ne>se?ae="next":ne<se?ae="prev":ae="reset"),ie.emit(`transition${re}`),ee&&ne!==se){if(ae==="reset"){ie.emit(`slideResetTransition${re}`);return}ie.emit(`slideChangeTransition${re}`),ae==="next"?ie.emit(`slideNextTransition${re}`):ie.emit(`slidePrevTransition${re}`)}}function transitionStart(ie=!0,ee){const te=this,{params:re}=te;re.cssMode||(re.autoHeight&&te.updateAutoHeight(),transitionEmit({swiper:te,runCallbacks:ie,direction:ee,step:"Start"}))}function transitionEnd(ie=!0,ee){const te=this,{params:re}=te;te.animating=!1,!re.cssMode&&(te.setTransition(0),transitionEmit({swiper:te,runCallbacks:ie,direction:ee,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(ie=0,ee=this.params.speed,te=!0,re,ne){typeof ie=="string"&&(ie=parseInt(ie,10));const se=this;let ae=ie;ae<0&&(ae=0);const{params:oe,snapGrid:le,slidesGrid:he,previousIndex:ce,activeIndex:de,rtlTranslate:ue,wrapperEl:fe,enabled:pe}=se;if(se.animating&&oe.preventInteractionOnTransition||!pe&&!re&&!ne)return!1;const me=Math.min(se.params.slidesPerGroupSkip,ae);let xe=me+Math.floor((ae-me)/se.params.slidesPerGroup);xe>=le.length&&(xe=le.length-1);const ge=-le[xe];if(oe.normalizeSlideIndex)for(let ve=0;ve<he.length;ve+=1){const ye=-Math.floor(ge*100),be=Math.floor(he[ve]*100),we=Math.floor(he[ve+1]*100);typeof he[ve+1]!="undefined"?ye>=be&&ye<we-(we-be)/2?ae=ve:ye>=be&&ye<we&&(ae=ve+1):ye>=be&&(ae=ve)}if(se.initialized&&ae!==de&&(!se.allowSlideNext&&ge<se.translate&&ge<se.minTranslate()||!se.allowSlidePrev&&ge>se.translate&&ge>se.maxTranslate()&&(de||0)!==ae))return!1;ae!==(ce||0)&&te&&se.emit("beforeSlideChangeStart"),se.updateProgress(ge);let _e;if(ae>de?_e="next":ae<de?_e="prev":_e="reset",ue&&-ge===se.translate||!ue&&ge===se.translate)return se.updateActiveIndex(ae),oe.autoHeight&&se.updateAutoHeight(),se.updateSlidesClasses(),oe.effect!=="slide"&&se.setTranslate(ge),_e!=="reset"&&(se.transitionStart(te,_e),se.transitionEnd(te,_e)),!1;if(oe.cssMode){const ve=se.isHorizontal(),ye=ue?ge:-ge;if(ee===0){const be=se.virtual&&se.params.virtual.enabled;be&&(se.wrapperEl.style.scrollSnapType="none",se._immediateVirtual=!0),be&&!se._cssModeVirtualInitialSet&&se.params.initialSlide>0?(se._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{fe[ve?"scrollLeft":"scrollTop"]=ye})):fe[ve?"scrollLeft":"scrollTop"]=ye,be&&requestAnimationFrame(()=>{se.wrapperEl.style.scrollSnapType="",se._immediateVirtual=!1})}else{if(!se.support.smoothScroll)return animateCSSModeScroll({swiper:se,targetPosition:ye,side:ve?"left":"top"}),!0;fe.scrollTo({[ve?"left":"top"]:ye,behavior:"smooth"})}return!0}return se.setTransition(ee),se.setTranslate(ge),se.updateActiveIndex(ae),se.updateSlidesClasses(),se.emit("beforeTransitionStart",ee,re),se.transitionStart(te,_e),ee===0?se.transitionEnd(te,_e):se.animating||(se.animating=!0,se.onSlideToWrapperTransitionEnd||(se.onSlideToWrapperTransitionEnd=function(ye){!se||se.destroyed||ye.target===this&&(se.wrapperEl.removeEventListener("transitionend",se.onSlideToWrapperTransitionEnd),se.onSlideToWrapperTransitionEnd=null,delete se.onSlideToWrapperTransitionEnd,se.transitionEnd(te,_e))}),se.wrapperEl.addEventListener("transitionend",se.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(ie=0,ee=this.params.speed,te=!0,re){typeof ie=="string"&&(ie=parseInt(ie,10));const ne=this;let se=ie;return ne.params.loop&&(ne.virtual&&ne.params.virtual.enabled?se=se+ne.virtual.slidesBefore:se=ne.getSlideIndexByData(se)),ne.slideTo(se,ee,te,re)}function slideNext(ie=this.params.speed,ee=!0,te){const re=this,{enabled:ne,params:se,animating:ae}=re;if(!ne)return re;let oe=se.slidesPerGroup;se.slidesPerView==="auto"&&se.slidesPerGroup===1&&se.slidesPerGroupAuto&&(oe=Math.max(re.slidesPerViewDynamic("current",!0),1));const le=re.activeIndex<se.slidesPerGroupSkip?1:oe,he=re.virtual&&se.virtual.enabled;if(se.loop){if(ae&&!he&&se.loopPreventsSliding)return!1;re.loopFix({direction:"next"}),re._clientLeft=re.wrapperEl.clientLeft}return se.rewind&&re.isEnd?re.slideTo(0,ie,ee,te):re.slideTo(re.activeIndex+le,ie,ee,te)}function slidePrev(ie=this.params.speed,ee=!0,te){const re=this,{params:ne,snapGrid:se,slidesGrid:ae,rtlTranslate:oe,enabled:le,animating:he}=re;if(!le)return re;const ce=re.virtual&&ne.virtual.enabled;if(ne.loop){if(he&&!ce&&ne.loopPreventsSliding)return!1;re.loopFix({direction:"prev"}),re._clientLeft=re.wrapperEl.clientLeft}const de=oe?re.translate:-re.translate;function ue(ge){return ge<0?-Math.floor(Math.abs(ge)):Math.floor(ge)}const fe=ue(de),pe=se.map(ge=>ue(ge));let me=se[pe.indexOf(fe)-1];if(typeof me=="undefined"&&ne.cssMode){let ge;se.forEach((_e,ve)=>{fe>=_e&&(ge=ve)}),typeof ge!="undefined"&&(me=se[ge>0?ge-1:ge])}let xe=0;if(typeof me!="undefined"&&(xe=ae.indexOf(me),xe<0&&(xe=re.activeIndex-1),ne.slidesPerView==="auto"&&ne.slidesPerGroup===1&&ne.slidesPerGroupAuto&&(xe=xe-re.slidesPerViewDynamic("previous",!0)+1,xe=Math.max(xe,0))),ne.rewind&&re.isBeginning){const ge=re.params.virtual&&re.params.virtual.enabled&&re.virtual?re.virtual.slides.length-1:re.slides.length-1;return re.slideTo(ge,ie,ee,te)}return re.slideTo(xe,ie,ee,te)}function slideReset(ie=this.params.speed,ee=!0,te){const re=this;return re.slideTo(re.activeIndex,ie,ee,te)}function slideToClosest(ie=this.params.speed,ee=!0,te,re=.5){const ne=this;let se=ne.activeIndex;const ae=Math.min(ne.params.slidesPerGroupSkip,se),oe=ae+Math.floor((se-ae)/ne.params.slidesPerGroup),le=ne.rtlTranslate?ne.translate:-ne.translate;if(le>=ne.snapGrid[oe]){const he=ne.snapGrid[oe],ce=ne.snapGrid[oe+1];le-he>(ce-he)*re&&(se+=ne.params.slidesPerGroup)}else{const he=ne.snapGrid[oe-1],ce=ne.snapGrid[oe];le-he<=(ce-he)*re&&(se-=ne.params.slidesPerGroup)}return se=Math.max(se,0),se=Math.min(se,ne.slidesGrid.length-1),ne.slideTo(se,ie,ee,te)}function slideToClickedSlide(){const ie=this,{params:ee,slidesEl:te}=ie,re=ee.slidesPerView==="auto"?ie.slidesPerViewDynamic():ee.slidesPerView;let ne=ie.clickedIndex,se;const ae=ie.isElement?"swiper-slide":`.${ee.slideClass}`;if(ee.loop){if(ie.animating)return;se=parseInt(ie.clickedSlide.getAttribute("data-swiper-slide-index"),10),ee.centeredSlides?ne<ie.loopedSlides-re/2||ne>ie.slides.length-ie.loopedSlides+re/2?(ie.loopFix(),ne=ie.getSlideIndex(elementChildren(te,`${ae}[data-swiper-slide-index="${se}"]`)[0]),nextTick(()=>{ie.slideTo(ne)})):ie.slideTo(ne):ne>ie.slides.length-re?(ie.loopFix(),ne=ie.getSlideIndex(elementChildren(te,`${ae}[data-swiper-slide-index="${se}"]`)[0]),nextTick(()=>{ie.slideTo(ne)})):ie.slideTo(ne)}else ie.slideTo(ne)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(ie){const ee=this,{params:te,slidesEl:re}=ee;if(!te.loop||ee.virtual&&ee.params.virtual.enabled)return;elementChildren(re,`.${te.slideClass}, swiper-slide`).forEach((se,ae)=>{se.setAttribute("data-swiper-slide-index",ae)}),ee.loopFix({slideRealIndex:ie,direction:te.centeredSlides?void 0:"next"})}function loopFix({slideRealIndex:ie,slideTo:ee=!0,direction:te,setTranslate:re,activeSlideIndex:ne,byController:se,byMousewheel:ae}={}){const oe=this;if(!oe.params.loop)return;oe.emit("beforeLoopFix");const{slides:le,allowSlidePrev:he,allowSlideNext:ce,slidesEl:de,params:ue}=oe;if(oe.allowSlidePrev=!0,oe.allowSlideNext=!0,oe.virtual&&ue.virtual.enabled){ee&&(!ue.centeredSlides&&oe.snapIndex===0?oe.slideTo(oe.virtual.slides.length,0,!1,!0):ue.centeredSlides&&oe.snapIndex<ue.slidesPerView?oe.slideTo(oe.virtual.slides.length+oe.snapIndex,0,!1,!0):oe.snapIndex===oe.snapGrid.length-1&&oe.slideTo(oe.virtual.slidesBefore,0,!1,!0)),oe.allowSlidePrev=he,oe.allowSlideNext=ce,oe.emit("loopFix");return}const fe=ue.slidesPerView==="auto"?oe.slidesPerViewDynamic():Math.ceil(parseFloat(ue.slidesPerView,10));let pe=ue.loopedSlides||fe;pe%ue.slidesPerGroup!==0&&(pe+=ue.slidesPerGroup-pe%ue.slidesPerGroup),oe.loopedSlides=pe;const me=[],xe=[];let ge=oe.activeIndex;typeof ne=="undefined"?ne=oe.getSlideIndex(oe.slides.filter(we=>we.classList.contains(ue.slideActiveClass))[0]):ge=ne;const _e=te==="next"||!te,ve=te==="prev"||!te;let ye=0,be=0;if(ne<pe){ye=Math.max(pe-ne,ue.slidesPerGroup);for(let we=0;we<pe-ne;we+=1){const Se=we-Math.floor(we/le.length)*le.length;me.push(le.length-Se-1)}}else if(ne>oe.slides.length-pe*2){be=Math.max(ne-(oe.slides.length-pe*2),ue.slidesPerGroup);for(let we=0;we<be;we+=1){const Se=we-Math.floor(we/le.length)*le.length;xe.push(Se)}}if(ve&&me.forEach(we=>{oe.slides[we].swiperLoopMoveDOM=!0,de.prepend(oe.slides[we]),oe.slides[we].swiperLoopMoveDOM=!1}),_e&&xe.forEach(we=>{oe.slides[we].swiperLoopMoveDOM=!0,de.append(oe.slides[we]),oe.slides[we].swiperLoopMoveDOM=!1}),oe.recalcSlides(),ue.slidesPerView==="auto"&&oe.updateSlides(),ue.watchSlidesProgress&&oe.updateSlidesOffset(),ee){if(me.length>0&&ve)if(typeof ie=="undefined"){const we=oe.slidesGrid[ge],Te=oe.slidesGrid[ge+ye]-we;ae?oe.setTranslate(oe.translate-Te):(oe.slideTo(ge+ye,0,!1,!0),re&&(oe.touches[oe.isHorizontal()?"startX":"startY"]+=Te))}else re&&oe.slideToLoop(ie,0,!1,!0);else if(xe.length>0&&_e)if(typeof ie=="undefined"){const we=oe.slidesGrid[ge],Te=oe.slidesGrid[ge-be]-we;ae?oe.setTranslate(oe.translate-Te):(oe.slideTo(ge-be,0,!1,!0),re&&(oe.touches[oe.isHorizontal()?"startX":"startY"]+=Te))}else oe.slideToLoop(ie,0,!1,!0)}if(oe.allowSlidePrev=he,oe.allowSlideNext=ce,oe.controller&&oe.controller.control&&!se){const we={slideRealIndex:ie,slideTo:!1,direction:te,setTranslate:re,activeSlideIndex:ne,byController:!0};Array.isArray(oe.controller.control)?oe.controller.control.forEach(Se=>{!Se.destroyed&&Se.params.loop&&Se.loopFix(we)}):oe.controller.control instanceof oe.constructor&&oe.controller.control.params.loop&&oe.controller.control.loopFix(we)}oe.emit("loopFix")}function loopDestroy(){const ie=this,{params:ee,slidesEl:te}=ie;if(!ee.loop||ie.virtual&&ie.params.virtual.enabled)return;ie.recalcSlides();const re=[];ie.slides.forEach(ne=>{const se=typeof ne.swiperSlideIndex=="undefined"?ne.getAttribute("data-swiper-slide-index")*1:ne.swiperSlideIndex;re[se]=ne}),ie.slides.forEach(ne=>{ne.removeAttribute("data-swiper-slide-index")}),re.forEach(ne=>{te.append(ne)}),ie.recalcSlides(),ie.slideTo(ie.realIndex,0)}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(ie){const ee=this;if(!ee.params.simulateTouch||ee.params.watchOverflow&&ee.isLocked||ee.params.cssMode)return;const te=ee.params.touchEventsTarget==="container"?ee.el:ee.wrapperEl;ee.isElement&&(ee.__preventObserver__=!0),te.style.cursor="move",te.style.cursor=ie?"grabbing":"grab",ee.isElement&&requestAnimationFrame(()=>{ee.__preventObserver__=!1})}function unsetGrabCursor(){const ie=this;ie.params.watchOverflow&&ie.isLocked||ie.params.cssMode||(ie.isElement&&(ie.__preventObserver__=!0),ie[ie.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",ie.isElement&&requestAnimationFrame(()=>{ie.__preventObserver__=!1}))}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(ie,ee=this){function te(re){if(!re||re===getDocument()||re===getWindow())return null;re.assignedSlot&&(re=re.assignedSlot);const ne=re.closest(ie);return!ne&&!re.getRootNode?null:ne||te(re.getRootNode().host)}return te(ee)}function onTouchStart(ie){const ee=this,te=getDocument(),re=getWindow(),ne=ee.touchEventsData;ne.evCache.push(ie);const{params:se,touches:ae,enabled:oe}=ee;if(!oe||!se.simulateTouch&&ie.pointerType==="mouse"||ee.animating&&se.preventInteractionOnTransition)return;!ee.animating&&se.cssMode&&se.loop&&ee.loopFix();let le=ie;le.originalEvent&&(le=le.originalEvent);let he=le.target;if(se.touchEventsTarget==="wrapper"&&!ee.wrapperEl.contains(he)||"which"in le&&le.which===3||"button"in le&&le.button>0||ne.isTouched&&ne.isMoved)return;const ce=!!se.noSwipingClass&&se.noSwipingClass!=="",de=ie.composedPath?ie.composedPath():ie.path;ce&&le.target&&le.target.shadowRoot&&de&&(he=de[0]);const ue=se.noSwipingSelector?se.noSwipingSelector:`.${se.noSwipingClass}`,fe=!!(le.target&&le.target.shadowRoot);if(se.noSwiping&&(fe?closestElement(ue,he):he.closest(ue))){ee.allowClick=!0;return}if(se.swipeHandler&&!he.closest(se.swipeHandler))return;ae.currentX=le.pageX,ae.currentY=le.pageY;const pe=ae.currentX,me=ae.currentY,xe=se.edgeSwipeDetection||se.iOSEdgeSwipeDetection,ge=se.edgeSwipeThreshold||se.iOSEdgeSwipeThreshold;if(xe&&(pe<=ge||pe>=re.innerWidth-ge))if(xe==="prevent")ie.preventDefault();else return;Object.assign(ne,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),ae.startX=pe,ae.startY=me,ne.touchStartTime=now(),ee.allowClick=!0,ee.updateSize(),ee.swipeDirection=void 0,se.threshold>0&&(ne.allowThresholdMove=!1);let _e=!0;he.matches(ne.focusableElements)&&(_e=!1,he.nodeName==="SELECT"&&(ne.isTouched=!1)),te.activeElement&&te.activeElement.matches(ne.focusableElements)&&te.activeElement!==he&&te.activeElement.blur();const ve=_e&&ee.allowTouchMove&&se.touchStartPreventDefault;(se.touchStartForcePreventDefault||ve)&&!he.isContentEditable&&le.preventDefault(),ee.params.freeMode&&ee.params.freeMode.enabled&&ee.freeMode&&ee.animating&&!se.cssMode&&ee.freeMode.onTouchStart(),ee.emit("touchStart",le)}function onTouchMove(ie){const ee=getDocument(),te=this,re=te.touchEventsData,{params:ne,touches:se,rtlTranslate:ae,enabled:oe}=te;if(!oe||!ne.simulateTouch&&ie.pointerType==="mouse")return;let le=ie;if(le.originalEvent&&(le=le.originalEvent),!re.isTouched){re.startMoving&&re.isScrolling&&te.emit("touchMoveOpposite",le);return}const he=re.evCache.findIndex(we=>we.pointerId===le.pointerId);he>=0&&(re.evCache[he]=le);const ce=re.evCache.length>1?re.evCache[0]:le,de=ce.pageX,ue=ce.pageY;if(le.preventedByNestedSwiper){se.startX=de,se.startY=ue;return}if(!te.allowTouchMove){le.target.matches(re.focusableElements)||(te.allowClick=!1),re.isTouched&&(Object.assign(se,{startX:de,startY:ue,prevX:te.touches.currentX,prevY:te.touches.currentY,currentX:de,currentY:ue}),re.touchStartTime=now());return}if(ne.touchReleaseOnEdges&&!ne.loop){if(te.isVertical()){if(ue<se.startY&&te.translate<=te.maxTranslate()||ue>se.startY&&te.translate>=te.minTranslate()){re.isTouched=!1,re.isMoved=!1;return}}else if(de<se.startX&&te.translate<=te.maxTranslate()||de>se.startX&&te.translate>=te.minTranslate())return}if(ee.activeElement&&le.target===ee.activeElement&&le.target.matches(re.focusableElements)){re.isMoved=!0,te.allowClick=!1;return}if(re.allowTouchCallbacks&&te.emit("touchMove",le),le.targetTouches&&le.targetTouches.length>1)return;se.currentX=de,se.currentY=ue;const fe=se.currentX-se.startX,pe=se.currentY-se.startY;if(te.params.threshold&&Math.sqrt(fe**2+pe**2)<te.params.threshold)return;if(typeof re.isScrolling=="undefined"){let we;te.isHorizontal()&&se.currentY===se.startY||te.isVertical()&&se.currentX===se.startX?re.isScrolling=!1:fe*fe+pe*pe>=25&&(we=Math.atan2(Math.abs(pe),Math.abs(fe))*180/Math.PI,re.isScrolling=te.isHorizontal()?we>ne.touchAngle:90-we>ne.touchAngle)}if(re.isScrolling&&te.emit("touchMoveOpposite",le),typeof re.startMoving=="undefined"&&(se.currentX!==se.startX||se.currentY!==se.startY)&&(re.startMoving=!0),re.isScrolling||te.zoom&&te.params.zoom&&te.params.zoom.enabled&&re.evCache.length>1){re.isTouched=!1;return}if(!re.startMoving)return;te.allowClick=!1,!ne.cssMode&&le.cancelable&&le.preventDefault(),ne.touchMoveStopPropagation&&!ne.nested&&le.stopPropagation();let me=te.isHorizontal()?fe:pe,xe=te.isHorizontal()?se.currentX-se.previousX:se.currentY-se.previousY;ne.oneWayMovement&&(me=Math.abs(me)*(ae?1:-1),xe=Math.abs(xe)*(ae?1:-1)),se.diff=me,me*=ne.touchRatio,ae&&(me=-me,xe=-xe);const ge=te.touchesDirection;te.swipeDirection=me>0?"prev":"next",te.touchesDirection=xe>0?"prev":"next";const _e=te.params.loop&&!ne.cssMode;if(!re.isMoved){if(_e&&te.loopFix({direction:te.swipeDirection}),re.startTranslate=te.getTranslate(),te.setTransition(0),te.animating){const we=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});te.wrapperEl.dispatchEvent(we)}re.allowMomentumBounce=!1,ne.grabCursor&&(te.allowSlideNext===!0||te.allowSlidePrev===!0)&&te.setGrabCursor(!0),te.emit("sliderFirstMove",le)}let ve;re.isMoved&&ge!==te.touchesDirection&&_e&&Math.abs(me)>=1&&(te.loopFix({direction:te.swipeDirection,setTranslate:!0}),ve=!0),te.emit("sliderMove",le),re.isMoved=!0,re.currentTranslate=me+re.startTranslate;let ye=!0,be=ne.resistanceRatio;if(ne.touchReleaseOnEdges&&(be=0),me>0?(_e&&!ve&&re.currentTranslate>(ne.centeredSlides?te.minTranslate()-te.size/2:te.minTranslate())&&te.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),re.currentTranslate>te.minTranslate()&&(ye=!1,ne.resistance&&(re.currentTranslate=te.minTranslate()-1+(-te.minTranslate()+re.startTranslate+me)**be))):me<0&&(_e&&!ve&&re.currentTranslate<(ne.centeredSlides?te.maxTranslate()+te.size/2:te.maxTranslate())&&te.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:te.slides.length-(ne.slidesPerView==="auto"?te.slidesPerViewDynamic():Math.ceil(parseFloat(ne.slidesPerView,10)))}),re.currentTranslate<te.maxTranslate()&&(ye=!1,ne.resistance&&(re.currentTranslate=te.maxTranslate()+1-(te.maxTranslate()-re.startTranslate-me)**be))),ye&&(le.preventedByNestedSwiper=!0),!te.allowSlideNext&&te.swipeDirection==="next"&&re.currentTranslate<re.startTranslate&&(re.currentTranslate=re.startTranslate),!te.allowSlidePrev&&te.swipeDirection==="prev"&&re.currentTranslate>re.startTranslate&&(re.currentTranslate=re.startTranslate),!te.allowSlidePrev&&!te.allowSlideNext&&(re.currentTranslate=re.startTranslate),ne.threshold>0)if(Math.abs(me)>ne.threshold||re.allowThresholdMove){if(!re.allowThresholdMove){re.allowThresholdMove=!0,se.startX=se.currentX,se.startY=se.currentY,re.currentTranslate=re.startTranslate,se.diff=te.isHorizontal()?se.currentX-se.startX:se.currentY-se.startY;return}}else{re.currentTranslate=re.startTranslate;return}!ne.followFinger||ne.cssMode||((ne.freeMode&&ne.freeMode.enabled&&te.freeMode||ne.watchSlidesProgress)&&(te.updateActiveIndex(),te.updateSlidesClasses()),te.params.freeMode&&ne.freeMode.enabled&&te.freeMode&&te.freeMode.onTouchMove(),te.updateProgress(re.currentTranslate),te.setTranslate(re.currentTranslate))}function onTouchEnd(ie){const ee=this,te=ee.touchEventsData,re=te.evCache.findIndex(ve=>ve.pointerId===ie.pointerId);if(re>=0&&te.evCache.splice(re,1),["pointercancel","pointerout","pointerleave"].includes(ie.type)&&!(ie.type==="pointercancel"&&(ee.browser.isSafari||ee.browser.isWebView)))return;const{params:ne,touches:se,rtlTranslate:ae,slidesGrid:oe,enabled:le}=ee;if(!le||!ne.simulateTouch&&ie.pointerType==="mouse")return;let he=ie;if(he.originalEvent&&(he=he.originalEvent),te.allowTouchCallbacks&&ee.emit("touchEnd",he),te.allowTouchCallbacks=!1,!te.isTouched){te.isMoved&&ne.grabCursor&&ee.setGrabCursor(!1),te.isMoved=!1,te.startMoving=!1;return}ne.grabCursor&&te.isMoved&&te.isTouched&&(ee.allowSlideNext===!0||ee.allowSlidePrev===!0)&&ee.setGrabCursor(!1);const ce=now(),de=ce-te.touchStartTime;if(ee.allowClick){const ve=he.path||he.composedPath&&he.composedPath();ee.updateClickedSlide(ve&&ve[0]||he.target),ee.emit("tap click",he),de<300&&ce-te.lastClickTime<300&&ee.emit("doubleTap doubleClick",he)}if(te.lastClickTime=now(),nextTick(()=>{ee.destroyed||(ee.allowClick=!0)}),!te.isTouched||!te.isMoved||!ee.swipeDirection||se.diff===0||te.currentTranslate===te.startTranslate){te.isTouched=!1,te.isMoved=!1,te.startMoving=!1;return}te.isTouched=!1,te.isMoved=!1,te.startMoving=!1;let ue;if(ne.followFinger?ue=ae?ee.translate:-ee.translate:ue=-te.currentTranslate,ne.cssMode)return;if(ee.params.freeMode&&ne.freeMode.enabled){ee.freeMode.onTouchEnd({currentPos:ue});return}let fe=0,pe=ee.slidesSizesGrid[0];for(let ve=0;ve<oe.length;ve+=ve<ne.slidesPerGroupSkip?1:ne.slidesPerGroup){const ye=ve<ne.slidesPerGroupSkip-1?1:ne.slidesPerGroup;typeof oe[ve+ye]!="undefined"?ue>=oe[ve]&&ue<oe[ve+ye]&&(fe=ve,pe=oe[ve+ye]-oe[ve]):ue>=oe[ve]&&(fe=ve,pe=oe[oe.length-1]-oe[oe.length-2])}let me=null,xe=null;ne.rewind&&(ee.isBeginning?xe=ee.params.virtual&&ee.params.virtual.enabled&&ee.virtual?ee.virtual.slides.length-1:ee.slides.length-1:ee.isEnd&&(me=0));const ge=(ue-oe[fe])/pe,_e=fe<ne.slidesPerGroupSkip-1?1:ne.slidesPerGroup;if(de>ne.longSwipesMs){if(!ne.longSwipes){ee.slideTo(ee.activeIndex);return}ee.swipeDirection==="next"&&(ge>=ne.longSwipesRatio?ee.slideTo(ne.rewind&&ee.isEnd?me:fe+_e):ee.slideTo(fe)),ee.swipeDirection==="prev"&&(ge>1-ne.longSwipesRatio?ee.slideTo(fe+_e):xe!==null&&ge<0&&Math.abs(ge)>ne.longSwipesRatio?ee.slideTo(xe):ee.slideTo(fe))}else{if(!ne.shortSwipes){ee.slideTo(ee.activeIndex);return}ee.navigation&&(he.target===ee.navigation.nextEl||he.target===ee.navigation.prevEl)?he.target===ee.navigation.nextEl?ee.slideTo(fe+_e):ee.slideTo(fe):(ee.swipeDirection==="next"&&ee.slideTo(me!==null?me:fe+_e),ee.swipeDirection==="prev"&&ee.slideTo(xe!==null?xe:fe))}}function onResize(){const ie=this,{params:ee,el:te}=ie;if(te&&te.offsetWidth===0)return;ee.breakpoints&&ie.setBreakpoint();const{allowSlideNext:re,allowSlidePrev:ne,snapGrid:se}=ie,ae=ie.virtual&&ie.params.virtual.enabled;ie.allowSlideNext=!0,ie.allowSlidePrev=!0,ie.updateSize(),ie.updateSlides(),ie.updateSlidesClasses();const oe=ae&&ee.loop;(ee.slidesPerView==="auto"||ee.slidesPerView>1)&&ie.isEnd&&!ie.isBeginning&&!ie.params.centeredSlides&&!oe?ie.slideTo(ie.slides.length-1,0,!1,!0):ie.params.loop&&!ae?ie.slideToLoop(ie.realIndex,0,!1,!0):ie.slideTo(ie.activeIndex,0,!1,!0),ie.autoplay&&ie.autoplay.running&&ie.autoplay.paused&&(clearTimeout(ie.autoplay.resizeTimeout),ie.autoplay.resizeTimeout=setTimeout(()=>{ie.autoplay&&ie.autoplay.running&&ie.autoplay.paused&&ie.autoplay.resume()},500)),ie.allowSlidePrev=ne,ie.allowSlideNext=re,ie.params.watchOverflow&&se!==ie.snapGrid&&ie.checkOverflow()}function onClick(ie){const ee=this;!ee.enabled||ee.allowClick||(ee.params.preventClicks&&ie.preventDefault(),ee.params.preventClicksPropagation&&ee.animating&&(ie.stopPropagation(),ie.stopImmediatePropagation()))}function onScroll(){const ie=this,{wrapperEl:ee,rtlTranslate:te,enabled:re}=ie;if(!re)return;ie.previousTranslate=ie.translate,ie.isHorizontal()?ie.translate=-ee.scrollLeft:ie.translate=-ee.scrollTop,ie.translate===0&&(ie.translate=0),ie.updateActiveIndex(),ie.updateSlidesClasses();let ne;const se=ie.maxTranslate()-ie.minTranslate();se===0?ne=0:ne=(ie.translate-ie.minTranslate())/se,ne!==ie.progress&&ie.updateProgress(te?-ie.translate:ie.translate),ie.emit("setTranslate",ie.translate,!1)}function onLoad(ie){const ee=this;processLazyPreloader(ee,ie.target),ee.update()}let dummyEventAttached=!1;function dummyEventListener(){}const events=(ie,ee)=>{const te=getDocument(),{params:re,el:ne,wrapperEl:se,device:ae}=ie,oe=!!re.nested,le=ee==="on"?"addEventListener":"removeEventListener",he=ee;ne[le]("pointerdown",ie.onTouchStart,{passive:!1}),te[le]("pointermove",ie.onTouchMove,{passive:!1,capture:oe}),te[le]("pointerup",ie.onTouchEnd,{passive:!0}),te[le]("pointercancel",ie.onTouchEnd,{passive:!0}),te[le]("pointerout",ie.onTouchEnd,{passive:!0}),te[le]("pointerleave",ie.onTouchEnd,{passive:!0}),(re.preventClicks||re.preventClicksPropagation)&&ne[le]("click",ie.onClick,!0),re.cssMode&&se[le]("scroll",ie.onScroll),re.updateOnWindowResize?ie[he](ae.ios||ae.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):ie[he]("observerUpdate",onResize,!0),ne[le]("load",ie.onLoad,{capture:!0})};function attachEvents(){const ie=this,ee=getDocument(),{params:te}=ie;ie.onTouchStart=onTouchStart.bind(ie),ie.onTouchMove=onTouchMove.bind(ie),ie.onTouchEnd=onTouchEnd.bind(ie),te.cssMode&&(ie.onScroll=onScroll.bind(ie)),ie.onClick=onClick.bind(ie),ie.onLoad=onLoad.bind(ie),dummyEventAttached||(ee.addEventListener("touchstart",dummyEventListener),dummyEventAttached=!0),events(ie,"on")}function detachEvents(){events(this,"off")}var events$1={attachEvents,detachEvents};const isGridEnabled=(ie,ee)=>ie.grid&&ee.grid&&ee.grid.rows>1;function setBreakpoint(){const ie=this,{realIndex:ee,initialized:te,params:re,el:ne}=ie,se=re.breakpoints;if(!se||se&&Object.keys(se).length===0)return;const ae=ie.getBreakpoint(se,ie.params.breakpointsBase,ie.el);if(!ae||ie.currentBreakpoint===ae)return;const le=(ae in se?se[ae]:void 0)||ie.originalParams,he=isGridEnabled(ie,re),ce=isGridEnabled(ie,le),de=re.enabled;he&&!ce?(ne.classList.remove(`${re.containerModifierClass}grid`,`${re.containerModifierClass}grid-column`),ie.emitContainerClasses()):!he&&ce&&(ne.classList.add(`${re.containerModifierClass}grid`),(le.grid.fill&&le.grid.fill==="column"||!le.grid.fill&&re.grid.fill==="column")&&ne.classList.add(`${re.containerModifierClass}grid-column`),ie.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(me=>{const xe=re[me]&&re[me].enabled,ge=le[me]&&le[me].enabled;xe&&!ge&&ie[me].disable(),!xe&&ge&&ie[me].enable()});const ue=le.direction&&le.direction!==re.direction,fe=re.loop&&(le.slidesPerView!==re.slidesPerView||ue);ue&&te&&ie.changeDirection(),extend(ie.params,le);const pe=ie.params.enabled;Object.assign(ie,{allowTouchMove:ie.params.allowTouchMove,allowSlideNext:ie.params.allowSlideNext,allowSlidePrev:ie.params.allowSlidePrev}),de&&!pe?ie.disable():!de&&pe&&ie.enable(),ie.currentBreakpoint=ae,ie.emit("_beforeBreakpoint",le),fe&&te&&(ie.loopDestroy(),ie.loopCreate(ee),ie.updateSlides()),ie.emit("breakpoint",le)}function getBreakpoint(ie,ee="window",te){if(!ie||ee==="container"&&!te)return;let re=!1;const ne=getWindow(),se=ee==="window"?ne.innerHeight:te.clientHeight,ae=Object.keys(ie).map(oe=>{if(typeof oe=="string"&&oe.indexOf("@")===0){const le=parseFloat(oe.substr(1));return{value:se*le,point:oe}}return{value:oe,point:oe}});ae.sort((oe,le)=>parseInt(oe.value,10)-parseInt(le.value,10));for(let oe=0;oe<ae.length;oe+=1){const{point:le,value:he}=ae[oe];ee==="window"?ne.matchMedia(`(min-width: ${he}px)`).matches&&(re=le):he<=te.clientWidth&&(re=le)}return re||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(ie,ee){const te=[];return ie.forEach(re=>{typeof re=="object"?Object.keys(re).forEach(ne=>{re[ne]&&te.push(ee+ne)}):typeof re=="string"&&te.push(ee+re)}),te}function addClasses(){const ie=this,{classNames:ee,params:te,rtl:re,el:ne,device:se}=ie,ae=prepareClasses(["initialized",te.direction,{"free-mode":ie.params.freeMode&&te.freeMode.enabled},{autoheight:te.autoHeight},{rtl:re},{grid:te.grid&&te.grid.rows>1},{"grid-column":te.grid&&te.grid.rows>1&&te.grid.fill==="column"},{android:se.android},{ios:se.ios},{"css-mode":te.cssMode},{centered:te.cssMode&&te.centeredSlides},{"watch-progress":te.watchSlidesProgress}],te.containerModifierClass);ee.push(...ae),ne.classList.add(...ee),ie.emitContainerClasses()}function removeClasses(){const ie=this,{el:ee,classNames:te}=ie;ee.classList.remove(...te),ie.emitContainerClasses()}var classes={addClasses,removeClasses};function checkOverflow(){const ie=this,{isLocked:ee,params:te}=ie,{slidesOffsetBefore:re}=te;if(re){const ne=ie.slides.length-1,se=ie.slidesGrid[ne]+ie.slidesSizesGrid[ne]+re*2;ie.isLocked=ie.size>se}else ie.isLocked=ie.snapGrid.length===1;te.allowSlideNext===!0&&(ie.allowSlideNext=!ie.isLocked),te.allowSlidePrev===!0&&(ie.allowSlidePrev=!ie.isLocked),ee&&ee!==ie.isLocked&&(ie.isEnd=!1),ee!==ie.isLocked&&ie.emit(ie.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(ie,ee){return function(re={}){const ne=Object.keys(re)[0],se=re[ne];if(typeof se!="object"||se===null){extend(ee,re);return}if(["navigation","pagination","scrollbar"].indexOf(ne)>=0&&ie[ne]===!0&&(ie[ne]={auto:!0}),!(ne in ie&&"enabled"in se)){extend(ee,re);return}ie[ne]===!0&&(ie[ne]={enabled:!0}),typeof ie[ne]=="object"&&!("enabled"in ie[ne])&&(ie[ne].enabled=!0),ie[ne]||(ie[ne]={enabled:!1}),extend(ee,re)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes},extendedDefaults={};class Swiper{constructor(...ee){let te,re;ee.length===1&&ee[0].constructor&&Object.prototype.toString.call(ee[0]).slice(8,-1)==="Object"?re=ee[0]:[te,re]=ee,re||(re={}),re=extend({},re),te&&!re.el&&(re.el=te);const ne=getDocument();if(re.el&&typeof re.el=="string"&&ne.querySelectorAll(re.el).length>1){const le=[];return ne.querySelectorAll(re.el).forEach(he=>{const ce=extend({},re,{el:he});le.push(new Swiper(ce))}),le}const se=this;se.__swiper__=!0,se.support=getSupport(),se.device=getDevice({userAgent:re.userAgent}),se.browser=getBrowser(),se.eventsListeners={},se.eventsAnyListeners=[],se.modules=[...se.__modules__],re.modules&&Array.isArray(re.modules)&&se.modules.push(...re.modules);const ae={};se.modules.forEach(le=>{le({params:re,swiper:se,extendParams:moduleExtendParams(re,ae),on:se.on.bind(se),once:se.once.bind(se),off:se.off.bind(se),emit:se.emit.bind(se)})});const oe=extend({},defaults,ae);return se.params=extend({},oe,extendedDefaults,re),se.originalParams=extend({},se.params),se.passedParams=extend({},re),se.params&&se.params.on&&Object.keys(se.params.on).forEach(le=>{se.on(le,se.params.on[le])}),se.params&&se.params.onAny&&se.onAny(se.params.onAny),Object.assign(se,{enabled:se.params.enabled,el:te,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return se.params.direction==="horizontal"},isVertical(){return se.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:se.params.allowSlideNext,allowSlidePrev:se.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:se.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:se.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),se.emit("_swiper"),se.params.init&&se.init(),se}getSlideIndex(ee){const{slidesEl:te,params:re}=this,ne=elementChildren(te,`.${re.slideClass}, swiper-slide`),se=elementIndex(ne[0]);return elementIndex(ee)-se}getSlideIndexByData(ee){return this.getSlideIndex(this.slides.filter(te=>te.getAttribute("data-swiper-slide-index")*1===ee)[0])}recalcSlides(){const ee=this,{slidesEl:te,params:re}=ee;ee.slides=elementChildren(te,`.${re.slideClass}, swiper-slide`)}enable(){const ee=this;ee.enabled||(ee.enabled=!0,ee.params.grabCursor&&ee.setGrabCursor(),ee.emit("enable"))}disable(){const ee=this;!ee.enabled||(ee.enabled=!1,ee.params.grabCursor&&ee.unsetGrabCursor(),ee.emit("disable"))}setProgress(ee,te){const re=this;ee=Math.min(Math.max(ee,0),1);const ne=re.minTranslate(),ae=(re.maxTranslate()-ne)*ee+ne;re.translateTo(ae,typeof te=="undefined"?0:te),re.updateActiveIndex(),re.updateSlidesClasses()}emitContainerClasses(){const ee=this;if(!ee.params._emitClasses||!ee.el)return;const te=ee.el.className.split(" ").filter(re=>re.indexOf("swiper")===0||re.indexOf(ee.params.containerModifierClass)===0);ee.emit("_containerClasses",te.join(" "))}getSlideClasses(ee){const te=this;return te.destroyed?"":ee.className.split(" ").filter(re=>re.indexOf("swiper-slide")===0||re.indexOf(te.params.slideClass)===0).join(" ")}emitSlidesClasses(){const ee=this;if(!ee.params._emitClasses||!ee.el)return;const te=[];ee.slides.forEach(re=>{const ne=ee.getSlideClasses(re);te.push({slideEl:re,classNames:ne}),ee.emit("_slideClass",re,ne)}),ee.emit("_slideClasses",te)}slidesPerViewDynamic(ee="current",te=!1){const re=this,{params:ne,slides:se,slidesGrid:ae,slidesSizesGrid:oe,size:le,activeIndex:he}=re;let ce=1;if(ne.centeredSlides){let de=se[he].swiperSlideSize,ue;for(let fe=he+1;fe<se.length;fe+=1)se[fe]&&!ue&&(de+=se[fe].swiperSlideSize,ce+=1,de>le&&(ue=!0));for(let fe=he-1;fe>=0;fe-=1)se[fe]&&!ue&&(de+=se[fe].swiperSlideSize,ce+=1,de>le&&(ue=!0))}else if(ee==="current")for(let de=he+1;de<se.length;de+=1)(te?ae[de]+oe[de]-ae[he]<le:ae[de]-ae[he]<le)&&(ce+=1);else for(let de=he-1;de>=0;de-=1)ae[he]-ae[de]<le&&(ce+=1);return ce}update(){const ee=this;if(!ee||ee.destroyed)return;const{snapGrid:te,params:re}=ee;re.breakpoints&&ee.setBreakpoint(),[...ee.el.querySelectorAll('[loading="lazy"]')].forEach(ae=>{ae.complete&&processLazyPreloader(ee,ae)}),ee.updateSize(),ee.updateSlides(),ee.updateProgress(),ee.updateSlidesClasses();function ne(){const ae=ee.rtlTranslate?ee.translate*-1:ee.translate,oe=Math.min(Math.max(ae,ee.maxTranslate()),ee.minTranslate());ee.setTranslate(oe),ee.updateActiveIndex(),ee.updateSlidesClasses()}let se;if(ee.params.freeMode&&ee.params.freeMode.enabled)ne(),ee.params.autoHeight&&ee.updateAutoHeight();else{if((ee.params.slidesPerView==="auto"||ee.params.slidesPerView>1)&&ee.isEnd&&!ee.params.centeredSlides){const ae=ee.virtual&&ee.params.virtual.enabled?ee.virtual.slides:ee.slides;se=ee.slideTo(ae.length-1,0,!1,!0)}else se=ee.slideTo(ee.activeIndex,0,!1,!0);se||ne()}re.watchOverflow&&te!==ee.snapGrid&&ee.checkOverflow(),ee.emit("update")}changeDirection(ee,te=!0){const re=this,ne=re.params.direction;return ee||(ee=ne==="horizontal"?"vertical":"horizontal"),ee===ne||ee!=="horizontal"&&ee!=="vertical"||(re.el.classList.remove(`${re.params.containerModifierClass}${ne}`),re.el.classList.add(`${re.params.containerModifierClass}${ee}`),re.emitContainerClasses(),re.params.direction=ee,re.slides.forEach(se=>{ee==="vertical"?se.style.width="":se.style.height=""}),re.emit("changeDirection"),te&&re.update()),re}changeLanguageDirection(ee){const te=this;te.rtl&&ee==="rtl"||!te.rtl&&ee==="ltr"||(te.rtl=ee==="rtl",te.rtlTranslate=te.params.direction==="horizontal"&&te.rtl,te.rtl?(te.el.classList.add(`${te.params.containerModifierClass}rtl`),te.el.dir="rtl"):(te.el.classList.remove(`${te.params.containerModifierClass}rtl`),te.el.dir="ltr"),te.update())}mount(ee){const te=this;if(te.mounted)return!0;let re=ee||te.params.el;if(typeof re=="string"&&(re=document.querySelector(re)),!re)return!1;re.swiper=te,re.shadowEl&&(te.isElement=!0);const ne=()=>`.${(te.params.wrapperClass||"").trim().split(" ").join(".")}`;let ae=(()=>re&&re.shadowRoot&&re.shadowRoot.querySelector?re.shadowRoot.querySelector(ne()):elementChildren(re,ne())[0])();return!ae&&te.params.createElements&&(ae=createElement("div",te.params.wrapperClass),re.append(ae),elementChildren(re,`.${te.params.slideClass}`).forEach(oe=>{ae.append(oe)})),Object.assign(te,{el:re,wrapperEl:ae,slidesEl:te.isElement?re:ae,mounted:!0,rtl:re.dir.toLowerCase()==="rtl"||elementStyle(re,"direction")==="rtl",rtlTranslate:te.params.direction==="horizontal"&&(re.dir.toLowerCase()==="rtl"||elementStyle(re,"direction")==="rtl"),wrongRTL:elementStyle(ae,"display")==="-webkit-box"}),!0}init(ee){const te=this;return te.initialized||te.mount(ee)===!1||(te.emit("beforeInit"),te.params.breakpoints&&te.setBreakpoint(),te.addClasses(),te.updateSize(),te.updateSlides(),te.params.watchOverflow&&te.checkOverflow(),te.params.grabCursor&&te.enabled&&te.setGrabCursor(),te.params.loop&&te.virtual&&te.params.virtual.enabled?te.slideTo(te.params.initialSlide+te.virtual.slidesBefore,0,te.params.runCallbacksOnInit,!1,!0):te.slideTo(te.params.initialSlide,0,te.params.runCallbacksOnInit,!1,!0),te.params.loop&&te.loopCreate(),te.attachEvents(),[...te.el.querySelectorAll('[loading="lazy"]')].forEach(ne=>{ne.complete?processLazyPreloader(te,ne):ne.addEventListener("load",se=>{processLazyPreloader(te,se.target)})}),preload(te),te.initialized=!0,preload(te),te.emit("init"),te.emit("afterInit")),te}destroy(ee=!0,te=!0){const re=this,{params:ne,el:se,wrapperEl:ae,slides:oe}=re;return typeof re.params=="undefined"||re.destroyed||(re.emit("beforeDestroy"),re.initialized=!1,re.detachEvents(),ne.loop&&re.loopDestroy(),te&&(re.removeClasses(),se.removeAttribute("style"),ae.removeAttribute("style"),oe&&oe.length&&oe.forEach(le=>{le.classList.remove(ne.slideVisibleClass,ne.slideActiveClass,ne.slideNextClass,ne.slidePrevClass),le.removeAttribute("style"),le.removeAttribute("data-swiper-slide-index")})),re.emit("destroy"),Object.keys(re.eventsListeners).forEach(le=>{re.off(le)}),ee!==!1&&(re.el.swiper=null,deleteProps(re)),re.destroyed=!0),null}static extendDefaults(ee){extend(extendedDefaults,ee)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule(ee){Swiper.prototype.__modules__||(Swiper.prototype.__modules__=[]);const te=Swiper.prototype.__modules__;typeof ee=="function"&&te.indexOf(ee)<0&&te.push(ee)}static use(ee){return Array.isArray(ee)?(ee.forEach(te=>Swiper.installModule(te)),Swiper):(Swiper.installModule(ee),Swiper)}}Object.keys(prototypes).forEach(ie=>{Object.keys(prototypes[ie]).forEach(ee=>{Swiper.prototype[ee]=prototypes[ie][ee]})}),Swiper.use([Resize$1,Observer]);function Parallax({swiper:ie,extendParams:ee,on:te}){ee({parallax:{enabled:!1}});const re=(ae,oe)=>{const{rtl:le}=ie,he=le?-1:1,ce=ae.getAttribute("data-swiper-parallax")||"0";let de=ae.getAttribute("data-swiper-parallax-x"),ue=ae.getAttribute("data-swiper-parallax-y");const fe=ae.getAttribute("data-swiper-parallax-scale"),pe=ae.getAttribute("data-swiper-parallax-opacity"),me=ae.getAttribute("data-swiper-parallax-rotate");if(de||ue?(de=de||"0",ue=ue||"0"):ie.isHorizontal()?(de=ce,ue="0"):(ue=ce,de="0"),de.indexOf("%")>=0?de=`${parseInt(de,10)*oe*he}%`:de=`${de*oe*he}px`,ue.indexOf("%")>=0?ue=`${parseInt(ue,10)*oe}%`:ue=`${ue*oe}px`,typeof pe!="undefined"&&pe!==null){const ge=pe-(pe-1)*(1-Math.abs(oe));ae.style.opacity=ge}let xe=`translate3d(${de}, ${ue}, 0px)`;typeof fe!="undefined"&&fe!==null&&(xe+=` scale(${fe-(fe-1)*(1-Math.abs(oe))})`),me&&typeof me!="undefined"&&me!==null&&(xe+=` rotate(${me*oe*-1}deg)`),ae.style.transform=xe},ne=()=>{const{el:ae,slides:oe,progress:le,snapGrid:he}=ie;elementChildren(ae,"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").forEach(ce=>{re(ce,le)}),oe.forEach((ce,de)=>{let ue=ce.progress;ie.params.slidesPerGroup>1&&ie.params.slidesPerView!=="auto"&&(ue+=Math.ceil(de/2)-le*(he.length-1)),ue=Math.min(Math.max(ue,-1),1),ce.querySelectorAll("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale], [data-swiper-parallax-rotate]").forEach(fe=>{re(fe,ue)})})},se=(ae=ie.params.speed)=>{const{el:oe}=ie;oe.querySelectorAll("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").forEach(le=>{let he=parseInt(le.getAttribute("data-swiper-parallax-duration"),10)||ae;ae===0&&(he=0),le.style.transitionDuration=`${he}ms`})};te("beforeInit",()=>{!ie.params.parallax.enabled||(ie.params.watchSlidesProgress=!0,ie.originalParams.watchSlidesProgress=!0)}),te("init",()=>{!ie.params.parallax.enabled||ne()}),te("setTranslate",()=>{!ie.params.parallax.enabled||ne()}),te("setTransition",(ae,oe)=>{!ie.params.parallax.enabled||se(oe)})}function freeMode({swiper:ie,extendParams:ee,emit:te,once:re}){ee({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function ne(){const oe=ie.getTranslate();ie.setTranslate(oe),ie.setTransition(0),ie.touchEventsData.velocities.length=0,ie.freeMode.onTouchEnd({currentPos:ie.rtl?ie.translate:-ie.translate})}function se(){const{touchEventsData:oe,touches:le}=ie;oe.velocities.length===0&&oe.velocities.push({position:le[ie.isHorizontal()?"startX":"startY"],time:oe.touchStartTime}),oe.velocities.push({position:le[ie.isHorizontal()?"currentX":"currentY"],time:now()})}function ae({currentPos:oe}){const{params:le,wrapperEl:he,rtlTranslate:ce,snapGrid:de,touchEventsData:ue}=ie,pe=now()-ue.touchStartTime;if(oe<-ie.minTranslate()){ie.slideTo(ie.activeIndex);return}if(oe>-ie.maxTranslate()){ie.slides.length<de.length?ie.slideTo(de.length-1):ie.slideTo(ie.slides.length-1);return}if(le.freeMode.momentum){if(ue.velocities.length>1){const we=ue.velocities.pop(),Se=ue.velocities.pop(),Te=we.position-Se.position,Pe=we.time-Se.time;ie.velocity=Te/Pe,ie.velocity/=2,Math.abs(ie.velocity)<le.freeMode.minimumVelocity&&(ie.velocity=0),(Pe>150||now()-we.time>300)&&(ie.velocity=0)}else ie.velocity=0;ie.velocity*=le.freeMode.momentumVelocityRatio,ue.velocities.length=0;let me=1e3*le.freeMode.momentumRatio;const xe=ie.velocity*me;let ge=ie.translate+xe;ce&&(ge=-ge);let _e=!1,ve;const ye=Math.abs(ie.velocity)*20*le.freeMode.momentumBounceRatio;let be;if(ge<ie.maxTranslate())le.freeMode.momentumBounce?(ge+ie.maxTranslate()<-ye&&(ge=ie.maxTranslate()-ye),ve=ie.maxTranslate(),_e=!0,ue.allowMomentumBounce=!0):ge=ie.maxTranslate(),le.loop&&le.centeredSlides&&(be=!0);else if(ge>ie.minTranslate())le.freeMode.momentumBounce?(ge-ie.minTranslate()>ye&&(ge=ie.minTranslate()+ye),ve=ie.minTranslate(),_e=!0,ue.allowMomentumBounce=!0):ge=ie.minTranslate(),le.loop&&le.centeredSlides&&(be=!0);else if(le.freeMode.sticky){let we;for(let Se=0;Se<de.length;Se+=1)if(de[Se]>-ge){we=Se;break}Math.abs(de[we]-ge)<Math.abs(de[we-1]-ge)||ie.swipeDirection==="next"?ge=de[we]:ge=de[we-1],ge=-ge}if(be&&re("transitionEnd",()=>{ie.loopFix()}),ie.velocity!==0){if(ce?me=Math.abs((-ge-ie.translate)/ie.velocity):me=Math.abs((ge-ie.translate)/ie.velocity),le.freeMode.sticky){const we=Math.abs((ce?-ge:ge)-ie.translate),Se=ie.slidesSizesGrid[ie.activeIndex];we<Se?me=le.speed:we<2*Se?me=le.speed*1.5:me=le.speed*2.5}}else if(le.freeMode.sticky){ie.slideToClosest();return}le.freeMode.momentumBounce&&_e?(ie.updateProgress(ve),ie.setTransition(me),ie.setTranslate(ge),ie.transitionStart(!0,ie.swipeDirection),ie.animating=!0,elementTransitionEnd(he,()=>{!ie||ie.destroyed||!ue.allowMomentumBounce||(te("momentumBounce"),ie.setTransition(le.speed),setTimeout(()=>{ie.setTranslate(ve),elementTransitionEnd(he,()=>{!ie||ie.destroyed||ie.transitionEnd()})},0))})):ie.velocity?(te("_freeModeNoMomentumRelease"),ie.updateProgress(ge),ie.setTransition(me),ie.setTranslate(ge),ie.transitionStart(!0,ie.swipeDirection),ie.animating||(ie.animating=!0,elementTransitionEnd(he,()=>{!ie||ie.destroyed||ie.transitionEnd()}))):ie.updateProgress(ge),ie.updateActiveIndex(),ie.updateSlidesClasses()}else if(le.freeMode.sticky){ie.slideToClosest();return}else le.freeMode&&te("_freeModeNoMomentumRelease");(!le.freeMode.momentum||pe>=le.longSwipesMs)&&(ie.updateProgress(),ie.updateActiveIndex(),ie.updateSlidesClasses())}Object.assign(ie,{freeMode:{onTouchStart:ne,onTouchMove:se,onTouchEnd:ae}})}var swiper_min="",freeMode_min="",parallax_min="",slider="";class Slider{constructor(){let ee=1440,te=gsapWithCSS.matchMedia(),re="(max-width: 480px)";$(".slider__item").each((se,ae)=>{let oe=$(ae),le=oe.attr("data-width")/ee*100;oe.css({"--width":`${le}em`})}),$(".slider-parent").each((se,ae)=>{let oe=$(ae),le=oe.find(".slider__wrapper");oe.find(".slider__item").find("img");let he=oe.find(".slider__item"),ce=new Swiper(le[0],{modules:[freeMode,Parallax],slidesPerView:"auto",spaceBetween:45,direction:"horizontal",speed:300,touchEventsTarget:"container",grabCursor:!0,freeMode:!0,parallax:!0,watchOverflow:!1}),de=oe.find(".slider__arrows").find(".slider__arrow").eq(0),ue=oe.find(".slider__arrows").find(".slider__arrow").eq(1),fe=oe.find(".slider__index").find("div").eq(0),pe=oe.find(".slider__index").find("div").eq(2);ce.slides.length<10?pe.text(`0${ce.slides.length}`):pe.text(`${ce.slides.length}`);let me=oe.find(".slider__progress-indicator"),xe=ce.progress*100;me.css("width",`${xe}%`),ce.on("progress",()=>{xe=ce.progress*100,me.css("width",`${xe}%`)}),ce.on("sliderMove",()=>{he.each((_e,ve)=>{let ye=$(ve),be=ye.find("img"),we=ye[0].originalProgress;we>5?we=5:we<-5&&(we=-5),we=we*2,gsapWithCSS.to(be,{duration:1,xPercent:we,ease:"power2.inOut"})})}),ce.on("activeIndexChange",()=>{he.each((_e,ve)=>{let ye=$(ve),be=ye.find("img"),we=ye[0].originalProgress;we>5?we=5:we<-5&&(we=-5),we=we*2,gsapWithCSS.to(be,{duration:1,xPercent:we,ease:"power2.inOut"})}),te.add(re,()=>{let _e=ce.activeIndex+1;_e<10?_e=`0${_e}`:_e=`${_e}`,fe.text(_e)})}),de.on("click",()=>ce.slidePrev()),ue.on("click",()=>ce.slideNext());let ge=ce.slides[0].clientWidth;oe.css("--first-width",`${ge}px`),ce.progress})}}class HorizontalLoop{constructor(ee,te){ee=gsapWithCSS.utils.toArray(ee),te=te||{};let re=gsapWithCSS.timeline({repeat:te.repeat,paused:te.paused,defaults:{ease:"none"},onReverseComplete:()=>re.totalTime(re.rawTime()+re.duration()*100)}),ne=ee.length,se=ee[0].offsetLeft,ae=[],oe=[],le=[],he=0,ce=(te.speed||1)*100,de=te.snap===!1?ve=>ve:gsapWithCSS.utils.snap(te.snap||1),ue,fe,pe,me,xe,ge;for(gsapWithCSS.set(ee,{xPercent:(ve,ye)=>{let be=oe[ve]=parseFloat(gsapWithCSS.getProperty(ye,"width","px"));return le[ve]=de(parseFloat(gsapWithCSS.getProperty(ye,"x","px"))/be*100+gsapWithCSS.getProperty(ye,"xPercent")),le[ve]}}),gsapWithCSS.set(ee,{x:0}),ue=ee[ne-1].offsetLeft+le[ne-1]/100*oe[ne-1]-se+ee[ne-1].offsetWidth*gsapWithCSS.getProperty(ee[ne-1],"scaleX")+(parseFloat(te.paddingRight)||0),ge=0;ge<ne;ge++)xe=ee[ge],fe=le[ge]/100*oe[ge],pe=xe.offsetLeft+fe-se,me=pe+oe[ge]*gsapWithCSS.getProperty(xe,"scaleX"),re.to(xe,{xPercent:de((fe-me)/oe[ge]*100),duration:me/ce},0).fromTo(xe,{xPercent:de((fe-me+ue)/oe[ge]*100)},{xPercent:le[ge],duration:(fe-me+ue-fe)/ce,immediateRender:!1},me/ce).add("label"+ge,pe/ce),ae[ge]=pe/ce;function _e(ve,ye){ye=ye||{},Math.abs(ve-he)>ne/2&&(ve+=ve>he?-ne:ne);let be=gsapWithCSS.utils.wrap(0,ne,ve),we=ae[be];return we>re.time()!=ve>he&&(ye.modifiers={time:gsapWithCSS.utils.wrap(0,re.duration())},we+=re.duration()*(ve>he?1:-1)),he=be,ye.overwrite=!0,re.tweenTo(we,ye)}return re.next=ve=>_e(he+1,ve),re.previous=ve=>_e(he-1,ve),re.current=()=>he,re.toIndex=(ve,ye)=>_e(ve,ye),re.times=ae,re.progress(1,!0).progress(0,!0),te.reversed&&(re.vars.onReverseComplete(),re.reverse()),re}}gsapWithCSS.registerPlugin(ScrollTrigger);class Music{constructor(){let ee=$(".music__item");ee.each((te,re)=>{let ne=$(re),se=ne.find(".music__item--index").find(".f-18"),ae=ne.find("audio")[0],oe=ne.find(".music__item--duration").find(".f-17");ae.addEventListener("loadedmetadata",()=>{let he=ae.duration,ce=Math.floor(he/60),de=Math.floor(he-ce*60);oe.text(`${ce}:${de}`)}),ne.on("click",()=>{ne.hasClass("playing")?(ae.pause(),ae.currentTime=0,ne.removeClass("playing")):(ae.play(),ae.volume=.1,ne.addClass("playing"),ee.each((he,ce)=>{let de=$(ce),ue=de.find("audio")[0];he!==te&&(ue.pause(),ue.currentTime=0,de.removeClass("playing"))}))}),se.text(te+1),gsapWithCSS.timeline({scrollTrigger:{trigger:ne,start:"top 80%"}}).fromTo(ne,{opacity:0},{opacity:1,duration:.8})})}}class Photography{constructor(){const te=new App().scroll.lenis;let re=gsapWithCSS.matchMedia(),ne="(min-width: 991px)",se="(max-width: 991px)",ae=$("main"),le=$(".slider-parent").find(".slider__item"),he=ae.find(".photography__popup"),ce=he.find(".photography__placeholder"),de=he.find(".photography__img-parent"),ue=ce.find("img"),fe=he.find(".popup__films"),pe=fe.find(".f-25"),me=fe.find(".f-16"),xe=he.find(".popup__photos"),ge=xe.find(".f-16"),_e=$(".cursor-wrapper"),ye=$(".cursor").find(".f-18"),be=he.find(".popup__close"),we,Se,Te,Pe;le.each((Be,Ce)=>{let De=$(Ce);De.on("click",()=>{$("body").css("overflow","hidden"),te.stop();let Re=De.find("img").attr("src"),Le=De.closest(".slider__wrapper");if(Le.attr("is-films")==""){fe.css("display","flex");let ke=De.find(".slider__info").find("div").eq(0).text(),Me=De.find(".slider__info").find("div").eq(1).text();pe.text(ke),me.text(Me)}if(Le.attr("is-photos")==""){xe.css("display","flex");let ke=De.find(".slider__info").find("div").eq(0).text();ge.text(ke)}ue.attr("src",Re),we=De.offset().left,Se=De[0].getBoundingClientRect().top,Te=De[0].getBoundingClientRect().width,Pe=De[0].getBoundingClientRect().height,ce.css({left:`${we}px`,top:`${Se}px`,width:`${Te}px`,height:`${Pe}px`}),Le.attr("is-films")==""?(he.addClass("is-films"),setTimeout(()=>{ae.addClass("photography-open"),ae.addClass("photography-text-show"),$("body").addClass("hide-nav"),_e.addClass("show-text"),ye.text("Close"),gsapWithCSS.to(ce,{duration:.5,left:"0em",top:"6vh",width:"57.01em",height:"88vh",ease:"power2.inOut"}),gsapWithCSS.to(de,{duration:.5,aspectRatio:Te/Pe,ease:"power2.inOut",height:"100%"})},100)):(he.addClass("is-photos"),setTimeout(()=>{ae.addClass("photography-open"),ae.addClass("photography-text-show"),$("body").addClass("hide-nav"),_e.addClass("show-text"),ye.text("Close"),gsapWithCSS.to(ce,{duration:.5,left:"6em",top:"6vh",width:"88em",height:"88vh",ease:"power2.inOut"}),Te/Pe>1.1?(gsapWithCSS.set(de,{top:"50%",yPercent:-50}),gsapWithCSS.to(de,{duration:.5,aspectRatio:Te/Pe,ease:"power2.inOut",width:"100%"})):gsapWithCSS.to(de,{duration:.5,aspectRatio:Te/Pe,ease:"power2.inOut",height:"100%"})},100))})}),re.add(ne,()=>{he.on("click",()=>{if(te.start(),$("body").css("overflow","auto"),ae.hasClass("photography-open")){$("body").removeClass("hide-nav"),_e.removeClass("show-text");const Be=()=>{ae.removeClass("photography-open"),fe.css("display","none"),xe.css("display","none"),he.removeClass("is-films"),he.removeClass("is-photos"),gsapWithCSS.set(de,{clearProps:"all"})},Ce=()=>{ae.removeClass("photography-text-show")};gsapWithCSS.to(ce,{duration:.3,left:we,top:Se,width:Te,height:Pe,ease:"power2.inOut",onComplete:Be,onStart:Ce})}})}),re.add(se,()=>{be.on("click",()=>{if(te.start(),$("body").css("overflow","auto"),ae.hasClass("photography-open")){$("body").removeClass("hide-nav"),_e.removeClass("show-text");const Be=()=>{ae.removeClass("photography-open"),fe.css("display","none"),xe.css("display","none"),he.removeClass("is-films"),he.removeClass("is-photos"),gsapWithCSS.set(de,{clearProps:"all"})},Ce=()=>{ae.removeClass("photography-text-show")};gsapWithCSS.to(ce,{duration:.3,left:we,top:Se,width:Te,height:Pe,ease:"power2.inOut",onComplete:Be,onStart:Ce})}})}),he.on("mousemove",()=>{_e.addClass("show-text")}),this.resize(he)}resize(ee){const te=()=>{window.innerWidth>1024?ee.removeAttr("data-lenis-prevent"):ee.attr("data-lenis-prevent","")};te(),window.addEventListener("resize",te)}}class Games{constructor(){let ee=$(".games__video"),te=ee.find("video");te[0].pause(),ee.on("mouseenter",()=>{te[0].play()}),ee.on("mouseleave",()=>{te[0].pause()})}}class Pets{constructor(){let ee=$(".pets__animate");gsapWithCSS.timeline({repeat:-1,yoyo:!0,yoyoEase:"power1.inOut",repeatDelay:.5}).fromTo(ee,{rotate:-5},{duration:1,rotate:5,ease:"power1.inOut"})}}class SliderImg{constructor(){let te=$(".slider-parent").find(".slider__item"),re=$(".slider__wrapper"),ne=$(".cursor-wrapper"),ae=$(".cursor").find(".f-18");te.each((oe,le)=>{let he=$(le);he.on("mouseenter",()=>{ae.text("Enlarge"),ne.addClass("show-text")}),he.on("mouseleave",()=>{ne.removeClass("show-text")})}),re.on("mouseenter",()=>{ne.addClass("remove-blend")}),re.on("mouseleave",()=>{ne.removeClass("remove-blend")})}}class Loves{constructor(){this.quoute=new Quoute,this.heroName=new HeroName,this.slider=new Slider,this.games=new Games,this.photo=new Photography,this.musis=new Music,this.pets=new Pets,this.sliderImg=new SliderImg,this.footer=new Footer,this.scrollParallax=new ScrollParallax;let ee=$(".section-title-loop"),te=gsapWithCSS.matchMedia(),re="(min-width: 480px)";te.add(re,()=>this.loop=new HorizontalLoop(ee,{paused:!1,repeat:-1,speed:1.25}))}}class CheckActiveTag$1{constructor(ee){let te=$(".thoughts__tags-line"),re=$(ee)[0].offsetLeft,ne=$(ee).outerWidth();te.css({left:`${re}px`,width:`${ne}px`})}}gsapWithCSS.registerPlugin(ScrollTrigger);class Filter$1{constructor(){const te=new App().scroll.lenis;let re=$(".thoughts__tags-list");re.prepend(`<div class="thoughts__tags-item" change-cursor-large data-clear="true">
        <div class="f-22 no-caps light" m-f="16" t-f="12">All</div>
        </div>`),re.append('<div class="thoughts__tags-line"></div>');let ne=$(".thoughts__tags-item"),se=$(".thoughts__item");this.hover(ne,te),se.addClass("active"),new CheckActiveTag$1(ne.first()),ne.on("click",ae=>{let oe=$(ae.currentTarget);if(ne.removeClass("active"),oe.addClass("active"),oe.attr("data-clear"))se.addClass("active");else{let le=oe.find("div").text();se.each((he,ce)=>{let de=$(ce);de.find("[filter]").text().indexOf(le)==-1?de.removeClass("active"):de.addClass("active")})}new CheckActiveTag$1(oe),ScrollTrigger.refresh()})}hover(ee,te){let re=$(".cursor-wrapper"),ne=re.find(".cursor");ee.each((se,ae)=>{let oe=$(ae);oe.on("mouseenter",()=>{oe.addClass("magnet");let le=oe[0].getBoundingClientRect().left,he=oe[0].getBoundingClientRect().top,ce=oe[0].getBoundingClientRect().width,de=oe[0].getBoundingClientRect().height;ne.css("--left",`${le}px`),ne.css("--top",`${he}px`),ne.css("--width",`${ce}px`),ne.css("--height",`${de}px`),ne.addClass("change"),ne.addClass("border-change"),te.on("scroll",()=>{oe.hasClass("magnet")&&(le=oe[0].getBoundingClientRect().left,he=oe[0].getBoundingClientRect().top,ce=oe[0].getBoundingClientRect().width,de=oe[0].getBoundingClientRect().height,ne.css("--left",`${le}px`),ne.css("--top",`${he}px`),ne.css("--width",`${ce}px`),ne.css("--height",`${de}px`))})}),oe.on("mouseleave",()=>{re.css("--size","1.53em"),ne.removeClass("change"),ne.removeClass("border-change"),oe.removeClass("magnet")})})}}gsapWithCSS.registerPlugin(SplitText);class Hover$1{constructor(){setTimeout(()=>{$(".thoughts__content--title").each((te,re)=>{let ne=$(re),se=ne.find(".f-70"),ae=se[0].clientHeight;ne.height(ae),window.addEventListener("resize",()=>{ae=se[0].clientHeight,ne.height(ae)})})},100)}}gsapWithCSS.registerPlugin(ScrollTrigger);class ListFade{constructor(){setTimeout(()=>{$(".thoughts__item").each((te,re)=>{let ne=$(re),se=ne.find(".thoughts__content");gsapWithCSS.timeline({scrollTrigger:{trigger:ne,start:"top 80%"}}).fromTo(se,{opacity:0,y:80},{opacity:1,y:0,duration:1,ease:"power3"})})},101)}}class Thoughts{constructor(){this.hover=new Hover$1,this.filter=new Filter$1,this.quoute=new Quoute,this.listFade=new ListFade,this.heroName=new HeroName,this.footer=new Footer}}gsapWithCSS.registerPlugin(SplitText);class Hover{constructor(){$('.nav__item[href="/thoughts"]').addClass("w--current"),$(".thoughts__item").addClass("active"),setTimeout(()=>{$(".thoughts__content--title").each((te,re)=>{let ne=$(re),se=ne.find(".f-70"),ae=se[0].clientHeight;ne.height(ae),window.addEventListener("resize",()=>{ae=se[0].clientHeight,ne.height(ae)})})},100)}}gsapWithCSS.registerPlugin(ScrollTrigger,SplitText);class Split{constructor(){let ee="top 85%",te=$(".aticle__body"),re=te.find("h2, h3, h4"),ne=te.find("p"),se=te.find("li"),ae=te.find("img");re.each((ce,de)=>{let ue=$(de),fe=new SplitText(ue,{type:"chars, lines"}),pe=gsapWithCSS.timeline({paused:!0,defaults:{duration:1,ease:"power3",stagger:.06}});pe.fromTo(fe.chars,{opacity:0,scaleY:0},{opacity:1,scaleY:1,transformOrigin:"bottom",stagger:.02}),ScrollTrigger.create({trigger:ue,start:ee,onEnter:()=>pe.play()})}),ne.each((ce,de)=>{let ue=$(de),fe=gsapWithCSS.timeline({paused:!0,defaults:{duration:1,ease:"power3",stagger:.06}});fe.fromTo(ue,{opacity:0,y:30},{opacity:1,y:0}),ScrollTrigger.create({trigger:ue,start:ee,onEnter:()=>fe.play()})}),se.each((ce,de)=>{let ue=$(de),fe=gsapWithCSS.timeline({paused:!0,defaults:{duration:1,ease:"power3",stagger:.06}});fe.fromTo(ue,{opacity:0,y:30},{opacity:1,y:0,stagger:.12}),ScrollTrigger.create({trigger:ue,start:ee,onEnter:()=>fe.play()})}),ae.each((ce,de)=>{let ue=$(de);ScrollTrigger.create({trigger:ue,start:"top 80%",end:"bottom 20%",onEnter:()=>ue.addClass("faded")})});let oe=$(".article-quoute__line");ScrollTrigger.create({trigger:oe,start:"top 80%",onEnter:()=>oe.addClass("faded")});let le=$(".w-richtext-figure-type-video");ScrollTrigger.create({trigger:le,start:"top 80%",onEnter:()=>le.addClass("faded")}),new ResizeObserver(ce=>ScrollTrigger.refresh()).observe(te[0])}}class Article{constructor(){this.footer=new Footer,this.hover=new Hover,this.splitText=new Split;let ee=$(".keep-reading__item");this.loop=new HorizontalLoop(ee,{paused:!1,repeat:-1,speed:1.25})}}gsapWithCSS.registerPlugin(ScrollTrigger);class Fade{constructor(){let ee=$(".help__left"),te=ee.find(".f-48, .help__left--item");gsapWithCSS.timeline({defaults:{duration:.5,ease:"power3"},scrollTrigger:{trigger:ee,start:"top 80%"}}).from(te,{opacity:0,y:30,stagger:.1})}}gsapWithCSS.registerPlugin(SplitText,ScrollTrigger);class Help{constructor(){this.setSize(),this.time(),this.scroll(),this.mobile();let ee=$(".help__left--item"),te=$(".help__right--item"),re=$(".cursor-text").find("div");ee.each((ne,se)=>{let ae=$(se);ae.on("click",()=>{ee.removeClass("active"),te.removeClass("active"),ae.addClass("active"),te.eq(ne).addClass("active")}),ae.on("mouseenter",()=>{re.text("")})}),te.each((ne,se)=>{let ae=$(se),oe=ae.find(".f-48"),le=ae.find(".rich-text").find("p"),he=ae.find("li"),ce=new SplitText(oe,{type:"chars, lines",charsClass:"help-chars"}),de=new SplitText(le,{type:"lines",linesClass:"help-lines"}),ue=ce.chars,fe=de.lines,pe=fe.length;$(ue).each((me,xe)=>{$(xe).css("--delay",`${me*.02}s`)}),$(fe).each((me,xe)=>{$(xe).css("--delay",`${me*.12}s`)}),he.each((me,xe)=>{$(xe).css("--delay",`${(me+pe)*.12}s`)})})}setSize(){let ee=$(".help__right--item"),te=$(".help__left"),re=ee.eq(0).height();te.css("height",re),window.addEventListener("resize",()=>{re=ee.eq(0).height(),te.css("height",re)})}time(){let ee=$("#time"),te=new Date().toLocaleString("en-US",{timeZone:"America/New_York"}),re=te.split(",")[1].split(":")[0],ne=te.split(",")[1].split(":")[1];te.split(",")[1].split(":")[2].split(" ")[0];let se=`${re}:${ne}`;ee.text(se)}scroll(){let ee=null,te=$(".help__left--item").eq(3),re=$(".help__left--item"),ne=$(".help__right--item");ScrollTrigger.create({trigger:te,start:"top 80%",onEnter:()=>{ee==null&&(re.eq(0).addClass("active"),ne.eq(0).addClass("active"),ne.eq(0).addClass("show-bot"),ee=1)}})}mobile(){let ee=gsapWithCSS.matchMedia(),te="(max-width: 480px)";ee.add(te,()=>{let re=$(".help__right--item"),ne=re.parent(),se=Math.max.apply(null,re.map(function(){return $(this).height()}));ne.css("--height",`${se}px`)})}}class Contact{constructor(){this.footer=new Footer,this.help=new Help,this.fade=new Fade}}gsapWithCSS.registerPlugin(ScrollTrigger);class AtTop{constructor(){$("body").addClass("at-top"),ScrollTrigger.create({trigger:"body",start:"top top",end:"300 top",onLeave:()=>$("body").removeClass("at-top"),onEnterBack:()=>$("body").addClass("at-top")})}}gsapWithCSS.registerPlugin(ScrollTrigger);class Batch{constructor(ee){ScrollTrigger.batch(ee,{start:"top 85%",interval:.2,onEnter:te=>{gsapWithCSS.to(te,{opacity:1,y:0,stagger:.04,duration:1,ease:"power3"})}})}}gsapWithCSS.registerPlugin(ScrollTrigger);class Process{constructor(){let ee=$(".process__list"),te=ee.find(".process__item"),re=te.find(".process__circle"),ne=te.find(".process__img"),se=te.find(".process__name");gsapWithCSS.timeline({scrollTrigger:{trigger:ee,start:"top 85%"},defaults:{duration:1,ease:"power3",stagger:.1}}).fromTo(re,{scale:0},{scale:1}).fromTo(ne,{opacity:0},{opacity:.4},"<0.3").fromTo(se,{opacity:0},{opacity:.6},"<0.3")}}class Resume{constructor(){this.process=new Process,this.industries=new Batch($(".industries__item")),this.footer=new Footer}}class Audio{constructor(){let ee=gsapWithCSS.matchMedia(),te="(min-width: 991px)";const re=()=>{let ne=$("[audio-parent]"),se=$(".cursor-wrapper"),ae=se.find(".cursor"),oe=ae.find(".f-18");ae.find(".cursor-lines").length==0&&ae.append(`<div class="cursor-lines">
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                    <div class="cursor-line"></div>
                </div>`);let le=ae.find(".cursor-line");le.each((ue,fe)=>{let pe=$(fe),me=ue+1;me*2>le.length&&(me=le.length-ue),pe.attr("data-index",me),pe.css("--size",`${2}%`)});let he=null;const ce=()=>{he=setInterval(()=>{le.each((ue,fe)=>{let pe=$(fe),me=pe.attr("data-index"),xe=Math.floor(Math.random()*me*12)+1;pe.css("--size",`${xe}%`)})},200)},de=()=>{clearInterval(he),le.css("--size",`${2}%`),he=null};ne.each((ue,fe)=>{let pe=$(fe),me=pe.find("audio")[0];me!==void 0&&(pe.on("mouseenter",()=>{if(se.css("--size","9.58em"),se.addClass("show-text"),oe.text("Play audio"),pe.find('[img-popup="trigger"]').length>0){let xe=pe.find('[img-popup="trigger"]');xe.on("mouseenter",()=>{se.css("--size","1.53em"),se.removeClass("show-text")}),xe.on("mouseleave",()=>{se.css("--size","9.58em"),se.addClass("show-text"),oe.text("Play audio")})}}),pe.on("mouseleave",()=>{se.css("--size","1.53em"),se.removeClass("show-text")}),pe.on("click",()=>{pe.hasClass("playing")?(me.pause(),me.currentTime=0,pe.removeClass("playing"),se.removeClass("playing"),oe.text("Play audio"),de()):(se.addClass("playing"),me.play(),pe.addClass("playing"),ce(),ne.each((xe,ge)=>{let _e=$(ge),ve=_e.find("audio")[0];ve!==void 0&&xe!==ue&&(ve.pause(),ve.currentTime=0,_e.removeClass("playing"))}))}),me.addEventListener("ended",()=>{oe.text("Replay"),se.removeClass("playing"),pe.removeClass("playing"),de()}))})};ee.add(te,()=>re())}}class Life{constructor(){this.quoute=new Quoute,this.heroName=new HeroName,this.footer=new Footer,this.popups=new Popups,this.scrollParallax=new ScrollParallax,this.audio=new Audio}}class CheckActiveTag{constructor(ee){let te=$(".thoughts__tags-line"),re=$(ee)[0].offsetLeft,ne=$(ee).outerWidth();te.css({left:`${re}px`,width:`${ne}px`})}}gsapWithCSS.registerPlugin(ScrollTrigger);class Filter{constructor(){const te=new App().scroll.lenis;let re=$(".thoughts__tags-list");re.prepend(`<div class="thoughts__tags-item" change-cursor-large data-clear="true">
        <div class="f-22 no-caps light" m-f="16" t-f="12">All</div>
        </div>`),re.append('<div class="thoughts__tags-line"></div>');let ne=$(".thoughts__tags-item"),se=$(".work__item");this.hover(ne,te),se.addClass("active"),new CheckActiveTag(ne.first()),ne.on("click",ae=>{let oe=$(ae.currentTarget);if(ne.removeClass("active"),oe.addClass("active"),oe.attr("data-clear"))se.addClass("active");else{let le=oe.find("div").text();se.each((he,ce)=>{let de=$(ce);de.find("[filter]").text().indexOf(le)==-1?de.removeClass("active"):de.addClass("active")})}new CheckActiveTag(oe),ScrollTrigger.refresh()})}hover(ee,te){let re=$(".cursor-wrapper"),ne=re.find(".cursor");ee.each((se,ae)=>{let oe=$(ae);oe.on("mouseenter",()=>{oe.addClass("magnet");let le=oe[0].getBoundingClientRect().left,he=oe[0].getBoundingClientRect().top,ce=oe[0].getBoundingClientRect().width,de=oe[0].getBoundingClientRect().height;ne.css("--left",`${le}px`),ne.css("--top",`${he}px`),ne.css("--width",`${ce}px`),ne.css("--height",`${de}px`),ne.addClass("change"),ne.addClass("border-change"),te.on("scroll",()=>{oe.hasClass("magnet")&&(le=oe[0].getBoundingClientRect().left,he=oe[0].getBoundingClientRect().top,ce=oe[0].getBoundingClientRect().width,de=oe[0].getBoundingClientRect().height,ne.css("--left",`${le}px`),ne.css("--top",`${he}px`),ne.css("--width",`${ce}px`),ne.css("--height",`${de}px`))})}),oe.on("mouseleave",()=>{re.css("--size","1.53em"),ne.removeClass("change"),ne.removeClass("border-change"),oe.removeClass("magnet")})})}}gsapWithCSS.registerPlugin(SplitText);class Popup{constructor(){let ee=this,te=gsapWithCSS.matchMedia(),re="(min-width: 991px)";const se=new App().scroll.lenis;let ae=$(".work__popup-item");ae.each((de,ue)=>{let fe=$(ue),pe=fe.find(".w-condition-invisible"),me=fe.find(".work__popup-info-item");pe.remove();let xe=fe.find(".work__popup-slider-parent"),ge=new Swiper(xe[0],{slidesPerView:"auto",spaceBetween:100,direction:"horizontal",centeredSlides:!0,speed:300,touchEventsTarget:"container",grabCursor:!0,parallax:!0,breakpoints:{991:{spaceBetween:100},280:{spaceBetween:30}}}),_e=ge.activeIndex;me.eq(_e).addClass("active");let ve=fe.find(".slider__index").find("div").eq(0);fe.find(".slider__index").find("div").eq(2).text("0"+ge.slides.length);let be=fe.find(".slider__arrows").find(".slider__arrow").eq(0),we=fe.find(".slider__arrows").find(".slider__arrow").eq(1),Se=fe.find(".slider__progress-indicator"),Te=ge.progress*100;Se.css("width",`${Te}%`),ge.on("progress",()=>{Te=ge.progress*100,Se.css("width",`${Te}%`)}),be.on("click",()=>ge.slidePrev()),we.on("click",()=>ge.slideNext()),ge.on("activeIndexChange",()=>{_e=ge.activeIndex,me.removeClass("active"),me.eq(_e).addClass("active"),ve.text("0"+(_e+1)),xe.find("video").each((Be,Ce)=>{let De=$(Ce)[0];De.muted=!0,De.pause()}),ee.checkVideo(_e,xe)})});let oe=$(".work__item"),le=$(".work__popup"),he=le.find("[popup-name]");oe.each((de,ue)=>{let fe=$(ue),pe=fe.attr("item-trigger"),me=le.find(`[popup-name="${pe}"]`);fe.on("click",()=>{le.addClass("active"),he.removeClass("active"),me.addClass("active"),se.stop()})}),le.find(".work__popup-back").find("div").on("click",()=>{le.removeClass("active"),he.removeClass("active"),se.start()}),this.insertVideo(ae),te.add(re,()=>this.description(ae))}insertVideo(ee){$(ee).find(".work__popup-slider-item").each((re,ne)=>{let se=$(ne),ae=se.attr("video-link");if(ae){let oe=`<div class="work__popup-slider-video"><video muted autoplay crossorigin="anonymous" loop playsinline> <source src="${ae}" type="video/mp4"></video></div>`;se.append(oe);let le=se.find("video")[0];le.muted=!0,le.pause(),this.cursorHover(se,le)}})}cursorHover(ee,te){let re=$(".cursor-wrapper"),se=$(".cursor").find(".f-18");ee.on("mouseenter",()=>{re.css("--size","9.58em"),re.addClass("show-text"),re.addClass("remove-blend"),ee.hasClass("playing")?se.text("PAUSE"):se.text("PLAY")}),ee.on("mouseleave",()=>{re.css("--size","1.53em"),re.removeClass("show-text"),re.removeClass("remove-blend")}),ee.on("click",()=>{ee.hasClass("playing")?(te.muted=!0,te.pause(),se.text("PLAY")):(te.muted=!1,te.play(),se.text("PAUSE")),ee.toggleClass("playing")})}description(ee){let te=$(ee).find(".work__popup-info-parent"),re=te;te.each((ne,se)=>{$(se).find(".work__popup-info-item").each((le,he)=>{let ce=$(he);if(le>0){let de=ce.find(".f-25.light"),ue=de.parent(),fe=new SplitText(de,{type:"lines",linesClass:"lineChild"}),pe='<div class="f-25 col-red show-more">more +</div>',me,xe=fe.lines.length;ue.css("--length",xe),fe.lines.length>1&&(fe.revert(),ue.append(pe)),me=ue.find(".show-more");let ge=window.innerWidth,_e=de.height()/ge*100,ye=(parseInt(re.css("min-height"))/ge*100+parseInt(_e))*2;me.on("click",()=>{re.hasClass("expand")?(ue.removeClass("expand"),re.css("--height",`${ye}em`),re.removeClass("expand"),me.text("more +")):(ue.addClass("expand"),re.css("--height",`${ye}em`),re.addClass("expand"),me.text("less -"))})}})})}checkVideo(ee,te){let re=te.find(".work__popup-slider-item").eq(ee),ne=re.find("video")[0];ne&&(ne.muted=!1,ne.play(),re.addClass("playing"))}}/*! @vimeo/player v2.20.1 | (c) 2023 Vimeo | MIT License | https://github.com/vimeo/player.js */function ownKeys(ie,ee){var te=Object.keys(ie);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(ie);ee&&(re=re.filter(function(ne){return Object.getOwnPropertyDescriptor(ie,ne).enumerable})),te.push.apply(te,re)}return te}function _objectSpread2(ie){for(var ee=1;ee<arguments.length;ee++){var te=arguments[ee]!=null?arguments[ee]:{};ee%2?ownKeys(Object(te),!0).forEach(function(re){_defineProperty(ie,re,te[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(te)):ownKeys(Object(te)).forEach(function(re){Object.defineProperty(ie,re,Object.getOwnPropertyDescriptor(te,re))})}return ie}function _regeneratorRuntime(){_regeneratorRuntime=function(){return ie};var ie={},ee=Object.prototype,te=ee.hasOwnProperty,re=Object.defineProperty||function(De,Re,Le){De[Re]=Le.value},ne=typeof Symbol=="function"?Symbol:{},se=ne.iterator||"@@iterator",ae=ne.asyncIterator||"@@asyncIterator",oe=ne.toStringTag||"@@toStringTag";function le(De,Re,Le){return Object.defineProperty(De,Re,{value:Le,enumerable:!0,configurable:!0,writable:!0}),De[Re]}try{le({},"")}catch{le=function(Re,Le,ke){return Re[Le]=ke}}function he(De,Re,Le,ke){var Me=Re&&Re.prototype instanceof ue?Re:ue,Ee=Object.create(Me.prototype),Ae=new Pe(ke||[]);return re(Ee,"_invoke",{value:be(De,Le,Ae)}),Ee}function ce(De,Re,Le){try{return{type:"normal",arg:De.call(Re,Le)}}catch(ke){return{type:"throw",arg:ke}}}ie.wrap=he;var de={};function ue(){}function fe(){}function pe(){}var me={};le(me,se,function(){return this});var xe=Object.getPrototypeOf,ge=xe&&xe(xe(Be([])));ge&&ge!==ee&&te.call(ge,se)&&(me=ge);var _e=pe.prototype=ue.prototype=Object.create(me);function ve(De){["next","throw","return"].forEach(function(Re){le(De,Re,function(Le){return this._invoke(Re,Le)})})}function ye(De,Re){function Le(Me,Ee,Ae,Ie){var Fe=ce(De[Me],De,Ee);if(Fe.type!=="throw"){var Ne=Fe.arg,$e=Ne.value;return $e&&typeof $e=="object"&&te.call($e,"__await")?Re.resolve($e.__await).then(function(ze){Le("next",ze,Ae,Ie)},function(ze){Le("throw",ze,Ae,Ie)}):Re.resolve($e).then(function(ze){Ne.value=ze,Ae(Ne)},function(ze){return Le("throw",ze,Ae,Ie)})}Ie(Fe.arg)}var ke;re(this,"_invoke",{value:function(Me,Ee){function Ae(){return new Re(function(Ie,Fe){Le(Me,Ee,Ie,Fe)})}return ke=ke?ke.then(Ae,Ae):Ae()}})}function be(De,Re,Le){var ke="suspendedStart";return function(Me,Ee){if(ke==="executing")throw new Error("Generator is already running");if(ke==="completed"){if(Me==="throw")throw Ee;return Ce()}for(Le.method=Me,Le.arg=Ee;;){var Ae=Le.delegate;if(Ae){var Ie=we(Ae,Le);if(Ie){if(Ie===de)continue;return Ie}}if(Le.method==="next")Le.sent=Le._sent=Le.arg;else if(Le.method==="throw"){if(ke==="suspendedStart")throw ke="completed",Le.arg;Le.dispatchException(Le.arg)}else Le.method==="return"&&Le.abrupt("return",Le.arg);ke="executing";var Fe=ce(De,Re,Le);if(Fe.type==="normal"){if(ke=Le.done?"completed":"suspendedYield",Fe.arg===de)continue;return{value:Fe.arg,done:Le.done}}Fe.type==="throw"&&(ke="completed",Le.method="throw",Le.arg=Fe.arg)}}}function we(De,Re){var Le=Re.method,ke=De.iterator[Le];if(ke===void 0)return Re.delegate=null,Le==="throw"&&De.iterator.return&&(Re.method="return",Re.arg=void 0,we(De,Re),Re.method==="throw")||Le!=="return"&&(Re.method="throw",Re.arg=new TypeError("The iterator does not provide a '"+Le+"' method")),de;var Me=ce(ke,De.iterator,Re.arg);if(Me.type==="throw")return Re.method="throw",Re.arg=Me.arg,Re.delegate=null,de;var Ee=Me.arg;return Ee?Ee.done?(Re[De.resultName]=Ee.value,Re.next=De.nextLoc,Re.method!=="return"&&(Re.method="next",Re.arg=void 0),Re.delegate=null,de):Ee:(Re.method="throw",Re.arg=new TypeError("iterator result is not an object"),Re.delegate=null,de)}function Se(De){var Re={tryLoc:De[0]};1 in De&&(Re.catchLoc=De[1]),2 in De&&(Re.finallyLoc=De[2],Re.afterLoc=De[3]),this.tryEntries.push(Re)}function Te(De){var Re=De.completion||{};Re.type="normal",delete Re.arg,De.completion=Re}function Pe(De){this.tryEntries=[{tryLoc:"root"}],De.forEach(Se,this),this.reset(!0)}function Be(De){if(De){var Re=De[se];if(Re)return Re.call(De);if(typeof De.next=="function")return De;if(!isNaN(De.length)){var Le=-1,ke=function Me(){for(;++Le<De.length;)if(te.call(De,Le))return Me.value=De[Le],Me.done=!1,Me;return Me.value=void 0,Me.done=!0,Me};return ke.next=ke}}return{next:Ce}}function Ce(){return{value:void 0,done:!0}}return fe.prototype=pe,re(_e,"constructor",{value:pe,configurable:!0}),re(pe,"constructor",{value:fe,configurable:!0}),fe.displayName=le(pe,oe,"GeneratorFunction"),ie.isGeneratorFunction=function(De){var Re=typeof De=="function"&&De.constructor;return!!Re&&(Re===fe||(Re.displayName||Re.name)==="GeneratorFunction")},ie.mark=function(De){return Object.setPrototypeOf?Object.setPrototypeOf(De,pe):(De.__proto__=pe,le(De,oe,"GeneratorFunction")),De.prototype=Object.create(_e),De},ie.awrap=function(De){return{__await:De}},ve(ye.prototype),le(ye.prototype,ae,function(){return this}),ie.AsyncIterator=ye,ie.async=function(De,Re,Le,ke,Me){Me===void 0&&(Me=Promise);var Ee=new ye(he(De,Re,Le,ke),Me);return ie.isGeneratorFunction(Re)?Ee:Ee.next().then(function(Ae){return Ae.done?Ae.value:Ee.next()})},ve(_e),le(_e,oe,"Generator"),le(_e,se,function(){return this}),le(_e,"toString",function(){return"[object Generator]"}),ie.keys=function(De){var Re=Object(De),Le=[];for(var ke in Re)Le.push(ke);return Le.reverse(),function Me(){for(;Le.length;){var Ee=Le.pop();if(Ee in Re)return Me.value=Ee,Me.done=!1,Me}return Me.done=!0,Me}},ie.values=Be,Pe.prototype={constructor:Pe,reset:function(De){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Te),!De)for(var Re in this)Re.charAt(0)==="t"&&te.call(this,Re)&&!isNaN(+Re.slice(1))&&(this[Re]=void 0)},stop:function(){this.done=!0;var De=this.tryEntries[0].completion;if(De.type==="throw")throw De.arg;return this.rval},dispatchException:function(De){if(this.done)throw De;var Re=this;function Le(Fe,Ne){return Ee.type="throw",Ee.arg=De,Re.next=Fe,Ne&&(Re.method="next",Re.arg=void 0),!!Ne}for(var ke=this.tryEntries.length-1;ke>=0;--ke){var Me=this.tryEntries[ke],Ee=Me.completion;if(Me.tryLoc==="root")return Le("end");if(Me.tryLoc<=this.prev){var Ae=te.call(Me,"catchLoc"),Ie=te.call(Me,"finallyLoc");if(Ae&&Ie){if(this.prev<Me.catchLoc)return Le(Me.catchLoc,!0);if(this.prev<Me.finallyLoc)return Le(Me.finallyLoc)}else if(Ae){if(this.prev<Me.catchLoc)return Le(Me.catchLoc,!0)}else{if(!Ie)throw new Error("try statement without catch or finally");if(this.prev<Me.finallyLoc)return Le(Me.finallyLoc)}}}},abrupt:function(De,Re){for(var Le=this.tryEntries.length-1;Le>=0;--Le){var ke=this.tryEntries[Le];if(ke.tryLoc<=this.prev&&te.call(ke,"finallyLoc")&&this.prev<ke.finallyLoc){var Me=ke;break}}Me&&(De==="break"||De==="continue")&&Me.tryLoc<=Re&&Re<=Me.finallyLoc&&(Me=null);var Ee=Me?Me.completion:{};return Ee.type=De,Ee.arg=Re,Me?(this.method="next",this.next=Me.finallyLoc,de):this.complete(Ee)},complete:function(De,Re){if(De.type==="throw")throw De.arg;return De.type==="break"||De.type==="continue"?this.next=De.arg:De.type==="return"?(this.rval=this.arg=De.arg,this.method="return",this.next="end"):De.type==="normal"&&Re&&(this.next=Re),de},finish:function(De){for(var Re=this.tryEntries.length-1;Re>=0;--Re){var Le=this.tryEntries[Re];if(Le.finallyLoc===De)return this.complete(Le.completion,Le.afterLoc),Te(Le),de}},catch:function(De){for(var Re=this.tryEntries.length-1;Re>=0;--Re){var Le=this.tryEntries[Re];if(Le.tryLoc===De){var ke=Le.completion;if(ke.type==="throw"){var Me=ke.arg;Te(Le)}return Me}}throw new Error("illegal catch attempt")},delegateYield:function(De,Re,Le){return this.delegate={iterator:Be(De),resultName:Re,nextLoc:Le},this.method==="next"&&(this.arg=void 0),de}},ie}function asyncGeneratorStep(ie,ee,te,re,ne,se,ae){try{var oe=ie[se](ae),le=oe.value}catch(he){te(he);return}oe.done?ee(le):Promise.resolve(le).then(re,ne)}function _asyncToGenerator(ie){return function(){var ee=this,te=arguments;return new Promise(function(re,ne){var se=ie.apply(ee,te);function ae(le){asyncGeneratorStep(se,re,ne,ae,oe,"next",le)}function oe(le){asyncGeneratorStep(se,re,ne,ae,oe,"throw",le)}ae(void 0)})}}function _classCallCheck(ie,ee){if(!(ie instanceof ee))throw new TypeError("Cannot call a class as a function")}function _defineProperties(ie,ee){for(var te=0;te<ee.length;te++){var re=ee[te];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ie,_toPropertyKey(re.key),re)}}function _createClass(ie,ee,te){return ee&&_defineProperties(ie.prototype,ee),te&&_defineProperties(ie,te),Object.defineProperty(ie,"prototype",{writable:!1}),ie}function _defineProperty(ie,ee,te){return ee=_toPropertyKey(ee),ee in ie?Object.defineProperty(ie,ee,{value:te,enumerable:!0,configurable:!0,writable:!0}):ie[ee]=te,ie}function _inherits(ie,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(ee&&ee.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),Object.defineProperty(ie,"prototype",{writable:!1}),ee&&_setPrototypeOf(ie,ee)}function _getPrototypeOf(ie){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(te){return te.__proto__||Object.getPrototypeOf(te)},_getPrototypeOf(ie)}function _setPrototypeOf(ie,ee){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(re,ne){return re.__proto__=ne,re},_setPrototypeOf(ie,ee)}function _isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(ie,ee,te){return _isNativeReflectConstruct()?_construct=Reflect.construct.bind():_construct=function(ne,se,ae){var oe=[null];oe.push.apply(oe,se);var le=Function.bind.apply(ne,oe),he=new le;return ae&&_setPrototypeOf(he,ae.prototype),he},_construct.apply(null,arguments)}function _isNativeFunction(ie){return Function.toString.call(ie).indexOf("[native code]")!==-1}function _wrapNativeSuper(ie){var ee=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(re){if(re===null||!_isNativeFunction(re))return re;if(typeof re!="function")throw new TypeError("Super expression must either be null or a function");if(typeof ee!="undefined"){if(ee.has(re))return ee.get(re);ee.set(re,ne)}function ne(){return _construct(re,arguments,_getPrototypeOf(this).constructor)}return ne.prototype=Object.create(re.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(ne,re)},_wrapNativeSuper(ie)}function _assertThisInitialized(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function _possibleConstructorReturn(ie,ee){if(ee&&(typeof ee=="object"||typeof ee=="function"))return ee;if(ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(ie)}function _createSuper(ie){var ee=_isNativeReflectConstruct();return function(){var re=_getPrototypeOf(ie),ne;if(ee){var se=_getPrototypeOf(this).constructor;ne=Reflect.construct(re,arguments,se)}else ne=re.apply(this,arguments);return _possibleConstructorReturn(this,ne)}}function _toPrimitive(ie,ee){if(typeof ie!="object"||ie===null)return ie;var te=ie[Symbol.toPrimitive];if(te!==void 0){var re=te.call(ie,ee||"default");if(typeof re!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ee==="string"?String:Number)(ie)}function _toPropertyKey(ie){var ee=_toPrimitive(ie,"string");return typeof ee=="symbol"?ee:String(ee)}var isNode=typeof global!="undefined"&&{}.toString.call(global)==="[object global]";function getMethodName(ie,ee){return ie.indexOf(ee.toLowerCase())===0?ie:"".concat(ee.toLowerCase()).concat(ie.substr(0,1).toUpperCase()).concat(ie.substr(1))}function isDomElement(ie){return Boolean(ie&&ie.nodeType===1&&"nodeName"in ie&&ie.ownerDocument&&ie.ownerDocument.defaultView)}function isInteger(ie){return!isNaN(parseFloat(ie))&&isFinite(ie)&&Math.floor(ie)==ie}function isVimeoUrl(ie){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(ie)}function isVimeoEmbed(ie){var ee=/^https:\/\/player\.vimeo\.com\/video\/\d+/;return ee.test(ie)}function getVimeoUrl(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=ie.id,te=ie.url,re=ee||te;if(!re)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(isInteger(re))return"https://vimeo.com/".concat(re);if(isVimeoUrl(re))return re.replace("http:","https:");throw ee?new TypeError("\u201C".concat(ee,"\u201D is not a valid video id.")):new TypeError("\u201C".concat(re,"\u201D is not a vimeo.com url."))}var subscribe=function ie(ee,te,re){var ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"addEventListener",se=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"removeEventListener",ae=typeof te=="string"?[te]:te;return ae.forEach(function(oe){ee[ne](oe,re)}),{cancel:function(){return ae.forEach(function(le){return ee[se](le,re)})}}},arrayIndexOfSupport=typeof Array.prototype.indexOf!="undefined",postMessageSupport=typeof window!="undefined"&&typeof window.postMessage!="undefined";if(!isNode&&(!arrayIndexOfSupport||!postMessageSupport))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function createCommonjsModule(ie,ee){return ee={exports:{}},ie(ee,ee.exports),ee.exports}/*!
 * weakmap-polyfill v2.0.4 - ECMAScript6 WeakMap polyfill
 * https://github.com/polygonplanet/weakmap-polyfill
 * Copyright (c) 2015-2021 polygonplanet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */(function(ie){if(ie.WeakMap)return;var ee=Object.prototype.hasOwnProperty,te=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{value:1}).x===1}catch{}}(),re=function(se,ae,oe){te?Object.defineProperty(se,ae,{configurable:!0,writable:!0,value:oe}):se[ae]=oe};ie.WeakMap=function(){function se(){if(this===void 0)throw new TypeError("Constructor WeakMap requires 'new'");if(re(this,"_id",oe("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}re(se.prototype,"delete",function(he){if(ae(this,"delete"),!ne(he))return!1;var ce=he[this._id];return ce&&ce[0]===he?(delete he[this._id],!0):!1}),re(se.prototype,"get",function(he){if(ae(this,"get"),!!ne(he)){var ce=he[this._id];if(ce&&ce[0]===he)return ce[1]}}),re(se.prototype,"has",function(he){if(ae(this,"has"),!ne(he))return!1;var ce=he[this._id];return!!(ce&&ce[0]===he)}),re(se.prototype,"set",function(he,ce){if(ae(this,"set"),!ne(he))throw new TypeError("Invalid value used as weak map key");var de=he[this._id];return de&&de[0]===he?(de[1]=ce,this):(re(he,this._id,[he,ce]),this)});function ae(he,ce){if(!ne(he)||!ee.call(he,"_id"))throw new TypeError(ce+" method called on incompatible receiver "+typeof he)}function oe(he){return he+"_"+le()+"."+le()}function le(){return Math.random().toString().substring(2)}return re(se,"_polyfill",!0),se}();function ne(se){return Object(se)===se}})(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:commonjsGlobal);var npo_src=createCommonjsModule(function(ie){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(te,re,ne){re[te]=re[te]||ne(),ie.exports&&(ie.exports=re[te])})("Promise",commonjsGlobal,function(){var te,re,ne,se=Object.prototype.toString,ae=typeof setImmediate!="undefined"?function(ve){return setImmediate(ve)}:setTimeout;try{Object.defineProperty({},"x",{}),te=function(ve,ye,be,we){return Object.defineProperty(ve,ye,{value:be,writable:!0,configurable:we!==!1})}}catch{te=function(ye,be,we){return ye[be]=we,ye}}ne=function(){var ve,ye,be;function we(Se,Te){this.fn=Se,this.self=Te,this.next=void 0}return{add:function(Te,Pe){be=new we(Te,Pe),ye?ye.next=be:ve=be,ye=be,be=void 0},drain:function(){var Te=ve;for(ve=ye=re=void 0;Te;)Te.fn.call(Te.self),Te=Te.next}}}();function oe(_e,ve){ne.add(_e,ve),re||(re=ae(ne.drain))}function le(_e){var ve,ye=typeof _e;return _e!=null&&(ye=="object"||ye=="function")&&(ve=_e.then),typeof ve=="function"?ve:!1}function he(){for(var _e=0;_e<this.chain.length;_e++)ce(this,this.state===1?this.chain[_e].success:this.chain[_e].failure,this.chain[_e]);this.chain.length=0}function ce(_e,ve,ye){var be,we;try{ve===!1?ye.reject(_e.msg):(ve===!0?be=_e.msg:be=ve.call(void 0,_e.msg),be===ye.promise?ye.reject(TypeError("Promise-chain cycle")):(we=le(be))?we.call(be,ye.resolve,ye.reject):ye.resolve(be))}catch(Se){ye.reject(Se)}}function de(_e){var ve,ye=this;if(!ye.triggered){ye.triggered=!0,ye.def&&(ye=ye.def);try{(ve=le(_e))?oe(function(){var be=new pe(ye);try{ve.call(_e,function(){de.apply(be,arguments)},function(){ue.apply(be,arguments)})}catch(we){ue.call(be,we)}}):(ye.msg=_e,ye.state=1,ye.chain.length>0&&oe(he,ye))}catch(be){ue.call(new pe(ye),be)}}}function ue(_e){var ve=this;ve.triggered||(ve.triggered=!0,ve.def&&(ve=ve.def),ve.msg=_e,ve.state=2,ve.chain.length>0&&oe(he,ve))}function fe(_e,ve,ye,be){for(var we=0;we<ve.length;we++)(function(Te){_e.resolve(ve[Te]).then(function(Be){ye(Te,Be)},be)})(we)}function pe(_e){this.def=_e,this.triggered=!1}function me(_e){this.promise=_e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function xe(_e){if(typeof _e!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var ve=new me(this);this.then=function(be,we){var Se={success:typeof be=="function"?be:!0,failure:typeof we=="function"?we:!1};return Se.promise=new this.constructor(function(Pe,Be){if(typeof Pe!="function"||typeof Be!="function")throw TypeError("Not a function");Se.resolve=Pe,Se.reject=Be}),ve.chain.push(Se),ve.state!==0&&oe(he,ve),Se.promise},this.catch=function(be){return this.then(void 0,be)};try{_e.call(void 0,function(be){de.call(ve,be)},function(be){ue.call(ve,be)})}catch(ye){ue.call(ve,ye)}}var ge=te({},"constructor",xe,!1);return xe.prototype=ge,te(ge,"__NPO__",0,!1),te(xe,"resolve",function(ve){var ye=this;return ve&&typeof ve=="object"&&ve.__NPO__===1?ve:new ye(function(we,Se){if(typeof we!="function"||typeof Se!="function")throw TypeError("Not a function");we(ve)})}),te(xe,"reject",function(ve){return new this(function(be,we){if(typeof be!="function"||typeof we!="function")throw TypeError("Not a function");we(ve)})}),te(xe,"all",function(ve){var ye=this;return se.call(ve)!="[object Array]"?ye.reject(TypeError("Not an array")):ve.length===0?ye.resolve([]):new ye(function(we,Se){if(typeof we!="function"||typeof Se!="function")throw TypeError("Not a function");var Te=ve.length,Pe=Array(Te),Be=0;fe(ye,ve,function(De,Re){Pe[De]=Re,++Be===Te&&we(Pe)},Se)})}),te(xe,"race",function(ve){var ye=this;return se.call(ve)!="[object Array]"?ye.reject(TypeError("Not an array")):new ye(function(we,Se){if(typeof we!="function"||typeof Se!="function")throw TypeError("Not a function");fe(ye,ve,function(Pe,Be){we(Be)},Se)})}),xe})}),callbackMap=new WeakMap;function storeCallback(ie,ee,te){var re=callbackMap.get(ie.element)||{};ee in re||(re[ee]=[]),re[ee].push(te),callbackMap.set(ie.element,re)}function getCallbacks(ie,ee){var te=callbackMap.get(ie.element)||{};return te[ee]||[]}function removeCallback(ie,ee,te){var re=callbackMap.get(ie.element)||{};if(!re[ee])return!0;if(!te)return re[ee]=[],callbackMap.set(ie.element,re),!0;var ne=re[ee].indexOf(te);return ne!==-1&&re[ee].splice(ne,1),callbackMap.set(ie.element,re),re[ee]&&re[ee].length===0}function shiftCallbacks(ie,ee){var te=getCallbacks(ie,ee);if(te.length<1)return!1;var re=te.shift();return removeCallback(ie,ee,re),re}function swapCallbacks(ie,ee){var te=callbackMap.get(ie);callbackMap.set(ee,te),callbackMap.delete(ie)}function parseMessageData(ie){if(typeof ie=="string")try{ie=JSON.parse(ie)}catch(ee){return console.warn(ee),{}}return ie}function postMessage(ie,ee,te){if(!(!ie.element.contentWindow||!ie.element.contentWindow.postMessage)){var re={method:ee};te!==void 0&&(re.value=te);var ne=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));ne>=8&&ne<10&&(re=JSON.stringify(re)),ie.element.contentWindow.postMessage(re,ie.origin)}}function processData(ie,ee){ee=parseMessageData(ee);var te=[],re;if(ee.event){if(ee.event==="error"){var ne=getCallbacks(ie,ee.data.method);ne.forEach(function(ae){var oe=new Error(ee.data.message);oe.name=ee.data.name,ae.reject(oe),removeCallback(ie,ee.data.method,ae)})}te=getCallbacks(ie,"event:".concat(ee.event)),re=ee.data}else if(ee.method){var se=shiftCallbacks(ie,ee.method);se&&(te.push(se),re=ee.value)}te.forEach(function(ae){try{if(typeof ae=="function"){ae.call(ie,re);return}ae.resolve(re)}catch{}})}var oEmbedParameters=["autopause","autoplay","background","byline","color","colors","controls","dnt","height","id","interactive_params","keyboard","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function getOEmbedParameters(ie){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return oEmbedParameters.reduce(function(te,re){var ne=ie.getAttribute("data-vimeo-".concat(re));return(ne||ne==="")&&(te[re]=ne===""?1:ne),te},ee)}function createEmbed(ie,ee){var te=ie.html;if(!ee)throw new TypeError("An element must be provided");if(ee.getAttribute("data-vimeo-initialized")!==null)return ee.querySelector("iframe");var re=document.createElement("div");return re.innerHTML=te,ee.appendChild(re.firstChild),ee.setAttribute("data-vimeo-initialized","true"),ee.querySelector("iframe")}function getOEmbedData(ie){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=arguments.length>2?arguments[2]:void 0;return new Promise(function(re,ne){if(!isVimeoUrl(ie))throw new TypeError("\u201C".concat(ie,"\u201D is not a vimeo.com url."));var se="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(ie));for(var ae in ee)ee.hasOwnProperty(ae)&&(se+="&".concat(ae,"=").concat(encodeURIComponent(ee[ae])));var oe="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;oe.open("GET",se,!0),oe.onload=function(){if(oe.status===404){ne(new Error("\u201C".concat(ie,"\u201D was not found.")));return}if(oe.status===403){ne(new Error("\u201C".concat(ie,"\u201D is not embeddable.")));return}try{var le=JSON.parse(oe.responseText);if(le.domain_status_code===403){createEmbed(le,te),ne(new Error("\u201C".concat(ie,"\u201D is not embeddable.")));return}re(le)}catch(he){ne(he)}},oe.onerror=function(){var le=oe.status?" (".concat(oe.status,")"):"";ne(new Error("There was an error fetching the embed code from Vimeo".concat(le,".")))},oe.send()})}function initializeEmbeds(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,ee=[].slice.call(ie.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),te=function(ne){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(ne))};ee.forEach(function(re){try{if(re.getAttribute("data-vimeo-defer")!==null)return;var ne=getOEmbedParameters(re),se=getVimeoUrl(ne);getOEmbedData(se,ne,re).then(function(ae){return createEmbed(ae,re)}).catch(te)}catch(ae){te(ae)}})}function resizeEmbeds(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var ee=function(re){if(!!isVimeoUrl(re.origin)&&!(!re.data||re.data.event!=="spacechange")){for(var ne=ie.querySelectorAll("iframe"),se=0;se<ne.length;se++)if(ne[se].contentWindow===re.source){var ae=ne[se].parentElement;ae.style.paddingBottom="".concat(re.data.data[0].bottom,"px");break}}};window.addEventListener("message",ee)}}function initAppendVideoMetadata(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoSeoMetadataAppended){window.VimeoSeoMetadataAppended=!0;var ee=function(re){if(!!isVimeoUrl(re.origin)){var ne=parseMessageData(re.data);if(!(!ne||ne.event!=="ready"))for(var se=ie.querySelectorAll("iframe"),ae=0;ae<se.length;ae++){var oe=se[ae],le=oe.contentWindow===re.source;if(isVimeoEmbed(oe.src)&&le){var he=new Player(oe);he.callMethod("appendVideoMetadata",window.location.href)}}}};window.addEventListener("message",ee)}}function checkUrlTimeParam(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoCheckedUrlTimeParam){window.VimeoCheckedUrlTimeParam=!0;var ee=function(ne){"console"in window&&console.error&&console.error("There was an error getting video Id: ".concat(ne))},te=function(ne){if(!!isVimeoUrl(ne.origin)){var se=parseMessageData(ne.data);if(!(!se||se.event!=="ready"))for(var ae=ie.querySelectorAll("iframe"),oe=function(){var ce=ae[le],de=ce.contentWindow===ne.source;if(isVimeoEmbed(ce.src)&&de){var ue=new Player(ce);ue.getVideoId().then(function(fe){var pe=new RegExp("[?&]vimeo_t_".concat(fe,"=([^&#]*)")).exec(window.location.href);if(pe&&pe[1]){var me=decodeURI(pe[1]);ue.setCurrentTime(me)}}).catch(ee)}},le=0;le<ae.length;le++)oe()}};window.addEventListener("message",te)}}function initializeScreenfull(){var ie=function(){for(var re,ne=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],se=0,ae=ne.length,oe={};se<ae;se++)if(re=ne[se],re&&re[1]in document){for(se=0;se<re.length;se++)oe[ne[0][se]]=re[se];return oe}return!1}(),ee={fullscreenchange:ie.fullscreenchange,fullscreenerror:ie.fullscreenerror},te={request:function(ne){return new Promise(function(se,ae){var oe=function he(){te.off("fullscreenchange",he),se()};te.on("fullscreenchange",oe),ne=ne||document.documentElement;var le=ne[ie.requestFullscreen]();le instanceof Promise&&le.then(oe).catch(ae)})},exit:function(){return new Promise(function(ne,se){if(!te.isFullscreen){ne();return}var ae=function le(){te.off("fullscreenchange",le),ne()};te.on("fullscreenchange",ae);var oe=document[ie.exitFullscreen]();oe instanceof Promise&&oe.then(ae).catch(se)})},on:function(ne,se){var ae=ee[ne];ae&&document.addEventListener(ae,se)},off:function(ne,se){var ae=ee[ne];ae&&document.removeEventListener(ae,se)}};return Object.defineProperties(te,{isFullscreen:{get:function(){return Boolean(document[ie.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[ie.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[ie.fullscreenEnabled])}}}),te}var defaultOptions={role:"viewer",autoPlayMuted:!0,allowedDrift:.3,maxAllowedDrift:1,minCheckInterval:.1,maxRateAdjustment:.2,maxTimeToCatchUp:1},TimingSrcConnector=function(ie){_inherits(te,ie);var ee=_createSuper(te);function te(re,ne){var se,ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},oe=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,te),se=ee.call(this),_defineProperty(_assertThisInitialized(se),"logger",void 0),_defineProperty(_assertThisInitialized(se),"speedAdjustment",0),_defineProperty(_assertThisInitialized(se),"adjustSpeed",function(){var le=_asyncToGenerator(_regeneratorRuntime().mark(function he(ce,de){var ue;return _regeneratorRuntime().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(se.speedAdjustment!==de){pe.next=2;break}return pe.abrupt("return");case 2:return pe.next=4,ce.getPlaybackRate();case 4:return pe.t0=pe.sent,pe.t1=se.speedAdjustment,pe.t2=pe.t0-pe.t1,pe.t3=de,ue=pe.t2+pe.t3,se.log("New playbackRate:  ".concat(ue)),pe.next=12,ce.setPlaybackRate(ue);case 12:se.speedAdjustment=de;case 13:case"end":return pe.stop()}},he)}));return function(he,ce){return le.apply(this,arguments)}}()),se.logger=oe,se.init(ne,re,_objectSpread2(_objectSpread2({},defaultOptions),ae)),se}return _createClass(te,[{key:"disconnect",value:function(){this.dispatchEvent(new Event("disconnect"))}},{key:"init",value:function(){var re=_asyncToGenerator(_regeneratorRuntime().mark(function se(ae,oe,le){var he=this,ce,de,ue;return _regeneratorRuntime().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,this.waitForTOReadyState(ae,"open");case 2:if(le.role!=="viewer"){pe.next=10;break}return pe.next=5,this.updatePlayer(ae,oe,le);case 5:ce=subscribe(ae,"change",function(){return he.updatePlayer(ae,oe,le)}),de=this.maintainPlaybackPosition(ae,oe,le),this.addEventListener("disconnect",function(){de.cancel(),ce.cancel()}),pe.next=14;break;case 10:return pe.next=12,this.updateTimingObject(ae,oe);case 12:ue=subscribe(oe,["seeked","play","pause","ratechange"],function(){return he.updateTimingObject(ae,oe)},"on","off"),this.addEventListener("disconnect",function(){return ue.cancel()});case 14:case"end":return pe.stop()}},se,this)}));function ne(se,ae,oe){return re.apply(this,arguments)}return ne}()},{key:"updateTimingObject",value:function(){var re=_asyncToGenerator(_regeneratorRuntime().mark(function se(ae,oe){return _regeneratorRuntime().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.t0=ae,he.next=3,oe.getCurrentTime();case 3:return he.t1=he.sent,he.next=6,oe.getPaused();case 6:if(!he.sent){he.next=10;break}he.t2=0,he.next=13;break;case 10:return he.next=12,oe.getPlaybackRate();case 12:he.t2=he.sent;case 13:he.t3=he.t2,he.t4={position:he.t1,velocity:he.t3},he.t0.update.call(he.t0,he.t4);case 16:case"end":return he.stop()}},se)}));function ne(se,ae){return re.apply(this,arguments)}return ne}()},{key:"updatePlayer",value:function(){var re=_asyncToGenerator(_regeneratorRuntime().mark(function se(ae,oe,le){var he,ce,de;return _regeneratorRuntime().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(he=ae.query(),ce=he.position,de=he.velocity,typeof ce=="number"&&oe.setCurrentTime(ce),typeof de!="number"){fe.next=25;break}if(de!==0){fe.next=11;break}return fe.next=6,oe.getPaused();case 6:if(fe.t0=fe.sent,fe.t0!==!1){fe.next=9;break}oe.pause();case 9:fe.next=25;break;case 11:if(!(de>0)){fe.next=25;break}return fe.next=14,oe.getPaused();case 14:if(fe.t1=fe.sent,fe.t1!==!0){fe.next=19;break}return fe.next=18,oe.play().catch(function(){var pe=_asyncToGenerator(_regeneratorRuntime().mark(function me(xe){return _regeneratorRuntime().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(!(xe.name==="NotAllowedError"&&le.autoPlayMuted)){_e.next=5;break}return _e.next=3,oe.setMuted(!0);case 3:return _e.next=5,oe.play().catch(function(ve){return console.error("Couldn't play the video from TimingSrcConnector. Error:",ve)});case 5:case"end":return _e.stop()}},me)}));return function(me){return pe.apply(this,arguments)}}());case 18:this.updatePlayer(ae,oe,le);case 19:return fe.next=21,oe.getPlaybackRate();case 21:if(fe.t2=fe.sent,fe.t3=de,fe.t2===fe.t3){fe.next=25;break}oe.setPlaybackRate(de);case 25:case"end":return fe.stop()}},se,this)}));function ne(se,ae,oe){return re.apply(this,arguments)}return ne}()},{key:"maintainPlaybackPosition",value:function(ne,se,ae){var oe=this,le=ae.allowedDrift,he=ae.maxAllowedDrift,ce=ae.minCheckInterval,de=ae.maxRateAdjustment,ue=ae.maxTimeToCatchUp,fe=Math.min(ue,Math.max(ce,he))*1e3,pe=function(){var xe=_asyncToGenerator(_regeneratorRuntime().mark(function ge(){var _e,ve,ye,be,we;return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(Te.t0=ne.query().velocity===0,Te.t0){Te.next=6;break}return Te.next=4,se.getPaused();case 4:Te.t1=Te.sent,Te.t0=Te.t1===!0;case 6:if(!Te.t0){Te.next=8;break}return Te.abrupt("return");case 8:return Te.t2=ne.query().position,Te.next=11,se.getCurrentTime();case 11:if(Te.t3=Te.sent,_e=Te.t2-Te.t3,ve=Math.abs(_e),oe.log("Drift: ".concat(_e)),!(ve>he)){Te.next=22;break}return Te.next=18,oe.adjustSpeed(se,0);case 18:se.setCurrentTime(ne.query().position),oe.log("Resync by currentTime"),Te.next=29;break;case 22:if(!(ve>le)){Te.next=29;break}return ye=ve/ue,be=de,we=ye<be?(be-ye)/2:be,Te.next=28,oe.adjustSpeed(se,we*Math.sign(_e));case 28:oe.log("Resync by playbackRate");case 29:case"end":return Te.stop()}},ge)}));return function(){return xe.apply(this,arguments)}}(),me=setInterval(function(){return pe()},fe);return{cancel:function(){return clearInterval(me)}}}},{key:"log",value:function(ne){var se;(se=this.logger)===null||se===void 0||se.call(this,"TimingSrcConnector: ".concat(ne))}},{key:"waitForTOReadyState",value:function(ne,se){return new Promise(function(ae){var oe=function le(){ne.readyState===se?ae():ne.addEventListener("readystatechange",le,{once:!0})};oe()})}}]),te}(_wrapNativeSuper(EventTarget)),playerMap=new WeakMap,readyMap=new WeakMap,screenfull={},Player=function(){function ie(ee){var te=this,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,ie),window.jQuery&&ee instanceof jQuery&&(ee.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),ee=ee[0]),typeof document!="undefined"&&typeof ee=="string"&&(ee=document.getElementById(ee)),!isDomElement(ee))throw new TypeError("You must pass either a valid element or a valid id.");if(ee.nodeName!=="IFRAME"){var ne=ee.querySelector("iframe");ne&&(ee=ne)}if(ee.nodeName==="IFRAME"&&!isVimeoUrl(ee.getAttribute("src")||""))throw new Error("The player element passed isn\u2019t a Vimeo embed.");if(playerMap.has(ee))return playerMap.get(ee);this._window=ee.ownerDocument.defaultView,this.element=ee,this.origin="*";var se=new npo_src(function(oe,le){if(te._onMessage=function(de){if(!(!isVimeoUrl(de.origin)||te.element.contentWindow!==de.source)){te.origin==="*"&&(te.origin=de.origin);var ue=parseMessageData(de.data),fe=ue&&ue.event==="error",pe=fe&&ue.data&&ue.data.method==="ready";if(pe){var me=new Error(ue.data.message);me.name=ue.data.name,le(me);return}var xe=ue&&ue.event==="ready",ge=ue&&ue.method==="ping";if(xe||ge){te.element.setAttribute("data-ready","true"),oe();return}processData(te,ue)}},te._window.addEventListener("message",te._onMessage),te.element.nodeName!=="IFRAME"){var he=getOEmbedParameters(ee,re),ce=getVimeoUrl(he);getOEmbedData(ce,he,ee).then(function(de){var ue=createEmbed(de,ee);return te.element=ue,te._originalElement=ee,swapCallbacks(ee,ue),playerMap.set(te.element,te),de}).catch(le)}});if(readyMap.set(this,se),playerMap.set(this.element,this),this.element.nodeName==="IFRAME"&&postMessage(this,"ping"),screenfull.isEnabled){var ae=function(){return screenfull.exit()};this.fullscreenchangeHandler=function(){screenfull.isFullscreen?storeCallback(te,"event:exitFullscreen",ae):removeCallback(te,"event:exitFullscreen",ae),te.ready().then(function(){postMessage(te,"fullscreenchange",screenfull.isFullscreen)})},screenfull.on("fullscreenchange",this.fullscreenchangeHandler)}return this}return _createClass(ie,[{key:"callMethod",value:function(te){var re=this,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new npo_src(function(se,ae){return re.ready().then(function(){storeCallback(re,te,{resolve:se,reject:ae}),postMessage(re,te,ne)}).catch(ae)})}},{key:"get",value:function(te){var re=this;return new npo_src(function(ne,se){return te=getMethodName(te,"get"),re.ready().then(function(){storeCallback(re,te,{resolve:ne,reject:se}),postMessage(re,te)}).catch(se)})}},{key:"set",value:function(te,re){var ne=this;return new npo_src(function(se,ae){if(te=getMethodName(te,"set"),re==null)throw new TypeError("There must be a value to set.");return ne.ready().then(function(){storeCallback(ne,te,{resolve:se,reject:ae}),postMessage(ne,te,re)}).catch(ae)})}},{key:"on",value:function(te,re){if(!te)throw new TypeError("You must pass an event name.");if(!re)throw new TypeError("You must pass a callback function.");if(typeof re!="function")throw new TypeError("The callback must be a function.");var ne=getCallbacks(this,"event:".concat(te));ne.length===0&&this.callMethod("addEventListener",te).catch(function(){}),storeCallback(this,"event:".concat(te),re)}},{key:"off",value:function(te,re){if(!te)throw new TypeError("You must pass an event name.");if(re&&typeof re!="function")throw new TypeError("The callback must be a function.");var ne=removeCallback(this,"event:".concat(te),re);ne&&this.callMethod("removeEventListener",te).catch(function(se){})}},{key:"loadVideo",value:function(te){return this.callMethod("loadVideo",te)}},{key:"ready",value:function(){var te=readyMap.get(this)||new npo_src(function(re,ne){ne(new Error("Unknown player. Probably unloaded."))});return npo_src.resolve(te)}},{key:"addCuePoint",value:function(te){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:te,data:re})}},{key:"removeCuePoint",value:function(te){return this.callMethod("removeCuePoint",te)}},{key:"enableTextTrack",value:function(te,re){if(!te)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:te,kind:re})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return screenfull.isEnabled?screenfull.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return screenfull.isEnabled?screenfull.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return screenfull.isEnabled?npo_src.resolve(screenfull.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"remotePlaybackPrompt",value:function(){return this.callMethod("remotePlaybackPrompt")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var te=this;return new npo_src(function(re){if(readyMap.delete(te),playerMap.delete(te.element),te._originalElement&&(playerMap.delete(te._originalElement),te._originalElement.removeAttribute("data-vimeo-initialized")),te.element&&te.element.nodeName==="IFRAME"&&te.element.parentNode&&(te.element.parentNode.parentNode&&te._originalElement&&te._originalElement!==te.element.parentNode?te.element.parentNode.parentNode.removeChild(te.element.parentNode):te.element.parentNode.removeChild(te.element)),te.element&&te.element.nodeName==="DIV"&&te.element.parentNode){te.element.removeAttribute("data-vimeo-initialized");var ne=te.element.querySelector("iframe");ne&&ne.parentNode&&(ne.parentNode.parentNode&&te._originalElement&&te._originalElement!==ne.parentNode?ne.parentNode.parentNode.removeChild(ne.parentNode):ne.parentNode.removeChild(ne))}te._window.removeEventListener("message",te._onMessage),screenfull.isEnabled&&screenfull.off("fullscreenchange",te.fullscreenchangeHandler),re()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(te){return this.set("autopause",te)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(te){return this.set("cameraProps",te)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"getColors",value:function(){return npo_src.all([this.get("colorOne"),this.get("colorTwo"),this.get("colorThree"),this.get("colorFour")])}},{key:"setColor",value:function(te){return this.set("color",te)}},{key:"setColors",value:function(te){if(!Array.isArray(te))return new npo_src(function(se,ae){return ae(new TypeError("Argument must be an array."))});var re=new npo_src(function(se){return se(null)}),ne=[te[0]?this.set("colorOne",te[0]):re,te[1]?this.set("colorTwo",te[1]):re,te[2]?this.set("colorThree",te[2]):re,te[3]?this.set("colorFour",te[3]):re];return npo_src.all(ne)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(te){return this.set("currentTime",te)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(te){return this.set("loop",te)}},{key:"setMuted",value:function(te){return this.set("muted",te)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(te){return this.set("playbackRate",te)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(te){return this.set("quality",te)}},{key:"getRemotePlaybackAvailability",value:function(){return this.get("remotePlaybackAvailability")}},{key:"getRemotePlaybackState",value:function(){return this.get("remotePlaybackState")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(te){return this.set("volume",te)}},{key:"setTimingSrc",value:function(){var ee=_asyncToGenerator(_regeneratorRuntime().mark(function re(ne,se){var ae=this,oe;return _regeneratorRuntime().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(ne){he.next=2;break}throw new TypeError("A Timing Object must be provided.");case 2:return he.next=4,this.ready();case 4:return oe=new TimingSrcConnector(this,ne,se),postMessage(this,"notifyTimingObjectConnect"),oe.addEventListener("disconnect",function(){return postMessage(ae,"notifyTimingObjectDisconnect")}),he.abrupt("return",oe);case 8:case"end":return he.stop()}},re,this)}));function te(re,ne){return ee.apply(this,arguments)}return te}()}]),ie}();isNode||(screenfull=initializeScreenfull(),initializeEmbeds(),resizeEmbeds(),initAppendVideoMetadata(),checkUrlTimeParam()),gsapWithCSS.registerPlugin(ScrollTrigger);class Real{constructor(){let ee=$(".studio__real"),te=ee.find(".video-bg"),re=te.find("video")[0];gsapWithCSS.timeline({scrollTrigger:{trigger:ee,start:"top bottom",end:"center center",scrub:!0}}).fromTo(te,{scale:.5},{scale:1}),this.cursorHover(ee,re)}cursorHover(ee,te){let re=$(".cursor-wrapper"),se=$(".cursor").find(".f-18");ee.on("mouseenter",()=>{re.addClass("show-text"),re.addClass("remove-blend"),se.text("PLAY")}),ee.on("mouseleave",()=>{re.removeClass("show-text"),re.removeClass("remove-blend")}),ee.on("click",()=>{ee.hasClass("playing")?(te.muted=!0,se.text("PLAY")):(te.muted=!1,se.text("MUTE")),ee.toggleClass("playing")}),ScrollTrigger.create({trigger:ee,start:"top bottom",end:"bottom top",onLeave:()=>{te.muted=!0,se.text("PLAY"),ee.removeClass("playing")},onLeaveBack:()=>{te.muted=!0,se.text("PLAY"),ee.removeClass("playing")}})}}class WokrsHover{constructor(){let ee=gsapWithCSS.matchMedia(),te="(hover: hover)";ee.add(te,()=>{let re=$(".work__item");re.each((ne,se)=>{let ae=$(se);ae.on("mouseenter",()=>{re.addClass("inactive").removeClass("hover"),ae.removeClass("inactive").addClass("hover")}),ae.on("mouseleave",()=>{re.removeClass("inactive").removeClass("hover")})})})}}gsapWithCSS.registerPlugin(ScrollTrigger);class WorksImg{constructor(){let ee=$(".work__item"),te=50;ee.each((ne,se)=>{let oe=$(se).find(".work__img"),le=Math.random(),he=Math.random();le<.5&&(le=.5),he<.3&&(he=.3),he>.6&&(he=.6);let ce=(le+.5)*2,de=(.5-he)*2;oe.css("--top",`${ce*te}%`),oe.css("--left",`${de*te}%`)}),$(".work__item:nth-child(4n + 1)").each((ne,se)=>{let ae=$(se),oe=ae.find(".work__img"),le=ne%2===0?20:-20;gsapWithCSS.timeline({scrollTrigger:{trigger:ae,start:"top bottom",end:"bottom top",scrub:1}}).fromTo(oe,{yPercent:0-le},{yPercent:le})})}}class Works{constructor(){this.quoute=new Quoute,this.heroName=new HeroName,this.footer=new Footer,this.parallax=new ScrollParallax,this.real=new Real,this.filter=new Filter,this.hover=new WokrsHover,this.popup=new Popup,this.imgPopup=new Popups,this.worksImg=new WorksImg,this.services=new Batch($(".services__item")),this.servicesTitle=new Batch($(".services__vertical-title")),this.button=new Batch($(".button"))}}class Burger{constructor(){const te=new App().scroll.lenis;let re=$("body"),ne=$(".nav__burger");$(".burger__list").find(".burger__item").each((oe,le)=>{let he=$(le);he.css("--delay",`${oe*.05+.1}s`),he.on("click",()=>{re.removeClass("burger-open"),te.start()})}),ne.on("click",()=>{re.hasClass("burger-open")?(re.removeClass("burger-open"),te.start()):(re.addClass("burger-open"),te.stop())})}}class ScreenSaver{constructor(){let ee=$(".screensaver"),te=$(".screensaver__row"),re=ee.find(".f-48"),ne=90,se=gsapWithCSS.timeline({paused:!0});te.each((ce,de)=>{let ue=$(de),fe=Math.floor(Math.random()*60)+1;ue.css("--transform",`${0-fe}%`)});const ae=()=>ee.removeClass("show");se.to(re,{opacity:1,duration:.1,stagger:{each:.001,from:"random"},onComplete:ae});let oe=0,le=["mousemove","click","mousedown","onkeydown","ontouchstart","scroll"];const he=()=>oe=0;le.forEach(ce=>window.addEventListener(ce,he)),setInterval(()=>{oe++,oe>=ne&&(se.play(),window.addEventListener("mousemove",()=>se.reverse()),window.addEventListener("click",()=>se.reverse()),window.addEventListener("mousedown",()=>se.reverse()),window.addEventListener("onkeydown",()=>se.reverse()),window.addEventListener("scroll",()=>se.reverse()),window.addEventListener("ontouchstart",()=>se.reverse()))},1e3)}}class Resize{constructor(){let ee=window.innerWidth,te;const re=()=>{te=window.innerWidth,(te>1024&&ee<=1024||te<=1024&&ee>1024||te>480&&ee<=480||te<=480&&ee>480)&&window.location.reload(),ee=te};function ne(se){var ae;return function(oe){ae&&clearTimeout(ae),ae=setTimeout(se,300,oe)}}window.addEventListener("resize",ne(function(se){re()}))}}class Anchors{constructor(){new App().scroll.lenis;const re=window.location.href.split("#")[1];if(re){let ne=$(`#${re}`),se=ne[0].offsetTop;ne&&setTimeout(()=>{window.scrollTo({top:se,behavior:"smooth"})},2e3)}}}let instance=null;class App{constructor(){if(instance)return instance;instance=this;let ee=this;this.heroImg=null,navigator.userAgent.match(/iPad/i)!=null;let te=gsapWithCSS.matchMedia(),re="(min-width: 1024px)";const ne=()=>window.scrollTo({top:0,behavior:"instant"});window.addEventListener("load",()=>{setTimeout(ne,1)});const se=()=>{ne(),$("main"),$("img").removeAttr("srcset"),new Title,new ImgFade,new Cursor,new AtTop,new Anchors,$("main").attr("data-barba-namespace")=="home"&&(this.home=new Home),$("main").attr("data-barba-namespace")=="loves"&&(this.cases=new Loves),$("main").attr("data-barba-namespace")=="thoughts"&&(this.thoughts=new Thoughts),$("main").attr("data-barba-namespace")=="article"&&(this.article=new Article),$("main").attr("data-barba-namespace")=="contact"&&(this.contact=new Contact),$("main").attr("data-barba-namespace")=="resume"&&(this.resume=new Resume),$("main").attr("data-barba-namespace")=="life"&&(this.life=new Life),$("main").attr("data-barba-namespace")=="work"&&(this.work=new Works)};let ae=4,oe=1.5,le=1;api.get("homeLoader")==null&&api.set("homeLoader",ae,{expires:le}),api.get("lovesLoader")==null&&api.set("lovesLoader",ae,{expires:le}),api.get("thoughtsLoader")==null&&api.set("thoughtsLoader",ae,{expires:le}),api.get("articleLoader")==null&&api.set("articleLoader",ae,{expires:le}),api.get("contactLoader")==null&&api.set("contactLoader",ae,{expires:le}),api.get("resumeLoader")==null&&api.set("resumeLoader",ae,{expires:le}),api.get("lifeLoader")==null&&api.set("lifeLoader",ae,{expires:le}),api.get("workLoader")==null&&api.set("workLoader",ae,{expires:le}),ct.use(n$2),ct.init({debug:!0,timeout:7e3,transitions:[{name:"once",once(he){const ce=he.next.container,de=()=>{te.add(re,()=>{const fe=$(ce).find(".hero__img").attr("aspect"),pe=new HeroImg({dom:ce.querySelector(".hero")},fe);ee.heroImg=pe})};let ue;he.next.container.getAttribute("data-barba-namespace")=="loves"&&(ue=api.get("lovesLoader"),api.set("lovesLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="thoughts"&&(ue=api.get("thoughtsLoader"),api.set("thoughtsLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="life"&&(ue=api.get("lifeLoader"),api.set("lifeLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="work"&&(ue=api.get("workLoader"),api.set("workLoader",oe,{expires:le})),new _Counter(he.next.container,de,ue)}},{name:"home",to:{namespace:["home"]},once(he){const ce=he.next.container,de=()=>{te.add(re,()=>{const ue=$(ce).find(".hero__img").attr("aspect"),fe=new HeroImg({dom:ce.querySelector(".hero")},ue);ee.heroImg=fe})};api.get("visited")!="true"?(new _HomeLoader(he.next.container,de),api.set("visited","true",{expires:le}),api.set("homeLoader",oe,{expires:le})):new _Counter(he.next.container,de,api.get("homeLoader"))}},{name:"contact",to:{namespace:["contact"]},once(he){const ce=()=>{new _ContactLoader(he.next.container)};new _Counter(he.next.container,ce,api.get("contactLoader")),api.set("contactLoader",oe,{expires:le})}},{name:"404",to:{namespace:["404"]},once(he){}},{name:"article",to:{namespace:["article"]},once(he){const ce=()=>{new _ArticleLoader(he.next.container)};new _Counter(he.next.container,ce,api.get("articleLoader")),api.set("articleLoader",oe,{expires:le})}},{name:"resume",to:{namespace:["resume"]},once(he){const ce=()=>{new _ResumeLoader(he.next.container)};new _Counter(he.next.container,ce,api.get("resumeLoader")),api.set("resumeLoader",oe,{expires:le})}},{name:"counter",leave(he){const ce=this.async();new _Leave(he.current.container,ce)},enter(he){te.add(re,()=>{ee.heroImg.destroy()});const ce=he.next.container,de=()=>{te.add(re,()=>{const ue=$(ce).find(".hero__img").attr("aspect"),fe=new HeroImg({dom:ce.querySelector(".hero")},ue);ee.heroImg=fe})};new _Counter(he.next.container,de)},after(he){se()}},{name:"with-canvas",from:{namespace:["home","loves","thoughts","life","work"]},to:{namespace:["home","loves","thoughts","life","work"]},leave(he){const ce=this.async();new _Leave(he.current.container,ce)},enter(he){te.add(re,()=>{ee.heroImg.destroy()});const ce=he.next.container,de=()=>{te.add(re,()=>{const fe=$(ce).find(".hero__img").attr("aspect"),pe=new HeroImg({dom:ce.querySelector(".hero")},fe);ee.heroImg=pe})};let ue;he.next.container.getAttribute("data-barba-namespace")=="home"&&(ue=api.get("homeLoader"),api.set("homeLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="loves"&&(ue=api.get("lovesLoader"),api.set("lovesLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="thoughts"&&(ue=api.get("thoughtsLoader"),api.set("thoughtsLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="life"&&(ue=api.get("lifeLoader"),api.set("lifeLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="work"&&(ue=api.get("workLoader"),api.set("workLoader",oe,{expires:le})),new _Counter(he.next.container,de,ue)}},{name:"without-canvas-article",from:{namespace:["article","contact","resume","404"]},to:{namespace:["article"]},leave(he){const ce=this.async();new _Leave(he.current.container,ce)},enter(he){const ce=()=>{new _ArticleLoader(he.next.container)};new _Counter(he.next.container,ce,api.get("articleLoader")),api.set("articleLoader",oe,{expires:le})}},{name:"without-canvas-contact",from:{namespace:["article","contact","resume","404"]},to:{namespace:["contact"]},leave(he){const ce=this.async();new _Leave(he.current.container,ce)},enter(he){const ce=()=>{new _ContactLoader(he.next.container)};new _Counter(he.next.container,ce,api.get("contactLoader")),api.set("contactLoader",oe,{expires:le})}},{name:"without-canvas-resume",from:{namespace:["article","contact","resume","404"]},to:{namespace:["resume"]},leave(he){const ce=this.async();new _Leave(he.current.container,ce)},enter(he){const ce=()=>{new _ResumeLoader(he.next.container)};new _Counter(he.next.container,ce,api.get("resumeLoader")),api.set("resumeLoader",oe,{expires:le})}},{name:"without-canvas to with-canvas",from:{namespace:["article","contact","resume","404"]},to:{namespace:["home","loves","thoughts","life","work"]},leave(he){const ce=this.async();new _Leave(he.current.container,ce)},enter(he){const ce=he.next.container,de=()=>{te.add(re,()=>{const fe=$(ce).find(".hero__img").attr("aspect"),pe=new HeroImg({dom:ce.querySelector(".hero")},fe);ee.heroImg=pe})};let ue;he.next.container.getAttribute("data-barba-namespace")=="home"&&(ue=api.get("homeLoader"),api.set("homeLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="loves"&&(ue=api.get("lovesLoader"),api.set("lovesLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="thoughts"&&(ue=api.get("thoughtsLoader"),api.set("thoughtsLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="life"&&(ue=api.get("lifeLoader"),api.set("lifeLoader",oe,{expires:le})),he.next.container.getAttribute("data-barba-namespace")=="work"&&(ue=api.get("workLoader"),api.set("workLoader",oe,{expires:le})),new _Counter(he.next.container,de,ue)}},{name:"with-canvas to without-canvas-contact",from:{namespace:["home","loves","thoughts","life","work"]},to:{namespace:["contact"]},leave(he){const ce=this.async();new _Leave(he.current.container,ce)},enter(he){te.add(re,()=>{ee.heroImg.destroy()});const ce=()=>{new _ContactLoader(he.next.container)};new _Counter(he.next.container,ce,api.get("contactLoader")),api.set("contactLoader",oe,{expires:le})}},{name:"with-canvas to without-canvas-article",from:{namespace:["home","loves","thoughts","life","work"]},to:{namespace:["article"]},leave(he){const ce=this.async();new _Leave(he.current.container,ce)},enter(he){te.add(re,()=>{ee.heroImg.destroy()});const ce=()=>{new _ArticleLoader(he.next.container)};new _Counter(he.next.container,ce,api.get("articleLoader")),api.set("articleLoader",oe,{expires:le})}},{name:"with-canvas to without-canvas-resume",from:{namespace:["home","loves","thoughts","life","work"]},to:{namespace:["resume"]},leave(he){const ce=this.async();new _Leave(he.current.container,ce)},enter(he){te.add(re,()=>{ee.heroImg.destroy()});const ce=()=>{new _ResumeLoader(he.next.container)};new _Counter(he.next.container,ce,api.get("resumeLoader")),api.set("resumeLoader",oe,{expires:le})}}]}),ct.hooks.once();{let he=$("main");this.splitLoader=new _SplitLoading,this.scroll=new Scroll,this.utils=new Utils(he),this.switcher=new Switcher,this.burger=new Burger,this.screensaver=new ScreenSaver,this.resize=new Resize,setTimeout(()=>{window.scrollTo({top:0,behavior:"instant"}),se()},1)}ct.hooks.after(async he=>{await restartWebflow(),se()}),ct.hooks.enter(he=>{he.next.container.querySelectorAll("video").forEach(function(de){de.load()})})}}new App});
